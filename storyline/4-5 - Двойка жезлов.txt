const
IZL_OBJ_CAMP = 27@
IZL_OBJ_PIZDIM = 26@
PREV_TRADER_MODEL = $TRADER_MODEL[14]
end

:TERRYT3
thread 'TERRYT3' 

IZL_OBJ_CAMP = object.Init(19051,1351.7, -1674.69, 14.3)
0453: set_object IZL_OBJ_CAMP XY_rotation 0.0 0.0 angle 90.0
IZL_OBJ_PIZDIM = object.Init(19051,1098.38, -1159.57, 39.3943)
0453: set_object IZL_OBJ_PIZDIM XY_rotation 0.0 0.0 angle 91.0

0629: change_integer_stat 258 to -4 
$SAVESTATUS = 1
$SAVESTATUS_TRUE = 1  
$SAVE_MISSION_START_FLAG = 1
$SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] = 15590  

repeat
wait 0    
fade 0 0 
until $ONMISSION == 0 

Actor.PutAtNoOffset(PLAYER_ACTOR, 2680.3191, -640.857, 88.3581)
Actor.Angle(PLAYER_ACTOR) = 180.9381
camera.Restore_WithJumpCut()
create_thread @3D_REFR

create_thread @PTL_TXT
wait $GAME_SAVE_WAIT_TIME 
$PREPARING_TEXT_OFF = 1 
wait 10  
$PLAYER_HEALTH = actor.Health(PLAYER_ACTOR)

0A8D: 0@ = read_memory 6393978 size 4 virtual_protect 1 
0A8D: 1@ = read_memory 6393982 size 1 virtual_protect 1 

wait 1 

0A8C: write_memory 6393978 size 4 value -1869574000 virtual_protect 1 
0A8C: write_memory 6393982 size 1 value 144 virtual_protect 1 

065C: release_decision_maker $DEC_PEOPLE 
wait 10
03D8: show_save_screen 

wait 2 
0A8C: write_memory 6393978 size 4 value 0@ virtual_protect 1 
0A8C: write_memory 6393982 size 1 value 1@ virtual_protect 1 
   
repeat
wait 0
fade 0 0 
$SAVESTATUS = 1
$SAVESTATUS_TRUE = 1
until 03D9:   save_done

player.CanMove(PLAYER_CHAR) = false
fade 0 0

repeat
wait 0
until $SAVESTATUS == 0

camera.Restore_WithJumpCut()       
fade 0 0              

while $SAVING_DELAY == 1
wait 0
fade 0 0 
end

MAIN_QUEST_MUSIC_FLAG = 1
wait 1000

if 
2@ == 1
then
create_thread @NO_WAY 1
CANT_CAPTURE_SHIT = 2
end

while true
wait 0
$END_FADING_MUSIC_FAST = 1

if and
$MUSIC_FADE_ENDED[0] == 1
$MUSIC_FADE_ENDED[1] == 1
$MUSIC_FADE_ENDED[2] == 1
$MUSIC_FADE_ENDED[3] == 1
$MUSIC_FADE_ENDED[4] == 1
then
$END_FADING_MUSIC_FAST = 0
break
end

end

$MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3.mp3")
Audiostream.PerformAction($MUSIC_MISSION, PLAY)
Audiostream.Loop($MUSIC_MISSION, 1)
Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000

////////////////////////////////////////////////////////

$PREPARING_TEXT_OFF = 0
PLAYER_NO_ITEMS_FLAG = 0
create_thread @PED_BKP PLAYER_ACTOR 371

if
8491: not  actor PLAYER_ACTOR has_weapon 151
then

0781: get_weapon_with_ID 151 model_to 0@

while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,151,1)
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0

end

USHER_STORY_CREATE_NICOLS_FLAG = 1
USHER_STORY_FEATRUES_LOCKED = -4

0459: end_thread_named 'ARMY_SP'
0459: end_thread_named 'BNDT_SP'
0459: end_thread_named 'FRMR_SP'
0459: end_thread_named 'SWAT_SP'
0459: end_thread_named 'C_MENU'

TERRY_THREAD_QUEST_MARKER = Marker.CreateIconWithoutSphere(43, 2132.073, -2278.9604, 20.6719)

//0AF1: write_int 3 to_ini_file "saves/ZACM.set" section "SCR" key "FS3"

$SAVESTATUS = 0
$SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1
Actor.PutAtNoOffset(PLAYER_ACTOR, 2134.1069, -2276.9978, 20.6719)
Actor.Angle(PLAYER_ACTOR) = 134.75
camera.Restore_WithJumpCut()
create_thread @3D_REFR

if
LATEST_CAR_SLOT_USED == -1
then
gosub @TERRY_THREAD_CREATE_VICTORIA
create_thread @C_MENU 1
SUPPLY_QUEST_TRUCK = -1

$CAR_SAVE_BANKA_COUNT[LATEST_CAR_SLOT_USED] = 5
$CAR_SAVE_HEAL_COUNT[LATEST_CAR_SLOT_USED] = 4
$CAR_SAVE_BINT_COUNT[LATEST_CAR_SLOT_USED] = 4
0AD3: 4@s = format "CR%d" LATEST_CAR_SLOT_USED
0AF1: write_int 88 to_ini_file "data\survival.set" section 4@s key "WEP_SLOT1_ID"
0AF1: write_int 240 to_ini_file "data\survival.set" section 4@s key "WEP_SLOT1_AMMO"
0AF1: write_int 18 to_ini_file "data\survival.set" section 4@s key "WEP_SLOT2_ID"
0AF1: write_int 5 to_ini_file "data\survival.set" section 4@s key "WEP_SLOT2_AMMO"
$RADIO = 1

repeat
wait 0
until 056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined

end

$QUEST_READY_FLAG = -116

$CAMP_SPOTTED_FLAG = 1
$CAMP_SPOTTED_FLAG_SAVE = 0 

0318: set_latest_mission_passed 'STRB133'
Text.ShowStyled('STRB133', 3000, 2) 

v$OBJECTIVE = "STRB93"

fade 1 2000
create_thread @3D_REFR
$HUD_REMOVE = 0
player.CanMove(PLAYER_CHAR,true)

PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
$PHRASES_OFF_FLAG = 0
INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0         

if
$CHEATS_ON == 1
then

if and
8AB0: not  key_pressed 49
8AB0: not  key_pressed 50
8AB0: not  key_pressed 51
8AB0: not  key_pressed 52
then
//ass
else
jump to @FREEPLAY4_SKIP_NICOLS_DIALOG
end

end

repeat
wait 0

if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1  
8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos 2124.8506 -2275.9316 20.6719 radius 5.0 
    then        
    actor.PutAtNoOffset(PLAYER_ACTOR,2124.8506, -2275.9316, 20.6719)
    actor.Angle(PLAYER_ACTOR) = 70.3342
    camera.Restore_WithJumpCut()
    create_thread @3D_REFR
    $TALK_SIMULATE = 1                     
    end     

gosub @FREEPLAY_SAVE_CHECK

if
not $CAMP_NUMBER == 8
then
if
not BASE_TEAMMATE_AGRED == 1
jf @TERRY_THREAD_FAILED_AGRO
end
        
if or
803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
$ENTERED_CAMP_NUMBER == -1
jf @TERRY_THREAD_FAILED_LDEAD 
if
$SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
jf @TERRY_THREAD_FAILED_KETER_WRECKED   
if
not actor.Dead(PLAYER_ACTOR)
jf @TERRY_THREAD_FAILED_PLAYER_DEAD
if
056D:   actor $SURVIVER[0] defined
then                 
if 
not actor.Dead($SURVIVER[0]) 
jf @TERRY_THREAD_FAILED_TERRY_DEAD
end

if and
$QUEST_READY_FLAG == -117 
$PHRASES_OFF_FLAG == 0
    then
    break
    end

until false

v$OBJECTIVE = "DUMMY"
$QUEST_READY_FLAG = 0

fade 0 500
player.CanMove(0,false)
$HUD_REMOVE = 0
wait 500

:FREEPLAY4_SKIP_NICOLS_DIALOG

actor.PutAtNoOffset(PLAYER_ACTOR,2210.1011, -2292.1606, 14.7647)
actor.Angle(PLAYER_ACTOR) = 316.12
camera.Restore_WithJumpCut()
create_thread @3D_REFR

$ALLOW_RANDOM_SURVIVERS = 1
$RANDOM_PEOPLE_SPAWN_FLAG = 1
CARL_SPAWN_FLAG = 0
MIKE_SPAWN_FLAG = 2
$FREND_NUMBER = 0
$SURVIVOR_ALLOW_SPAWN[0] = 1
$DELETE_TEAMMATES = 0
0459: end_thread_named 'SURVVER'
create_thread @SURVVER
$HELP_INST_FLAG = 1
CUSTOM_MODE_NO_TEAMMATES_DEATHS = 1
  
$PEOPLE_SPAWN_ON_COORD = 1  
04C4: store_coords_to $PEOPLE_X $PEOPLE_Y $PEOPLE_Z from_actor PLAYER_ACTOR with_offset 0.0 6.0 0.0 

repeat
wait 0
until 056D:   actor $SURVIVER[0] defined 

repeat
wait 0                                                
until 06EE:   actor $SURVIVER[0] in_group PLAYER_GROUP

wait 500
fade 1 500
$HUD_REMOVE = 0
player.CanMove(0,true)
wait 500

TEAM1_SKIN = 1
06D1: v$SURVIVOR_PROLOUGE[0] = "STRB63" // v$ = string
$SURV1_TEAM_TIME = 13200
ZAME_SKIN1_CUSTOM_NAME = 1
0ADE: 0@ = text_by_GXT_entry "N_9199"
0AD3: TEAM1_NAME = format "%s" 0@

0AE0: remove_dynamic_GXT_entry "F_NAME1"
0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME

$RANDOM_PEOPLE_SPAWN_FLAG = 0
//create_thread @TERRY_D

0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP

if
$CHEATS_ON == 1
then

if and
8AB0: not  key_pressed 49
8AB0: not  key_pressed 50
8AB0: not  key_pressed 51
8AB0: not  key_pressed 52
8AB0: not  key_pressed 53
then
v$OBJECTIVE = "STRB121"
32@ = 0
TERRY_THREAD_CURRENT_DIALOG_INDEX = 0
TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(31, $CAMP_X[7], $CAMP_Y[7], $CAMP_Z[7])
jump to @FREEPLAY4_LOOP_START
end

else
v$OBJECTIVE = "STRB121"
32@ = 0
TERRY_THREAD_CURRENT_DIALOG_INDEX = 0
TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(31, $CAMP_X[7], $CAMP_Y[7], $CAMP_Z[7])
jump to @FREEPLAY4_LOOP_START
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 49
then
v$OBJECTIVE = "STRB124"
marker.Disable(TERRY_THREAD_QUEST_MARKER)
TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(52, $TRADER_X[1],$TRADER_Y[1],$TRADER_Z[1])   
0084: PREV_TRADER_MODEL = $TRADER_MODEL[1] // (int) 
$TRADER_MODEL[1] = 3136
TERRY_THREAD_CURRENT_DIALOG_INDEX = 3
jump to @FREEPLAY4_LOOP_START
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 50
then
v$OBJECTIVE = "STRB125"
TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(46, 200.517044, -1362.229370, 50.046558)
0A40: MISSION_MARKER = create_entrance_marker_at 200.517044 -1362.229370 50.546558 color 14
TERRY_THREAD_CURRENT_DIALOG_INDEX = 4
32@ = 0
0776: create_objects_in_object_group "usher_h"
jump to @FREEPLAY4_LOOP_START
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 51
then
0776: create_objects_in_object_group "melsang"        
v$OBJECTIVE = "STRB127"                
marker.Disable(TERRY_THREAD_QUEST_MARKER)
018A: TERRY_THREAD_QUEST_MARKER = create_checkpoint_at 1150.355103 -1206.821777 19.14782 
03BC: MISSION_SPHERE = create_sphere_at 1150.355103 -1206.821777 19.14782 radius 2.0 
TERRY_THREAD_CURRENT_DIALOG_INDEX = 9
jump to @FREEPLAY4_LOOP_START
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 52
then
v$OBJECTIVE = "STRB130"
32@ = 0
TERRY_THREAD_CURRENT_DIALOG_INDEX = 10
TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(31, $CAMP_X[7], $CAMP_Y[7], $CAMP_Z[7])  
jump to @FREEPLAY4_LOOP_START
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 53
then
v$OBJECTIVE = "STRB131"
32@ = 0
marker.Disable(TERRY_THREAD_QUEST_MARKER)
018A: TERRY_THREAD_QUEST_MARKER = create_checkpoint_at 2174.415527 -2265.320313 13.5469   
TERRY_THREAD_CURRENT_DIALOG_INDEX = 11 
jump to @FREEPLAY4_LOOP_START
end

:FREEPLAY4_LOOP_START

while true
wait 0

gosub @FREEPLAY_DIALOG_DANGER_CHECK

if
056D:   actor $SURVIVER[0] defined
then
if or
8EE4: not locate_char_distance_to_char $SURVIVER[0] char PLAYER_ACTOR radius 30.0
$SAVESTATUS_TRUE == 1
$SAVING_DELAY == 1
    then
    0@ = 1
    end
end        
    
if and
0@ == 1 
$DIALOG_PAUSE == 0
    then
    $DIALOG_PAUSE = 1
    end
    
if and
0@ == 0 
$DIALOG_PAUSE == 1
    then
    $DIALOG_PAUSE = 0
    end

gosub @INFECTED_AREA_TERRY_TALK_CHECK
gosub @FREEPLAY_SAVE_CHECK

if
not $CAMP_NUMBER == 8
then
if
not BASE_TEAMMATE_AGRED == 1
jf @TERRY_THREAD_FAILED_AGRO 
end
       
if or
803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
$ENTERED_CAMP_NUMBER == -1
jf @TERRY_THREAD_FAILED_LDEAD  
if
$SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
jf @TERRY_THREAD_FAILED_KETER_WRECKED  
if
not actor.Dead(PLAYER_ACTOR)
jf @TERRY_THREAD_FAILED_PLAYER_DEAD  
if
056D:   actor $SURVIVER[0] defined
then               
if 
not actor.Dead($SURVIVER[0]) 
jf @TERRY_THREAD_FAILED_TERRY_DEAD
end
        
if and
$CHEATS_ON == 1
$DIALOG_END == 1
0E3D: is_key_just_pressed 81
    then
    32@ = 99999999
    0AD1: show_formatted_text_highpriority "TERRY_THREAD_CURRENT_DIALOG_INDEX is ~n~%d" time 1000 TERRY_THREAD_CURRENT_DIALOG_INDEX
    wait 1000
    end           

if
056D:   actor $SURVIVER[0] defined
then
if and
80F2: not  actor $SURVIVER[0] near_actor PLAYER_ACTOR radius 100.0 100.0 0  
not $INT_ENTERING_FLAG == 1
    then
            
    if or
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 5
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 6
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 7
    then                              
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    0A41: destroy_entrance_marker MISSION_MARKER
    end
    
    if or
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 0
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 1
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 2 
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 3
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 4
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 9
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 10
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 11
    then
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    end
    
    $DIALOG_PAUSE = 1
    
    MISSION_MARKER = marker.CreateAboveActor($SURVIVER[0])
    07E0: set_marker MISSION_MARKER type_to 1
    
    v$OBJECTIVE = "STRB65"
    
    while 80F2: not  actor $SURVIVER[0] near_actor PLAYER_ACTOR radius 100.0 100.0 0  
    wait 0    
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO
    end    
    
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end    
        
    end
    
    marker.Disable(MISSION_MARKER)
    if or
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 5
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 6
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 7
    then
    v$OBJECTIVE = "STRB125"
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(46, 200.517044, -1362.229370, 50.046558)
    0A40: MISSION_MARKER = create_entrance_marker_at 200.517044 -1362.229370 50.546558 color 14
    end           
    
    if or
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 0
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 1
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 2
    then           
    v$OBJECTIVE = "STRB121" 
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(31, $CAMP_X[7], $CAMP_Y[7], $CAMP_Z[7])
    end
    
    if
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 3
    then 
    v$OBJECTIVE = "STRB124"
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(52, $TRADER_X[1],$TRADER_Y[1],$TRADER_Z[1]) 
    end
    
    if
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 4 
    then
    v$OBJECTIVE = "STRB125"
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(46, 200.517044, -1362.229370, 50.046558)
    end
    
    if
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 9 
    then
    v$OBJECTIVE = "STRB127"
    018A: TERRY_THREAD_QUEST_MARKER = create_checkpoint_at 1150.355103 -1206.821777 19.14782 
    03BC: MISSION_SPHERE = create_sphere_at 1150.355103 -1206.821777 19.14782 radius 2.0 
    end
    
    if
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 10 
    then
    v$OBJECTIVE = "STRB130"
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(31, $CAMP_X[7], $CAMP_Y[7], $CAMP_Z[7])  
    end
    
    if
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 11 
    then
    v$OBJECTIVE = "STRB131"    
    018A: TERRY_THREAD_QUEST_MARKER = create_checkpoint_at 2174.415527 -2265.320313 13.5469   
    end
           
    $DIALOG_PAUSE = 0     
       
    end
end    

////////////////////////Первый диалог (мардрожи соска, небось трахал её?)////////////////////////

if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 0
0@ == 0
    then
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 1
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY637"
    v$ST_DIALOG[1] = "STRY638"
    v$ST_DIALOG[2] = "STRY639"
    v$ST_DIALOG[3] = "STRY640"
    v$ST_DIALOG[4] = "STRY641"
    v$ST_DIALOG[5] = "DUMMY"
    v$ST_DIALOG[6] = "DUMMY"
    v$ST_DIALOG[7] = "DUMMY"
    v$ST_DIALOG[8] = "DUMMY"
    v$ST_DIALOG[9] = "STRY642"
    v$ST_DIALOG[10] = "STRY643"
    v$ST_DIALOG[11] = "STRY644"
    v$ST_DIALOG[12] = "STRY645"
	v$ST_DIALOG[13] = "STRY646"
    $DIALOG_COUNT = 13
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    end
    
if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 1
$DIALOG_END == 1
    then
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 2
    32@ = 0
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    else
    if and
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 1
    $DIALOG_END == 0
        then
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
        CAMP_DONT_SAY_HELLO_FLAG = 1
        $PHRASES_OFF_FLAG = 1
        end
    end
    
if or
TERRY_THREAD_CURRENT_DIALOG_INDEX == 1
TERRY_THREAD_CURRENT_DIALOG_INDEX == 2  
then
if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1
8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 230.0
    then
    036A: put_actor PLAYER_ACTOR in_car $USED_CAR[LATEST_CAR_SLOT_USED]
    0430: put_actor $SURVIVER[0] into_car $USED_CAR[LATEST_CAR_SLOT_USED] passenger_seat 0
    car.PutAt($USED_CAR[LATEST_CAR_SLOT_USED],1553.0011, -1590.2538, 12.9613)
    car.Angle($USED_CAR[LATEST_CAR_SLOT_USED]) = 89.3457
    camera.Restore_WithJumpCut()
    car.SetSpeedInstantly($USED_CAR[LATEST_CAR_SLOT_USED],20.0)
    create_thread @3D_REFR
    $END_DIALOG_INST = 1
    wait 0
    end   
end 

if
TERRY_THREAD_CURRENT_DIALOG_INDEX == 3
then
if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1
    then
    $TRADER_SPOTTED_FLAG = 2
    actor.PutAtNoOffset(PLAYER_ACTOR,695.1859, -1650.5369, 4.0961)    
    camera.Restore_WithJumpCut()
    create_thread @3D_REFR
    $END_DIALOG_INST = 1
    wait 0
    jump to @FREEPLAY4_SKIP_TORGOSHIT
    end   
end

if or
TERRY_THREAD_CURRENT_DIALOG_INDEX == 4
TERRY_THREAD_CURRENT_DIALOG_INDEX == 5
TERRY_THREAD_CURRENT_DIALOG_INDEX == 6
then
if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,207.6227, -1357.2909, 50.5159)  
    actor.Angle(PLAYER_ACTOR) = 125.2352  
    camera.Restore_WithJumpCut()
    create_thread @3D_REFR
    $END_DIALOG_INST = 1
    wait 0
    end   
end

if
TERRY_THREAD_CURRENT_DIALOG_INDEX == 9
then
if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,1150.355103 -1206.821777 19.14782)  
    camera.Restore_WithJumpCut()
    create_thread @3D_REFR
    $END_DIALOG_INST = 1
    wait 0
    end   
end 

if
TERRY_THREAD_CURRENT_DIALOG_INDEX == 10
then
if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1
8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 230.0
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,1411.9097, -1649.3878, 13.3828)  
    actor.Angle(PLAYER_ACTOR) = 90.7194  
    camera.Restore_WithJumpCut()
    create_thread @3D_REFR
    $END_DIALOG_INST = 1
    wait 0
    end   
end

if
TERRY_THREAD_CURRENT_DIALOG_INDEX == 11
then
if and
0E3E: is_button_just_pressed 0 button 17
$CHEATS_ON == 1
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,2174.415527, -2265.320313, 13.5469)  
    actor.Angle(PLAYER_ACTOR) = 90.7194  
    camera.Restore_WithJumpCut()
    create_thread @3D_REFR
    $END_DIALOG_INST = 1
    wait 0
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    jump to @SKIP_INCAR_SHIT
    end   
end
    
////////////////////////Эдэм эдэм эдэм БУМ!!!////////////////////////    

if or
TERRY_THREAD_CURRENT_DIALOG_INDEX == 1
TERRY_THREAD_CURRENT_DIALOG_INDEX == 2  
then  
if 
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 230.0
    then 
    
    $ONMISSION = 1
    $DIALOG_PAUSE = 0
    v$OBJECTIVE = "DUMMY"  
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_MISSION)
    
    ///////////////////////////////////////////////////////////
    
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 2
    32@ = 0
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    
    CURRENT_USHER_TUTORIAL_NUM = -41                                
    
    repeat
    wait 0
    $END_DIALOG_INST = 1
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 300.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1 
    
    wait 0
    v$ST_DIALOG[0] = "STRY650"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    
    repeat
    wait 0
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 300.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1 
    
    020C: create_explosion_with_radius 0 at 1350.929565 -1674.135742 13.605249
    $SHIT_FUCK = Audiostream.Load3d("audio\sounds\music\usher_music\emitter_explosion.mp3")
    2506: SET_AUDIO_STREAM_SOURCE_SIZE $SHIT_FUCK 256.0
    Audiostream.SetPosition($SHIT_FUCK,1350.929565, -1674.135742,13.605249) //ZXY (old, XYZ new)
    Audiostream.Loop($SHIT_FUCK, 0)
    0089: 0@ = $SOUNDS_VOLUME // (float)
    0@ *= 2.0
    Audiostream.Volume($SHIT_FUCK) = $SOUNDS_VOLUME
    Audiostream.PerformAction($SHIT_FUCK,PLAY)
    object.Destroy(IZL_OBJ_CAMP)
    BOLVANS_DONT_DO_ACTIVITES = 1
    
    v$OBJECTIVE = "STRB123"            
    018A: MISSION_CHECKPOINT = create_checkpoint_at 1411.7622 -1649.0784 13.3828
    03BC: MISSION_SPHERE = create_sphere_at 1411.7622 -1649.0784 13.3828 radius 2.0
    
    wait 1000
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY652"
    v$ST_DIALOG[1] = "STRY653"
    v$ST_DIALOG[2] = "STRY654"
    $DIALOG_COUNT = 2
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    create_thread @HOR_SND     
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3CA.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    ////////////////////////////////////////////////////////
    
    $ALLOW_SAFETY_IN_CAMPS = 0
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until 056D:   actor CAMP_LEADER_ACTOR_VAR defined
    
    actor.PutAtNoOffset(CAMP_LEADER_ACTOR_VAR,1400.93 -1647.019 13.377668)
    actor.Angle(CAMP_LEADER_ACTOR_VAR) = 248.980530
    
    repeat
    wait 0     
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 300.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1411.7622 -1649.0784 13.3828 radius 10.0
    then
    $END_DIALOG_INST = 1
    wait 0
    break
    end
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0           
    
    repeat
    wait 0  
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 300.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    if and
    0E3E: is_button_just_pressed 0 button 17
    $CHEATS_ON == 1
    8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos 1415.246 -1647.8456 12.9569 radius 30.0
        then
        car.PutAt($USED_CAR[LATEST_CAR_SLOT_USED],1415.246, -1647.8456, 12.9569)
        car.Angle($USED_CAR[LATEST_CAR_SLOT_USED]) = 60.3237
        camera.Restore_WithJumpCut()
        car.SetSpeedInstantly($USED_CAR[LATEST_CAR_SLOT_USED],20.0)
        create_thread @3D_REFR
        $END_DIALOG_INST = 1
        wait 0
        end
    
    until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1411.7622 -1649.0784 13.3828 radius 10.0
    
    Audiostream.Release($SHIT_FUCK)
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY670"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0       
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 300.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end     
    
    until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1411.7622 -1649.0784 13.3828 radius 3.0
    
    $PHRASES_OFF_FLAG = 0
    
    v$OBJECTIVE = "DUMMY"
    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    
    if and
    $CHEATS_ON == 1
    0AB0:  key_pressed 81
    then    
    actor.PutAtNoOffset(CAMP_LEADER_ACTOR_VAR,1347.9705 -1664.5867 13.5929)
    actor.Angle(CAMP_LEADER_ACTOR_VAR) = 197.622177
    jump to @FREEPLAY4_SKIP_FIGHT_PART
    end
    
    0221: set_player PLAYER_CHAR apply_brakes_to_car 1
    fade 0 500
    $HUD_REMOVE = 1
    player.CanMove(0,false)
    wait 500           
    
    wait 250                 
    0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1411.7622 -1649.0784 13.3828
    actor.PutAtNoOffset(PLAYER_ACTOR,1411.7622 -1649.0784 13.3828)
    actor.Angle(PLAYER_ACTOR) = 106.9649
    wait 250
    0362: remove_actor $SURVIVER[0] from_car_and_place_at 1412.3022 -1651.2162 13.3828
    0337: set_actor $SURVIVER[0] visibility 0
    0619: enable_actor $SURVIVER[0] collision_detection 0
    wait 250
    0221: set_player PLAYER_CHAR apply_brakes_to_car 0
    
    if
    056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
    then          
    car.PutAt($USED_CAR[LATEST_CAR_SLOT_USED],1418.3199,-1650.002,12.9599)
    end        
    
    while not model.Available(9199)
    wait 0
    model.Load(9199)
    mload
    end
    
    $MODEL_LOAD[25] = actor.Create(26,9199,1411.0398, -1648.3392, 13.3828)
    actor.Angle($MODEL_LOAD[25]) = 115.0536
    0D10: set_actor $MODEL_LOAD[25] alpha 255 // IF and SET
    create_thread @PED_BKP $MODEL_LOAD[25] 371
    
    0781: get_weapon_with_ID 88 model_to 0@
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    actor.GiveWeaponAndAmmo($MODEL_LOAD[25],88,1)
    
    0A1D: AS_actor PLAYER_ACTOR rotate_to_and_look_at_actor $ARMY69_2[17]
    0A1D: AS_actor $ARMY69_2[17] rotate_to_and_look_at_actor PLAYER_ACTOR
    0A1D: AS_actor $MODEL_LOAD[25] rotate_to_and_look_at_actor $ARMY69_2[17]
    0A1D: AS_actor CAMP_LEADER_ACTOR_VAR rotate_to_and_look_at_actor $MODEL_LOAD[25]
    wait 500
    0635: AS_actor $ARMY69_2[17] aim_at_actor PLAYER_ACTOR 999999 ms
    0635: AS_actor $MODEL_LOAD[25] aim_at_actor CAMP_LEADER_ACTOR_VAR 999999 ms
    0635: AS_actor CAMP_LEADER_ACTOR_VAR aim_at_actor $MODEL_LOAD[25] 999999 ms
    05C4: AS_actor PLAYER_ACTOR hands_up 999999 ms    
    wait 500
    
    $SAVESTATUS = 1
    BLACK_POLOSKI_ON = 1
    cinema.Widescreen(1)
    
    if
    $FP_ACTIVATED == 1
    then
    repeat
    wait 0
    until $FP_ACTIVATED == 0
    end
    
    camera.SetPosition(1414.683350 -1647.216553 14.503966,0.0,0.0,0.0)
    camera.PointAt(1413.781128 -1647.637817 14.411126,2)
    
    0A8C: write_memory 0x0B79100 size 1 value 1 virtual_protect 0
    
    fade 1 500
    wait 500
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY671"
    v$ST_DIALOG[1] = "STRY672"
    v$ST_DIALOG[2] = "STRY673"
    v$ST_DIALOG[3] = "STR674"
    v$ST_DIALOG[4] = "STRY674"    
    $DIALOG_COUNT = 4
    create_thread @DG_SYS2
    
    repeat
    wait 0    
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    0687: clear_actor $ARMY69_2[17] task
    0687: clear_actor $MODEL_LOAD[25] task
    0687: clear_actor CAMP_LEADER_ACTOR_VAR task
    0687: clear_actor PLAYER_ACTOR task
    
    wait 500    
    0A1D: AS_actor CAMP_LEADER_ACTOR_VAR rotate_to_and_look_at_actor $ARMY69_2[17]
    wait 500
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY675"
    v$ST_DIALOG[1] = "STRY676"   
    $DIALOG_COUNT = 1
    0084: $DIALOG_ACTOR[0] = CAMP_LEADER_ACTOR_VAR // (int)
    0084: $DIALOG_ACTOR[1] = $MODEL_LOAD[25] // (int)
    $DIALOG_COUNT = 1
    create_thread @DG_SYS
    
    repeat
    wait 0    
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    fade 0 500
    wait 500 
     
    actor.DestroyInstantly($MODEL_LOAD[25])
    0337: set_actor $SURVIVER[0] visibility 1
    0619: enable_actor $SURVIVER[0] collision_detection 1
    actor.PutAtNoOffset($SURVIVER[0],1411.0398, -1648.3392, 13.3828)
    actor.Angle($SURVIVER[0]) = 115.0536     
    
    BLACK_POLOSKI_ON = 0
    cinema.Widescreen(0)
    camera.Restore_WithJumpCut()
    0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
    05D4: AS_actor CAMP_LEADER_ACTOR_VAR rotate_angle 248.980530        
    
    wait 1000             
    
    fade 1 500
    $HUD_REMOVE = 0
    player.CanMove(0,true)
    wait 500 
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY677"
    v$ST_DIALOG[1] = "STRY678"
    v$ST_DIALOG[2] = "STRY679"
    v$ST_DIALOG[3] = "STRY680"
    v$ST_DIALOG[4] = "STRY681"
    v$ST_DIALOG[5] = "STRY682"
    $DIALOG_COUNT = 5
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0    
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 180.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 250
    wait 250
    audiostream.Release($MUSIC_MISSION)
    
    ///////////////////////////////////////////////////////////
//    
//    while true
//    wait 0
//    
//    if and
//    $MUSIC_FADE_ENDED[0] == 1
//    $MUSIC_FADE_ENDED[1] == 1
//    $MUSIC_FADE_ENDED[2] == 1
//    $MUSIC_FADE_ENDED[3] == 1
//    $MUSIC_FADE_ENDED[4] == 1
//    then
//    $END_FADING_MUSIC_FAST = 0
//    break
//    end
//    
//    end
    
    /////////////////////////////////////////////////

    ZOMBIES_NOTSPAWN = 0    
    $ZOMBIES_ALWAYS_VISIBLE = 1
    $ZOMBIE_SPAWN_ON_COORD = 1
    $ZOMBIE_COORD_MAX = 2    
          
    $ZOMBIE_X[0] = 1429.528
    $ZOMBIE_Y[0] = -1620.9404
    $ZOMBIE_Z[0] = 13.3828
          
    $ZOMBIE_X[1] = 1429.5535
    $ZOMBIE_Y[1] = -1675.6271
    $ZOMBIE_Z[1] = 13.3828
    
    /////////////////////////////////////////////////
    
    $SAVESTATUS = 0
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    $TANK_NOTSPAWN_FLAG = 1    
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3C.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    //////////////////////////////////////////////////////// 
    
    v$OBJECTIVE = "STR121B"
    
    32@ = 0
    
    repeat
    wait 0
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 180.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    if and
    0AB0:   key_pressed 81
    $CHEATS_ON == 1
    then
    break
    end
    
    $ZOMBIES_HORDE = 1
    $SAVEPLACE_ON = 0                  
    ZOMBIES_NOTSPAWN = 0
    
    until 32@ > 60000
    
    $ZOMBIES_HORDE = 0
    MQ_ALLOW_HORDE = 0
    ZOMBIES_NOTSPAWN = 1
    $ZOMBIES_ALWAYS_VISIBLE = 0    
    
    v$OBJECTIVE = "STR121C"
    
    repeat
    wait 0   
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 180.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $ZOMBIE_SPAWNED_COUNT == 0
    
    $ZOMBIE_SPAWN_ON_COORD = 0                          
    
    v$OBJECTIVE = "DUMMY"
          
    $TANK_X = 1415.5694
    $TANK_Y = -1641.3967
    $TANK_Z = 38.3088
    $SPAWN_TANK_ON_COORD = 1
    $TANK_NOTSPAWN_FLAG = 0
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 0
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 1
    $SPAWN_TANK_FLAG = 1
    
    $QUEST_READY_FLAG = 69
    
    repeat 
    wait 0     
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 180.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD   
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED 
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    $SAVEPLACE_ON = 0
    
    until 056D:  actor $TANK[0] defined
    
    MISSION_MARKER = marker.CreateAboveActor($TANK[0])
    
    v$OBJECTIVE = "STRB122"  
            
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point 1383.0118 -1648.105 13.38 mode 7 time 99999 ms // versionA
    05D3: AS_actor -1 goto_point 1354.7446 -1679.0713 13.6004 mode 7 time 99999 ms // versionA
    05D3: AS_actor -1 goto_point 1351.3153 -1678.9159 13.6117 mode 7 time 99999 ms // versionA
    05D3: AS_actor -1 goto_point 1347.9705 -1664.5867 13.5929 mode 7 time 99999 ms // versionA
    05D4: AS_actor -1 rotate_angle 197.622177
    0616: define_AS_pack_end 0@
    0618: assign_actor CAMP_LEADER_ACTOR_VAR to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@   
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY683"
    v$ST_DIALOG[1] = "STRY684"
    v$ST_DIALOG[2] = "STRY685"
    v$ST_DIALOG[3] = "STRY686"
    v$ST_DIALOG[4] = "STRY687"
    $DIALOG_COUNT = 4
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0        
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 180.0
    jf @TERRY_THREAD_FAILED_WALK
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0
    
    repeat
    wait 0
    
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $CAMP_X[7] $CAMP_Y[7] $CAMP_Z[7] radius 180.0
    jf @TERRY_THREAD_FAILED_WALK          
              
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $TANK_SPAWNED == 0
    
    $SAVEPLACE_ON = 1
    $ALLOW_SAFETY_IN_CAMPS = 1
    
    MQ_ALLOW_HORDE = 0
    $SPAWN_TANK_ON_COORD = 0
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1

    marker.Disable(MISSION_MARKER)
    
    0A8C: write_memory 0x0B79100 size 1 value 0 virtual_protect 0
    
    CURRENT_USHER_TUTORIAL_NUM = 0
    
    v$OBJECTIVE = "DUMMY"
    
    :FREEPLAY4_SKIP_FIGHT_PART    
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
    /////////////////////////////////////////////////////////
//    
//    while true
//    wait 0
//    
//    if and
//    $MUSIC_FADE_ENDED[0] == 1
//    $MUSIC_FADE_ENDED[1] == 1
//    $MUSIC_FADE_ENDED[2] == 1
//    $MUSIC_FADE_ENDED[3] == 1
//    $MUSIC_FADE_ENDED[4] == 1
//    then
//    $END_FADING_MUSIC_FAST = 0
//    break
//    end
//    
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_MISSION)
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    ////////////////////////////////////////////////////////        
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY688"
    v$ST_DIALOG[1] = "STRY689"
    v$ST_DIALOG[2] = "STRY690"
    v$ST_DIALOG[3] = "STRY691"
    $DIALOG_COUNT = 3
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0            
    
    v$OBJECTIVE = "STRB123"
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0    
    $QUEST_READY_FLAG = -119
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $QUEST_READY_FLAG == -120
    
    v$OBJECTIVE = "DUMMY"
    
    fade 0 500
    player.CanMove(0,false)
    $HUD_REMOVE = 0
    wait 500
    
    camera.Restore_WithJumpCut()
    CAMP_DONT_SAY_HELLO_FLAG = 1
    0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
    wait 0
    
//    actor.PutAtNoOffset(PLAYER_ACTOR,1411.6078, -1649.4482, 13.3828)
//    actor.Angle(PLAYER_ACTOR) = 271.1674
//    camera.Restore_WithJumpCut()
//    create_thread @3D_REFR
    
    fade 1 500
    player.CanMove(0,true)
    $HUD_REMOVE = 0
    wait 500
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY702"
    v$ST_DIALOG[1] = "STRY703"
    v$ST_DIALOG[2] = "STRY704"
    v$ST_DIALOG[3] = "STRY705"
    v$ST_DIALOG[4] = "STRY706"
    $DIALOG_COUNT = 4
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0
    
    CAMP_LEADER_DONT_SAY_BYE_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    
    v$OBJECTIVE = "STRB124"
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(52, $TRADER_X[1],$TRADER_Y[1],$TRADER_Z[1])
    0084: PREV_TRADER_MODEL = $TRADER_MODEL[1] // (int)
    $TRADER_MODEL[1] = 3136
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 3
    
    $ONMISSION = 0
    
    end
end    
    
////////////////////////Торговец зак////////////////////////    
    
if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 3
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos $TRADER_X[1] $TRADER_Y[1] $TRADER_Z[1] radius 120.0
    then
    
    $ONMISSION = 1
    $DIALOG_PAUSE = 0
    
    v$OBJECTIVE = "DUMMY"                               
    
    $DIALOG_PAUSE = 0            
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY707"  
    v$ST_DIALOG[1] = "STRY708"
    v$ST_DIALOG[2] = "STRY709"
    v$ST_DIALOG[3] = "STRY710"
    $DIALOG_COUNT = 3
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
        
    repeat
    wait 0
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    $TRADER_SPOTTED_FLAG = 2
    
    until $DIALOG_END == 1
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    
    :FREEPLAY4_SKIP_TORGOSHIT
    v$OBJECTIVE = "STR124B"
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until 056D:   actor $TRADER_ACTOR defined        
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    $TRADER_SPOTTED_FLAG = 2
    
    if
    056D:   actor $TRADER_ACTOR defined
        then
        if
        0104:   actor PLAYER_ACTOR near_actor $TRADER_ACTOR radius 3.0 3.0 1.0 sphere 0
            then
            break
            end
        end
    
    until false
    
    v$OBJECTIVE = "DUMMY"
    
    fade 0 500
    player.CanMove(0,false)
    $HUD_REMOVE = 1
    wait 500
    
    $ZOMBIE_REMOVE_FLAG = 1
    
    BLACK_POLOSKI_ON = 1
    cinema.Widescreen(1)
    
    if
    $FP_ACTIVATED == 1
    then
    repeat
    wait 0
    until $FP_ACTIVATED == 0
    end
    
    actor.PutAtNoOffset(PLAYER_ACTOR,694.292847 -1649.688965 4.096068)
    actor.Angle(PLAYER_ACTOR) = 188.554367
    
    0337: set_actor $SURVIVER[0] visibility 0
    0619: enable_actor $SURVIVER[0] collision_detection 0
       
//    0362: remove_actor $SURVIVER[0] from_car_and_place_at 695.795044 -1648.074463 4.096068
//    0792: disembark_instantly_actor $SURVIVER[0]              
//    actor.PutAtNoOffset($SURVIVER[0],695.795044 -1648.074463 4.096068)
//    actor.Angle($SURVIVER[0]) = 164.656754
//    0687: clear_actor $SURVIVER[0] task

    while not model.Available(9199)
    wait 0
    model.Load(9199)
    mload
    end
    
    $MODEL_LOAD[25] = actor.Create(26,9199,695.795044, -1648.074463, 4.096068)
    actor.Angle($MODEL_LOAD[25]) = 164.656754
    0D10: set_actor $MODEL_LOAD[25] alpha 255 // IF and SET
    create_thread @PED_BKP $MODEL_LOAD[25] 371
    
    camera.SetPosition(695.367493 -1646.730103 4.654498,0.0,0.0,0.0)
    camera.PointAt(695.269958 -1647.723877 4.601581,2)
    
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    06AB: set_actor $TRADER_ACTOR all_weapons_hidden 1
    
    0A1D: AS_actor PLAYER_ACTOR rotate_to_and_look_at_actor $TRADER_ACTOR
    0A1D: AS_actor $MODEL_LOAD[25] rotate_to_and_look_at_actor $TRADER_ACTOR
    0A1D: AS_actor $TRADER_ACTOR rotate_to_and_look_at_actor $MODEL_LOAD[25]
    
    wait 1000
    
    fade 1 500
    wait 500
    
    v$ST_DIALOG[0] = "STRY711"
    v$ST_DIALOG[1] = "STRY712"
    v$ST_DIALOG[2] = "STRY713"
    v$ST_DIALOG[3] = "STRY714"
    v$ST_DIALOG[4] = "STRY715"
    v$ST_DIALOG[5] = "STRY716"
    v$ST_DIALOG[6] = "STRY717"
    v$ST_DIALOG[7] = "STRY718"
    v$ST_DIALOG[8] = "STRY719"
    v$ST_DIALOG[9] = "STRY720"
    v$ST_DIALOG[10] = "STRY721"
    v$ST_DIALOG[11] = "STRY722"
    v$ST_DIALOG[12] = "STRY723"
    v$ST_DIALOG[13] = "STRY724"
    v$ST_DIALOG[14] = "STRY725"
    v$ST_DIALOG[15] = "STRY726"
    v$ST_DIALOG[16] = "STRY727"
    v$ST_DIALOG[17] = "STRY728"
    0084: $DIALOG_ACTOR[0] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[1] = $MODEL_LOAD[25] // (int)
    0084: $DIALOG_ACTOR[2] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[3] = $MODEL_LOAD[25] // (int)
    0084: $DIALOG_ACTOR[4] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[5] = PLAYER_ACTOR // (int)   
    0084: $DIALOG_ACTOR[6] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[7] = $MODEL_LOAD[25] // (int)
    0084: $DIALOG_ACTOR[8] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[9] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[10] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[11] = $TRADER_ACTOR // (int)    
    0084: $DIALOG_ACTOR[12] = $MODEL_LOAD[25] // (int)
    0084: $DIALOG_ACTOR[13] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[14] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[15] = PLAYER_ACTOR // (int)
    0084: $DIALOG_ACTOR[16] = $TRADER_ACTOR // (int)
    0084: $DIALOG_ACTOR[17] = $MODEL_LOAD[25] // (int)
    $DIALOG_COUNT = 17
    create_thread @DG_SYS
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1        
    
    fade 0 500    
    wait 500
    
    BLACK_POLOSKI_ON = 0
    cinema.Widescreen(0)
    
    actor.DestroyInstantly($MODEL_LOAD[25])
    0337: set_actor $SURVIVER[0] visibility 1
    0619: enable_actor $SURVIVER[0] collision_detection 1 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    06AB: set_actor $TRADER_ACTOR all_weapons_hidden 0
    
    wait 250
    actor.PutAtNoOffset(PLAYER_ACTOR,704.9897, -1643.4908, 3.4375)
    actor.Angle(PLAYER_ACTOR) = 269.411
    camera.Restore_WithJumpCut()
    $ZOMBIE_REMOVE_FLAG = 0    
    
    wait 500 
    fade 1 500
    player.CanMove(0,true)
    $HUD_REMOVE = 0
    wait 500
    
    v$OBJECTIVE = "STRB125"
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(46, 200.517044, -1362.229370, 50.046558)
    0A40: MISSION_MARKER = create_entrance_marker_at 200.517044 -1362.229370 50.546558 color 14
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 4
    0084: $TRADER_MODEL[1] = PREV_TRADER_MODEL // (int)
    32@ = 0
    0776: create_objects_in_object_group "usher_h"
    
    $ONMISSION = 0
        
    end    
    
////////////////////////Второй диалог (зак полный блять мудак!!!)////////////////////////

if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 4
8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos $TRADER_X[1] $TRADER_Y[1] $TRADER_Z[1] radius 50.0
    then
    $DIALOG_PAUSE = 0
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 5
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY729"
    v$ST_DIALOG[1] = "STRY730"
    v$ST_DIALOG[2] = "STRY731"
    v$ST_DIALOG[3] = "STRY732"
    v$ST_DIALOG[4] = "STRY733"
    v$ST_DIALOG[5] = "STRY734"
    v$ST_DIALOG[6] = "STRY735"
    v$ST_DIALOG[7] = "STRY736"
    v$ST_DIALOG[8] = "STRY737"
    $DIALOG_COUNT = 8
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    end
    
if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 5
$DIALOG_END == 1
    then
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 6
    32@ = 0
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    else
    if and
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 5
    $DIALOG_END == 0
        then
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
        CAMP_DONT_SAY_HELLO_FLAG = 1
        $PHRASES_OFF_FLAG = 1
        end
    end 
    
////////////////////////Третий диалог (перде люком)////////////////////////

if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 6
0EEA:  locate_char_distance_to_coordinates PLAYER_ACTOR pos 200.517044 -1362.229370 50.046558 radius 100.0
0@ == 0
    then
    $DIALOG_PAUSE = 0
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 7
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY751"
    v$ST_DIALOG[1] = "STRY752"
    v$ST_DIALOG[2] = "STRY753"
    v$ST_DIALOG[3] = "STRY754"
    v$ST_DIALOG[4] = "STRY755"
    v$ST_DIALOG[5] = "STRY756"
    $DIALOG_COUNT = 5
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    end
    
if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 7
$DIALOG_END == 1
    then
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 8
    32@ = 0
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    else
    if and
    TERRY_THREAD_CURRENT_DIALOG_INDEX == 7
    $DIALOG_END == 0    
        then
        
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
        CAMP_DONT_SAY_HELLO_FLAG = 1
        $PHRASES_OFF_FLAG = 1
        
        if
        00EC:   actor PLAYER_ACTOR sphere 0 near_point 200.517044 -1362.229370 radius 1.0 1.0
        then
        $END_DIALOG_INST = 1
        wait 0
        end
        
        end
    end         
    
////////////////////////Заход в кАнал, записка, бла бла бла////////////////////////

if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 8
00EC:   actor PLAYER_ACTOR sphere 0 near_point 200.517044 -1362.229370 radius 1.0 1.0
    then
    
    $ONMISSION = 1
    $DIALOG_PAUSE = 0
        
    player.CanMove(PLAYER_CHAR) = false
    
    INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1
    
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    marker.Disable(MISSION_CHECKPOINT)
    0A41: destroy_entrance_marker MISSION_MARKER    
    v$OBJECTIVE = "DUMMY"
        
    $SAVESTATUS = 1
    $END_DIALOG_INST = 1
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
    /////////////////////////////////////////////////////////
//    
//    while true
//    wait 0
//    $END_FADING_MUSIC_FAST = 1
//    
//    if and
//    $MUSIC_FADE_ENDED[0] == 1
//    $MUSIC_FADE_ENDED[1] == 1
//    $MUSIC_FADE_ENDED[2] == 1
//    $MUSIC_FADE_ENDED[3] == 1
//    $MUSIC_FADE_ENDED[4] == 1
//    then
//    $END_FADING_MUSIC_FAST = 0
//    break
//    end
//    
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_MISSION)
    
    ///////////////////////////////////////////////////////////
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3b.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    ////////////////////////////////////////////////////////      
    
    text.ClearAll()
    text.RemoveTextBox()
    select_interior 1
    0860: link_actor PLAYER_ACTOR to_interior 1
    04F9: set_sky_color 1 fade 0
    actor.PutAtNoOffset(PLAYER_ACTOR,201.574173 -1361.169434 41.901592)
    actor.Angle(PLAYER_ACTOR) = 314.6927
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D
    FUCK_YOU_IM_IN_INTERIOR = 1
    0776: create_objects_in_object_group "luceblood"   
    wait 1000
    
    fade 1 500
    $HUD_REMOVE = 0
    player.CanMove(PLAYER_CHAR) = true
    wait 500        
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY757"
    v$ST_DIALOG[1] = "STRY758"
    v$ST_DIALOG[2] = "STRY759" 
    v$ST_DIALOG[3] = "STRY760"   
    $DIALOG_COUNT = 3
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0
    
    v$OBJECTIVE = "DUMMY"
    018A: MISSION_CHECKPOINT = create_checkpoint_at 226.556259 -1308.868774 41.346901
    03BC: MISSION_SPHERE = create_sphere_at 226.556259 -1308.868774 41.346901 radius 1.0
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until 00EC:   actor PLAYER_ACTOR sphere 0 near_point 226.556259 -1308.868774 radius 1.0 1.0  
            
    actor.PutAtNoOffset($SURVIVER[0],224.6419, -1310.8859, 41.9016)
    actor.Angle($SURVIVER[0]) = 315.8073
    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    
    v$OBJECTIVE = "DUMMY"                   
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY761"
    v$ST_DIALOG[1] = "STRY762"
    v$ST_DIALOG[2] = "STRY763"   
    $DIALOG_COUNT = 2
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1      
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end                          
    
    until $DIALOG_END == 1
    
    $PHRASES_OFF_FLAG = 0 
    
    v$OBJECTIVE = "STRB126"    
    018A: MISSION_CHECKPOINT = create_checkpoint_at 231.205994 -1310.950806 41.346901
    03BC: MISSION_SPHERE = create_sphere_at 231.205994 -1310.950806 41.346901 radius 1.0
    
    0687: clear_actor $SURVIVER[0] task
    06C9: remove_actor $SURVIVER[0] from_group
    
    while not animation.Available("CAR_CHECKS")
    wait 0 
    animation.Load("CAR_CHECKS")
    end
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point 226.872375 -1307.496460 41.346901 mode 4 time 99999 ms // versionA
    0812: AS_actor -1 perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
    0616: define_AS_pack_end 0@
    0618: assign_actor $SURVIVER[0] to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@   
    
    28@ = 0
    
    repeat
    wait 0
    
    if and
    28@ == 0
    actor.Animation($SURVIVER[0]) == "car_check"
        then
        28@ = 1
        06AB: set_actor $SURVIVER[0] all_weapons_hidden 1        
        end
        
    if and
    28@ == 1
    not actor.Animation($SURVIVER[0]) == "car_check"
        then
        28@ = 2
        06AB: set_actor $SURVIVER[0] all_weapons_hidden 0
        0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
        0777: delete_objects_in_object_group "luceblood"        
        end  
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until 00EC:   actor PLAYER_ACTOR sphere 0 near_point 231.205994 -1310.950806 radius 1.0 1.0  
    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    
    fade 0 500
    $HUD_REMOVE = 1
    player.CanMove(0,false)
    wait 500
    
    gosub @FREEPLAY4_ZAPISKA_READ
    
    fade 1 500
    $HUD_REMOVE = 0
    player.CanMove(0,true)
    wait 500
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY764"
    v$ST_DIALOG[1] = "STRY765"
    v$ST_DIALOG[2] = "STRY766"   
    v$ST_DIALOG[3] = "STRY767" 
    v$ST_DIALOG[4] = "STRY768" 
    $DIALOG_COUNT = 4
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    $PHRASES_OFF_FLAG = 1  
    
    ////////////////////////////////////////////////////////////////////////////////////////////////  
        
    v$OBJECTIVE = "STRB134"
    018A: MISSION_CHECKPOINT = create_checkpoint_at 200.0704 -1362.344 41.9016
    0A40: MISSION_MARKER = create_entrance_marker_at 200.0704 -1362.344 42.4016 color 14
    
    repeat
    wait 0
    
    if and
    28@ == 0
    actor.Animation($SURVIVER[0]) == "car_check"
        then
        28@ = 1        
        end
        
    if and
    28@ == 1
    not actor.Animation($SURVIVER[0]) == "car_check"
        then
        28@ = 2
        0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP        
        end
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until 00EC:   actor PLAYER_ACTOR sphere 0 near_point 200.0704 -1362.344 radius 1.0 1.0
    
    $PHRASES_OFF_FLAG = 0                             
    
    fade 0 500
    $HUD_REMOVE = 1
    player.CanMove(PLAYER_CHAR) = false
    wait 500
    
    if
    86EE: not  actor $SURVIVER[0] in_group PLAYER_GROUP
    then
    06AB: set_actor $SURVIVER[0] all_weapons_hidden 0
    0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
    0777: delete_objects_in_object_group "luceblood"
    end
    
    marker.Disable(MISSION_CHECKPOINT)
    0A41: destroy_entrance_marker MISSION_MARKER    
    v$OBJECTIVE = "DUMMY"
            
    $END_DIALOG_INST = 1
    text.ClearAll()
    text.RemoveTextBox()
    select_interior 0
    0860: link_actor PLAYER_ACTOR to_interior 0
    04FA: reset_sky_colors_with_fade 0
    actor.PutAtNoOffset(PLAYER_ACTOR,201.0744, -1362.9674, 50.0416)
    actor.Angle(PLAYER_ACTOR) = 220.1476
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D   
    wait 1000
    
    $SAVESTATUS = 0              
    
    fade 1 500 
    $HUD_REMOVE = 0
    player.CanMove(PLAYER_CHAR) = true
    wait 500  
    
    INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0
    FUCK_YOU_IM_IN_INTERIOR = 0
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
    /////////////////////////////////////////////////////////
//    
//    while true
//    wait 0
//    $END_FADING_MUSIC_FAST = 1
//    
//    if and
//    $MUSIC_FADE_ENDED[0] == 1
//    $MUSIC_FADE_ENDED[1] == 1
//    $MUSIC_FADE_ENDED[2] == 1
//    $MUSIC_FADE_ENDED[3] == 1
//    $MUSIC_FADE_ENDED[4] == 1
//    then
//    $END_FADING_MUSIC_FAST = 0
//    break
//    end
//    
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_MISSION)
    
    ///////////////////////////////////////////////////////////
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    //////////////////////////////////////////////////////// 
    
    0776: create_objects_in_object_group "melsang"    
    
    v$OBJECTIVE = "STRB127"                
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    018A: TERRY_THREAD_QUEST_MARKER = create_checkpoint_at 1150.355103 -1206.821777 19.14782 
    03BC: MISSION_SPHERE = create_sphere_at 1150.355103 -1206.821777 19.14782 radius 2.0 
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 9  
    
    $ONMISSION = 0
    
    end
    
////////////////////////Фулл рекордс излучатель 3000////////////////////////    
    
if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 9
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1150.355103 -1206.821777 19.14782 radius 380.0
    then 
    
    $ONMISSION = 1
    $DIALOG_PAUSE = 0   
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY769"
    v$ST_DIALOG[1] = "STRY770"
    v$ST_DIALOG[2] = "STRY771"
    v$ST_DIALOG[3] = "STRY772"  
    $DIALOG_COUNT = 3
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    
    repeat
    wait 0
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1150.355103 -1206.821777 19.14782 radius 25.0
    
    $ONMISSION = 1
    $DIALOG_PAUSE = 0    
    
    v$OBJECTIVE = "DUMMY"    
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    03BD: destroy_sphere MISSION_SPHERE                                     
                
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY772"
    v$ST_DIALOG[1] = "STRY773"  
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1    
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
    /////////////////////////////////////////////////////////      
//    
//    while true
//    wait 0
//    $END_FADING_MUSIC_FAST = 1
//    
//    if and
//    $MUSIC_FADE_ENDED[0] == 1
//    $MUSIC_FADE_ENDED[1] == 1
//    $MUSIC_FADE_ENDED[2] == 1
//    $MUSIC_FADE_ENDED[3] == 1
//    $MUSIC_FADE_ENDED[4] == 1
//    then
//    $END_FADING_MUSIC_FAST = 0
//    break
//    end
//    
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_MISSION)
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3D.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    ////////////////////////////////////////////////////////  
        
    repeat
    wait 0
    
    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
    if
    actor.Driving(PLAYER_ACTOR)
    then    
    0@ = actor.CurrentCar(PLAYER_ACTOR)    
    0221: set_player PLAYER_CHAR apply_brakes_to_car 1
    if
    01C1:   car 0@ stopped
        then
        068B: set_car 0@ all_disembark
        end    
    end
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1  
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0             
          
    $HUNTER_X = 1226.435181
    $HUNTER_Y = -1268.070435
    $HUNTER_Z = 64.54396
    $SPAWN_HUNTER_ON_COORD = 1
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 0
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 2
    $SPAWN_HUNTER_FLAG = 1
    
    32@ = 0 
    
    repeat 
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    if and
    056D:  actor $HUNTER[0] defined
    056D:  actor $HUNTER[1] defined
    056D:  actor $HUNTER[2] defined
    $HUNTER_SPAWNED == 1
        then
        break
        end
        
    if
    32@ > 3500
        then
        jump to @KOSTIL_UBERI_POTOM_OBAZYATELNO_ETO_DLYA_BOOSTY
        end    
    
    until false
    
    if and
    056D:  actor $HUNTER[0] defined
    056D:  actor $HUNTER[1] defined
    056D:  actor $HUNTER[2] defined
    then
    0@ = 0
    1@ = 0
    2@ = 0
    0@ = marker.CreateAboveActor($HUNTER[0])
    1@ = marker.CreateAboveActor($HUNTER[1])
    2@ = marker.CreateAboveActor($HUNTER[2])
    end
    
    v$OBJECTIVE = "STRB128"
    
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 0
    
    repeat
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    if and
    actor.Dead($HUNTER[0])
    075C:   marker 0@ enabled
        then
        marker.Disable(0@)
        end
        
    if and
    actor.Dead($HUNTER[1])
    075C:   marker 1@ enabled
        then
        marker.Disable(1@)
        end
        
    if and
    actor.Dead($HUNTER[2])
    075C:   marker 2@ enabled
        then
        marker.Disable(2@)
        end        
    
    until $HUNTER_SPAWNED == 0         
    
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1
    
    v$OBJECTIVE = "DUMMY"
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY774" 
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
        
    repeat
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    
    :KOSTIL_UBERI_POTOM_OBAZYATELNO_ETO_DLYA_BOOSTY    
     
    ////////////////////////////////////////////////////////////////////////////////////////////////  
        
    v$OBJECTIVE = "STRB129"
    018A: MISSION_CHECKPOINT = create_checkpoint_at 1131.02392 -1174.754395 31.96392
    03BC: MISSION_SPHERE = create_sphere_at 1131.02392 -1174.754395 31.96392 radius 1.0
    
    0221: set_player PLAYER_CHAR apply_brakes_to_car 0
    
    repeat
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD  
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED  
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    gosub @FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF
    
    until 00EC:   actor PLAYER_ACTOR sphere 0 near_point 1131.02392 -1174.754395 radius 1.0 1.0  
    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY775"
    v$ST_DIALOG[1] = "STR775" 
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
        
    repeat
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    gosub @FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF
    
    until $DIALOG_END == 1
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0    
     
    ////////////////////////////////////////////////////////////////////////////////////////////////  
        
    v$OBJECTIVE = "STRB129"
    018A: MISSION_CHECKPOINT = create_checkpoint_at 1099.118164 -1159.930908 40.344311
    03BC: MISSION_SPHERE = create_sphere_at 1099.118164 -1159.930908 40.344311 radius 1.0
    
    repeat
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    gosub @FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF
    
    until 00EC:   actor PLAYER_ACTOR sphere 0 near_point 1099.118164 -1159.930908 radius 1.0 1.0  
    
    v$OBJECTIVE = "DUMMY"
    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    
    player.CanMove(0,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    $SAVESTATUS = 1
    
    if
    $NOT_ALLOW_COMMANDS == 0
    then
    $NOT_ALLOW_COMMANDS = 1
    0687: clear_actor $SURVIVER[0] task
    end
    
    actor.PutAtNoOffset($SURVIVER[0],1132.7639, -1170.2377, 31.9482)
    actor.Angle($SURVIVER[0]) = 68.9431
    0687: clear_actor $SURVIVER[0] task
    $PEOPLE_DONT_ATTACK = 1    
    
    repeat
    wait 0  
    Animation.Load("ON_LOOKERS") 
    until Animation.Available("ON_LOOKERS")        
    
    0615: define_AS_pack_begin 0@
    0605: actor -1 perform_animation "shout_in" IFP "ON_LOOKERS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1670
    0605: actor -1 perform_animation "shout_loop" IFP "ON_LOOKERS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 9999999
    0616: define_AS_pack_end 0@
    0618: assign_actor $SURVIVER[0] to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
            
    BLACK_POLOSKI_ON = 1
    cinema.Widescreen(1)
    
    if
    $FP_ACTIVATED == 1
    then
    repeat
    wait 0
    until $FP_ACTIVATED == 0
    end
    
    camera.SetPosition(1096.456055 -1149.453613 43.812439,0.0,0.0,0.0)
    camera.PointAt(1096.989624 -1150.260742 43.559986,2)
    
    0A1D: AS_actor PLAYER_ACTOR rotate_to_and_look_at_actor $SURVIVER[0]          
    
    wait 500 
    
    fade 1 500
    wait 500
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STR776"
    v$ST_DIALOG[1] = "STR777"
    v$ST_DIALOG[2] = "STR778" 
    $DIALOG_COUNT = 2
    $DIALOG_NOT_SKIP = 0
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
        
    repeat
    wait 0
    
    $ZOMBIES_HORDE = 1
    MQ_ALLOW_HORDE = 1
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $DIALOG_END == 1
    
    0687: clear_actor $SURVIVER[0] task
    0687: clear_actor PLAYER_ACTOR task
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0        
    
    while not animation.Available("bomber")
    wait 0 
    animation.Load("bomber")
    end
    
    0615: define_AS_pack_begin 0@    
    05D3: AS_actor -1 goto_point 1098.8142 -1159.7146 40.3443 mode 4 time 99999 ms // versionA
    05D4: AS_actor -1 rotate_angle 75.7486
    0812: AS_actor -1 perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
    0616: define_AS_pack_end 0@
    0618: assign_actor PLAYER_ACTOR to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until actor.Animation(PLAYER_ACTOR) == "BOM_PLANT"
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until not actor.Animation(PLAYER_ACTOR) == "BOM_PLANT"
    
    object.Destroy(IZL_OBJ_PIZDIM)
    EXTRA_WEIGHT = 10.0
    
    fade 0 500
    wait 500
    
    $PEOPLE_DONT_ATTACK = 0        
    
    BLACK_POLOSKI_ON = 0
    cinema.Widescreen(0)
    actor.Angle(PLAYER_ACTOR) = 249.5127
    camera.Restore_WithJumpCut()
    
    $SAVESTATUS = 0
    wait 500
    
    fade 1 500
    player.CanMove(0,true)
    $HUD_REMOVE = 0
    wait 500        
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY776"
    v$ST_DIALOG[1] = "DUMMY"
    v$ST_DIALOG[2] = "STRY777"
    v$ST_DIALOG[3] = "STRY778"
    v$ST_DIALOG[4] = "STRY779" 
    $DIALOG_COUNT = 4
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    
    $ZOMBIES_HORDE = 0
    MQ_ALLOW_HORDE = 0
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
    /////////////////////////////////////////////////////////        
//    
//    while true
//    wait 0
//    $END_FADING_MUSIC_FAST = 1
//    
//    if and
//    $MUSIC_FADE_ENDED[0] == 1
//    $MUSIC_FADE_ENDED[1] == 1
//    $MUSIC_FADE_ENDED[2] == 1
//    $MUSIC_FADE_ENDED[3] == 1
//    $MUSIC_FADE_ENDED[4] == 1
//    then
//    $END_FADING_MUSIC_FAST = 0
//    break
//    end
//    
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_MISSION)
    
    $MUSIC_MISSION = Audiostream.Load("audio\sounds\music\usher_music\freeplay3.mp3")
    Audiostream.PerformAction($MUSIC_MISSION, PLAY)
    Audiostream.Loop($MUSIC_MISSION, 1)
    Audiostream.Volume($MUSIC_MISSION) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_MISSION type 2 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume $MUSIC_VOLUME time 1000
    
    ////////////////////////////////////////////////////////
    
    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
        
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    gosub @FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF
    
    if
    $NOT_ALLOW_COMMANDS == 1
    then
    if or
    0EE4: locate_char_distance_to_char $SURVIVER[0] char PLAYER_ACTOR radius 3.0
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1123.4196 -1159.8757 30.0326 cornerB 1132.6436 -1180.5701 40.8979
        then
        0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
        break
        end    
    else      
    gosub @FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF
    end
    
    until $DIALOG_END == 1
    
    repeat
    wait 0
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    if
    $NOT_ALLOW_COMMANDS == 1
    then
    if or
    0EE4: locate_char_distance_to_char $SURVIVER[0] char PLAYER_ACTOR radius 3.0
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1123.4196 -1159.8757 30.0326 cornerB 1132.6436 -1180.5701 40.8979
        then
        0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
        break
        end    
    else      
    gosub @FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF
    end
    
    until false
    
    $NOT_ALLOW_COMMANDS = 0
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
    CAMP_DONT_SAY_HELLO_FLAG = 0
    $PHRASES_OFF_FLAG = 0
    
    v$OBJECTIVE = "STRB130"
    32@ = 0
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 10
    TERRY_THREAD_QUEST_MARKER = Marker.CreateIconAndSphere2(31, $CAMP_X[7], $CAMP_Y[7], $CAMP_Z[7])
    
    $ONMISSION = 0
    
    end 
    
////////////////////////Отадем эту хуйню бойду////////////////////////

if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 10
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1411.7622 -1649.0784 13.3828 radius 380.0
    then
    
    $ONMISSION = 1
    $DIALOG_PAUSE = 0
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY780"
    v$ST_DIALOG[1] = "STRY781"
    v$ST_DIALOG[2] = "STRY782"
    v$ST_DIALOG[3] = "STRY783"
    v$ST_DIALOG[4] = "STRY784"
    v$ST_DIALOG[5] = "STRY785"
    $DIALOG_COUNT = 5
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    
    03BC: MISSION_SPHERE = create_sphere_at 1411.7622 -1649.0784 13.3828 radius 2.0
    
    repeat
    wait 0
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1    
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD 
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED   
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
            
    until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1411.7622 -1649.0784 13.3828 radius 10.0
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY786"
    v$ST_DIALOG[1] = "STRY787"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    
    repeat
    wait 0  
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
     
    until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1411.7622 -1649.0784 13.3828 radius 2.0
    
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0    
    $PHRASES_OFF_FLAG = 0
    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE    
    
    v$OBJECTIVE = "STRB123"
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0    
    $QUEST_READY_FLAG = -121
    
    repeat
    wait 0
    
    if and
    0E3E: is_button_just_pressed 0 button 17
    $CHEATS_ON == 1
    8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos 1348.116 -1665.9899 13.5936 radius 10.0
        then
        actor.PutAtNoOffset(PLAYER_ACTOR,1348.116, -1665.9899, 13.5936)  
        actor.Angle(PLAYER_ACTOR) = 2.7905  
        camera.Restore_WithJumpCut()
        create_thread @3D_REFR
        $END_DIALOG_INST = 1
        $TALK_SIMULATE = 1
        wait 0
        end
    
    if
    not $CAMP_NUMBER == 8
    then
    if
    not BASE_TEAMMATE_AGRED == 1
    jf @TERRY_THREAD_FAILED_AGRO 
    end
       
    if or
    803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
    $ENTERED_CAMP_NUMBER == -1
    jf @TERRY_THREAD_FAILED_LDEAD
    if
    $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
    jf @TERRY_THREAD_FAILED_KETER_WRECKED    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @TERRY_THREAD_FAILED_PLAYER_DEAD
    if
    056D:   actor $SURVIVER[0] defined
    then                 
    if 
    not actor.Dead($SURVIVER[0]) 
    jf @TERRY_THREAD_FAILED_TERRY_DEAD  
    end
    
    until $QUEST_READY_FLAG == -122
    
    fade 0 500
    player.CanMove(0,false)
    $HUD_REMOVE = 1
    wait 500
    
    CAMP_DONT_SAY_HELLO_FLAG = 0
    camera.Restore_WithJumpCut()
    0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP
    wait 0
    
//    actor.PutAtNoOffset(PLAYER_ACTOR,1411.6078, -1649.4482, 13.3828)
//    actor.Angle(PLAYER_ACTOR) = 271.1674
//    camera.Restore_WithJumpCut()
//    create_thread @3D_REFR
    
    fade 1 500
    $HUD_REMOVE = 0
    player.CanMove(0,true)
    wait 500
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "STRY813"
    v$ST_DIALOG[1] = "STRY657"
    v$ST_DIALOG[2] = "STRY658"
    v$ST_DIALOG[3] = "STR658"
    v$ST_DIALOG[4] = "STRY659"
    v$ST_DIALOG[5] = "STRY660"
    v$ST_DIALOG[6] = "STRY661"
    v$ST_DIALOG[7] = "STRY662"
    v$ST_DIALOG[8] = "STRY663"
    v$ST_DIALOG[9] = "STRY664"
    v$ST_DIALOG[10] = "STRY665"
    v$ST_DIALOG[11] = "STRY666"
    v$ST_DIALOG[12] = "STRY667"
    v$ST_DIALOG[13] = "STR667"
    v$ST_DIALOG[14] = "STRY668"
    v$ST_DIALOG[15] = "STRY669"
    $DIALOG_COUNT = 15
    create_thread @DG_SYS2
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    wait 0
    
    v$OBJECTIVE = "STRB131"
    marker.Disable(TERRY_THREAD_QUEST_MARKER)
    018A: TERRY_THREAD_QUEST_MARKER = create_checkpoint_at 2174.415527 -2265.320313 13.5469   
    TERRY_THREAD_CURRENT_DIALOG_INDEX = 11 
    
    $ONMISSION = 0          
    
    end      

if and
TERRY_THREAD_CURRENT_DIALOG_INDEX == 11
$DIALOG_END == 0
8103: not  actor PLAYER_ACTOR in_sphere 2174.415527 -2265.320313 13.5469 radius 2.0 2.0 2.0 sphere 0 stopped_in_car
    then
    PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
    CAMP_DONT_SAY_HELLO_FLAG = 1
    $PHRASES_OFF_FLAG = 1
    end
    
////////////////////////Приезжаем в депо, KONEC////////////////////////    

if
TERRY_THREAD_CURRENT_DIALOG_INDEX == 11
    then
    if
    0103:   actor PLAYER_ACTOR in_sphere 2174.415527 -2265.320313 13.5469 radius 2.0 2.0 2.0 sphere 1 stopped_in_car
        then        
        :SKIP_INCAR_SHIT
        
        v$OBJECTIVE = "DUMMY"
        marker.Disable(TERRY_THREAD_QUEST_MARKER)
        player.CanMove(PLAYER_CHAR,false)     
        
        $END_DIALOG_INST = 1
        wait 0
        v$ST_DIALOG[0] = "STRY814"
        v$ST_DIALOG[1] = "STRY815"
        $DIALOG_COUNT = 1
        create_thread @DG_SYS2
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
        CAMP_DONT_SAY_HELLO_FLAG = 1
        $PHRASES_OFF_FLAG = 1
        wait 0
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        fade 0 500
        $HUD_REMOVE = 0
        wait 500
        
        create_thread @TERRY_SV           
        $DELETE_TEAMMATES = 1
        $SURVIVOR_ALLOW_SPAWN[0] = 0
                
        repeat
        wait 0
        until $RANDOM_PEOPLE_SKIN[0] == -1
                
        $DELETE_TEAMMATES = 0
        0459: end_thread_named 'SURVVER'
        0459: end_thread_named 'TERRY_D'    
        
        wait 500
        fade 1 500
        $HUD_REMOVE = 0
        player.CanMove(PLAYER_CHAR,true)
        wait 500
        
        v$OBJECTIVE = "STRB132"
        
        0@ = pickup.Create(#PICKUPSAVE,15,$CAMP_SAVE_X[6], $CAMP_SAVE_Y[6], $CAMP_SAVE_Z[6])
        1@ = marker.CreateIconWithoutSphere(35,$CAMP_SAVE_X[6], $CAMP_SAVE_Y[6], $CAMP_SAVE_Z[6])    
        
        03DC: MISSION_MARKER = create_marker_above_pickup 0@
        $ONMISSION = 1
        
        repeat
        wait 0 
        
        if and
        0E3E: is_button_just_pressed 0 button 17
        $CHEATS_ON == 1
        then
        actor.PutAtNoOffset(PLAYER_ACTOR,2231.562012 -2284.314697 14.375132)
        $END_DIALOG_INST = 1
        wait 0
        end
        
        if
        not $CAMP_NUMBER == 8
        then
        if
        not BASE_TEAMMATE_AGRED == 1
        jf @TERRY_THREAD_FAILED_AGRO 
        end
           
        if or
        803A: not  LEADER_DIED_FLAG == $ENTERED_CAMP_NUMBER // (int)
        $ENTERED_CAMP_NUMBER == -1
        jf @TERRY_THREAD_FAILED_LDEAD 
        if
        $SAVE_CAR_CREATED[LATEST_CAR_SLOT_USED] == 1
        jf @TERRY_THREAD_FAILED_KETER_WRECKED   
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @TERRY_THREAD_FAILED_PLAYER_DEAD
        if
        056D:   actor $SURVIVER[0] defined
        then                 
        if 
        not actor.Dead($SURVIVER[0]) 
        jf @TERRY_THREAD_FAILED_TERRY_DEAD  
        end
        
        until pickup.Picked_up(0@)
        
        v$OBJECTIVE = "DUMMY"
        player.CanMove(PLAYER_CHAR,false)
        
        marker.Disable(MISSION_MARKER)
        pickup.Destroy(0@)
        marker.Disable(1@)
        
        fade 0 1000
        wait 1000
        
        BASE_TEAMMATES_DESTORY_FLAG = 1
        
        0629: change_integer_stat 258 to 0
        0318: set_latest_mission_passed 'STRB133'
        
        0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_MISS5_CHECKPOINT" 
        
        wait 1000                                             
        
        $ZOMBIE_SPAWN_INT = 0 
        $SAVESTATUS = 1
        $ZOMBIES_HORDE = 0
        $SAVESTATUS_TRUE = 1   
        $MIKE_MUTED = 0
        ENEX_OFF = 0
        $QUEST_CAMP_NUMBER = -1
        
//        06D1: v$BNS_TXT = "STRB36" // v$ = string
//        $PORTRAIT_RELOAD_FLAG = 0
//        create_thread @DLC_TXT
//        
//        repeat
//        wait 0
//        until $PORTRAIT_RELOAD_FLAG == 1
//        
//        0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
//        wait 2000    
        
    //    $ACHIV_NUMBER = 5
    //    FREEMODE_VOICE_START = 5
    //    FREEMODE_VOICE_END = 6
    //    MIKE_VOICE_CANNOT_SKIP_FLAG = 1
    //    create_thread @VOI_SHO
    
        /////////////////////Плавное затухание/////////////////////
//    
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//                
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//                
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_MISSION volume 0.0 time 500
                
        ///////////////////////////////////////////////////////////
        
//        repeat
//        wait 0
//        until $ACHIV_SHOW_ENDED == 1

        wait 500
        audiostream.Release($MUSIC_MISSION)
        $ONMISSION = 0
        
        BASE_TEAMMATES_DESTORY_FLAG = 1
        
        actor.PutAtNoOffset(PLAYER_ACTOR,2409.2539, -2190.0854, 13.5469)
        actor.Angle(PLAYER_ACTOR) = 290.5482
        
        $MISSION_START_NUMBER = 114 
        $SAVE_MISSION_START_FLAG = 1
        $SAVE_MISSION_NOT_SAVE_FLAG = 0
        create_thread @MS_STAR
        end_thread
        
        end
    end                                          

end

end_thread

:FREEPLAY4_ZAPISKA_READ   

cinema.Widescreen(1)
0A48: enable_menu_access_in_widescreen_mode 0  
$READING_NOTE_FLAG = 1
    
////////////////////////////////////////////////////////        

0A0E: disable_text_with_style 1
    
0391: release_textures
0390: load_txd_dictionary 'usher1' 
wait 1
038F: load_texture "sewstal1" as 1 // Load dictionary with 0390 first
038F: load_texture "sewstalk2" as 2 // Load dictionary with 0390 first
wait 1    
    
32@ = 0
$SPEED_08_FLAG = 1

gosub @FREEPLAY4_NOTE_SOUND_PLAY 
    
 repeat 
wait 0

if and
28@ == 0
actor.Animation($SURVIVER[0]) == "car_check"
    then
    28@ = 1        
    end
        
if and
28@ == 1
not actor.Animation($SURVIVER[0]) == "car_check"
    then
    28@ = 2
    0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP        
    end

03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
03E3: set_texture_to_be_drawn_antialiased 1 
 until 0E3E: is_button_just_pressed 0 17

audiostream.PerformAction(14@,STOP)
audiostream.Release(14@)  
 
gosub @FREEPLAY4_NOTE_SOUND_PLAY 
    
 repeat 
wait 0

if and
28@ == 0
actor.Animation($SURVIVER[0]) == "car_check"
    then
    28@ = 1        
    end
        
if and
28@ == 1
not actor.Animation($SURVIVER[0]) == "car_check"
    then
    28@ = 2
    0631: put_actor $SURVIVER[0] in_group PLAYER_GROUP        
    end

03F0: enable_text_draw 1
038D: draw_texture 2 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
03E3: set_texture_to_be_drawn_antialiased 1 
 until 0E3E: is_button_just_pressed 0 17
 
audiostream.PerformAction(14@,STOP)
audiostream.Release(14@)  
     
$SPEED_08_FLAG = 0
015D: set_gamespeed 1.0      
     
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
    
0A0E: disable_text_with_style 0
    
//////////////////////////////////////////////////////// 
    
$SPEED_08_FLAG = 0
$READING_NOTE_FLAG = 0

cinema.Widescreen(0)
0A48: enable_menu_access_in_widescreen_mode 1   
    
015D: set_gamespeed 1.0 
    
player.CanMove(PLAYER_CHAR) = true

return

:FREEPLAY4_NOTE_SOUND_PLAY

random_int 16@ 0 to 5 

if
16@ == 0
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll1.mp3") 
end
    
if
16@ == 1
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll2.mp3") 
end
    
if
16@ == 2
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll3.mp3") 
end
    
if
16@ == 3
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll4.mp3") 
end
    
if
16@ == 4
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll5.mp3") 
end
       
Audiostream.PerformAction(14@, PLAY)
Audiostream.Volume(14@) = $SOUNDS_VOLUME

return

:FREEPLAY4_CHECK_TERRY_DEBIL_ON_ROOF

if
$NOT_ALLOW_COMMANDS == 0
    then
    if
    00A4:   actor $SURVIVER[0] sphere 0 in_cube_cornerA 1123.4196 -1159.8757 30.0326 cornerB 1132.6436 -1180.5701 40.8979
        then
        if
        8D49: not 0@ = compare_strings v$COMMAND "GAME106" // IF and SET
            then
            $NOT_ALLOW_COMMANDS = 1
            0687: clear_actor $SURVIVER[0] task
            end
        end
    end
    
return    