const
PLAYER_WAS_IN_CANALS = 28@
PLAYER_REFUSE_BREAK_DOOR = 27@
end

:INT_ZOM
thread 'INT_ZOM'

INT_ZMB_MALLV_VC_FLAG = 0  
   
:INT_ZMB_CHECK
wait 0

if and
ENEX_OFF == 0
MCS_FLAG == 0
$CARL_STORY == 0
then

0@ = 0

if or
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2790.4543 -82.5946 7.6953 radius 12.5
PLAYER_IN_NEST_FLAG == 1
$FREEMODE == 0
    then
    0@ = 1
    end

if
0@ == 0
    then
    09E6: set_burglary_houses_accessible 1
    else
    09E6: set_burglary_houses_accessible 0
    end

else

0@ = 0

if or
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1440.5898 -926.4306 39.6477 radius 50.0
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1112.6423 -742.0458 100.1329 radius 50.0
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 980.4431 -677.2863 121.9763 radius 50.0
    then
    0@ = 1
    end
    
if or
ENEX_OFF == 1
0@ == 1
    then 
    09E6: set_burglary_houses_accessible 0
    else
    09E6: set_burglary_houses_accessible 1
    end    
    
end 

if 
player.Defined(PLAYER_CHAR)
jf @INT_ZMB_CHECK

077E: get_active_interior_to 0@

0A8D: 1@ = read_memory 0x096A7CC size 4 virtual_protect 0
if
1@ == 2
then
0@ = 1
end

if and
not 0@ == 0
not $INT_ZMB_NOT == 1
jf @INT_ZMB_CHECK

BURGLARY_PROCESSED = 0

///Дистанция удаления авто на экране  
0662: printstring "----------Car On Screen Destory Distance by ThirteenAG----------" 
0AC6: 0@ = label @PEDS_ON_SCREEN_DRAW_DISTANCE offset 
0A8C: write_memory 0@ size 4 value 2800.0 virtual_protect 0 
0A8C: write_memory 0x4250F0 size 4 value 0@ virtual_protect 1 

///Дистанция удаления авто за экраном  
0662: printstring "----------Car Off Screen Destory Distance by ThirteenAG----------" 
0@ = 2800.0
0A8C: write_memory 0x42510F size 4 value 0@ virtual_protect 0 
0@ *= 0.6 
0A8C: write_memory 0x4250E2 size 4 value 0@ virtual_protect 0

$PANEL_OPEN = 1

player.CanMove(PLAYER_CHAR) = false

if
$FP_ACTIVATED == 0
then
camera.Restore_WithJumpCut()
end

///////////////////////////////////////////////////////////////////////////

for 25@ = 20 to 149

if and
not 25@ == PLAYER_CREATURE_NUMBER
056D:   actor $CREATURE[25@] defined
    then
    if
    86EE: not  actor $CREATURE[25@] in_group PLAYER_GROUP
        then
        actor.LockInCurrentPosition($CREATURE[25@],true)
        end
    end

end

for 25@ = 0 to 19

if
056D:   actor $TANK[25@] defined
    then
    actor.LockInCurrentPosition($TANK[25@],true)
    end
    
if
056D:   actor $HUNTER[25@] defined
    then
    actor.LockInCurrentPosition($HUNTER[25@],true)
    end
    
if
056D:   actor $WITCH[25@] defined
    then
    actor.LockInCurrentPosition($WITCH[25@],true)
    end
    
if
056D:   actor $CHARGER[25@] defined
    then
    actor.LockInCurrentPosition($CHARGER[25@],true)
    end             

end

///////////////////////////////////////////////////////////////////////////

for 25@ = 0 to 4

if
056E:   car $USED_CAR[25@] defined
then
car.LockInCurrentPosition($USED_CAR[25@],true)
end

end

///////////////////////////////////////////////////////////////////////////

if or
$MUTATION_ACTIVE == 5
$MUTATION_ACTIVE == 12
then
$ALLOW_ZOMBIES = 1
end

if
BURGLARY_TEMP_PLA == 0
then

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then       
fade 0 500
$HUD_REMOVE = 1
if
8E42: not is_char_doing_task_id PLAYER_ACTOR 932
    then
//    0AD1: show_formatted_text_highpriority "DOOR IS NOT HERE" time 2000
    wait 100
    0792: disembark_instantly_actor PLAYER_ACTOR
    else
//    0AD1: show_formatted_text_highpriority "DOOR IS HERE" time 2000
    end
end

else

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then       
fade 0 500
$HUD_REMOVE = 1
if
8E42: not is_char_doing_task_id COOP_ACTOR 932
    then
//    0AD1: show_formatted_text_highpriority "DOOR IS NOT HERE" time 2000
    wait 100
    0792: disembark_instantly_actor COOP_ACTOR
    else
//    0AD1: show_formatted_text_highpriority "DOOR IS HERE" time 2000
    end
end

end

$INT_ENTERING_FLAG = 1
$Z_DONT_CLIMB_FLAG = 1

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then
$ZOMBIE_DONT_ATTACK_PLAYER = 1
end

ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
:INT_ZMB_CHECK22
wait 0
08E7: disable_entrance_markers 1

if
BURGLARY_TEMP_PLA == 0
then
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
else
actor.StorePos(COOP_ACTOR,2@,3@,4@)
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor COOP_ACTOR // 16-byte string
end

if or
4@ > 900.0
8846: not  string v$ACTIVE_INTERIOR_NAME empty // v$
FUCK_YOU_IM_IN_INTERIOR == 1
jf @INT_ZMB_CHECK22 

if
0800:   in_two_players_mode
then

if
BURGLARY_TEMP_PLA == 1
then

COOP_TP_TEAMMATES_FLAG = 2

repeat
wait 0
until 0EE4: locate_char_distance_to_char PLAYER_ACTOR char COOP_ACTOR radius 5.0

else

COOP_TP_TEAMMATES_FLAG = 1

repeat
wait 0
until 0EE4: locate_char_distance_to_char PLAYER_ACTOR char COOP_ACTOR radius 5.0

end

end

fade 0 0

if and
UNITED_MAP == 1
STORIES_MAP == 0
LCVC_MAP_NUM == 1
then
0A8C: write_memory 0x8D5160 size 4 value 0.75 virtual_protect 0
end

if
STORIES_MAP == 1
then
0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
0@ += 0x0041BCC
0A8C: write_memory 0@ size 4 value 0.2 virtual_protect 0 
end

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then
player.CanMove(PLAYER_CHAR) = true
end

if
BURGLARY_TEMP_PLA == 0
then
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
06D1: v$ACTIVE_INTERIOR_NAME2 = "X7_11S"
else
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor COOP_ACTOR // 16-byte string
06D1: v$ACTIVE_INTERIOR_NAME2 = "X7_11S"
end

0AF5: write_string v$ACTIVE_INTERIOR_NAME to_ini_file "saves\ZACM.set" section "SCR" key "PLAYER_INTERIOR_NAME"
if
not INT_ZMB_MALLV_VC_FLAG == 1
then
07FB: set_interior v$ACTIVE_INTERIOR_NAME access 0
end

if and
00A4:  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2503.0244 318.1571 10.824 cornerB 2343.5437 19.0321 50.824
UNITED_MAP == 1
STORIES_MAP == 0
then
INT_ZMB_MALLV_VC_FLAG = 1
$ZOMBIES_ALWAYS_VISIBLE = 1
end

if and
00A4:  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2503.0244 318.1571 1200.824 cornerB 2343.5437 19.0321 1300.824
UNITED_MAP == 1
STORIES_MAP == 1
then
INT_ZMB_MALLV_VC_FLAG = 1
$ZOMBIES_ALWAYS_VISIBLE = 1
end    

if
INT_ZMB_MALLV_VC_FLAG == 0
then
$ZOMBIE_SPAWN_ON_COORD = 0
$ZOMBIE_COORD_MAX = 1
actor.StorePos(PLAYER_ACTOR,$ZOMBIE_X[0],$ZOMBIE_Y[0],$ZOMBIE_Z[0]) 
$ZOMBIE_Z[1] = actor.Angle(PLAYER_ACTOR) 
$ZOMBIE_Z -= 1.0
else
$ZOMBIE_SPAWN_ON_COORD = 0
$ZOMBIE_COORD_MAX = 7 
$ZOMBIE_X[0] = 2356.9807
$ZOMBIE_Y[0] = 174.6292
$ZOMBIE_Z[0] = 1212.1
$ZOMBIE_X[1] = 2379.8188
$ZOMBIE_Y[1] = 52.6777
$ZOMBIE_Z[1] = 1212.2
$ZOMBIE_X[2] = 2448.7026
$ZOMBIE_Y[2] = 53.5761
$ZOMBIE_Z[2] = 1212.2
$ZOMBIE_X[3] = 2471.0857
$ZOMBIE_Y[3] = 173.6519
$ZOMBIE_Z[3] = 1211.5
$ZOMBIE_X[4] = 2448.1755
$ZOMBIE_Y[4] = 299.4615
$ZOMBIE_Z[4] = 1212.0
$ZOMBIE_X[5] = 2379.7656
$ZOMBIE_Y[5] = 299.9892
$ZOMBIE_Z[5] = 1212.1
$ZOMBIE_X[6] = 2370.2852
$ZOMBIE_Y[6] = 259.8304
$ZOMBIE_Z[6] = 1218.9
end  

if
INT_ZMB_MALLV_VC_FLAG == 0
then
$ZOMBIES_COUNT = 10
else
$ZOMBIES_COUNT = 20
end

32@ = 0
33@ = 0

//Я нихуя не понял, и мне похуй, блять, эта хуйня меня заебала нахуй!
0A8D: 1@ = read_memory 0xBA6794 size 1 virtual_protect 0
if and
$GAMEMODE_STORYLINE == 1
1@ == 1
then
wait 250
end
              
jump @INT_ZMB_CHECK2 

:INT_ZMB_CHECK2
wait 0 
fade 0 0

if
BURGLARY_TEMP_PLA == 0
then
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
06D1: v$ACTIVE_INTERIOR_NAME2 = "CANALS" 
else
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor COOP_ACTOR // 16-byte string
06D1: v$ACTIVE_INTERIOR_NAME2 = "CANALS" 
end

if and
0867:   unknown_in_burglary_interior 0
not DONT_DO_BURGLARY == 1
then   

if
BURGLARY_TEMP_PLA == 0
then
094C: get_actor PLAYER_ACTOR currently_used_EnEx_3D_coord_to 1@ 2@ 3@ angle_to 29@
actor.StorePos(PLAYER_ACTOR,9@,10@,11@)
else
094C: get_actor COOP_ACTOR currently_used_EnEx_3D_coord_to 1@ 2@ 3@ angle_to 29@
actor.StorePos(COOP_ACTOR,9@,10@,11@)
end

0087: 5@ = 1@ // (float)
0087: 6@ = 2@ // (float)
0087: 7@ = 3@ // (float)
if
5@ < 0.0
then
5@ *= 2.0
end
if
5@ < 0.0
then
6@ *= 2.0
end
005B: 5@ += 6@  // (float)
005B: 5@ += 7@  // (float)
0092: 4@ = float 5@ to_integer
//0AD1: show_formatted_text_highpriority "ENTERED BURGLARY INTERIOR BY ENEX AT X: %f Y: %f Z: %f, ANGLE: %f, SEED IS %d" time 5000 1@ 2@ 3@ 4@
0AD3: 5@v = format "%d" 4@
0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "HOUSES" key 5@v 
if
not 0@ == 1
    then
    
    PLAYER_REFUSE_BREAK_DOOR = 0   
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "HOUSES2" key 5@v    
    if
    0@ == 2
    then
    create_thread @HOUSE_L 2
    jump to @BULRGRALY_GO_BACK_FROM_HOUSE
    end
    
    if
    CURRENT_USHER_TUTORIAL_NUM == 2
    then    
    v$OBJECTIVE = "STRB23"
    v$ST_DIALOG[0] = "DUMMY"
    v$ST_DIALOG[1] = "STRY22"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    text.ShowTextBox('GME1393')
    jump to @HOUSE_DOOR_WAS_NOT_LOCKED
    end
    
    if
    CURRENT_USHER_TUTORIAL_NUM == 3
    then
    v$OBJECTIVE = "STRB23"
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 0
    jump to @HOUSE_DOOR_FUCKING_LOCK_TRY_AGAIN
    end
    
    if
    CURRENT_USHER_TUTORIAL_NUM == 4
    then
    v$OBJECTIVE = "STRB23"
    v$ST_DIALOG[0] = "DUMMY"
    v$ST_DIALOG[1] = "STRY24"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    jump to @HOUSE_DOOR_FUCKING_LOCK_TRY_AGAIN
    end
    
    if
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    then
    if and
    0E4D: random_percent 65
    not 0@ == 1
    not 0@ == 0
        then
        text.ShowTextBox('GME1393')
        jump to @HOUSE_DOOR_WAS_NOT_LOCKED
        end
    end
    
    if and
    0E4D: random_percent 50
    not 0@ == 1
    not 0@ == 0
    then
    text.ShowTextBox('GME1393')
    jump to @HOUSE_DOOR_WAS_NOT_LOCKED
    end
    
    if
    0@ == 0
    then
    jump to @HOUSE_DOOR_WAS_NOT_LOCKED
    end
    
    :HOUSE_DOOR_FUCKING_LOCK_TRY_AGAIN
    
    if
    PLAYER_REFUSE_BREAK_DOOR == 1
    then
    jump to @BULRGRALY_NO_LOMATB_DOOR_JUMP
    end
    
    if or
    PERK_MELEE == 2 //Качок 2 вкачан
    SURVIVAL_CUSTOM_WEAPON_NABOR == 2 //Полицейский набор
    SURVIVAL_CUSTOM_WEAPON_NABOR == 5 //Набор пулемётчика
    then 
    
    cinema.Radar(0)
    fade 1 0
    0924: enable_screen_darkness 1 with_value 255             
    text.ClearAll()
    
    if or
    SURVIVAL_CUSTOM_WEAPON_NABOR == 2 //Полицейский набор
    SURVIVAL_CUSTOM_WEAPON_NABOR == 5 //Набор пулемётчика
        then    
        if
        SURVIVAL_CUSTOM_WEAPON_NABOR == 2 //Полицейский набор
            then
            if
            PERK_MELEE == 2
                then
                13@ = 45
                else
                13@ = 30
                end
            else //Набор пулемётчика
            if
            PERK_MELEE == 2
                then
                13@ = 60
                else
                13@ = 45
                end
            end    
        else //Качок 2 вкачан
        13@ = 30
        end
    
    repeat
    wait 0
    015D: set_gamespeed 0.0
    text.Show1Number('GME1401',13@,250,1) 
    
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        fade 0 0
        wait 0
        text.ClearAll()
        cinema.Radar(1)
        015D: set_gamespeed 1.0
        0924: enable_screen_darkness 0 with_value -1
        0AD3: 5@v = format "%d" 4@
        0AF1: write_int 1 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
        PLAYER_REFUSE_BREAK_DOOR = 1
        jump to @BULRGRALY_NO_LOMATB_DOOR_JUMP
        end
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then  
        break
        end    
    
    until false
           
    fade 0 0
    wait 0
    cinema.Radar(1)
    015D: set_gamespeed 1.0
    0924: enable_screen_darkness 0 with_value -1
    text.ClearAll()       
    
    if
    0E4D: random_percent 50
    then
    0@ = audiostream.Load("AUDIO\SOUNDS\knock2.mp3")
    else
    0@ = audiostream.Load("AUDIO\SOUNDS\knock3.mp3")
    end
    
    Audiostream.Volume(0@) = $SOUNDS_VOLUME 
    Audiostream.Loop(0@, 0)
    Audiostream.PerformAction(0@, PLAY)
    
    repeat
    wait 0
    0AB9: get_mp3 0@ state_to 12@
    until 12@ == -1
    
    audiostream.Release(0@)        
    
    if
    0E4D: random_percent 13@
        then
        
        0@ = audiostream.Load("AUDIO\SOUNDS\knock4.mp3")
    
        Audiostream.Volume(0@) = $SOUNDS_VOLUME 
        Audiostream.Loop(0@, 0)
        Audiostream.PerformAction(0@, PLAY)
        
        repeat
        wait 0
        0AB9: get_mp3 0@ state_to 12@
        until 12@ == -1
        
        audiostream.Release(0@)
        
        text.ShowTextBox('GME1400')
        
        jump to @HOUSE_DOOR_WAS_NOT_LOCKED 
        
        else
        
        0AD3: 5@v = format "%d" 4@
        0AF1: write_int 2 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
        
        if
        UNITED_MAP == 0
        then
        0@ = object.Init(1272,1@,2@,3@)
        else
        0@ = object.Init(1269,1@,2@,3@)
        end
        
        object.Angle(0@) = 29@
        0382: set_object 0@ collision_detection 0
        cinema.Radar(0)
        fade 1 0
        0924: enable_screen_darkness 1 with_value 255    
        015D: set_gamespeed 0.25
        text.ClearAll()
        text.ShowH('GME1399',250,1) 
        wait 250       
        fade 0 0
        wait 0
        cinema.Radar(1)
        015D: set_gamespeed 1.0
        0924: enable_screen_darkness 0 with_value -1
        jump to @BULRGRALY_GO_BACK_FROM_HOUSE
        
        end
    
    end
    
    :BULRGRALY_NO_LOMATB_DOOR_JUMP
    
    if
    $JIMMY > 0
    then
    
    cinema.Radar(0)
    fade 1 0
    0924: enable_screen_darkness 1 with_value 255             
    text.ClearAll()
    
    repeat
    wait 0
    015D: set_gamespeed 0.0
    text.Show1Number('GME1394',$JIMMY,250,1) 
    
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        fade 0 0
        wait 0
        cinema.Radar(1)
        015D: set_gamespeed 1.0
        0924: enable_screen_darkness 0 with_value -1
        0AD3: 5@v = format "%d" 4@
        0AF1: write_int 1 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
        jump to @BULRGRALY_GO_BACK_FROM_HOUSE
        end
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        break
        end    
    
    until false
           
    fade 0 0
    wait 0
    cinema.Radar(1)
    015D: set_gamespeed 1.0
    0924: enable_screen_darkness 0 with_value -1
    
    end
    
    if
    $JIMMY > 0
        then
        
        if
        PERK_HACKER == 0
        then
        13@ = 45
        else
        13@ = 65
        end
        
        if
        QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
        then
        13@ += 15
        end
        
        0AD3: 5@v = format "%d" 4@
        0AF1: write_int 1 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
        
        if or
        0E4D: random_percent 13@
        CURRENT_USHER_TUTORIAL_NUM == 3
        CURRENT_USHER_TUTORIAL_NUM == 4
            then
            
            if
            PERK_HACKER == 0
            then
            13@ = 25
            else
            13@ = 35
            end
            
            if
            QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
            then
            13@ -= 10
            end
            
            if
            CURRENT_USHER_TUTORIAL_NUM == 4
            then
            jump to @BREAK_JIMMY_PLEASE
            end
            
            if and
            0E4D: random_percent 13@
            not CURRENT_USHER_TUTORIAL_NUM == 3
            then
            :BREAK_JIMMY_PLEASE
            text.ShowTextBox('GME1392')
            $JIMMY -= 1
            Audiostream.Volume($JIMMY_BROKE_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($JIMMY_BROKE_SOUND, 0)
            Audiostream.PerformAction($JIMMY_BROKE_SOUND, PLAY)
            else
            text.ShowTextBox('GME1391')
            Audiostream.Volume($JIMMY_USE_SOUND2) = $SOUNDS_VOLUME 
            Audiostream.Loop($JIMMY_USE_SOUND2, 0)
            Audiostream.PerformAction($JIMMY_USE_SOUND2, PLAY)
            end
            
            fade 0 0
            wait 0
            0924: enable_screen_darkness 0 with_value -1
            
            :HOUSE_DOOR_WAS_NOT_LOCKED        
            
            if
            UNITED_MAP == 0
            then
            0@ = object.Init(1272,1@,2@,3@)
            else
            0@ = object.Init(1269,1@,2@,3@)
            end
            
            object.Angle(0@) = 29@
            0382: set_object 0@ collision_detection 0
            0AD3: 5@v = format "%d" 4@
            0AF1: write_int 0 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
            0AD3: 5@v = format "%d" 4@
            0AF1: write_int 1 to_ini_file "data\survival.set" section "HOUSES" key 5@v
            create_thread @HOUSE_L 0 4@
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HOUSES_LOOTED"
    
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end        
                 
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_HOUSES_LOOTED"
            
            HOUSES_LOOTED += 1
            
            else
            $JIMMY -= 1
            Audiostream.Volume($JIMMY_BROKE_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($JIMMY_BROKE_SOUND, 0)
            Audiostream.PerformAction($JIMMY_BROKE_SOUND, PLAY)
            cinema.Radar(0)
            fade 1 0
            0924: enable_screen_darkness 1 with_value 255
            015D: set_gamespeed 0.25
            text.ClearAll()        
            text.ShowH('GME1389',250,1)
            wait 250        
            fade 0 0
            wait 0
            cinema.Radar(1)
            015D: set_gamespeed 1.0
            0924: enable_screen_darkness 0 with_value -1
            
            if
            $JIMMY > 0
            then
            jump to @HOUSE_DOOR_FUCKING_LOCK_TRY_AGAIN
            end
            
            jump to @BULRGRALY_GO_BACK_FROM_HOUSE
            end
        else
        0AD3: 5@v = format "%d" 4@
        0AF1: write_int 1 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
        cinema.Radar(0)
        fade 1 0
        0924: enable_screen_darkness 1 with_value 255    
        015D: set_gamespeed 0.25
        text.ClearAll()
        text.ShowH('GME1390',250,1) 
        wait 250       
        fade 0 0
        wait 0
        cinema.Radar(1)
        015D: set_gamespeed 1.0
        0924: enable_screen_darkness 0 with_value -1
        jump to @BULRGRALY_GO_BACK_FROM_HOUSE
        end            
    else
    create_thread @HOUSE_L 1
    :BULRGRALY_GO_BACK_FROM_HOUSE
    $ZOMBIE_DONT_ATTACK_PLAYER = 0
    $ZOMBIE_SPAWN_ON_COORD = 0
    $INT_ENTERING_FLAG = 1    
    select_interior 0    
    
    if
    BURGLARY_TEMP_PLA == 0
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,1@,2@,3@)        
    08AD: link_actor PLAYER_ACTOR to_enex_marker_at 9@ 10@ radius 5.0
    actor.Angle(PLAYER_ACTOR) = 29@
    else
    actor.PutAtNoOffset(COOP_ACTOR,1@,2@,3@)        
    08AD: link_actor COOP_ACTOR to_enex_marker_at 9@ 10@ radius 5.0
    actor.Angle(COOP_ACTOR) = 29@
    end
    
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D
    create_thread @ENEX_3 1@ 2@ 3@    
    jump to @BULRGRALY_FUCK_GO_BACK
    end   

repeat
wait 0  
until BURGLARY_PROCESSED == 1

if and
88F9: not  v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
not $ZOMBIE_REMOVE_FLAG == 1
then   
ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
end                         

else

if
88F9: not  v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
then   
ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
else
0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
0@ += 0x0041BCC
0A8C: write_memory 0@ size 4 value 4.0 virtual_protect 0
0A8C: write_memory 0x0C402C6 size 1 value 1 virtual_protect 0 //CPostEffects__m_bFog
0A8C: write_memory 0x07042A9 size 1 value 12 virtual_protect 0
0A8C: write_memory 0x0704348 size 1 value 12 virtual_protect 0
0AC6: 1@ = label @CFOG_R offset
0AC6: 2@ = label @CFOG_G offset
0AC6: 3@ = label @CFOG_B offset
0A8C: write_memory 1@ size 1 value 32 virtual_protect 0
0A8C: write_memory 2@ size 1 value 48 virtual_protect 0
0A8C: write_memory 3@ size 1 value 32 virtual_protect 0
0A8C: write_memory 0x0704269 size 4 value 1@ virtual_protect 0
0A8C: write_memory 0x0704248 size 4 value 2@ virtual_protect 0
0A8C: write_memory 0x0704250 size 4 value 3@ virtual_protect 0
PLAYER_WAS_IN_CANALS = 1
end

if or
80A4: not  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 220.1892 1014.8665 1080.0 cornerB 258.6296 1054.7927 1100.0
$GAMEMODE_SURVIVAL == 1
then
if and
88F9: not  v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
not ALLOW_ZOMB_ENTER_INT == 0
    then
    ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
    end
end

end 
    
wait 250
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0 
wait 10             
$ZOMBIE_DONT_ATTACK_PLAYER = 0 
$INT_ENTERING_FLAG = 0
wait 20
    
if
INT_ZMB_MALLV_VC_FLAG == 1
then
audiostream.Volume($MALL_VC_SOUND) = $MUSIC_VOLUME
$CASETTE_PLAYING_FLAG = 1
end
    
if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then  
$HUD_REMOVE = 0
end
    
$PANEL_OPEN = 0 
    
32@ = 0
if
$ZOMBIES_HORDE == 0
then

if and
0867:   unknown_in_burglary_interior 0
not DONT_DO_BURGLARY == 1
then
random_int 30@ 10000 15000
else
random_int 30@ 8000 13000
end

else
random_int 30@ 250 500
end

//Ааа, блять, как же вы заебали про это ныть, ебучих семь лет, блять! Держите, блять!
if
$EASY_MODE == 1
then
30@ *= 5
end

if
$NORMAL_MODE == 1
then
30@ *= 2
end
    
21@ = 0
    
$ZOMBIES_COUNT = -1

COOP_TP_TEAMMATES_FLAG = 1

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then
fade 1 500
end 
       
jump @INT_ZMB_CHECK3            

:INT_ZMB_CHECK3
wait 0

if
INT_ZMB_MALLV_VC_FLAG == 1
    then
    if and
    075C:   marker $HARDWARE2 enabled
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2373.3723 147.4097 994.6094 cornerB 2355.4573 120.9685 1001.6094
        then
        marker.Disable($HARDWARE2)
        $HARDWARE2 = 0
        end
    end

if and
33@ > 3000
not $QUEST_TYPE == 19
not CURRENT_USHER_TUTORIAL_NUM == 2
not CURRENT_USHER_TUTORIAL_NUM == 3
not CURRENT_USHER_TUTORIAL_NUM == 4
    then
    08E7: disable_entrance_markers 0
    else
    if or
    CURRENT_USHER_TUTORIAL_NUM == 2
    CURRENT_USHER_TUTORIAL_NUM == 3
    CURRENT_USHER_TUTORIAL_NUM == 4
        then
        if
        8867: not  unknown_in_burglary_interior 0
            then
            08E7: disable_entrance_markers 0
            end
        end
    end

if
BURGLARY_TEMP_PLA == 0
then
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
else
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor COOP_ACTOR // 16-byte string
end

gosub @INT_ZMB_ALIVE_ZOMBIE_CHECK

if and
1@ == 1
not INT_ZMB_MALLV_VC_FLAG == 1
then
07FB: set_interior v$ACTIVE_INTERIOR_NAME access 0
else

///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "X7_11S"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[4] == 2800.0
    $BANKA_X[5] == 2800.0
    $BANKA_X[6] == 2800.0
    $BANKA_X[7] == 2800.0
        then
        07FB: set_interior 'X7_11S' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
        
06D1: v$ACTIVE_INTERIOR_NAME2 = "X711S2"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[22] == 2800.0
    $BANKA_X[23] == 2800.0
    $BANKA_X[24] == 2800.0
    $BANKA_X[25] == 2800.0
        then
        07FB: set_interior 'X711S2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
        
06D1: v$ACTIVE_INTERIOR_NAME2 = "X7_11B"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[16] == 2800.0
    $BANKA_X[17] == 2800.0
    $BANKA_X[18] == 2800.0
    $BANKA_X[19] == 2800.0
    $BANKA_X[20] == 2800.0
    $BANKA_X[21] == 2800.0
        then
        07FB: set_interior 'X7_11B' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
        
06D1: v$ACTIVE_INTERIOR_NAME2 = "X7_11C"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[33] == 2800.0
    $BANKA_X[34] == 2800.0
    $BANKA_X[35] == 2800.0
    $BANKA_X[36] == 2800.0
    $BANKA_X[37] == 2800.0
    $BANKA_X[38] == 2800.0
        then
        07FB: set_interior 'X7_11C' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
        
06D1: v$ACTIVE_INTERIOR_NAME2 = "X7_11D"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[40] == 2800.0
    $BANKA_X[41] == 2800.0
    $BANKA_X[42] == 2800.0
    $BANKA_X[43] == 2800.0
    $BANKA_X[44] == 2800.0
    $BANKA_X[45] == 2800.0
        then
        07FB: set_interior 'X7_11D' access 1
        end
    end        
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "BAR2"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[26] == 2800.0
    $BANKA_X[27] == 2800.0
    $BANKA_X[28] == 2800.0
    $BANKA_X[29] == 2800.0
        then
        07FB: set_interior 'BAR2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "BAR1"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[30] == 2800.0
    $BANKA_X[31] == 2800.0
    $BANKA_X[32] == 2800.0
        then
        07FB: set_interior 'BAR1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "FDBURG"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[0] == 2800.0
    $BANKA_X[1] == 2800.0
    $BANKA_X[2] == 2800.0
    $BANKA_X[3] == 2800.0
        then
        07FB: set_interior 'FDBURG' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "FDCHICK"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[8] == 2800.0
    $BANKA_X[9] == 2800.0
    $BANKA_X[10] == 2800.0
    $BANKA_X[11] == 2800.0
        then
        07FB: set_interior 'FDCHICK' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "FDPIZA"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[12] == 2800.0
    $BANKA_X[13] == 2800.0
    $BANKA_X[14] == 2800.0
    $BANKA_X[15] == 2800.0
        then
        07FB: set_interior 'FDPIZA' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "FDDONUT"
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if and
    $BANKA_X[33] == 2800.0
    $BANKA_X[34] == 2800.0
    $BANKA_X[35] == 2800.0
    $BANKA_X[36] == 2800.0
        then
        07FB: set_interior 'FDDONUT' access 1
        end
    end    
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMUN1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION1 enabled
    then
    marker.Disable($AMMINATION1)
    $AMMINATION1 = 0
    end
    if
    075C:   marker $AMMINATION3 enabled
    then
    marker.Disable($AMMINATION3)
    $AMMINATION3 = 0 
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMUN1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMUN2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION11 enabled
    then
    marker.Disable($AMMINATION11)
    $AMMINATION11 = 0
    end
    if
    075C:   marker $AMMINATION8 enabled
    then
    marker.Disable($AMMINATION8)
    $AMMINATION8 = 0
    end
    if
    075C:   marker $AMMINATION5 enabled
    then
    marker.Disable($AMMINATION5)
    $AMMINATION5 = 0
    end
    if
    075C:   marker $AMMINATION4 enabled
    then
    marker.Disable($AMMINATION4)
    $AMMINATION4 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMUN2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMUN3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION2 enabled
    then
    marker.Disable($AMMINATION2)
    $AMMINATION2 = 0
    end
    if
    075C:   marker $AMMINATION10 enabled
    then
    marker.Disable($AMMINATION10)
    $AMMINATION10 = 0
    end
    if
    075C:   marker $AMMINATION6 enabled
    then
    marker.Disable($AMMINATION6)
    $AMMINATION6 = 0
    end
    if
    075C:   marker $AMMINATION7 enabled
    then
    marker.Disable($AMMINATION7)
    $AMMINATION7 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMUN3' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMUN4"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'AMMUN4' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMUN5"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION9 enabled
    then
    marker.Disable($AMMINATION9)
    $AMMINATION9 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMUN5' access 1
        end
    end    
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MOTEL1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MOTEL1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "LACS1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[5] == 2800.0
        then
        07FB: set_interior 'LACS1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "POLICE1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'POLICE1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "POLICE2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'POLICE2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "EHI_GF5"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'EHI_GF5' access 1
        end
    end                
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "RCPLAY"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'RCPLAY' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "GYM1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'GYM1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "GYM2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'GYM2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "GYM3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'GYM3' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "BARBERS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[6] == 2800.0
        then
        07FB: set_interior 'BARBERS' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "BARBER2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[7] == 2800.0
        then
        07FB: set_interior 'BARBER2' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "BARBER3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[8] == 2800.0
        then
        07FB: set_interior 'BARBER3' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "LASTRIP"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'LASTRIP' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "CSSPRT"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[4] == 2800.0
        then
        07FB: set_interior 'CSSPRT' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "DRIVES"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'DRIVES' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "DRIVES2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'DRIVES2' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "DRIVES2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'DRIVES2' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "GENOTB"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'GENOTB' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "SEXSHOP"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'SEXSHOP' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "STRIP2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'STRIP2' access 1
        end
    end

///////////////////////////////////////////////////////////////////////////
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MADDOGS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if and
    0@ == 0
    $ONMISSION == 0
        then
        07FB: set_interior 'MADDOGS' access 1
        end
    end
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MDDOGS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if and
    0@ == 0
    $ONMISSION == 0
        then
        07FB: set_interior 'MDDOGS' access 1
        end
    end                                
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "TATTOO"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[9] == 2800.0
        then
        07FB: set_interior 'TATTOO' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "TATTO2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[10] == 2800.0
        then
        07FB: set_interior 'TATTO2' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "TATTO3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[11] == 2800.0
        then
        07FB: set_interior 'TATTO3' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "PAPER"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'PAPER' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "CSDESGN"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[3] == 2800.0
        then
        07FB: set_interior 'CSDESGN' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "TRICAS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'TRICAS' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "TRICAS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'TRICAS' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "CSEXL"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[2] == 2800.0
        then
        07FB: set_interior 'CSEXL' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "CSCHP"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[0] == 2800.0
        then
        07FB: set_interior 'CSCHP' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MOTEL1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MOTEL1' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "POLICE3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'POLICE3' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "POLICE4"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'POLICE4' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "ATRIUME"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'ATRIUME' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "CANALS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'CANALS' access 1
        end
    end                            
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "ATRIUMX"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'ATRIUMX' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "CLOTHGP"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    if
    $RNDM_HOUSE_ITEM_X[1] == 2800.0
        then
        07FB: set_interior 'CLOTHGP' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMU6"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION1 enabled
    then
    marker.Disable($AMMINATION1)
    $AMMINATION1 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMU6' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMU7"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION2 enabled
    then
    marker.Disable($AMMINATION2)
    $AMMINATION2 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMU7' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMU8"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION3 enabled
    then
    marker.Disable($AMMINATION3)
    $AMMINATION3 = 0
    end
    if
    075C:   marker $AMMINATION4 enabled
    then
    marker.Disable($AMMINATION4)
    $AMMINATION4 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMU8' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "AMMU9"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $AMMINATION5 enabled
    then
    marker.Disable($AMMINATION5)
    $AMMINATION5 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'AMMU9' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL1' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL2' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL3' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL4"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL4' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL5"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL5' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL6"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL6' access 1
        end
    end                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL7"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MALL7' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MANS1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MANS1' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MANS2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MANS2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MANS3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MANS3' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "VCBANK"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        
        if
        075C:   marker $BANK1 enabled
        then
        marker.Disable($BANK1)
        $BANK1 = 0
        end
        
        07FB: set_interior 'VCBANK' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "TOOL1"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $HARDWARE1 enabled
    then
    marker.Disable($HARDWARE1)
    $HARDWARE1 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'TOOL1' access 1
        end
    end    
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "TOOL2"        
if  
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0            
    if
    0@ == 0
        then
        07FB: set_interior 'TOOL2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "TOOL3"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    
    if
    075C:   marker $HARDWARE3 enabled
    then
    marker.Disable($HARDWARE3)
    $HARDWARE3 = 0
    end
    
    if
    0@ == 0
        then
        07FB: set_interior 'TOOL3' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "LAWKR"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'LAWKR' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "LFRECS"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'LFRECS' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "GRSYCHP"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        
        if
        075C:   marker $BAR3 enabled
        then
        marker.Disable($BAR3)
        $BAR3 = 0
        end
        
        07FB: set_interior 'GRSYCHP' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MLBUPD"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'MLBUPD' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "AUNTPOL"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'AUNTPOL' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "PRNTWRK"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        
        if
        075C:   marker $PRINTWORKS1 enabled
        then
        marker.Disable($PRINTWORKS1)
        $PRINTWORKS1 = 0
        end
        
        07FB: set_interior 'PRNTWRK' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "TARBRSH"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'TARBRSH' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "LFCH"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'LFCH' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////        

if
UNITED_MAP == 1
then

if
075C:   marker $CAFE2 enabled
    then
    if
    00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 2469.6655 58.2463 997.4382 radius 50.0 50.0 15.0        
        then
        marker.Disable($CAFE2)
        $CAFE2 = 0
        end
    end
    
if
075C:   marker $CLOTH2 enabled
    then
    if
    00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 2411.4482 83.9312 994.4004 radius 50.0 50.0 15.0        
        then
        marker.Disable($CLOTH2)
        $CLOTH2 = 0
        end
    end
    
end       
    
///////////////////////////////////////////////////////////////////////////        
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "CAFEROB"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        
        if
        075C:   marker $CAFE1 enabled
        then
        marker.Disable($CAFE1)
        $CAFE1 = 0
        end
         
        07FB: set_interior 'CAFEROB' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "MLBUCLB"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        
        if
        075C:   marker $DISCO2 enabled
        then
        marker.Disable($DISCO2)
        $DISCO2 = 0
        end
        
        07FB: set_interior 'MLBUCLB' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "OCVWHOT"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'OCVWHOT' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "STMRKB"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        
        if
        075C:   marker $CAFE1 enabled
        then
        marker.Disable($CAFE1)
        $CAFE1 = 0
        end
        
        07FB: set_interior 'STMRKB' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "STMRKB2"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'STMRKB2' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////    
    
06D1: v$ACTIVE_INTERIOR_NAME2 = "INDWSVH"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'INDWSVH' access 1
        end
    end                                                                                                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "SVVC01"        
if
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'SVVC01' access 1
        end
    end                                                                                                        
    
///////////////////////////////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "SKLAD"        
if and
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
MAIN_QUEST4_COMPLETED_FLAG == 1
    then
    0@ = 0
    if
    0@ == 0
        then
        07FB: set_interior 'SKLAD' access 1
        end
    end
    
///////////////////////////////////////////////////////////////////////////                                                  
        
end

if
not DONT_DO_BURGLARY == 1
then
if or
$CHEATS_ON == 1
0867:   unknown_in_burglary_interior 0
    then
    094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    07FB: set_interior v$ACTIVE_INTERIOR_NAME access 1
    end 
end

if
0ADC:   test_cheat "28692869"
then
094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
07FB: set_interior v$ACTIVE_INTERIOR_NAME access 1
end  

008A: $ZOMBIES_COUNT = 21@ // (int)

0@ = 0

gosub @INT_ZMB_CHECK33

///////////////////////////////////////////////////

if and
$ZOMBIES_HORDE == 1
001D:   32@ > 30@  // (int)
0@ == 0                                                                                   
80EC: not  actor PLAYER_ACTOR sphere 0 near_point $ZOMBIE_X[0] $ZOMBIE_Y[0] radius 3.0 3.0
not $ACTIVE_INTERIOR == 0
03EE:   player PLAYER_CHAR controllable
09E7:   player PLAYER_CHAR not_frozen
not PLAYER_IN_CANALS_FLAG == 1
then

if
INT_ZMB_MALLV_VC_FLAG == 0
then
21@ = 0
else
21@ = 10
end

if
$INT_ZMB_NOT == 0
then
008A: $ZOMBIES_COUNT = 21@ // (int)
$ZOMBIE_SPAWN_ON_COORD = 1
end   

094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
06D1: v$ACTIVE_INTERIOR_NAME2 = "CANALS"

if and
88F9: not  v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
80A4: not  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 220.1892 1014.8665 1080.0 cornerB 258.6296 1054.7927 1100.0
$INT_ZMB_NOT == 0
not ALLOW_ZOMB_ENTER_INT == 0
then
ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
$ZOMBIES_ALWAYS_VISIBLE = 1
end

gosub @INT_ZMB_WAIT_CHECK_FOR_EXIT
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0

32@ = 0
random_int 30@ 250 500

end

///////////////////////////////////////////////////

//0AD1: show_formatted_text_highpriority "%d > %d" time 2000 32@ 30@
if and
$ZOMBIES_HORDE == 0
001D:   32@ > 30@  // (int)  
0@ == 0
80EC: not  actor PLAYER_ACTOR sphere 0 near_point $ZOMBIE_X[0] $ZOMBIE_Y[0] radius 3.0 3.0
not $ACTIVE_INTERIOR == 0
03EE:   player PLAYER_CHAR controllable
09E7:   player PLAYER_CHAR not_frozen
not PLAYER_IN_CANALS_FLAG == 1  
then 

if
INT_ZMB_MALLV_VC_FLAG == 0
then     
21@ = 0
else
21@ = 3
end

if
$INT_ZMB_NOT == 0
then
008A: $ZOMBIES_COUNT = 21@ // (int) 
$ZOMBIE_SPAWN_ON_COORD = 1
end   

094B: v$ACTIVE_INTERIOR_NAME = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
06D1: v$ACTIVE_INTERIOR_NAME2 = "CANALS"

if and
88F9: not  v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
80A4: not  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 220.1892 1014.8665 1080.0 cornerB 258.6296 1054.7927 1100.0
$INT_ZMB_NOT == 0
not ALLOW_ZOMB_ENTER_INT == 0
then
ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
$ZOMBIES_ALWAYS_VISIBLE = 1
end

gosub @INT_ZMB_WAIT_CHECK_FOR_EXIT
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0

32@ = 0
if
INT_ZMB_MALLV_VC_FLAG == 0
then

if
$ZOMBIES_HORDE == 0
then

if and
0867:   unknown_in_burglary_interior 0
not DONT_DO_BURGLARY == 1
then
random_int 30@ 5000 10000
else
random_int 30@ 2500 5000
end

else
random_int 30@ 250 500
end

else
random_int 30@ 1000 2000
end

//Ааа, блять, как же вы заебали про это ныть, ебучих семь лет, блять! Держите, блять!
if
$EASY_MODE == 1
then
30@ *= 5
end

if
$NORMAL_MODE == 1
then
30@ *= 2
end  
  
end            

077E: get_active_interior_to 0@

///////////////////////////////////////////////////

06D1: v$ACTIVE_INTERIOR_NAME2 = "MALL2"
if and
actor.Animation(PLAYER_ACTOR) == "walk_doorpartial"
UNITED_MAP == 1
not 0@ == 0
08F9:   v$ACTIVE_INTERIOR_NAME == v$ACTIVE_INTERIOR_NAME2
then

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)

fade 0 500
$HUD_REMOVE = 1
$PANEL_OPEN = 1
wait 500

repeat
wait 0
actor.StorePos(PLAYER_ACTOR,5@,6@,7@)
050A: 0@ = distance_between_XYZ 2@ 3@ 4@ and_XYZ 5@ 6@ 7@
until 0@ > 5.0

fade 1 500
$HUD_REMOVE = 0
$PANEL_OPEN = 0
wait 500

end

///////////////////////////////////////////////////

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)

0A8D: 1@ = read_memory 0x096A7CC size 4 virtual_protect 0

077E: get_active_interior_to 0@

if and
1@ == 2
0867:   unknown_in_burglary_interior 0
not DONT_DO_BURGLARY == 1
then
0@ = 0
end

if
0@ == 0                                     
jf @INT_ZMB_CHECK3

:BULRGRALY_FUCK_GO_BACK

$ZOMBIE_REMOVE_FLAG = 1
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0

player.CanMove(PLAYER_CHAR) = false

if
$FP_ACTIVATED == 0
then
camera.Restore_WithJumpCut()
end

$ZOMBIE_REMOVE_FLAG = 1

0842: 0@ = player PLAYER_CHAR town_number
if
0@ > 0
then
random_int $ZOMBIES_COUNT 0 20
else
random_int $ZOMBIES_COUNT 0 10
end

$ZOMBIE_REMOVE_FLAG = 1  
$ZOMBIE_SPAWN_ON_COORD = 0
$INT_ENTERING_FLAG = 1

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then
fade 0 500
if
8E42: not is_char_doing_task_id PLAYER_ACTOR 932
    then
//    0AD1: show_formatted_text_highpriority "DOOR IS NOT HERE" time 2000
    wait 100
    0792: disembark_instantly_actor PLAYER_ACTOR
    else
//    0AD1: show_formatted_text_highpriority "DOOR IS HERE" time 2000
    end
end

if
INT_ZMB_MALLV_VC_FLAG == 1
then
audiostream.Volume($MALL_VC_SOUND) = 0.0
$CASETTE_PLAYING_FLAG = 0
INT_ZMB_MALLV_VC_FLAG = 0
$ZOMBIES_ALWAYS_VISIBLE = 0
else
$ZOMBIES_ALWAYS_VISIBLE = 0
end

$HUD_REMOVE = 1
$PANEL_OPEN = 1

if or
$MUTATION_ACTIVE == 5
$MUTATION_ACTIVE == 12
then
$ALLOW_ZOMBIES = 0
end  

:INT_ZMB_CHECK4
wait 0
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)

if
4@ > 900.0
then
/////////////////////////////
if
4@ < 900.0
jf @INT_ZMB_CHECK4
/////////////////////////////
else
/////////////////////////////
if
03EE:   player PLAYER_CHAR controllable
jf @INT_ZMB_CHECK4
/////////////////////////////
end

$24_7_PICKUPS_RESPAWN = 1

player.CanMove(PLAYER_CHAR) = true

$ZOMBIE_REMOVE_FLAG = 0

if and
UNITED_MAP == 1
STORIES_MAP == 0
LCVC_MAP_NUM == 1
then
0A8C: write_memory 0x8D5160 size 4 value 1.0 virtual_protect 0
end

if
STORIES_MAP == 1
then
0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
0@ += 0x0041BCC
0A8C: write_memory 0@ size 4 value 0.4 virtual_protect 0
end

if
PLAYER_WAS_IN_CANALS == 1
then
0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
0@ += 0x0041BCC
0A8C: write_memory 0@ size 4 value 0.9 virtual_protect 0
0A8C: write_memory 0x0C402C6 size 1 value 0 virtual_protect 0 //CPostEffects__m_bFog
PLAYER_WAS_IN_CANALS = 0
end

///////////////////////////////////////////////////////////////////////////

for 25@ = 20 to 149

if and
not 25@ == PLAYER_CREATURE_NUMBER
056D:   actor $CREATURE[25@] defined
    then
    if
    86EE: not  actor $CREATURE[25@] in_group PLAYER_GROUP
        then
        actor.LockInCurrentPosition($CREATURE[25@],false)
        end
    end

end

for 25@ = 0 to 19

if
056D:   actor $TANK[25@] defined
    then
    actor.LockInCurrentPosition($TANK[25@],false)
    end
    
if
056D:   actor $HUNTER[25@] defined
    then
    actor.LockInCurrentPosition($HUNTER[25@],false)
    end
    
if
056D:   actor $WITCH[25@] defined
    then
    actor.LockInCurrentPosition($WITCH[25@],false)
    end
    
if
056D:   actor $CHARGER[25@] defined
    then
    actor.LockInCurrentPosition($CHARGER[25@],false)
    end             

end

///////////////////////////////////////////////////////////////////////////

for 25@ = 0 to 4

if
056E:   car $USED_CAR[25@] defined
then
car.LockInCurrentPosition($USED_CAR[25@],false)
end

end

///////////////////////////////////////////////////////////////////////////

COOP_TP_TEAMMATES_FLAG = 1

if
not INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG == 1
then
fade 1 500
$HUD_REMOVE = 0
end

$PANEL_OPEN = 0
$Z_DONT_CLIMB_FLAG = 0
wait 100
$ZOMBIE_REMOVE_FLAG = 0
$INT_ENTERING_FLAG = 0

///Дистанция удаления авто на экране  
0662: printstring "----------Car On Screen Destory Distance by ThirteenAG----------" 
0AC6: 0@ = label @PEDS_ON_SCREEN_DRAW_DISTANCE offset 
0A8C: write_memory 0@ size 4 value 280.0 virtual_protect 0 
0A8C: write_memory 0x4250F0 size 4 value 0@ virtual_protect 1 

///Дистанция удаления авто за экраном  
0662: printstring "----------Car Off Screen Destory Distance by ThirteenAG----------" 
0@ = 280.0
0A8C: write_memory 0x42510F size 4 value 0@ virtual_protect 0 
0@ *= 0.6 
0A8C: write_memory 0x4250E2 size 4 value 0@ virtual_protect 0

if
0800:   in_two_players_mode
then

33@ = 0
08E7: disable_entrance_markers 1

repeat
wait 0

if and
33@ > 3000
not $QUEST_TYPE == 19
    then
    08E7: disable_entrance_markers 0
    break
    end
    
until false

end    

jump @INT_ZMB_CHECK   

:INT_ZMB_CHECK33

if
UNITED_MAP == 0
then

else

end

return

:INT_ZMB_ALIVE_ZOMBIE_CHECK

1@ = 0

for 0@ = 0 to 19

if and
056D:   actor $ZOMBIE[0@] defined
not $ZOMBIE[0@] == -69
    then
    if and
    not actor.Dead($ZOMBIE[0@])
    0184:   actor $ZOMBIE[0@] health >= 1    
        then
        1@ = 1
        end
    end
    
if and
$ZOMBIE_MODEL[24@] > 0
056D:   actor $ZOMBIE[0@] defined
not $ZOMBIE[0@] == -69
    then
    1@ = 1
    end    

end

return

:INT_ZMB_WAIT_CHECK_FOR_EXIT

08E7: disable_entrance_markers 1

32@ = 0

repeat
wait 0

if and
09E7:   player PLAYER_CHAR not_frozen
not $ACTIVE_INTERIOR == 0
    then
    else
    $ZOMBIE_REMOVE_FLAG = 1
    ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
    break
    end

until 32@ > 1000

32@ = 0

if
not $QUEST_TYPE == 19
then
08E7: disable_entrance_markers 0
end

return