//CAMP_NUMBER = 3

const
QUEST4_CAR1 = $SUPPLY_QUEST_TRUCK
QUEST4_CAR2 = 111@
QUEST4_CAR3 = 112@
QUEST4_CAR4 = 113@
QUEST4_CAR5 = 114@
QUEST4_CAR6 = 115@
QUEST4_CAR7 = 116@
QUEST4_CAR8 = 117@
QUEST4_CAR9 = 118@
QUEST4_CAR10 = 119@
QUEST4_CAR11 = 122@
QUEST4_CAR12 = 123@
QUEST4_CAR13 = 124@
MAIN_QUEST4_ATTACK_FLAG = 120@
MAIN_QUEST4_GATE_FLAG = 121@
MAIN_QUEST4_TEAMMATE1 = $RNDM_HOUSE_WEAPON[31]
MAIN_QUEST4_TEAMMATE2 = $RNDM_HOUSE_WEAPON[32]
MAIN_QUEST4_TEAMMATE3 = $RNDM_HOUSE_WEAPON[33]
MAIN_QUEST4_TEAMMATE4 = $RNDM_HOUSE_WEAPON[34]
MAIN_QUEST4_TEAMMATE5 = $RNDM_HOUSE_WEAPON[35]
MAIN_QUEST4_TEAMMATE6 = $RNDM_HOUSE_WEAPON[36]
MAIN_QUEST4_TEAMMATE7 = $RNDM_HOUSE_WEAPON[37]
MAIN_QUEST4_TEAMMATE8 = $RNDM_HOUSE_WEAPON[38]
MAIN_QUEST4_TEAMMATE9 = $RNDM_HOUSE_WEAPON[39]
end

:MQ4
thread 'MQ4'
gosub @ASSKOD_MISSII2829_4 
if 
wasted_or_busted 
jf @ASSPROPUSK_KODA2829_4 
gosub @ASSKOD_PROVALA2829_4 

:ASSPROPUSK_KODA2829_4        
gosub @ASSUDALENIE_KODA2829_4

HARDCORE_DANGER_FLAG_SCRIPTED = 0
if
GAME_OVER_FLAG == 1
then
HARDCORE_DANGER_ANTIFLAG_SCRIPTED = 1
end

create_thread @MQ_CHKP

end_thread

:ASSKOD_MISSII2829_4
increment_mission_attempts
0629: change_integer_stat 258 to 35

0776: create_objects_in_object_group "quest4_0"

///////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4A.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

actor.StorePos(PLAYER_ACTOR,100@,101@,102@)
0084: $QUEST_CAMP_NUMBER = $ENTERED_CAMP_NUMBER // (int)

marker.Disable($CAMP_MARKER[$QUEST_CAMP_NUMBER])
$CAMP_MARKER[$QUEST_CAMP_NUMBER] = Marker.CreateIconWithoutSphere(31, $CAMP_X[$QUEST_CAMP_NUMBER], $CAMP_Y[$QUEST_CAMP_NUMBER], $CAMP_Z[$QUEST_CAMP_NUMBER])

MAIN_QUEST_TEAMMATES_REMOVE_FLAG = 1
create_thread @MQ_GRP

07FB: set_interior 'SKLAD' access 1

repeat
wait 0
REMOVE_SAVE_PICKUP_FOR_A_WHILE = 1
until $PHRASES_OFF_FLAG == 0

//MAIN_QUEST4_COMPLETED_FLAG = 1

00BA: show_text_styled GXT "GAME683" time 5000 style 2

$ONMISSION = 1
REMOVE_SAVE_PICKUP_FOR_A_WHILE = 0
$QUEST_TYPE = 16
$NOTSPAWN_ETC = 1
$SURVIVORS_DONT_SPAWN_FLAG = 1
$SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1

018A: MISSION_CHECKPOINT = create_checkpoint_at 542.217 -1292.5048 17.2422
018A: MISSION_MARKER = create_checkpoint_at -713.061 -2120.707 25.9614
03BC: 310@ = create_sphere_at 542.217 -1292.5048 17.2422 radius 1.5
03BC: 311@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
v$OBJECTIVE = "GAME671"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GRME671"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

if and
$CHEATS_ON == 1
0AB0:   key_pressed 49
then
0AF1: write_int 2 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 50
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_ROOT"
end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
if
MQ_CHECKPOINT_FUCKNO == 1
then
0@ = 0
end

if
0@ == 1
then
marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere 310@
200@ = 1

v$OBJECTIVE = "GME671B"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR671B"
    end

end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_DONE"
if
MQ_CHECKPOINT_FUCKNO == 1
then
0@ = 0
end

if
0@ == 1
then
marker.Disable(MISSION_MARKER)
03BD: destroy_sphere 311@
201@ = 1

v$OBJECTIVE = "GME671C"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR671C"
    end

end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
if
MQ_CHECKPOINT_FUCKNO == 1
then
0@ = 0
end

if
0@ > 0
then
0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
if
0@ == 1
    then
    $HUD_REMOVE = 1
    fade 0 500
    wait 500
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere 310@
           
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_DONE"
    if
    0@ == 1
    then
    201@ = 1
    else
    marker.Disable(MISSION_MARKER)
    03BD: destroy_sphere 311@
    end
    
    jump to @MQ4_GUNS_CARS_JUMP
    else
    07FB: set_interior 'SKLAD' access 0  // Ganton Gym    
    $HUD_REMOVE = 1
    fade 0 500
    wait 500
    
    actor.PutAtNoOffset(PLAYER_ACTOR,-716.7321, -2114.2083, 25.7966)
    actor.Angle(PLAYER_ACTOR) = 207.7283
    create_thread @REFR_3D
    
    repeat
    wait 0
    until $ENTERED_CAMP_NUMBER == -1
    
    ZOMBIES_NOTSPAWN = 1
    
    wait 500
            
    marker.Disable(MISSION_MARKER)
    03BD: destroy_sphere 311@         
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
    if
    0@ == 1
    then
    200@ = 1
    else
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere 310@
    end    
        
    actor.PutAtNoOffset(PLAYER_ACTOR,-689.1397, -2156.991, 1008.4531)
    actor.Angle(PLAYER_ACTOR) = 104.0
    select_interior 1
    0860: link_actor PLAYER_ACTOR to_interior 1
    create_thread @REFR_3D
    400@ = 1
    jump to @MQ4_GUNS_ROOT_JUMP 
    end
end 

:MAIN_QUEST4_MAIN_LOOP
repeat
wait 0

//mqskip
if and
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
$CHEAT_TYPE_FLAG == 1
    then
    if
    0ADC:   test_cheat "SKIP"
        then
        $TALK_SIMULATE = 1
        $QUEST_READY_FLAG = 1
        jump to @MQ4_END_JUMP
        end
    end

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST4_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST4_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST4_FAILED_LDEAD

///////////////////////////////////ВЕТКА С МАШИНАМИ///////////////////////////////////

if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 542.217 -1292.5048 17.2422 radius 1.5 1.5 1.5
02A0:   actor PLAYER_ACTOR stopped
044B:   actor PLAYER_ACTOR on_foot
200@ == 0
    then
    200@ = 1
    
    marker.Disable(MISSION_CHECKPOINT)
    marker.Disable(MISSION_MARKER)
    v$OBJECTIVE = "DUMMY"
    player.CanMove(PLAYER_CHAR,false)
    03BD: destroy_sphere 310@
    03BD: destroy_sphere 311@
//    text.ShowH('MQ_206',3000,1)
    v$ST_DIALOG[0] = "MQ_206"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    repeat
    wait 0
    until $DIALOG_END == 1
    
    HARDCORE_DANGER_FLAG_SCRIPTED = 1
    FP_ACTIVATE_SCRIPTED = 1
    
//    wait 3000
    
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    $SAVESTATUS = 1
    
    $SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\QUESTS\dooropen.wav")
    Audiostream.PerformAction($SHIT_FUCK, PLAY)
    Audiostream.Loop($SHIT_FUCK, 0)
    Audiostream.Volume($SHIT_FUCK) = $SOUNDS_VOLUME
    
    wait 5000
    
    audiostream.Release($SHIT_FUCK)
    
    wait 1000
    
    $SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\QUESTS\bathit.wav")
    Audiostream.PerformAction($SHIT_FUCK, PLAY)
    Audiostream.Loop($SHIT_FUCK, 0)
    Audiostream.Volume($SHIT_FUCK) = $SOUNDS_VOLUME
    
    09F1: play_audio_at_actor PLAYER_ACTOR event 1130    
    05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 9999999
    015B: shake_player_controller 0 time 250 intensity 150
    player.SetDrunkVisuals(PLAYER_CHAR,20)
    
    wait 2000
    
    audiostream.Release($SHIT_FUCK)
    
    while not model.Available(12780)
    wait 0
    model.Load(12780)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[23] = actor.Create(26,12780,542.7077, -1304.6487, 27.3512)
    actor.Angle($RNDM_HOUSE_WEAPON[23]) = 95.7237
    08C6: set_actor $RNDM_HOUSE_WEAPON[23] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[23],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[23] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[23] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[23]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[23]) = $DLC_M4_BANDIT_ACCURACY    
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[23] 371
    
    0781: get_weapon_with_ID 73 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
    
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[23], 73, 99999)
    
    //actor.PutAtNoOffset(PLAYER_ACTOR,539.8704, -1304.9449, 27.3512)
    //actor.Angle(PLAYER_ACTOR) = 273.7953
    actor.PutAtNoOffset(PLAYER_ACTOR,540.7868, -1304.8541, 27.3512)
    actor.Angle(PLAYER_ACTOR) = 276.1404
    actor.PutAtNoOffset($RNDM_HOUSE_WEAPON[23],542.7077, -1304.6487, 27.3512)
    actor.Angle($RNDM_HOUSE_WEAPON[23]) = 95.7237
    camera.Restore_WithJumpCut()
    05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 9999999
    wait 500        
    
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    0470: 305@ = actor PLAYER_ACTOR current_weapon
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    0992: set_player PLAYER_CHAR weapons_scrollable 0
    
    0667: AS_actor $RNDM_HOUSE_WEAPON[23] aim_at 534.8212 -1305.4957 20.3512 9999999 ms
    
    $DIALOG_ACTOR[0] = -1
    0084: $DIALOG_ACTOR[1] = $SURVIVER[0] // (int)
    $DIALOG_ACTOR[2] = -1
    0084: $DIALOG_ACTOR[3] = $SURVIVER[0] // (int)
    0084: $DIALOG_ACTOR[4] = $RNDM_HOUSE_WEAPON[23] // (int)
    0084: $DIALOG_ACTOR[5] = $SURVIVER[0] // (int)
    0084: $DIALOG_ACTOR[6] = $RNDM_HOUSE_WEAPON[23] // (int)
    0084: $DIALOG_ACTOR[7] = $SURVIVER[0] // (int)
    0084: $DIALOG_ACTOR[8] = $RNDM_HOUSE_WEAPON[23] // (int)
    0084: $DIALOG_ACTOR[9] = $RNDM_HOUSE_WEAPON[23] // (int)
    0084: $DIALOG_ACTOR[10] = $SURVIVER[0] // (int)
    0084: $DIALOG_ACTOR[11] = $RNDM_HOUSE_WEAPON[23] // (int)
    0084: $DIALOG_ACTOR[12] = $RNDM_HOUSE_WEAPON[23] // (int)
    v$ST_DIALOG[0] = "MQ_208"
    v$ST_DIALOG[1] = "MQ_209"
    v$ST_DIALOG[2] = "MQ_210"
    v$ST_DIALOG[3] = "MQ_211"
    v$ST_DIALOG[4] = "MQ_212"
    v$ST_DIALOG[5] = "MQ_213"
    v$ST_DIALOG[6] = "MQ_214"
    v$ST_DIALOG[7] = "MQ_215"
    v$ST_DIALOG[8] = "MQ_216"
    v$ST_DIALOG[9] = "MQ_217"
    v$ST_DIALOG[10] = "MQ_218"
    v$ST_DIALOG[11] = "MQ_219"
    v$ST_DIALOG[12] = "MQ_220"  
    $DIALOG_COUNT = 12
    create_thread @DG_SYS
    
    28@ = 0    
    
    repeat
    wait 0
    
    if and
    $DIALOG_CURRENT_INT > 3
    28@ == 0
        then
        28@ = 1
        0687: clear_actor $RNDM_HOUSE_WEAPON[23] task
        06AB: set_actor $RNDM_HOUSE_WEAPON[23] all_weapons_hidden 1
        end
    
    until $DIALOG_END == 1

    $DIALOG_END = 1
    
    player.CanMove(PLAYER_CHAR,true)
    
    wait 500
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    player.SetDrunkVisuals(PLAYER_CHAR,0)
    010B: 0@ = player PLAYER_CHAR money
    if
    0@ < 300
    then
    0@ /= -2
    0@ *= 2
    0109: player PLAYER_CHAR money += 0@
    else
    0109: player PLAYER_CHAR money += -300
    end
    
    actor.DestroyInstantly($RNDM_HOUSE_WEAPON[23])
    actor.RemoveReferences($RNDM_HOUSE_WEAPON[23])
    
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@
    
    actor.PutAtNoOffset(PLAYER_ACTOR,542.0287, -1290.5028, 17.2422)
    actor.Angle(PLAYER_ACTOR) = 1.5433
    camera.Restore_WithJumpCut()
    
    wait 2000
    
    $SAVESTATUS = 0
    HARDCORE_DANGER_FLAG_SCRIPTED = 0
    
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
//    text.ShowH('MQ_221',2000,1)
//    wait 2000

    v$ST_DIALOG[0] = "MQ_221"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    repeat
    wait 0
    until $DIALOG_END == 1
    
    018A: MISSION_CHECKPOINT = create_checkpoint_at 100@ 101@ 102@

    v$OBJECTIVE = "GAME684"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME684"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)    
    $QUEST_READY_FLAG = 2          
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1
//    
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
    
    ///////////////////////////////////////////////////////////
    
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4B.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
    
    /////////////////////////////////////////////////////////////////////
    
    repeat
    wait 0
    
    if
    875C: not  marker MISSION_CHECKPOINT enabled
    then
    018A: MISSION_CHECKPOINT = create_checkpoint_at 100@ 101@ 102@
    end    
    
    until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 100@ 101@ 102@ radius 5.0 5.0 10.0
    
    ////////////////////////////////////
    
    v$OBJECTIVE = "GAME685"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME685"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    CAMP_LEADER_DONT_SAY_BYE_FLAG = 1    

    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD
    
    until $QUEST_READY_FLAG == 3
    
    :MQ4_GUNS_CARS_JUMP
    200@ = 1
    v$OBJECTIVE = "DUMMY"
    marker.Disable(MISSION_CHECKPOINT)
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    if
    MQ_CHECKPOINT_FUCKNO == 1
    then
    0@ = 0
    end
        
    if
    not 0@ == 2
    then
    0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    end
    0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
    
    /////////////////////////////////////////
    
    :CAR_CREATE_QMISSION4_1
    if
    model.Available(15423)
    then
    
    QUEST4_CAR1 = Car.Create(15423, 1080.5403, -340.3826, 73.8916)
    Car.Angle(QUEST4_CAR1) = 1.4954
    
    if
    model.Available(15423)
    then
    //model.Destroy(15423)
    end
    
    else
    model.Load(15423)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_1
    end
    
    /////////////////////////////////////////
    
    :CAR_CREATE_QMISSION4_2
    if
    model.Available(15424)
    then
    
    QUEST4_CAR2 = Car.Create(15424, -253.9082, -2189.1191, 28.9675)
    Car.Angle(QUEST4_CAR2) = 205.6262
    Car.DoorStatus(QUEST4_CAR2) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR2 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_2
    end
    
    :CAR_CREATE_QMISSION4_3
    if
    model.Available(15424)
    then
    
    QUEST4_CAR3 = Car.Create(15424, -258.1689, -2191.1196, 28.8966)
    Car.Angle(QUEST4_CAR3) = 206.5543
    Car.DoorStatus(QUEST4_CAR3) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR3 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_3
    end
    
    :CAR_CREATE_QMISSION4_4
    if
    model.Available(15424)
    then
    
    QUEST4_CAR4 = Car.Create(15424, -247.4855, -2205.7087, 28.9238)
    Car.Angle(QUEST4_CAR4) = 21.5298
    Car.DoorStatus(QUEST4_CAR4) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR4 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_4
    end
    
    :CAR_CREATE_QMISSION4_5
    if
    model.Available(15424)
    then
    
    QUEST4_CAR5 = Car.Create(15424, -251.9087, -2207.8437, 28.8385)
    Car.Angle(QUEST4_CAR5) = 25.4318
    Car.DoorStatus(QUEST4_CAR5) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR5 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_5
    end
    
    :CAR_CREATE_QMISSION4_6
    if
    model.Available(15424)
    then
    
    QUEST4_CAR6 = Car.Create(15424, -257.4819, -2232.1187, 28.5351)
    Car.Angle(QUEST4_CAR6) = 299.8935
    Car.DoorStatus(QUEST4_CAR6) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR6 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_6
    end
    
    :CAR_CREATE_QMISSION4_7
    if
    model.Available(15424)
    then
    
    QUEST4_CAR7 = Car.Create(15424, -259.9055, -2227.7756, 28.5498)
    Car.Angle(QUEST4_CAR7) = 300.2659
    Car.DoorStatus(QUEST4_CAR7) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR7 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_7
    end
    
    :CAR_CREATE_QMISSION4_8
    if
    model.Available(15424)
    then
    
    QUEST4_CAR8 = Car.Create(15424, -252.4007, -2196.3206, 28.9463)
    Car.Angle(QUEST4_CAR8) = 113.4743
    Car.DoorStatus(QUEST4_CAR8) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR8 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_8
    end
    
    :CAR_CREATE_QMISSION4_9
    if
    model.Available(15424)
    then
    
    QUEST4_CAR9 = Car.Create(15424, -250.8811, -2199.7773, 28.9457)
    Car.Angle(QUEST4_CAR9) = 113.9289
    Car.DoorStatus(QUEST4_CAR9) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR9 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_9
    end
    
    :CAR_CREATE_QMISSION4_10
    if
    model.Available(15424)
    then
    
    QUEST4_CAR10 = Car.Create(15424, -251.8824, -2228.2407, 28.5769)
    Car.Angle(QUEST4_CAR10) = 30.3946
    Car.DoorStatus(QUEST4_CAR10) = 2
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR10 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_10
    end 
    
    /////////////////////////////////////////
    
    while not model.Available(12779)
    wait 0
    model.Load(12779)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[23] = actor.Create(29,12779,-279.7758, -2191.3284, 28.6875)
    actor.Angle($RNDM_HOUSE_WEAPON[23]) = 205.5337
    08C6: set_actor $RNDM_HOUSE_WEAPON[23] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[23],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[23] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[23] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[23]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[23]) = $DLC_M4_BANDIT_ACCURACY
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[23] 371    
    
    0781: get_weapon_with_ID 24 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[23], 24, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[23] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[23] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    0337: set_actor $RNDM_HOUSE_WEAPON[23] visibility 0
    
    /////////////////////////////////////////
    
    gosub @MAIN_QUEST4_CHECKING_MODEL
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[24] = actor.Create(29,0@,-283.8209, -2188.4204, 36.8743)
    actor.Angle($RNDM_HOUSE_WEAPON[24]) = 114.3502
    08C6: set_actor $RNDM_HOUSE_WEAPON[24] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[24],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[24] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[24] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[24]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[24]) = $DLC_M4_BANDIT_ACCURACY
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[24] 371    
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[24], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[24] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[24] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    
    gosub @MAIN_QUEST4_CHECKING_MODEL
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[25] = actor.Create(29,0@,-275.7142, -2205.6042, 36.8743)
    actor.Angle($RNDM_HOUSE_WEAPON[25]) = 116.545
    08C6: set_actor $RNDM_HOUSE_WEAPON[25] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[25],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[25] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[25] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[25]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[25]) = $DLC_M4_BANDIT_ACCURACY
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[25] 371    
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[25], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[25] weapon_droppable 0 
    0946: set_actor $RNDM_HOUSE_WEAPON[25] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE       
    
    while not model.Available(12778)
    wait 0
    model.Load(12778)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[26] = actor.Create(29,12778,-261.5514, -2191.5237, 28.923)
    actor.Angle($RNDM_HOUSE_WEAPON[26]) = 111.4346
    08C6: set_actor $RNDM_HOUSE_WEAPON[26] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[26],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[26] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[26] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[26]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[26]) = $DLC_M4_BANDIT_ACCURACY    
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[26] 371
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[26], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[26] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[26] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    
    gosub @MAIN_QUEST4_CHECKING_MODEL
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[27] = actor.Create(29,0@,-253.7393, -2209.0549, 28.8749)
    actor.Angle($RNDM_HOUSE_WEAPON[27]) = 111.0454
    08C6: set_actor $RNDM_HOUSE_WEAPON[27] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[27],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[27] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[27] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[27]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[27]) = $DLC_M4_BANDIT_ACCURACY
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[27] 371    
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[27], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[27] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[27] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    
    gosub @MAIN_QUEST4_CHECKING_MODEL
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[28] = actor.Create(29,0@,-279.3748, -2192.458, 28.6866)
    actor.Angle($RNDM_HOUSE_WEAPON[28]) = 139.4291
    08C6: set_actor $RNDM_HOUSE_WEAPON[28] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[28],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[28] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[28] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[28]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[28]) = $DLC_M4_BANDIT_ACCURACY
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[28] 371
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[28], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[28] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[28] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    
    gosub @MAIN_QUEST4_CHECKING_MODEL
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[29] = actor.Create(29,0@,-275.7884, -2200.0991, 28.6748)
    actor.Angle($RNDM_HOUSE_WEAPON[29]) = 79.4068
    08C6: set_actor $RNDM_HOUSE_WEAPON[29] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[29],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[29] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[29] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[29]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[29]) = $DLC_M4_BANDIT_ACCURACY    
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[29] 371
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[29], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[29] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[29] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    
    gosub @MAIN_QUEST4_CHECKING_MODEL
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    $RNDM_HOUSE_WEAPON[30] = actor.Create(29,0@,-282.8065, -2174.4587, 28.659)
    actor.Angle($RNDM_HOUSE_WEAPON[30]) = 114.4726
    08C6: set_actor $RNDM_HOUSE_WEAPON[30] stay_on_bike 1    
    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[30],"GANG2")
    0446: set_actor $RNDM_HOUSE_WEAPON[30] dismemberment_possible 0
    060B: set_actor $RNDM_HOUSE_WEAPON[30] decision_maker_to $DEC_PEOPLE
    
    1@ = 1000
    if
    AUTOLEVELING_ON_FLAG == 1
    then
    for 0@ = 1 to $PLAYER_LEVEL
    1@ += 35
    end
    end
    
    actor.Health($RNDM_HOUSE_WEAPON[30]) = 1@
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[30]) = $DLC_M4_BANDIT_ACCURACY    
    create_thread @PED_BKP $RNDM_HOUSE_WEAPON[30] 371
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
       
    Actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[30], 30, 9999)
    087E: set_actor $RNDM_HOUSE_WEAPON[30] weapon_droppable 0
    0946: set_actor $RNDM_HOUSE_WEAPON[30] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    
    /////////////////////////////////////////
    
    while not model.Available(FERMER1_SKIN_ID)
    wait 0
    model.Load(FERMER1_SKIN_ID)
    mload
    end
    
    MAIN_QUEST4_TEAMMATE1 = actor.CreateAsPassenger(26,FERMER1_SKIN_ID,QUEST4_CAR1,0)
    08C6: set_actor MAIN_QUEST4_TEAMMATE1 stay_on_bike 1    
    actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE1,"GANG2")
    0446: set_actor MAIN_QUEST4_TEAMMATE1 dismemberment_possible 0
    060B: set_actor MAIN_QUEST4_TEAMMATE1 decision_maker_to $DEC_PEOPLE
    actor.Health(MAIN_QUEST4_TEAMMATE1) = 5000
    actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE1) = 85
    create_thread @PED_BKP MAIN_QUEST4_TEAMMATE1 371 
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
       
    Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE1, 30, 99999)
    
    while not model.Available(FERMER4_SKIN_ID)
    wait 0
    model.Load(FERMER4_SKIN_ID)
    mload
    end
    
    MAIN_QUEST4_TEAMMATE2 = actor.CreateAsPassenger(26,FERMER4_SKIN_ID,QUEST4_CAR1,1)
    08C6: set_actor MAIN_QUEST4_TEAMMATE2 stay_on_bike 1    
    actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE2,"GANG2")
    0446: set_actor MAIN_QUEST4_TEAMMATE2 dismemberment_possible 0
    060B: set_actor MAIN_QUEST4_TEAMMATE2 decision_maker_to $DEC_PEOPLE
    actor.Health(MAIN_QUEST4_TEAMMATE2) = 5000
    actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE2) = 85
    create_thread @PED_BKP MAIN_QUEST4_TEAMMATE2 371
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE2, 30, 99999)
    
    while not model.Available(FERMER3_SKIN_ID)
    wait 0
    model.Load(FERMER3_SKIN_ID)
    mload
    end
    
    MAIN_QUEST4_TEAMMATE3 = actor.CreateAsPassenger(26,FERMER3_SKIN_ID,QUEST4_CAR1,2)
    08C6: set_actor MAIN_QUEST4_TEAMMATE3 stay_on_bike 1    
    actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE3,"GANG2")
    0446: set_actor MAIN_QUEST4_TEAMMATE3 dismemberment_possible 0
    060B: set_actor MAIN_QUEST4_TEAMMATE3 decision_maker_to $DEC_PEOPLE
    actor.Health(MAIN_QUEST4_TEAMMATE3) = 5000
    actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE3) = 85
    create_thread @PED_BKP MAIN_QUEST4_TEAMMATE3 371
    
    0781: get_weapon_with_ID 30 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
        
    Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE3, 30, 99999)
    
    /////////////////////////////////////////
    
    0A97: 11@ = car QUEST4_CAR1 struct 
    11@ += 9 
    0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
    08BD: set 12@ bit 2 
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    0A97: 11@ = car QUEST4_CAR1 struct 
    11@ += 4 
    0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
    08BD: set 12@ bit 1 
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    24@ = 25.0 
    0A97: 22@ = car QUEST4_CAR1 struct 
    0A8E: 23@ = 22@ + 5 // int 
    0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
    08C3: clear 12@ bit 1 
    08C3: clear 12@ bit 2 
    0A97: 11@ = car QUEST4_CAR1 struct 
    11@ += 18 
    0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
    08BD: set 12@ bit 2 
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    08C3: clear 12@ bit 2
    Car.RemoveReferences(QUEST4_CAR1)
    036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR1
    text.ClearAll()
    text.RemoveTextBox()
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D
    
    wait 1000
    
    0631: put_actor MAIN_QUEST4_TEAMMATE1 in_group PLAYER_GROUP
    
    if
    COOP_ACTIVE_FLAG == 1
    then
    0EA0: set_actor_second_player MAIN_QUEST4_TEAMMATE1 enable_camera 1 separate_cars 0
    0084: COOP_ACTOR = MAIN_QUEST4_TEAMMATE1 // (int)
    wait 0
    0362: remove_actor MAIN_QUEST4_TEAMMATE1 from_car_and_place_at 1066.1786 -325.7139 73.915
    0430: put_actor MAIN_QUEST4_TEAMMATE1 into_car QUEST4_CAR1 passenger_seat 0
    end
    
    0631: put_actor MAIN_QUEST4_TEAMMATE2 in_group PLAYER_GROUP
    0631: put_actor MAIN_QUEST4_TEAMMATE3 in_group PLAYER_GROUP
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1
//    
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
    
    ///////////////////////////////////////////////////////////
    
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4C.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
    
    /////////////////////////////////////////////////////////////////////        
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    if
    MQ_CHECKPOINT_FUCKNO == 1
    then
    0@ = 0
    end
        
    if
    not 0@ == 2
    then
    $HUD_REMOVE = 0
    fade 1 500
    wait 500
    else
    car.PutAt(QUEST4_CAR1,-287.2976 -2200.5342 28.4067)
    car.Angle(QUEST4_CAR1) = 204.7335
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D
    end
    
    018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
    03BC: MISSION_SPHERE = create_sphere_at -287.2976 -2200.5342 28.4067 radius 1.5
    v$OBJECTIVE = "GAME686"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME686"
    end
    
    if
    not 0@ == 2
    then
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    end
    
    CAMP_LEADER_DONT_SAY_BYE_FLAG = 0          
    
    ////////////////////////////////////
    
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD
    
    if
    056E:   car QUEST4_CAR1 defined
    then
    
    if
    not car.Wrecked(QUEST4_CAR1)
    jf @MAIN_QUEST4_FAILED_CAR
    
    if
    not actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)
        then
        $DIALOG_PAUSE = 1
        marker.Disable(MISSION_CHECKPOINT)
        03BD: destroy_sphere MISSION_SPHERE
        v$OBJECTIVE = "GAME687"
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
        
        MISSION_CHECKPOINT = marker.CreateAboveCar(QUEST4_CAR1)
        07E0: set_marker MISSION_CHECKPOINT type_to 1
        
        ///////////////////////////////////////////////////////////////////
        
        while true
        wait 0
        
        for 0@ = 23 to 30
        if
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            jump @MAIN_QUEST4_FAILED_AGRO2
            end
        end
        
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD        
        if and
        0184:   actor MAIN_QUEST4_TEAMMATE1 health > 0
        0184:   actor MAIN_QUEST4_TEAMMATE2 health > 0
        0184:   actor MAIN_QUEST4_TEAMMATE3 health > 0
        jf @MAIN_QUEST4_FAILED_TDEAD
        
        if
        056E:   car QUEST4_CAR1 defined
            then
            
            if
            not car.Wrecked(QUEST4_CAR1)
            jf @MAIN_QUEST4_FAILED_CAR
            
            if
            actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)   
                then
                $DIALOG_PAUSE = 0    
                marker.Disable(MISSION_CHECKPOINT)
                018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
                03BC: MISSION_SPHERE = create_sphere_at -287.2976 -2200.5342 28.4067 radius 1.5
                v$OBJECTIVE = "GAME686"
                if
                REALISM_MODE == 1
                then
                v$OBJECTIVE = "GRME686"
                end
                0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                $SOUNDS_VOLUME3 *= 0.5
                Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                break
                end
            else
            jump to @MAIN_QUEST4_FAILED_CAR
            end
        
        end
        
        ///////////////////////////////////////////////////////////////////
        
        end
    else
    jump to @MAIN_QUEST4_FAILED_CAR
    end
    
    if and
    00EC:   actor PLAYER_ACTOR sphere 0 near_point -287.2976 -2200.5342 radius 300.0 300.0
    ZOMBIES_NOTSPAWN == 0
    then
    ZOMBIES_NOTSPAWN = 1
    HARDCORE_DANGER_FLAG_SCRIPTED = 1
    077A: set_actor MAIN_QUEST4_TEAMMATE1 acquaintance 0 to_actors_pedtype 29 // see ped.dat
    077A: set_actor MAIN_QUEST4_TEAMMATE2 acquaintance 0 to_actors_pedtype 29 // see ped.dat
    077A: set_actor MAIN_QUEST4_TEAMMATE3 acquaintance 0 to_actors_pedtype 29 // see ped.dat        
    077A: set_actor $RNDM_HOUSE_WEAPON[23] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[24] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[25] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[26] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[27] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[28] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[29] acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[30] acquaintance 0 to_actors_pedtype 26 // see ped.dat        
    077A: set_actor $RNDM_HOUSE_WEAPON[23] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[24] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[25] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[26] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[27] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[28] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[29] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    077A: set_actor $RNDM_HOUSE_WEAPON[30] acquaintance 0 to_actors_pedtype 0 // see ped.dat
    088C: put_car QUEST4_CAR2 at -253.9082 -2189.1191 28.9675 // versionB
    088C: put_car QUEST4_CAR4 at -247.4855 -2205.7087 28.9238 // versionB
    0635: AS_actor $RNDM_HOUSE_WEAPON[24] aim_at_actor PLAYER_ACTOR 900000 ms
    0635: AS_actor $RNDM_HOUSE_WEAPON[25] aim_at_actor PLAYER_ACTOR 900000 ms
    end
    
    if
    875C: not  marker MISSION_CHECKPOINT enabled
    then
    018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
    end   
            
    for 0@ = 23 to 30
    if
    051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
        then
        jump @MAIN_QUEST4_FAILED_AGRO2
        end
    end
        
    
    until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -287.2976 -2200.5342 28.4067 radius 1.5 1.5 10.0
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    if
    MQ_CHECKPOINT_FUCKNO == 1
    then
    0@ = 0
    end
    
    if
    0@ == 2
    then
    $HUD_REMOVE = 0
    fade 1 500
    wait 500
    end
    
    0AF1: write_int 2 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    marker.Disable(MISSION_CHECKPOINT)
    0221: set_player PLAYER_CHAR apply_brakes_to_car 1
    03BD: destroy_sphere MISSION_SPHERE
    05CD: AS_actor PLAYER_ACTOR exit_car QUEST4_CAR1
    068B: set_car QUEST4_CAR1 all_disembark
    
    v$OBJECTIVE = "GAME688"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME688"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    018A: MISSION_CHECKPOINT = create_checkpoint_at -281.159 -2198.1934 28.4153
    
    0337: set_actor $RNDM_HOUSE_WEAPON[23] visibility 1
    
    0615: define_AS_pack_begin 15@
    05D3: AS_actor -1 goto_point -278.6669 -2192.5896 28.6863 mode 4 time 99999 ms // versionA
    05D3: AS_actor -1 goto_point -279.9174 -2197.4082 28.6831 mode 4 time 99999 ms // versionA
    0635: AS_actor -1 aim_at_actor PLAYER_ACTOR 900000 ms
    0616: define_AS_pack_end 15@
    0618: assign_actor $RNDM_HOUSE_WEAPON[23] to_AS_pack 15@
    061B: remove_references_to_AS_pack 15@
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1
//    
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
    
    ///////////////////////////////////////////////////////////
    
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4D.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
    
    /////////////////////////////////////////////////////////////////////
    
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD        
    if and
    0184:   actor MAIN_QUEST4_TEAMMATE1 health > 0
    0184:   actor MAIN_QUEST4_TEAMMATE2 health > 0
    0184:   actor MAIN_QUEST4_TEAMMATE3 health > 0
    jf @MAIN_QUEST4_FAILED_TDEAD
    
    for 0@ = 23 to 30
    if
    051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
        then
        jump @MAIN_QUEST4_FAILED_AGRO2
        end
    end
    
    if and
    02A0:   actor PLAYER_ACTOR stopped
    00F2:   actor $RNDM_HOUSE_WEAPON[23] near_actor PLAYER_ACTOR radius 3.5 3.5 sphere 0
        then
        break
        end
    
    until false
    
    0221: set_player PLAYER_CHAR apply_brakes_to_car 0
    marker.Disable(MISSION_CHECKPOINT)
    player.CanMove(PLAYER_CHAR,false)
    v$OBJECTIVE = "DUMMY"
    0639: AS_actor PLAYER_ACTOR rotate_to_actor $RNDM_HOUSE_WEAPON[23]
    
    0470: 305@ = actor PLAYER_ACTOR current_weapon
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    0992: set_player PLAYER_CHAR weapons_scrollable 0    
    0635: AS_actor $RNDM_HOUSE_WEAPON[28] aim_at_actor PLAYER_ACTOR 900000 ms
    0635: AS_actor $RNDM_HOUSE_WEAPON[29] aim_at_actor PLAYER_ACTOR 900000 ms
    
    $DIALOG_ACTOR[0] = -1
    0084: $DIALOG_ACTOR[1] = PLAYER_ACTOR // (int)
    $DIALOG_ACTOR[2] = -1
    $DIALOG_ACTOR[3] = -1
    $DIALOG_ACTOR[4] = -1
    0084: $DIALOG_ACTOR[5] = PLAYER_ACTOR // (int)
    $DIALOG_ACTOR[6] = -1
    0084: $DIALOG_ACTOR[7] = PLAYER_ACTOR // (int)
    0084: $DIALOG_ACTOR[8] = $RNDM_HOUSE_WEAPON[23] // (int)
    0084: $DIALOG_ACTOR[9] = $RNDM_HOUSE_WEAPON[23] // (int)
    v$ST_DIALOG[0] = "MQ_224"
    v$ST_DIALOG[1] = "MQ_225"
    v$ST_DIALOG[2] = "MQ_226"
    v$ST_DIALOG[3] = "MQ_227"
    v$ST_DIALOG[4] = "MQ_228"
    v$ST_DIALOG[5] = "MQ_229"
    v$ST_DIALOG[6] = "MQ_230"
    v$ST_DIALOG[7] = "MQ_231"
    v$ST_DIALOG[8] = "MQ_232"
    v$ST_DIALOG[9] = "MQ_233"  
    $DIALOG_COUNT = 9
    create_thread @DG_SYS
    
    28@ = 0    
    
    repeat
    wait 0
    
    if and
    $DIALOG_CURRENT_INT == 8
    28@ == 0
        then
        28@ = 1
        0687: clear_actor $RNDM_HOUSE_WEAPON[23] task
        end
    
    until $DIALOG_END == 1
    
    ////////////////////////////////////////
    
    $NOT_ALLOW_COMMANDS = 1
    
    repeat
    wait 0
    
    32@ = 0
    text.ShowH('GAME689',100,1)
    
    if
    0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0@ = 1    
    break
    end
    
    if or
    0E3E: is_button_just_pressed 0 button 10
    32@ > 10000
    then
    text.ClearAll()
    0@ = 0    
    break
    end
    
    until false
    
    wait 500
    $NOT_ALLOW_COMMANDS = 0
    
    ////////////////////////////РАЗВЕТВЛЕНИЕ С НАПАДЕНИЕМ НА ЛАГЕРЬ////////////////////////////
    
    if
    0@ == 0
        then
        
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//        
//        wait 1
//        
//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        end
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
        wait 1000
        audiostream.Release($MUSIC_ASSHOLE)
        
        ///////////////////////////////////////////////////////////
            
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4G.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            
        /////////////////////Плавное нарастание/////////////////////
//            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1 
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
        /////////////////////////////////////////////////////////////////////                
        
        0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
        v$ST_DIALOG[0] = "MQ_234"  
        $DIALOG_COUNT = 0
        create_thread @DG_SYS    
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        0687: clear_actor $RNDM_HOUSE_WEAPON[23] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[24] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[25] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[28] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[29] task
        
        0992: set_player PLAYER_CHAR weapons_scrollable 1
        06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
        01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@
        
        for 0@ = 23 to 30
        0085: 1@ = 0@ // (int)
        1@ -= 23
        $BANDIT_MARKER[1@] = marker.CreateAboveActor($RNDM_HOUSE_WEAPON[0@])
        marker.SetIconSize($BANDIT_MARKER[1@],2)
        create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
        end
        
        v$OBJECTIVE = "GAME697"
        if
        REALISM_MODE == 1
        then
        v$OBJECTIVE = "GRME697"
        end
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
        player.CanMove(PLAYER_CHAR,true)
        018A: MISSION_CHECKPOINT = create_checkpoint_at -280.8699 -2197.7515 28.5447
        
        077A: set_actor MAIN_QUEST4_TEAMMATE1 acquaintance 4 to_actors_pedtype 29 // see ped.dat
        077A: set_actor MAIN_QUEST4_TEAMMATE2 acquaintance 4 to_actors_pedtype 29 // see ped.dat
        077A: set_actor MAIN_QUEST4_TEAMMATE3 acquaintance 4 to_actors_pedtype 29 // see ped.dat        
        077A: set_actor $RNDM_HOUSE_WEAPON[23] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[24] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[25] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[26] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[27] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[28] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[29] acquaintance 4 to_actors_pedtype 26 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[30] acquaintance 4 to_actors_pedtype 26 // see ped.dat        
        077A: set_actor $RNDM_HOUSE_WEAPON[23] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[24] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[25] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[26] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[27] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[28] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[29] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        077A: set_actor $RNDM_HOUSE_WEAPON[30] acquaintance 4 to_actors_pedtype 0 // see ped.dat
        
        //////////////////////////////////////////////

        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 8 weapon 8@ ammo 9@ model 10@
        if
        9@ < 1
        then
        
        0781: get_weapon_with_ID 16 model_to 8@
        
        while not model.Available(8@)
        wait 0
        model.Load(8@)
        mload
        end
         
        Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 16, 3)
        else
        //ass
        end
        
        //////////////////////////////////////////////
        
        repeat
        wait 0
        
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD        
        if and
        0184:   actor MAIN_QUEST4_TEAMMATE1 health > 0
        0184:   actor MAIN_QUEST4_TEAMMATE2 health > 0
        0184:   actor MAIN_QUEST4_TEAMMATE3 health > 0
        jf @MAIN_QUEST4_FAILED_TDEAD
        
        for 0@ = 23 to 30

        0085: 1@ = 0@ // (int)
        1@ -= 23

        if and
        075C:   marker $BANDIT_MARKER[1@] enabled
        8184:   actor $RNDM_HOUSE_WEAPON[0@] health < 1
        then
        marker.Disable($BANDIT_MARKER[1@])
        gosub @Q4_DEATH_PHRASE
        end
        
        end
        
        MAIN_QUEST4_ATTACK_FLAG = 1
        
        for 0@ = 23 to 30
        gosub @MISSION41_ATTACK_SYSTEM
        end
        
        random_int 11@ 0 5
        random_int 0@ 23 30
        gosub @MISSION41_TEAMMATES_ATTACK_PEOPLE1
        
        8@ = -280.8699
        9@ = -2197.7515
        10@ = 28.5447 
        000F: 8@ -= 10.0
        000F: 9@ -= 10.0
        000F: 10@ -= 10.0
        5@ = -280.8699
        6@ = -2197.7515
        7@ = 28.5447 
        000F: 5@ -= -10.0
        000F: 6@ -= -10.0
        000F: 7@ -= -10.0
                
        if and           
        0356:   explosion_type -1 in_cube_cornerA 8@ 9@ 10@ cornerB 5@ 6@ 7@
        MAIN_QUEST4_GATE_FLAG == 0
            then
            marker.Disable(MISSION_CHECKPOINT)
            MAIN_QUEST4_GATE_FLAG = 1        
            0777: delete_objects_in_object_group "quest4"            
            0776: create_objects_in_object_group "quest4_2"
            v$OBJECTIVE = "GAME698"
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)        
            end
        
        if and
        875C: not  marker $BANDIT_MARKER[0] enabled
        875C: not  marker $BANDIT_MARKER[1] enabled
        875C: not  marker $BANDIT_MARKER[2] enabled
        875C: not  marker $BANDIT_MARKER[3] enabled
        875C: not  marker $BANDIT_MARKER[4] enabled
        875C: not  marker $BANDIT_MARKER[5] enabled
        875C: not  marker $BANDIT_MARKER[6] enabled
        875C: not  marker $BANDIT_MARKER[7] enabled
            then
            break
            end
        
        until false
        
        if
        075C:   marker MISSION_CHECKPOINT enabled
        then
        marker.Disable(MISSION_CHECKPOINT)        
        0777: delete_objects_in_object_group "quest4"            
        0776: create_objects_in_object_group "quest4_2"
        end
        
        v$OBJECTIVE = "DUMMY"
        HARDCORE_DANGER_FLAG_SCRIPTED = 0
        
        077A: set_actor MAIN_QUEST4_TEAMMATE1 acquaintance 0 to_actors_pedtype 26 // see ped.dat
        077A: set_actor MAIN_QUEST4_TEAMMATE2 acquaintance 0 to_actors_pedtype 26 // see ped.dat
        077A: set_actor MAIN_QUEST4_TEAMMATE3 acquaintance 0 to_actors_pedtype 26 // see ped.dat
        
        for 0@ = 23 to 30

        0085: 1@ = 0@ // (int)
        1@ -= 23

        if
        075C:   marker $BANDIT_MARKER[1@] enabled
        then
        marker.Disable($BANDIT_MARKER[1@])
        end
        
        end
        
        ///////////////////////////
        
//        text.ShowH('MQ_255',2000,1)
//        wait 2000
//        v$ST_DIALOG[0] = "MQ_255"
//        $DIALOG_COUNT = 0
//        $DIALOG_NOT_SKIP = 1
//        create_thread @DG_SYS2
//        
//        repeat
//        wait 0
//        until $DIALOG_END == 1
            
//        model.Load(#CELLPHONE)
//        mload
//            
//        0729: AS_actor PLAYER_ACTOR hold_cellphone 1
//        PLAYER_NO_ITEMS_FLAG = 1
            
//        wait 2500
            
        ///////////////////////////////////////////////////////////////////
        
//        $RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
//        Audiostream.Loop($RADIO_SOUND, 1)  
//        Audiostream.Volume($RADIO_SOUND) = VERO_TIPA_VOLUME
//        Audiostream.PerformAction($RADIO_SOUND, PLAY)
//        
//        Audiostream.Loop($RADIO_ON_SOUND,0)
//        Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
//        Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME
            
        /////////////////////Плавное нарастание/////////////////////
            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1 
            
        ////////////////////////////////////////////////////////          
            
//        32@ = 0
//        random_int 31@ 15000 25000                
//            
//        repeat
//        wait 0          
//        until 001D:   32@ > 31@  // (int)
            
        /////////////////////Плавное затухание/////////////////////
            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
            
        //////////////////////////////////////////////////////////                
            
//        v$2NAME1 = "N_ME"
//        0665: get_actor PLAYER_ACTOR model_to 0@
//        if
//        0@ > 10000
//        then
//        v$2NAME1 = "N_"
//        end
//        0AD3: v$2NAME2 = format "%d" 0@
//        098B: v$2NAME3 = v$2NAME1 + v$2NAME2
//        
//        if
//        FREEMODE_CUSTOM_NAME == 1 
//        then
//        06D1: v$2NAME3 = "F_NAME" // v$ = string
//        end
            
//        0384: show_text_1string GXT 'MQ_256' string v$2NAME3 time 2500 1
            
//        text.ShowH('MQ_257',2000,1)
//        wait 2000
//        text.ShowH('MQ_258',2000,1)
//        wait 2000
//        v$ST_DIALOG[0] = "MQ_256"
//        v$ST_DIALOG[1] = "MQ_257"
//        v$ST_DIALOG[2] = "MQ_258"
//        $DIALOG_COUNT = 2
//        $DIALOG_NOT_SKIP = 1
//        create_thread @DG_SYS2
//        
//        repeat
//        wait 0
//        until $DIALOG_END == 1
//            
//        wait 1000    
            
//        0729: AS_actor PLAYER_ACTOR hold_cellphone 0
//        PLAYER_NO_ITEMS_FLAG = 0
            
        //model.Destroy(#CELLPHONE)
        
//        Audiostream.Loop($RADIO_OFF_SOUND,0)
//        Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
//        Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME
            
        player.CanMove(PLAYER_CHAR,false)
            
        fade 0 500
        $HUD_REMOVE = 1
        wait 500
        
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//        
//        wait 1
//        
//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        end
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
        wait 1000
        audiostream.Release($MUSIC_ASSHOLE)
        
        if
        actor.Driving(PLAYER_ACTOR)
        then
        0362: remove_actor PLAYER_ACTOR from_car_and_place_at -286.4961 -2201.9888 38.3225
        end
        
        if
        056E:   car QUEST4_CAR1 defined
        then
        car.PutAt(QUEST4_CAR1,0.0, 0.0, 0.0)    
        car.Destroy(QUEST4_CAR1)
        wait 50
        end                    
            
        car.PutAt(QUEST4_CAR2,-286.4961, -2201.9888, 28.3225)
        car.Angle(QUEST4_CAR2) = 23.9227
            
        0A97: 11@ = car QUEST4_CAR2 struct 
        11@ += 9 
        0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
        08BD: set 12@ bit 2 
        0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
        0A97: 11@ = car QUEST4_CAR2 struct 
        11@ += 4 
        0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
        08BD: set 12@ bit 1 
        0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
        24@ = 25.0 
        0A97: 22@ = car QUEST4_CAR2 struct 
        0A8E: 23@ = 22@ + 5 // int 
        0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
        08C3: clear 12@ bit 1 
        08C3: clear 12@ bit 2 
        0A97: 11@ = car QUEST4_CAR2 struct 
        11@ += 18 
        0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
        08BD: set 12@ bit 2 
        0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
        08C3: clear 12@ bit 2
        Car.RemoveReferences(QUEST4_CAR2)
        036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR2
        camera.Restore_WithJumpCut()
        
        if
        COOP_ACTIVE_FLAG == 1
        then
        0EA1: disable_second_player_restore_camera 1
        COOP_ACTOR = -69
        end
            
        actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE1)
        actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE2)
        actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE3)
            
        player.CanMove(PLAYER_CHAR,true)
        
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
        0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
            
        fade 1 500
        $HUD_REMOVE = 0
        wait 500
            
        if
        201@ == 0
        then    
//        text.ShowH('MQ_259',3000,1)
//        wait 3000

        v$ST_DIALOG[0] = "MQ_259"
        $DIALOG_COUNT = 0
        $DIALOG_NOT_SKIP = 1
        create_thread @DG_SYS2
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        018A: MISSION_CHECKPOINT = create_checkpoint_at -713.061 -2120.707 25.9614
        018A: MISSION_MARKER = create_checkpoint_at -713.061 -2120.707 25.9614
        03BC: 310@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
        03BC: 311@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
        v$OBJECTIVE = "GAME681"
        if
        REALISM_MODE == 1
        then
        v$OBJECTIVE = "GRME681"
        end
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
        
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H2.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                        
        /////////////////////Плавное нарастание/////////////////////
//                        
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//                        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//                        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//                        
//        wait 1 
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
                        
        /////////////////////////////////////////////////////////////////////
        
        else
        
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H2.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                
        /////////////////////Плавное нарастание/////////////////////
//                
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//                
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//                
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//                
//        wait 1 
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
                
        /////////////////////////////////////////////////////////////////////
        
        jump to @MAIN_QUEST4_PASSED
        end
         
        end
    
    ////////////////////////////РАЗВЕТВЛЕНИЕ С СПАСЕНИЕМ БЕГЛЕЦА////////////////////////////
    
    if
    0@ == 1
        then
        
        HARDCORE_DANGER_FLAG_SCRIPTED = 0                
        
        0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
        0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[23] // (int)
        0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[23] // (int)
        0084: $DIALOG_ACTOR[3] = PLAYER_ACTOR // (int)
        v$ST_DIALOG[0] = "MQ_235"
        v$ST_DIALOG[1] = "MQ_236"
        v$ST_DIALOG[2] = "MQ_237"
        v$ST_DIALOG[3] = "MQ_310"  
        $DIALOG_COUNT = 3
        create_thread @DG_SYS    
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        0687: clear_actor $RNDM_HOUSE_WEAPON[23] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[24] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[25] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[28] task
        0687: clear_actor $RNDM_HOUSE_WEAPON[29] task
        
        fade 0 500
        $HUD_REMOVE = 1
        wait 500
        
        0992: set_player PLAYER_CHAR weapons_scrollable 1
        06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
        01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@
        
        06C9: remove_actor MAIN_QUEST4_TEAMMATE1 from_group
        
        if
        COOP_ACTIVE_FLAG == 1
        then
        0EA1: disable_second_player_restore_camera 1
        COOP_ACTOR = -69
        end
        
        06C9: remove_actor MAIN_QUEST4_TEAMMATE2 from_group
        06C9: remove_actor MAIN_QUEST4_TEAMMATE3 from_group
        
        0362: remove_actor MAIN_QUEST4_TEAMMATE1 from_car_and_place_at -256.52 -2184.1807 29.0361
        0362: remove_actor MAIN_QUEST4_TEAMMATE2 from_car_and_place_at -260.1942 -2181.2407 29.0022
        0362: remove_actor MAIN_QUEST4_TEAMMATE3 from_car_and_place_at -258.2088 -2184.8765 29.0085
        actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE1,-256.52, -2184.1807, 29.0361)
        actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE2,-260.1942, -2181.2407, 29.0022)
        actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE3,-258.2088, -2184.8765, 29.0085)
        048F: actor MAIN_QUEST4_TEAMMATE1 remove_weapons
        048F: actor MAIN_QUEST4_TEAMMATE2 remove_weapons
        048F: actor MAIN_QUEST4_TEAMMATE3 remove_weapons
        0639: AS_actor MAIN_QUEST4_TEAMMATE1 rotate_to_actor PLAYER_ACTOR
        0639: AS_actor MAIN_QUEST4_TEAMMATE2 rotate_to_actor PLAYER_ACTOR
        0639: AS_actor MAIN_QUEST4_TEAMMATE3 rotate_to_actor PLAYER_ACTOR                
        
        car.PutAt(QUEST4_CAR1,-287.3539, -2200.5854, 28.3149)
        car.Angle(QUEST4_CAR1) = 23.7828
        036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR1
        camera.Restore_WithJumpCut()
        wait 2000
        
        player.CanMove(PLAYER_CHAR,true)
        fade 1 500
        $HUD_REMOVE = 0
        wait 500
        
        018A: MISSION_CHECKPOINT = create_checkpoint_at -60.8329 -1593.8832 2.6207
        03BC: MISSION_SPHERE = create_sphere_at -60.8329 -1593.8832 2.6207 radius 1.5
        v$OBJECTIVE = "GAME690"
        if
        REALISM_MODE == 1
        then
        v$OBJECTIVE = "GRME690"
        end
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)          
        
        ////////////////////////////////////
        
        repeat
        wait 0 
        
        for 0@ = 23 to 30
        if
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            jump @MAIN_QUEST4_FAILED_AGRO2
            end
        end       
        
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD
        
        if
        056E:   car QUEST4_CAR1 defined
        then
        
        if
        not car.Wrecked(QUEST4_CAR1)
        jf @MAIN_QUEST4_FAILED_CAR
        
        if
        not actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)
            then
            $DIALOG_PAUSE = 1
            marker.Disable(MISSION_CHECKPOINT)
            03BD: destroy_sphere MISSION_SPHERE
            v$OBJECTIVE = "GAME687"
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            
            MISSION_CHECKPOINT = marker.CreateAboveCar(QUEST4_CAR1)
            07E0: set_marker MISSION_CHECKPOINT type_to 1
            
            ///////////////////////////////////////////////////////////////////
            
            while true
            wait 0
            
            for 0@ = 23 to 30
            if
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                then
                jump @MAIN_QUEST4_FAILED_AGRO2
                end
            end
            
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
                        
            if
            056E:   car QUEST4_CAR1 defined
                then
                
                if
                not car.Wrecked(QUEST4_CAR1)
                jf @MAIN_QUEST4_FAILED_CAR
                
                if
                actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)   
                    then
                    $DIALOG_PAUSE = 0    
                    marker.Disable(MISSION_CHECKPOINT)
                    018A: MISSION_CHECKPOINT = create_checkpoint_at -60.8329 -1593.8832 2.6207
                    03BC: MISSION_SPHERE = create_sphere_at -60.8329 -1593.8832 2.6207 radius 1.5
                    v$OBJECTIVE = "GAME690"
                    if
                    REALISM_MODE == 1
                    then
                    v$OBJECTIVE = "GRME690"
                    end
                    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                    $SOUNDS_VOLUME3 *= 0.5
                    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                    break
                    end
                else
                jump to @MAIN_QUEST4_FAILED_CAR
                end
            
            end
            
            ///////////////////////////////////////////////////////////////////
            
            end
        else
        jump to @MAIN_QUEST4_FAILED_CAR
        end        
        
        if
        875C: not  marker MISSION_CHECKPOINT enabled
        then
        018A: MISSION_CHECKPOINT = create_checkpoint_at -60.8329 -1593.8832 2.6207
        end    
        
        until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -60.8329 -1593.8832 2.6207 radius 1.5 1.5 10.0
        
        marker.Disable(MISSION_CHECKPOINT)
        03BD: destroy_sphere MISSION_SPHERE
        v$OBJECTIVE = "GAME691"
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
        0221: set_player PLAYER_CHAR apply_brakes_to_car 1
        05CD: AS_actor PLAYER_ACTOR exit_car QUEST4_CAR1
        
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//        
//        wait 1
//        
//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        end
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
        wait 1000
        audiostream.Release($MUSIC_ASSHOLE)
        
        ///////////////////////////////////////////////////////////
        
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4E.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2 
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
        /////////////////////Плавное нарастание/////////////////////
//        
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//        
//        wait 1 
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
        
        /////////////////////////////////////////////////////////////////////
        
        $ZOMBIE_SPAWN_ON_COORD = 1  
        $ZOMBIE_COORD_MAX = 2
        ZOMBIES_NOTSPAWN = 0
        $ZOMBIES_HORDE = 1
        
        $ZOMBIE_X[0] = -96.4832
        $ZOMBIE_Y[0] = -1557.9681
        $ZOMBIE_Z[0] = 2.6107
        $ZOMBIE_X[1] = -98.2299
        $ZOMBIE_Y[1] = -1594.0283
        $ZOMBIE_Z[1] = 2.6172
        $ZOMBIE_X[2] = -63.0371
        $ZOMBIE_Y[2] = -1541.8971
        $ZOMBIE_Z[2] = 2.6172
        
        32@ = 0
        
        repeat
        wait 0
        
        if
        not car.Wrecked(QUEST4_CAR1)
        jf @MAIN_QUEST4_FAILED_CAR
        
        for 0@ = 23 to 30
        if
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            jump @MAIN_QUEST4_FAILED_AGRO2
            end
        end
    
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD
        
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        
        $ZOMBIES_HORDE = 1
        
        $ZOMBIES_NEAR_TOTAL = 0

        for 0@ = 0 to 19
        
        if
        $ZOMBIE_NEAR[0@] == 1
        then
        $ZOMBIES_NEAR_TOTAL += 1
        end
        
        end
        
        if and
        32@ > 30000
        $ZOMBIES_NEAR_TOTAL < 5
            then
            break
            end
        
        until 32@ > 30000
        
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//        
//        wait 1
//        
//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        end
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
        wait 1000
        audiostream.Release($MUSIC_ASSHOLE)
        
        ///////////////////////////////////////////////////////////
        
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4D.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
        /////////////////////Плавное нарастание/////////////////////
//        
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//        
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//        
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//        
//        wait 1 
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
        
        /////////////////////////////////////////////////////////////////////
        
        $ZOMBIES_HORDE = 0
        ZOMBIES_NOTSPAWN = 1
        $ZOMBIE_SPAWN_ON_COORD = 0
        v$OBJECTIVE = "GAME692"
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
        MISSION_CHECKPOINT = marker.CreateIconAndSphere2(9,-79.0249, -1577.6517, 2.6107)
        
        gosub @MAIN_QUEST4_CHECKING_MODEL
        
        while not model.Available(0@)
        wait 0
        model.Load(0@)
        mload
        end
        
        $RNDM_HOUSE_WEAPON[34] = actor.Create(26,0@,-73.123, -1552.8381, 2.8174)
        actor.Angle($RNDM_HOUSE_WEAPON[34]) = 91.3705
        08C6: set_actor $RNDM_HOUSE_WEAPON[34] stay_on_bike 1    
        actor.SetWalkStyle($RNDM_HOUSE_WEAPON[34],"GANG2")
        0446: set_actor $RNDM_HOUSE_WEAPON[34] dismemberment_possible 0
        060B: set_actor $RNDM_HOUSE_WEAPON[34] decision_maker_to $DEC_PEOPLE
        actor.Health($RNDM_HOUSE_WEAPON[34]) = 1000
        actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[34]) = $DLC_M4_BANDIT_ACCURACY
        create_thread @PED_BKP $RNDM_HOUSE_WEAPON[34] 371
            
        05C3: AS_actor $RNDM_HOUSE_WEAPON[34] hands_cower
        
        repeat
        wait 0
        
        if
        not car.Wrecked(QUEST4_CAR1)
        jf @MAIN_QUEST4_FAILED_CAR
        
        for 0@ = 23 to 30
        if
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            jump @MAIN_QUEST4_FAILED_AGRO2
            end
        end
    
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD
        
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        
        if and
        0364:   actor PLAYER_ACTOR spotted_actor $RNDM_HOUSE_WEAPON[34]
        00F2:   actor PLAYER_ACTOR near_actor $RNDM_HOUSE_WEAPON[34] radius 3.5 3.5 sphere 0
            then
            break
            end
        
        until false
        
        player.CanMove(PLAYER_CHAR,false)
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
        0221: set_player PLAYER_CHAR apply_brakes_to_car 0
        
        v$OBJECTIVE = "DUMMY"
        marker.Disable(MISSION_CHECKPOINT)
        0639: AS_actor PLAYER_ACTOR rotate_to_actor $RNDM_HOUSE_WEAPON[34]
        0639: AS_actor $RNDM_HOUSE_WEAPON[34] rotate_to_actor PLAYER_ACTOR
        
        0470: 305@ = actor PLAYER_ACTOR current_weapon
        06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
        0992: set_player PLAYER_CHAR weapons_scrollable 0
        
        0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[34] // (int)
        0084: $DIALOG_ACTOR[1] = PLAYER_ACTOR // (int)
        0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[34] // (int)
        v$ST_DIALOG[0] = "MQ_239"
        v$ST_DIALOG[1] = "MQ_240"
        v$ST_DIALOG[2] = "MQ_241"  
        $DIALOG_COUNT = 2
        create_thread @DG_SYS    
        
        repeat
        wait 0
        
        if
        not car.Wrecked(QUEST4_CAR1)
        jf @MAIN_QUEST4_FAILED_CAR
        
        for 0@ = 23 to 30
        if
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            jump @MAIN_QUEST4_FAILED_AGRO2
            end
        end
    
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD
        
        until $DIALOG_END == 1
        
        while not animation.Available("ON_LOOKERS")
        wait 0
        animation.Load("ON_LOOKERS")
        end
                
        0605: actor $RNDM_HOUSE_WEAPON[34] perform_animation "panic_hide" IFP "ON_LOOKERS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 9999999
        
        ////////////////////////////////////////
        
        repeat
        wait 0
        
        if
        not car.Wrecked(QUEST4_CAR1)
        jf @MAIN_QUEST4_FAILED_CAR
        
        for 0@ = 23 to 30
        if
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            jump @MAIN_QUEST4_FAILED_AGRO2
            end
        end
    
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @MAIN_QUEST4_FAILED_PLAYER_DIED
        if
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        jf @MAIN_QUEST4_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @MAIN_QUEST4_FAILED_LDEAD
        
        32@ = 0
        text.ShowH('GAME693',100,1)
        
        if
        0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()
        0@ = 1    
        break
        end
        
        if or
        0E3E: is_button_just_pressed 0 button 10
        32@ > 20000
        then
        text.ClearAll()
        0@ = 0    
        break
        end
        
        until false
        
        ////////////////////////////РАЗВЕТВЛЕНИЕ С ОТПУСКОМ БЕГЛЕЦА////////////////////////////
        
        if
        0@ == 0
            then
            
            v$OBJECTIVE = "DUMMY"
            
            marker.Disable(MISSION_CHECKPOINT)                    
            
            0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[34] // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[34] // (int)
            0084: $DIALOG_ACTOR[3] = PLAYER_ACTOR // (int)
            v$ST_DIALOG[0] = "MQ_273"
            v$ST_DIALOG[1] = "MQ_274"
            v$ST_DIALOG[2] = "MQ_275"
            v$ST_DIALOG[3] = "MQ_276"  
            $DIALOG_COUNT = 3
            create_thread @DG_SYS    
            
            repeat
            wait 0
            
            if
            not car.Wrecked(QUEST4_CAR1)
            jf @MAIN_QUEST4_FAILED_CAR
            
            for 0@ = 23 to 30
            if
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                then
                jump @MAIN_QUEST4_FAILED_AGRO2
                end
            end
        
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
            
            until $DIALOG_END == 1            
            
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            0992: set_player PLAYER_CHAR weapons_scrollable 1
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
            01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@            
            
            car.PutAt(QUEST4_CAR1,-53.832, -1598.339, 2.6019)
            car.Angle(QUEST4_CAR1) = 133.8539
            036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR1
            camera.Restore_WithJumpCut()
            wait 1000
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
            03BC: MISSION_SPHERE = create_sphere_at -287.2976 -2200.5342 28.4067 radius 1.5
            v$OBJECTIVE = "GAME699"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME699"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            
            32@ = 0
            28@ = 0
            
            ////////////////////////////////////
        
            repeat
            wait 0
            
            for 0@ = 23 to 30
            if
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                then
                jump @MAIN_QUEST4_FAILED_AGRO2
                end
            end
            
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
            
            if and
            32@ > 15000
            28@ == 0
                then
                28@ = 1                
                0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[51] // (int)
                v$ST_DIALOG[0] = "MQ_277"  
                $DIALOG_COUNT = 0
                create_thread @DG_SYS                
                end        
            
            if
            056E:   car QUEST4_CAR1 defined
            then
            
            if
            not car.Wrecked(QUEST4_CAR1)
            jf @MAIN_QUEST4_FAILED_CAR
            
            if
            not actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)
                then
                $DIALOG_PAUSE = 1
                marker.Disable(MISSION_CHECKPOINT)
                03BD: destroy_sphere MISSION_SPHERE
                v$OBJECTIVE = "GAME687"
                0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                $SOUNDS_VOLUME3 *= 0.5
                Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                
                MISSION_CHECKPOINT = marker.CreateAboveCar(QUEST4_CAR1)
                07E0: set_marker MISSION_CHECKPOINT type_to 1
                
                ///////////////////////////////////////////////////////////////////
                
                while true
                wait 0
                
                for 0@ = 23 to 30
                if
                051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                    then
                    jump @MAIN_QUEST4_FAILED_AGRO2
                    end
                end
                
                if
                not actor.Dead(PLAYER_ACTOR)
                jf @MAIN_QUEST4_FAILED_PLAYER_DIED
                if
                $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
                jf @MAIN_QUEST4_FAILED_AGRO
                if
                803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
                jf @MAIN_QUEST4_FAILED_LDEAD                
                
                if
                056E:   car QUEST4_CAR1 defined
                    then
                    
                    if
                    not car.Wrecked(QUEST4_CAR1)
                    jf @MAIN_QUEST4_FAILED_CAR
                    
                    if
                    actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)   
                        then
                        $DIALOG_PAUSE = 0    
                        marker.Disable(MISSION_CHECKPOINT)
                        018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
                        03BC: MISSION_SPHERE = create_sphere_at -287.2976 -2200.5342 28.4067 radius 1.5
                        v$OBJECTIVE = "GAME699"
                        if
                        REALISM_MODE == 1
                        then
                        v$OBJECTIVE = "GRME699"
                        end
                        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                        $SOUNDS_VOLUME3 *= 0.5
                        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                        break
                        end
                    else
                    jump to @MAIN_QUEST4_FAILED_CAR
                    end
                
                end
                
                ///////////////////////////////////////////////////////////////////
                
                end
            else
            jump to @MAIN_QUEST4_FAILED_CAR
            end        
            
            if
            875C: not  marker MISSION_CHECKPOINT enabled
            then
            018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
            end    
            
            until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -287.2976 -2200.5342 28.4067 radius 1.5 1.5 10.0
            
            marker.Disable(MISSION_CHECKPOINT)
            03BD: destroy_sphere MISSION_SPHERE
            
            0221: set_player PLAYER_CHAR apply_brakes_to_car 1
            03BD: destroy_sphere MISSION_SPHERE
            05CD: AS_actor PLAYER_ACTOR exit_car QUEST4_CAR1
            068B: set_car QUEST4_CAR1 all_disembark
            
            v$OBJECTIVE = "GAME688"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME688"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            018A: MISSION_CHECKPOINT = create_checkpoint_at -281.159 -2198.1934 28.4153
            
            repeat
            wait 0
            
            for 0@ = 23 to 30
            if
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                then
                jump @MAIN_QUEST4_FAILED_AGRO2
                end
            end
    
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
            
            if and
            02A0:   actor PLAYER_ACTOR stopped
            00F2:   actor $RNDM_HOUSE_WEAPON[23] near_actor PLAYER_ACTOR radius 3.5 3.5 sphere 0
                then
                break
                end
            
            until false
            
            marker.Disable(MISSION_CHECKPOINT)
            0221: set_player PLAYER_CHAR apply_brakes_to_car 0            
            player.CanMove(PLAYER_CHAR,false)
            
            0470: 305@ = actor PLAYER_ACTOR current_weapon
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
            0992: set_player PLAYER_CHAR weapons_scrollable 0
            PLAYER_NO_ITEMS_FLAG = 1
            06AB: set_actor $RNDM_HOUSE_WEAPON[23] all_weapons_hidden 1
            
            HARDCORE_DANGER_FLAG_SCRIPTED = 1            
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[1] = PLAYER_ACTOR // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[34] // (int)
            0084: $DIALOG_ACTOR[3] = $RNDM_HOUSE_WEAPON[34] // (int)                        
            v$ST_DIALOG[0] = "MQ_278"
            v$ST_DIALOG[1] = "MQ_279"
            v$ST_DIALOG[2] = "MQ_280"
            v$ST_DIALOG[3] = "MQ_281"                        
            $DIALOG_COUNT = 3
            create_thread @DG_SYS    
            
            repeat
            wait 0
            until $DIALOG_END == 1
                        
            $SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\QUESTS\bathit.wav")
            Audiostream.PerformAction($SHIT_FUCK, PLAY)
            Audiostream.Loop($SHIT_FUCK, 0)
            Audiostream.Volume($SHIT_FUCK) = 1.0
            
            09F1: play_audio_at_actor PLAYER_ACTOR event 1130    
            05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 9999999
            015B: shake_player_controller 0 time 250 intensity 150
            player.SetDrunkVisuals(PLAYER_CHAR,20)
            
            fade 0 0
            $HUD_OFF_INST = 1
            $HUD_REMOVE = 1
            wait 0
            
            wait 500
            FP_ACTIVATE_SCRIPTED = 1
            
            /////////////////////Плавное затухание/////////////////////
//
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//            $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1
//            
//            while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//            wait 0
//            end
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
            wait 1000
            audiostream.Release($MUSIC_ASSHOLE)
            
            ///////////////////////////////////////////////////////////
            
            $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4F.mp3")
            250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
            Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
            Audiostream.Loop($MUSIC_ASSHOLE, 1)
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            
            /////////////////////Плавное нарастание/////////////////////
//            
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//            0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1 
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
            /////////////////////////////////////////////////////////////////////
            
            if
            actor.Driving(PLAYER_ACTOR)
            then
            0362: remove_actor PLAYER_ACTOR from_car_and_place_at -286.4961 -2201.9888 38.3225
            end
            
            car.PutAt(QUEST4_CAR1,0.0, 0.0, 0.0)    
            car.Destroy(QUEST4_CAR1)
            wait 50
            
            if
            COOP_ACTIVE_FLAG == 1
            then
            0EA1: disable_second_player_restore_camera 1
            COOP_ACTOR = -69
            end
            
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE1)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE2)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE3)
            
            05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 9999999
            actor.PutAtNoOffset(PLAYER_ACTOR,-257.4914, -2180.5291, 29.0439)
            actor.Angle(PLAYER_ACTOR) = 152.7214
            camera.Restore_WithJumpCut()
            
            random_int 28@ 24 31
            actor.PutAtNoOffset($RNDM_HOUSE_WEAPON[28@],-260.3665, -2186.7864, 28.9673)
            actor.Angle($RNDM_HOUSE_WEAPON[28@]) = 322.4315
            
            wait 2000
            
            00BF: 0@ = current_time_hours, 1@ = current_time_minutes
            0@ += 2
            
            if
            0@ == 24
            then
            0@ = 0
            end
            
            if
            0@ == 25
            then
            0@ = 1
            end
            
            00C0: set_current_time 0@ 1@
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[28@] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[28@] // (int)                        
            v$ST_DIALOG[0] = "MQ_284"
            v$ST_DIALOG[1] = "MQ_285"
            $DIALOG_COUNT = 1
            create_thread @DG_SYS                
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            player.CanMove(PLAYER_CHAR,true)
            
            018A: MISSION_CHECKPOINT = create_checkpoint_at -259.5964 -2184.9934 28.9885
            03BC: MISSION_SPHERE = create_sphere_at -259.5964 -2184.9934 28.9885 radius 0.3
            v$OBJECTIVE = "GAME768"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME768"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            
            0@ = 0
            
            repeat
            wait 0
            
            0992: set_player PLAYER_CHAR weapons_scrollable 0 //иди НАААААААААААХУЙ
            
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
            
            if and
            0@ == 0            
            051A:   actor $RNDM_HOUSE_WEAPON[28@] damaged_by_actor PLAYER_ACTOR
                then
                actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[28@]) = 100
                0648: unknown_actor $RNDM_HOUSE_WEAPON[28@] task_set 100.0 // float
                05E2: AS_actor $RNDM_HOUSE_WEAPON[28@] kill_actor PLAYER_ACTOR
                077A: set_actor $RNDM_HOUSE_WEAPON[28@] acquaintance 4 to_actors_pedtype 0 // see ped.dat
                03BD: destroy_sphere MISSION_SPHERE
                marker.Disable(MISSION_CHECKPOINT)
                0@ = 1
                end
            
            if and
            00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -259.5964 -2184.9934 28.9885 radius 0.3 0.3 1.0
            02A0:   actor PLAYER_ACTOR stopped
            not 0@ == 1
                then
                break
                end
            
            until false
            
            marker.Disable(MISSION_CHECKPOINT)
            03BD: destroy_sphere MISSION_SPHERE
            v$OBJECTIVE = "DUMMY"
            
            ///////////////////////////////////////////////////////////////////////////////////////

//            0470: 9@ = actor PLAYER_ACTOR current_weapon
//            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
//            0992: set_player PLAYER_CHAR weapons_scrollable 0 
                
            while not animation.Available("BOMBER")
            wait 0
            animation.Load("BOMBER")
            end
                
            32@ = 0
                
            03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
                
            while 83D0: not  wav 4 loaded 
            wait 0
            03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
            end
                 
            0949: link_wav 4 to_actor PLAYER_ACTOR
            03D1: play_wav 4
                
            0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
                
            32@ = 0
            while 83D2:   wav 4 ended 
            wait 0
            if
            32@ > 3500
                then
                break
                end
            end
                
            040D: unload_wav 4 
            04EF: release_animation "BOMBER"
                
//            0992: set_player PLAYER_CHAR weapons_scrollable 1
//            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
                
//            01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
                
            ///////////////////////////////////////////////////////////////////////////////////////
            
            while not animation.Available("FOOD")
            wait 0
            animation.Load("FOOD")
            end
            
            03CF: load_wav OLDWAV_EAT_32200 as 1 
            
            while 83D0: not  wav 1 loaded 
            wait 0
            03CF: load_wav OLDWAV_EAT_32200 as 1 
            end
            
            0949: link_wav 1 to_actor PLAYER_ACTOR
            03D1: play_wav 1
            
            $SATIETY_LEVEL += 200.0
            $EATING_STATUS = 1
            
            model.Load(2880)
            mload
            
            1@ = Object.Create(2880, 0.0, 0.0, 0.0)
            0792: disembark_instantly_actor PLAYER_ACTOR 
            070A: AS_actor PLAYER_ACTOR attach_to_object 1@ offset 0.0 0.0 0.0 on_bone 6 16 perform_animation "NULL" IFP_file "NULL" time -1
            Animation.PerfromA(PLAYER_ACTOR, "EAT_BURGER", "FOOD", 4.0, 0, 0, 0, 0, -1) 
            wait 5000
            $EATING_STATUS = 0 
            
            while 83D2:   wav 1 ended 
            wait 0
            end
            
            040D: unload_wav 1         
            
            Object.Destroy(1@)
            Object.RemoveReferences(1@)
            //model.Destroy(2880)
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[28@] // (int)                        
            v$ST_DIALOG[0] = "MQ_286"
            $DIALOG_COUNT = 0
            create_thread @DG_SYS                
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            wait 2000
            
            0687: clear_actor PLAYER_ACTOR task 
            Animation.PerfromA(PLAYER_ACTOR, "EAT_Vomit_P", "food", 4.0, 0, 0, 0, 0, -1)
            
            repeat
            wait 0
            0613: 2@ = actor PLAYER_ACTOR animation "EAT_Vomit_P" time
            until 2@ >= 0.463
            
            0D0B: get_actor PLAYER_ACTOR bone 6 matrix_pointer_to 0@ // IF and SET
            0D0A: store_coords_to 25@ 26@ 27@ from_matrix 0@ with_offsets 0.20 0.30 0.0
            064B: 29@ = create_particle "PUKE" at 25@ 26@ 27@ type 1
            064C: make_particle 29@ visible
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[28@] // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[28@] // (int)                        
            v$ST_DIALOG[0] = "MQ_287"
            v$ST_DIALOG[1] = "MQ_288"
            v$ST_DIALOG[2] = "MQ_289"
            $DIALOG_COUNT = 2
            create_thread @DG_SYS                                        
                        
            while actor.Animation(PLAYER_ACTOR) == "EAT_Vomit_P"
            wait 0                                                                                  
            end
            
            player.CanMove(PLAYER_CHAR,false)
            wait 1
            05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 9999999
                        
            064E: stop_particle 29@
            0650: destroy_particle 29@
            
            04EF: release_animation "FOOD"
            
            repeat
            wait 0
            until $DIALOG_END == 1                                                
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[3] = $RNDM_HOUSE_WEAPON[51] // (int)                        
            v$ST_DIALOG[0] = "MQ_290"
            v$ST_DIALOG[1] = "MQ_291"
            v$ST_DIALOG[2] = "MQ_292"
            v$ST_DIALOG[3] = "MQ_293"
            $DIALOG_COUNT = 0
            create_thread @DG_SYS
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            fade 0 10000
            $HUD_REMOVE = 1
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[3] = $RNDM_HOUSE_WEAPON[51] // (int)                        
            v$ST_DIALOG[0] = "MQ_294"
            v$ST_DIALOG[1] = "MQ_295"
            v$ST_DIALOG[2] = "MQ_296"
            v$ST_DIALOG[3] = "MQ_297"
            $DIALOG_COUNT = 0
            create_thread @DG_SYS
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            :CAR_CREATE_QMISSION4_11
            if
            model.Available(15423)
            then
            
            QUEST4_CAR11 = Car.Create(15423, -319.3393, -2097.5613, 27.5473)
            Car.Angle(QUEST4_CAR11) = 192.7759
            
            if
            model.Available(15423)
            then
            //model.Destroy(15423)
            end
            
            else
            model.Load(15423)
            mload
            wait 0
            jump to @CAR_CREATE_QMISSION4_11
            end
            
            :CAR_CREATE_QMISSION4_12
            if
            model.Available(15423)
            then
            
            QUEST4_CAR12 = Car.Create(15423, -325.1103, -2098.8167, 27.5411)
            Car.Angle(QUEST4_CAR12) = 195.3012
            
            if
            model.Available(15423)
            then
            //model.Destroy(15423)
            end
            
            else
            model.Load(15423)
            mload
            wait 0
            jump to @CAR_CREATE_QMISSION4_12
            end
            
            :CAR_CREATE_QMISSION4_13
            if
            model.Available(15423)
            then
            
            QUEST4_CAR13 = Car.Create(15423, -324.4999, -2091.1631, 27.4148)
            Car.Angle(QUEST4_CAR13) = 194.983
            
            if
            model.Available(15423)
            then
            //model.Destroy(15423)
            end
            
            else
            model.Load(15423)
            mload
            wait 0
            jump to @CAR_CREATE_QMISSION4_13
            end        
        
            /////////////////////////////////////////
            
            while not model.Available(FERMER1_SKIN_ID)
            wait 0
            model.Load(FERMER1_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE1 = actor.CreateAsPassenger(26,FERMER1_SKIN_ID,QUEST4_CAR11,0)
            08C6: set_actor MAIN_QUEST4_TEAMMATE1 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE1,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE1 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE1 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE1) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE1) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE1 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE1, 30, 99999)
            
            while not model.Available(FERMER4_SKIN_ID)
            wait 0
            model.Load(FERMER4_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE2 = actor.CreateAsPassenger(26,FERMER4_SKIN_ID,QUEST4_CAR11,1)
            08C6: set_actor MAIN_QUEST4_TEAMMATE2 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE2,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE2 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE2 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE2) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE2) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE2 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE2, 30, 99999)
            
            while not model.Available(FERMER3_SKIN_ID)
            wait 0
            model.Load(FERMER3_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE3 = actor.CreateAsPassenger(26,FERMER3_SKIN_ID,QUEST4_CAR11,2)
            08C6: set_actor MAIN_QUEST4_TEAMMATE3 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE3,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE3 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE3 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE3) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE3) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE3 371)
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE3, 30, 99999)
            
            /////////////////////////////////////////    
            
            while not model.Available(FERMER1_SKIN_ID)
            wait 0
            model.Load(FERMER1_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE4 = actor.CreateAsPassenger(26,FERMER1_SKIN_ID,QUEST4_CAR12,0)
            08C6: set_actor MAIN_QUEST4_TEAMMATE4 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE4,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE4 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE4 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE4) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE4) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE4 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE4, 30, 99999)
            
            while not model.Available(FERMER4_SKIN_ID)
            wait 0
            model.Load(FERMER4_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE5 = actor.CreateAsPassenger(26,FERMER4_SKIN_ID,QUEST4_CAR12,1)
            08C6: set_actor MAIN_QUEST4_TEAMMATE5 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE5,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE5 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE5 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE5) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE5) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE5 371 
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
               
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE5, 30, 99999)
            
            while not model.Available(FERMER3_SKIN_ID)
            wait 0
            model.Load(FERMER3_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE6 = actor.CreateAsPassenger(26,FERMER3_SKIN_ID,QUEST4_CAR12,2)
            08C6: set_actor MAIN_QUEST4_TEAMMATE6 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE6,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE6 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE6 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE6) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE6) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE6 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE6, 30, 99999)
            
            /////////////////////////////////////////
            
            while not model.Available(FERMER1_SKIN_ID)
            wait 0
            model.Load(FERMER1_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE7 = actor.CreateAsPassenger(26,FERMER1_SKIN_ID,QUEST4_CAR13,0)
            08C6: set_actor MAIN_QUEST4_TEAMMATE7 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE7,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE7 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE7 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE7) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE7) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE7 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE7, 30, 99999)
            
            while not model.Available(FERMER4_SKIN_ID)
            wait 0
            model.Load(FERMER4_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE8 = actor.CreateAsPassenger(26,FERMER4_SKIN_ID,QUEST4_CAR13,1)
            08C6: set_actor MAIN_QUEST4_TEAMMATE8 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE8,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE8 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE8 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE8) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE8) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE8 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE8, 30, 99999)
            
            while not model.Available(FERMER3_SKIN_ID)
            wait 0
            model.Load(FERMER3_SKIN_ID)
            mload
            end
            
            MAIN_QUEST4_TEAMMATE9 = actor.CreateAsPassenger(26,FERMER3_SKIN_ID,QUEST4_CAR13,2)
            08C6: set_actor MAIN_QUEST4_TEAMMATE9 stay_on_bike 1    
            actor.SetWalkStyle(MAIN_QUEST4_TEAMMATE9,"GANG2")
            0446: set_actor MAIN_QUEST4_TEAMMATE9 dismemberment_possible 0
            060B: set_actor MAIN_QUEST4_TEAMMATE9 decision_maker_to $DEC_PEOPLE
            actor.Health(MAIN_QUEST4_TEAMMATE9) = 1000
            actor.WeaponAccuracy(MAIN_QUEST4_TEAMMATE9) = 85
            create_thread @PED_BKP MAIN_QUEST4_TEAMMATE9 371
            
            0781: get_weapon_with_ID 30 model_to 1@

            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
                
            Actor.GiveWeaponAndAmmo(MAIN_QUEST4_TEAMMATE9, 30, 99999)
            
            /////////////////////////////////////////
            
            0704: car QUEST4_CAR11 drive_to -284.5369 -2199.335 28.4069
            0704: car QUEST4_CAR12 drive_to -289.4384 -2201.6865 28.4063
            0704: car QUEST4_CAR13 drive_to -290.1591 -2193.0425 28.405
            
            car.SetMaxSpeed(QUEST4_CAR11,50.0)  
            00AE: set_car QUEST4_CAR11 traffic_behaviour_to 2  
            03AB: set_car QUEST4_CAR11 strong 1 
            car.SetSpeedInstantly(QUEST4_CAR11,15.0)
            
            car.SetMaxSpeed(QUEST4_CAR12,50.0)  
            00AE: set_car QUEST4_CAR12 traffic_behaviour_to 2  
            03AB: set_car QUEST4_CAR12 strong 1 
            car.SetSpeedInstantly(QUEST4_CAR12,15.0)
            
            car.SetMaxSpeed(QUEST4_CAR13,50.0)  
            00AE: set_car QUEST4_CAR13 traffic_behaviour_to 2  
            03AB: set_car QUEST4_CAR13 strong 1 
            car.SetSpeedInstantly(QUEST4_CAR13,15.0)
            
            /////////////////////////////////////////
            
            05D3: AS_actor $RNDM_HOUSE_WEAPON[23] goto_point -277.8353 -2197.7561 28.6792 mode 6 time 9000 ms // versionA                        
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[3] = $RNDM_HOUSE_WEAPON[51] // (int)
            0084: $DIALOG_ACTOR[4] = $RNDM_HOUSE_WEAPON[51] // (int)                        
            v$ST_DIALOG[0] = "MQ_293"
            v$ST_DIALOG[1] = "MQ_294"
            v$ST_DIALOG[2] = "MQ_295"
            v$ST_DIALOG[3] = "MQ_296"
            v$ST_DIALOG[4] = "MQ_297"                        
            $DIALOG_COUNT = 4
            create_thread @DG_SYS                                                        
            
            repeat
            wait 0            
            
            MAIN_QUEST4_ATTACK_FLAG = 1
            
            for 0@ = 23 to 30
            gosub @MISSION41_ATTACK_SYSTEM
            end
            
            random_int 11@ 0 5
            random_int 0@ 23 30
            gosub @MISSION41_TEAMMATES_ATTACK_PEOPLE1
            
            until $DIALOG_END == 1
            
            repeat
            wait 0                        
            
            for 0@ = 23 to 30
            gosub @MISSION41_ATTACK_SYSTEM
            end
            
            random_int 11@ 0 5
            random_int 0@ 23 30
            gosub @MISSION41_TEAMMATES_ATTACK_PEOPLE1
            
            until 816B: not  fading
            
            for 0@ = 23 to 30
            05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die
            end
            
            wait 500
            
            0777: delete_objects_in_object_group "quest4"            
            0776: create_objects_in_object_group "quest4_2"
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE1 from_car_and_place_at 2239.367 -1261.939 22.9375
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE1,-260.7453, -2186.9172, 28.9612)
            actor.Angle(MAIN_QUEST4_TEAMMATE1) = 323.2945
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE2 from_car_and_place_at -274.3067 -2197.5562 28.6856
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE2,-274.3067, -2197.5562, 28.6856)
            actor.Angle(MAIN_QUEST4_TEAMMATE2) = 306.9694
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE3 from_car_and_place_at -276.3289 -2194.0212 28.687
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE3,-276.3289, -2194.0212, 28.687)
            actor.Angle(MAIN_QUEST4_TEAMMATE3) = 287.0287
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE4 from_car_and_place_at -279.5385 -2187.905 28.69
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE4,-279.5385, -2187.905, 28.69)
            actor.Angle(MAIN_QUEST4_TEAMMATE4) = 14.9967
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE5 from_car_and_place_at -264.7169 -2193.5442 28.8636
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE5,-264.7169, -2193.5442, 28.8636)
            actor.Angle(MAIN_QUEST4_TEAMMATE5) = 252.4534
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE6 from_car_and_place_at -276.283 -2198.1445 28.6779
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE6,-276.283, -2198.1445, 28.6779)
            actor.Angle(MAIN_QUEST4_TEAMMATE6) = 229.599
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE7 from_car_and_place_at -276.0501 -2178.8311 28.7956
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE7,-276.0501, -2178.8311, 28.7956)
            actor.Angle(MAIN_QUEST4_TEAMMATE7) = 241.8978
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE8 from_car_and_place_at -260.7342 -2205.0552 28.8212
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE8,-260.7342, -2205.0552, 28.8212)
            actor.Angle(MAIN_QUEST4_TEAMMATE8) = 268.6064
            
            0362: remove_actor MAIN_QUEST4_TEAMMATE9 from_car_and_place_at -258.6475 -2219.1567 28.6745
            actor.PutAtNoOffset(MAIN_QUEST4_TEAMMATE9,-258.6475, -2219.1567, 28.6745)
            actor.Angle(MAIN_QUEST4_TEAMMATE9) = 197.9819
            
            00BF: 0@ = current_time_hours, 1@ = current_time_minutes
            0@ += 2
            
            if
            0@ == 24
            then
            0@ = 0
            end
            
            if
            0@ == 25
            then
            0@ = 1
            end
            
            00C0: set_current_time 0@ 1@
            
            wait 2000
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            0084: $DIALOG_ACTOR[0] = MAIN_QUEST4_TEAMMATE1 // (int)                        
            v$ST_DIALOG[0] = "MQ_298"                        
            $DIALOG_COUNT = 0
            create_thread @DG_SYS                                                        
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            0639: AS_actor MAIN_QUEST4_TEAMMATE1 rotate_to_actor PLAYER_ACTOR
            actor.PutAtNoOffset(PLAYER_ACTOR,-262.7789, -2185.8975, 28.9389)
            actor.Angle(PLAYER_ACTOR) = 244.3231
            camera.Restore_WithJumpCut()
            HARDCORE_DANGER_FLAG_SCRIPTED = 0
            
            wait 1000
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
            06AB: set_actor MAIN_QUEST4_TEAMMATE1 all_weapons_hidden 1
            
            0084: $DIALOG_ACTOR[0] = MAIN_QUEST4_TEAMMATE1 // (int)
            0084: $DIALOG_ACTOR[1] = PLAYER_ACTOR // (int)
            0084: $DIALOG_ACTOR[2] = MAIN_QUEST4_TEAMMATE1 // (int)
            0084: $DIALOG_ACTOR[3] = PLAYER_ACTOR // (int)
            0084: $DIALOG_ACTOR[4] = MAIN_QUEST4_TEAMMATE1 // (int)
            0084: $DIALOG_ACTOR[5] = MAIN_QUEST4_TEAMMATE1 // (int)
            0084: $DIALOG_ACTOR[6] = PLAYER_ACTOR // (int)
            0084: $DIALOG_ACTOR[7] = MAIN_QUEST4_TEAMMATE1 // (int)                        
            v$ST_DIALOG[0] = "MQ_299"
            v$ST_DIALOG[1] = "MQ_300"
            v$ST_DIALOG[2] = "MQ_301"
            v$ST_DIALOG[3] = "MQ_302"
            v$ST_DIALOG[4] = "MQ_303"
            v$ST_DIALOG[5] = "MQ_304"
            v$ST_DIALOG[6] = "MQ_305"
            v$ST_DIALOG[7] = "MQ_306"                        
            $DIALOG_COUNT = 7
            create_thread @DG_SYS                                                        
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            ////////////////////////////////////////
        
            repeat
            wait 0
            
            32@ = 0
            text.ShowH('GAME700',100,1)
            
            if
            0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0@ = 1    
            break
            end
            
            if or
            0E3E: is_button_just_pressed 0 button 10
            32@ > 5000
            then
            text.ClearAll()
            0@ = 0    
            break
            end
            
            until false
            
            ////////////////////////////СОГЛАШАЕМСЯ НА ПРЕДЛОЖЕНИЕ ПОДВЕСТИ НАС ДО ЛАГЕРЯ////////////////////////////
            
            if
            0@ == 1
                then                                                                
                
                0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
                0084: $DIALOG_ACTOR[1] = MAIN_QUEST4_TEAMMATE1 // (int)                        
                v$ST_DIALOG[0] = "MQ_308"
                v$ST_DIALOG[1] = "MQ_309"                        
                $DIALOG_COUNT = 1
                create_thread @DG_SYS                                                        
                
                repeat
                wait 0
                                
                for 0@ = 23 to 30
                if
                051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                    then
                    jump @MAIN_QUEST4_FAILED_AGRO2
                    end
                end
            
                if
                not actor.Dead(PLAYER_ACTOR)
                jf @MAIN_QUEST4_FAILED_PLAYER_DIED
                if
                $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
                jf @MAIN_QUEST4_FAILED_AGRO
                if
                803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
                jf @MAIN_QUEST4_FAILED_LDEAD
                
                until $DIALOG_END == 1
                
                fade 0 500
                $HUD_REMOVE = 1
                wait 500
                
                0992: set_player PLAYER_CHAR weapons_scrollable 1
                PLAYER_NO_ITEMS_FLAG = 0
                06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
                01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@
                
                car.PutAt(QUEST4_CAR2,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR2)                        
                car.PutAt(QUEST4_CAR3,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR3)
                car.PutAt(QUEST4_CAR4,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR4)
                car.PutAt(QUEST4_CAR5,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR5)
                car.PutAt(QUEST4_CAR6,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR6)
                car.PutAt(QUEST4_CAR7,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR7)
                car.PutAt(QUEST4_CAR8,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR8)
                car.PutAt(QUEST4_CAR9,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR9)
                car.PutAt(QUEST4_CAR10,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR10)
                car.PutAt(QUEST4_CAR11,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR11)
                car.PutAt(QUEST4_CAR12,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR12)
                car.PutAt(QUEST4_CAR13,0.0, 0.0, 0.0)
                car.Destroy(QUEST4_CAR13)
                
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE1)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE2)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE3)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE4)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE5)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE6)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE7)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE8)
                actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE9)
                
                00BF: 0@ = current_time_hours, 1@ = current_time_minutes
                0@ += 2
                
                if
                0@ == 24
                then
                0@ = 0
                end
                
                if
                0@ == 25
                then
                0@ = 1
                end
                
                00C0: set_current_time 0@ 1@
                
                wait 2000
                
                player.SetDrunkVisuals(PLAYER_CHAR,0)
                actor.PutAtNoOffset(PLAYER_ACTOR,1022.8215, -376.904, 72.9907)
                actor.Angle(PLAYER_ACTOR) = 355.3867
                create_thread @REFR_3D
                camera.Restore_WithJumpCut()
                
                wait 500
                
                player.CanMove(PLAYER_CHAR,true)
            
                fade 1 500
                $HUD_REMOVE = 0
                wait 500
                
                if
                201@ == 0
                then    
//                text.ShowH('MQ_259',3000,1)
//                wait 3000
                v$ST_DIALOG[0] = "MQ_259"
                $DIALOG_COUNT = 0
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2
                
                repeat
                wait 0
                until $DIALOG_END == 1
                
                018A: MISSION_CHECKPOINT = create_checkpoint_at -713.061 -2120.707 25.9614
                018A: MISSION_MARKER = create_checkpoint_at -713.061 -2120.707 25.9614
                03BC: 310@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
                03BC: 311@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
                v$OBJECTIVE = "GAME681"
                if
                REALISM_MODE == 1
                then
                v$OBJECTIVE = "GRME681"
                end
                0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                $SOUNDS_VOLUME3 *= 0.5
                Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                
                /////////////////////Плавное затухание/////////////////////
//
//                $MUSIC_FADE_NUMBER += 1
//                if
//                $MUSIC_FADE_NUMBER > 4
//                    then
//                    $MUSIC_FADE_NUMBER = 0 
//                    end    
//                
//                0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//                $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//                
//                $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//                $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//                $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//                create_thread @MUS_FAD
//                
//                wait 1
//                
//                while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//                wait 0
//                end
                2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
                wait 1000
                audiostream.Release($MUSIC_ASSHOLE)
                
                ///////////////////////////////////////////////////////////
            
                $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H2.mp3")
                250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
                Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
                Audiostream.Loop($MUSIC_ASSHOLE, 1)
                Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                        
                /////////////////////Плавное нарастание/////////////////////
//                        
//                $MUSIC_FADE_NUMBER += 1
//                if
//                $MUSIC_FADE_NUMBER > 4
//                    then
//                    $MUSIC_FADE_NUMBER = 0 
//                    end    
//                        
//                0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//                0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//                        
//                $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//                $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//                $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//                create_thread @MUS_FAD
//                        
//                wait 1 
                2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
                        
                /////////////////////////////////////////////////////////////////////
                
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
                0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
                jump to @MAIN_QUEST4_MAIN_LOOP
                else
                jump to @MAIN_QUEST4_PASSED
                end
                
                else
                jump to @GOES_HIMSELF_QUEST4_MEAT
                end
                
            ////////////////////////////ОТКАЗЫВАЕМСЯ ОТ ПРЕДЛОЖЕНИЯ ПОДВЕСТИ НАС ДО ЛАГЕРЯ////////////////////////////                            
            
            :GOES_HIMSELF_QUEST4_MEAT
            
            0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)                        
            v$ST_DIALOG[0] = "MQ_307"                        
            $DIALOG_COUNT = 0
            create_thread @DG_SYS                                                        
                
            repeat
            wait 0
            until $DIALOG_END == 1
                        
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            0992: set_player PLAYER_CHAR weapons_scrollable 1
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
            01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@
                                    
            car.PutAt(QUEST4_CAR3,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR3)
            car.PutAt(QUEST4_CAR4,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR4)
            car.PutAt(QUEST4_CAR5,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR5)
            car.PutAt(QUEST4_CAR6,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR6)
            car.PutAt(QUEST4_CAR7,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR7)
            car.PutAt(QUEST4_CAR8,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR8)
            car.PutAt(QUEST4_CAR9,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR9)
            car.PutAt(QUEST4_CAR10,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR10)
            car.PutAt(QUEST4_CAR11,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR11)
            car.PutAt(QUEST4_CAR12,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR12)
            car.PutAt(QUEST4_CAR13,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR13)
            wait 50                    
            
            car.PutAt(QUEST4_CAR2,-286.4961, -2201.9888, 28.3225)
            car.Angle(QUEST4_CAR2) = 23.9227
            
            0A97: 11@ = car QUEST4_CAR2 struct 
            11@ += 9 
            0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
            08BD: set 12@ bit 2 
            0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
            0A97: 11@ = car QUEST4_CAR2 struct 
            11@ += 4 
            0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
            08BD: set 12@ bit 1 
            0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
            24@ = 25.0 
            0A97: 22@ = car QUEST4_CAR2 struct 
            0A8E: 23@ = 22@ + 5 // int 
            0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
            08C3: clear 12@ bit 1 
            08C3: clear 12@ bit 2 
            0A97: 11@ = car QUEST4_CAR2 struct 
            11@ += 18 
            0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
            08BD: set 12@ bit 2 
            0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
            08C3: clear 12@ bit 2
            Car.RemoveReferences(QUEST4_CAR2)
            036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR2
            player.SetDrunkVisuals(PLAYER_CHAR,0)
            camera.Restore_WithJumpCut()
            
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE1)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE2)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE3)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE4)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE5)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE6)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE7)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE8)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE9)
            
            player.CanMove(PLAYER_CHAR,true)
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            if
            201@ == 0
            then    
//            text.ShowH('MQ_259',3000,1)
//            wait 3000
            
            v$ST_DIALOG[0] = "MQ_259"
            $DIALOG_COUNT = 0
            $DIALOG_NOT_SKIP = 1
            create_thread @DG_SYS2
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            018A: MISSION_CHECKPOINT = create_checkpoint_at -713.061 -2120.707 25.9614
            018A: MISSION_MARKER = create_checkpoint_at -713.061 -2120.707 25.9614
            03BC: 310@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
            03BC: 311@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
            v$OBJECTIVE = "GAME681"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME681"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            
            /////////////////////Плавное затухание/////////////////////
//
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//            $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1
//            
//            while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//            wait 0
//            end
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
            wait 1000
            audiostream.Release($MUSIC_ASSHOLE)
            
            ///////////////////////////////////////////////////////////
            
            $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H2.mp3")
            250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
            Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
            Audiostream.Loop($MUSIC_ASSHOLE, 1)
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                        
            /////////////////////Плавное нарастание/////////////////////
//                        
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//                        
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//            0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//                        
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//                        
//            wait 1 
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
                        
            /////////////////////////////////////////////////////////////////////
            
            0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
            0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
            0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
            jump to @MAIN_QUEST4_MAIN_LOOP
            else
            jump to @MAIN_QUEST4_PASSED
            end                                     
            
            ////////////////////////////////////////
            
            end
        
        ////////////////////////////РАЗВЕТВЛЕНИЕ С ПРИВОЗОМ БЕГЛЕЦА////////////////////////////
        
        if
        0@ == 1
            then
            
            0470: 305@ = actor PLAYER_ACTOR current_weapon
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
            0992: set_player PLAYER_CHAR weapons_scrollable 0
            
            0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
            v$ST_DIALOG[0] = "MQ_242"  
            $DIALOG_COUNT = 0
            create_thread @DG_SYS    
            
            repeat
            wait 0
            until $DIALOG_END == 1            
            
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            0992: set_player PLAYER_CHAR weapons_scrollable 1
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
            01B9: set_actor PLAYER_ACTOR armed_weapon_to 305@
            
            0631: put_actor $RNDM_HOUSE_WEAPON[34] in_group PLAYER_GROUP            
            
            car.PutAt(QUEST4_CAR1,-53.832, -1598.339, 2.6019)
            car.Angle(QUEST4_CAR1) = 133.8539
            036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR1
            0430: put_actor $RNDM_HOUSE_WEAPON[34] into_car QUEST4_CAR1 passenger_seat 0
            camera.Restore_WithJumpCut()
            wait 1000
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
            03BC: MISSION_SPHERE = create_sphere_at -287.2976 -2200.5342 28.4067 radius 1.5
            v$OBJECTIVE = "GAME694"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME694"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            
            32@ = 0
            28@ = 0
            
            ////////////////////////////////////
        
            repeat
            wait 0
            
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[23])
            jf @MAIN_QUEST4_FAILED_BEGLEC_DIED
            
            if and
            32@ > 15000
            28@ == 0
                then
                28@ = 1                
                0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[51] // (int)
                v$ST_DIALOG[0] = "MQ_243"  
                $DIALOG_COUNT = 0
                create_thread @DG_SYS                
                end        
            
            if
            056E:   car QUEST4_CAR1 defined
            then
            
            if
            not car.Wrecked(QUEST4_CAR1)
            jf @MAIN_QUEST4_FAILED_CAR
            
            if
            not actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)
                then
                $DIALOG_PAUSE = 1
                marker.Disable(MISSION_CHECKPOINT)
                03BD: destroy_sphere MISSION_SPHERE
                v$OBJECTIVE = "GAME687"
                0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                $SOUNDS_VOLUME3 *= 0.5
                Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                
                MISSION_CHECKPOINT = marker.CreateAboveCar(QUEST4_CAR1)
                07E0: set_marker MISSION_CHECKPOINT type_to 1
                
                ///////////////////////////////////////////////////////////////////
                
                while true
                wait 0                                
                
                if
                not actor.Dead(PLAYER_ACTOR)
                jf @MAIN_QUEST4_FAILED_PLAYER_DIED
                if
                $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
                jf @MAIN_QUEST4_FAILED_AGRO
                if
                803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
                jf @MAIN_QUEST4_FAILED_LDEAD
                if
                not actor.Dead($RNDM_HOUSE_WEAPON[23])
                jf @MAIN_QUEST4_FAILED_BEGLEC_DIED                
                
                if
                056E:   car QUEST4_CAR1 defined
                    then
                    if
                    not car.Wrecked(QUEST4_CAR1)
                    jf @MAIN_QUEST4_FAILED_CAR
                    if
                    actor.InCar(PLAYER_ACTOR,QUEST4_CAR1)   
                        then
                        $DIALOG_PAUSE = 0    
                        marker.Disable(MISSION_CHECKPOINT)
                        018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
                        03BC: MISSION_SPHERE = create_sphere_at -287.2976 -2200.5342 28.4067 radius 1.5
                        v$OBJECTIVE = "GAME694"
                        if
                        REALISM_MODE == 1
                        then
                        v$OBJECTIVE = "GRME694"
                        end
                        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                        $SOUNDS_VOLUME3 *= 0.5
                        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                        break
                        end
                    else
                    jump to @MAIN_QUEST4_FAILED_CAR
                    end
                
                end
                
                ///////////////////////////////////////////////////////////////////
                
                end
            else
            jump to @MAIN_QUEST4_FAILED_CAR
            end        
            
            if
            875C: not  marker MISSION_CHECKPOINT enabled
            then
            018A: MISSION_CHECKPOINT = create_checkpoint_at -287.2976 -2200.5342 28.4067
            end    
            
            until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -287.2976 -2200.5342 28.4067 radius 1.5 1.5 10.0
            
            marker.Disable(MISSION_CHECKPOINT)
            03BD: destroy_sphere MISSION_SPHERE
            
            0221: set_player PLAYER_CHAR apply_brakes_to_car 1
            03BD: destroy_sphere MISSION_SPHERE
            05CD: AS_actor PLAYER_ACTOR exit_car QUEST4_CAR1
            068B: set_car QUEST4_CAR1 all_disembark
            
            v$OBJECTIVE = "GAME688"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME688"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY) 
            018A: MISSION_CHECKPOINT = create_checkpoint_at -281.159 -2198.1934 28.4153
            
            repeat
            wait 0
            
            if
            not actor.Dead(PLAYER_ACTOR)
            jf @MAIN_QUEST4_FAILED_PLAYER_DIED
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[23])
            jf @MAIN_QUEST4_FAILED_BEGLEC_DIED
            if
            $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
            jf @MAIN_QUEST4_FAILED_AGRO
            if
            803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
            jf @MAIN_QUEST4_FAILED_LDEAD
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[23])
            jf @MAIN_QUEST4_FAILED_BEGLEC_DIED
            
            if
            056E:   car QUEST4_CAR1 defined
            then
            
            if
            not car.Wrecked(QUEST4_CAR1)
            jf @MAIN_QUEST4_FAILED_CAR    
            
            else
            jump to @MAIN_QUEST4_FAILED_CAR
            end
            
            if and
            02A0:   actor PLAYER_ACTOR stopped
            00F2:   actor $RNDM_HOUSE_WEAPON[23] near_actor PLAYER_ACTOR radius 3.5 3.5 sphere 0
                then
                break
                end
            
            until false
            
            0221: set_player PLAYER_CHAR apply_brakes_to_car 0            
            player.CanMove(PLAYER_CHAR,false)
            marker.Disable(MISSION_CHECKPOINT)
            v$OBJECTIVE = "DUMMY"
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            06C9: remove_actor $RNDM_HOUSE_WEAPON[34] from_group
            
            0792: disembark_instantly_actor $RNDM_HOUSE_WEAPON[34]
            wait 500
            actor.PutAtNoOffset($RNDM_HOUSE_WEAPON[34],-274.6088, -2197.4041, 28.6824)
            actor.Angle($RNDM_HOUSE_WEAPON[34]) = 90.4219
            
            actor.PutAtNoOffset(PLAYER_ACTOR,-281.5049, -2198.9304, 28.3988)
            actor.Angle(PLAYER_ACTOR) = 310.9407
            camera.Restore_WithJumpCut()
            
            0639: AS_actor PLAYER_ACTOR rotate_to_actor $RNDM_HOUSE_WEAPON[23]
            0639: AS_actor $RNDM_HOUSE_WEAPON[23] rotate_to_actor PLAYER_ACTOR            
            
            wait 1500
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[34] // (int)                        
            v$ST_DIALOG[0] = "MQ_244"
            v$ST_DIALOG[1] = "MQ_245"                        
            $DIALOG_COUNT = 1
            create_thread @DG_SYS    
            
            repeat
            wait 0
            
            if
            $DIALOG_CURRENT_INT == 1
                then
                
                while not animation.Available("ON_LOOKERS")
                wait 0
                animation.Load("ON_LOOKERS")
                end
                
                0605: actor $RNDM_HOUSE_WEAPON[34] perform_animation "panic_hide" IFP "ON_LOOKERS" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
                
                repeat
                wait 0                                                
                until $DIALOG_END == 1                                                                
                
                end
            
            until $DIALOG_END == 1
                        
            05D9: AS_actor $RNDM_HOUSE_WEAPON[23] run_to_actor $RNDM_HOUSE_WEAPON[34] timelimit 10000 stop_within_radius 1.0
            
            repeat
            wait 0                                     
            until 00F2:   actor $RNDM_HOUSE_WEAPON[23] near_actor $RNDM_HOUSE_WEAPON[34] radius 1.0 1.0 sphere 0
            
            v$ST_DIALOG[0] = "MQ_246"
            v$ST_DIALOG[1] = "MQ_247"
            v$ST_DIALOG[2] = "MQ_248"
            v$ST_DIALOG[3] = "MQ_249"
            v$ST_DIALOG[4] = "MQ_250"
            v$ST_DIALOG[5] = "MQ_251"
            v$ST_DIALOG[6] = "MQ_252"            
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[1] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[2] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[3] = $RNDM_HOUSE_WEAPON[34] // (int)
            0084: $DIALOG_ACTOR[4] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[5] = $RNDM_HOUSE_WEAPON[23] // (int)
            0084: $DIALOG_ACTOR[6] = $RNDM_HOUSE_WEAPON[34] // (int)            
            $DIALOG_COUNT = 6
            $DIALOG_NOT_SKIP = 1
            create_thread @DG_SYS    
            
            repeat
            wait 0
            
            if
            $DIALOG_CURRENT_INT == 2
                then
                
                while not animation.Available("BASEBALL")
                wait 0
                animation.Load("BASEBALL")
                end
                
                while not animation.Available("Flowers2")
                wait 0
                animation.Load("Flowers2")
                end
                
                0605: actor $RNDM_HOUSE_WEAPON[23] perform_animation "Bat_M" IFP "BASEBALL" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 2650
                0605: actor $RNDM_HOUSE_WEAPON[34] perform_animation "Flower_Hit" IFP "Flowers2" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 2650
                
                repeat
                wait 0
                
                TEMPVAR_INT = 10
                008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
                0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
                008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
				if
				TEMPVAR_INT < 1
				then
				TEMPVAR_INT = 1
				end
				
                if
                0E45: frame_mod TEMPVAR_INT
                then
                09F1: play_audio_at_actor $RNDM_HOUSE_WEAPON[34] event 1190
                end
                
                until $DIALOG_CURRENT_INT > 2
                
                05BB: AS_actor $RNDM_HOUSE_WEAPON[34] fall_down 0 time_on_ground 5000
                0A1D: AS_actor $RNDM_HOUSE_WEAPON[23] rotate_to_and_look_at_actor $RNDM_HOUSE_WEAPON[34]
                
                end
                
            if
            $DIALOG_CURRENT_INT == 5
                then
                
                05D9: AS_actor $RNDM_HOUSE_WEAPON[26] run_to_actor $RNDM_HOUSE_WEAPON[34] timelimit 10000 stop_within_radius 1.0
                0A1D: AS_actor $RNDM_HOUSE_WEAPON[34] rotate_to_and_look_at_actor $RNDM_HOUSE_WEAPON[26]                
                wait 500
                0605: actor $RNDM_HOUSE_WEAPON[34] perform_animation "panic_cower" IFP "ON_LOOKERS" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1                                                
                
                repeat
                wait 0
                
                TEMPVAR_INT = 15
                008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
                0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
                008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
				if
				TEMPVAR_INT < 1
				then
				TEMPVAR_INT = 1
				end
				
                if and
                80F2: not  actor $RNDM_HOUSE_WEAPON[26] near_actor $RNDM_HOUSE_WEAPON[34] radius 1.0 1.0 sphere 0
                02A0:   actor $RNDM_HOUSE_WEAPON[26] stopped
                0E45: frame_mod TEMPVAR_INT                
                    then
                    05D9: AS_actor $RNDM_HOUSE_WEAPON[26] run_to_actor $RNDM_HOUSE_WEAPON[34] timelimit 10000 stop_within_radius 1.0
                    end
                
                if and
                00F2:   actor $RNDM_HOUSE_WEAPON[26] near_actor $RNDM_HOUSE_WEAPON[34] radius 1.0 1.0 sphere 0
                02A0:   actor $RNDM_HOUSE_WEAPON[26] stopped                
                    then                    
                    0605: actor $RNDM_HOUSE_WEAPON[26] perform_animation "Bat_M" IFP "BASEBALL" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 2650
                    0605: actor $RNDM_HOUSE_WEAPON[34] perform_animation "Flower_Hit" IFP "Flowers2" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 2650
                    
                    32@ = 0
                                        
                    repeat
                    wait 0
                    
                    TEMPVAR_INT = 10
                    008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
                    0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
                    008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
					if
					TEMPVAR_INT < 1
					then
					TEMPVAR_INT = 1
					end
					
                    if
                    0E45: frame_mod TEMPVAR_INT
                    then
                    09F1: play_audio_at_actor $RNDM_HOUSE_WEAPON[34] event 1190
                    end
                    
                    until 32@ > 2650                    

                    actor.SetWalkStyle($RNDM_HOUSE_WEAPON[34],"man")                    
                    07A3: AS_actor $RNDM_HOUSE_WEAPON[26] run_to_and_follow_actor $RNDM_HOUSE_WEAPON[34] wait_radius_between 2.0 and 5.0
                    05D3: AS_actor $RNDM_HOUSE_WEAPON[34] goto_point -255.0234 -2228.0156 28.6383 mode 4 time 900000 ms // versionA
                    break                    
                    end
                
                until false
                
                end    
            
            until $DIALOG_END == 1                        
                        
            05D3: AS_actor $RNDM_HOUSE_WEAPON[23] goto_point -279.9652 -2198.0979 28.6798 mode 4 time 5000 ms // versionA            
            
            repeat
            wait 0 
            until 00F2:   actor $RNDM_HOUSE_WEAPON[23] near_actor PLAYER_ACTOR radius 2.0 2.0 sphere 0
            
            v$ST_DIALOG[0] = "MQ_253"            
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[23] // (int)            
            $DIALOG_COUNT = 0
            create_thread @DG_SYS    
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            05D4: AS_actor $RNDM_HOUSE_WEAPON[23] rotate_angle 252.8527
            wait 1000
            
            v$ST_DIALOG[0] = "MQ_254"            
            
            0084: $DIALOG_ACTOR[0] = $RNDM_HOUSE_WEAPON[23] // (int)            
            $DIALOG_COUNT = 0
            create_thread @DG_SYS    
            
            repeat
            wait 0
            until $DIALOG_END == 1
            
            0615: define_AS_pack_begin 15@
            05D3: AS_actor -1 goto_point -273.8967 -2198.095 28.6866 mode 4 time 99999 ms // versionA
            05D3: AS_actor -1 goto_point -269.9374 -2203.3618 28.6961 mode 4 time 99999 ms // versionA
            05D3: AS_actor -1 goto_point -255.5803 -2227.1499 28.6398 mode 4 time 99999 ms // versionA
            0616: define_AS_pack_end 15@
            0618: assign_actor $RNDM_HOUSE_WEAPON[23] to_AS_pack 15@
            061B: remove_references_to_AS_pack 15@
            
            animation.Release("ON_LOOKERS")
            animation.Release("BASEBALL")
            animation.Release("Flowers2")
            
            player.CanMove(PLAYER_CHAR,true)
            
//            text.ShowH('MQ_255',2000,1)
//            wait 2000
            
//            v$ST_DIALOG[0] = "MQ_255"
//            $DIALOG_COUNT = 0
//            $DIALOG_NOT_SKIP = 1
//            create_thread @DG_SYS2
//            
//            repeat
//            wait 0
//            until $DIALOG_END == 1
            
//            model.Load(#CELLPHONE)
//            mload
//            
//            0729: AS_actor PLAYER_ACTOR hold_cellphone 1
//            PLAYER_NO_ITEMS_FLAG = 1
            
//            wait 2500
            
            ///////////////////////////////////////////////////////////////////
        
//            $RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
//            Audiostream.Loop($RADIO_SOUND, 1)  
//            Audiostream.Volume($RADIO_SOUND) = VERO_TIPA_VOLUME
//            Audiostream.PerformAction($RADIO_SOUND, PLAY)
//            
//            Audiostream.Loop($RADIO_ON_SOUND,0)
//            Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
//            Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME
            
            /////////////////////Плавное нарастание/////////////////////
            
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
//            0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1 
            
            ////////////////////////////////////////////////////////          
            
//            32@ = 0
//            random_int 31@ 15000 25000
//            
//            repeat
//            wait 0          
//            until 001D:   32@ > 31@  // (int)
            
            /////////////////////Плавное затухание/////////////////////
            
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
//            $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1
            
            //////////////////////////////////////////////////////////
            
//            v$2NAME1 = "N_ME"
//            0665: get_actor PLAYER_ACTOR model_to 0@
//            if
//            0@ > 10000
//            then
//            v$2NAME1 = "N_"
//            end
//            0AD3: v$2NAME2 = format "%d" 0@
//            098B: v$2NAME3 = v$2NAME1 + v$2NAME2
//            
//            if
//            FREEMODE_CUSTOM_NAME == 1 
//            then
//            06D1: v$2NAME3 = "F_NAME" // v$ = string
//            end
//            
//            0384: show_text_1string GXT 'MQ_256' string v$2NAME3 time 2500 1
            
//            text.ShowH('MQ_257',2000,1)
//            wait 2000
//            text.ShowH('MQ_258',2000,1)
//            wait 2000
            
//            v$ST_DIALOG[0] = "MQ_257"
//            v$ST_DIALOG[1] = "MQ_258"
//            $DIALOG_COUNT = 1
//            $DIALOG_NOT_SKIP = 1
//            create_thread @DG_SYS2
//            
//            repeat
//            wait 0
//            until $DIALOG_END == 1
//            
//            wait 1000    
            
//            0729: AS_actor PLAYER_ACTOR hold_cellphone 0
//            PLAYER_NO_ITEMS_FLAG = 0
            
            //model.Destroy(#CELLPHONE)
            
//            Audiostream.Loop($RADIO_OFF_SOUND,0)
//            Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
//            Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME
            
            player.CanMove(PLAYER_CHAR,false)
            
            fade 0 500
            $HUD_REMOVE = 1
            wait 500                        
            
            if
            actor.Driving(PLAYER_ACTOR)
            then
            0362: remove_actor PLAYER_ACTOR from_car_and_place_at -286.4961 -2201.9888 38.3225
            end
            
            car.PutAt(QUEST4_CAR1,0.0, 0.0, 0.0)
            car.Destroy(QUEST4_CAR1)
            wait 50                    
            
            car.PutAt(QUEST4_CAR2,-286.4961, -2201.9888, 28.3225)
            car.Angle(QUEST4_CAR2) = 23.9227
            
            0A97: 11@ = car QUEST4_CAR2 struct 
            11@ += 9 
            0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
            08BD: set 12@ bit 2 
            0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
            0A97: 11@ = car QUEST4_CAR2 struct 
            11@ += 4 
            0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
            08BD: set 12@ bit 1 
            0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
            24@ = 25.0 
            0A97: 22@ = car QUEST4_CAR2 struct 
            0A8E: 23@ = 22@ + 5 // int 
            0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
            08C3: clear 12@ bit 1 
            08C3: clear 12@ bit 2 
            0A97: 11@ = car QUEST4_CAR2 struct 
            11@ += 18 
            0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
            08BD: set 12@ bit 2 
            0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
            08C3: clear 12@ bit 2
            Car.RemoveReferences(QUEST4_CAR2)
            036A: put_actor PLAYER_ACTOR in_car QUEST4_CAR2
            camera.Restore_WithJumpCut()
            
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE1)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE2)
            actor.DestroyInstantly(MAIN_QUEST4_TEAMMATE3)
            
            player.CanMove(PLAYER_CHAR,true)
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            if
            201@ == 0
            then    
//            text.ShowH('MQ_259',3000,1)
//            wait 3000

            v$ST_DIALOG[0] = "MQ_259"
            $DIALOG_COUNT = 0
            $DIALOG_NOT_SKIP = 1
            create_thread @DG_SYS2
            
            repeat
            wait 0
            until $DIALOG_END == 1

            018A: MISSION_CHECKPOINT = create_checkpoint_at -713.061 -2120.707 25.9614
            018A: MISSION_MARKER = create_checkpoint_at -713.061 -2120.707 25.9614
            03BC: 310@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
            03BC: 311@ = create_sphere_at -713.061 -2120.707 25.9614 radius 1.5
            v$OBJECTIVE = "GAME681"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GRME681"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
            
            /////////////////////Плавное затухание/////////////////////
//
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//            $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1
//            
//            while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//            wait 0
//            end
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
            wait 1000
            audiostream.Release($MUSIC_ASSHOLE)
            
            ///////////////////////////////////////////////////////////
            
            $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H2.mp3")
            250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
            Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
            Audiostream.Loop($MUSIC_ASSHOLE, 1)
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                        
            /////////////////////Плавное нарастание/////////////////////
//                        
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//                        
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//            0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//                        
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//                        
//            wait 1 
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
                        
            /////////////////////////////////////////////////////////////////////
            
            0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
            0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
            0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
            jump to @MAIN_QUEST4_MAIN_LOOP
            else
            jump to @MAIN_QUEST4_PASSED
            end                                     
            
            ////////////////////////////////////////
            
            end
        
        ////////////////////////////////////////
        
        end
    
    ////////////////////////////////////             
    
    end

///////////////////////////////////ВЕТКА С ОРУЖИЕМ///////////////////////////////////

if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -713.061 -2120.707 25.9614 radius 5.5 5.5 5.5
201@ == 0
    then
    
    0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_ROOT"    
    201@ = 1        
    marker.Disable(MISSION_MARKER)    
    03BD: destroy_sphere 310@
    03BD: destroy_sphere 311@    
//    text.ShowH('MQ_260',3000,1)

    v$ST_DIALOG[0] = "MQ_260"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
               
    repeat
    wait 0
    actor.StorePos(PLAYER_ACTOR,1@,2@,3@)
    until 3@ > 900.0
    
    :MQ4_GUNS_ROOT_JUMP
    201@ = 1
    marker.Disable(MISSION_CHECKPOINT)
    v$OBJECTIVE = "DUMMY"       
        
    07FB: set_interior 'SKLAD' access 0  // Ganton Gym
    ZOMBIES_NOTSPAWN = 1    
    
    wait 500
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
    if
    400@ == 1
    then      
    
    if and
    881E: not model $SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] boat
    881F: not model $SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] plane
    8820: not model $SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] heli
    0@ == 0
    then
    $SAVE_CAR_X[LATEST_CAR_SLOT_USED] = -706.495
    $SAVE_CAR_Y[LATEST_CAR_SLOT_USED] = -2107.2205
    $SAVE_CAR_Z[LATEST_CAR_SLOT_USED] = 26.0974
    $SAVE_CAR_ANGLE[LATEST_CAR_SLOT_USED] = 307.3076
    else                          
    
    :CAR_CREATE_QMISSION4_1_CHECKPOINT
    if
    model.Available(15424)
    then
    
    QUEST4_CAR2 = Car.Create(15424, -706.495, -2107.2205, 26.0974)
    Car.Angle(QUEST4_CAR2) = 307.3076
    random_int 0@ 0 16
    0229: set_car QUEST4_CAR2 primary_color_to 0@ secondary_color_to 0@
    
    if
    model.Available(15424)
    then
    //model.Destroy(15424)
    end
    
    else
    model.Load(15424)
    mload
    wait 0
    jump to @CAR_CREATE_QMISSION4_1_CHECKPOINT
    end
    
    0A97: 11@ = car QUEST4_CAR2 struct 
    11@ += 9 
    0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
    08BD: set 12@ bit 2 
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    0A97: 11@ = car QUEST4_CAR2 struct 
    11@ += 4 
    0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
    08BD: set 12@ bit 1 
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    24@ = 25.0 
    0A97: 22@ = car QUEST4_CAR2 struct 
    0A8E: 23@ = 22@ + 5 // int 
    0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
    08C3: clear 12@ bit 1 
    08C3: clear 12@ bit 2 
    0A97: 11@ = car QUEST4_CAR2 struct 
    11@ += 18 
    0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
    08BD: set 12@ bit 2 
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    08C3: clear 12@ bit 2    
    camera.Restore_WithJumpCut()
    
    end   
    
    end
    
//    text.ShowH('MQ_261',4000,1)
//    wait 3000
    
    v$ST_DIALOG[0] = "MQ_261"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
            
    repeat
    wait 0
    until $DIALOG_END == 1
    
    v$OBJECTIVE = "GAME676"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD
    
    if
    00EC:   actor PLAYER_ACTOR sphere 0 near_point -714.767 -2155.0291 radius 10.0 10.0
        then
        break
        end
    
    until false
    
    v$OBJECTIVE = "DUMMY"
    
//    text.ShowH('MQ_262',1500,1)
//    wait 1500
//    text.ShowH('MQ_263',2000,1)
//    wait 2000

    v$ST_DIALOG[0] = "MQ_262"
    v$ST_DIALOG[1] = "MQ_263"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
            
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    
    until $DIALOG_END == 1
    
    v$OBJECTIVE = "GAME677"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD
    
    if and
    00EC:   actor PLAYER_ACTOR sphere 0 near_point -714.767 -2155.0291 radius 1.0 1.0
    02A0:   actor PLAYER_ACTOR stopped
        then
        break
        end
    
    until false
    
    v$OBJECTIVE = "DUMMY"
    player.CanMove(PLAYER_CHAR,false)
    
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
//        
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_ASSHOLE)
    
    ///////////////////////////////////////////////////////////
        
    cinema.Widescreen(1)
    0A48: enable_menu_access_in_widescreen_mode 0
    $READING_NOTE_FLAG = 1
        
    ////////////////////////////////////////////////////////        
    
    0A0E: disable_text_with_style 1
        
    0391: release_textures
    0390: load_txd_dictionary 'quest4' 
    wait 1
    038F: load_texture "quest4_1" as 1 // Load dictionary with 0390 first
    038F: load_texture "quest4_2" as 2 // Load dictionary with 0390 first 
    wait 1    
        
    32@ = 0
    $SPEED_08_FLAG = 1
    
    gosub @MAIN_QUEST4_NOTE_SOUND_PLAY 
        
     repeat 
    wait 0
    03F0: enable_text_draw 1
    038D: draw_texture 1 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
    03E3: set_texture_to_be_drawn_antialiased 1 
     until 0E3E: is_button_just_pressed 0 17
    
    audiostream.PerformAction(14@,STOP)
    audiostream.Release(14@)  
     
    gosub @MAIN_QUEST4_NOTE_SOUND_PLAY 
        
     repeat 
    wait 0
    03F0: enable_text_draw 1
    038D: draw_texture 2 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
    03E3: set_texture_to_be_drawn_antialiased 1 
     until 0E3E: is_button_just_pressed 0 17
     
    audiostream.PerformAction(14@,STOP)
    audiostream.Release(14@)               
         
    $SPEED_08_FLAG = 0
    015D: set_gamespeed 1.0      
         
    wait 1
    03F0: enable_text_draw 0
    wait 1
    0391: release_textures 
        
    0A0E: disable_text_with_style 0
        
    //////////////////////////////////////////////////////// 
        
    $SPEED_08_FLAG = 0
    $READING_NOTE_FLAG = 0
    
    cinema.Widescreen(0)
    0A48: enable_menu_access_in_widescreen_mode 1   
        
    015D: set_gamespeed 1.0 
        
    player.CanMove(PLAYER_CHAR) = true
        
    fade 1 500
    $HUD_REMOVE = 0
    wait 500        
            
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4J.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                        
    /////////////////////Плавное нарастание/////////////////////
//                        
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//                        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//                        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//                        
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
                        
    /////////////////////////////////////////////////////////////////////
    
    008B: 500@ = $ALLOW_TANK // (int)
    $ALLOW_TANK = 1
    
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 1
    $SPAWN_TANK_ON_COORD = 1
    $TANK_INTERIOR_SPAWN = 1
    $TANK_X = -727.4911
    $TANK_Y = -2127.8521
    $TANK_Z = 1001.8516
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 0
    $SPAWN_TANK_FLAG = 1
    
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD
    
    if
    056D:   actor $TANK[0] defined
        then
        break
        end
    
    until false
    
    v$OBJECTIVE = "GAME678"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    
    $SPAWN_TANK_FLAG = 0
    $SPAWN_TANK_ON_COORD = 0
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 0
    
    300@ = marker.CreateAboveActor($TANK[0])
    
    repeat
    wait 0
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST4_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST4_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST4_FAILED_LDEAD
    
    if
    056D:   actor $TANK[0] defined
        then
        if
        8EA4: not is_char_on_fire $TANK[0]
        jf @MAIN_QUEST4_FAILED_TANK_BURNING
        if
        8184:   actor $TANK[0] health < 1
            then
            actor.StorePos($TANK[0],50@,51@,52@)
            marker.Disable(300@)
            end
        else
        marker.Disable(300@)
        end
        
    if
    875C: not  marker 300@ enabled
        then
        break
        end    
    
    until false        
    
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1
    $TANK_INTERIOR_SPAWN = 0
    008A: $ALLOW_TANK = 500@ // (int)
    v$OBJECTIVE = "DUMMY"
    wait 1000
    
//    text.ShowH('MQ_264',2500,1)
//    wait 2500

    v$ST_DIALOG[0] = "MQ_264"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
            
    repeat
    wait 0
    until $DIALOG_END == 1
    
    ///////////////////////////////////
    
    v$OBJECTIVE = "GAME682"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME682"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)    
    018A: MISSION_CHECKPOINT = create_checkpoint_at 50@ 51@ 52@
    03BC: MISSION_SPHERE = create_sphere_at 50@ 51@ 52@ radius 1.5
    
    repeat
    wait 0
    
    if
    00EC:   actor PLAYER_ACTOR sphere 0 near_point 50@ 51@ radius 1.5 1.5
        then
        break
        end
    
    until false
    
    v$OBJECTIVE = "DUMMY"    
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    
    ///////////////////////////////////////////////////////////////////////////////////////

    0470: 9@ = actor PLAYER_ACTOR current_weapon
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    0992: set_player PLAYER_CHAR weapons_scrollable 0 
        
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    32@ = 0
        
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
        
    while 83D0: not  wav 4 loaded 
    wait 0
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
    end
         
    0949: link_wav 4 to_actor PLAYER_ACTOR
    03D1: play_wav 4
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
        
    32@ = 0
    while 83D2:   wav 4 ended 
    wait 0
    if
    32@ > 3500
        then
        break
        end
    end
        
    040D: unload_wav 4 
    04EF: release_animation "BOMBER"
        
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
        
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
        
    ///////////////////////////////////////////////////////////////////////////////////////
        
//    text.ShowH('MQ_265',1500,1)
//    wait 1500
//    text.ShowH('MQ_266',2000,1)
//    wait 2000

//    v$ST_DIALOG[0] = "MQ_265"
//    v$ST_DIALOG[1] = "MQ_266"
//    $DIALOG_COUNT = 1
//    $DIALOG_NOT_SKIP = 1
//    create_thread @DG_SYS2
//            
//    repeat
//    wait 0
//    until $DIALOG_END == 1
    
//    model.Load(#CELLPHONE)
//    mload
//    
//    0729: AS_actor PLAYER_ACTOR hold_cellphone 1
//    PLAYER_NO_ITEMS_FLAG = 1
    
//    wait 2500
    
    ///////////////////////////////////////////////////////////////////

//    $RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
//    Audiostream.Loop($RADIO_SOUND, 1)  
//    Audiostream.Volume($RADIO_SOUND) = VERO_TIPA_VOLUME
//    Audiostream.PerformAction($RADIO_SOUND, PLAY)
//    
//    Audiostream.Loop($RADIO_ON_SOUND,0)
//    Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
//    Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    
    ////////////////////////////////////////////////////////          
    
//    32@ = 0
//    random_int 31@ 15000 25000
//    
//    repeat
//    wait 0          
//    until 001D:   32@ > 31@  // (int)
    
    /////////////////////Плавное затухание/////////////////////
    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1
    
    //////////////////////////////////////////////////////////
    
//    v$2NAME1 = "N_ME"
//    0665: get_actor PLAYER_ACTOR model_to 0@
//    if
//    0@ > 10000
//    then
//    v$2NAME1 = "N_"
//    end
//    0AD3: v$2NAME2 = format "%d" 0@
//    098B: v$2NAME3 = v$2NAME1 + v$2NAME2
//    
//    if
//    FREEMODE_CUSTOM_NAME == 1 
//    then
//    06D1: v$2NAME3 = "F_NAME" // v$ = string
//    end
    
//    0384: show_text_1string GXT 'MQ_267' string v$2NAME3 time 2500 1
    
//    text.ShowH('MQ_268',2000,1)
//    wait 2000
//    text.ShowH('MQ_269',3000,1)
//    wait 3000

//    v$ST_DIALOG[0] = "MQ_267"
//    v$ST_DIALOG[1] = "MQ_268"
//    v$ST_DIALOG[2] = "MQ_269"
//    $DIALOG_COUNT = 2
//    $DIALOG_NOT_SKIP = 1
//    create_thread @DG_SYS2
//            
//    repeat
//    wait 0
//    until $DIALOG_END == 1
//    
//    wait 1000    
    
//    0729: AS_actor PLAYER_ACTOR hold_cellphone 0
//    PLAYER_NO_ITEMS_FLAG = 0
    
    //model.Destroy(#CELLPHONE)
    
//    Audiostream.Loop($RADIO_OFF_SOUND,0)
//    Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
//    Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME    
    
    v$OBJECTIVE = "GAME679"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME679"
    end 
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)   
    018A: MISSION_CHECKPOINT = create_checkpoint_at -686.6847 -2157.0742 1008.4531    
    
    repeat
    wait 0
    
    07FB: set_interior 'SKLAD' access 1  // Ganton Gym
    
    if and
    00EC:   actor PLAYER_ACTOR sphere 0 near_point -713.1755 -2120.5959 radius 1.5 1.5
    $ACTIVE_INTERIOR == 0
        then
        break
        end
    
    until false
    
    v$OBJECTIVE = "DUMMY"    
    marker.Disable(MISSION_CHECKPOINT)
    07FB: set_interior 'SKLAD' access 0  // Ganton Gym
    ZOMBIES_NOTSPAWN = 0    
    
    wait 500        
    
    if
    200@ == 0
    then    
//    text.ShowH('MQ_270',3000,1)
//    wait 3000

    v$ST_DIALOG[0] = "MQ_270"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
            
    repeat
    wait 0
    until $DIALOG_END == 1

    018A: MISSION_CHECKPOINT = create_checkpoint_at 542.217 -1292.5048 17.2422
    018A: MISSION_MARKER = create_checkpoint_at 542.217 -1292.5048 17.2422
    03BC: 310@ = create_sphere_at 542.217 -1292.5048 17.2422 radius 1.5
    03BC: 311@ = create_sphere_at 542.217 -1292.5048 17.2422 radius 1.5
    v$OBJECTIVE = "GAME680"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GRME680"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
//        
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
    
    ///////////////////////////////////////////////////////////
            
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            
    /////////////////////Плавное нарастание/////////////////////
//            
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//            
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
    /////////////////////////////////////////////////////////////////////
    
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
    0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_DONE"
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_ROOT" 
    jump to @MAIN_QUEST4_MAIN_LOOP
    else
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
//        
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
    
    ///////////////////////////////////////////////////////////
            
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q4\Q4H2.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            
    /////////////////////Плавное нарастание/////////////////////
//            
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//            
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//            
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
    /////////////////////////////////////////////////////////////////////
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
    if and
    400@ == 1
    0@ == 1
    then  
    Car.RemoveReferences(QUEST4_CAR2)    
    end
    
    jump to @MAIN_QUEST4_PASSED
    end
        
    end

until false

/////////////////////////////////////////////////////////////////////////////////////////

:MAIN_QUEST4_PASSED

018A: MISSION_CHECKPOINT = create_checkpoint_at 100@ 101@ 102@

v$OBJECTIVE = "GAME541"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1294"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

repeat
wait 0

if
875C: not  marker MISSION_CHECKPOINT enabled
then
018A: MISSION_CHECKPOINT = create_checkpoint_at 100@ 101@ 102@
end

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST4_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST4_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST4_FAILED_LDEAD

until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 100@ 101@ 102@ radius 5.0 5.0 10.0

v$OBJECTIVE = "GAME556"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1295"
end

:MQ4_END_JUMP

$QUEST_READY_FLAG = 1
create_thread @MNQ_RSP $QUEST_CAMP_NUMBER

repeat
wait 0
until $QUEST_TYPE == -1

marker.Disable(MISSION_CHECKPOINT)

v$OBJECTIVE = "DUMMY"
$ONMISSION = 0
$NOTSPAWN_ETC = 0
$SURVIVORS_DONT_SPAWN_FLAG = 0
MAIN_QUEST_TEAMMATES_REMOVE_FLAG = 2
create_thread @MQTMBK

0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_DONE"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_ROOT"

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
//    
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)

MAIN_QUEST_MUSIC_FLAG = 0

gosub @MAIN_QUEST4_CHANGE_WEAPONS_IN_FERMERS_CAMPS

jump to @ASSUDALENIE_KODA2829_4  

:ASSKOD_PROVALA2829_4 
mission_cleanup     
return 

:ASSUDALENIE_KODA2829_4    
mission_cleanup    
return

:MAIN_QUEST4_NOTE_SOUND_PLAY

random_int 16@ 0 to 5 

if
16@ == 0
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll1.mp3") 
end
    
if
16@ == 1
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll2.mp3") 
end
    
if
16@ == 2
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll3.mp3") 
end
    
if
16@ == 3
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll4.mp3") 
end
    
if
16@ == 4
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll5.mp3") 
end
       
Audiostream.PerformAction(14@, PLAY)
Audiostream.Volume(14@) = $SOUNDS_VOLUME

return

:MAIN_QUEST4_FAILED_TANK_BURNING

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MSFL108" 
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_AGRO

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL5"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_AGRO2

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MSFL126"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_BEGLEC_DIED

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MSFL107"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_TDEAD

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL54"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_CAR

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL25"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_LDEAD

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MSFL108" 
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST4_FAILED_PLAYER_DIED

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL80"
create_thread @GMV_OVR

return

////////////////////////Вычисление модели////////////////////////

:MAIN_QUEST4_CHECKING_MODEL
wait 0   

//////////////////////////////////////////////////
    
random_int 0@ = MIN_SKIN_GEN MAX_SKIN_GEN
if and
0@ == SKIN_GEN_SET
UNITED_MAP == 0
$GAMEMODE_WAR == 0
$SAME_PLAYER_CHEAT_SPAWN == 0
    then
    
    while true
    wait 0
    
    if
    0E4D: random_percent NEWSKINS2_GEN_PERCENT
    then
    random_int 0@ $MIN_SKIN2 $MAX_SKIN2
    else
    random_int 0@ $MIN_SKIN $MAX_SKIN
    end
    
    if
    not model.Available(0@)
    then
    model.Load(0@)
    end
    
    if or
    003C:   $RANDOM_MODE_MODEL == 0@  // (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[0] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[1] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[2] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[3] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[4] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[5] // @ == $ (int)
        then
        else   
        break
        end
    
    end
    
    return
    end
    
//////////////////////////////////////////////////    

if
UNITED_MAP == 0
then

if
$GAMEMODE_WAR == 0
then
0209: 0@ = random_int_in_ranges RANDOM_PED_MIN_ID RANDOM_PED_MAX_ID
else

if
$PLAYER_ARMY_SIDE == 1
then

//////////////////////////////////////////////

if and
8583: not  player PLAYER_CHAR in_zone 'VE'
8583: not  player PLAYER_CHAR in_zone 'BONE'
8583: not  player PLAYER_CHAR in_zone 'ROBAD'
8583: not  player PLAYER_CHAR in_zone 'ROBAD1'
then
1@ = 0
else
1@ = 1
end

if
1@ == 0
then

0842: 2@ = player PLAYER_CHAR town_number

if
not 2@ == 0
then
0209: 0@ = random_int_in_ranges 14976 14980
else
0209: 0@ = random_int_in_ranges 14980 14984
end

else
0209: 0@ = random_int_in_ranges 15000 15004
end

/////////////////////////////////////////////

end

if
$PLAYER_BANDIT_SIDE == 1
then
0209: 0@ = random_int_in_ranges 14990 14998
end

if
$PLAYER_FERMERS_SIDE == 1
then
0209: 0@ = random_int_in_ranges 14985 14989
end

if
$PLAYER_SWAT_SIDE == 1
then
0209: 0@ = random_int_in_ranges #SWAT #SWAT
end

end

else

if
$UNITED_VC_FLAG == 1
then

if
$GAMEMODE_WAR == 0
then

if
STORIES_MAP == 0
then
0209: 0@ = random_int_in_ranges MINID_VC_SKIN MAXID_VC_SKIN
else
0209: 0@ = random_int_in_ranges MINID_VCS_SKIN MAXID_VCS_SKIN
end

else

if
$PLAYER_ARMY_SIDE == 1
then
0084: $VC_ARMY_SKIN22 = $VC_ARMY_SKIN2 // (int)
$VC_ARMY_SKIN22 += 1
0209: 0@ = random_int_in_ranges $VC_ARMY_SKIN $VC_ARMY_SKIN22
end

if
$PLAYER_BANDIT_SIDE == 1
then
0084: $VC_BANDITS_SKIN22 = $VC_BANDITS_SKIN2 // (int)
$VC_BANDITS_SKIN22 += 1
0209: 0@ = random_int_in_ranges $VC_BANDITS_SKIN1 $VC_BANDITS_SKIN22
end

if
$PLAYER_SWAT_SIDE == 1
then
0209: 0@ = random_int_in_ranges $VC_SWAT_SKIN $VC_SWAT_SKIN
end

end

else

if
$GAMEMODE_WAR == 0
then

if
STORIES_MAP == 0
then
0209: 0@ = random_int_in_ranges MINID_III_SKIN MAXID_III_SKIN
else
0209: 0@ = random_int_in_ranges MINID_LCS_SKIN MAXID_LCS_SKIN
end

else

if
$PLAYER_ARMY_SIDE == 1
then
0209: 0@ = random_int_in_ranges $III_ARMY_SKIN $III_ARMY_SKIN
end

if
$PLAYER_BANDIT_SIDE == 1
then
0084: $III_BANDITS_SKIN22 = $III_BANDITS_SKIN2 // (int)
$III_BANDITS_SKIN22 += 1
0209: 0@ = random_int_in_ranges $III_BANDITS_SKIN1 $III_BANDITS_SKIN22
end

if
$PLAYER_SWAT_SIDE == 1
then
0209: 0@ = random_int_in_ranges $III_SWAT_SKIN $III_SWAT_SKIN
end

end

end

end

if
$GAMEMODE_WAR == 1
then
jump to @MAIN_QUEST4_CHECKING_MODEL2 
end

////////////////////////////////////////////////////////

if
UNITED_MAP == 0
then

2@ = 0

for 1@ = 0 to $CAMPS_COUNT2
        
if or
07D6:   0@ == $CAMP_MODEL1[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL2[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL3[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL4[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL5[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL6[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL7[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL8[1@] // @ == $ (int)
then
2@ = 1
end

if or
07D6:   0@ == $TRADER_MODEL[0] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[1] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[2] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[3] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[4] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[5] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[6] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[7] // @ == $ (int)
then
2@ = 1
end

if or
07D6:   0@ == $TRADER_MODEL[8] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[9] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[10] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[11] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[12] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[13] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[14] // @ == $ (int)
then
2@ = 1
end
            
if or
07D6:   0@ == $CAMP_MODEL9[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL10[1@] // @ == $ (int)
003C:   $RANDOM_MODE_MODEL == 0@  // (int)
then
2@ = 1
end   

end

end

////////////////////////////////////////////////////////

if or
07D6:   0@ == $RANDOM_PEOPLE_SKIN[0] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[1] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[2] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[3] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[4] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[5] // @ == $ (int)
003C:   $RANDOM_MODE_MODEL == 0@  // (int)
2@ == 1
jf @MAIN_QUEST4_CHECKING_MODEL2
jump @MAIN_QUEST4_CHECKING_MODEL

:MAIN_QUEST4_CHECKING_MODEL2
 
if
07DE:   model 0@ exists  // versionB
jf @MAIN_QUEST4_CHECKING_MODEL

if
$GAMEMODE_WAR == 0
then
0AD3: 2@v = format "%d" 0@
if
8AF0: not 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key 2@v
jf @MAIN_QUEST4_CHECKING_MODEL
end  

while not model.Available(0@)
wait 0
model.Load(0@)
mload
end
  
return

:MISSION41_ATTACK_SYSTEM

if
856D: not  actor $RNDM_HOUSE_WEAPON[0@] defined
then
return
end

if
8184:   actor $RNDM_HOUSE_WEAPON[0@] health < 1
then
return
end       

if
$VAGINA_FLAG[0@] == 1
    then
    $VAGINA_TIME[0@] += 1
    end
    
//if
//056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
//then
//gosub @Q4_PHRASES
//end            

/////////////////Поиск цели бойцом///////////////////// 

if and
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
$VAGINA_FLAG[0@] == 0  
    then    
    gosub @MISSION41_ATTACK_SYSTEM_PLAYER_CHECK
    random_int 2@ 0 30
    if and
    2@ == 15
    19@ == 1
        then
        if or
        0364:  actor $RNDM_HOUSE_WEAPON[0@] spotted_actor PLAYER_ACTOR  
        0364:  actor PLAYER_ACTOR spotted_actor $RNDM_HOUSE_WEAPON[0@]     
        051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
            then
            if and
            $ACTOR_DEAD == 0    
            $SPECTATING_FLAG == 0 
            00F2:  actor $RNDM_HOUSE_WEAPON[0@] near_actor PLAYER_ACTOR radius 220.0 220.0 sphere 0
                then      
                
                if    
                051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor PLAYER_ACTOR
                then
                054E: clear_actor $RNDM_HOUSE_WEAPON[0@] damage
                0467: clear_actor $RNDM_HOUSE_WEAPON[0@] last_weapon_damage
                end
                 
                008B: $VAGINA[0@] = PLAYER_ACTOR // (int)                
                $VAGINA_FLAG[0@] = 1
                $VAGINA_TIME[0@] = 0                    
                gosub @MISSION41_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST                                                             
                end
            end   
        else   
        gosub @MISSION41_ATTACK_SYSTEM_TARGET_FIND
        if
        25@ == 1
            then    
            gosub @MISSION41_ATTACK_SYSTEM_TARGET_CHECK        
            if and
            not actor.Dead($VAGINA[0@])            
            803A: not  $VAGINA[0@] == $RNDM_HOUSE_WEAPON[0@] // (int) 
            19@ == 1                 
                then
                if or
                0364:  actor $RNDM_HOUSE_WEAPON[0@] spotted_actor $VAGINA[0@]
                0364:  actor $VAGINA[0@] spotted_actor $RNDM_HOUSE_WEAPON[0@]
                    then                         
                    $VAGINA_FLAG[0@] = 1
                    $VAGINA_TIME[0@] = 0                        
                    gosub @MISSION41_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST    
                    end                                                                                  
                end 
            end
        end               
    end

/////////////////Проверка на бездействие бойца если цель найдена/////////////////////     
     
if
0184:   actor $RNDM_HOUSE_WEAPON[0@] health >= 0 
    then
    if
    $VAGINA_FLAG[0@] == 1
        then
        if
        056D:   actor $VAGINA[0@] defined
            then
            gosub @MISSION41_ATTACK_SYSTEM_FIRING_CHECK
            if and
            19@ == 0
            actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "idle_stance"
            00F2:   actor $RNDM_HOUSE_WEAPON[0@] near_actor $VAGINA[0@] radius 220.0 220.0 sphere 0
            82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon 
                then 
                gosub @MISSION41_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST  
                end
            end
        end
     end 
     
/////////////////Проверка на наличие цели атаки///////////////////// 

if and
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
$VAGINA_FLAG[0@] == 1 
    then
    if
    056D:   actor $VAGINA[0@] defined
        then 
        if or
        8184:   actor $VAGINA[0@] health < 1  
        80F2: not  actor $RNDM_HOUSE_WEAPON[0@] near_actor $VAGINA[0@] radius 230.0 230.0 sphere 0
        $VAGINA_TIME[0@] > 300        
            then 
            $VAGINA_FLAG[0@] = 0
            $VAGINA_TIME[0@] = 0  
            end
        else
        $VAGINA_FLAG[0@] = 0
        $VAGINA_TIME[0@] = 0
        end
    end             

return

/////////////////////////////////////////////////////////////////////////////////

:MISSION41_ATTACK_SYSTEM_TARGET_FIND

25@ = 0
random_int 1@ 77 96

0084: $VAGINA[0@] = $CREATURE[1@] // (int)

if and
056D:   actor $VAGINA[0@] defined
not 1@ == PLAYER_CREATURE_NUMBER
    then      
    if
    00F2:   actor $RNDM_HOUSE_WEAPON[0@] near_actor $VAGINA[0@] radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
        then 
        25@ = 1
        end
    end

return

/////////////////////////////////////////////////////////////////////////////////

:MISSION41_ATTACK_SYSTEM_PLAYER_CHECK

19@ = 0

089F: get_actor $RNDM_HOUSE_WEAPON[0@] pedtype_to 11@      
    
if
11@ == 29
    then
    19@ = 0
    
    if
    MAIN_QUEST4_ATTACK_FLAG == 0
    then
    19@ = 0
    else
    19@ = 1
    end
    
    return
    end


return

/////////////////////////////////////////////////////////////////////////////////   

:MISSION41_ATTACK_SYSTEM_TARGET_CHECK

089F: get_actor $RNDM_HOUSE_WEAPON[0@] pedtype_to 11@ 

if
11@ == 29
    then
    19@ = 0
    089F: get_actor $VAGINA[0@] pedtype_to 12@ 
    
    if or
    12@ == 23
    12@ == 25
    12@ == 27
    12@ == 28
    12@ == 26
    06EE:   actor $VAGINA[0@] in_group PLAYER_GROUP  
    then
    19@ = 1
    else
    19@ = 0
    end
    
    return
    end        

return

///////////////////////////////////////////////////////////////////////////////// 

:MISSION41_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST 

if or
02E0:   actor $RNDM_HOUSE_WEAPON[0@] firing_weapon 
8364: not  actor $RNDM_HOUSE_WEAPON[0@] spotted_actor $VAGINA[0@]
    then
    return
    end

if 
$VAGINA_FLAG[0@] == 1
    then 
    if
    056D:   actor $VAGINA[0@] defined
        then            
        0687: clear_actor $RNDM_HOUSE_WEAPON[0@] task
        wait 100
        if
        056D:   actor $VAGINA[0@] defined 
            then                           
            05E2: AS_actor $RNDM_HOUSE_WEAPON[0@] kill_actor $VAGINA[0@]                               
            return           
            end
        end
    end   
    
return      

/////////////////////////////////////////////////////////////////////////////////        

:MISSION41_ATTACK_SYSTEM_FIRING_CHECK
19@ = 0

if and
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "colt45_fire_2hands"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "python_fire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "shotgun_fire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "buddy_fire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "UZI_fire"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "RIFLE_fire" 
jf @MISSION41_ATTACK_SYSTEM_FIRING_CHECK2  

if and
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "FLAME_fire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "RocketFire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "WEAPON_sniper" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "WEAPON_throw"
jf @MISSION41_ATTACK_SYSTEM_FIRING_CHECK2  
     
if and
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "colt45_crouchfire"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "python_crouchfire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "shotgun_crouchfire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "buddy_crouchfire" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "UZI_crouchfire"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "RIFLE_crouchfire" 
jf @MISSION41_ATTACK_SYSTEM_FIRING_CHECK2

if and
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "colt45_reload"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "python_reload" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "shotgun_reload" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "buddy_reload" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "UZI_reload"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "RIFLE_load" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "gas_cwr"
jf @MISSION41_ATTACK_SYSTEM_FIRING_CHECK2

if and
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "colt45_crouchreload"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "python_crouchreload" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "shotgun_crouchreload" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "buddy_crouchreload" 
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "UZI_crouchreload"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "RIFLE_crouchload" 
jf @MISSION41_ATTACK_SYSTEM_FIRING_CHECK2 
if and
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "GunMove_BWD"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "GunMove_FWD"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "GunMove_L"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "GunMove_R"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "Gun_2_IDLE"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "GUN_BUTT"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "GUN_BUTT_crouch"
not actor.Animation($RNDM_HOUSE_WEAPON[0@]) == "Gun_stand" 
jf @MISSION41_ATTACK_SYSTEM_FIRING_CHECK2
  
return

:MISSION41_ATTACK_SYSTEM_FIRING_CHECK2
19@ = 1
return

:MISSION41_TEAMMATES_ATTACK_PEOPLE1

if
856D: not  actor $RNDM_HOUSE_WEAPON[0@] defined
then
return
end

if or
$SAVESTATUS == 1
$SAVESTATUS_TRUE == 1
then
return
end   

092B: 3@ = group PLAYER_GROUP member 11@

if
07D6:   3@ == COOP_ACTOR // @ == $ (int)
then
return
end

if
056D:  actor 3@ defined
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN

if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN    

if
056D:   actor 3@ defined
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN 

if and 
not actor.Driving(PLAYER_ACTOR)
$RANDOM_CAR_FLAG == 0  
89DE:   actor 3@ entering_car  
80DF:   actor 3@ in_a_car
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if or
0364:   actor 3@ spotted_actor $RNDM_HOUSE_WEAPON[0@]
0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 3@
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if
00F2:   actor 3@ near_actor $RNDM_HOUSE_WEAPON[0@] radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
$HUNTER_ON_PLAYER == 0
$PEOPLE_DONT_ATTACK == 0
$COMMAND_STAY_IN_CAR == 0
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if
not actor.Animation(3@) == "FLOOR_hit"
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if
$HUNTER_ON_GROUP == 0
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if
044B:   actor 3@ on_foot
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if
82E0: not actor 3@ firing_weapon
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "colt45_fire_2hands"
not actor.Animation(3@) == "python_fire" 
not actor.Animation(3@) == "shotgun_fire" 
not actor.Animation(3@) == "buddy_fire" 
not actor.Animation(3@) == "UZI_fire"
not actor.Animation(3@) == "RIFLE_fire" 
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "FLAME_fire" 
not actor.Animation(3@) == "RocketFire" 
not actor.Animation(3@) == "WEAPON_sniper" 
not actor.Animation(3@) == "WEAPON_throw"   
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN       
if and
not actor.Animation(3@) == "colt45_crouchfire"
not actor.Animation(3@) == "python_crouchfire" 
not actor.Animation(3@) == "shotgun_crouchfire" 
not actor.Animation(3@) == "buddy_crouchfire" 
not actor.Animation(3@) == "UZI_crouchfire"
not actor.Animation(3@) == "RIFLE_crouchfire" 
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_reload"
not actor.Animation(3@) == "python_reload" 
not actor.Animation(3@) == "shotgun_reload" 
not actor.Animation(3@) == "buddy_reload" 
not actor.Animation(3@) == "UZI_reload"
not actor.Animation(3@) == "RIFLE_load" 
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_crouchreload"
not actor.Animation(3@) == "python_crouchreload" 
not actor.Animation(3@) == "shotgun_crouchreload" 
not actor.Animation(3@) == "buddy_crouchreload" 
not actor.Animation(3@) == "UZI_crouchreload"
not actor.Animation(3@) == "RIFLE_crouchload" 
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN   
if and
not actor.Animation(3@) == "GunMove_BWD"
not actor.Animation(3@) == "GunMove_FWD"
not actor.Animation(3@) == "GunMove_L"
not actor.Animation(3@) == "GunMove_R"
not actor.Animation(3@) == "Gun_2_IDLE"
not actor.Animation(3@) == "GUN_BUTT"
not actor.Animation(3@) == "GUN_BUTT_crouch"
not actor.Animation(3@) == "Gun_stand" 
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "CLIMB_idle"
not actor.Animation(3@) == "CLIMB_jump"
not actor.Animation(3@) == "CLIMB_jump2fall"
not actor.Animation(3@) == "CLIMB_jump_B"
not actor.Animation(3@) == "CLIMB_Pull"
not actor.Animation(3@) == "CLIMB_Stand"
not actor.Animation(3@) == "CLIMB_Stand_finish" 
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
05C1: AS_actor 3@ speak_from_audio_table $PEOPLE_ZOMBIE_ATTACK_AUDIO_TABLE
if
056D:   actor 3@ defined
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN 
if and
not actor.Driving(PLAYER_ACTOR)
89DE:   actor PLAYER_ACTOR entering_car
80DF:   actor PLAYER_ACTOR in_a_car
80DF:   actor 3@ in_a_car
not actor.Dead(3@)
jf @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
0647: AS_actor 3@ clear_look_task
05B9: AS_actor 3@ stay_idle 50 ms 
wait 50
if
056D:   actor 3@ defined  
then
05E2: AS_actor 3@ kill_actor $RNDM_HOUSE_WEAPON[0@]
end
jump @MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN

:MISSION41_TEAMMATES_ATTACK_PEOPLE_BEGIN
return

:Q4_DEATH_PHRASE

0A96: 3@ = actor $RNDM_HOUSE_WEAPON[0@] struct
3@ += 0x754
0A8D: 1@ = read_memory 3@ size 4 virtual_protect 0
2@ = 0    
0ECE: get_time_char_is_dead $RNDM_HOUSE_WEAPON[0@] store_to 2@
wait 0    
if and
0104:   actor $RNDM_HOUSE_WEAPON[0@] near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0
89A8: not  actor $RNDM_HOUSE_WEAPON[0@] headshoted
$SPECTATING_FLAG == 0
$SCREWHUD_FLAG == 0
$PHRASES_OFF_FLAG == 0
not 1@ == 0x02
2@ > -2 //сука, пиздец 
then

gosub @Q4RANDOM_DIALOG_DEAD_SURV2       

v$2NAME3 = "GAME500"        
09FD: get_gxt_string v$PHRASE3 width_to 3@
0093: 3@ = integer 3@ to_float
3@ *= 8.0
0092: 3@ = float 3@ to_integer
text.ClearAll()
                  
0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1

end    

return

:Q4RANDOM_DIALOG_DEAD_SURV2

for 1@ = 0 to 200

06D1: v$PHRASE1 = "PH1_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 20@ 0 1@
    break
    end

end  

06D1: v$PHRASE1 = "PH1_"
0AD3: v$PHRASE2 = format "%d" 20@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:MAIN_QUEST4_CHANGE_WEAPONS_IN_FERMERS_CAMPS

/////////////////////////////////////////////////////////////////////////

14@ = -1
15@ = 0  

for 1@ = 3 to 14

for 14@ = 0 to 9

if or
1@ == 3
1@ == 4
1@ == 5
1@ == 14
then

random_int 11@ 0 to 4

if
11@ == 0
then
16@ = 89
end
    
if
11@ == 1
then
16@ = 100
end
    
if
11@ == 2
then
16@ = 86
end
    
if
11@ == 3
then
16@ = 105
end        
    
if
14@ == 0 
then
if
$CAMP_WEAPON1[1@] == 34
    then
    $CAMP_WEAPON1[1@] = 97
    else
    008A: $CAMP_WEAPON1[1@] = 16@ // (int)
    end
end  
                
if
14@ == 1 
then
if
$CAMP_WEAPON2[1@] == 34
    then
    $CAMP_WEAPON2[1@] = 97
    else
    008A: $CAMP_WEAPON2[1@] = 16@ // (int)
    end
end  
            
if
14@ == 2 
then
if
$CAMP_WEAPON3[1@] == 34
    then
    $CAMP_WEAPON3[1@] = 97
    else
    008A: $CAMP_WEAPON3[1@] = 16@ // (int)
    end
end    
            
if
14@ == 3 
then
if
$CAMP_WEAPON4[1@] == 34
    then
    $CAMP_WEAPON4[1@] = 97
    else
    008A: $CAMP_WEAPON4[1@] = 16@ // (int)
    end
end  
            
if
14@ == 4 
then
if
$CAMP_WEAPON5[1@] == 34
    then
    $CAMP_WEAPON5[1@] = 97
    else
    008A: $CAMP_WEAPON5[1@] = 16@ // (int)
    end
end  
            
if
14@ == 5 
then
if
$CAMP_WEAPON6[1@] == 34
    then
    $CAMP_WEAPON6[1@] = 97
    else
    008A: $CAMP_WEAPON6[1@] = 16@ // (int)
    end
end  
            
if
14@ == 6 
then
if
$CAMP_WEAPON7[1@] == 34
    then
    $CAMP_WEAPON7[1@] = 97
    else
    008A: $CAMP_WEAPON7[1@] = 16@ // (int)
    end
end  
            
if
14@ == 7 
then
if
$CAMP_WEAPON8[1@] == 34
    then
    $CAMP_WEAPON8[1@] = 97
    else
    008A: $CAMP_WEAPON8[1@] = 16@ // (int)
    end
end  
            
if
14@ == 8 
then
if
$CAMP_WEAPON9[1@] == 34
    then
    $CAMP_WEAPON9[1@] = 97
    else
    008A: $CAMP_WEAPON9[1@] = 16@ // (int)
    end
end  
            
if
14@ == 9 
then
if
$CAMP_WEAPON10[1@] == 34
    then
    $CAMP_WEAPON10[1@] = 97
    else
    008A: $CAMP_WEAPON10[1@] = 16@ // (int)
    end
end  

end  
    
end

end

/////////////////////////////////////////////////////////////////////////

return    