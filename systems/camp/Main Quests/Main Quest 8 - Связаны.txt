//CAMP_NUMBER = 6

const
MAIN_QUEST8_STALKER = $RNDM_HOUSE_WEAPON[31]
MAIN_QUEST8_WHORE = $RNDM_HOUSE_WEAPON[32]
MAIN_QUEST8_GHOST1 = $RNDM_HOUSE_WEAPON[33]
MAIN_QUEST8_GHOST2 = $RNDM_HOUSE_WEAPON[34]
MAIN_QUEST8_GHOST3 = $RNDM_HOUSE_WEAPON[35]
MAIN_QUEST8_GHOST4 = $RNDM_HOUSE_WEAPON[36]
MAIN_QUEST8_GHOST5 = $RNDM_HOUSE_WEAPON[37]
MAIN_QUEST8_GHOST6 = $RNDM_HOUSE_WEAPON[38]
MAIN_QUEST8_GHOST7 = $RNDM_HOUSE_WEAPON[39]
MAIN_QUEST8_GHOST8 = $RNDM_HOUSE_WEAPON[40]
MAIN_QUEST8_GHOST9 = $RNDM_HOUSE_WEAPON[41]
MAIN_QUEST8_GHOST10 = $RNDM_HOUSE_WEAPON[42]
MAIN_QUEST8_GHOST11 = $RNDM_HOUSE_WEAPON[43]
MAIN_QUEST8_GHOST12 = $RNDM_HOUSE_WEAPON[44]
MAIN_QUEST8_GHOST13 = $RNDM_HOUSE_WEAPON[45]
MAIN_QUEST8_GHOST14 = $RNDM_HOUSE_WEAPON[46]
MAIN_QUEST8_GHOST15 = $RNDM_HOUSE_WEAPON[47]
MAIN_QUEST8_GHOST16 = $RNDM_HOUSE_WEAPON[48]
MAIN_QUEST8_GHOST17 = $RNDM_HOUSE_WEAPON[49]
MAIN_QUEST8_GHOST18 = $RNDM_HOUSE_WEAPON[50]
MAIN_QUEST8_CONTROLLER = $RNDM_HOUSE_WEAPON[51]
MAIN_QUEST8_BYE_FUCK_CHECK = 299@
end

:MQ8
thread 'MQ8'
gosub @ASSKOD_MISSII2829_8 
if 
wasted_or_busted 
jf @ASSPROPUSK_KODA2829_8 
gosub @ASSKOD_PROVALA2829_8 

:ASSPROPUSK_KODA2829_8        
gosub @ASSUDALENIE_KODA2829_8

HARDCORE_DANGER_FLAG_SCRIPTED = 0
if
GAME_OVER_FLAG == 1
then
HARDCORE_DANGER_ANTIFLAG_SCRIPTED = 1
end

create_thread @MQ_CHKP

end_thread

:ASSKOD_MISSII2829_8
increment_mission_attempts
0629: change_integer_stat 258 to 41

///////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
DO_NOT_SPAWN_CANNIBALS = 1
ENEX_OFF = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8A.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0

/////////////////////Плавное нарастание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1 

/////////////////////////////////////////////////////////////////////

actor.StorePos(PLAYER_ACTOR,100@,101@,102@)
0084: $QUEST_CAMP_NUMBER = $ENTERED_CAMP_NUMBER // (int)

marker.Disable($CAMP_MARKER[$QUEST_CAMP_NUMBER])
$CAMP_MARKER[$QUEST_CAMP_NUMBER] = Marker.CreateIconWithoutSphere(31, $CAMP_X[$QUEST_CAMP_NUMBER], $CAMP_Y[$QUEST_CAMP_NUMBER], $CAMP_Z[$QUEST_CAMP_NUMBER])

MAIN_QUEST_TEAMMATES_REMOVE_FLAG = 1
create_thread @MQ_GRP

CAMP_DONT_SAY_HELLO_FLAG = 1
CAMP_LEADER_DONT_SAY_BYE_FLAG = 1

032B: 203@ = create_weapon_pickup #NVGOGGLES type 3 ammo 1 at -2660.2178 226.8334 4.3281
03DC: 204@ = create_marker_above_pickup 203@
marker.SetIconSize(204@,2) 

repeat
wait 0
until $PHRASES_OFF_FLAG == 0

$CAMP_SPOTTED_FLAG = 2

//MAIN_QUEST8_COMPLETED_FLAG = 1

fade 0 500
wait 500

00BA: show_text_styled GXT "GAME738" time 5000 style 2

$ONMISSION = 1
$QUEST_TYPE = 19
$NOTSPAWN_ETC = 1
$SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1
$SURVIVORS_DONT_SPAWN_FLAG = 1

v$OBJECTIVE = "GAME739"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GRME739"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

/////////////////////////////////////////
    
while not model.Available(3176)
wait 0
model.Load(3176)
mload
end
    
MAIN_QUEST8_STALKER = actor.Create(26,3176,-2691.6313, 233.6391, 4.3359)
actor.Angle(MAIN_QUEST8_STALKER) = 1.9384
08C6: set_actor MAIN_QUEST8_STALKER stay_on_bike 1    
actor.SetWalkStyle(MAIN_QUEST8_STALKER,"GANG2")
0446: set_actor MAIN_QUEST8_STALKER dismemberment_possible 0
060B: set_actor MAIN_QUEST8_STALKER decision_maker_to $DEC_PEOPLE
actor.Health(MAIN_QUEST8_STALKER) = 2000
actor.WeaponAccuracy(MAIN_QUEST8_STALKER) = 85
0568: set_actor MAIN_QUEST8_STALKER untargetable 1

0781: get_weapon_with_ID 30 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
    
Actor.GiveWeaponAndAmmo(MAIN_QUEST8_STALKER, 30, 99999)

0631: put_actor MAIN_QUEST8_STALKER in_group PLAYER_GROUP

actor.PutAtNoOffset(PLAYER_ACTOR,-2665.3008, 224.9524, 4.253)
actor.Angle(PLAYER_ACTOR) = 178.3865
camera.Restore_WithJumpCut()

fade 1 400
$HUD_REMOVE = 0  
wait 400            
cinema.Radar(1)
$PANEL_OPEN = 0
player.CanMove(PLAYER_CHAR) = true
CAMP_LEADER_DONT_SAY_BYE_FLAG = 0

/////////////////////////////////////////

if and
$CHEATS_ON == 1
0AB0:   key_pressed 49
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 50
then
0AF1: write_int 2 to_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"

if
MQ_CHECKPOINT_FUCKNO == 1
then
0@ = 0
end

if
0@ == 0
then
WEATHER_CYCLE_CHANGE_WEATHER_SMOOTH_ID = 8
WEATHER_CYCLE_CHANGE_WEATHER_SMOOTH_NOW = 1
end

if
0@ >= 1
then
ENEX_OFF = 0
$HUD_REMOVE = 1
fade 0 500
wait 500
pickup.Destroy(203@)
marker.Disable(204@)
jump to @WARP_TO_PUZZLES
end

v$ST_DIALOG[0] = "MQ_444"
v$ST_DIALOG[1] = "MQ_445"
v$ST_DIALOG[2] = "MQ_447"
v$ST_DIALOG[3] = "MQ_448"
v$ST_DIALOG[4] = "MQ_449"
v$ST_DIALOG[5] = "MQ_450"
v$ST_DIALOG[6] = "MQ_451"
v$ST_DIALOG[7] = "MQ_452"
$DIALOG_COUNT = 7
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

300@ = 0

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

if and
$ENTERED_CAMP_NUMBER == -1
MAIN_QUEST8_BYE_FUCK_CHECK == 0
    then
    $CAMP_SPOTTED_FLAG = 0
    MAIN_QUEST8_BYE_FUCK_CHECK = 1
    end

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

if
300@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2660.032 368.505 4.1691 radius 15.0 15.0 2.0
    then
    300@ = 1
    text.ClearAll()
    text.ShowH('MQ_453',2000,1)
    $END_DIALOG_INST = 1
    ENEX_OFF = 0
    pickup.Destroy(203@)
    marker.Disable(204@)
    end
end

//mqskip
if and
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
$CHEAT_TYPE_FLAG == 1
    then
    if
    0ADC:   test_cheat "SKIP"
        then
        $TALK_SIMULATE = 1
        $QUEST_READY_FLAG = 1
        jump to @MQ8_END_JUMP
        end
    end

until $DIALOG_END == 1

///////////////////////////////////////

018A: MISSION_CHECKPOINT = create_checkpoint_at -2660.032 368.7124 4.1691

v$OBJECTIVE = "GAME740"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GRME740"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8A2.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 

/////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

if and
$ENTERED_CAMP_NUMBER == -1
MAIN_QUEST8_BYE_FUCK_CHECK == 0
    then
    $CAMP_SPOTTED_FLAG = 0
    MAIN_QUEST8_BYE_FUCK_CHECK = 1
    end

if
875C: not  marker MISSION_CHECKPOINT enabled
then
018A: MISSION_CHECKPOINT = create_checkpoint_at -2660.032 368.7124 4.1691
end                        

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

if
300@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2660.032 368.505 4.1691 radius 15.0 15.0 2.0
    then
    300@ = 1
    text.ClearAll()
    text.ShowH('MQ_453',2000,1)
    $END_DIALOG_INST = 1
    ENEX_OFF = 0
    pickup.Destroy(203@)
    marker.Disable(204@)
    end
end
 
until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2660.2554 368.7754 990.8202 radius 3.0 3.0 3.0

/////////////////////////////////////////////////////////////////////////////////////

actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-2659.9966, 372.1148, 990.8125)
actor.Angle(MAIN_QUEST8_STALKER) = 179.9032
0860: link_actor MAIN_QUEST8_STALKER to_interior 1

marker.Disable(MISSION_CHECKPOINT)
v$OBJECTIVE = "GAME741"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GRME741"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

018A: MISSION_CHECKPOINT = create_checkpoint_at -2415.4194 727.3297 35.1781

300@ = 0
301@ = 0
302@ = 0
303@ = 0
304@ = 0
305@ = 0
306@ = 0
307@ = 0

06C9: remove_actor MAIN_QUEST8_STALKER from_group

/////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

//Vano fix
actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,0)

if
307@ == 0
then
08E7: disable_entrance_markers 1
07FB: set_interior 'CANALS' access 0
else
08E7: disable_entrance_markers 0
07FB: set_interior 'CANALS' access 1
end

if
875C: not  marker MISSION_CHECKPOINT enabled
then
018A: MISSION_CHECKPOINT = create_checkpoint_at -2415.4194 727.3297 35.1781
end                        

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

if
300@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2660.0293 373.9193 990.6324 radius 5.0 5.0 2.0
    then
    300@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "M_454"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2660.2029 431.4147 989.875 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 180.5604
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
301@ == 0
then
if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2660.2029 431.4147 989.875 radius 5.0 5.0 2.0
00FE:   actor MAIN_QUEST8_STALKER sphere 0 in_sphere -2660.2029 431.4147 989.875 radius 1.5 1.5 2.0
    then
    0@ = actor.Angle(MAIN_QUEST8_STALKER)
    1@ = actor.Angle(MAIN_QUEST8_STALKER)
    0097: make 0@ absolute_float
    0097: make 1@ absolute_float
    if and    
    0@ < 192.0
    1@ > 179.0
        then
        301@ = 1
        $END_DIALOG_INST = 1
        wait 0    
        v$ST_DIALOG[0] = "MQ_454"
        $DIALOG_COUNT = 0
        $DIALOG_NOT_SKIP = 1
        create_thread @DG_SYS2
        
        0615: define_AS_pack_begin 0@
        05D3: AS_actor -1 goto_point -2661.5652 431.5981 989.875 mode 6 time 999999 ms // versionA
        078F: AS_actor -1 climb 1
        05D3: AS_actor -1 goto_point -2663.4006 447.486 991.25 mode 6 time 999999 ms // versionA
        05D3: AS_actor -1 goto_point -2665.7136 449.7612 991.25 mode 6 time 999999 ms // versionA
        05D4: AS_actor -1 rotate_angle 1.8469
        078F: AS_actor -1 climb 1
        05D3: AS_actor -1 goto_point -2665.6812 467.2371 991.8047 mode 6 time 999999 ms // versionA
        05D4: AS_actor -1 rotate_angle 179.6392
        0616: define_AS_pack_end 0@
        0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
        061B: remove_references_to_AS_pack 0@
        else
        if
        0E45: frame_mod 60
            then
            05D4: AS_actor MAIN_QUEST8_STALKER rotate_angle 180.5604
            end
        end    
    end
end

if
302@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2665.6812 467.2371 991.8047 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2665.6736, 454.4549, 991.8047)
    actor.Angle(MAIN_QUEST8_STALKER) = 359.8831
    end
    
    302@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MF_454"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2665.5315 475.9301 991.7969 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2645.3975 487.5305 991.8047 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 119.3624
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
303@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2645.3975 487.5305 991.8047 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2653.9272, 482.7874, 991.8047)
    actor.Angle(MAIN_QUEST8_STALKER) = 300.1436
    end
    
    303@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_455"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2639.3704 490.7907 991.7969 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2639.1079 518.748 991.8047 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 180.8224
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
304@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2639.1079 518.748 991.8047 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2639.0845, 508.8987, 991.8047)
    actor.Angle(MAIN_QUEST8_STALKER) = 0.6105
    end
    
    304@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MF_455"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2639.1064 521.4906 991.8047 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2648.2878 526.467 991.8497 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2648.3333 556.4491 991.8482 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2639.0916 557.0587 991.8047 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2639.2214 603.296 991.7969 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 180.5665
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
305@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2639.2214 603.296 991.7969 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2639.1484, 589.1444, 991.8047)
    actor.Angle(MAIN_QUEST8_STALKER) = 0.1143
    end
    
    305@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_456"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2638.9229 607.2081 991.7969 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2583.2571 639.2729 991.8047 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 118.5643
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
306@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2583.2571 639.2729 991.8047 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2593.2161, 633.6537, 991.8047)
    actor.Angle(MAIN_QUEST8_STALKER) = 300.5199
    end
    
    306@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_457"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2578.2439 642.0794 991.7969 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2448.2471 607.1317 990.8672 mode 6 time 999999 ms // versionA
    078F: AS_actor -1 climb 1
    05D3: AS_actor -1 goto_point -2441.8296 610.3194 992.1741 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2434.688 637.155 990.8672 mode 6 time 999999 ms // versionA
    05BC: AS_actor -1 jump 1   
    05D3: AS_actor -1 goto_point -2413.5581 715.5724 1007.4047 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 163.2516
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
307@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2413.5581 715.5724 1007.4047 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2415.9397, 705.6817, 1007.4047)
    actor.Angle(MAIN_QUEST8_STALKER) = 344.515
    end
    
    307@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_458"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2412.8098 717.9634 1007.4047 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2415.9482 728.8486 1007.4047 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 197.5171
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    07FB: set_interior 'CANALS' access 1
    
    end
end
 
until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2415.4194 727.3297 35.1781 radius 3.0 3.0 3.0

wait 0
0687: clear_actor MAIN_QUEST8_STALKER task

08E7: disable_entrance_markers 1
ENEX_OFF = 1
07FB: set_interior 'CANALS' access 0

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-2420.0991, 729.7873, 35.1786)
actor.Angle(MAIN_QUEST8_STALKER) = 49.3916
0860: link_actor MAIN_QUEST8_STALKER to_interior 0
0792: disembark_instantly_actor MAIN_QUEST8_STALKER

marker.Disable(MISSION_CHECKPOINT)
v$OBJECTIVE = "GAME742"
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

wait 500

$END_DIALOG_INST = 1
wait 0    
v$ST_DIALOG[0] = "MQ_459"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

05D3: AS_actor MAIN_QUEST8_STALKER goto_point -2442.8689 755.3625 35.1719 mode 7 time 15000 ms // versionA
32@ = 0

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

wait 250
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8A.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

if and
02A0:   actor MAIN_QUEST8_STALKER stopped
32@ > 1000
    then
    32@ = 0
    05D3: AS_actor MAIN_QUEST8_STALKER goto_point -2442.8689 755.3625 35.1719 mode 7 time 15000 ms // versionA
    end
    
if
02E0:   actor PLAYER_ACTOR firing_weapon
    then
    28@ += 1
    if
    28@ > 32
        then
        jump to @MAIN_QUEST8_FAILED_POSHUMIM_BLYAD
        end
    end    

until 00EC:   actor MAIN_QUEST8_STALKER sphere 0 near_point -2442.8689 755.3625 35.1719 radius 2.0 2.0

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-2442.811, 763.412, 35.1719)
actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,true)

32@ = 0

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

28@ = 0

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

if
02E0:   actor PLAYER_ACTOR firing_weapon
    then
    28@ += 1
    if
    28@ > 32
        then
        jump to @MAIN_QUEST8_FAILED_POSHUMIM_BLYAD
        end
    end

until 32@ > 60000

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,false)
actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-2442.8398, 754.3349, 35.1719)
actor.Angle(MAIN_QUEST8_STALKER) = 180.7825
0631: put_actor MAIN_QUEST8_STALKER in_group PLAYER_GROUP

08E7: disable_entrance_markers 0
ENEX_OFF = 0
07FB: set_interior 'CANALS' access 1

$END_DIALOG_INST = 1
wait 0    
v$ST_DIALOG[0] = "MQ_460"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

018A: MISSION_CHECKPOINT = create_checkpoint_at -2245.978 722.9789 1038.9406

v$OBJECTIVE = "GAME743"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GRME743"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

/////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

if
875C: not  marker MISSION_CHECKPOINT enabled
then
018A: MISSION_CHECKPOINT = create_checkpoint_at -2245.978 722.9789 1038.9406
end                        

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD
 
until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2245.978 722.9789 1038.9406 radius 3.0 3.0 3.0

/////////////////////////////////////////////////////////////////////////////////////

06C9: remove_actor MAIN_QUEST8_STALKER from_group
actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-2237.145, 723.129, 1038.9363)
actor.Angle(MAIN_QUEST8_STALKER) = 91.2606
0860: link_actor MAIN_QUEST8_STALKER to_interior 1

0615: define_AS_pack_begin 0@
05D3: AS_actor -1 goto_point -2210.9402 723.1494 1029.1328 mode 6 time 999999 ms // versionA
05D4: AS_actor -1 rotate_angle 90.6673
0616: define_AS_pack_end 0@
0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

marker.Disable(MISSION_CHECKPOINT)
v$OBJECTIVE = "GAME744"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GRME744"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

018A: MISSION_CHECKPOINT = create_checkpoint_at -1978.5601 1085.45 55.7329

300@ = 0
301@ = 0
302@ = 0
303@ = 0
304@ = 0
305@ = 0
306@ = 0

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

wait 250
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8A2.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1

/////////////////////////////////////////////////////////////////////////////////////

308@ = 0
309@ = 0
310@ = 0
311@ = 0
312@ = 0

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

//Vano fix
actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,0)

if
307@ == 0
then
08E7: disable_entrance_markers 1
07FB: set_interior 'CANALS' access 0
else
08E7: disable_entrance_markers 0
07FB: set_interior 'CANALS' access 1
end

if
875C: not  marker MISSION_CHECKPOINT enabled
then
018A: MISSION_CHECKPOINT = create_checkpoint_at -1978.5601 1085.45 55.7329
end                        

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

if
308@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2210.9402 723.1494 1029.1328 radius 5.0 5.0 2.0
    then    
    308@ = 1
    $END_DIALOG_INST = 1
    wait 0      
    v$ST_DIALOG[0] = "MQ_461"
    v$ST_DIALOG[1] = "MQ_462"
    v$ST_DIALOG[2] = "MQ_463"
    $DIALOG_COUNT = 2
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2100.1182 723.3629 1028.1953 mode 6 time 999999 ms // versionA
    05BC: AS_actor -1 jump 1
    05D3: AS_actor -1 goto_point -2052.8093 723.4659 1029.1167 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2038.1178 749.6889 1029.1328 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2021.4188 749.5895 1029.1328 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 90.8036
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
309@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2021.4188 749.5895 1029.1328 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2030.8127, 749.7332, 1029.1328)
    actor.Angle(MAIN_QUEST8_STALKER) = 269.7187
    end
    
    309@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_464"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2013.9923 749.5926 1029.1328 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2014.0349 776.5021 1028.1953 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 178.8674
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
310@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2014.0349 776.5021 1028.1953 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2013.9463, 767.7321, 1029.1328)
    actor.Angle(MAIN_QUEST8_STALKER) = 359.5803
    end
    
    310@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_466"
    v$ST_DIALOG[1] = "MF_466"
    v$ST_DIALOG[2] = "MF_467"
    $DIALOG_COUNT = 2
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2014.0616 794.5045 1028.4631 mode 6 time 999999 ms // versionA
    05BC: AS_actor -1 jump 1
    05D3: AS_actor -1 goto_point -2014.0309 820.6583 1029.1328 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2077.4695 930.0526 1029.125 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2077.3101 973.2144 1029.1328 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 180.9866
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
311@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2077.3101 973.2144 1029.1328 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2077.3799, 962.7555, 1029.1328)
    actor.Angle(MAIN_QUEST8_STALKER) = 0.3922
    end
    
    311@ = 1
    $END_DIALOG_INST = 1
    wait 0    
    v$ST_DIALOG[0] = "MQ_467"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2077.2852 1032.5961 1029.1328 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 180.5104
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end

if
312@ == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -2077.2852 1032.5961 1029.1328 radius 5.0 5.0 2.0
    then
    
    if
    82CB: not  actor MAIN_QUEST8_STALKER bounding_sphere_visible
    then
    actor.PutAtNoOffset(MAIN_QUEST8_STALKER, -2077.1672, 1021.3854, 1029.1328)
    actor.Angle(MAIN_QUEST8_STALKER) = 1.1331
    end
    
    312@ = 1
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "MQ_468"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point -2077.2776 1037.1899 1029.1403 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -2029.1486 1085.2821 1029.125 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -1982.4186 1085.2406 1046.5775 mode 6 time 999999 ms // versionA
    05D3: AS_actor -1 goto_point -1979.274 1084.3341 1046.7716 mode 6 time 999999 ms // versionA
    05D4: AS_actor -1 rotate_angle 79.3086
    0616: define_AS_pack_end 0@
    0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    end
end
 
until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -1978.5601 1085.45 55.7329 radius 3.0 3.0 3.0

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-1978.7432, 1088.7161, 55.7187)
actor.Angle(MAIN_QUEST8_STALKER) = 4.4628
0860: link_actor MAIN_QUEST8_STALKER to_interior 0
0792: disembark_instantly_actor MAIN_QUEST8_STALKER

marker.Disable(MISSION_CHECKPOINT)
v$OBJECTIVE = "DUMMY"

wait 500

06C9: remove_actor MAIN_QUEST8_STALKER from_group

0615: define_AS_pack_begin 0@
05D3: AS_actor -1 goto_point -1984.2157 1117.8292 53.1232 mode 6 time 999999 ms // versionA
05D4: AS_actor -1 rotate_angle 89.4236
05D3: AS_actor -1 goto_point -1989.8943 1117.8534 54.4687 mode 4 time 999999 ms // versionA
0616: define_AS_pack_end 0@
0618: assign_actor MAIN_QUEST8_STALKER to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

v$ST_DIALOG[0] = "MQ_469"
v$ST_DIALOG[1] = "MQ_470"
v$ST_DIALOG[2] = "MQ_471"
v$ST_DIALOG[3] = "MQ_472"
v$ST_DIALOG[4] = "MQ_473"
v$ST_DIALOG[5] = "MQ_474"    
$DIALOG_COUNT = 5
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8A.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

32@ = 0
33@ = 0

repeat
wait 0

gosub @QUEST8_LOCK_RAIN

//if and
//02A0:   actor MAIN_QUEST8_STALKER stopped
//33@ > 1000
//    then
//    33@ = 0
//    05D3: AS_actor MAIN_QUEST8_STALKER goto_point -1984.2157 1117.8292 53.1232 mode 7 time 15000 ms // versionA
//    end

if
32@ > 2000
then
$SPEED_05_FLAG = 1
end

until $DIALOG_END == 1
$SPEED_05_FLAG = 0

0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
:WARP_TO_PUZZLES

FP_ACTIVATE_SCRIPTED = 1

$SPEED_09_FLAG = 1
015D: set_gamespeed 0.9

if
06EE:   actor MAIN_QUEST8_STALKER in_group PLAYER_GROUP
then
MAIN_QUEST_MUSIC_FLAG = 1
06C9: remove_actor MAIN_QUEST8_STALKER from_group
v$OBJECTIVE = "DUMMY"
end

//actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-1994.6896, 1117.8888, 53.1826)
//actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,true)
0@ = actor.Angle(MAIN_QUEST8_STALKER)

while not model.Available(3177)
wait 0
model.Load(3177)
mload
end

actor.DestroyInstantly(MAIN_QUEST8_STALKER)    
MAIN_QUEST8_STALKER = actor.Create(26,3177,-1994.6896, 1117.8888, 53.1826)
actor.Angle(MAIN_QUEST8_STALKER) = 0@
actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,true)
08C6: set_actor MAIN_QUEST8_STALKER stay_on_bike 1    
actor.SetWalkStyle(MAIN_QUEST8_STALKER,"GANG2")
0446: set_actor MAIN_QUEST8_STALKER dismemberment_possible 0
060B: set_actor MAIN_QUEST8_STALKER decision_maker_to $DEC_PEOPLE
actor.Health(MAIN_QUEST8_STALKER) = 2000
actor.WeaponAccuracy(MAIN_QUEST8_STALKER) = 85
0568: set_actor MAIN_QUEST8_STALKER untargetable 1

player.CanMove(PLAYER_CHAR,false)
wait 1
05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 999000
05BB: AS_actor MAIN_QUEST8_STALKER fall_down 0 time_on_ground 999000

fade 0 500
$HUD_REMOVE = 1
wait 500

08B1: enable_night_vision 0
09EB: remove_player_goggles PLAYER_CHAR use_anim 0
$CAMP_SPOTTED_FLAG = 0
WEATHER_CYCLE_DONT_CHANGE_FLAG = 0

text.ClearAll()
text.RemoveTextBox()
03D6: remove_styled_text "GAME738"  // Boxville

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
if
not 0@ == 2
then
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8B.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

wait 2000

end

INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1

cinema.Radar(0)

PLAYER_NO_ITEMS_FLAG = 1
04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 5 weapon 500@ ammo 501@ model 502@
04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 2 weapon 503@ ammo 504@ model 505@
$SAVESTATUS = 1
wait 50

0470: 55@ = actor PLAYER_ACTOR current_weapon
PLAYER_DONT_HAVE_BACKPACK = 1
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1

$DRUNK_MODE_FLAG = 1
0A8C: write_memory 0x0C402C6 size 1 value 1 virtual_protect 0
0A8C: write_memory 0x07042A9 size 1 value 64 virtual_protect 0
0A8C: write_memory 0x0704348 size 1 value 64 virtual_protect 0
0AC6: 1@ = label @CFOG_R offset
0AC6: 2@ = label @CFOG_G offset
0AC6: 3@ = label @CFOG_B offset
0A8C: write_memory 1@ size 1 value 255 virtual_protect 0
0A8C: write_memory 2@ size 1 value 0 virtual_protect 0
0A8C: write_memory 3@ size 1 value 0 virtual_protect 0
$FATUGIE_OVER_FLAG = 1
$HUNGER_OVER_FLAG = 1
HARDCORE_DANGER_FLAG_SCRIPTED = 1
09BD: allow_other_threads_to_display_text_boxes 1

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
if
0@ == 2
then
DONT_DO_BURGLARY = 1
04F9: set_sky_color 1 fade 0
jump to @ZOMBIE_SHIT
end

DONT_DO_BURGLARY = 1
select_interior 2
0860: link_actor PLAYER_ACTOR to_interior 2
04F9: set_sky_color 1 fade 0
actor.PutAtNoOffset(PLAYER_ACTOR,447.0281, 1397.9119, 1084.3047)
actor.Angle(PLAYER_ACTOR) = 359.1804
camera.Restore_WithJumpCut()

wait 500
create_thread @REFR_3D
player.CanMove(PLAYER_CHAR,true)

$ACHIV_NUMBER = 9000
FREEMODE_VOICE_START = 9000
FREEMODE_VOICE_END = 9005
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

wait 2000

//0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
//0@ += 0x0041BB8
//0A8C: write_memory 0@ size 4 value 5.0 virtual_protect 0

fade 1 500
$HUD_REMOVE = 0
v$OBJECTIVE = "GAME773"
//0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
//$SOUNDS_VOLUME3 *= 0.5
//Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
//Audiostream.Loop($MENU_SCIFI_SOUND, 0)
//Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
wait 500

random_int 0@ 0 to 5

if
0@ == 0
then
0213: 205@ = create_pickup 1252 type 3 at 453.4094 1400.512 1084.308
end

if
0@ == 1
then
0213: 205@ = create_pickup 1252 type 3 at 446.0717 1412.8643 1084.3047
end

if
0@ == 2
then
0213: 205@ = create_pickup 1252 type 3 at 454.7585 1414.9583 1084.308
end

if
0@ == 3
then
0213: 205@ = create_pickup 1252 type 3 at 438.9555 1408.9435 1084.3047
end

if
0@ == 4
then
0213: 205@ = create_pickup 1252 type 3 at 439.6829 1401.6113 1084.3047
end

206@ = 0

03DC: 207@ = create_marker_above_pickup 205@
marker.SetIconSize(207@,2)    

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

if
206@ == 0
then 
065B: store_pickup 205@ position_to 1@ 2@ 3@

//ключик золотой, в жопу себе вставь... покрути немного для работы тебе надо...
//if
//00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 1@ 2@ 3@ radius 10.0 4.0 4.0
//then
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 155 on_entity 0 at 1@ 2@ 3@ size 1.0 far_clip 500.0 near_clip 0.25 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 1 fade_speed 15.0 only_from_below 0
//end

if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 1@ 2@ 3@ radius 2.0 2.0 2.0
0AB0:   key_pressed 69
    then
    marker.Disable(207@)
    206@ = 1
    v$OBJECTIVE = "GME1577"    
    end
else
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 447.0011 1397.0619 1084.3047 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 447.0011 1397.0619 1084.3047 radius 2.0 2.0 3.0
    then
    break
    end
end

until false

player.CanMove(PLAYER_CHAR,false)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
fade 0 100
$HUD_REMOVE = 1
v$OBJECTIVE = "DUMMY"
wait 100
$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8C.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

select_interior 4
0860: link_actor PLAYER_ACTOR to_interior 4
actor.PutAtNoOffset(PLAYER_ACTOR,-262.5826, 1456.7588, 1084.3672)
actor.Angle(PLAYER_ACTOR) = 90.3873
camera.Restore_WithJumpCut()

wait 500
create_thread @REFR_3D
player.CanMove(PLAYER_CHAR,true)

$ACHIV_NUMBER = 9006
FREEMODE_VOICE_START = 9006
FREEMODE_VOICE_END = 9010
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

wait 2000

fade 1 500
$HUD_REMOVE = 0
v$OBJECTIVE = "GAME774"
//0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
//$SOUNDS_VOLUME3 *= 0.5
//Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
//Audiostream.Loop($MENU_SCIFI_SOUND, 0)
//Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
wait 500

300@ = 0
301@ = 0
302@ = 0
303@ = 0

400@ = object.Create(18129,-274.0137, 1456.6024, 1083.47)
random_float 0@ 0.0 360.0
object.Angle(400@) = 0@
0566: link_object 400@ to_interior 4

401@ = object.Create(18129,-275.2653, 1451.2936, 1083.47)
random_float 0@ 0.0 360.0
object.Angle(401@) = 0@
0566: link_object 401@ to_interior 4

402@ = object.Create(18129,-273.3367, 1447.5299, 1083.47)
random_float 0@ 0.0 360.0
object.Angle(402@) = 0@
0566: link_object 402@ to_interior 4

403@ = object.Create(18129,-268.4688, 1451.4023, 1083.47)
random_float 0@ 0.0 360.0
object.Angle(403@) = 0@
0566: link_object 403@ to_interior 4

404@ = object.Create(18129,-265.9417, 1448.9485, 1083.47)
random_float 0@ 0.0 360.0
object.Angle(404@) = 0@
0566: link_object 404@ to_interior 4

405@ = object.Create(326,-264.5416, 1450.9701, 1084.4443)
object.Angle(405@) = 0.0
0566: link_object 405@ to_interior 4

410@ = marker.CreateAboveObject(400@)
411@ = marker.CreateAboveObject(401@)
412@ = marker.CreateAboveObject(402@)
413@ = marker.CreateAboveObject(403@)
414@ = marker.CreateAboveObject(404@)
018B: set_marker 410@ radar_mode 0
018B: set_marker 411@ radar_mode 0
018B: set_marker 412@ radar_mode 0
018B: set_marker 413@ radar_mode 0
018B: set_marker 414@ radar_mode 0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

if
075C:   marker 410@ enabled
then
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -274.0137 1456.6024 1083.47 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
end

if
075C:   marker 411@ enabled
then
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -275.2653 1451.2936 1083.47 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
end

if
075C:   marker 412@ enabled
then
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -273.3367 1447.5299 1083.47 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
end

if
075C:   marker 413@ enabled
then
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -268.4688 1451.4023 1083.47 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
end

if
075C:   marker 414@ enabled
then
0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -265.9417 1448.9485 1083.47 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
end

if and
0471:   actor PLAYER_ACTOR near_object_in_rectangle 400@ radius 3.0 3.0 sphere 0
02A0:   actor PLAYER_ACTOR stopped
075C:   marker 410@ enabled
0AB0:   key_pressed 69
    then    
    
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "BOMBER" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 6000
    wait 6000
    marker.Disable(410@)
    0750: set_object 400@ visibility 0
    end
    
if and
0471:   actor PLAYER_ACTOR near_object_in_rectangle 401@ radius 3.0 3.0 sphere 0
02A0:   actor PLAYER_ACTOR stopped
075C:   marker 411@ enabled
0AB0:   key_pressed 69
    then
    
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "BOMBER" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 6000
    wait 6000
    marker.Disable(411@)
    0750: set_object 401@ visibility 0
    end
    
if and
0471:   actor PLAYER_ACTOR near_object_in_rectangle 402@ radius 3.0 3.0 sphere 0
02A0:   actor PLAYER_ACTOR stopped
075C:   marker 412@ enabled
0AB0:   key_pressed 69
    then
    
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "BOMBER" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 6000
    wait 6000
    marker.Disable(412@)
    0750: set_object 402@ visibility 0
    end
    
if and
0471:   actor PLAYER_ACTOR near_object_in_rectangle 403@ radius 3.0 3.0 sphere 0
02A0:   actor PLAYER_ACTOR stopped
075C:   marker 413@ enabled
0AB0:   key_pressed 69
    then
    
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "BOMBER" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 6000
    wait 6000
    marker.Disable(413@)
    0750: set_object 403@ visibility 0
    end
    
if and
0471:   actor PLAYER_ACTOR near_object_in_rectangle 404@ radius 3.0 3.0 sphere 0
02A0:   actor PLAYER_ACTOR stopped
075C:   marker 414@ enabled
0AB0:   key_pressed 69
    then
    
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "BOMBER" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 6000
    wait 6000
    marker.Disable(414@)
    0750: set_object 404@ visibility 0
    end
    
if and
875C: not  marker 410@ enabled
875C: not  marker 411@ enabled
875C: not  marker 412@ enabled
875C: not  marker 413@ enabled
875C: not  marker 414@ enabled
    then
    break
    end                    

until false

415@ = marker.CreateAboveObject(405@)
018B: set_marker 415@ radar_mode 0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -264.5416 1450.9701 1084.4443 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0

if and
0471:   actor PLAYER_ACTOR near_object_in_rectangle 405@ radius 3.0 3.0 sphere 0
02A0:   actor PLAYER_ACTOR stopped
075C:   marker 415@ enabled
0AB0:   key_pressed 69
    then
    
    0781: get_weapon_with_ID 15 model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
    
    actor.GiveWeaponAndAmmo(PLAYER_ACTOR,15,1)
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 15    
    marker.Disable(415@)
    0750: set_object 405@ visibility 0
    break
    end

until false

03BC: 100@ = create_sphere_at -279.869 1450.8188 1084.3672 radius 1.0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -279.869 1450.8188 1084.3672 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0

if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point -279.869 1450.8188 radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed 69
    then
    03BD: destroy_sphere 100@
    
    while not animation.Available("GRENADE")
    wait 0
    animation.Load("GRENADE")
    end
    
    0605: actor PLAYER_ACTOR perform_animation "WEAPON_throw" IFP "GRENADE" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
    wait 870
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 0    
    break
    end

until false

03BC: 100@ = create_sphere_at -265.2606 1448.9802 1084.3672 radius 1.0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -265.2606 1448.9802 1084.3672 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0

if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point -265.2606 1448.9802 radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed 69
    then
    03BD: destroy_sphere 100@
    
    while not animation.Available("car_checks")
    wait 0
    animation.Load("car_checks")
    end
    
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "car_checks" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 5000
    wait 5000    
    break
    end

until false

v$OBJECTIVE = "GME1577"

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at -260.5031 1456.7961 1084.3672 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -260.5031 1456.7961 1084.3672 radius 2.0 2.0 3.0

player.CanMove(PLAYER_CHAR,false)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
fade 0 100
$HUD_REMOVE = 1
v$OBJECTIVE = "DUMMY"
wait 100
$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8D.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

select_interior 4
0860: link_actor PLAYER_ACTOR to_interior 4
actor.PutAtNoOffset(PLAYER_ACTOR,459.2364, -88.6517, 999.5547)
actor.Angle(PLAYER_ACTOR) = 92.017
camera.Restore_WithJumpCut()

wait 500
create_thread @REFR_3D
player.CanMove(PLAYER_CHAR,true)

$ACHIV_NUMBER = 9011
FREEMODE_VOICE_START = 9011
FREEMODE_VOICE_END = 9014
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

wait 2000

fade 1 500
$HUD_REMOVE = 0
v$OBJECTIVE = "GAME775"
//0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
//$SOUNDS_VOLUME3 *= 0.5
//Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
//Audiostream.Loop($MENU_SCIFI_SOUND, 0)
//Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
wait 500

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 451.5396 -81.4641 999.5547 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0

if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 451.5396 -81.4641 radius 1.5 1.5
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed 69
    then
    
    while not animation.Available("car_checks")
    wait 0
    animation.Load("car_checks")
    end
    
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "car_checks" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 10000
    wait 10000        
    
    while not animation.Available("FOOD")
    wait 0
    animation.Load("FOOD")
    end
    
    03CF: load_wav 32200 as 1 
    
    while 83D0: not  wav 1 loaded 
    wait 0
    03CF: load_wav 32200 as 1 
    end
    
    0949: link_wav 1 to_actor PLAYER_ACTOR
    03D1: play_wav 1
    
    $SATIETY_LEVEL += 200.0
    $EATING_STATUS = 1
    
    model.Load(2880)
    mload
    
    1@ = Object.Create(2880, 0.0, 0.0, 0.0)
    0792: disembark_instantly_actor PLAYER_ACTOR 
    070A: AS_actor PLAYER_ACTOR attach_to_object 1@ offset 0.0 0.0 0.0 on_bone 6 16 perform_animation "NULL" IFP_file "NULL" time -1
    Animation.PerfromA(PLAYER_ACTOR, "EAT_BURGER", "FOOD", 4.0, 0, 0, 0, 0, -1) 
    wait 5000
    $EATING_STATUS = 0 
    
    while 83D2:   wav 1 ended 
    wait 0
    end
    
    040D: unload_wav 1         
    
    Object.Destroy(1@)
    //model.Destroy(2880)
    
    wait 2000
    
    0687: clear_actor PLAYER_ACTOR task 
    Animation.PerfromA(PLAYER_ACTOR, "EAT_Vomit_P", "food", 4.0, 0, 0, 0, 0, -1)
    
    repeat
    wait 0
    0613: 2@ = actor PLAYER_ACTOR animation "EAT_Vomit_P" time
    until 2@ >= 0.463
    
    0D0B: get_actor PLAYER_ACTOR bone 6 matrix_pointer_to 0@ // IF and SET
    0D0A: store_coords_to 25@ 26@ 27@ from_matrix 0@ with_offsets 0.20 0.30 0.0
    064B: 28@ = create_particle "PUKE" at 25@ 26@ 27@ type 1
    064C: make_particle 28@ visible
                
    while actor.Animation(PLAYER_ACTOR) == "EAT_Vomit_P"
    wait 0                                                                                  
    end
                
    064E: stop_particle 28@
    0650: destroy_particle 28@
    
    04EF: release_animation "FOOD"
        
    break
    end

until false

v$OBJECTIVE = "GME1577"

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 460.5445 -88.5839 999.5547 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
until 00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 460.5445 -88.5839 999.5547 radius 2.0 2.0 3.0

:BOOMBOX_SHIT

player.CanMove(PLAYER_CHAR,false)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
fade 0 100
$HUD_REMOVE = 1
v$OBJECTIVE = "DUMMY"
wait 100
$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8E.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

select_interior 8
0860: link_actor PLAYER_ACTOR to_interior 8
actor.PutAtNoOffset(PLAYER_ACTOR,-42.5516, 1406.5234, 1084.4297)
actor.Angle(PLAYER_ACTOR) = 3.7478
camera.Restore_WithJumpCut()

0459: end_thread_named 'CHA_GSL'

0781: get_weapon_with_ID 9 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,9,1)
01B9: set_actor PLAYER_ACTOR armed_weapon_to 9

wait 500
create_thread @REFR_3D

$ACHIV_NUMBER = 9015
FREEMODE_VOICE_START = 9015
FREEMODE_VOICE_END = 9019
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

wait 2000

300@ = 0
301@ = 0
302@ = 0
303@ = 0
304@ = 0

400@ = object.Create(2229,-36.0093, 1408.9368, 1083.44)
object.Angle(400@) = 79.3789
0566: link_object 400@ to_interior 8
07F7: set_object 400@ destructible 1
09CA: set_object 400@ immunities BP 0 FP 0 EP 0 CP 0 MP 0
071F: set_object 400@ health_to 3000

401@ = object.Create(2229,-42.2589, 1412.0107, 1083.44)
object.Angle(401@) = 176.9685
0566: link_object 401@ to_interior 8

402@ = object.Create(2229,-45.7891, 1412.2399, 1083.44)
object.Angle(402@) = 145.4207
0566: link_object 402@ to_interior 8

403@ = object.Create(2229,-45.9134, 1404.1782, 1083.44)
object.Angle(403@) = 26.0507
0566: link_object 403@ to_interior 8

404@ = object.Create(2229,-49.8894, 1397.4991, 1083.44)
object.Angle(404@) = 359.5424
0566: link_object 404@ to_interior 8

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

430@ = actor.Create(26,#MALE01,-36.0093, 1408.9368, 1083.44)
actor.LockInCurrentPosition(430@,true)
0619: enable_actor 430@ collision_detection 0
0337: set_actor 430@ visibility 0
0860: link_actor 430@ to_interior 8

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

431@ = actor.Create(26,#MALE01,-42.2589, 1412.0107, 1083.44)
actor.LockInCurrentPosition(431@,true)
0619: enable_actor 431@ collision_detection 0
0337: set_actor 431@ visibility 0
0860: link_actor 431@ to_interior 8

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

432@ = actor.Create(26,#MALE01,-45.7891, 1412.2399, 1083.44)
actor.LockInCurrentPosition(432@,true)
0619: enable_actor 432@ collision_detection 0
0337: set_actor 432@ visibility 0
0860: link_actor 432@ to_interior 8

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

433@ = actor.Create(26,#MALE01,-45.9134, 1404.1782, 1083.44)
actor.LockInCurrentPosition(433@,true)
0619: enable_actor 433@ collision_detection 0
0337: set_actor 433@ visibility 0
0860: link_actor 433@ to_interior 8

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

434@ = actor.Create(26,#MALE01,-49.8894, 1397.4991, 1083.44)
actor.LockInCurrentPosition(434@,true)
0619: enable_actor 434@ collision_detection 0
0337: set_actor 434@ visibility 0
0860: link_actor 434@ to_interior 8

440@ = Audiostream.Load3D("AUDIO\SOUNDS\AmandaBawl.mp3")
Audiostream.LinkToActor(440@,430@)
Audiostream.Volume(440@) = $SOUNDS_VOLUME
Audiostream.PerformAction(440@,PLAY)
Audiostream.Loop(440@,1)

wait 500

441@ = Audiostream.Load3D("AUDIO\SOUNDS\AmandaBawl.mp3")
Audiostream.LinkToActor(441@,431@)
Audiostream.Volume(441@) = $SOUNDS_VOLUME
Audiostream.PerformAction(441@,PLAY)
Audiostream.Loop(441@,1)

wait 500

442@ = Audiostream.Load3D("AUDIO\SOUNDS\AmandaBawl.mp3")
Audiostream.LinkToActor(442@,432@)
Audiostream.Volume(442@) = $SOUNDS_VOLUME
Audiostream.PerformAction(442@,PLAY)
Audiostream.Loop(442@,1)

wait 500

443@ = Audiostream.Load3D("AUDIO\SOUNDS\AmandaBawl.mp3")
Audiostream.LinkToActor(443@,433@)
Audiostream.Volume(443@) = $SOUNDS_VOLUME
Audiostream.PerformAction(443@,PLAY)
Audiostream.Loop(443@,1)

wait 500

444@ = Audiostream.Load3D("AUDIO\SOUNDS\AmandaBawl.mp3")
Audiostream.LinkToActor(444@,434@)
Audiostream.Volume(444@) = $SOUNDS_VOLUME
Audiostream.PerformAction(444@,PLAY)
Audiostream.Loop(444@,1)

player.CanMove(PLAYER_CHAR,true)

fade 1 500
$HUD_REMOVE = 0
v$OBJECTIVE = "GAME776"
//0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
//$SOUNDS_VOLUME3 *= 0.5
//Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
//Audiostream.Loop($MENU_SCIFI_SOUND, 0)
//Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
wait 500

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

if
03CA:   object 400@ exists
    then
    01BB: store_object 400@ position_to 1@ 2@ 3@
    0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
    071E: get_object 400@ health_to 0@
    if
    0@ < 5
        then
        01BB: store_object 400@ position_to 1@ 2@ 3@ 
        064B: 0@ = create_particle "blood_heli" at 1@ 2@ 3@ type 1
        064F: remove_references_to_particle 0@
        audiostream.PerformAction(440@,STOP)
        audiostream.Release(440@)
        object.Destroy(400@)
        end
    end
    
if
03CA:   object 401@ exists
    then
    01BB: store_object 401@ position_to 1@ 2@ 3@
    0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
    071E: get_object 401@ health_to 0@
    if
    0@ < 5
        then
        01BB: store_object 401@ position_to 1@ 2@ 3@ 
        064B: 0@ = create_particle "blood_heli" at 1@ 2@ 3@ type 1
        064F: remove_references_to_particle 0@
        audiostream.PerformAction(441@,STOP)
        audiostream.Release(441@)
        object.Destroy(401@)
        end
    end
    
if
03CA:   object 402@ exists
    then
    01BB: store_object 402@ position_to 1@ 2@ 3@
    0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
    071E: get_object 402@ health_to 0@
    if
    0@ < 5
        then
        01BB: store_object 402@ position_to 1@ 2@ 3@ 
        064B: 0@ = create_particle "blood_heli" at 1@ 2@ 3@ type 1
        064F: remove_references_to_particle 0@
        audiostream.PerformAction(442@,STOP)
        audiostream.Release(442@)
        object.Destroy(402@)
        end
    end
    
if
03CA:   object 403@ exists
    then
    01BB: store_object 403@ position_to 1@ 2@ 3@
    0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
    071E: get_object 403@ health_to 0@
    if
    0@ < 5
        then
        01BB: store_object 403@ position_to 1@ 2@ 3@ 
        064B: 0@ = create_particle "blood_heli" at 1@ 2@ 3@ type 1
        064F: remove_references_to_particle 0@
        audiostream.PerformAction(443@,STOP)
        audiostream.Release(443@)
        object.Destroy(403@)
        end
    end
    
if
03CA:   object 404@ exists
    then
    01BB: store_object 404@ position_to 1@ 2@ 3@
    0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0
    071E: get_object 404@ health_to 0@
    if
    0@ < 5
        then
        01BB: store_object 404@ position_to 1@ 2@ 3@ 
        064B: 0@ = create_particle "blood_heli" at 1@ 2@ 3@ type 1
        064F: remove_references_to_particle 0@
        audiostream.PerformAction(444@,STOP)
        audiostream.Release(444@)
        object.Destroy(404@)
        end
    end                
    
if and
83CA: not  object 400@ exists
83CA: not  object 401@ exists
83CA: not  object 402@ exists
83CA: not  object 403@ exists
83CA: not  object 404@ exists
    then
    break
    end    

until false

:DRUNK_SHIT

player.CanMove(PLAYER_CHAR,false)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
fade 0 100
$HUD_REMOVE = 1
v$OBJECTIVE = "DUMMY"
wait 100
$ACHIV_TOTAL_SHOW_OFF_FLAG = 0
create_thread @CHA_GSL

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8E.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

select_interior 2
0860: link_actor PLAYER_ACTOR to_interior 2
actor.PutAtNoOffset(PLAYER_ACTOR,1204.7347, -13.7275, 1000.9219)
actor.Angle(PLAYER_ACTOR) = 0.5593
camera.Restore_WithJumpCut()

01B9: set_actor PLAYER_ACTOR armed_weapon_to 0

wait 500
create_thread @REFR_3D
player.CanMove(PLAYER_CHAR,true)

$ACHIV_NUMBER = 9020
FREEMODE_VOICE_START = 9020
FREEMODE_VOICE_END = 9024
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

while not model.Available(256)
wait 0
model.Load(256)
mload
end
    
MAIN_QUEST8_WHORE = actor.Create(26,256,1207.8341, 1.9344, 1000.9219)
actor.Angle(MAIN_QUEST8_WHORE) = 186.8149
0D10: set_actor MAIN_QUEST8_WHORE alpha 255 // IF and SET
08C6: set_actor MAIN_QUEST8_WHORE stay_on_bike 1    
actor.SetWalkStyle(MAIN_QUEST8_WHORE,"woman")
0446: set_actor MAIN_QUEST8_WHORE dismemberment_possible 0
060B: set_actor MAIN_QUEST8_WHORE decision_maker_to $DEC_PEOPLE
actor.Health(MAIN_QUEST8_WHORE) = 1000
actor.WeaponAccuracy(MAIN_QUEST8_WHORE) = 85
actor.SetImmunities(MAIN_QUEST8_WHORE,1,1,1,1,1)

//0781: get_weapon_with_ID 14 model_to 1@
//
//while not model.Available(1@)
//wait 0
//model.Load(1@)
//mload
//end
//    
//Actor.GiveWeaponAndAmmo(MAIN_QUEST8_WHORE, 14, 1)

wait 2000

fade 1 500
$HUD_REMOVE = 0
v$OBJECTIVE = "GAME777"
//0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
//$SOUNDS_VOLUME3 *= 0.5
//Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
//Audiostream.Loop($MENU_SCIFI_SOUND, 0)
//Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
wait 500

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1207.8341 1.9344 1000.9219 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0

if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 1207.8341 1.9344 1000.9219 radius 2.0 2.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed 69
    then    
    
    0605: actor PLAYER_ACTOR perform_animation "endchat_03" IFP "PED" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
    wait 2330
    
    0@ = 255
    
    while 0@ > 5
    wait 0
    0@ -= 5
    0D10: set_actor MAIN_QUEST8_WHORE alpha 0@ // IF and SET 
    end
            
    actor.DestroyWithFade(MAIN_QUEST8_WHORE)
        
    break
    end

until false

03BC: 100@ = create_sphere_at 1215.8319 -13.3517 1000.9219 radius 1.0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0D54: draw_corona_with_extra_params_texture 0 color 255 255 255 255 on_entity 0 at 1215.8319 -13.3517 1000.9219 size 0.5 far_clip 500.0 near_clip 1.5 flare 0 enable_reflection 0 check_obstacles 1 flash_while_fading 1 fade_speed 15.0 only_from_below 0

if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 1215.8319 -13.3517 radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed 69
    then
    
    03BD: destroy_sphere 100@
    
    while not animation.Available("GANGS")
    wait 0
    animation.Load("GANGS")
    end
    
    28@ = Object.Create(1486, 0.0, 0.0, 0.0)
    070A: AS_actor PLAYER_ACTOR attach_to_object 28@ offset 0.05 0.06 0.05 on_bone 6 16 perform_animation "NULL" IFP_file "NULL" time -1 
    0605: actor PLAYER_ACTOR perform_animation "DRNKBR_PRTL" IFP "GANGS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 5000 
    wait 5000 
    Object.Destroy(28@)
    Object.RemoveReferences(28@)
    
    player.CanMove(PLAYER_CHAR,false)
    wait 1
    05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 999000
                    
    break
    end

until false

fade 0 500
wait 500

:ZOMBIE_SHIT

player.CanMove(PLAYER_CHAR,false)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
fade 0 100
$HUD_REMOVE = 1
v$OBJECTIVE = "DUMMY"
wait 100
$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
if
not 0@ == 2
then

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
    
///////////////////////////////////////////////////////////

end

0AF1: write_int 2 to_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8F.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

select_interior 5
0860: link_actor PLAYER_ACTOR to_interior 5
actor.PutAtNoOffset(PLAYER_ACTOR,318.6601, 1115.5409, 1083.8828)
actor.Angle(PLAYER_ACTOR) = 359.2524
camera.Restore_WithJumpCut()

008B: 122@ = $ALLOW_AMMO_LIMIT // (int)
$ALLOW_AMMO_LIMIT = 0

0781: get_weapon_with_ID 32 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 32, 99999)
01B9: set_actor PLAYER_ACTOR armed_weapon_to 32

wait 500
create_thread @REFR_3D
player.CanMove(PLAYER_CHAR,true)

//0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
//0@ += 0x0041BB8
//0A8C: write_memory 0@ size 4 value 5.0 virtual_protect 0

$ACHIV_NUMBER = 9025
FREEMODE_VOICE_START = 9025
FREEMODE_VOICE_END = 9030
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

gosub @QUEST8_GHOSTS_CREATE

wait 2000

32@ = 0

008B: 200@ = $ZOMBIE_DAMAGE_MIN // (int)
008B: 201@ = $ZOMBIE_DAMAGE_MAX // (int)
$ZOMBIE_DAMAGE_MIN /= 8
$ZOMBIE_DAMAGE_MAX /= 8

fade 1 500
$HUD_REMOVE = 0
v$OBJECTIVE = "GAME778"
//0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
//$SOUNDS_VOLUME3 *= 0.5
//Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
//Audiostream.Loop($MENU_SCIFI_SOUND, 0)
//Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
wait 500

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed 81
then

for 1@ = 33 to 50
05BE: AS_actor $RNDM_HOUSE_WEAPON[1@] die
end

end

if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED

0@ = 1

for 1@ = 33 to 50

if
32@ > 1000
then
32@ = 0

random_int 2@ 33 51
if and
02A0:   actor $RNDM_HOUSE_WEAPON[2@] stopped
not actor.Dead($RNDM_HOUSE_WEAPON[2@])
then
05E2: AS_actor $RNDM_HOUSE_WEAPON[2@] kill_actor PLAYER_ACTOR
end

end

if
not actor.Dead($RNDM_HOUSE_WEAPON[1@])
    then
    0@ = 0
    end
    
end

if
0@ == 1
    then
    break
    end
    
//break    

until false

player.CanMove(PLAYER_CHAR,false)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
fade 0 100
$HUD_REMOVE = 1
v$OBJECTIVE = "DUMMY"
wait 100

008A: $ZOMBIE_DAMAGE_MIN = 200@ // (int)
008A: $ZOMBIE_DAMAGE_MAX = 201@ // (int)
008A: $ALLOW_AMMO_LIMIT = 122@ // (int)

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

$SPEED_09_FLAG = 0
015D: set_gamespeed 1.0

select_interior 0
0860: link_actor PLAYER_ACTOR to_interior 0
04FA: reset_sky_colors_with_fade 0
DONT_DO_BURGLARY = 0
actor.PutAtNoOffset(PLAYER_ACTOR,-1849.0145, 1036.5317, 46.0799)
actor.Angle(PLAYER_ACTOR) = 217.4207
05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 999000
camera.Restore_WithJumpCut()

actor.PutAtNoOffset(MAIN_QUEST8_STALKER,-1845.2223, 1035.8896, 46.0979)
actor.Angle(MAIN_QUEST8_STALKER) = 174.9266 
actor.LockInCurrentPosition(MAIN_QUEST8_STALKER,false)
05BB: AS_actor MAIN_QUEST8_STALKER fall_down 0 time_on_ground 6500

PLAYER_NO_ITEMS_FLAG = 0

0555: remove_weapon 32 from_actor PLAYER_ACTOR
0555: remove_weapon 9 from_actor PLAYER_ACTOR

if
500@ > 0
then

0781: get_weapon_with_ID 500@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,500@,501@)

end

if
503@ > 0
then

0781: get_weapon_with_ID 503@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,503@,504@)

end
                                               
$SAVESTATUS = 0
wait 50

PLAYER_DONT_HAVE_BACKPACK = 0
create_thread @PED_BKP PLAYER_ACTOR 371

01B9: set_actor PLAYER_ACTOR armed_weapon_to 55@
0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0

$DRUNK_MODE_FLAG = 0
0A8C: write_memory 0x07042A9 size 1 value 64 virtual_protect 0
0A8C: write_memory 0x0704348 size 1 value 64 virtual_protect 0
0AC6: 1@ = label @CFOG_R offset
0AC6: 2@ = label @CFOG_G offset
0AC6: 3@ = label @CFOG_B offset
0A8C: write_memory 1@ size 1 value 255 virtual_protect 0
0A8C: write_memory 2@ size 1 value 64 virtual_protect 0
0A8C: write_memory 3@ size 1 value 64 virtual_protect 0
$FATUGIE_OVER_FLAG = 0
$HUNGER_OVER_FLAG = 0
09BD: allow_other_threads_to_display_text_boxes 0
0459: end_thread_named 'FPS_AUT'

0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
0@ += 0x0041BB8
0A8C: write_memory 0@ size 4 value 100.0 virtual_protect 0

wait 500
create_thread @REFR_3D

wait 3000

while not model.Available(12774)
wait 0
model.Load(12774)
mload
end
    
MAIN_QUEST8_CONTROLLER = actor.Create(23,12774,-1845.4366, 999.1677, 71.5961)
actor.Angle(MAIN_QUEST8_CONTROLLER) = 1.6732
08C6: set_actor MAIN_QUEST8_CONTROLLER stay_on_bike 1    
actor.SetWalkStyle(MAIN_QUEST8_CONTROLLER,"GANG2")
0446: set_actor MAIN_QUEST8_CONTROLLER dismemberment_possible 0
060B: set_actor MAIN_QUEST8_CONTROLLER decision_maker_to $DEC_PEOPLE

1@ = 750
if
AUTOLEVELING_ON_FLAG == 1
then
for 0@ = 1 to $PLAYER_LEVEL
1@ += 100
end
end

actor.Health(MAIN_QUEST8_CONTROLLER) = 1@

0781: get_weapon_with_ID 15 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(MAIN_QUEST8_CONTROLLER,151,1)
actor.WeaponAccuracy(MAIN_QUEST8_CONTROLLER) = 85
087E: set_actor MAIN_QUEST8_CONTROLLER weapon_droppable 0
0@ = 0
0D10: set_actor MAIN_QUEST8_CONTROLLER alpha 0@ // IF and SET

while not animation.Available("goggles")
wait 0
animation.Load("goggles")
end

0812: AS_actor MAIN_QUEST8_CONTROLLER perform_animation "goggles_put_on" IFP "goggles" framedelta 4.0 loopA 1 lockX 0 lockY 0 lockF 0 time -1  // versionB
wait 790
0612: set_actor MAIN_QUEST8_CONTROLLER animation "goggles_put_on" paused 0
0612: set_actor MAIN_QUEST8_CONTROLLER animation "goggles_put_on" paused 1
wait 1
0612: set_actor MAIN_QUEST8_CONTROLLER animation "goggles_put_on" paused 0
    
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\Q8\Q8G.wav")
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
/////////////////////Плавное нарастание/////////////////////
    
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1 
    
/////////////////////////////////////////////////////////////////////

cinema.Radar(1)
fade 1 500
$HUD_REMOVE = 0
wait 500

player.CanMove(PLAYER_CHAR,true)

actor.SetImmunities(MAIN_QUEST8_CONTROLLER,1,1,1,1,1)
repeat
wait 0
0@ += 5
0D10: set_actor MAIN_QUEST8_CONTROLLER alpha 0@ // IF and SET 
until 0@ == 255
actor.SetImmunities(MAIN_QUEST8_CONTROLLER,0,0,0,0,0)

repeat
wait 0

if
0184:   actor MAIN_QUEST8_STALKER health > 0
jf @MAIN_QUEST8_FAILED_STALKER_DIED
if
not actor.Dead(PLAYER_ACTOR)
jf @MAIN_QUEST8_FAILED_PLAYER_DIED
if
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
jf @MAIN_QUEST8_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @MAIN_QUEST8_FAILED_LDEAD

0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
0@ += 0x0041BB8
0A8C: write_memory 0@ size 4 value 100.0 virtual_protect 0

if and
0364:   actor MAIN_QUEST8_CONTROLLER spotted_actor PLAYER_ACTOR
0364:   actor MAIN_QUEST8_CONTROLLER spotted_actor MAIN_QUEST8_STALKER
    then
    
    32@ = 0                
    
    v$OBJECTIVE = "GAME747"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)    
    
    MISSION_CHECKPOINT = marker.CreateAboveActor(MAIN_QUEST8_CONTROLLER)
    marker.SetIconSize(MISSION_CHECKPOINT,2)
    
    20@ = 0
    
    repeat
    wait 0
    
    if
    0184:   actor MAIN_QUEST8_STALKER health > 0
    jf @MAIN_QUEST8_FAILED_STALKER_DIED
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST8_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST8_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST8_FAILED_LDEAD
    
    if
    051A:   actor MAIN_QUEST8_CONTROLLER damaged_by_actor PLAYER_ACTOR
        then
        054E: clear_actor MAIN_QUEST8_CONTROLLER damage
        if
        0E4D: random_percent 80
            then
            
            actor.SetImmunities(MAIN_QUEST8_CONTROLLER,1,1,1,1,1)            
            0@ = 255            
            repeat
            wait 0
            0@ -= 25
            if
            0@ == 5
            then
            0@ = 0
            end
            
            0D10: set_actor MAIN_QUEST8_CONTROLLER alpha 0@ // IF and SET
            if
            0184:   actor MAIN_QUEST8_CONTROLLER health > 0
            jf @QUEST8_CONTROLLER_DEAD 
            until 0@ == 0
            actor.SetImmunities(MAIN_QUEST8_CONTROLLER,0,0,0,0,0)
            
            random_int 20@ 0 7                          
            if
            20@ == 0
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1845.4366, 999.1677, 71.5961)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 1.6732
            end
            
            if
            20@ == 1
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1829.7084, 1003.4733, 77.1422)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 23.4969
            end
            
            if
            20@ == 2
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1850.9381, 984.0804, 95.7311)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 1.7186
            end
            
            if
            20@ == 3
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1832.6801, 984.0744, 95.7311)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 0.4062
            end
            
            if
            20@ == 4
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1850.3004, 998.9527, 71.4039)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 348.9719
            end
            
            if
            20@ == 5
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1830.8024, 984.442, 89.0733)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 36.8527
            end
            
            if
            20@ == 6
            then
            actor.PutAtNoOffset(MAIN_QUEST8_CONTROLLER,-1851.8723, 999.8844, 78.8906)
            actor.Angle(MAIN_QUEST8_CONTROLLER) = 322.668
            end
            
            actor.SetImmunities(MAIN_QUEST8_CONTROLLER,1,1,1,1,1)
            0@ = 0            
            repeat
            wait 0
            0@ += 25
            if
            0@ == 250
            then
            0@ = 255
            end
            
            0D10: set_actor MAIN_QUEST8_CONTROLLER alpha 0@ // IF and SET            
            if
            0184:   actor MAIN_QUEST8_CONTROLLER health > 0
            jf @QUEST8_CONTROLLER_DEAD             
            until 0@ == 255
            actor.SetImmunities(MAIN_QUEST8_CONTROLLER,0,0,0,0,0)
                
            end
        end
    
    if
    32@ > 100
        then
        fade 1 1000
        end
    
    if
    32@ > 1000
        then
        fade 0 1000
        32@ = 0
        0851: set_actor PLAYER_ACTOR decrease_health_by 7 affect_armour 0
        camera.Shake(20)
        099C: jiggle_camera type 1 timelimit 900.0 intensity 2.0
        end
    
    until 8184:   actor MAIN_QUEST8_CONTROLLER health < 1
    
    :QUEST8_CONTROLLER_DEAD
    
    fade 1 1000
    0792: disembark_instantly_actor MAIN_QUEST8_CONTROLLER
    05BE: AS_actor MAIN_QUEST8_CONTROLLER die
    
    0EFE: get_loaded_library "GraphicsTweaker.SA.asi" store_to 0@
    0@ += 0x0041BB8
    0AF2: 1@ = get_float_from_ini_file "config.ini" section "GRAPHICS" key "FAR_CLIP"
    0A8C: write_memory 0@ size 4 value 1@ virtual_protect 0 
    0A8C: write_memory 0x0C402C6 size 1 value 0 virtual_protect 0 //CPostEffects__m_bFog 
    0A92: create_custom_thread "script6.dat"  
    
    HARDCORE_DANGER_FLAG_SCRIPTED = 0
    v$OBJECTIVE = "DUMMY"
    
    marker.Disable(MISSION_CHECKPOINT)
    
    0792: disembark_instantly_actor MAIN_QUEST8_STALKER
    0605: actor MAIN_QUEST8_STALKER perform_animation "getup" IFP "PED" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
    
    0631: put_actor MAIN_QUEST8_STALKER in_group PLAYER_GROUP
    
    v$OBJECTIVE = "GME1042"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    32@ = 0
    
    repeat
    wait 0
    
    if
    0184:   actor MAIN_QUEST8_STALKER health > 0
    jf @MAIN_QUEST8_FAILED_STALKER_DIED
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST8_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST8_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST8_FAILED_LDEAD
    
    0889: store_actor MAIN_QUEST8_CONTROLLER center_of_body_position_to 1@ 2@ 3@
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 50.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
    
    if and
    32@ >= 3500
    3@ > 50.0
    then
    break
    end
    
    until 0EE4: locate_char_distance_to_char PLAYER_ACTOR char MAIN_QUEST8_CONTROLLER radius 2.0
    
    v$OBJECTIVE = "DUMMY"
    
    05BF: AS_actor PLAYER_ACTOR look_at_actor MAIN_QUEST8_CONTROLLER 6000 ms
    05BF: AS_actor MAIN_QUEST8_STALKER look_at_actor MAIN_QUEST8_CONTROLLER 6000 ms
    
    v$ST_DIALOG[0] = "MQ_475"
    v$ST_DIALOG[1] = "MQ_476"
    v$ST_DIALOG[2] = "MQ_477"
    v$ST_DIALOG[3] = "MQ_478"
    v$ST_DIALOG[4] = "MQ_479"
    $DIALOG_COUNT = 4
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    repeat
    wait 0
    
    if
    0184:   actor MAIN_QUEST8_STALKER health > 0
    jf @MAIN_QUEST8_FAILED_STALKER_DIED
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @MAIN_QUEST8_FAILED_PLAYER_DIED
    if
    $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
    jf @MAIN_QUEST8_FAILED_AGRO
    if
    803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
    jf @MAIN_QUEST8_FAILED_LDEAD
    
    until $DIALOG_END == 1
    
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    actor.DestroyInstantly(MAIN_QUEST8_STALKER)
    
    break
    
    end

until false

0362: remove_actor PLAYER_ACTOR from_car_and_place_at -2691.3015 237.2512 4.3359
actor.PutAtNoOffset(PLAYER_ACTOR,-2691.3015, 237.2512, 4.3359)
actor.Angle(PLAYER_ACTOR) = 0.3333
camera.Restore_WithJumpCut()
create_thread @REFR_3D

wait 1000

$QUEST_READY_FLAG = 1
create_thread @MNQ_RSP $QUEST_CAMP_NUMBER

:MQ8_END_JUMP

$CAMP_SPOTTED_FLAG = 1
$TALK_SIMULATE = 1
$PHRASES_OFF_FLAG = 1

fade 1 500
$HUD_REMOVE = 1
wait 500

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0
until $QUEST_TYPE == -1

v$OBJECTIVE = "DUMMY"
$ONMISSION = 0
MAIN_QUEST_TEAMMATES_REMOVE_FLAG = 2
create_thread @MQTMBK
CAMP_DONT_SAY_HELLO_FLAG = 0
$NOTSPAWN_ETC = 0
$SPECIAL_INFECTED_NOT_SPAWN_FLAG = 0
$SURVIVORS_DONT_SPAWN_FLAG = 0
INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
    
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
    
wait 1
    
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

MAIN_QUEST_MUSIC_FLAG = 0
DO_NOT_SPAWN_CANNIBALS = 0

jump to @ASSUDALENIE_KODA2829_8  

:ASSKOD_PROVALA2829_8 
mission_cleanup     
return 

:ASSUDALENIE_KODA2829_8    
mission_cleanup    
return

:QUEST8_GHOSTS_CREATE

while not model.Available(17979)
wait 0
model.Load(17979)
mload
end

MAIN_QUEST8_GHOST1 = actor.Create($ZOMBIE_SET_PEDTYPE,17979,323.6233, 1131.4237, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST1) = 128.6224

while not model.Available(17980)
wait 0
model.Load(17980)
mload
end

MAIN_QUEST8_GHOST2 = actor.Create($ZOMBIE_SET_PEDTYPE,17980,324.7631, 1129.6853, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST2) = 128.6224

while not model.Available(17981)
wait 0
model.Load(17981)
mload
end

MAIN_QUEST8_GHOST3 = actor.Create($ZOMBIE_SET_PEDTYPE,17981,321.6058, 1128.8403, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST3) = 195.8532

while not model.Available(17982)
wait 0
model.Load(17982)
mload
end

MAIN_QUEST8_GHOST4 = actor.Create($ZOMBIE_SET_PEDTYPE,17982,326.0183, 1125.7787, 1083.8903)
actor.Angle(MAIN_QUEST8_GHOST4) = 21.9102

while not model.Available(17983)
wait 0
model.Load(17983)
mload
end

MAIN_QUEST8_GHOST5 = actor.Create($ZOMBIE_SET_PEDTYPE,17983,321.5625, 1125.9526, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST5) = 305.6385

while not model.Available(17984)
wait 0
model.Load(17984)
mload
end

MAIN_QUEST8_GHOST6 = actor.Create($ZOMBIE_SET_PEDTYPE,17984,325.3835, 1120.3993, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST6) = 74.4654

while not model.Available(17985)
wait 0
model.Load(17985)
mload
end

MAIN_QUEST8_GHOST7 = actor.Create($ZOMBIE_SET_PEDTYPE,17985,325.0487, 1118.4808, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST7) = 67.0498

while not model.Available(17986)
wait 0
model.Load(17986)
mload
end

MAIN_QUEST8_GHOST8 = actor.Create($ZOMBIE_SET_PEDTYPE,17986,316.136, 1117.3049, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST8) = 299.4258

while not model.Available(17987)
wait 0
model.Load(17987)
mload
end

MAIN_QUEST8_GHOST9 = actor.Create($ZOMBIE_SET_PEDTYPE,17987,316.3461, 1123.9368, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST9) = 190.3615

while not model.Available(17988)
wait 0
model.Load(17988)
mload
end

MAIN_QUEST8_GHOST10 = actor.Create($ZOMBIE_SET_PEDTYPE,17988,319.9921, 1123.6826, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST10) = 170.9151

while not model.Available(17989)
wait 0
model.Load(17989)
mload
end

MAIN_QUEST8_GHOST11 = actor.Create($ZOMBIE_SET_PEDTYPE,17989,326.1496, 1124.6207, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST11) = 110.7074

while not model.Available(17990)
wait 0
model.Load(17990)
mload
end

MAIN_QUEST8_GHOST12 = actor.Create($ZOMBIE_SET_PEDTYPE,17990,328.1971, 1126.0184, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST12) = 214.519

while not model.Available(17991)
wait 0
model.Load(17991)
mload
end

MAIN_QUEST8_GHOST13 = actor.Create($ZOMBIE_SET_PEDTYPE,17991,333.6818, 1125.8311, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST13) = 121.5941

while not model.Available(17992)
wait 0
model.Load(17992)
mload
end

MAIN_QUEST8_GHOST14 = actor.Create($ZOMBIE_SET_PEDTYPE,17992,332.0154, 1119.8119, 1083.8903)
actor.Angle(MAIN_QUEST8_GHOST14) = 17.6971

while not model.Available(17993)
wait 0
model.Load(17993)
mload
end

MAIN_QUEST8_GHOST15 = actor.Create($ZOMBIE_SET_PEDTYPE,17993,328.0501, 1118.8236, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST15) = 307.4902

while not model.Available(17994)
wait 0
model.Load(17994)
mload
end

MAIN_QUEST8_GHOST16 = actor.Create($ZOMBIE_SET_PEDTYPE,17994,309.1762, 1123.5374, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST16) = 245.5491

while not model.Available(17995)
wait 0
model.Load(17995)
mload
end

MAIN_QUEST8_GHOST17 = actor.Create($ZOMBIE_SET_PEDTYPE,17995,306.0825, 1120.0836, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST17) = 303.6534

while not model.Available(17996)
wait 0
model.Load(17996)
mload
end

MAIN_QUEST8_GHOST18 = actor.Create($ZOMBIE_SET_PEDTYPE,17996,305.6242, 1124.1624, 1083.8828)
actor.Angle(MAIN_QUEST8_GHOST18) = 303.6534

for 0@ = 33 to 50
0A09: set_actor $RNDM_HOUSE_WEAPON[0@] muted 1 // versionB
0967: actor $RNDM_HOUSE_WEAPON[0@] move_mouth 99999999 ms    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"zombie1")
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 100
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible $ZOMBIE_HEADSHOT 
060F: set_actor $RNDM_HOUSE_WEAPON[0@] melee_accuracy_to 150.0 
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_ZOMBIE  
07DD: set_actor $RNDM_HOUSE_WEAPON[0@] attack_rate $ZOMBIE_ATTACK_RATE // previously known as temper_to
0856: set_actor $RNDM_HOUSE_WEAPON[0@] enable_crouch 0
07FE: set_actor $RNDM_HOUSE_WEAPON[0@] fighting_style_to 5 moves 6
077A: set_actor $RNDM_HOUSE_WEAPON[0@] acquaintance 4 to_actors_pedtype 0 // see ped.dat
end

return

:MAIN_QUEST8_FAILED_POSHUMIM_BLYAD

$ZOMBIES_HORDE = 1
create_thread @HOR_SND
wait 2000

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
v$FAILED_TEXT = "MSFL119"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST8_FAILED_AGRO

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL5"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST8_FAILED_LDEAD

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL43"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST8_FAILED_CAMERA_WASTED

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL48"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST8_FAILED_STALKER_DIED

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

///////////////////////////////////////////////////////////

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL82"
create_thread @GMV_OVR
mission_cleanup    
return

:MAIN_QUEST8_FAILED_PLAYER_DIED

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

///////////////////////////////////////////////////////////
    
MAIN_QUEST_MUSIC_FLAG = 0

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL80"
create_thread @GMV_OVR

return

:QUEST8_LOCK_RAIN

0D59: 0@ = current_weather
if
0@ == 8
then
WEATHER_CYCLE_DONT_CHANGE_FLAG = 1
end

return