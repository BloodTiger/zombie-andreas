const
//Главные персонажи
OOS_ACT_ENKER = $RNDM_HOUSE_WEAPON[23]
OOS_ACT_ENKER_GROUP = 312@
OOS_ACT_ENKER_GROUP_PROGRESS = 316@
OOS_ACT_FERNANDO_ZAMESTITEL = $RNDM_HOUSE_WEAPON[24]
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP = 313@
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 317@
OOS_ACT_GARNET = $RNDM_HOUSE_WEAPON[25]
OOS_ACT_GARNET_GROUP = 314@
OOS_ACT_GARNET_GROUP_PROGRESS = 318@
OOS_ACT_ARTEMIS = $RNDM_HOUSE_WEAPON[38]
OOS_ACT_DANIEL = $RNDM_HOUSE_WEAPON[39]
ENKER_HEALTH_STATUS_TEXT = $MIKE_CAR
GARNET_HEALTH_STATUS_TEXT = $SHIT_FUCK
FERNANDO_ZAM_HEALTH_STATUS_TEXT = $TIM_HEALTH
ARTEMIS_DANIEL_HEALTH_STATUS_TEXT = $CLEMMY_HEALTH
//Бойцы Норвуда
OOS_ACT_FERMER1 = $RNDM_HOUSE_WEAPON[26]
OOS_ACT_FERMER2 = $RNDM_HOUSE_WEAPON[27]
OOS_ACT_FERMER3 = $RNDM_HOUSE_WEAPON[28]
OOS_ACT_FERMER4 = $RNDM_HOUSE_WEAPON[29]
OOS_ACT_FERMER5 = $RNDM_HOUSE_WEAPON[30]
OOS_ACT_FERMER6 = $RNDM_HOUSE_WEAPON[31]
OOS_ACT_FERMER7 = $RNDM_HOUSE_WEAPON[32]
OOS_ACT_FERMER8 = $RNDM_HOUSE_WEAPON[33]
OOS_ACT_FERMER9 = $RNDM_HOUSE_WEAPON[34]
OOS_ACT_FERMER10 = $RNDM_HOUSE_WEAPON[35]
OOS_ACT_FERMER11 = $RNDM_HOUSE_WEAPON[36]
OOS_ACT_FERMER12 = $RNDM_HOUSE_WEAPON[37]
OOS_ACT_FERMERS_GROUP = 315@
OOS_ACT_FERMERS_GROUP2 = 325@
OOS_ACT_FERMERS_GROUP_PROGRESS = 319@
OOS_ACT_FERMERS_GROUP2_PROGRESS = 326@
OOS_ACT_FERMERS_SURVIVERS_NUM = 322@
//Наши союзники
OOS_ACT_TEAMMATE1 = 200@
OOS_ACT_TEAMMATE2 = 201@
OOS_ACT_TEAMMATE3 = 202@
//Жители лагеря гарнет (5 штук)
OOS_ACT_GARNET_RESIDENT1 = $CAMP_ACTOR[0]
OOS_ACT_GARNET_RESIDENT2 = $CAMP_ACTOR[1]
OOS_ACT_GARNET_RESIDENT3 = $CAMP_ACTOR[2]
OOS_ACT_GARNET_RESIDENT4 = $CAMP_ACTOR[3]
OOS_ACT_GARNET_RESIDENT5 = $CAMP_ACTOR[4]
//Жители лагеря энкера (5 штук)
OOS_ACT_ENKER_RESIDENT1 = $CAMP_ACTOR[5]
OOS_ACT_ENKER_RESIDENT2 = $CAMP_ACTOR[6]
OOS_ACT_ENKER_RESIDENT3 = $CAMP_ACTOR[7]
OOS_ACT_ENKER_RESIDENT4 = $CAMP_ACTOR[8]
OOS_ACT_ENKER_RESIDENT5 = $CAMP_ACTOR[9]
//Бойцы фернандо (5 штук)
OOS_ACT_FERNANDO_FIGTHER1 = $VERSUS_PEOPLE[0]
OOS_ACT_FERNANDO_FIGTHER2 = $VERSUS_PEOPLE[1]
OOS_ACT_FERNANDO_FIGTHER3 = $VERSUS_PEOPLE[2]
OOS_ACT_FERNANDO_FIGTHER4 = $VERSUS_PEOPLE[3]
OOS_ACT_FERNANDO_FIGTHER5 = $VERSUS_PEOPLE[4]
//Транспортные средства
OOS_START_BUS = $SUPPLY_QUEST_TRUCK
OOS_FERMERS_HUNTLEY1 = 309@
OOS_FERMERS_HUNTLEY2 = 310@
OOS_FERMERS_HUNTLEY3 = 311@
OOS_CARGOBOB1 = $SUPPLY_QUEST_TRUCK
OOS_CARGOBOB2 = 333@
OOS_CARGOBOB3 = 334@
OOS_CARGOBOB4 = 335@
OOS_BOAT1 = 336@
OOS_BOAT2 = 337@
OOS_BOAT3 = 338@
OOS_GOOD_END_DFT30 = $SUPPLY_QUEST_TRUCK
//Самый главный хуесос
OOS_ACT_WORZAK = $RNDM_HOUSE_WEAPON[23]
OOS_ACT_WORZAK_PODSOS1 = $RNDM_HOUSE_WEAPON[24]
OOS_ACT_WORZAK_PODSOS2 = $RNDM_HOUSE_WEAPON[25]
OOS_ACT_WORZAK_PODSOS3 = $RNDM_HOUSE_WEAPON[26]
OOS_ACT_SECURITY_MAN = $RNDM_HOUSE_WEAPON[23]   
end

const
//Различные объекты
OOS_ACT_GATES_BOMBED_FLAG = 300@
OOS_ACT_KILLED_BANDITS = 302@
OOS_ACT_BERTON_IMPOSTER_FLAG = 303@
OOS_ACT_BERTON_IMPOSTER_FLAG2 = 356@
OOS_ACT_GATES1_BUNKER_OBJ = 304@
OOS_ACT_GATES2_BUNKER_OBJ = 320@
OOS_ACT_GATES3_BUNKER_OBJ = 321@
OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ = 323@
OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ = 324@
OOS_ACT_CONTAINER_LEFT_HEALTH_STATUS_TEXT = $IREN_FUCK_ACTOR
OOS_ACT_CONTAINER_RIGHT_HEALTH_STATUS_TEXT = $IREN_FUCK_PLAYER
//Флаги фраз
OOS_ACT_PHRASE287_FLAG = 301@
OOS_ACT_PHRASE288_FLAG = 327@
OOS_ACT_PHRASE289_FLAG = 328@
OOS_ACT_PHRASE290_FLAG = 329@
//Говно для атаки
OOS_ACT_PHRASE352_FLAG = 330@
OOS_ACT_PHRASE353_FLAG = 331@
OOS_ACT_PHRASE353B_FLAG = 332@
OOS_ACT_TANKS_KILLED_BEFORE = 339@
OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 340@
OOS_ACT_WORZAK_MAX_HP = 341@ 
OOS_HUNTER_WAIT_SPAWN_MIN_PRE = 342@
OOS_HUNTER_WAIT_SPAWN_MAX_PRE = 343@
OOS_CHARGER_WAIT_SPAWN_MIN_PRE = 344@
OOS_CHARGER_WAIT_SPAWN_MAX_PRE = 345@
OOS_ALPHA_DOOR_MOMENT_FLAG = 346@
OOS_BUNKER_M60_MOMENT_FLAG = 347@
OOS_BUNKER_FLAME_MOMENT_FLAG = 348@
WORZAK_HEAL_AMOUNT_LOW = 349@
WORZAK_HEAL_AMOUNT_NORMAL = 350@
WORZAK_SHIELD_AMOUNT_LOW = 351@
WORZAK_SHIELD_AMOUNT_NORMAL = 352@
OOS_ACT_GUNPOWDER_CAB = 353@
OOS_ACT_GUNPOWDER_TRAILER = 354@
OOS_ACT_GUNPOWDER_EXITED = 355@
OOS_ACT_PLAYER_GNIDA_FLAG = 357@
OOS_ACT_WORZAK_TARGET = 358@ 
OOS_ACT_WORZAK_HEALED_COUNT = 359@  
OOS_ACT_ALLOW_CHARGER_PRE = 360@
OOS_ACT_ALLOW_HUNTER_PRE = 361@
OOS_ACT_ALLOW_TANK_PRE = 362@
OOS_ACT_ALLOW_WITCH_PRE = 363@
OOS_ACT_ENKER_GROUP_TARGET = 364@
OOS_ACT_GARNET_GROUP_TARGET = 365@
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_TARGET = 366@
OOS_ACT_FERNANDO_FERMERS_GROUP_TARGET = 367@
OOS_ACT_FERNANDO_FERMERS_GROUP2_TARGET = 368@
OOS_ACT_FARM_FIGHTERS_COUNT = 369@
OOS_ACT_WORZAK_PODSOS_SLOWMO_RESTORE_COUNT = 3.5
end

:OOS_ACT
thread 'OOS_ACT'
gosub @ASSKOD_MISSII282PIZDA_OOS_ACT 
if 
wasted_or_busted 
jf @ASSPROPUSK_KODA282PIZDA_OOS_ACT 
gosub @ASSKOD_PROVALA282PIZDA_OOS_ACT 

:ASSPROPUSK_KODA282PIZDA_OOS_ACT        
gosub @ASSUDALENIE_KODA282PIZDA_OOS_ACT

HARDCORE_DANGER_FLAG_SCRIPTED = 0
if
GAME_OVER_FLAG == 1
then
HARDCORE_DANGER_ANTIFLAG_SCRIPTED = 1
end

create_thread @MQ_CHKP

end_thread

:ASSKOD_MISSII282PIZDA_OOS_ACT
increment_mission_attempts
0629: change_integer_stat 258 to 108

008B: OOS_ACT_ALLOW_CHARGER_PRE = $ALLOW_CHARGER // (int)
008B: OOS_ACT_ALLOW_HUNTER_PRE = $ALLOW_HUNTER // (int)
008B: OOS_ACT_ALLOW_TANK_PRE = $ALLOW_TANK // (int)
008B: OOS_ACT_ALLOW_WITCH_PRE = $ALLOW_WITCH // (int)
$ALLOW_CHARGER = 1
$ALLOW_HUNTER = 1
$ALLOW_TANK = 1
$ALLOW_WITCH = 1

///////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1 

if and
$CHEATS_ON == 1
0AB0:   key_pressed 49
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 50
then
0AF1: write_int 2 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 51
then
0AF1: write_int 3 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 52
then
0AF1: write_int 4 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
end

if and
$CHEATS_ON == 1
0AB0:  key_pressed 53
then
0AF1: write_int 5 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
end

if and
$CHEATS_ON == 1
0AB0:  key_pressed 54
then
0AF1: write_int 6 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SCR" key "BANKA_COUNT"

if and
0@ > 1
1@ > -1
then

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "BANKA_COUNT"
0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SCR" key "HEAL_COUNT"
0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "SCR" key "BINT_COUNT"
0AF2: MEDS_EFFECTIVETY = get_float_from_ini_file "data\survival.set" section "SCR" key "MEDS_EFFECTIVETY"
008A: $BANKA = 0@ // (int)
008A: $HEAL = 1@ // (int)
008A: $BINT = 2@ // (int)

0AF0: 3@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT2_ID"
0AF0: 4@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT2_AMMO"
if
3@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 3@
then       

0781: get_weapon_with_ID 3@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,3@,1)

end

017B: set_actor PLAYER_ACTOR weapon 3@ ammo_to 4@
end

0AF0: 5@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT3_ID"
0AF0: 6@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT3_AMMO"
if
5@ > 0
then           

if
8491: not  actor PLAYER_ACTOR has_weapon 5@
then       

0781: get_weapon_with_ID 5@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,5@,1)

end
 
017B: set_actor PLAYER_ACTOR weapon 5@ ammo_to 6@
end

0AF0: 7@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT4_ID"
0AF0: 8@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT4_AMMO"
if
7@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 7@
then       

0781: get_weapon_with_ID 7@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,7@,1)

end

017B: set_actor PLAYER_ACTOR weapon 7@ ammo_to 8@
end

0AF0: 9@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT5_ID"
0AF0: 10@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT5_AMMO"
if
9@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 9@
then       

0781: get_weapon_with_ID 9@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,9@,1)

end

017B: set_actor PLAYER_ACTOR weapon 9@ ammo_to 10@
end

0AF0: 11@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT6_ID"
0AF0: 12@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT6_AMMO"
if
11@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 11@
then       

0781: get_weapon_with_ID 11@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,11@,1)

end

017B: set_actor PLAYER_ACTOR weapon 11@ ammo_to 12@
end

0AF0: 13@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT7_ID"
0AF0: 14@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT7_AMMO"
if
13@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 13@
then       

0781: get_weapon_with_ID 13@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,13@,1)

end

017B: set_actor PLAYER_ACTOR weapon 13@ ammo_to 14@
end

0AF0: 15@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT8_ID"
0AF0: 16@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT8_AMMO"
if
15@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 15@
then       

0781: get_weapon_with_ID 15@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,15@,1)

end

017B: set_actor PLAYER_ACTOR weapon 15@ ammo_to 16@
end

0AF0: 17@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT9_ID"
0AF0: 18@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT9_AMMO"
if
17@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 17@
then       

0781: get_weapon_with_ID 17@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,17@,1)

end

017B: set_actor PLAYER_ACTOR weapon 17@ ammo_to 18@
end

0AF0: 19@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT10_ID"
0AF0: 20@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT10_AMMO"
if
19@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 19@
then       

0781: get_weapon_with_ID 19@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,19@,1)

end

017B: set_actor PLAYER_ACTOR weapon 19@ ammo_to 20@
end

0AF0: 21@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT11_ID"
0AF0: 22@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SLOT11_AMMO"
if
21@ > 0
then

if
8491: not  actor PLAYER_ACTOR has_weapon 21@
then       

0781: get_weapon_with_ID 21@ model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(PLAYER_ACTOR,21@,1)

end

017B: set_actor PLAYER_ACTOR weapon 21@ ammo_to 22@
end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV1_BANKA_COUNT"
0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV1_HEAL_COUNT"
0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV1_BINT_COUNT"
008A: $SURVIVOR_BANKA_COUNT[0] = 0@ // (int)
008A: $SURVIVOR_HEAL_COUNT[0] = 1@ // (int)
008A: $SURVIVOR_BINT_COUNT[0] = 2@ // (int)

0AF0: 3@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV2_BANKA_COUNT"
0AF0: 4@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV2_HEAL_COUNT"
0AF0: 5@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV2_BINT_COUNT"
008A: $SURVIVOR_BANKA_COUNT[1] = 3@ // (int)
008A: $SURVIVOR_HEAL_COUNT[1] = 4@ // (int)
008A: $SURVIVOR_BINT_COUNT[1] = 5@ // (int)

0AF0: 6@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV3_BANKA_COUNT"
0AF0: 7@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV3_HEAL_COUNT"
0AF0: 8@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV3_BINT_COUNT"
008A: $SURVIVOR_BANKA_COUNT[2] = 6@ // (int)
008A: $SURVIVOR_HEAL_COUNT[2] = 7@ // (int)
008A: $SURVIVOR_BINT_COUNT[2] = 8@ // (int)

0AF0: 9@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV4_BANKA_COUNT"
0AF0: 10@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV4_HEAL_COUNT"
0AF0: 11@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV4_BINT_COUNT"
008A: $SURVIVOR_BANKA_COUNT[3] = 9@ // (int)
008A: $SURVIVOR_HEAL_COUNT[3] = 10@ // (int)
008A: $SURVIVOR_BINT_COUNT[3] = 11@ // (int)

0AF0: 12@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV5_BANKA_COUNT"
0AF0: 13@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV5_BINT_COUNT"
0AF0: 14@ = get_int_from_ini_file "data\survival.set" section "SCR" key "SURV5_HEAL_COUNT"
008A: $SURVIVOR_BANKA_COUNT[4] = 12@ // (int)
008A: $SURVIVOR_HEAL_COUNT[4] = 13@ // (int)
008A: $SURVIVOR_BINT_COUNT[4] = 14@ // (int)

end

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
  
if
0@ == 0
then

$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS2B.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

end

actor.StorePos(PLAYER_ACTOR,100@,101@,102@)
0084: $QUEST_CAMP_NUMBER = $ENTERED_CAMP_NUMBER // (int)

//MAIN_QUEST_TEAMMATES_REMOVE_FLAG = 1
CAMP_DONT_SAY_HELLO_FLAG = 1
CAMP_LEADER_DONT_SAY_BYE_FLAG = 1
PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
$PHRASES_OFF_FLAG = 1
//08A8: set_markers_to_long_distance 1

repeat
wait 0
until $PHRASES_OFF_FLAG == 0

fade 0 500
wait 500

$SAVESTATUS = 1

for 1@ = 0 to 2

$CAMP_DEAD_FLAG[1@] = 1
marker.Disable($CAMP_MARKER[1@])
$CAMP_MARKER[1@] = 0
0AD3: v$DYING_TEST = format "CAMP%d" 1@
0AF1: write_int 1 to_ini_file "debug\DYING_SIMULATE.ini" section v$DYING_TEST key "CAMP_DED_BECAUSE_NO_MEMBERS_LEFT"
0AF1: write_int $CAMP_ACTOR_TOTAL[1@] to_ini_file "debug\DYING_SIMULATE.ini" section v$DYING_TEST key "CAMP_TOTAL_MEMBERS_HAD"
0AF1: write_int 4@ to_ini_file "debug\DYING_SIMULATE.ini" section v$DYING_TEST key "CAMP_DED_MEMBERS"
gosub @CAMP_ZONE_CHECK2_DY
0879: enable_gang_wars 0
076C: set_zone v$SFUCK gang 4 density_to 0
076C: set_zone v$SFUCK gang 5 density_to 0
0879: enable_gang_wars 1
gosub @TRADER_DY_IN_CAMP_CHECK
    
end

//00BA: show_text_styled GXT "GME1334" time 5000 style 2

/////////////////////////////////////////

:CAR_CREATE_START_BUS
if
model.Available(#COACH)
then
    
OOS_START_BUS = Car.Create(#COACH, 1986.5397, -1785.113, 13.9277)
Car.Angle(OOS_START_BUS) = 90.025
car.SetImmunities(OOS_START_BUS,1,1,1,1,1)

0A97: 11@ = car OOS_START_BUS struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_START_BUS struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_START_BUS struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_START_BUS struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
0A97: 11@ = car OOS_START_BUS struct 
11@ += 16 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
08BD: set 12@ bit 6 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 6
    
if
model.Available(#COACH)
then
//model.Destroy(#COACH)
end
    
else
model.Load(#COACH)
mload
wait 0
jump to @CAR_CREATE_START_BUS
end

0EB4: set_car_coordinates_simple OOS_START_BUS position 1986.5397 -1785.113 13.9277
0840: link_car OOS_START_BUS to_interior 0
car.LockInCurrentPosition(OOS_START_BUS,true)

actor.PutAtNoOffset(PLAYER_ACTOR,2016.7065, -1784.6726, 13.5537)
actor.Angle(PLAYER_ACTOR) = 89.8185
camera.Restore_WithJumpCut()
create_thread @REFR_3D

repeat
wait 0
until $PHRASES_OFF_FLAG == 0

$ONMISSION = 1
RANDOM_QUEST_CANCEL_FLAG = 0
$QUEST_TYPE = 9991

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 1
    then
    072A: put_actor PLAYER_ACTOR into_car OOS_START_BUS driverseat
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE1
    end

fade 1 400
$HUD_REMOVE = 0  
wait 400            
cinema.Radar(1)
$PANEL_OPEN = 0
player.CanMove(PLAYER_CHAR) = true

/////////////////////////////////////////

if
075C:   marker MISSION_MARKER enabled
then
marker.Disable(MISSION_MARKER)
end

marker.CreateAboveCar(MISSION_MARKER,OOS_START_BUS)
07E0: set_marker MISSION_MARKER type_to 1

v$OBJECTIVE = "GME1339"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1339"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
072A: put_actor PLAYER_ACTOR into_car OOS_START_BUS driverseat
break
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
 
until actor.InCar(PLAYER_ACTOR,OOS_START_BUS)

v$OBJECTIVE = "DUMMY"
marker.Disable(MISSION_MARKER)

:OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE1

player.CanMove(PLAYER_CHAR,false)

fade 0 500
wait 500

CUSTOM_MODE_NO_TEAMMATES_DEATHS = 1

car.LockInCurrentPosition(OOS_START_BUS,false)
car.PutAt(OOS_START_BUS,1522.5616, -423.5685, 35.5713)
car.Angle(OOS_START_BUS) = 76.0
create_thread @REFR_3D  

repeat
wait 0
until 8E93: not is_car_really_in_air OOS_START_BUS

wait 250
car.LockInCurrentPosition(OOS_START_BUS,true)

0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1522.0424 -428.5799 33.7007
actor.PutAtNoOffset(PLAYER_ACTOR,1522.0424 -428.5799 33.7007)
actor.Angle(PLAYER_ACTOR) = 88.3235
camera.Restore_WithJumpCut()
create_thread @REFR_3D
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
COOP_TP_TEAMMATES_FLAG = 1
//wait 2000
  
gosub @OOS_ACT_CREATE_INBUS_LEADERS

if
OOS_FARMERS_WITH_PLAYER == 1
then

OOS_ACT_FARM_FIGHTERS_COUNT = 1
if
MAIN_QUEST5_COMPLETED_FLAG == 1
then
OOS_ACT_FARM_FIGHTERS_COUNT += 1
end

if
MAIN_QUEST6_COMPLETED_FLAG == 1
then
OOS_ACT_FARM_FIGHTERS_COUNT += 1
end

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER1 = actor.Create(26,FERMER1_SKIN_ID,1507.0388, -433.7365, 34.4808) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER1 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER1) = 250.0

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER2 = actor.Create(26,FERMER2_SKIN_ID,1509.7316, -428.1849, 33.8213) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER2 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER2) = 250.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER3 = actor.Create(26,FERMER3_SKIN_ID,1504.7488, -426.3229, 33.8714) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER3 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER3) = 250.0

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER4 = actor.Create(26,FERMER4_SKIN_ID,1503.5396, -422.075, 33.7812) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER4 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER4) = 250.0

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER5 = actor.Create(26,FERMER1_SKIN_ID,1505.3381, -420.1466, 33.6994) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER5 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER5) = 250.0

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER6 = actor.Create(26,FERMER2_SKIN_ID,1504.8579, -413.4479, 34.5233) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER6 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER6) = 250.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER7 = actor.Create(26,FERMER3_SKIN_ID,1500.9927, -416.6652, 33.8306) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER7 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER7) = 250.0

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER8 = actor.Create(26,FERMER4_SKIN_ID,1496.42, -420.0403, 34.1388) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER8 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER8) = 250.0

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER9 = actor.Create(26,FERMER1_SKIN_ID,1495.1101, -425.5287, 34.2933) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER9 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER9) = 250.0

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER10 = actor.Create(26,FERMER2_SKIN_ID,1492.6865, -430.086, 34.492) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER10 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER10) = 250.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER11 = actor.Create(26,FERMER3_SKIN_ID,1514.1775, -419.1937, 33.5365) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER11 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER11) = 250.0

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if and
BERTON_STARTED_MEETED_FLAG == -1
0@ < 3
then

OOS_ACT_BERTON_IMPOSTER_FLAG = 1

while not model.Available(14731)
wait 0
model.Load(14731)
mload
end

OOS_ACT_FERMER12 = actor.Create(26,14731,1528.7319, -425.6071, 33.8221) //imposter moment    
0D10: set_actor OOS_ACT_FERMER12 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER12) = 163.8545

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ == 0
then
0337: set_actor OOS_ACT_FERMER12 visibility 0
0619: enable_actor OOS_ACT_FERMER12 collision_detection 0
actor.LockInCurrentPosition(OOS_ACT_FERMER12,true)
end

else

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER12 = actor.Create(26,FERMER4_SKIN_ID,1502.3843, -393.0372, 44.4548) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER12 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER12) = 250.0

end

for 0@ = 26 to 37

///stats

08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 1000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95

if
82F2: not  actor $RNDM_HOUSE_WEAPON[0@] model == 14731
then
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 2 1 3 1
else
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 0 0 0 0 0 1
end

create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]

///wep

random_int 1@ 0 4
if
1@ == 0
then
1@ = 89
end

if
1@ == 1
then
1@ = 88
end

if
1@ == 2
then
1@ = 95
end

if
1@ == 3
then
1@ = 101
end

0085: 2@ = 1@ // (int)

0781: get_weapon_with_ID 1@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],2@,99999)

///wep

end 

:CAR_CREATE_FERMER_HUNTLEY1
if
model.Available(15424)
then
    
OOS_FERMERS_HUNTLEY1 = Car.Create(15424, 1507.1206, -419.2315, 33.621)
Car.Angle(OOS_FERMERS_HUNTLEY1) = 82.0
car.SetImmunities(OOS_FERMERS_HUNTLEY1,1,1,1,1,1)
04E1: open_and_freeze_car_trunk OOS_FERMERS_HUNTLEY1
0840: link_car OOS_FERMERS_HUNTLEY1 to_interior 0
car.LockInCurrentPosition(OOS_FERMERS_HUNTLEY1,true)

0A97: 11@ = car OOS_FERMERS_HUNTLEY1 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_FERMERS_HUNTLEY1 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_FERMERS_HUNTLEY1 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_FERMERS_HUNTLEY1 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
    
if
model.Available(15424)
then
//model.Destroy(15424)
end
    
else
model.Load(15424)
mload
wait 0
jump to @CAR_CREATE_FERMER_HUNTLEY1
end

:CAR_CREATE_FERMER_HUNTLEY2
if
model.Available(15424)
then
    
OOS_FERMERS_HUNTLEY2 = Car.Create(15424, 1505.8937, -424.9409, 33.7898)
Car.Angle(OOS_FERMERS_HUNTLEY2) = 83.0
car.SetImmunities(OOS_FERMERS_HUNTLEY2,1,1,1,1,1)
04E1: open_and_freeze_car_trunk OOS_FERMERS_HUNTLEY2
0840: link_car OOS_FERMERS_HUNTLEY2 to_interior 0
car.LockInCurrentPosition(OOS_FERMERS_HUNTLEY2,true)

0A97: 11@ = car OOS_FERMERS_HUNTLEY2 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_FERMERS_HUNTLEY2 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_FERMERS_HUNTLEY2 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_FERMERS_HUNTLEY2 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
    
if
model.Available(15424)
then
//model.Destroy(15424)
end
    
else
model.Load(15424)
mload
wait 0
jump to @CAR_CREATE_FERMER_HUNTLEY2
end

:CAR_CREATE_FERMER_HUNTLEY3
if
model.Available(15424)
then
    
OOS_FERMERS_HUNTLEY3 = Car.Create(15424, 1504.7722, -429.9096, 33.9346)
Car.Angle(OOS_FERMERS_HUNTLEY3) = 78.0
car.SetImmunities(OOS_FERMERS_HUNTLEY3,1,1,1,1,1)
04E1: open_and_freeze_car_trunk OOS_FERMERS_HUNTLEY3
0840: link_car OOS_FERMERS_HUNTLEY3 to_interior 0
car.LockInCurrentPosition(OOS_FERMERS_HUNTLEY3,true)

0A97: 11@ = car OOS_FERMERS_HUNTLEY3 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_FERMERS_HUNTLEY3 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_FERMERS_HUNTLEY3 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_FERMERS_HUNTLEY3 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
    
if
model.Available(15424)
then
//model.Destroy(15424)
end
    
else
model.Load(15424)
mload
wait 0
jump to @CAR_CREATE_FERMER_HUNTLEY3
end

032B: 0@ = create_weapon_pickup #SCAR type 3 ammo 200 at 1507.9562 -430.2204 33.9017
032B: 0@ = create_weapon_pickup #P90 type 3 ammo 180 at 1509.1743 -424.8339 33.7471
032B: 0@ = create_weapon_pickup #BOLT308 type 3 ammo 40 at 1510.4856 -419.1699 33.5927

else

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if and
BERTON_STARTED_MEETED_FLAG == -1
0@ < 3
    then
    
    OOS_ACT_BERTON_IMPOSTER_FLAG = 1
    
    while not model.Available(14731)
    wait 0
    model.Load(14731)
    mload
    end
    
    OOS_ACT_FERMER12 = actor.Create(26,14731,1528.7319, -425.6071, 33.8221) //imposter moment    
    0D10: set_actor OOS_ACT_FERMER12 alpha 255 // IF and SET
    actor.Angle(OOS_ACT_FERMER12) = 163.8545
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
    if
    0@ == 0
    then
    0337: set_actor OOS_ACT_FERMER12 visibility 0
    0619: enable_actor OOS_ACT_FERMER12 collision_detection 0
    actor.LockInCurrentPosition(OOS_ACT_FERMER12,true)
    end        
    
    08C6: set_actor OOS_ACT_FERMER12 stay_on_bike 1    
    actor.SetWalkStyle(OOS_ACT_FERMER12,"GANG2")
    0446: set_actor OOS_ACT_FERMER12 dismemberment_possible 0
    060B: set_actor OOS_ACT_FERMER12 decision_maker_to $DEC_PEOPLE
    actor.Health(OOS_ACT_FERMER12) = 1000
    actor.WeaponAccuracy(OOS_ACT_FERMER12) = 95
    create_thread @PED_BKP OOS_ACT_FERMER12 371 0 0 0 0 0 0 0 0 1
    create_thread @ANT_PRE OOS_ACT_FERMER12
    
    end

end

if
OOS_ACT_FARM_FIGHTERS_COUNT == 1
    then
    
    for 0@ = 29 to 32
    0337: set_actor $RNDM_HOUSE_WEAPON[0@] visibility 0
    0619: enable_actor $RNDM_HOUSE_WEAPON[0@] collision_detection 0
    actor.PutAtNoOffset($RNDM_HOUSE_WEAPON[0@],2800.0,2800.0,0.0,0.0)
    actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[0@],true)
    05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die  
    end
    
    for 0@ = 36 to 37
    
    if and
    0@ == 37
    OOS_ACT_BERTON_IMPOSTER_FLAG == 1
    then
    //ass
    else
    0337: set_actor $RNDM_HOUSE_WEAPON[0@] visibility 0
    0619: enable_actor $RNDM_HOUSE_WEAPON[0@] collision_detection 0
    actor.PutAtNoOffset($RNDM_HOUSE_WEAPON[0@],2800.0,2800.0,0.0,0.0)
    actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[0@],true)
    05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die
    end
      
    end
    
    else
    if
    OOS_ACT_FARM_FIGHTERS_COUNT == 2
        then
        0337: set_actor OOS_ACT_FERMER4 visibility 0
        0619: enable_actor OOS_ACT_FERMER4 collision_detection 0
        actor.PutAtNoOffset(OOS_ACT_FERMER4,2800.0,2800.0,0.0,0.0)
        actor.LockInCurrentPosition(OOS_ACT_FERMER4,true)
        05BE: AS_actor OOS_ACT_FERMER4 die
        
        0337: set_actor OOS_ACT_FERMER6 visibility 0
        0619: enable_actor OOS_ACT_FERMER6 collision_detection 0
        actor.PutAtNoOffset(OOS_ACT_FERMER6,2800.0,2800.0,0.0,0.0)
        actor.LockInCurrentPosition(OOS_ACT_FERMER6,true)
        05BE: AS_actor OOS_ACT_FERMER6 die
        
        if
        OOS_ACT_BERTON_IMPOSTER_FLAG == 0
        then
        0337: set_actor OOS_ACT_FERMER12 visibility 0
        0619: enable_actor OOS_ACT_FERMER12 collision_detection 0
        actor.PutAtNoOffset(OOS_ACT_FERMER12,2800.0,2800.0,0.0,0.0)
        actor.LockInCurrentPosition(OOS_ACT_FERMER12,true)
        05BE: AS_actor OOS_ACT_FERMER12 die 
        end
        
        end
    end

0615: define_AS_pack_begin 0@
0633: AS_actor -1 exit_car 
05D3: AS_actor -1 goto_point 1513.2711 -424.2388 33.6611 mode 7 time 50000 ms // versionA
05D4: AS_actor -1 rotate_angle 255.4136
05B9: AS_actor -1 stay_idle 999999 ms
0638: AS_actor -1 stay_put 1
0616: define_AS_pack_end 0@
0618: assign_actor OOS_ACT_ENKER to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0615: define_AS_pack_begin 0@
0633: AS_actor -1 exit_car 
05D3: AS_actor -1 goto_point 1512.887 -425.6803 33.696 mode 7 time 50000 ms // versionA
05D4: AS_actor -1 rotate_angle 255.4853
05B9: AS_actor -1 stay_idle 999999 ms
0638: AS_actor -1 stay_put 1
0616: define_AS_pack_end 0@
0618: assign_actor OOS_ACT_GARNET to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0615: define_AS_pack_begin 0@
0633: AS_actor -1 exit_car
05D3: AS_actor -1 goto_point 1512.635 -427.0541 33.7358 mode 7 time 50000 ms // versionA
05D4: AS_actor -1 rotate_angle 262.1434
05B9: AS_actor -1 stay_idle 999999 ms
0638: AS_actor -1 stay_put 1
0616: define_AS_pack_end 0@
0618: assign_actor OOS_ACT_FERNANDO_ZAMESTITEL to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0631: put_actor OOS_ACT_ARTEMIS in_group OOS_ACT_GARNET_GROUP
0631: put_actor OOS_ACT_DANIEL in_group OOS_ACT_GARNET_GROUP
0850: AS_actor OOS_ACT_ARTEMIS follow_actor OOS_ACT_GARNET
0850: AS_actor OOS_ACT_DANIEL follow_actor OOS_ACT_GARNET

0615: define_AS_pack_begin 0@
0633: AS_actor -1 exit_car  
05D3: AS_actor -1 goto_point 1513.6373 -422.839 33.6322 mode 7 time 50000 ms // versionA
05D4: AS_actor -1 rotate_angle 271.1915
05B9: AS_actor -1 stay_idle 999999 ms
0638: AS_actor -1 stay_put 1
0616: define_AS_pack_end 0@
0618: assign_actor OOS_ACT_ARTEMIS to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0615: define_AS_pack_begin 0@
0633: AS_actor -1 exit_car 
05D3: AS_actor -1 goto_point 1513.7207 -421.5226 33.6098 mode 7 time 50000 ms // versionA
05D4: AS_actor -1 rotate_angle 281.5218
05B9: AS_actor -1 stay_idle 999999 ms
0638: AS_actor -1 stay_put 1
0616: define_AS_pack_end 0@
0618: assign_actor OOS_ACT_DANIEL to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 1
    then
    0362: remove_actor OOS_ACT_ENKER from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_GARNET from_car_and_place_at 1512.887 -425.6803 33.696
    0362: remove_actor OOS_ACT_FERNANDO_ZAMESTITEL from_car_and_place_at 1512.635 -427.0541 33.7358
    0362: remove_actor OOS_ACT_ARTEMIS from_car_and_place_at 1512.3684 -429.0648 33.7865
    0362: remove_actor OOS_ACT_DANIEL from_car_and_place_at 1512.5884 -431.3708 33.8246
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE2
    else
    wait 2000
    end

v$OBJECTIVE = "GME1341"
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

player.CanMove(PLAYER_CHAR,true)

fade 1 500
$HUD_REMOVE = 0
wait 500

repeat
wait 0

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0362: remove_actor OOS_ACT_ENKER from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_GARNET from_car_and_place_at 1512.887 -425.6803 33.696
0362: remove_actor OOS_ACT_FERNANDO_ZAMESTITEL from_car_and_place_at 1512.635 -427.0541 33.7358
0362: remove_actor OOS_ACT_ARTEMIS from_car_and_place_at 1512.3684 -429.0648 33.7865
0362: remove_actor OOS_ACT_DANIEL from_car_and_place_at 1512.5884 -431.3708 33.8246
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1511.8928 -424.6767 33.6929 radius 130.0
jf @OOS_ACT_FAILED_WALK


if and
not actor.InCar(OOS_ACT_ENKER,OOS_START_BUS)
not actor.InCar(OOS_ACT_GARNET,OOS_START_BUS)
not actor.InCar(OOS_ACT_FERNANDO_ZAMESTITEL,OOS_START_BUS)
not actor.InCar(OOS_ACT_ARTEMIS,OOS_START_BUS)
not actor.InCar(OOS_ACT_DANIEL,OOS_START_BUS)
    then
    break
    end
 
until false

:OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE2

062F: OOS_ACT_ENKER_GROUP = create_group_type 0
0630: put_actor OOS_ACT_ENKER in_group OOS_ACT_ENKER_GROUP as_leader
07B3: set_group OOS_ACT_ENKER_GROUP give_command 2

062F: OOS_ACT_GARNET_GROUP = create_group_type 0
0630: put_actor OOS_ACT_GARNET in_group OOS_ACT_GARNET_GROUP as_leader
07B3: set_group OOS_ACT_GARNET_GROUP give_command 2

062F: OOS_ACT_FERNANDO_ZAMESTITEL_GROUP = create_group_type 0
0630: put_actor OOS_ACT_FERNANDO_ZAMESTITEL in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP as_leader
07B3: set_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP give_command 2

//////////////////////////////////////////////////////////////////////////

gosub @OOS_ACT_CREATE_ENKER_GROUP

//0615: define_AS_pack_begin 1@
//05CF: AS_actor -1 exit_car OOS_START_BUS in_direction 1514.3456 -420.222 33.5628
//05CD: AS_actor -1 exit_car OOS_START_BUS
//05D3: AS_actor -1 goto_point 1516.574 -420.2435 33.5291 mode 7 time 2000 ms // versionA
//0850: AS_actor -1 follow_actor OOS_ACT_ENKER
//0616: define_AS_pack_end 1@

for 0@ = 5 to 9
08C6: set_actor $CAMP_ACTOR[0@] stay_on_bike 1    
actor.SetWalkStyle($CAMP_ACTOR[0@],"GANG2")
0446: set_actor $CAMP_ACTOR[0@] dismemberment_possible 0
060B: set_actor $CAMP_ACTOR[0@] decision_maker_to $DEC_PEOPLE
actor.Health($CAMP_ACTOR[0@]) = 1000
actor.WeaponAccuracy($CAMP_ACTOR[0@]) = 95
create_thread @PED_BKP $CAMP_ACTOR[0@] 371 0 0 0 1 1 2 1 3 1
create_thread @ANT_PRE $CAMP_ACTOR[0@]
//0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@
0850: AS_actor $CAMP_ACTOR[0@] follow_actor OOS_ACT_ENKER
0337: set_actor $CAMP_ACTOR[0@] visibility 0
end                  

//061B: remove_references_to_AS_pack 1@ 

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 1
    then
    0362: remove_actor OOS_ACT_ENKER_RESIDENT1 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_ENKER_RESIDENT2 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_ENKER_RESIDENT3 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_ENKER_RESIDENT4 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_ENKER_RESIDENT5 from_car_and_place_at 1513.2711 -424.2388 33.6611
    wait 0
    actor.PutAtNoOffset(OOS_ACT_ENKER,1513.2711, -424.2388, 33.6611)
    0337: set_actor OOS_ACT_ENKER_RESIDENT1 visibility 1
    0337: set_actor OOS_ACT_ENKER_RESIDENT2 visibility 1
    0337: set_actor OOS_ACT_ENKER_RESIDENT3 visibility 1
    0337: set_actor OOS_ACT_ENKER_RESIDENT4 visibility 1
    0337: set_actor OOS_ACT_ENKER_RESIDENT5 visibility 1
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE3
    end

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "DUMMY"
v$ST_DIALOG[1] = "END271"
v$ST_DIALOG[2] = "DUMMY"
v$ST_DIALOG[3] = "ED271"
v$ST_DIALOG[4] = "DUMMY"
v$ST_DIALOG[5] = "ED272"
v$ST_DIALOG[6] = "DUMMY"
v$ST_DIALOG[7] = "ED273"
v$ST_DIALOG[8] = "DUMMY"
v$ST_DIALOG[9] = "ED274"
$DIALOG_COUNT = 9
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2 350

repeat
wait 0

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
gosub @CHECK_LEADER_FOR_OTSEBYATINA_TASKS

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0362: remove_actor OOS_ACT_ENKER_RESIDENT1 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_ENKER_RESIDENT2 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_ENKER_RESIDENT3 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_ENKER_RESIDENT4 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_ENKER_RESIDENT5 from_car_and_place_at 1513.2711 -424.2388 33.6611
wait 0
actor.PutAtNoOffset(OOS_ACT_ENKER,1513.2711, -424.2388, 33.6611)
0337: set_actor OOS_ACT_ENKER_RESIDENT1 visibility 1
0337: set_actor OOS_ACT_ENKER_RESIDENT2 visibility 1
0337: set_actor OOS_ACT_ENKER_RESIDENT3 visibility 1
0337: set_actor OOS_ACT_ENKER_RESIDENT4 visibility 1
0337: set_actor OOS_ACT_ENKER_RESIDENT5 visibility 1
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1511.8928 -424.6767 33.6929 radius 130.0
jf @OOS_ACT_FAILED_WALK

if and
not actor.InCar(OOS_ACT_ENKER_RESIDENT1,OOS_START_BUS)
not actor.InCar(OOS_ACT_ENKER_RESIDENT2,OOS_START_BUS)
not actor.InCar(OOS_ACT_ENKER_RESIDENT3,OOS_START_BUS)
not actor.InCar(OOS_ACT_ENKER_RESIDENT4,OOS_START_BUS)
not actor.InCar(OOS_ACT_ENKER_RESIDENT5,OOS_START_BUS)
    then
    break
    else
    
    ////////////////////////////
    
    for 0@ = 5 to 9 
    
    if or
//    0E4A: is_char_exiting_any_car $CAMP_ACTOR[0@]
    actor.Animation($CAMP_ACTOR[0@]) == "COACH_outL"
    actor.Animation($CAMP_ACTOR[0@]) == "COACH_outR"
        then
        0337: set_actor $CAMP_ACTOR[0@] visibility 1
        end
        
    end
    
    //////////////////////////
        
    end
 
until false

07B3: set_group OOS_ACT_ENKER_GROUP give_command 3

wait 500

//////////////////////////////////////////////////////////////////////////

:OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE3

gosub @OOS_ACT_CREATE_FERNANDO_ZAM_GROUP

//068B: set_car OOS_START_BUS all_disembark

//0615: define_AS_pack_begin 1@
//05CF: AS_actor -1 exit_car OOS_START_BUS in_direction 1514.3456 -420.222 33.5628
//05CD: AS_actor -1 exit_car OOS_START_BUS
//05D3: AS_actor -1 goto_point 1516.574 -420.2435 33.5291 mode 7 time 2000 ms // versionA
//0850: AS_actor -1 follow_actor OOS_ACT_FERNANDO_ZAMESTITEL
//0616: define_AS_pack_end 1@
//061B: remove_references_to_AS_pack 1@

for 0@ = 0 to 4
08C6: set_actor $VERSUS_PEOPLE[0@] stay_on_bike 1    
actor.SetWalkStyle($VERSUS_PEOPLE[0@],"GANG2")
0446: set_actor $VERSUS_PEOPLE[0@] dismemberment_possible 0
060B: set_actor $VERSUS_PEOPLE[0@] decision_maker_to $DEC_PEOPLE
actor.Health($VERSUS_PEOPLE[0@]) = 1000
actor.WeaponAccuracy($VERSUS_PEOPLE[0@]) = 95
create_thread @PED_BKP $VERSUS_PEOPLE[0@] 371 0 0 0 1 1 2 1 3 1
create_thread @ANT_PRE $VERSUS_PEOPLE[0@]
//0618: assign_actor $VERSUS_PEOPLE[0@] to_AS_pack 1@ 
0850: AS_actor $VERSUS_PEOPLE[0@] follow_actor OOS_ACT_FERNANDO_ZAMESTITEL
0337: set_actor $VERSUS_PEOPLE[0@] visibility 0
end

//061B: remove_references_to_AS_pack 1@

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 1
    then
    0362: remove_actor OOS_ACT_FERNANDO_FIGTHER1 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_FERNANDO_FIGTHER2 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_FERNANDO_FIGTHER3 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_FERNANDO_FIGTHER4 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_FERNANDO_FIGTHER5 from_car_and_place_at 1513.2711 -424.2388 33.6611
    wait 0
    actor.PutAtNoOffset(OOS_ACT_FERNANDO_ZAMESTITEL,1512.635, -427.0541, 33.7358)
    0337: set_actor OOS_ACT_FERNANDO_FIGTHER1 visibility 1
    0337: set_actor OOS_ACT_FERNANDO_FIGTHER2 visibility 1
    0337: set_actor OOS_ACT_FERNANDO_FIGTHER3 visibility 1
    0337: set_actor OOS_ACT_FERNANDO_FIGTHER4 visibility 1
    0337: set_actor OOS_ACT_FERNANDO_FIGTHER5 visibility 1
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE4
    end 

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "DUMMY"
v$ST_DIALOG[1] = "END272"
v$ST_DIALOG[2] = "DUMMY"
v$ST_DIALOG[3] = "ND272"
v$ST_DIALOG[4] = "DUMMY"
v$ST_DIALOG[5] = "ND273"
v$ST_DIALOG[6] = "DUMMY" 
v$ST_DIALOG[7] = "ND274"
v$ST_DIALOG[8] = "DUMMY"
v$ST_DIALOG[9] = "ND275"
$DIALOG_COUNT = 9
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2 250

repeat
wait 0

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
gosub @CHECK_LEADER_FOR_OTSEBYATINA_TASKS

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0362: remove_actor OOS_ACT_FERNANDO_FIGTHER1 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_FERNANDO_FIGTHER2 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_FERNANDO_FIGTHER3 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_FERNANDO_FIGTHER4 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_FERNANDO_FIGTHER5 from_car_and_place_at 1513.2711 -424.2388 33.6611
wait 0
actor.PutAtNoOffset(OOS_ACT_FERNANDO_ZAMESTITEL,1512.635, -427.0541, 33.7358)
0337: set_actor OOS_ACT_FERNANDO_FIGTHER1 visibility 1
0337: set_actor OOS_ACT_FERNANDO_FIGTHER2 visibility 1
0337: set_actor OOS_ACT_FERNANDO_FIGTHER3 visibility 1
0337: set_actor OOS_ACT_FERNANDO_FIGTHER4 visibility 1
0337: set_actor OOS_ACT_FERNANDO_FIGTHER5 visibility 1
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1511.8928 -424.6767 33.6929 radius 130.0
jf @OOS_ACT_FAILED_WALK

if and
not actor.InCar(OOS_ACT_FERNANDO_FIGTHER1,OOS_START_BUS)
not actor.InCar(OOS_ACT_FERNANDO_FIGTHER2,OOS_START_BUS)
not actor.InCar(OOS_ACT_FERNANDO_FIGTHER3,OOS_START_BUS)
not actor.InCar(OOS_ACT_FERNANDO_FIGTHER4,OOS_START_BUS)
not actor.InCar(OOS_ACT_FERNANDO_FIGTHER5,OOS_START_BUS)
    then
    break
    else
    
    ////////////////////////////
    
    for 0@ = 0 to 4 
    
    if or
//    0E4A: is_char_exiting_any_car $VERSUS_PEOPLE[0@]
    actor.Animation($VERSUS_PEOPLE[0@]) == "COACH_outL"
    actor.Animation($VERSUS_PEOPLE[0@]) == "COACH_outR"
        then
        0337: set_actor $VERSUS_PEOPLE[0@] visibility 1
        end
        
    end
    
    //////////////////////////
    
    end
 
until false

07B3: set_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP give_command 3

//////////////////////////////////////////////////////////////////////////

:OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE4

gosub @OOS_ACT_CREATE_GARNET_GROUP

//0615: define_AS_pack_begin 1@
//05CF: AS_actor -1 exit_car OOS_START_BUS in_direction 1514.3456 -420.222 33.5628
//05CD: AS_actor -1 exit_car OOS_START_BUS
//05D3: AS_actor -1 goto_point 1516.574 -420.2435 33.5291 mode 7 time 2000 ms // versionA
//0850: AS_actor -1 follow_actor OOS_ACT_GARNET
//0616: define_AS_pack_end 1@
//061B: remove_references_to_AS_pack 1@

for 0@ = 0 to 4
08C6: set_actor $CAMP_ACTOR[0@] stay_on_bike 1    
actor.SetWalkStyle($CAMP_ACTOR[0@],"GANG2")
0446: set_actor $CAMP_ACTOR[0@] dismemberment_possible 0
060B: set_actor $CAMP_ACTOR[0@] decision_maker_to $DEC_PEOPLE
actor.Health($CAMP_ACTOR[0@]) = 1000
actor.WeaponAccuracy($CAMP_ACTOR[0@]) = 95
create_thread @PED_BKP $CAMP_ACTOR[0@] 371 0 0 0 1 1 2 1 3 1
create_thread @ANT_PRE $CAMP_ACTOR[0@]
//0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@
0850: AS_actor $CAMP_ACTOR[0@] follow_actor OOS_ACT_GARNET  
0337: set_actor $CAMP_ACTOR[0@] visibility 0
end

//061B: remove_references_to_AS_pack 1@

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 1
    then
    0362: remove_actor OOS_ACT_GARNET_RESIDENT1 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_GARNET_RESIDENT2 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_GARNET_RESIDENT3 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_GARNET_RESIDENT4 from_car_and_place_at 1513.2711 -424.2388 33.6611
    0362: remove_actor OOS_ACT_GARNET_RESIDENT5 from_car_and_place_at 1513.2711 -424.2388 33.6611
    wait 0
    actor.PutAtNoOffset(OOS_ACT_GARNET,1512.887, -425.6803, 33.696)
    0337: set_actor OOS_ACT_GARNET_RESIDENT1 visibility 1
    0337: set_actor OOS_ACT_GARNET_RESIDENT2 visibility 1
    0337: set_actor OOS_ACT_GARNET_RESIDENT3 visibility 1
    0337: set_actor OOS_ACT_GARNET_RESIDENT4 visibility 1
    0337: set_actor OOS_ACT_GARNET_RESIDENT5 visibility 1   
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE6
    end 

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "DUMMY"
v$ST_DIALOG[1] = "END270"
v$ST_DIALOG[2] = "DUMMY"
v$ST_DIALOG[3] = "EN270"
v$ST_DIALOG[4] = "DUMMY"
v$ST_DIALOG[5] = "EN271"
v$ST_DIALOG[6] = "DUMMY"
v$ST_DIALOG[7] = "EN272"
v$ST_DIALOG[8] = "DUMMY"
v$ST_DIALOG[9] = "EN273"
$DIALOG_COUNT = 9
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2 350

repeat
wait 0

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
gosub @CHECK_LEADER_FOR_OTSEBYATINA_TASKS

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0362: remove_actor OOS_ACT_GARNET_RESIDENT1 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_GARNET_RESIDENT2 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_GARNET_RESIDENT3 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_GARNET_RESIDENT4 from_car_and_place_at 1513.2711 -424.2388 33.6611
0362: remove_actor OOS_ACT_GARNET_RESIDENT5 from_car_and_place_at 1513.2711 -424.2388 33.6611
0337: set_actor OOS_ACT_GARNET_RESIDENT1 visibility 1
0337: set_actor OOS_ACT_GARNET_RESIDENT2 visibility 1
0337: set_actor OOS_ACT_GARNET_RESIDENT3 visibility 1
0337: set_actor OOS_ACT_GARNET_RESIDENT4 visibility 1
0337: set_actor OOS_ACT_GARNET_RESIDENT5 visibility 1
wait 0
actor.PutAtNoOffset(OOS_ACT_GARNET,1512.887, -425.6803, 33.696)
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1511.8928 -424.6767 33.6929 radius 130.0
jf @OOS_ACT_FAILED_WALK

if and
not actor.InCar(OOS_ACT_GARNET_RESIDENT1,OOS_START_BUS)
not actor.InCar(OOS_ACT_GARNET_RESIDENT2,OOS_START_BUS)
not actor.InCar(OOS_ACT_GARNET_RESIDENT3,OOS_START_BUS)
not actor.InCar(OOS_ACT_GARNET_RESIDENT4,OOS_START_BUS)
not actor.InCar(OOS_ACT_GARNET_RESIDENT5,OOS_START_BUS)
    then
    break
    else
    
    ////////////////////////////
    
    for 0@ = 0 to 4 
    
    if or
//    0E4A: is_char_exiting_any_car $CAMP_ACTOR[0@]
    actor.Animation($CAMP_ACTOR[0@]) == "COACH_outL"
    actor.Animation($CAMP_ACTOR[0@]) == "COACH_outR"
        then
        0337: set_actor $CAMP_ACTOR[0@] visibility 1
        end
        
    end
    
    //////////////////////////
    
    end
 
until false

07B3: set_group OOS_ACT_GARNET_GROUP give_command 3

//////////////////////////////////////////////////////////////////////////

v$OBJECTIVE = "DUMMY"

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "END274"
if
OOS_FARMERS_WITH_PLAYER == 1
then

if
SURVIVAL_CUSTOM_WEAPON_NABOR == 3
then
v$ST_DIALOG[1] = "ENB273"
v$ST_DIALOG[2] = "ENB275A"
v$ST_DIALOG[3] = "ENB276"
v$ST_DIALOG[4] = "ENB277"
v$ST_DIALOG[5] = "END278"
v$ST_DIALOG[6] = "END279"
$DIALOG_COUNT = 6
else
v$ST_DIALOG[1] = "ENB273"
v$ST_DIALOG[2] = "ENB276"
v$ST_DIALOG[3] = "ENB277"
v$ST_DIALOG[4] = "END278"
v$ST_DIALOG[5] = "END279"
$DIALOG_COUNT = 4
end

else

if
SURVIVAL_CUSTOM_WEAPON_NABOR == 3
then
v$ST_DIALOG[1] = "ENB275A"
v$ST_DIALOG[2] = "END278"
v$ST_DIALOG[3] = "END279"
$DIALOG_COUNT = 3
else
v$ST_DIALOG[1] = "END278"
v$ST_DIALOG[2] = "END279"
$DIALOG_COUNT = 2
end

end
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

018A: MISSION_CHECKPOINT = create_checkpoint_at 1485.9607 -423.6718 34.8195
03BC: MISSION_SPHERE = create_sphere_at 1485.9607 -423.6718 34.8195 radius 2.0

fade 1 500
$HUD_REMOVE = 0
wait 500

player.CanMove(PLAYER_CHAR,true)

v$OBJECTIVE = "GME1340"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1340"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

:EHEE_BERTON_IMPOSTER

repeat
wait 0

if and
$DIALOG_END == 1
OOS_ACT_BERTON_IMPOSTER_FLAG == 1
OOS_ACT_BERTON_IMPOSTER_FLAG2 == 0
33@ > 5000
    then
    :EHEE_BERTON_IMPOSTER2
    if
    OOS_ACT_BERTON_IMPOSTER_FLAG2 == 0
        then
        06AB: set_actor OOS_ACT_FERMER12 all_weapons_hidden 1
        0EB2: get_offset_from_camera_in_world_coords 0.0 -3.5 0.0 store_to 1@ 2@ 3@
        02CE: 4@ = ground_z_at 1@ 2@ 3@
        actor.PutAtNoOffset(OOS_ACT_FERMER12,1@,2@,4@)
        0337: set_actor OOS_ACT_FERMER12 visibility 1
        0619: enable_actor OOS_ACT_FERMER12 collision_detection 1
        actor.LockInCurrentPosition(OOS_ACT_FERMER12,false)    
        OOS_ACT_BERTON_IMPOSTER_FLAG2 = 1
        0850: AS_actor OOS_ACT_FERMER12 follow_actor PLAYER_ACTOR
        5@ = marker.CreateAboveActor(OOS_ACT_FERMER12)            
        
        repeat
        wait 0
        
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        gosub @CHECK_LEADER_FOR_OTSEBYATINA_TASKS
        
        if and
        $CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
        not $CAN_AIM_AT_SRVVRS == 2
        jf @OOS_ACT_FAILED_AGRO
        if
        803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
        jf @OOS_ACT_FAILED_LDEAD
        if
        RANDOM_QUEST_CANCEL_FLAG == 0
        jf @OOS_ACT_FAILED_CANCEL
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED
        if
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1511.8928 -424.6767 33.6929 radius 130.0
        jf @OOS_ACT_FAILED_WALK
        
        $END_DIALOG_INST = 1
        until $DIALOG_END == 1
        
        wait 0
        v$ST_DIALOG[0] = "ENN368"
        v$ST_DIALOG[1] = "ENN369"
        v$ST_DIALOG[2] = "ENN370"
        v$ST_DIALOG[3] = "ENN371"
        v$ST_DIALOG[4] = "ENN372"
        v$ST_DIALOG[5] = "ENN373"
        v$ST_DIALOG[6] = "ENN374"
        $DIALOG_COUNT = 6
        $DIALOG_NOT_SKIP = 1
        create_thread @DG_SYS2
        v$OBJECTIVE = "DUMMY"
        03BD: destroy_sphere MISSION_SPHERE
        marker.Disable(MISSION_CHECKPOINT)
        32@ = 0
        end    
    end

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
gosub @CHECK_LEADER_FOR_OTSEBYATINA_TASKS

if and
$CHEATS_ON == 1
OOS_ACT_BERTON_IMPOSTER_FLAG2 == 0
0E3D:   key_pressed $KEY_USE
then
break
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1511.8928 -424.6767 33.6929 radius 130.0
jf @OOS_ACT_FAILED_WALK

if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 1485.9607 -423.6718 radius 2.0 2.0
OOS_ACT_BERTON_IMPOSTER_FLAG == 1
OOS_ACT_BERTON_IMPOSTER_FLAG2 == 0
$DIALOG_END == 0
then
v$OBJECTIVE = "DUMMY"
03BD: destroy_sphere MISSION_SPHERE
marker.Disable(MISSION_CHECKPOINT)
jump to @EHEE_BERTON_IMPOSTER2
end
 
if and
OOS_ACT_BERTON_IMPOSTER_FLAG2 == 1
$DIALOG_END == 1
32@ > 5000
    then
    OOS_ACT_BERTON_IMPOSTER_FLAG2 = 2
    018A: MISSION_CHECKPOINT = create_checkpoint_at 1485.9607 -423.6718 34.8195
    03BC: MISSION_SPHERE = create_sphere_at 1485.9607 -423.6718 34.8195 radius 2.0
        
    v$OBJECTIVE = "GME1340"
    if
    REALISM_MODE == 1
        then
        v$OBJECTIVE = "GMR1340"
        end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    else
    if
    OOS_ACT_BERTON_IMPOSTER_FLAG2 == 1
        then
        jump to @EHEE_BERTON_IMPOSTER
        end
    end    
    
if
OOS_ACT_BERTON_IMPOSTER_FLAG2 == 1
    then
    jump to @EHEE_BERTON_IMPOSTER
    end   
 
until 00EC:   actor PLAYER_ACTOR sphere 0 near_point 1485.9607 -423.6718 radius 2.0 2.0

v$OBJECTIVE = "DUMMY"
03BD: destroy_sphere MISSION_SPHERE
marker.Disable(MISSION_CHECKPOINT)

if and
OOS_ACT_BERTON_IMPOSTER_FLAG == 1
not OOS_ACT_BERTON_IMPOSTER_FLAG2 == 2
then
jump to @EHEE_BERTON_IMPOSTER2
end

player.CanMove(PLAYER_CHAR,false)
fade 0 500
$HUD_REMOVE = 1
wait 500

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)

0AF1: write_int 1 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
create_thread @OOS_CHK
create_thread @OOS_CH2

:OOS_LOAD_CHECKPOINT_STRAIGHT_TO_MANSION_CAPTURE6

07B3: set_group OOS_ACT_ENKER_GROUP give_command 0
07B3: set_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP give_command 0
07B3: set_group OOS_ACT_GARNET_GROUP give_command 0

0631: put_actor OOS_ACT_ARTEMIS in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_ARTEMIS never_leave_group 1

0631: put_actor OOS_ACT_DANIEL in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_DANIEL never_leave_group 1

$END_DIALOG_INST = 1

actor.PutAt(OOS_ACT_GARNET,1307.6993, -631.6873, 109.0549)
actor.Angle(OOS_ACT_GARNET) = 115.0
04EB: AS_actor OOS_ACT_GARNET crouch 1

actor.PutAt(OOS_ACT_ENKER,1370.8618, -716.819, 97.3933)
actor.Angle(OOS_ACT_ENKER) = 141.2459
04EB: AS_actor OOS_ACT_ENKER crouch 1

actor.PutAt(OOS_ACT_FERNANDO_ZAMESTITEL,1142.1675, -769.8414, 108.5193)
actor.Angle(OOS_ACT_FERNANDO_ZAMESTITEL) = 262.7392
09BC: put_actor OOS_ACT_FERNANDO_ZAMESTITEL at 1145.984 -769.3508 108.3726 no_offset_and_dont_warp_gang
04EB: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL crouch 1
04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER1 crouch 1
04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER2 crouch 1
04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER3 crouch 1
04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER4 crouch 1
04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER5 crouch 1

if
OOS_FARMERS_WITH_PLAYER == 1
then
062F: OOS_ACT_FERMERS_GROUP = create_group_type 0
0630: put_actor OOS_ACT_FERMER1 in_group OOS_ACT_FERMERS_GROUP as_leader
07B3: set_group OOS_ACT_FERMERS_GROUP give_command 0
0631: put_actor OOS_ACT_FERMER2 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER2 never_leave_group 1
0631: put_actor OOS_ACT_FERMER3 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER3 never_leave_group 1
0631: put_actor OOS_ACT_FERMER4 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER4 never_leave_group 1
0631: put_actor OOS_ACT_FERMER5 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER5 never_leave_group 1
0631: put_actor OOS_ACT_FERMER6 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER6 never_leave_group 1
0631: put_actor OOS_ACT_FERMER7 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER7 never_leave_group 1

062F: OOS_ACT_FERMERS_GROUP2 = create_group_type 0
0630: put_actor OOS_ACT_FERMER8 in_group OOS_ACT_FERMERS_GROUP2 as_leader
07B3: set_group OOS_ACT_FERMERS_GROUP give_command 0

07F6: get_group PLAYER_GROUP number_of_leaders_to 0@ number_of_members_to 1@

if
1@ <= 0
then
0631: put_actor OOS_ACT_FERMER9 in_group PLAYER_GROUP
else
0631: put_actor OOS_ACT_FERMER9 in_group OOS_ACT_FERMERS_GROUP2
087F: set_actor OOS_ACT_FERMER9 never_leave_group 1
end

if
1@ <= 1
then
0631: put_actor OOS_ACT_FERMER10 in_group PLAYER_GROUP
else
0631: put_actor OOS_ACT_FERMER10 in_group OOS_ACT_FERMERS_GROUP2
087F: set_actor OOS_ACT_FERMER10 never_leave_group 1
end

if
1@ <= 2
then
0631: put_actor OOS_ACT_FERMER11 in_group PLAYER_GROUP
else
0631: put_actor OOS_ACT_FERMER11 in_group OOS_ACT_FERMERS_GROUP2
087F: set_actor OOS_ACT_FERMER11 never_leave_group 1
end

if or
1@ <= 3
OOS_ACT_BERTON_IMPOSTER_FLAG == 1
then
0631: put_actor OOS_ACT_FERMER12 in_group PLAYER_GROUP
else
0631: put_actor OOS_ACT_FERMER12 in_group OOS_ACT_FERMERS_GROUP2
087F: set_actor OOS_ACT_FERMER12 never_leave_group 1
end

actor.PutAt(OOS_ACT_FERMER1,1272.271, -614.217, 103.0215)
actor.Angle(OOS_ACT_FERMER1) = 204.6757
04EB: AS_actor OOS_ACT_FERMER1 crouch 1

actor.PutAt(OOS_ACT_FERMER8,1270.1056, -605.3833, 102.2154)
actor.Angle(OOS_ACT_FERMER8) = 181.274
04EB: AS_actor OOS_ACT_FERMER8 crouch 1

else

if
OOS_ACT_BERTON_IMPOSTER_FLAG == 1
    then
    0631: put_actor OOS_ACT_FERMER12 in_group PLAYER_GROUP
    end

end

if
OOS_ACT_BERTON_IMPOSTER_FLAG == 1
then
actor.Health(OOS_ACT_FERMER12) = 5000
08AF: set_actor OOS_ACT_FERMER12 max_health_to 5000
02E2: set_actor OOS_ACT_FERMER12 weapon_accuracy_to 100
06AB: set_actor OOS_ACT_FERMER12 all_weapons_hidden 0

0781: get_weapon_with_ID 97 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(OOS_ACT_FERMER12,97,99999)

if
$SURVIVOR_IN_PLAYER_TEAM[0] == 0
    then
    0084:  $CREATURE[41] = OOS_ACT_FERMER12 // (int)
    jump to @SKIP_BURTON_EHE
    end
    
if
$SURVIVOR_IN_PLAYER_TEAM[1] == 0
    then
    0084:  $CREATURE[42] = OOS_ACT_FERMER12 // (int)
    jump to @SKIP_BURTON_EHE
    end
    
if
$SURVIVOR_IN_PLAYER_TEAM[2] == 0
    then
    0084:  $CREATURE[43] = OOS_ACT_FERMER12 // (int)
    jump to @SKIP_BURTON_EHE
    end
    
if
$SURVIVOR_IN_PLAYER_TEAM[3] == 0
    then
    0084:  $CREATURE[44] = OOS_ACT_FERMER12 // (int)
    jump to @SKIP_BURTON_EHE
    end
    
if
$SURVIVOR_IN_PLAYER_TEAM[4] == 0
    then
    0084:  $CREATURE[45] = OOS_ACT_FERMER12 // (int)
    jump to @SKIP_BURTON_EHE
    end                  

end

:SKIP_BURTON_EHE

0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1349.9976 -639.4255 114.0349
actor.PutAtNoOffset(PLAYER_ACTOR,1349.9976, -639.4255, 114.0349)
actor.Angle(PLAYER_ACTOR) = 99.0247
04EB: AS_actor PLAYER_ACTOR crouch 1
camera.Restore_WithJumpCut()
//wait 2000

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 2
    then
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_MANSION_CAPTURE1
    end 

create_thread @REFR_3D
fade 1 500
$HUD_REMOVE = 0
wait 500

player.CanMove(PLAYER_CHAR,true)

v$OBJECTIVE = "GME1342"
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

$END_DIALOG_INST = 0
v$ST_DIALOG[0] = "DUMMY"
v$ST_DIALOG[1] = "END280"
$DIALOG_COUNT = 1
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until $DIALOG_END == 1

:OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_MANSION_CAPTURE1

$SAVESTATUS = 0
OOS_MARK = 156546
ENEMY_ZONE_CLIMB_FLAG = 0

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if and
OOS_ACT_BERTON_IMPOSTER_FLAG == 0
0@ == 1
then
gosub @CREATE_GUNPOWDER_SUPPORT
end

repeat
wait 0
until 056D:   actor $ARMY69_2[20] defined

HARDCORE_DANGER_FLAG_SCRIPTED = 1

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 2
    then
    INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1
    $ALLOW_ZOMBIES = 0
    $INT_ZMB_NOT = 1
    0777: delete_objects_in_object_group "oosgate"            
    0776: create_objects_in_object_group "oosgate2"
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_MANSION_CAPTURE2
    end 

/////////////////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS3.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

0615: define_AS_pack_begin 0@
0637: AS_actor -1 goto 1319.869 -757.9255 92.9074 mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor $ARMY69_2[1]
0616: define_AS_pack_end 0@
087D: assign_group OOS_ACT_ENKER_GROUP to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0615: define_AS_pack_begin 0@
0637: AS_actor -1 goto 1288.9657 -737.8396 94.8511 mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor $ARMY69_2[1] 
0616: define_AS_pack_end 0@
087D: assign_group OOS_ACT_GARNET_GROUP to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

0615: define_AS_pack_begin 0@
05D3: AS_actor -1 goto_point 1227.8773 -742.5673 96.5523 mode 6 time 999999 ms // versionA  
0616: define_AS_pack_end 0@
087D: assign_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

if
OOS_FARMERS_WITH_PLAYER == 1
then
0615: define_AS_pack_begin 0@
0637: AS_actor -1 goto 1275.2589 -747.7653 95.5611 mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor $ARMY69_2[1] 
0616: define_AS_pack_end 0@
087D: assign_group OOS_ACT_FERMERS_GROUP to_AS_pack 0@
061B: remove_references_to_AS_pack 0@
end
                                     
/////////////////////////////////////////////////////////////////////

v$OBJECTIVE = "GME1343"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1343"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

018A: MISSION_CHECKPOINT = create_checkpoint_at 1245.8286 -767.031 92.0907

/////////////////////////////////////////////////////////////////////

04F7: vagina_text ENKER_HEALTH_STATUS_TEXT type 1 line 1 GXT 'GME1355' // global_variable  // Scor
04F7: vagina_text GARNET_HEALTH_STATUS_TEXT type 1 line 2 GXT 'GME1356' // global_variable  // Scor
04F7: vagina_text FERNANDO_ZAM_HEALTH_STATUS_TEXT type 1 line 3 GXT 'GME1357' // global_variable  // Scor
04F7: vagina_text ARTEMIS_DANIEL_HEALTH_STATUS_TEXT type 1 line 4 GXT 'GME1358' // global_variable  // Scor

create_thread @OOS_GAT

repeat
wait 0

if and
OOS_ACT_BERTON_IMPOSTER_FLAG == 0
OOS_ACT_GUNPOWDER_EXITED == 0
056E:   car OOS_ACT_GUNPOWDER_CAB defined
    then
    
    if and
    $CHEATS_ON == 1
    0E3D:   key_pressed 49
    then    
    car.PutAt(OOS_ACT_GUNPOWDER_CAB,1266.5725, -727.3784,94.0)
    car.Angle(OOS_ACT_GUNPOWDER_CAB) = 111.7179
    0407: store_coords_to 0@ 1@ 2@ from_car OOS_ACT_GUNPOWDER_CAB with_offset 0.0 -10.0 0.5
    3@ = car.Angle(OOS_ACT_GUNPOWDER_CAB)    
    car.PutAt(OOS_ACT_GUNPOWDER_TRAILER,0@,1@,2@)
    Car.Angle(OOS_ACT_GUNPOWDER_TRAILER) = 3@
    0893: put_trailer OOS_ACT_GUNPOWDER_TRAILER on_cab OOS_ACT_GUNPOWDER_CAB    
    end
    
    if and
    8EE8: not locate_car_distance_to_car OOS_ACT_GUNPOWDER_TRAILER car OOS_ACT_GUNPOWDER_CAB radius 10.0
//    87AB: not  car OOS_ACT_GUNPOWDER_CAB has_attached_trailer OOS_ACT_GUNPOWDER_TRAILER //почему это говно всегда выдает false?! 
    0E45: frame_mod 15
    then   
    0893: put_trailer OOS_ACT_GUNPOWDER_TRAILER on_cab OOS_ACT_GUNPOWDER_CAB
//    0AD1: show_formatted_text_highpriority "put back" time 500
    end
    
    if
    01AD:   car OOS_ACT_GUNPOWDER_CAB sphere 0 near_point 1266.5725 -727.3784 radius 15.0 15.0    
        then
        car.SetDriverBehaviour(OOS_ACT_GUNPOWDER_CAB,0)
        068B: set_car OOS_ACT_GUNPOWDER_CAB all_disembark
        actor.SetImmunities($ARMY69_2[21],0,0,0,0,0)
        actor.SetImmunities($ARMY69_2[22],0,0,0,0,0)    
        
        for 0@ = 23 to 28
        0465: remove_actor $ARMY69_2[0@] from_turret_mode
        0E24: fix_char $ARMY69_2[0@] ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
        0407: store_coords_to 1@ 2@ 3@ from_car OOS_ACT_GUNPOWDER_TRAILER with_offset 0.0 -4.0 0.0        
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0        
        005B: 1@ += 4@  // (float)
        005B: 2@ += 5@  // (float)
        actor.PutAtNoOffset($ARMY69_2[0@],1@,2@,3@)
        actor.SetImmunities($ARMY69_2[0@],0,0,0,0,0)
        end
        
        $ZONE_PEOPLE_COUNT = 28
        gosub @GUNPOWDER_DO_SETTINGS        
        
        OOS_ACT_GUNPOWDER_EXITED = 1
        BANDIT_HELI_SPAWN_FLAG = 1
        
        $END_DIALOG_INST = 1
        wait 0
        v$ST_DIALOG[0] = "END331"
        v$ST_DIALOG[1] = "END332"
        $DIALOG_COUNT = 1
        $DIALOG_NOT_SKIP = 1
        create_thread @DG_SYS2
        
        end
    end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if
056D:   actor OOS_ACT_ENKER defined
then

/////////////////////////////////////
    
5@ = 3000
1@ = actor.Health(OOS_ACT_ENKER)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: ENKER_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
end

if
056D:   actor OOS_ACT_FERNANDO_ZAMESTITEL defined
then

/////////////////////////////////////
    
5@ = 3000
1@ = actor.Health(OOS_ACT_FERNANDO_ZAMESTITEL)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: FERNANDO_ZAM_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

if
not actor.Dead(OOS_ACT_FERNANDO_ZAMESTITEL)
jf @OOS_ACT_FAILED_FERNANDO_ZAMESTITEL
end

if
056D:   actor OOS_ACT_GARNET defined
then

/////////////////////////////////////
    
5@ = 3000
1@ = actor.Health(OOS_ACT_GARNET)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: GARNET_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
end

if
056D:   actor OOS_ACT_ARTEMIS defined
then

/////////////////////////////////////
    
5@ = 3000
1@ = actor.Health(OOS_ACT_ARTEMIS)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 50.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: ARTEMIS_DANIEL_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
end

if
056D:   actor OOS_ACT_DANIEL defined
then

/////////////////////////////////////
    
5@ = 3000
1@ = actor.Health(OOS_ACT_DANIEL)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 50.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
005E: ARTEMIS_DANIEL_HEALTH_STATUS_TEXT += 2@  // (int)

/////////////////////////////////////

if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL
end

if
0E45: frame_mod 15
then

/////////////////////////////////////////////////////CUBE 1/////////////////////////////////////////////////////

for 0@ = 23 to 40
//random_int 0@ 23 to 41
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
then
if
00A4:   actor $RNDM_HOUSE_WEAPON[0@] sphere 0 in_cube_cornerA 1251.7241 -769.0117 90.1964 cornerB 1283.6259 -758.9657 103.2863
    then
    04DD: 1@ = actor $RNDM_HOUSE_WEAPON[0@] armour
    if
    not 1@ >= 69
        then      
        05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 100 ms
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1246.196 -732.6165 94.9289 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1238.6039 -736.226 95.5864 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1244.8622 -755.59 93.4979 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $RNDM_HOUSE_WEAPON[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "SOME BOEC DO RUN TO GATES" time 2000
        else
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 9
//random_int 0@ 0 to 10
if
056D:   actor $CAMP_ACTOR[0@] defined
then
if
00A4:   actor $CAMP_ACTOR[0@] sphere 0 in_cube_cornerA 1251.7241 -769.0117 90.1964 cornerB 1283.6259 -758.9657 103.2863
    then
    04DD: 1@ = actor $CAMP_ACTOR[0@] armour
    if
    not 1@ >= 69
        then   
        05B9: AS_actor $CAMP_ACTOR[0@] stay_idle 100 ms
        035F: actor $CAMP_ACTOR[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1246.196 -732.6165 94.9289 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1238.6039 -736.226 95.5864 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1244.8622 -755.59 93.4979 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "GARNET OR ENKER SQUAD DO RUN TO GATES" time 2000
        else
        035F: actor $CAMP_ACTOR[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 4
//random_int 0@ 0 to 5
if
056D:   actor $VERSUS_PEOPLE[0@] defined
then
if
00A4:   actor $VERSUS_PEOPLE[0@] sphere 0 in_cube_cornerA 1251.7241 -769.0117 90.1964 cornerB 1283.6259 -758.9657 103.2863
    then
    04DD: 1@ = actor $VERSUS_PEOPLE[0@] armour
    if
    not 1@ >= 69
        then
        05B9: AS_actor $VERSUS_PEOPLE[0@] stay_idle 100 ms
        035F: actor $VERSUS_PEOPLE[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1246.196 -732.6165 94.9289 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1238.6039 -736.226 95.5864 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1244.8622 -755.59 93.4979 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $VERSUS_PEOPLE[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "FERNANDO SQUAD DO RUN TO GATES" time 2000
        else
        035F: actor $VERSUS_PEOPLE[0@] armour += -2
        end
    end
end
end 

/////////////////////////////////////////////////////CUBE 2/////////////////////////////////////////////////////

for 0@ = 23 to 40
//random_int 0@ 23 to 41
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
then
if
00A4:   actor $RNDM_HOUSE_WEAPON[0@] sphere 0 in_cube_cornerA 1286.5298 -758.3988 87.7352 cornerB 1309.0619 -811.576 101.0041
    then
    04DD: 1@ = actor $RNDM_HOUSE_WEAPON[0@] armour
    if
    not 1@ >= 69
        then
        05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 100 ms
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1246.196 -732.6165 94.9289 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1238.6039 -736.226 95.5864 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1244.8622 -755.59 93.4979 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $RNDM_HOUSE_WEAPON[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "SOME BOEC DO RUN TO GATES 2" time 2000
        else
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 9
//random_int 0@ 0 to 10
if
056D:   actor $CAMP_ACTOR[0@] defined
then
if
00A4:   actor $CAMP_ACTOR[0@] sphere 0 in_cube_cornerA 1286.5298 -758.3988 87.7352 cornerB 1309.0619 -811.576 101.0041
    then
    04DD: 1@ = actor $CAMP_ACTOR[0@] armour
    if
    not 1@ >= 69
        then
        05B9: AS_actor $CAMP_ACTOR[0@] stay_idle 100 ms
        035F: actor $CAMP_ACTOR[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1246.196 -732.6165 94.9289 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1238.6039 -736.226 95.5864 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1244.8622 -755.59 93.4979 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "GARNET OR ENKER SQUAD DO RUN TO GATES 2" time 2000
        else
        035F: actor $CAMP_ACTOR[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 4
//random_int 0@ 0 to 5
if
056D:   actor $VERSUS_PEOPLE[0@] defined
then
if
00A4:   actor $VERSUS_PEOPLE[0@] sphere 0 in_cube_cornerA 1286.5298 -758.3988 87.7352 cornerB 1309.0619 -811.576 101.0041
    then
    04DD: 1@ = actor $VERSUS_PEOPLE[0@] armour
    if
    not 1@ >= 69
        then       
        05B9: AS_actor $VERSUS_PEOPLE[0@] stay_idle 100 ms
        035F: actor $VERSUS_PEOPLE[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1246.196 -732.6165 94.9289 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1238.6039 -736.226 95.5864 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1244.8622 -755.59 93.4979 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $VERSUS_PEOPLE[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "FERNANDO SQUAD DO RUN TO GATES 2" time 2000
        else
        035F: actor $VERSUS_PEOPLE[0@] armour += -2
        end
    end
end    
end   

/////////////////////////////////////////////////////CUBE 3/////////////////////////////////////////////////////

for 0@ = 23 to 40
//random_int 0@ 23 to 41
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
then
if and
00A4:   actor $RNDM_HOUSE_WEAPON[0@] sphere 0 in_cube_cornerA 1251.6323 -798.277 86.4829 cornerB 1239.9468 -761.6236 101.9114
8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 254
8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 257
8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 901
    then
    04DD: 1@ = actor $RNDM_HOUSE_WEAPON[0@] armour
    if
    not 1@ >= 69
        then      
        05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 100 ms
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += 100
        0615: define_AS_pack_begin 1@     
        05D3: AS_actor -1 goto_point 1243.7847 -805.1675 88.4868 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1243.7847 -805.1675 88.4868 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1209.3728 -819.7241 86.4529 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1232.7173 -832.8461 84.202 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1246.9075 -813.8664 84.1478 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $RNDM_HOUSE_WEAPON[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "SOME BOEC DO RUN TO GATES" time 2000
        else
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 9
//random_int 0@ 0 to 10
if
056D:   actor $CAMP_ACTOR[0@] defined
then
if and
00A4:   actor $CAMP_ACTOR[0@] sphere 0 in_cube_cornerA 1251.6323 -798.277 86.4829 cornerB 1239.9468 -761.6236 101.9114
8E42: not is_char_doing_task_id $CAMP_ACTOR[0@] 254
8E42: not is_char_doing_task_id $CAMP_ACTOR[0@] 257
8E42: not is_char_doing_task_id $CAMP_ACTOR[0@] 901
    then
    04DD: 1@ = actor $CAMP_ACTOR[0@] armour
    if
    not 1@ >= 69
        then   
        05B9: AS_actor $CAMP_ACTOR[0@] stay_idle 100 ms
        035F: actor $CAMP_ACTOR[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1243.7847 -805.1675 88.4868 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1243.7847 -805.1675 88.4868 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1209.3728 -819.7241 86.4529 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1232.7173 -832.8461 84.202 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1246.9075 -813.8664 84.1478 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "GARNET OR ENKER SQUAD DO RUN TO GATES" time 2000
        else
        035F: actor $CAMP_ACTOR[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 4
//random_int 0@ 0 to 5
if
056D:   actor $VERSUS_PEOPLE[0@] defined
then
if and
00A4:   actor $VERSUS_PEOPLE[0@] sphere 0 in_cube_cornerA 1251.6323 -798.277 86.4829 cornerB 1239.9468 -761.6236 101.9114
8E42: not is_char_doing_task_id $VERSUS_PEOPLE[0@] 254
8E42: not is_char_doing_task_id $VERSUS_PEOPLE[0@] 257
8E42: not is_char_doing_task_id $VERSUS_PEOPLE[0@] 901
    then
    04DD: 1@ = actor $VERSUS_PEOPLE[0@] armour
    if
    not 1@ >= 69
        then
        05B9: AS_actor $VERSUS_PEOPLE[0@] stay_idle 100 ms
        035F: actor $VERSUS_PEOPLE[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1243.7847 -805.1675 88.4868 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1243.7847 -805.1675 88.4868 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1209.3728 -819.7241 86.4529 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1232.7173 -832.8461 84.202 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1246.9075 -813.8664 84.1478 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $VERSUS_PEOPLE[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "FERNANDO SQUAD DO RUN TO GATES" time 2000
        else
        035F: actor $VERSUS_PEOPLE[0@] armour += -2
        end
    end
end
end 

/////////////////////////////////////////////////////CUBE 4/////////////////////////////////////////////////////

for 0@ = 23 to 40
//random_int 0@ 23 to 41
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
then
if and
00A4:   actor $RNDM_HOUSE_WEAPON[0@] sphere 0 in_cube_cornerA 1258.2225 -805.8203 82.557 cornerB 1237.7427 -799.8016 86.7424
8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 254
8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 257
8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 901
    then
    04DD: 1@ = actor $RNDM_HOUSE_WEAPON[0@] armour
    if
    not 1@ >= 69
        then      
        05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 100 ms
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += 100
        0615: define_AS_pack_begin 1@     
        05D3: AS_actor -1 goto_point 1253.7886 -815.1548 84.1478 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1291.5884 -816.4576 84.1478 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1301.1057 -800.9924 84.1406 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1306.7632 -800.8704 84.1406 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1324.0013 -800.1836 79.6018 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1312.1683 -724.1462 92.8257 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $RNDM_HOUSE_WEAPON[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "SOME BOEC DO RUN TO GATES" time 2000
        else
        035F: actor $RNDM_HOUSE_WEAPON[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 9
//random_int 0@ 0 to 10
if
056D:   actor $CAMP_ACTOR[0@] defined
then
if and
00A4:   actor $CAMP_ACTOR[0@] sphere 0 in_cube_cornerA 1258.2225 -805.8203 82.557 cornerB 1237.7427 -799.8016 86.7424
8E42: not is_char_doing_task_id $CAMP_ACTOR[0@] 254
8E42: not is_char_doing_task_id $CAMP_ACTOR[0@] 257
8E42: not is_char_doing_task_id $CAMP_ACTOR[0@] 901
    then
    04DD: 1@ = actor $CAMP_ACTOR[0@] armour
    if
    not 1@ >= 69
        then   
        05B9: AS_actor $CAMP_ACTOR[0@] stay_idle 100 ms
        035F: actor $CAMP_ACTOR[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1253.7886 -815.1548 84.1478 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1291.5884 -816.4576 84.1478 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1301.1057 -800.9924 84.1406 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1306.7632 -800.8704 84.1406 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1324.0013 -800.1836 79.6018 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1312.1683 -724.1462 92.8257 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "GARNET OR ENKER SQUAD DO RUN TO GATES" time 2000
        else
        035F: actor $CAMP_ACTOR[0@] armour += -2
        end
    end
end
end

for 0@ = 0 to 4
//random_int 0@ 0 to 5
if
056D:   actor $VERSUS_PEOPLE[0@] defined
then
if and
00A4:   actor $VERSUS_PEOPLE[0@] sphere 0 in_cube_cornerA 1258.2225 -805.8203 82.557 cornerB 1237.7427 -799.8016 86.7424
8E42: not is_char_doing_task_id $VERSUS_PEOPLE[0@] 254
8E42: not is_char_doing_task_id $VERSUS_PEOPLE[0@] 257
8E42: not is_char_doing_task_id $VERSUS_PEOPLE[0@] 901
    then
    04DD: 1@ = actor $VERSUS_PEOPLE[0@] armour
    if
    not 1@ >= 69
        then
        05B9: AS_actor $VERSUS_PEOPLE[0@] stay_idle 100 ms
        035F: actor $VERSUS_PEOPLE[0@] armour += 100
        0615: define_AS_pack_begin 1@
        05D3: AS_actor -1 goto_point 1253.7886 -815.1548 84.1478 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1291.5884 -816.4576 84.1478 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1301.1057 -800.9924 84.1406 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1306.7632 -800.8704 84.1406 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1324.0013 -800.1836 79.6018 mode 7 time 30000 ms // versionA
        05D3: AS_actor -1 goto_point 1312.1683 -724.1462 92.8257 mode 7 time 30000 ms // versionA
        0616: define_AS_pack_end 1@
        0618: assign_actor $VERSUS_PEOPLE[0@] to_AS_pack 1@
        061B: remove_references_to_AS_pack 1@
//        0AD1: show_formatted_text_highpriority "FERNANDO SQUAD DO RUN TO GATES" time 2000
        else
        035F: actor $VERSUS_PEOPLE[0@] armour += -2
        end
    end
end
end 

end

if
OOS_ACT_GATES_BOMBED_FLAG == 0
    then    
    if           
    OOS_GATES_HAS_BEEN_BOMBED == 1
        then 
        marker.Disable(MISSION_CHECKPOINT)
        OOS_ACT_GATES_BOMBED_FLAG = 1        
        0777: delete_objects_in_object_group "oosgate"            
        0776: create_objects_in_object_group "oosgate2"
        
        if
        not OOS_ACT_GARNET_GROUP_PROGRESS == 2
        then        
        v$OBJECTIVE = "GM1343B"
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
        end
                  
        end
    else
    INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1
    $ALLOW_ZOMBIES = 0
    $INT_ZMB_NOT = 1
    
    if and
    $CHEATS_ON == 1
    0E3D:   key_pressed $KEY_USE
    OOS_ACT_ENKER_GROUP_PROGRESS == 4
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,1259.3402, -784.9648, 92.0312)
    create_thread @REFR_3D
    end
    
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1259.1185 -785.4063 92.0302 radius 3.5
    OOS_ACT_GATES_BOMBED_FLAG == 1
    OOS_ACT_KILLED_BANDITS == 1
    then
    07FB: set_interior 'MADDOGS' access 0
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    actor.PutAtNoOffset(PLAYER_ACTOR,1260.8179, -783.9473, 1091.9062)
    actor.Angle(PLAYER_ACTOR) = 315.4537
    select_interior 5
    0860: link_actor PLAYER_ACTOR to_interior 5
    04F9: set_sky_color 1 fade 0
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D
    end
    
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1263.2556 -785.3626 1091.9062 radius 5.0
    OOS_ACT_GATES_BOMBED_FLAG == 1
        then                
        
        :OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_MANSION_CAPTURE2                
        fade 0 0
        marker.Disable(MISSION_MARKER)
        $HUD_REMOVE = 1
        
        $SAVESTATUS = 1
        
        repeat
        wait 0
        until $ENTERED_BCAMP_NUMBER == 0
        
        if
        OOS_ACT_GUNPOWDER_EXITED == 1
        then
            
        for 0@ = 21 to 28
        actor.DestroyInstantly($ARMY69_2[0@])
        end
            
        end                
        
        actor.PutAtNoOffset(PLAYER_ACTOR,1260.8179, -783.9473, 1091.9062)
        actor.Angle(PLAYER_ACTOR) = 315.4537
        select_interior 5
        0860: link_actor PLAYER_ACTOR to_interior 5
        04F9: set_sky_color 1 fade 0
        camera.Restore_WithJumpCut()
        create_thread @REFR_3D                
                
        if
        not OOS_ACT_ENKER_GROUP_PROGRESS == 5
            then
            0632: release_group OOS_ACT_ENKER_GROUP
            actor.DestroyInstantly($CAMP_ACTOR[5])
            actor.DestroyInstantly($CAMP_ACTOR[6])
            actor.DestroyInstantly($CAMP_ACTOR[7])
            actor.DestroyInstantly($CAMP_ACTOR[8])
            actor.DestroyInstantly($CAMP_ACTOR[9])
            actor.DestroyInstantly(OOS_ACT_ENKER)
            OOS_ACT_ENKER_GROUP_PROGRESS = 5
            end
            
        if
        not OOS_ACT_GARNET_GROUP_PROGRESS == 5
            then
            0632: release_group OOS_ACT_GARNET_GROUP
            actor.DestroyInstantly($CAMP_ACTOR[0])
            actor.DestroyInstantly($CAMP_ACTOR[1])
            actor.DestroyInstantly($CAMP_ACTOR[2])
            actor.DestroyInstantly($CAMP_ACTOR[3])
            actor.DestroyInstantly($CAMP_ACTOR[4])
            actor.DestroyInstantly(OOS_ACT_GARNET)
            actor.DestroyInstantly(OOS_ACT_ARTEMIS)
            actor.DestroyInstantly(OOS_ACT_DANIEL)
            OOS_ACT_GARNET_GROUP_PROGRESS = 5
            end
        
        if
        not OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS == 5
            then        
            0632: release_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
            actor.DestroyInstantly($VERSUS_PEOPLE[0])
            actor.DestroyInstantly($VERSUS_PEOPLE[1])
            actor.DestroyInstantly($VERSUS_PEOPLE[2])
            actor.DestroyInstantly($VERSUS_PEOPLE[3])
            actor.DestroyInstantly($VERSUS_PEOPLE[4])
            $VERSUS_PEOPLE[3] = -1
            $VERSUS_PEOPLE[4] = -1
            actor.DestroyInstantly(OOS_ACT_FERNANDO_ZAMESTITEL)
            OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 5
            end
            
        if
        OOS_FARMERS_WITH_PLAYER == 1
            then
            
            0632: release_group OOS_ACT_FERMERS_GROUP
            
            for 0@ = 26 to 37
            
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
            then
            OOS_ACT_FERMERS_SURVIVERS_NUM += 1
            end
            
            if
            82F2: not  actor $RNDM_HOUSE_WEAPON[0@] model == 14731
            then   
            actor.DestroyInstantly($RNDM_HOUSE_WEAPON[0@])
            end
            
            end
            
            end                
        
        /////////////////////Плавное затухание/////////////////////

        0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
        if
        0@ == 1
        then

//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
//            
//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        end
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
        wait 1000
        audiostream.Release($MUSIC_ASSHOLE)
        
        end        
            
        /////////////////////////////////////////////////////////////////////
        
        0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
        if or 
        0@ == 1
        0@ == 2
        then
            
        MAIN_QUEST_MUSIC_FLAG = 1
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS5.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
        wait 0
        
        end                 
        
        /////////////////////////////////////////////////////////////////////
        
        0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
        if
        0@ >= 3
            then                        
            jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_BUNKER_CAPTURE
            end  
        
        OOS_MARK = 156547
        ENEMY_ZONE_CLIMB_FLAG = 0
        $SAVESTATUS = 0
        $HEAL_PICKUP[0] = pickup.Create(HEAL_PICKUP_ID, 3, 1253.08, -795.666, 1084.23)
        $HEAL_PICKUP[1] = pickup.Create(HEAL_PICKUP_ID, 3, 1283.538, -809.6107, 1085.635)
        0@ = Pickup.Create(#BODYARMOUR, 3, 1271.0476, -775.4411, 1091.9062)
        0@ = Pickup.Create(#BODYARMOUR, 3, 1284.6781, -789.0151, 1084.0078)         
        $FOOD_PICKUP[0] = pickup.Create(BANKA_PICKUP_ID,3,1262.3, -793.15, 1084.23)
        032B: 0@ = create_weapon_pickup #M4 type 3 ammo 150 at 1272.54 -805.385 1084.01      
        
        player.CanMove(PLAYER_CHAR,true)
        
        actor.PutAtNoOffset(PLAYER_ACTOR,1263.47, -785.7448, 1091.9062)
        COOP_TP_TEAMMATES_FLAG = 1
        
        repeat
        wait 0
        until 056D:   actor $RNDM_HOUSE_WEAPON[32] defined
        
        repeat
        wait 0
        until 056D:   actor $ARMY69_2[39] defined                              
        
        for 0@ = 26 to 31
        05E2: AS_actor $RNDM_HOUSE_WEAPON[0@] kill_actor PLAYER_ACTOR 
        end
        
        if
        MAIN_QUEST6_COMPLETED_FLAG == 1
        then
        actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[32],true)
        end
        
        08C7: put_actor PLAYER_ACTOR at 1260.8179 -783.9473 1090.9062 dont_warp_gang
        
        32@ = 0
        
        fade 1 500
        $HUD_REMOVE = 0
        
        repeat
        wait 0
        
        if
        0E45: frame_mod 5
        then
        gosub @EXTRA_MANSION_FIGHTERS_DO_AI_STUFF
        gosub @OOS_ATTACK_SYSTEM
        end
        
        until 32@ >= 500
        
//        wait 500
        
        07FB: set_interior 'MADDOGS' access 0
        08E7: disable_entrance_markers 1
        
        0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
        if
        0@ < 2
        then                
        0AF1: write_int 2 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
        create_thread @OOS_CHK
        create_thread @OOS_CH2        
        end
        
        /////////////////////Плавное нарастание/////////////////////
//            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
//        
//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        
//        if
//        0E45: frame_mod 15
//        then
//        gosub @EXTRA_MANSION_FIGHTERS_DO_AI_STUFF
//        gosub @OOS_ATTACK_SYSTEM
//        end
//        
//        end
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
        
        /////////////////////////////////////////////////////////////////////
            
        MAIN_QUEST_MUSIC_FLAG = 1
        $MUSIC_CRAZY = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\shoot_sounds.wav")
        Audiostream.PerformAction($MUSIC_CRAZY, PLAY)
        Audiostream.Loop($MUSIC_CRAZY, 1)
        Audiostream.Volume($MUSIC_CRAZY) = VERO_TIPA_VOLUME
            
        /////////////////////Плавное нарастание/////////////////////
//            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_CRAZY // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1          
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_CRAZY volume $MUSIC_VOLUME time 1000
                
        break
               
        end    
    end

if and
0E45: frame_mod 30
OOS_ACT_ENKER_GROUP_PROGRESS == 1
    then
    if
    0AD2: 1@ = player 0 targeted_actor //IF and SET
        then
        089F: get_actor 1@ pedtype_to 2@
        if
        2@ == 25
            then
            //0AD1: show_formatted_text_highpriority "ENKER GROUP ATTACK PLAYER TARGET" time 1000
                        
            05E2: AS_actor OOS_ACT_ENKER kill_actor 1@
            0085: OOS_ACT_ENKER_GROUP_TARGET = 1@ // (int)
            actor.StorePos(1@,4@,5@,6@)                       
            
            for 0@ = 5 to 9   
            if and
            not actor.Dead($CAMP_ACTOR[0@])
            82E0: not  actor $CAMP_ACTOR[0@] firing_weapon
                then
                if
                0364:   actor $CAMP_ACTOR[0@] spotted_actor 1@
                    then
                    0637: AS_actor $CAMP_ACTOR[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@   
                    else
                    actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
                    0637: AS_actor $CAMP_ACTOR[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@   
                    end
                end
            end
            
            end
        end  
    else    
    if and
    0E45: frame_mod 15
    OOS_ACT_ENKER_GROUP_PROGRESS == 1
        then
        if
        056D:   actor OOS_ACT_ENKER_GROUP_TARGET defined
            then     
            if
            actor.Dead(OOS_ACT_ENKER_GROUP_TARGET)
                then
                
                :ENKER_SQUAD_STOPTASK911
                
                for 0@ = 5 to 9   
                if and
                not actor.Dead($CAMP_ACTOR[0@])
                0E42: is_char_doing_task_id $CAMP_ACTOR[0@] 901
                    then
                    05B9: AS_actor $CAMP_ACTOR[0@] stay_idle 250 ms
//                    0AD1: show_formatted_text_highpriority "STOP THIS PLEASE, ENKER SQUAD" time 2000
                    end
                end
                
                end
            else
            jump to @ENKER_SQUAD_STOPTASK911
            end
        end       
    end

if and
OOS_ACT_ENKER_GROUP_PROGRESS == 0
0E45: frame_mod 30
    then    
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_ENKER pos 1319.869 -757.9255 92.9074 radius 15.0
        then
        0850: AS_actor OOS_ACT_ENKER follow_actor PLAYER_ACTOR
        OOS_ACT_ENKER_GROUP_PROGRESS = 1
        //0AD1: show_formatted_text_highpriority "ENKER GROUP FOLLOW PLAYER" time 2000
        end    
    end
    
if and
0E45: frame_mod 30
OOS_ACT_GARNET_GROUP_PROGRESS == 1
    then
    if
    0AD2: 1@ = player 0 targeted_actor //IF and SET
        then
        089F: get_actor 1@ pedtype_to 2@
        if
        2@ == 25
            then
            //0AD1: show_formatted_text_highpriority "GARNET GROUP ATTACK PLAYER TARGET" time 1000
            
            05E2: AS_actor OOS_ACT_GARNET kill_actor 1@
            0085: OOS_ACT_GARNET_GROUP_TARGET = 1@ // (int)
            actor.StorePos(1@,4@,5@,6@)                       
            
            for 0@ = 0 to 4   
            if and
            not actor.Dead($CAMP_ACTOR[0@])
            82E0: not  actor $CAMP_ACTOR[0@] firing_weapon
                then
                if
                0364:   actor $CAMP_ACTOR[0@] spotted_actor 1@
                    then
                    0637: AS_actor $CAMP_ACTOR[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@  
                    else
                    actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
                    0637: AS_actor $CAMP_ACTOR[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@  
                    end
                end
            end
            
            end
        end
    else    
    if and
    0E45: frame_mod 15
    OOS_ACT_GARNET_GROUP_PROGRESS == 1
        then
        if
        056D:   actor OOS_ACT_GARNET_GROUP_TARGET defined
            then     
            if
            actor.Dead(OOS_ACT_GARNET_GROUP_TARGET)
                then
                
                :GARNET_SQUAD_STOPTASK911
                
                for 0@ = 0 to 4   
                if and
                not actor.Dead($CAMP_ACTOR[0@])
                0E42: is_char_doing_task_id $CAMP_ACTOR[0@] 901
                    then
                    05B9: AS_actor $CAMP_ACTOR[0@] stay_idle 250 ms
//                    0AD1: show_formatted_text_highpriority "STOP THIS PLEASE, GARNET SQUAD" time 2000
                    end
                end
                
                end
            else
            jump to @GARNET_SQUAD_STOPTASK911
            end
        end             
    end    

if and
OOS_ACT_GARNET_GROUP_PROGRESS == 0
0E45: frame_mod 30
    then    
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_GARNET pos 1288.9657 -737.8396 94.8511 radius 15.0
        then
        0850: AS_actor OOS_ACT_GARNET follow_actor PLAYER_ACTOR
        OOS_ACT_GARNET_GROUP_PROGRESS = 1
        //0AD1: show_formatted_text_highpriority "GARNET GROUP FOLLOW PLAYER" time 2000
        end    
    end
    
if and
0E45: frame_mod 30
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS == 1
    then
    if
    0AD2: 1@ = player 0 targeted_actor //IF and SET
        then
        089F: get_actor 1@ pedtype_to 2@
        if
        2@ == 25
            then
            //0AD1: show_formatted_text_highpriority "FERNANDO GROUP ATTACK PLAYER TARGET" time 1000
            
            05E2: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL kill_actor 1@
            0085: OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_TARGET = 1@ // (int)
            actor.StorePos(1@,4@,5@,6@)                       
            
            for 0@ = 0 to 4   
            if and
            not actor.Dead($VERSUS_PEOPLE[0@])
            82E0: not  actor $VERSUS_PEOPLE[0@] firing_weapon
                then
                if
                0364:   actor $VERSUS_PEOPLE[0@] spotted_actor 1@
                    then
                    0637: AS_actor $VERSUS_PEOPLE[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@  
                    else
                    actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
                    0637: AS_actor $VERSUS_PEOPLE[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@ 
                    end
                end
            end
            
            end
        end 
    else    
    if and
    0E45: frame_mod 15
    OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS == 1
        then
        if
        056D:   actor OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_TARGET defined
            then     
            if
            actor.Dead(OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_TARGET)
                then
                
                :FERNANDO_ZAMESTITEL_SQUAD_STOPTASK911
                
                for 0@ = 0 to 4   
                if and
                not actor.Dead($VERSUS_PEOPLE[0@])
                0E42: is_char_doing_task_id $VERSUS_PEOPLE[0@] 901
                    then
                    05B9: AS_actor $VERSUS_PEOPLE[0@] stay_idle 250 ms
//                    0AD1: show_formatted_text_highpriority "STOP THIS PLEASE, FERNANDO ZAMESTITEL SQUAD" time 2000
                    end
                end
                
                end
            else
            jump to @FERNANDO_ZAMESTITEL_SQUAD_STOPTASK911
            end
        end        
    end    

if and
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS == 0
0E45: frame_mod 30
    then
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_FERNANDO_ZAMESTITEL pos 1227.8773 -742.5673 96.5523 radius 7.5
        then
        0850: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL follow_actor PLAYER_ACTOR
        OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 1
//        0AD1: show_formatted_text_highpriority "FERNANDO ZAM GROUP FOLLOW PLAYER" time 2000
        04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER1 crouch 0
        04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER2 crouch 0
        04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER3 crouch 0
        04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER4 crouch 0
        04EB: AS_actor OOS_ACT_FERNANDO_FIGTHER5 crouch 0
        else
        
        for 0@ = 0 to 4   
        if
        not actor.Dead($VERSUS_PEOPLE[0@])        
            then
            if or
            0E42: is_char_doing_task_id $VERSUS_PEOPLE[0@] 254
            0E42: is_char_doing_task_id $VERSUS_PEOPLE[0@] 267
                then
                0687: clear_actor $VERSUS_PEOPLE[0@] task
                0631: put_actor $VERSUS_PEOPLE[0@] in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
                04EB: AS_actor $VERSUS_PEOPLE[0@] crouch 0
                0850: AS_actor $VERSUS_PEOPLE[0@] follow_actor OOS_ACT_FERNANDO_ZAMESTITEL
//                0AD1: show_formatted_text_highpriority "STOP TRAHAT ZABOR PLZ" time 2000
                end
            end
        end
        
        end    
    end

if
OOS_FARMERS_WITH_PLAYER == 1
then
    
if and
0E45: frame_mod 30
OOS_ACT_FERMERS_GROUP_PROGRESS == 1
    then
    if
    0AD2: 1@ = player 0 targeted_actor //IF and SET
        then
        089F: get_actor 1@ pedtype_to 2@
        if
        2@ == 25
            then
            //0AD1: show_formatted_text_highpriority "FERMERS GROUP ATTACK PLAYER TARGET" time 1000                        
            
            05E2: AS_actor OOS_ACT_FERMER1 kill_actor 1@  
            0085: OOS_ACT_FERNANDO_FERMERS_GROUP_TARGET = 1@ // (int)        
            actor.StorePos(1@,4@,5@,6@)            
            
            for 0@ = 27 to 32   
            if and
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
            82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon
                then
                if
                0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 1@
                    then
                    0637: AS_actor $RNDM_HOUSE_WEAPON[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@   
                    else
                    actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
                    0637: AS_actor $RNDM_HOUSE_WEAPON[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@     
                    end
                end
            end
            
            end
        end
    else
    if and
    0E45: frame_mod 15
    OOS_ACT_FERMERS_GROUP_PROGRESS == 1
        then
        if
        056D:   actor OOS_ACT_FERNANDO_FERMERS_GROUP_TARGET defined
            then     
            if
            actor.Dead(OOS_ACT_FERNANDO_FERMERS_GROUP_TARGET)
                then
                
                :FERMERS_SQUAD1_STOPTASK911
                
                for 0@ = 27 to 32   
                if and
                not actor.Dead($RNDM_HOUSE_WEAPON[0@])
                0E42: is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 901
                    then
                    05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 250 ms
//                    0AD1: show_formatted_text_highpriority "STOP THIS PLEASE, FERMERS SQUAD1" time 2000
                    end
                end
                
                end
            else
            jump to @FERMERS_SQUAD1_STOPTASK911
            end
        end  
    end    

if and
OOS_ACT_FERMERS_GROUP_PROGRESS == 0
0E45: frame_mod 30
    then
    
    for 0@ = 26 to 32   
    if and
    0EEA: locate_char_distance_to_coordinates $RNDM_HOUSE_WEAPON[0@] pos 1275.2589 -747.7653 95.5611 radius 5.0
    06EF:   actor $RNDM_HOUSE_WEAPON[0@] leading_group OOS_ACT_FERMERS_GROUP
        then
        0850: AS_actor $RNDM_HOUSE_WEAPON[0@] follow_actor PLAYER_ACTOR
        OOS_ACT_FERMERS_GROUP_PROGRESS = 1
        //0AD1: show_formatted_text_highpriority "FERMERS GROUP FOLLOW PLAYER" time 2000
        end
    end
    
    end
    
if and
0E45: frame_mod 30
OOS_ACT_FERMERS_GROUP2_PROGRESS == 1
    then
    if
    0AD2: 1@ = player 0 targeted_actor //IF and SET
        then
        089F: get_actor 1@ pedtype_to 2@
        if
        2@ == 25
            then
            //0AD1: show_formatted_text_highpriority "FERMERS GROUP2 ATTACK PLAYER TARGET" time 1000                        
            
            05E2: AS_actor OOS_ACT_FERMER8 kill_actor 1@
            0085: OOS_ACT_FERNANDO_FERMERS_GROUP2_TARGET = 1@ // (int)
            actor.StorePos(1@,4@,5@,6@)            
            
            for 0@ = 34 to 37   
            if and
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
            82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon
            06EE:   actor $RNDM_HOUSE_WEAPON[0@] in_group OOS_ACT_FERMERS_GROUP2
                then
                if
                0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 1@
                    then
                    0637: AS_actor $RNDM_HOUSE_WEAPON[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@  
                    else
                    actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
                    0637: AS_actor $RNDM_HOUSE_WEAPON[0@] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor 1@ 
                    end
                end
            end
            
            end
        end
    else
    if and
    0E45: frame_mod 15
    OOS_ACT_FERMERS_GROUP2_PROGRESS == 1
        then
        if
        056D:   actor OOS_ACT_FERNANDO_FERMERS_GROUP2_TARGET defined
            then     
            if
            actor.Dead(OOS_ACT_FERNANDO_FERMERS_GROUP2_TARGET)
                then
                
                :FERMERS_SQUAD2_STOPTASK911
                
                for 0@ = 34 to 37   
                if and
                not actor.Dead($RNDM_HOUSE_WEAPON[0@])
                0E42: is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 901
                    then
                    05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 250 ms
//                    0AD1: show_formatted_text_highpriority "STOP THIS PLEASE, FERMERS SQUAD2" time 2000
                    end
                end
                
                end
            else
            jump to @FERMERS_SQUAD2_STOPTASK911
            end
        end    
    end    

if and
OOS_ACT_FERMERS_GROUP2_PROGRESS == 0
0E45: frame_mod 30
    then
    
    for 0@ = 33 to 37   
    if and
    0EEA: locate_char_distance_to_coordinates $RNDM_HOUSE_WEAPON[0@] pos 1275.2589 -747.7653 95.5611 radius 5.0
    06EF:   actor $RNDM_HOUSE_WEAPON[0@] leading_group OOS_ACT_FERMERS_GROUP2
        then
        0850: AS_actor $RNDM_HOUSE_WEAPON[0@] follow_actor PLAYER_ACTOR
        OOS_ACT_FERMERS_GROUP2_PROGRESS = 1
        //0AD1: show_formatted_text_highpriority "FERMERS GROUP FOLLOW PLAYER" time 2000
        end
    end
    
    end    
    
end     

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL

if
OOS_ACT_KILLED_BANDITS == 0
then

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then

for 0@ = 0 to 20
05BE: AS_actor $ARMY69_2[0@] die
end

end

if and
8184:   actor $ARMY69_2[0] health < 1
8184:   actor $ARMY69_2[1] health < 1
8184:   actor $ARMY69_2[2] health < 1
8184:   actor $ARMY69_2[3] health < 1
8184:   actor $ARMY69_2[4] health < 1
8184:   actor $ARMY69_2[5] health < 1
8184:   actor $ARMY69_2[6] health < 1
8184:   actor $ARMY69_2[7] health < 1
    then
    if and
    8184:   actor $ARMY69_2[8] health < 1
    8184:   actor $ARMY69_2[9] health < 1
    8184:   actor $ARMY69_2[10] health < 1
    8184:   actor $ARMY69_2[11] health < 1
    8184:   actor $ARMY69_2[12] health < 1
    8184:   actor $ARMY69_2[13] health < 1
    8184:   actor $ARMY69_2[14] health < 1
    8184:   actor $ARMY69_2[15] health < 1
        then
        if and
        8184:   actor $ARMY69_2[16] health < 1
        8184:   actor $ARMY69_2[17] health < 1
        8184:   actor $ARMY69_2[18] health < 1
        8184:   actor $ARMY69_2[19] health < 1
        8184:   actor $ARMY69_2[20] health < 1
            then
            
            if
            OOS_ACT_GUNPOWDER_EXITED == 1
            then
            if and
            8184:   actor $ARMY69_2[21] health < 1
            8184:   actor $ARMY69_2[22] health < 1
            8184:   actor $ARMY69_2[23] health < 1
            8184:   actor $ARMY69_2[24] health < 1
            8184:   actor $ARMY69_2[25] health < 1
            8184:   actor $ARMY69_2[26] health < 1
            8184:   actor $ARMY69_2[27] health < 1
            8184:   actor $ARMY69_2[28] health < 1
                then
                if
                RAID_HELI_SPAWNED_FLAG == 0
                    then
                    //ass
                    else
                    jump to @SKIP_KILLED_BANDITS_GUNPOWDER_MOMENT
                    end
                else
                jump to @SKIP_KILLED_BANDITS_GUNPOWDER_MOMENT
                end
            end
            
            OOS_ACT_KILLED_BANDITS = 1
            
            $END_DIALOG_INST = 0
            wait 0
            v$ST_DIALOG[0] = "END283"
            $DIALOG_COUNT = 0
            $DIALOG_NOT_SKIP = 1
            create_thread @DG_SYS2
            
            v$OBJECTIVE = "DUMMY"
            
            0151: remove_status_text ENKER_HEALTH_STATUS_TEXT
            0151: remove_status_text GARNET_HEALTH_STATUS_TEXT
            0151: remove_status_text FERNANDO_ZAM_HEALTH_STATUS_TEXT
            0151: remove_status_text ARTEMIS_DANIEL_HEALTH_STATUS_TEXT
            
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            /////////////////////Плавное затухание/////////////////////
//
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//            $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1
//            
//            while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//            wait 0
//            end
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
            wait 1000
            audiostream.Release($MUSIC_ASSHOLE)
            
            /////////////////////////////////////////////////////////////////////
            
            MAIN_QUEST_MUSIC_FLAG = 1
            $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS4.mp3")
            250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
            Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
            Audiostream.Loop($MUSIC_ASSHOLE, 1)
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            
            /////////////////////Плавное нарастание/////////////////////
//            
//            $MUSIC_FADE_NUMBER += 1
//            if
//            $MUSIC_FADE_NUMBER > 4
//                then
//                $MUSIC_FADE_NUMBER = 0 
//                end    
//            
//            0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//            0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//            $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//            $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//            $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//            create_thread @MUS_FAD
//            
//            wait 1 
            2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
            /////////////////////////////////////////////////////////////////////
            
            if
            OOS_ACT_GATES_BOMBED_FLAG == 1
            then
            
            v$OBJECTIVE = "GME1344"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GMR1344"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)                    
            018A: MISSION_MARKER = create_checkpoint_at 1259.0801 -785.4126 92.0302
            
            OOS_ACT_ENKER_GROUP_PROGRESS = 3 
            OOS_ACT_GARNET_GROUP_PROGRESS = 3 
            OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 3 
            OOS_ACT_FERMERS_GROUP_PROGRESS = 3
            OOS_ACT_FERMERS_GROUP2_PROGRESS = 3
            
            for 0@ = 34 to 37

            if
            056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
            then

            if and
            06EE:   actor $RNDM_HOUSE_WEAPON[0@] in_group PLAYER_GROUP
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
            82F2: not  actor $RNDM_HOUSE_WEAPON[0@] model == 14731
            then
            06C9: remove_actor $RNDM_HOUSE_WEAPON[0@] from_group
            0631: put_actor $RNDM_HOUSE_WEAPON[0@] in_group OOS_ACT_FERMERS_GROUP2
            end
            
            end
            
            end 
            
            actor.PutAt(PLAYER_ACTOR,1245.5782, -769.4937, 91.8066)
            actor.Angle(PLAYER_ACTOR) = 180.274
            camera.Restore_WithJumpCut()
            create_thread @REFR_3D
            
            actor.PutAt(OOS_ACT_GARNET,1245.4962, -761.8362, 92.6288)
            actor.Angle(OOS_ACT_GARNET) = 181.3336
            
            actor.PutAt(OOS_ACT_ENKER,1248.6194, -761.7778, 92.5719)
            actor.Angle(OOS_ACT_ENKER) = 178.1845
            
            actor.PutAt(OOS_ACT_FERNANDO_ZAMESTITEL,1241.8885, -761.3942, 92.7713)
            actor.Angle(OOS_ACT_FERNANDO_ZAMESTITEL) = 188.7836
            
            07B3: set_group OOS_ACT_FERMERS_GROUP_PROGRESS give_command 3
            07B3: set_group OOS_ACT_FERMERS_GROUP2_PROGRESS give_command 3                        
            
            for 0@ = 26 to 32   
            if
            06EF:   actor $RNDM_HOUSE_WEAPON[0@] leading_group OOS_ACT_FERMERS_GROUP
                then
                break  
                end
            end
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then            
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
                then
                actor.PutAt($RNDM_HOUSE_WEAPON[0@],1244.8939, -755.3877, 93.5314)
                actor.Angle($RNDM_HOUSE_WEAPON[0@]) = 181.7725
                04EB: AS_actor $RNDM_HOUSE_WEAPON[0@] crouch 0
                end            
            end
            
            for 0@ = 33 to 37   
            if
            06EF:   actor $RNDM_HOUSE_WEAPON[0@] leading_group OOS_ACT_FERMERS_GROUP2
                then
                break  
                end
            end                        
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then            
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
                then
                actor.PutAt($RNDM_HOUSE_WEAPON[0@],1240.837, -749.1763, 94.6837)
                actor.Angle($RNDM_HOUSE_WEAPON[0@]) = 184.6713
                04EB: AS_actor $RNDM_HOUSE_WEAPON[0@] crouch 0
                end            
            end
            
            07FB: set_interior 'MADDOGS' access 1
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            else
            
            //////////////////////////
            
            v$OBJECTIVE = "GME1345"
            if
            REALISM_MODE == 1
            then
            v$OBJECTIVE = "GMR1345"
            end
            0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
            $SOUNDS_VOLUME3 *= 0.5
            Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
            Audiostream.Loop($MENU_SCIFI_SOUND, 0)
            Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)                    
            
            OOS_ACT_ENKER_GROUP_PROGRESS = 2 
            OOS_ACT_GARNET_GROUP_PROGRESS = 2 
            OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 2 
            OOS_ACT_FERMERS_GROUP_PROGRESS = 2
            
            for 0@ = 34 to 37

            if
            056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
            then

            if and
            06EE:   actor $RNDM_HOUSE_WEAPON[0@] in_group PLAYER_GROUP
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
            82F2: not  actor $RNDM_HOUSE_WEAPON[0@] model == 14731
            then
            06C9: remove_actor $RNDM_HOUSE_WEAPON[0@] from_group
            0631: put_actor $RNDM_HOUSE_WEAPON[0@] in_group OOS_ACT_FERMERS_GROUP2
            end
            
            end
            
            end
            
            actor.PutAt(PLAYER_ACTOR,1245.1343, -756.8037, 93.3104)
            actor.Angle(PLAYER_ACTOR) = 182.1908
            camera.Restore_WithJumpCut()
            create_thread @REFR_3D
            
            actor.PutAt(OOS_ACT_GARNET,1238.1656, -737.2275, 95.65679)
            actor.Angle(OOS_ACT_GARNET) = 207.6128
            05B9: AS_actor OOS_ACT_GARNET stay_idle 999999 ms
            
            actor.PutAt(OOS_ACT_ENKER,1242.2024, -735.6301, 95.3207)
            actor.Angle(OOS_ACT_ENKER) = 192.978
            05B9: AS_actor OOS_ACT_ENKER stay_idle 999999 ms
            
            actor.PutAt(OOS_ACT_FERNANDO_ZAMESTITEL,1234.4199, -738.645, 95.9658)
            actor.Angle(OOS_ACT_FERNANDO_ZAMESTITEL) = 207.7446
            05B9: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL stay_idle 999999 ms
            
            for 0@ = 26 to 32   
            if
            06EF:   actor $RNDM_HOUSE_WEAPON[0@] leading_group OOS_ACT_FERMERS_GROUP
                then
                break  
                end
            end
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
                then
                actor.PutAt($RNDM_HOUSE_WEAPON[0@],1236.8918, -731.9717, 95.5497)
                actor.Angle($RNDM_HOUSE_WEAPON[0@]) = 199.1127
                04EB: AS_actor $RNDM_HOUSE_WEAPON[0@] crouch 0
                05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 999999 ms
                end
            end
            
            for 0@ = 33 to 37   
            if
            06EF:   actor $RNDM_HOUSE_WEAPON[0@] leading_group OOS_ACT_FERMERS_GROUP2
                then
                break 
                end
            end            
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then
            if
            not actor.Dead($RNDM_HOUSE_WEAPON[0@])
                then
                actor.PutAt($RNDM_HOUSE_WEAPON[0@],1237.046, -723.8544, 97.9214)
                actor.Angle($RNDM_HOUSE_WEAPON[0@]) = 178.294
                04EB: AS_actor $RNDM_HOUSE_WEAPON[0@] crouch 0
                05B9: AS_actor $RNDM_HOUSE_WEAPON[0@] stay_idle 999999 ms
                end
            end
            
            //////////////////////////////////////////////

            04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 8 weapon 8@ ammo 9@ model 10@
            if
            9@ < 1
            then
            
            0781: get_weapon_with_ID 16 model_to 8@
            
            while not model.Available(8@)
            wait 0
            model.Load(8@)
            mload
            end
             
            Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 16, 3)
            else
            //ass
            end
            
            //////////////////////////////////////////////  
            
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            v$ST_DIALOG[0] = "END284"
            $DIALOG_COUNT = 0
            $DIALOG_NOT_SKIP = 1
            create_thread @DG_SYS2                       
            
            //////////////////////////
            
            end
                       
            end
        end
    end
end

:SKIP_KILLED_BANDITS_GUNPOWDER_MOMENT

if and
OOS_ACT_GARNET_GROUP_PROGRESS == 2 
OOS_ACT_GATES_BOMBED_FLAG == 1
    then
    
    v$OBJECTIVE = "GME1344"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1344"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)        
    018A: MISSION_MARKER = create_checkpoint_at 1259.0801 -785.4126 92.0302
    
    OOS_ACT_ENKER_GROUP_PROGRESS = 3 
    OOS_ACT_GARNET_GROUP_PROGRESS = 3 
    OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 3 
    OOS_ACT_FERMERS_GROUP_PROGRESS = 3
    
    07FB: set_interior 'MADDOGS' access 1
    
    end

/////////////////////////////////////////////////////////////////

if and
OOS_ACT_FERMERS_GROUP_PROGRESS == 2
OOS_FARMERS_WITH_PLAYER == 1
then

for 0@ = 26 to 37   
    if
    not actor.Dead($RNDM_HOUSE_WEAPON[0@])
        then
        05C8: AS_actor $RNDM_HOUSE_WEAPON[0@] look_around                    
        end
    end

end

if
OOS_ACT_ENKER_GROUP_PROGRESS == 3
    then
    OOS_ACT_ENKER_GROUP_PROGRESS = 4    
    
    0615: define_AS_pack_begin 1@    
    05D3: AS_actor -1 goto_point 1244.6432 -798.7363 89.0648 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1250.8364 -798.831 89.0564 mode 7 time 10000 ms // versionA
    078F: AS_actor -1 climb 1
    05D3: AS_actor -1 goto_point 1286.8549 -798.8758 88.3151 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1297.2781 -805.8412 88.3151 mode 7 time 10000 ms // versionA
    078F: AS_actor -1 climb 1
    05D3: AS_actor -1 goto_point 1298.6572 -798.5724 84.1406 mode 7 time 10000 ms // versionA    
    0616: define_AS_pack_end 1@
    
    for 0@ = 5 to 9   
    if
    not actor.Dead($CAMP_ACTOR[0@])
        then
        06C9: remove_actor $CAMP_ACTOR[0@] from_group
        0687: clear_actor $CAMP_ACTOR[0@] task
        0856: set_actor $CAMP_ACTOR[0@] enable_crouch 0
        0792: disembark_instantly_actor $CAMP_ACTOR[0@]              
        0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@                
        end
    end
    
    06C9: remove_actor OOS_ACT_ENKER from_group
    0687: clear_actor OOS_ACT_ENKER task
    0856: set_actor OOS_ACT_ENKER enable_crouch 0
    0792: disembark_instantly_actor OOS_ACT_ENKER
    0618: assign_actor OOS_ACT_ENKER to_AS_pack 1@
    
    0616: define_AS_pack_end 1@
    061B: remove_references_to_AS_pack 1@                      
        
    end
    
if
OOS_ACT_GARNET_GROUP_PROGRESS == 3
    then
    OOS_ACT_GARNET_GROUP_PROGRESS = 4 
    
    0615: define_AS_pack_begin 1@    
    05D3: AS_actor -1 goto_point 1244.6432 -798.7363 89.0648 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1250.8364 -798.831 89.0564 mode 7 time 10000 ms // versionA
    078F: AS_actor -1 climb 1
    05D3: AS_actor -1 goto_point 1286.8549 -798.8758 88.3151 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1297.2781 -805.8412 88.3151 mode 7 time 10000 ms // versionA
    078F: AS_actor -1 climb 1
    05D3: AS_actor -1 goto_point 1298.6572 -798.5724 84.1406 mode 7 time 10000 ms // versionA    
    0616: define_AS_pack_end 1@       
    
    for 0@ = 0 to 4   
    if
    not actor.Dead($CAMP_ACTOR[0@])
        then
        06C9: remove_actor $CAMP_ACTOR[0@] from_group
        0687: clear_actor $CAMP_ACTOR[0@] task
        0856: set_actor $CAMP_ACTOR[0@] enable_crouch 0
        0792: disembark_instantly_actor $CAMP_ACTOR[0@]              
        0618: assign_actor $CAMP_ACTOR[0@] to_AS_pack 1@                
        end
    end
    
    06C9: remove_actor OOS_ACT_GARNET from_group
    0687: clear_actor OOS_ACT_GARNET task
    0856: set_actor OOS_ACT_GARNET enable_crouch 0
    0792: disembark_instantly_actor OOS_ACT_GARNET
    
    06C9: remove_actor OOS_ACT_ARTEMIS from_group
    0687: clear_actor OOS_ACT_ARTEMIS task
    0856: set_actor OOS_ACT_ARTEMIS enable_crouch 0
    0792: disembark_instantly_actor OOS_ACT_ARTEMIS
    
    06C9: remove_actor OOS_ACT_DANIEL from_group
    0687: clear_actor OOS_ACT_DANIEL task
    0856: set_actor OOS_ACT_DANIEL enable_crouch 0
    0792: disembark_instantly_actor OOS_ACT_DANIEL
    
    0618: assign_actor OOS_ACT_GARNET to_AS_pack 1@
    0618: assign_actor OOS_ACT_ARTEMIS to_AS_pack 1@
    0618: assign_actor OOS_ACT_DANIEL to_AS_pack 1@              
    
    0616: define_AS_pack_end 1@
    061B: remove_references_to_AS_pack 1@           
        
    end    
    
/////////////////////////////////////////////////////////////////    
    
if
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS == 3
    then
    OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 4        
    
    0615: define_AS_pack_begin 1@    
    05D3: AS_actor -1 goto_point 1243.0448 -806.2072 88.4 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1208.5721 -813.6673 87.2301 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1219.0226 -826.9034 85.4867 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1231.5703 -831.2166 84.2187 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1251.9279 -814.7682 84.1478 mode 7 time 10000 ms // versionA
    05D3: AS_actor -1 goto_point 1254.928 -800.8898 84.1406 mode 7 time 10000 ms // versionA
    0616: define_AS_pack_end 1@
    
    for 0@ = 0 to 4   
    if
    not actor.Dead($VERSUS_PEOPLE[0@])
        then
        06C9: remove_actor $VERSUS_PEOPLE[0@] from_group
        0687: clear_actor $VERSUS_PEOPLE[0@] task
        0856: set_actor $VERSUS_PEOPLE[0@] enable_crouch 0
        0792: disembark_instantly_actor $VERSUS_PEOPLE[0@]              
        0618: assign_actor $VERSUS_PEOPLE[0@] to_AS_pack 1@                
        end
    end
    
    if
    not actor.Dead(OOS_ACT_FERNANDO_ZAMESTITEL)
    then
    06C9: remove_actor OOS_ACT_FERNANDO_ZAMESTITEL from_group
    0687: clear_actor OOS_ACT_FERNANDO_ZAMESTITEL task
    0856: set_actor OOS_ACT_FERNANDO_ZAMESTITEL enable_crouch 0
    0792: disembark_instantly_actor OOS_ACT_FERNANDO_ZAMESTITEL
    0618: assign_actor OOS_ACT_FERNANDO_ZAMESTITEL to_AS_pack 1@    
    end
    
    0616: define_AS_pack_end 1@
    061B: remove_references_to_AS_pack 1@
    
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    v$ST_DIALOG[0] = "DUMMY"
    if
    OOS_FARMERS_WITH_PLAYER == 1
    then    
    v$ST_DIALOG[0] = "END285"
    v$ST_DIALOG[1] = "ENB286"
    $DIALOG_COUNT = 1
    else
    $DIALOG_COUNT = 2
    v$ST_DIALOG[1] = "DUMMY"
    v$ST_DIALOG[2] = "END285"
    end
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2            
        
    end

/////////////////////////////////////////////////////////////////
    
if
OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS == 4
    then
    
    1@ = 1
    
    for 0@ = 0 to 4   
    if and
    8EEA: not locate_char_distance_to_coordinates $VERSUS_PEOPLE[0@] pos 1254.928 -800.8898 0.1406 radius 10.0
    not actor.Dead($VERSUS_PEOPLE[0@])
        then
        1@ = 0
        end
    if and
    8EEA: not locate_char_distance_to_coordinates OOS_ACT_FERNANDO_ZAMESTITEL pos 1254.928 -800.8898 0.1406 radius 10.0
    not actor.Dead(OOS_ACT_FERNANDO_ZAMESTITEL)
        then
        1@ = 0
        end    
    end
    
    for 0@ = 0 to 4   
    if and
    0EEA:  locate_char_distance_to_coordinates $VERSUS_PEOPLE[0@] pos 1254.928 -800.8898 84.1406 radius 3.0
    not actor.Dead($VERSUS_PEOPLE[0@])
        then
        0337: set_actor $VERSUS_PEOPLE[0@] visibility 0
        actor.PutAtNoOffset($VERSUS_PEOPLE[0@],1254.928, -800.8898, 0.1406)
        actor.LockInCurrentPosition($VERSUS_PEOPLE[0@],true)
        end
    if and
    0EEA: locate_char_distance_to_coordinates OOS_ACT_FERNANDO_ZAMESTITEL pos 1254.928 -800.8898 84.1406 radius 3.0
    not actor.Dead(OOS_ACT_FERNANDO_ZAMESTITEL)
        then
        0337: set_actor OOS_ACT_FERNANDO_ZAMESTITEL visibility 0
        actor.PutAtNoOffset(OOS_ACT_FERNANDO_ZAMESTITEL,1254.928, -800.8898, 0.1406)
        actor.LockInCurrentPosition(OOS_ACT_FERNANDO_ZAMESTITEL,true)
        end    
    end
    
    if
    1@ == 1
        then        
        0632: release_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
        actor.DestroyInstantly($VERSUS_PEOPLE[0])
        actor.DestroyInstantly($VERSUS_PEOPLE[1])
        actor.DestroyInstantly($VERSUS_PEOPLE[2])
        actor.DestroyInstantly($VERSUS_PEOPLE[3])
        actor.DestroyInstantly($VERSUS_PEOPLE[4])
        $VERSUS_PEOPLE[3] = -1
        $VERSUS_PEOPLE[4] = -1
        actor.DestroyInstantly(OOS_ACT_FERNANDO_ZAMESTITEL)
        OOS_ACT_FERNANDO_ZAMESTITEL_GROUP_PROGRESS = 5
        //0AD1: show_formatted_text_highpriority "FERNANDO GROUP IS ENTERED MANSION" time 2000        
        end
    
    end
 
/////////////////////////////////////////////////////////////////             
    
if
OOS_ACT_ENKER_GROUP_PROGRESS == 4
    then
    
    1@ = 1
    
    for 0@ = 5 to 9   
    if and
    8EEA: not locate_char_distance_to_coordinates $CAMP_ACTOR[0@] pos 1298.6572 -798.5724 0.1406 radius 10.0
    not actor.Dead($CAMP_ACTOR[0@])
        then
        1@ = 0
        end
    if
    8EEA: not locate_char_distance_to_coordinates OOS_ACT_ENKER pos 1298.6572 -798.5724 0.1406 radius 10.0
        then
        1@ = 0
        end    
    end
    
    for 0@ = 5 to 9   
    if and
    0EEA:  locate_char_distance_to_coordinates $CAMP_ACTOR[0@] pos 1298.6572 -798.5724 84.1406 radius 3.0
    not actor.Dead($CAMP_ACTOR[0@])
        then
        0337: set_actor $CAMP_ACTOR[0@] visibility 0
        actor.PutAtNoOffset($CAMP_ACTOR[0@],1298.6572, -798.5724, 0.1406)
        actor.LockInCurrentPosition($CAMP_ACTOR[0@],true)
        end
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_ENKER pos 1298.6572 -798.5724 84.1406 radius 3.0
        then
        0337: set_actor OOS_ACT_ENKER visibility 0
        actor.PutAtNoOffset(OOS_ACT_ENKER,1298.6572, -798.5724, 0.1406)
        actor.LockInCurrentPosition(OOS_ACT_ENKER,true)
        end    
    end
    
    if
    1@ == 1
        then        
        0632: release_group OOS_ACT_ENKER_GROUP
        actor.DestroyInstantly($CAMP_ACTOR[5])
        actor.DestroyInstantly($CAMP_ACTOR[6])
        actor.DestroyInstantly($CAMP_ACTOR[7])
        actor.DestroyInstantly($CAMP_ACTOR[8])
        actor.DestroyInstantly($CAMP_ACTOR[9])
        actor.DestroyInstantly(OOS_ACT_ENKER)
        OOS_ACT_ENKER_GROUP_PROGRESS = 5
        //0AD1: show_formatted_text_highpriority "ENKER GROUP IS ENTERED MANSION" time 2000        
        end
    
    end
    
if
OOS_ACT_GARNET_GROUP_PROGRESS == 4
    then
    
    1@ = 1
    
    for 0@ = 0 to 4   
    if and
    8EEA: not locate_char_distance_to_coordinates $CAMP_ACTOR[0@] pos 1298.6572 -798.5724 0.1406 radius 10.0
    not actor.Dead($CAMP_ACTOR[0@])
        then
        1@ = 0
        end
    if or
    8EEA: not locate_char_distance_to_coordinates OOS_ACT_GARNET pos 1298.6572 -798.5724 0.1406 radius 10.0
    8EEA: not locate_char_distance_to_coordinates OOS_ACT_ARTEMIS pos 1298.6572 -798.5724 0.1406 radius 10.0
    8EEA: not locate_char_distance_to_coordinates OOS_ACT_DANIEL pos 1298.6572 -798.5724 0.1406 radius 10.0
        then
        1@ = 0
        end    
    end
    
    for 0@ = 0 to 4   
    if and
    0EEA:  locate_char_distance_to_coordinates $CAMP_ACTOR[0@] pos 1298.6572 -798.5724 84.1406 radius 3.0
    not actor.Dead($CAMP_ACTOR[0@])
        then
        0337: set_actor $CAMP_ACTOR[0@] visibility 0
        actor.PutAtNoOffset($CAMP_ACTOR[0@],1298.6572, -798.5724, 0.1406)
        actor.LockInCurrentPosition($CAMP_ACTOR[0@],true)
        end
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_GARNET pos 1298.6572 -798.5724 84.1406 radius 3.0
        then
        0337: set_actor OOS_ACT_GARNET visibility 0
        actor.PutAtNoOffset(OOS_ACT_GARNET,1298.6572, -798.5724, 0.1406)
        actor.LockInCurrentPosition(OOS_ACT_GARNET,true)
        end
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_ARTEMIS pos 1298.6572 -798.5724 84.1406 radius 3.0
        then
        0337: set_actor OOS_ACT_ARTEMIS visibility 0
        actor.PutAtNoOffset(OOS_ACT_ARTEMIS,1298.6572, -798.5724, 0.1406)
        actor.LockInCurrentPosition(OOS_ACT_ARTEMIS,true)
        end
    if
    0EEA: locate_char_distance_to_coordinates OOS_ACT_DANIEL pos 1298.6572 -798.5724 84.1406 radius 3.0
        then
        0337: set_actor OOS_ACT_DANIEL visibility 0
        actor.PutAtNoOffset(OOS_ACT_DANIEL,1298.6572, -798.5724, 0.1406)
        actor.LockInCurrentPosition(OOS_ACT_DANIEL,true)
        end            
    end
    
    if
    1@ == 1
        then        
        0632: release_group OOS_ACT_GARNET_GROUP
        actor.DestroyInstantly($CAMP_ACTOR[0])
        actor.DestroyInstantly($CAMP_ACTOR[1])
        actor.DestroyInstantly($CAMP_ACTOR[2])
        actor.DestroyInstantly($CAMP_ACTOR[3])
        actor.DestroyInstantly($CAMP_ACTOR[4])
        actor.DestroyInstantly(OOS_ACT_GARNET)
        actor.DestroyInstantly(OOS_ACT_ARTEMIS)
        actor.DestroyInstantly(OOS_ACT_DANIEL)
        OOS_ACT_GARNET_GROUP_PROGRESS = 5
        //0AD1: show_formatted_text_highpriority "GARNET GROUP IS ENTERED MANSION" time 2000        
        end
    
    end    

/////////////////////////////////////////////////////////////////           
 
until false

OOS_ACT_KILLED_BANDITS = 0

v$OBJECTIVE = "GME1346"
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

OOS_ALPHA_DOOR_MOMENT_FLAG = 0

repeat
wait 0

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO

if
0800:   in_two_players_mode
    then
    if or
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
        then  
        0A8C: write_memory 0x0513256 size 1 value 1 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 1 virtual_protect 1
        else
        0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1  
        end
    end

if
0E45: frame_mod 25
then
gosub @EXTRA_MANSION_FIGHTERS_DO_AI_STUFF
gosub @OOS_ATTACK_SYSTEM
end

if and
MAIN_QUEST6_COMPLETED_FLAG == 1
OOS_ALPHA_DOOR_MOMENT_FLAG == 0
then
if and
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1259.277 -771.6769 1083.0078 cornerB 1245.6576 -762.8594 1088.6145
not actor.Dead($RNDM_HOUSE_WEAPON[32])
    then
    OOS_ALPHA_DOOR_MOMENT_FLAG = 1
    actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[32],false)
    07DD: set_actor $RNDM_HOUSE_WEAPON[32] attack_rate 75 // previously known as temper_to
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[32]) = 35
    actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
    0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
    0226: 0@ = actor $RNDM_HOUSE_WEAPON[32] health
    0@ *= 3
    actor.Health($RNDM_HOUSE_WEAPON[32]) = 0@
    08AF: set_actor $RNDM_HOUSE_WEAPON[32] max_health_to 0@
    end
    
if and
not actor.Dead($RNDM_HOUSE_WEAPON[32])
0800:   in_two_players_mode
056D:   actor COOP_ACTOR defined
    then
    if and
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1259.277 -771.6769 1083.0078 cornerB 1245.6576 -762.8594 1088.6145
    not actor.Dead($RNDM_HOUSE_WEAPON[32])
        then
        OOS_ALPHA_DOOR_MOMENT_FLAG = 1
        actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[32],false)
        07DD: set_actor $RNDM_HOUSE_WEAPON[32] attack_rate 75 // previously known as temper_to
        actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[32]) = 35
        actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
        0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
        0226: 0@ = actor $RNDM_HOUSE_WEAPON[32] health
        0@ *= 3
        actor.Health($RNDM_HOUSE_WEAPON[32]) = 0@
        08AF: set_actor $RNDM_HOUSE_WEAPON[32] max_health_to 0@
        end
    end    
    
end

if and
MAIN_QUEST6_COMPLETED_FLAG == 1
OOS_ALPHA_DOOR_MOMENT_FLAG == 1
not actor.Dead($RNDM_HOUSE_WEAPON[32])
0800:   in_two_players_mode
056D:   actor COOP_ACTOR defined
then
if
0E45: frame_mod 30
    then
    
    if
    0E4D: random_percent 50
    then
    actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
    0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
    else
    actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
    0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
    end
    
    end
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if
OOS_ACT_PHRASE287_FLAG == 0
then
if
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1222.4272 -813.7714 1082.5413 cornerB 1239.4563 -804.8765 1089.0707
    then
    OOS_ACT_PHRASE287_FLAG = 1
    v$ST_DIALOG[0] = "END287"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end
end

07FB: set_interior 'MADDOGS' access 0
08E7: disable_entrance_markers 1

if
OOS_ACT_KILLED_BANDITS == 0
then

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then

for 0@ = 0 to 39
05BE: AS_actor $ARMY69_2[0@] die
end

for 0@ = 26 to 32
05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die
end

end

for 0@ = 0 to 39
if
056D:   actor $ARMY69_2[0@] defined
    then
    actor.StorePos($ARMY69_2[0@],1@,2@,3@)
    if
    3@ < 900.0
        then
        05BE: AS_actor $ARMY69_2[0@] die
        end
    end
end

for 0@ = 26 to 32
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
    then
    actor.StorePos($RNDM_HOUSE_WEAPON[0@],1@,2@,3@)
    if
    3@ < 900.0
        then
        05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die
        end
    end
end

if and
8184:   actor $ARMY69_2[0] health < 1
8184:   actor $ARMY69_2[1] health < 1
8184:   actor $ARMY69_2[2] health < 1
8184:   actor $ARMY69_2[3] health < 1
8184:   actor $ARMY69_2[4] health < 1
8184:   actor $ARMY69_2[5] health < 1
8184:   actor $ARMY69_2[6] health < 1
8184:   actor $ARMY69_2[7] health < 1
    then
    if and
    8184:   actor $ARMY69_2[8] health < 1
    8184:   actor $ARMY69_2[9] health < 1
    8184:   actor $ARMY69_2[10] health < 1
    8184:   actor $ARMY69_2[11] health < 1
    8184:   actor $ARMY69_2[12] health < 1
    8184:   actor $ARMY69_2[13] health < 1
    8184:   actor $ARMY69_2[14] health < 1
    8184:   actor $ARMY69_2[15] health < 1
        then
        if and
        8184:   actor $ARMY69_2[16] health < 1
        8184:   actor $ARMY69_2[17] health < 1
        8184:   actor $ARMY69_2[18] health < 1
        8184:   actor $ARMY69_2[19] health < 1
        8184:   actor $ARMY69_2[20] health < 1
        8184:   actor $ARMY69_2[21] health < 1
        8184:   actor $ARMY69_2[22] health < 1
        8184:   actor $ARMY69_2[23] health < 1        
            then
            if and
            8184:   actor $ARMY69_2[25] health < 1
            8184:   actor $ARMY69_2[26] health < 1
            8184:   actor $ARMY69_2[27] health < 1
            8184:   actor $ARMY69_2[28] health < 1
            8184:   actor $ARMY69_2[29] health < 1
            8184:   actor $ARMY69_2[30] health < 1
            8184:   actor $ARMY69_2[31] health < 1
            8184:   actor $ARMY69_2[32] health < 1            
                then
                if and
                8184:   actor $ARMY69_2[34] health < 1
                8184:   actor $ARMY69_2[35] health < 1
                8184:   actor $ARMY69_2[36] health < 1
                8184:   actor $ARMY69_2[37] health < 1
                8184:   actor $ARMY69_2[38] health < 1
                8184:   actor $ARMY69_2[39] health < 1                
                8184:   actor $RNDM_HOUSE_WEAPON[26] health < 1
                8184:   actor $RNDM_HOUSE_WEAPON[27] health < 1
                    then
                    if and
                    8184:   actor $RNDM_HOUSE_WEAPON[28] health < 1
                    8184:   actor $RNDM_HOUSE_WEAPON[29] health < 1
                    8184:   actor $RNDM_HOUSE_WEAPON[30] health < 1
                    8184:   actor $RNDM_HOUSE_WEAPON[31] health < 1
                    8184:   actor $RNDM_HOUSE_WEAPON[32] health < 1
                    8184:   actor $ARMY69_2[24] health < 1
                    8184:   actor $ARMY69_2[33] health < 1
                        then
            
                        OOS_ACT_KILLED_BANDITS = 1                         
                        
                        v$OBJECTIVE = "GME1347"
                        if
                        REALISM_MODE == 1
                        then
                        v$OBJECTIVE = "GMR1347"
                        end
                        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                        $SOUNDS_VOLUME3 *= 0.5
                        Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                        Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                        Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)                    
                        018A: MISSION_CHECKPOINT = create_checkpoint_at 1249.5199 -765.6177 1084.0156
                        03BC: MISSION_SPHERE = create_sphere_at 1249.5199 -765.6177 1084.0156 radius 2.0
                        
                        /////////////////////Плавное затухание/////////////////////
//
//                        $MUSIC_FADE_NUMBER += 1
//                        if
//                        $MUSIC_FADE_NUMBER > 4
//                            then
//                            $MUSIC_FADE_NUMBER = 0 
//                            end    
//                            
//                        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//                        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//                            
//                        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//                        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//                        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//                        create_thread @MUS_FAD
//                            
//                        wait 1
//                            
//                        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//                        wait 0
//                        end                                                
                        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 500
                        wait 500
                        audiostream.Release($MUSIC_ASSHOLE)
                        
                        end
                    end
                end           
            end
        end
    end
else

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1249.5199 -765.6177 1084.0156)
create_thread @REFR_3D
end

if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1249.5199 -765.6177 1084.0156 radius 2.0 
    then
    v$OBJECTIVE = "DUMMY"
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    if
    OOS_ACT_BERTON_IMPOSTER_FLAG == 1
    then
    if
    not actor.Dead($RNDM_HOUSE_WEAPON[37])
        then
        actor.DestroyInstantly($RNDM_HOUSE_WEAPON[37])   
        audiostream.PerformAction($MUSIC_CRAZY,STOP)
//        audiostream.PerformAction($MUSIC_ASSHOLE,STOP)
        audiostream.Release($MUSIC_CRAZY,STOP)
//        audiostream.Release($MUSIC_ASSHOLE,STOP)    
        player.SetDrunkVisuals(PLAYER_CHAR,100)
        $DRUNK_MODE_FLAG = 1
        $DRAW_RED = 1
        $HUD_REMOVE = 1
        $SAVESTATUS = 1    
        04BB: select_interior 0
        0860: link_actor PLAYER_ACTOR to_interior 0
        04FA: reset_sky_colors_with_fade 0
        CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
        if
        8800: not  in_two_players_mode
        then
        $DELETE_TEAMMATES = 1
        end
        
        for 0@ = 26 to 32
        actor.RemoveReferences($RNDM_HOUSE_WEAPON[0@])
        end
        
        actor.PutAtNoOffset(PLAYER_ACTOR,904.6046, -916.103, 57.9738)
        actor.Angle(PLAYER_ACTOR) = 274.2043
        camera.Restore_WithJumpCut()
        create_thread @REFR_3D 
        
        $SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\QUESTS\bathit.wav")
        Audiostream.PerformAction($SHIT_FUCK, PLAY)
        Audiostream.Loop($SHIT_FUCK, 0)
        Audiostream.Volume($SHIT_FUCK) = $SOUNDS_VOLUME
        
        09F1: play_audio_at_actor PLAYER_ACTOR event 1130    
        05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 9999999
        
        while not model.Available(14731)
        wait 0
        model.Load(14731)
        mload
        end
        
        OOS_ACT_FERMER12 = actor.Create(26,14731,907.8, -915.4013, 57.7345) //imposter moment    
        0D10: set_actor OOS_ACT_FERMER12 alpha 255 // IF and SET
        actor.Angle(OOS_ACT_FERMER12) = 90.0    
        08C6: set_actor OOS_ACT_FERMER12 stay_on_bike 1    
        actor.SetWalkStyle(OOS_ACT_FERMER12,"GANG2")
        0446: set_actor OOS_ACT_FERMER12 dismemberment_possible 0
        060B: set_actor OOS_ACT_FERMER12 decision_maker_to $DEC_PEOPLE
        actor.Health(OOS_ACT_FERMER12) = 1000
        actor.WeaponAccuracy(OOS_ACT_FERMER12) = 95
        create_thread @PED_BKP OOS_ACT_FERMER12 371 0 0 0 0 0 0 0 0 1
        create_thread @ANT_PRE OOS_ACT_FERMER12
        
        OOS_CURRENT_PROGRESS = 9
        088E: set_next_day
        088E: set_next_day
        HARDCORE_DANGER_FLAG_SCRIPTED = 0
        OOS_MARK = 0
        CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
        INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0
        $INT_ZMB_NOT = 0
        CAMP_DONT_SAY_HELLO_FLAG = 0
        CAMP_LEADER_DONT_SAY_BYE_FLAG = 0
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
        $PHRASES_OFF_FLAG = 0
        
        wait 3500    
        
        $END_DIALOG_INST = 1
        wait 0
        v$ST_DIALOG[0] = "ENN375"
        v$ST_DIALOG[1] = "ENN376"
        v$ST_DIALOG[2] = "ENN377"
        v$ST_DIALOG[3] = "ENN378"
        v$ST_DIALOG[4] = "ENN379"
        v$ST_DIALOG[5] = "ENN380"
        v$ST_DIALOG[6] = "ENN381"
        v$ST_DIALOG[7] = "ENN382"
        v$ST_DIALOG[8] = "ENN383"
        v$ST_DIALOG[9] = "ENN384"
        v$ST_DIALOG[10] = "ENN385"
        $DIALOG_COUNT = 10
        create_thread @DG_SYS2
        
        FP_ACTIVATE_SCRIPTED = 1
        05BF: AS_actor OOS_ACT_FERMER12 look_at_actor PLAYER_ACTOR 999999 ms
        
        fade 1 2000
        $HUD_REMOVE = 0
        wait 2000
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        fade 0 2000
        $HUD_REMOVE = 1
        wait 2000
        
        actor.DestroyInstantly(OOS_ACT_FERMER12)
        player.SetDrunkVisuals(PLAYER_CHAR,0)
        $DRUNK_MODE_FLAG = 0
        $DRAW_RED = 0
        player.CanMove(PLAYER_CHAR,true)
        cinema.Widescreen(0)
        
        $SAVESTATUS = 0
        $DELETE_TEAMMATES = 0
        
        0777: delete_objects_in_object_group "oosgate2"            
        0776: create_objects_in_object_group "oosgate"   
        
        jump to @OOS_ACTION_END_JUMP
        else
        OOS_ACT_BERTON_IMPOSTER_FLAG = 0        
        0459: end_thread_named 'BERTONC'
        end         
    end    
    
    :OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_BUNKER_CAPTURE
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
    if or
    0@ == 1
    0@ == 2
    then
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_CRAZY // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
//        
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_CRAZY volume 0.0 time 500
    wait 500
    audiostream.Release($MUSIC_CRAZY)
    
    end
            
    0776: create_objects_in_object_group "bunker"
    0776: create_objects_in_object_group "bunker2"
    $TIME_LOCK_HOUR = 23
    $TIME_LOCK_MINUTES = 23
    create_thread @TIM_LCK
    
    0@ = Pickup.Create(#BODYARMOUR, 3, 1293.8387, -667.007, 1061.8241)
    0@ = Pickup.Create(#BODYARMOUR, 3, 1280.2197, -589.1913, 1061.8197)
    0@ = Pickup.Create(#BODYARMOUR, 3, 1190.954, -669.7105, 1061.8314)
    0@ = Pickup.Create(#BODYARMOUR, 3, 1169.0057, -706.2365, 1061.8197)
    0@ = Pickup.Create(#BODYARMOUR, 3, 1269.5645, -578.91, 1061.8203)
    $HEAL_PICKUP[2] = pickup.Create(HEAL_PICKUP_ID, 3, 1281.1163, -731.8171, 1061.8241)
    $HEAL_PICKUP[3] = pickup.Create(HEAL_PICKUP_ID, 3, 1281.1163, -731.8171, 1061.8241)
    $HEAL_PICKUP[4] = pickup.Create(HEAL_PICKUP_ID, 3, 1281.1163, -731.8171, 1061.8241)
    
    $HEAL_PICKUP[5] = pickup.Create(HEAL_PICKUP_ID, 3, 1261.6019, -732.0275, 1061.8241)
    $HEAL_PICKUP[6] = pickup.Create(HEAL_PICKUP_ID, 3, 1261.6019, -732.0275, 1061.8241)
    $HEAL_PICKUP[7] = pickup.Create(HEAL_PICKUP_ID, 3, 1261.6019, -732.0275, 1061.8241)
    
    $FOOD_PICKUP[0] = pickup.Create(BANKA_PICKUP_ID,3,1274.7747, -728.0756, 1061.8241)
    032B: 0@ = create_weapon_pickup #SIG550 type 3 ammo 200 at 1273.9729 -576.3658 1061.8203
    032B: 0@ = create_weapon_pickup #P90 type 3 ammo 150 at 1275.5299 -578.5773 1061.8203
    
    if or
    0491:   actor PLAYER_ACTOR has_weapon 70
    0491:   actor PLAYER_ACTOR has_weapon 94
    then
    
    if
    0491:   actor PLAYER_ACTOR has_weapon 70
    then
    032B: 0@ = create_weapon_pickup #M60 type 3 ammo 200 at 1274.4424 -595.6098 1061.8197
    else
    032B: 0@ = create_weapon_pickup #M249 type 3 ammo 200 at 1274.4424 -595.6098 1061.8197
    end
    
    end
    
    OOS_ACT_GATES1_BUNKER_OBJ = Object.Init(3037, 1195.1, -703.977, 1063.04)
    Object.Angle(OOS_ACT_GATES1_BUNKER_OBJ) = 90.0
    0392: make_object OOS_ACT_GATES1_BUNKER_OBJ moveable 1
    07F7: set_object OOS_ACT_GATES1_BUNKER_OBJ destructible 1
    09CA: set_object OOS_ACT_GATES1_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 1 MP 1
    071F: set_object OOS_ACT_GATES1_BUNKER_OBJ health_to 999999
    object.KeepInMemory(OOS_ACT_GATES1_BUNKER_OBJ) = true
        
    OOS_ACT_GATES2_BUNKER_OBJ = Object.Init(3037, 1224.72, -669.758, 1063.01)
    Object.Angle(OOS_ACT_GATES2_BUNKER_OBJ) = 0.0
    0392: make_object OOS_ACT_GATES2_BUNKER_OBJ moveable 1
    07F7: set_object OOS_ACT_GATES2_BUNKER_OBJ destructible 1
    09CA: set_object OOS_ACT_GATES2_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 1 MP 1
    071F: set_object OOS_ACT_GATES2_BUNKER_OBJ health_to 999999
    object.KeepInMemory(OOS_ACT_GATES2_BUNKER_OBJ) = true
        
    OOS_ACT_GATES3_BUNKER_OBJ = Object.Init(3037, 1266.85, -669.758, 1063.01)
    Object.Angle(OOS_ACT_GATES3_BUNKER_OBJ) = 0.0
    0392: make_object OOS_ACT_GATES3_BUNKER_OBJ moveable 1
    07F7: set_object OOS_ACT_GATES3_BUNKER_OBJ destructible 1
    09CA: set_object OOS_ACT_GATES3_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 1 MP 1
    071F: set_object OOS_ACT_GATES3_BUNKER_OBJ health_to 999999
    object.KeepInMemory(OOS_ACT_GATES3_BUNKER_OBJ) = true
    
    OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ = Object.Init(16829, 1178.74, -731.38, 1061.17)
    Object.Angle(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = 53.0
    0392: make_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ moveable 1
    07F7: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ destructible 1
    09CA: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 1 MP 1
    071F: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ health_to 999999
    object.KeepInMemory(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = true
    
    OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ = Object.Init(16830, 1181.04, -728.45, 1061.17)
    Object.Angle(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = 53.0
    0392: make_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ moveable 1
    07F7: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ destructible 1
    09CA: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 1 MP 1
    071F: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ health_to 999999
    object.KeepInMemory(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = true
    
    $SAVESTATUS = 1
    OOS_MARK = 156548
    
    for 0@ = 26 to 32
    actor.RemoveReferences($RNDM_HOUSE_WEAPON[0@])
    end
    
    actor.PutAtNoOffset(PLAYER_ACTOR,1248.989, -762.2186, 1084.0452)
    actor.Angle(PLAYER_ACTOR) = 0.0
    camera.Restore_WithJumpCut()
    create_thread @REFR_3D    
    break        
    end    
end 

until false

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 5
    then
    
    for 0@ = 26 to 53
    actor.DestroyInstantly($RNDM_HOUSE_WEAPON[0@])
    end
    
    actor.PutAtNoOffset(PLAYER_ACTOR,1202.4777, -739.0248, 1063.0699)
    actor.Angle(PLAYER_ACTOR) = 265.2461
    camera.Restore_WithJumpCut()
    
    while not model.Available(3254)
    wait 0
    model.Load(3254)
    mload
    end
    
    OOS_ACT_WORZAK = actor.Create(25,3254,1203.3618, -739.873, 1063.0699) //АААААААААААААААААААААААААА
    actor.Angle(OOS_ACT_WORZAK) = 17.0
    actor.Health(OOS_ACT_WORZAK) = 12000    
    0D10: set_actor OOS_ACT_WORZAK alpha 255 // IF and SET
    Actor.SetWalkStyle(OOS_ACT_WORZAK, "GANG2")
    081A: set_actor OOS_ACT_WORZAK weapon_skill_to 2
    Actor.WeaponAccuracy(OOS_ACT_WORZAK) = 85
    060B: set_actor OOS_ACT_WORZAK decision_maker_to $DEC_PEOPLE
    0446: set_actor OOS_ACT_WORZAK dismemberment_possible 0   
    0946: set_actor OOS_ACT_WORZAK actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    099F: AS_actor OOS_ACT_WORZAK ignore_weapon_range 1
    04D8: set_actor OOS_ACT_WORZAK drowns_in_water 0
    0E24: fix_char OOS_ACT_WORZAK ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
    0648: unknown_actor OOS_ACT_WORZAK task_set 1000.0 // float
    09F4: set_actor OOS_ACT_WORZAK ignore_height_difference_following_nodes 1
    0350: set_actor OOS_ACT_WORZAK maintain_position_when_attacked 1
    0816: set_actor OOS_ACT_WORZAK dont_chase_victim 1
    create_thread @PED_BKP OOS_ACT_WORZAK 371 0 0 0 1 0 3 7 3
    05BE: AS_actor OOS_ACT_WORZAK die
    wait 1500
    player.CanMove(PLAYER_CHAR,true)
    
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
    if
    not 0@ == 6
    then
    
    /////////////////////////////////////////////////////////////////////
    
    MAIN_QUEST_MUSIC_FLAG = 1
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS7B.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    
    wait 0
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
    
    /////////////////////////////////////////////////////////////////////
    
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    end
        
    jump to @OOS_LOAD_CHECKPOINT_AFTER_WORZAK
    end        

gosub @SPAWN_BUNKER_FIGHERS

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ < 3
then
0AF1: write_int 3 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
create_thread @OOS_CHK
create_thread @OOS_CH2
end
    
/////////////////////////////////////////////////////////////////////
    
MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS6.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

wait 0
    
/////////////////////Плавное нарастание/////////////////////
//    
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

032B: 0@ = create_weapon_pickup #GRENADE type 3 ammo 5 at 1287.1688 -600.5587 1061.8197
032B: 0@ = create_weapon_pickup #MOLOTOV type 3 ammo 3 at 1281.6876 -607.1849 1061.8197

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ >= 4
    then
    v$OBJECTIVE = "GME1348"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1348"
    end
    
    for 0@ = 26 to 53
    05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die
    end
    
    actor.PutAtNoOffset(PLAYER_ACTOR,1195.2406, -684.215, 1061.8241)
    actor.Angle(PLAYER_ACTOR) = 179.8917
    camera.Restore_WithJumpCut()
    player.CanMove(PLAYER_CHAR,true)
    
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    jump to @OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_WORZAK_FIGHT
    end

player.CanMove(PLAYER_CHAR,true)
fade 1 500
$HUD_REMOVE = 0
wait 500

v$OBJECTIVE = "GME1348"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GMR1348"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)                    
018A: MISSION_CHECKPOINT = create_checkpoint_at 1284.0962 -572.9019 1061.8203
03BC: MISSION_SPHERE = create_sphere_at 1284.0962 -572.9019 1061.8203 radius 2.0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

gosub @BUNKER_DO_FIGHERS_AI_STUFF

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1284.0962, -572.9019, 1061.8203)
end

until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1284.0962 -572.9019 1061.8203 radius 2.0

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

v$OBJECTIVE = "GME1348"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GMR1348"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)                    
018A: MISSION_CHECKPOINT = create_checkpoint_at 1265.3197 -553.9457 1061.8203
03BC: MISSION_SPHERE = create_sphere_at 1265.3197 -553.9457 1061.8203 radius 2.0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

gosub @BUNKER_DO_FIGHERS_AI_STUFF

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1265.3197, -553.9457, 1061.8203)
end

until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1265.3197 -553.9457 1061.8203 radius 2.0

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

v$OBJECTIVE = "GME1348"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GMR1348"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

:OOS_LOAD_CHECKPOINT_STRAIGHT_INTO_WORZAK_FIGHT                    
018A: MISSION_CHECKPOINT = create_checkpoint_at 1190.8044 -703.2673 1061.8241
03BC: MISSION_SPHERE = create_sphere_at 1190.8044 -703.2673 1061.8241 radius 2.0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

gosub @BUNKER_DO_FIGHERS_AI_STUFF

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1190.8044, -703.2673, 1061.8241)
end

until 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1190.8044 -703.2673 radius 2.0 2.0 stopped

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ < 4
then
0AF1: write_int 4 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
create_thread @OOS_CHK
create_thread @OOS_CH2
end

v$OBJECTIVE = "DUMMY"

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0

0615: define_AS_pack_begin 0@
05D4: AS_actor -1 rotate_angle 92.0
0812: AS_actor -1 perform_animation "ATM" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time 5800  // versionB
0616: define_AS_pack_end 0@
0618: assign_actor PLAYER_ACTOR to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0687: clear_actor PLAYER_ACTOR task
break
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until actor.Animation(PLAYER_ACTOR) == "ATM"

v$ST_DIALOG[0] = "END291"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0687: clear_actor PLAYER_ACTOR task
break
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until not actor.Animation(PLAYER_ACTOR) == "ATM"

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1

21@ = Audiostream.Load3D("audio\sounds\quests\OOS\warehouse.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,OOS_ACT_GATES1_BUNKER_OBJ)

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
jump to @OOS_SKIP1_JUMP
end

034E: move_object OOS_ACT_GATES1_BUNKER_OBJ to 1195.1 -703.977 1066.74 speed 0.02 0.02 0.02 collision_check 0

if or
04E6:   object OOS_ACT_GATES1_BUNKER_OBJ near_point 1195.1 -703.977 1066.74 radius 0.001 0.001 0.001 flag 0
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1205.0652 -707.3872 1060.8667 cornerB 1176.2119 -715.3568 1071.9056
then
:OOS_SKIP1_JUMP
01BC: put_object OOS_ACT_GATES1_BUNKER_OBJ at 1195.1 -703.977 1066.74
break
end

until false

Audiostream.PerformAction(21@, STOP)
Audiostream.Release(21@)

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1205.0652 -707.3872 1060.8667 cornerB 1176.2119 -715.3568 1071.9056

21@ = Audiostream.Load3D("audio\sounds\quests\OOS\warehouse2.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,OOS_ACT_GATES1_BUNKER_OBJ)

COOP_TP_TEAMMATES_FLAG = 1

if
0800:   in_two_players_mode
then
0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1
end

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
jump to @OOS_SKIP2_JUMP
end

034E: move_object OOS_ACT_GATES1_BUNKER_OBJ to 1195.1 -703.977 1063.04 speed 1.0 1.0 1.0 collision_check 0

if
04E6:   object OOS_ACT_GATES1_BUNKER_OBJ near_point 1195.1 -703.977 1063.04 radius 0.001 0.001 0.001 flag 0
then
:OOS_SKIP2_JUMP
01BC: put_object OOS_ACT_GATES1_BUNKER_OBJ at 1195.1 -703.977 1063.04
break
end

until false

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
//    
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)
    
/////////////////////////////////////////////////////////////////////
    
MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS7.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    
/////////////////////Плавное нарастание/////////////////////
//    
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

Audiostream.PerformAction(21@, STOP)
Audiostream.Release(21@)

for 0@ = 26 to 53
actor.DestroyInstantly($RNDM_HOUSE_WEAPON[0@])
end

while not model.Available(3254)
wait 0
model.Load(3254)
mload
end

OOS_ACT_WORZAK = actor.Create(25,3254,1203.3618, -739.873, 1063.0699) //АААААААААААААААААААААААААА
actor.Angle(OOS_ACT_WORZAK) = 17.0

WORZAK_HEAL_AMOUNT_LOW = -2000
WORZAK_HEAL_AMOUNT_NORMAL = -500
WORZAK_SHIELD_AMOUNT_LOW = 1000
WORZAK_SHIELD_AMOUNT_NORMAL = 500
OOS_ACT_WORZAK_MAX_HP = 10000

035F: actor OOS_ACT_WORZAK armour += 750

if and
$PLAYER_LEVEL >= 10
AUTOLEVELING_ON_FLAG == 1
then
OOS_ACT_WORZAK_MAX_HP += 3500
WORZAK_HEAL_AMOUNT_LOW -= 1200
WORZAK_HEAL_AMOUNT_NORMAL -= 600
WORZAK_SHIELD_AMOUNT_LOW += 800
WORZAK_SHIELD_AMOUNT_NORMAL += 400
end

if and
$PLAYER_LEVEL >= 15
AUTOLEVELING_ON_FLAG == 1
then
OOS_ACT_WORZAK_MAX_HP += 5850
WORZAK_HEAL_AMOUNT_LOW -= 1950
WORZAK_HEAL_AMOUNT_NORMAL -= 975
WORZAK_SHIELD_AMOUNT_LOW += 910
WORZAK_SHIELD_AMOUNT_NORMAL += 650
end

if and
$PLAYER_LEVEL >= 20
AUTOLEVELING_ON_FLAG == 1
then
OOS_ACT_WORZAK_MAX_HP += 9750
WORZAK_HEAL_AMOUNT_LOW -= 3300
WORZAK_HEAL_AMOUNT_NORMAL -= 1650
WORZAK_SHIELD_AMOUNT_LOW += 1470
WORZAK_SHIELD_AMOUNT_NORMAL += 1050
end

if and
$PLAYER_LEVEL >= 25
AUTOLEVELING_ON_FLAG == 1
then
OOS_ACT_WORZAK_MAX_HP += 17000
WORZAK_HEAL_AMOUNT_LOW -= 5600
WORZAK_HEAL_AMOUNT_NORMAL -= 2800
WORZAK_SHIELD_AMOUNT_LOW += 2520
WORZAK_SHIELD_AMOUNT_NORMAL += 1800
end

if
0800:   in_two_players_mode
then
OOS_ACT_WORZAK_MAX_HP *= 2 
end

actor.Health(OOS_ACT_WORZAK) = OOS_ACT_WORZAK_MAX_HP    
0D10: set_actor OOS_ACT_WORZAK alpha 255 // IF and SET
Actor.SetWalkStyle(OOS_ACT_WORZAK, "GANG2")
081A: set_actor OOS_ACT_WORZAK weapon_skill_to 2
Actor.WeaponAccuracy(OOS_ACT_WORZAK) = 25
060B: set_actor OOS_ACT_WORZAK decision_maker_to $DEC_PEOPLE
0446: set_actor OOS_ACT_WORZAK dismemberment_possible 0   
0946: set_actor OOS_ACT_WORZAK actions_uninterupted_by_weapon_fire 1
093B: set_actor OOS_ACT_WORZAK upper_body_damage_anims_only 1
099F: AS_actor OOS_ACT_WORZAK ignore_weapon_range 1
0ED9: set_char_ignore_damage_anims OOS_ACT_WORZAK 1
04D8: set_actor OOS_ACT_WORZAK drowns_in_water 0
0E24: fix_char OOS_ACT_WORZAK ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
0648: unknown_actor OOS_ACT_WORZAK task_set 1000.0 // float
09F4: set_actor OOS_ACT_WORZAK ignore_height_difference_following_nodes 1
0350: set_actor OOS_ACT_WORZAK maintain_position_when_attacked 1
0816: set_actor OOS_ACT_WORZAK dont_chase_victim 1
085B: AS_actor OOS_ACT_WORZAK set_kinda_stay_in_same_place 1
create_thread @PED_BKP OOS_ACT_WORZAK 371 0 0 0 1 0 3 7 3
create_thread @ANT_PRE OOS_ACT_WORZAK
02AB: set_actor OOS_ACT_WORZAK immunities BP 0 FP 1 EP 0 CP 1 MP 1
0856: set_actor OOS_ACT_WORZAK enable_crouch 0
0770: set_actor OOS_ACT_WORZAK target_priority 1

0A96: 0@ = actor OOS_ACT_WORZAK struct
0A8E: 0@ = 0@ + 1376
0A8C: write_memory 0@ size 4 value 120.0 virtual_protect 1

OOS_MARK = 692875

0781: get_weapon_with_ID 92 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,92,99999)

0781: get_weapon_with_ID 70 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,70,99999)

0ED9: set_char_ignore_damage_anims OOS_ACT_WORZAK 1
03C4: set_vagina_text $TIM_HEALTH type 1 GXT 'GME1350' // global_variable  // Score ~1~

//05E2: AS_actor OOS_ACT_WORZAK kill_actor PLAYER_ACTOR
actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR

v$ST_DIALOG[0] = "ENB293"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

32@ = 0
33@ = 0

v$OBJECTIVE = "GME1349"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GMR1349"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

if
0800:   in_two_players_mode
then
create_thread @SRV_VC2
end

TEAMMATES_SHOOTS_PROJECTILES = 1        

:VORZAK_CHANGE_WEAPON_TO_M60_CLOSE2

repeat
wait 0

if
actor.Animation(OOS_ACT_WORZAK) == "GunMove_FWD"
then
0393: actor OOS_ACT_WORZAK perform_animation "GunMove_FWD" at 2.5 times_normal_rate
end

if
actor.Animation(OOS_ACT_WORZAK) == "GunMove_BWD"
then
0393: actor OOS_ACT_WORZAK perform_animation "GunMove_BWD" at 2.5 times_normal_rate
end

if
actor.Animation(OOS_ACT_WORZAK) == "GunMove_L"
then
0393: actor OOS_ACT_WORZAK perform_animation "GunMove_L" at 2.5 times_normal_rate
end

if
actor.Animation(OOS_ACT_WORZAK) == "GunMove_R"
then
0393: actor OOS_ACT_WORZAK perform_animation "GunMove_R" at 2.5 times_normal_rate
end

if
actor.Animation(OOS_ACT_WORZAK) == "GunCrouchBwd"
then
0393: actor OOS_ACT_WORZAK perform_animation "GunCrouchBwd" at 2.5 times_normal_rate
end

if
actor.Animation(OOS_ACT_WORZAK) == "GunCrouchBwd"
then
0393: actor OOS_ACT_WORZAK perform_animation "GunCrouchFwd" at 2.5 times_normal_rate
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

gosub @VORZAK_PODOSOSI_CHECKS

if and
0E45: frame_mod 30
0800:   in_two_players_mode
    then
    
    if and
    80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
    80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        then
        
        if
        02D8:   actor OOS_ACT_WORZAK current_weapon == 70
            then
            
            if
            OOS_ACT_WORZAK_TARGET == 0
                then
                OOS_ACT_WORZAK_TARGET = 1     
                actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
                0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
                else
                OOS_ACT_WORZAK_TARGET = 0
                actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
                0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
                end
            
            else
            
            if
            OOS_ACT_WORZAK_TARGET == 0
                then
                OOS_ACT_WORZAK_TARGET = 1     
                05E2: AS_actor OOS_ACT_WORZAK kill_actor $VOICE_ACTOR_COOP
                else
                OOS_ACT_WORZAK_TARGET = 0
                05E2: AS_actor OOS_ACT_WORZAK kill_actor $VOICE_ACTOR
                end
            
            end
            
        end    
                                     
    end
    
if
0800:   in_two_players_mode
    then
    
    if
    02D8:   actor OOS_ACT_WORZAK current_weapon == 70
        then
            
        if and
        OOS_ACT_WORZAK_TARGET == 1
        8364: not  actor OOS_ACT_WORZAK spotted_actor COOP_ACTOR
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
            then
            OOS_ACT_WORZAK_TARGET = 0
            actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
            0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
            end
        if and
        OOS_ACT_WORZAK_TARGET == 0
        8364: not  actor OOS_ACT_WORZAK spotted_actor PLAYER_ACTOR
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
            then
            OOS_ACT_WORZAK_TARGET = 1
            actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
            0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
            end   
        
        else
        
        if and
        OOS_ACT_WORZAK_TARGET == 1
        8364: not  actor OOS_ACT_WORZAK spotted_actor $VOICE_ACTOR_COOP
            then
            OOS_ACT_WORZAK_TARGET = 0
            05E2: AS_actor OOS_ACT_WORZAK kill_actor $VOICE_ACTOR
            end
        if and
        OOS_ACT_WORZAK_TARGET == 0
        8364: not  actor OOS_ACT_WORZAK spotted_actor $VOICE_ACTOR
            then
            OOS_ACT_WORZAK_TARGET = 1
            05E2: AS_actor OOS_ACT_WORZAK kill_actor $VOICE_ACTOR_COOP
            end
        
        end    
                  
    end           

if
00F2:   actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
then
07DD: set_actor OOS_ACT_WORZAK attack_rate 100 // previously known as temper_to
Actor.WeaponAccuracy(OOS_ACT_WORZAK) = 100

if and
actor.Animation(OOS_ACT_WORZAK) == "RIFLE_fire"
$SLOWMODE_ACTIVE == 1
then
0393: actor OOS_ACT_WORZAK perform_animation "RIFLE_fire" at 4.0 times_normal_rate
end

if or
82D8: not  actor OOS_ACT_WORZAK current_weapon == 70
82E0: not  actor OOS_ACT_WORZAK firing_weapon
82A0: not  actor OOS_ACT_WORZAK stopped
    then
    jump to @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
    end

else
if
02D8:   actor OOS_ACT_WORZAK current_weapon == 70
    then
    07DD: set_actor OOS_ACT_WORZAK attack_rate 75 // previously known as temper_to  
    Actor.WeaponAccuracy(OOS_ACT_WORZAK) = 25  
    end
end

if
0800:   in_two_players_mode
    then    
    if
    00F2:   actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        then
        07DD: set_actor OOS_ACT_WORZAK attack_rate 100 // previously known as temper_to
        Actor.WeaponAccuracy(OOS_ACT_WORZAK) = 100
        if or
        82D8: not  actor OOS_ACT_WORZAK current_weapon == 70
        82E0: not  actor OOS_ACT_WORZAK firing_weapon
        82A0: not  actor OOS_ACT_WORZAK stopped
            then
            jump to @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
            end
        else
        if
        02D8:   actor OOS_ACT_WORZAK current_weapon == 70
            then
            07DD: set_actor OOS_ACT_WORZAK attack_rate 75 // previously known as temper_to   
            Actor.WeaponAccuracy(OOS_ACT_WORZAK) = 25 
            end
        end    
    end

TEMPVAR_INT = 120
008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
if and
0E45: frame_mod TEMPVAR_INT
051A:   actor OOS_ACT_WORZAK damaged_by_actor PLAYER_ACTOR
    then
    32@ = 5001
    end
    
if
0800:   in_two_players_mode
    then
    TEMPVAR_INT = 120
    008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
    0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
    008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
    if and
    0E45: frame_mod TEMPVAR_INT
    051A:   actor OOS_ACT_WORZAK damaged_by_actor COOP_ACTOR
        then
        32@ = 5001
        end
    end
    
TEMPVAR_INT = 15
008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
if and
0800:  in_two_players_mode
0E45: frame_mod TEMPVAR_INT  
    then
    random_int OOS_ACT_WORZAK_TARGET 0 2
    end        

if
32@ > 5000
    then
    
    if or
    0E4D: random_percent 50
    8800: not  in_two_players_mode
    then
    OOS_ACT_WORZAK_TARGET = 0
    else
    OOS_ACT_WORZAK_TARGET = 1
    end
    
    if and
    8800: not  in_two_players_mode
    OOS_ACT_WORZAK_TARGET == 0
    then
    
    054E: clear_actor OOS_ACT_WORZAK damage
    32@ = 0    
    if and
    02D8:   actor OOS_ACT_WORZAK current_weapon == 70
    80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        then
        
        if
        OOS_ACT_WORZAK_HEALED_COUNT < 7
        then
        
        OOS_ACT_WORZAK_HEALED_COUNT += 1
        
        if
        $TIM_HEALTH < 30
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by -1000 affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += 500
        else
        
        if
        $TIM_HEALTH < 60
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by -350 affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += 175
        end
        
        end
        
        end
        
        01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 0
//        wait 150               
        32@ = 0
        repeat
        wait 0
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 150
        04EB: AS_actor OOS_ACT_WORZAK crouch 1
//        wait 1500
        32@ = 0
        repeat
        wait 0
        
        if
        32@ >= 750
        then
        actor.SetImmunities(OOS_ACT_WORZAK,1,1,1,1,1)
        end
        
        if and
        COOP_ACTIVE_FLAG == 1
        0800:   in_two_players_mode
        056D:   actor COOP_ACTOR defined
        then
        if                  
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
        end
        
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 1500
        
        ///////////////////////////////
        
        0555: remove_weapon 16 from_actor OOS_ACT_WORZAK
        0555: remove_weapon 17 from_actor OOS_ACT_WORZAK
        0555: remove_weapon 18 from_actor OOS_ACT_WORZAK
        
        random_int 1@ 0 3
        if
        1@ == 0
            then    
            0781: get_weapon_with_ID 16 model_to 1@
            
            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,16,99999)    
            end
        
        if
        1@ == 1
            then
            0781: get_weapon_with_ID 16 model_to 1@
            
            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,16,99999)
            end
        
        if
        1@ == 2
            then
            0781: get_weapon_with_ID 18 model_to 1@
            
            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,18,99999)
            end        
        
        ///////////////////////////////
        
        07DD: set_actor OOS_ACT_WORZAK attack_rate 150 // previously known as temper_to        
        04EB: AS_actor OOS_ACT_WORZAK crouch 0
        05E2: AS_actor OOS_ACT_WORZAK kill_actor $VOICE_ACTOR
        else  
        
        if
        OOS_ACT_WORZAK_HEALED_COUNT < 7
        then 
        
        OOS_ACT_WORZAK_HEALED_COUNT += 1     
        
        if
        $TIM_HEALTH < 30
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by WORZAK_HEAL_AMOUNT_LOW affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += WORZAK_SHIELD_AMOUNT_LOW
        else
        
        if
        $TIM_HEALTH < 60
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by WORZAK_HEAL_AMOUNT_NORMAL affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += WORZAK_SHIELD_AMOUNT_NORMAL
        end
        
        end
        
        end
        
        01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 0
//        wait 150 
        32@ = 0
        repeat
        wait 0
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 150       
        04EB: AS_actor OOS_ACT_WORZAK crouch 1
//        wait 1500
        32@ = 0
        repeat
        wait 0
        
        if
        32@ >= 750
        then
        actor.SetImmunities(OOS_ACT_WORZAK,1,1,1,1,1)
        end
        
        if and
        COOP_ACTIVE_FLAG == 1
        0800:   in_two_players_mode
        056D:   actor COOP_ACTOR defined
        then
        if                  
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
        end
        
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 1500
        01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 70
        07DD: set_actor OOS_ACT_WORZAK attack_rate 75 // previously known as temper_to
//        wait 1500
        32@ = 0
        repeat
        wait 0  
        
        if and
        COOP_ACTIVE_FLAG == 1
        0800:   in_two_players_mode
        056D:   actor COOP_ACTOR defined
        then
        if                  
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
        end
        
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
        if
        not actor.Dead(PLAYER_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 1500        
        04EB: AS_actor OOS_ACT_WORZAK crouch 0
//        05E2: AS_actor OOS_ACT_WORZAK kill_actor PLAYER_ACTOR       
        actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
        0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
        end
        
    else
    
    054E: clear_actor OOS_ACT_WORZAK damage
    32@ = 0 
    if and
    02D8:   actor OOS_ACT_WORZAK current_weapon == 70
    80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        then
        
        if
        OOS_ACT_WORZAK_HEALED_COUNT < 7
        then
        
        OOS_ACT_WORZAK_HEALED_COUNT += 1
        
        if
        $TIM_HEALTH < 30
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by -1000 affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += 500
        else
        
        if
        $TIM_HEALTH < 60
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by -350 affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += 175
        end
        
        end
        
        end
        
        01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 0
//        wait 150               
        32@ = 0
        repeat
        wait 0
        if
        not actor.Dead(COOP_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 150
        04EB: AS_actor OOS_ACT_WORZAK crouch 1
//        wait 1500
        32@ = 0
        repeat
        wait 0
        
        if
        32@ >= 750
        then
        actor.SetImmunities(OOS_ACT_WORZAK,1,1,1,1,1)
        end
        
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
        if
        not actor.Dead(COOP_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 1500
        
        ///////////////////////////////
        
        0555: remove_weapon 16 from_actor OOS_ACT_WORZAK
        0555: remove_weapon 17 from_actor OOS_ACT_WORZAK
        0555: remove_weapon 18 from_actor OOS_ACT_WORZAK
        
        random_int 1@ 0 3
        if
        1@ == 0
            then    
            0781: get_weapon_with_ID 16 model_to 1@
            
            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,16,99999)    
            end
        
        if
        1@ == 1
            then
            0781: get_weapon_with_ID 16 model_to 1@
            
            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,16,99999)
            end
        
        if
        1@ == 2
            then
            0781: get_weapon_with_ID 18 model_to 1@
            
            while not model.Available(1@)
            wait 0
            model.Load(1@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(OOS_ACT_WORZAK,18,99999)
            end        
        
        ///////////////////////////////
        
        07DD: set_actor OOS_ACT_WORZAK attack_rate 150 // previously known as temper_to        
        04EB: AS_actor OOS_ACT_WORZAK crouch 0
        05E2: AS_actor OOS_ACT_WORZAK kill_actor $VOICE_ACTOR_COOP
        else  
        
        if
        OOS_ACT_WORZAK_HEALED_COUNT < 7
        then  
        
        OOS_ACT_WORZAK_HEALED_COUNT += 1    
        
        if
        $TIM_HEALTH < 30
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by WORZAK_HEAL_AMOUNT_LOW affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += WORZAK_SHIELD_AMOUNT_LOW
        else
        
        if
        $TIM_HEALTH < 60
        then
        0851: set_actor OOS_ACT_WORZAK decrease_health_by WORZAK_HEAL_AMOUNT_NORMAL affect_armour 0
        035F: actor OOS_ACT_WORZAK armour += WORZAK_SHIELD_AMOUNT_NORMAL
        end
        
        end
        
        end
        
        01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 0
//        wait 150 
        32@ = 0
        repeat
        wait 0
        if
        not actor.Dead(COOP_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 150       
        04EB: AS_actor OOS_ACT_WORZAK crouch 1
//        wait 1500
        32@ = 0
        repeat
        wait 0
        
        if
        32@ >= 750
        then
        actor.SetImmunities(OOS_ACT_WORZAK,1,1,1,1,1)
        end
        
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
        if
        not actor.Dead(COOP_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 1500
        01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 70
        07DD: set_actor OOS_ACT_WORZAK attack_rate 75 // previously known as temper_to
//        wait 1500
        32@ = 0
        repeat
        wait 0
        if
        80F2: not  actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
        if                  
        80F2: not  actor OOS_ACT_WORZAK near_actor COOP_ACTOR radius 20.0 20.0 sphere 0
        jf @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
        if
        not actor.Dead(COOP_ACTOR)
        jf @OOS_ACT_FAILED_PLAYER_DIED        
        gosub @VORZAK_PODOSOSI_CHECKS
        if
        not actor.Dead(OOS_ACT_WORZAK)
        jf @WORZAK_DIED        
        until 32@ >= 1500        
        04EB: AS_actor OOS_ACT_WORZAK crouch 0
//        05E2: AS_actor OOS_ACT_WORZAK kill_actor COOP_ACTOR       
        actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
        0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
        end
    
    end    
        
    02AB: set_actor OOS_ACT_WORZAK immunities BP 0 FP 1 EP 0 CP 1 MP 1     
    end

TEMPVAR_INT = 90
008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
if
0E45: frame_mod TEMPVAR_INT
    then
    05C1: AS_actor OOS_ACT_WORZAK speak_from_audio_table $ARMY_ATTACK_AUDIO_TABLE
        
    gosub @RANDOM_DIALOG_ATTACK_VORZAK       
    
    09FD: get_gxt_string v$PHRASE3 width_to 3@  // ~k~~PED_SPRINT~ Select
    0093: 3@ = integer 3@ to_float
    3@ *= 8.0
    0092: 3@ = float 3@ to_integer
    text.ClearAll()  
            
    00BC: show_text_highpriority GXT v$PHRASE3 time 3@ flag 1  // ~s~Come back between 9:00 and 17:00.
        
    end  

/////////////////////////////////////

0085: 5@ = OOS_ACT_WORZAK_MAX_HP // (int)    
//5@ = 12000
1@ = actor.Health(OOS_ACT_WORZAK)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: $TIM_HEALTH = 2@ // (int)
            
/////////////////////////////////////

:WORZAK_DIED

until actor.Dead(OOS_ACT_WORZAK)

v$ST_DIALOG[0] = "END293"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

0151: remove_vagina_text $TIM_HEALTH
marker.Disable(MISSION_MARKER)

v$OBJECTIVE = "GME1352"
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

if
0800:   in_two_players_mode
then
0459: end_thread_named 'SRV_VC2'
actor.DestroyInstantly($VOICE_ACTOR_COOP)
end

TEAMMATES_SHOOTS_PROJECTILES = 0

repeat
wait 0

if or 
056D:   actor OOS_ACT_WORZAK_PODSOS1 defined
056D:   actor OOS_ACT_WORZAK_PODSOS2 defined
056D:   actor OOS_ACT_WORZAK_PODSOS3 defined
    then
    
    1@ = 0
    
    if
    056D:   actor OOS_ACT_WORZAK_PODSOS1 defined
        then
        if
        not actor.Dead(OOS_ACT_WORZAK_PODSOS1)
            then
            1@ = 1
            end
        end
        
    if
    056D:   actor OOS_ACT_WORZAK_PODSOS2 defined
        then
        if
        not actor.Dead(OOS_ACT_WORZAK_PODSOS2)
            then
            1@ = 1
            end
        end
        
    if
    056D:   actor OOS_ACT_WORZAK_PODSOS3 defined
        then
        if
        not actor.Dead(OOS_ACT_WORZAK_PODSOS3)
            then
            1@ = 1
            end
        end
        
    if
    1@ == 0
    then
    break
    end            
    
    else
    break    
    end

until false
    
v$OBJECTIVE = "DUMMY"

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
//    
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 500
wait 500
audiostream.Release($MUSIC_ASSHOLE)

/////////////////////////////////////////////////////////////////////
    
MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS7B.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

actor.StorePos(OOS_ACT_WORZAK,4@,5@,6@)
pickup.Create(7@,3416,3,4@,5@,6@)

v$OBJECTIVE = "GME1351"
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

03DC: MISSION_MARKER = create_marker_above_pickup 7@

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until pickup.Picked_up(7@)

$HEAL += 3
$BINT += 2

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ < 5
then
0AF1: write_int 5 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
create_thread @OOS_CHK
create_thread @OOS_CH2
end

v$OBJECTIVE = "DUMMY"

v$ST_DIALOG[0] = "END294"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

marker.Disable(MISSION_MARKER)

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

until $DIALOG_END == 1

:OOS_LOAD_CHECKPOINT_AFTER_WORZAK

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ == 6
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,1194.9697, -700.5461, 1061.8241)
    actor.Angle(PLAYER_ACTOR) = 0.0698
    camera.Restore_WithJumpCut()
    
    $SAVESTATUS = 0 
    $ZOMBIES_COUNT = 20
    $Z_DONT_CLIMB_FLAG = 0
    $ZOMBIES_HORDE = 1
    $ALLOW_ZOMBIES = 1
    $ZOMBIES_ALWAYS_VISIBLE = 0
    $ZOMBIE_SPAWN_ON_COORD = 0
    $SALVATION_FLAG = 1
    $PHRASES_OFF_FLAG = 0
    SPEC_INFECTED_MARKER_FLAG = 0
    $SPECIAL_INF_MARKER_TYPE = 0
    
    CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
    
    if
    8800: not  in_two_players_mode
    then
    $DELETE_TEAMMATES = 1
    wait 1000
    $DELETE_TEAMMATES = 0
    end
    
    OOS_MARK = 999668
    $ZMB_RADIUS = 65.0
    $ZMB_Z_RADIUS = 5.0
    ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
    ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
    $ZOMBIE_SPAWN_ON_COORD = 0
    $SAVESTATUS = 1
    $ZOMBIE_REMOVE_FLAG = 1
    wait 1000
    $SAVESTATUS = 0
    $ZOMBIE_REMOVE_FLAG = 0
    ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
    ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
    $DRUNK_MODE_FLAG = 0
    $DRAW_RED = 0
    $ALLOW_BLEEDING = 1
    $ZOMBIES_COUNT = 5
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    jump to @OOS_LOAD_CHECKPOINT_AFTER_FAILED_CONTAINER1
    end

gosub @OOS_ACT_CREATE_LEADERS_AFTER_WORZAK

v$ST_DIALOG[0] = "END295"
v$ST_DIALOG[1] = "END296"
v$ST_DIALOG[2] = "END297"
v$ST_DIALOG[3] = "END298"
v$ST_DIALOG[4] = "END299"
v$ST_DIALOG[5] = "END300"
v$ST_DIALOG[6] = "END301"
v$ST_DIALOG[7] = "END302"
v$ST_DIALOG[8] = "END303"
v$ST_DIALOG[9] = "END304"
v$ST_DIALOG[10] = "END305"
$DIALOG_COUNT = 10
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ == 5
    then
    OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 1
    text.ShowTextBox('GME1367')
    else
    OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 0
    end

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if or
$CHEATS_ON == 1
OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE == 1
then
if
0E3E: is_button_just_pressed 0 button 4
    then
    $END_DIALOG_INST = 1
    wait 0
    break
    end
end

until $DIALOG_END == 1

Audiostream.PerformAction($MUSIC_ASSHOLE, PAUSE)
fade 0 0

/////////////////////////////////////////////////////////////////////
    
MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_CRAZY = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\monologue.wav")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 3
Audiostream.PerformAction($MUSIC_CRAZY, PLAY)
Audiostream.Loop($MUSIC_CRAZY, 1)
Audiostream.Volume($MUSIC_CRAZY) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_CRAZY // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_CRAZY volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

OOS_MARK = 666
$ACHIV_NUMBER = 3306
FREEMODE_VOICE_START = 3306
FREEMODE_VOICE_END = 3316

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ == 5
    then
    MIKE_VOICE_CANNOT_SKIP_FLAG = 0
    else
    MIKE_VOICE_CANNOT_SKIP_FLAG = 1
    end

create_thread @VOI_SHO

repeat
wait 0
until $ACHIV_SHOW_ENDED == 1

$END_DIALOG_INST = 1
wait 0

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_CRAZY // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
//    
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_CRAZY volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_CRAZY)

Audiostream.PerformAction($MUSIC_ASSHOLE, RESUME)

$DRUNK_MODE_FLAG = 1

fade 1 100
wait 100

v$ST_DIALOG[0] = "END324"
v$ST_DIALOG[1] = "END325"
v$ST_DIALOG[2] = "END326"
v$ST_DIALOG[3] = "END327"
$DIALOG_COUNT = 3
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

OOS_MARK = 667
$ACHIV_NUMBER = 3317
FREEMODE_VOICE_START = 3317
FREEMODE_VOICE_END = 3323
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

for 0@ = 0 to 4
$SURVIVOR_PLAYER_DAMAGE_COUNT[0@] = 0
end

FRIENDLY_FIRE_ON = 1
0A8C: write_memory 0x04AD4A8 size 4 value 9667599 virtual_protect 1
0A8C: write_memory 0x04AD4AC size 2 value 0 virtual_protect 1
0A8C: write_memory 0x04AD4B1 size 4 value 9077775 virtual_protect 1
0A8C: write_memory 0x04AD4B5 size 2 value 0 virtual_protect 1

32@ = 0

v$OBJECTIVE = "GME1359"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1359"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

054E: clear_actor OOS_ACT_ENKER damage
054E: clear_actor OOS_ACT_GARNET damage
054E: clear_actor OOS_ACT_ARTEMIS damage
054E: clear_actor OOS_ACT_DANIEL damage

for 0@ = 0 to 4
if
056D:   actor $SURVIVER[0@] defined
    then
    054E: clear_actor $SURVIVER[0@] damage
    end
end

0568: set_actor OOS_ACT_ENKER untargetable 0
0568: set_actor OOS_ACT_GARNET untargetable 0
0568: set_actor OOS_ACT_ARTEMIS untargetable 0
0568: set_actor OOS_ACT_DANIEL untargetable 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[0] = 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[1] = 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[2] = 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[3] = 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[4] = 0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

if or
$SURVIVOR_PLAYER_DAMAGE_COUNT[0] > 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[1] > 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[2] > 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[3] > 0
$SURVIVOR_PLAYER_DAMAGE_COUNT[4] > 0
    then
    CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
    $SURVIVOR_SAW_SHIT[0] = 1
    $SURVIVOR_SAW_SHIT[1] = 1
    $SURVIVOR_SAW_SHIT[2] = 1
    $SURVIVOR_SAW_SHIT[3] = 1
    $SURVIVOR_SAW_SHIT[4] = 1
    jump to @OOS_DAMAGED_TEMMATES_JUMP
    end
    
if
0800:   in_two_players_mode
    then
    if or
    051A:   actor OOS_ACT_ENKER damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_GARNET damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_ARTEMIS damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_DANIEL damaged_by_actor COOP_ACTOR
        then
        jump to @OOS_DAMAGED_TEMMATES_JUMP
        end
    end    

if or
051A:   actor OOS_ACT_ENKER damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_GARNET damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_ARTEMIS damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_DANIEL damaged_by_actor PLAYER_ACTOR
    then
    :OOS_DAMAGED_TEMMATES_JUMP
    
    CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
    $SURVIVOR_SAW_SHIT[0] = 1
    $SURVIVOR_SAW_SHIT[1] = 1
    $SURVIVOR_SAW_SHIT[2] = 1
    $SURVIVOR_SAW_SHIT[3] = 1
    $SURVIVOR_SAW_SHIT[4] = 1
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
//        
//    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//    wait 0
//    end
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
    wait 250
    audiostream.Release($MUSIC_ASSHOLE)
    
    MAIN_QUEST_MUSIC_FLAG = 1
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS8B.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    
    /////////////////////Плавное нарастание/////////////////////
//    
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//    
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//    
//    wait 1 
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
    
    /////////////////////////////////////////////////////////////////////
    
    $ACHIV_TOTAL_SHOW_OFF_FLAG = 1
    $END_DIALOG_INST = 1
    wait 0
    jump to @OOS_BAD_ENDING_JUMP
    end

until 32@ >= 14000

0568: set_actor OOS_ACT_ENKER untargetable 1
0568: set_actor OOS_ACT_GARNET untargetable 1
0568: set_actor OOS_ACT_ARTEMIS untargetable 1
0568: set_actor OOS_ACT_DANIEL untargetable 1

v$OBJECTIVE = "DUMMY"
0AF0: FRIENDLY_FIRE_ON = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "FRIENDLY_FIRE_ON"
if
FRIENDLY_FIRE_ON == 0
then
0E6A: make_nop 0x04AD4A8 size 6
0E6A: make_nop 0x04AD4B1 size 6
end

$DRUNK_MODE_FLAG = 0
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1

v$ST_DIALOG[0] = "END333"
v$ST_DIALOG[1] = "END334"
v$ST_DIALOG[2] = "END335"
v$ST_DIALOG[3] = "END336"
$DIALOG_COUNT = 3
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ == 5
    then
    OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 1
    text.ShowTextBox('GME1367')
    else
    OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 0
    end

repeat
wait 0

if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if or
$CHEATS_ON == 1
OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE == 1
then
if
0E3E: is_button_just_pressed 0 button 4
    then
    $END_DIALOG_INST = 1
    wait 0
    break
    end
end

until $DIALOG_END == 1

if or
OOS_ACT_FERMERS_SURVIVERS_NUM > 0
OOS_ACT_FERMERS_SURVIVERS_NUM < 0
OOS_ACT_FERMERS_SURVIVERS_NUM == 0
then

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 0
then
gosub @FERMERS_CREATE_BUNKER_GOOD_FOR_END
end

repeat
wait 0

if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(OOS_ACT_FERMER1,1207.5848, -757.0679, 1061.8197)
$END_DIALOG_INST = 1
wait 0
break
end

if or
OOS_ACT_FERMERS_SURVIVERS_NUM == 0
OOS_FARMERS_WITH_PLAYER == 0
then
06C9: remove_actor OOS_ACT_ENKER from_group
0687: clear_actor OOS_ACT_ENKER task
0856: set_actor OOS_ACT_ENKER enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_ENKER
0850: AS_actor OOS_ACT_ENKER follow_actor PLAYER_ACTOR

06C9: remove_actor OOS_ACT_GARNET from_group
0687: clear_actor OOS_ACT_GARNET task
0856: set_actor OOS_ACT_GARNET enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_GARNET
0850: AS_actor OOS_ACT_GARNET follow_actor PLAYER_ACTOR

06C9: remove_actor OOS_ACT_ARTEMIS from_group
0687: clear_actor OOS_ACT_ARTEMIS task
0856: set_actor OOS_ACT_ARTEMIS enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_ARTEMIS
0850: AS_actor OOS_ACT_ARTEMIS follow_actor PLAYER_ACTOR

06C9: remove_actor OOS_ACT_DANIEL from_group
0687: clear_actor OOS_ACT_DANIEL task
0856: set_actor OOS_ACT_DANIEL enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_DANIEL
0850: AS_actor OOS_ACT_DANIEL follow_actor PLAYER_ACTOR
jump to @INSTA_TANKS_OOS 
end

if and
0EEA: locate_char_distance_to_coordinates OOS_ACT_FERMER1 pos 1207.5848 -757.0679 1061.8197 radius 10.0
0364:   actor OOS_ACT_FERMER1 spotted_actor PLAYER_ACTOR
    then
    break
    end

until false

0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
if
0@ == 5
    then
    OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 1
    text.ShowTextBox('GME1367')
    else
    OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE = 0
    end

v$ST_DIALOG[0] = "ENB337"
v$ST_DIALOG[1] = "ENB338"
v$ST_DIALOG[2] = "EN340"
v$ST_DIALOG[3] = "EN341"
v$ST_DIALOG[4] = "EN342"
v$ST_DIALOG[5] = "EN343"
v$ST_DIALOG[6] = "ENB344"
$DIALOG_COUNT = 6
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

5@ = 0

repeat
wait 0

if and
$DIALOG_CURRENT_INT == 3
5@ == 0
    then
    5@ = 1    
    gosub @OOS_LEADERS_GO_CLIMB    
    end

if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if or
$CHEATS_ON == 1
OOS_ACT_CAN_SKIP_DIALOG_SEQUENCE == 1
then
if
0E3E: is_button_just_pressed 0 button 4
    then
    $END_DIALOG_INST = 1
    wait 0
    
    if
    5@ == 0
    then
    gosub @OOS_LEADERS_GO_CLIMB
    end
    
    break
    end
end

until $DIALOG_END == 1

32@ = 0

repeat
wait 0

if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

until 32@ >= 9900

:INSTA_TANKS_OOS 

$TANK_HEALTH *= 3
OOS_MARK = 999666
$SAVESTATUS = 0 
$ZOMBIES_COUNT = 20
$Z_DONT_CLIMB_FLAG = 0
$ZOMBIES_HORDE = 1
$ALLOW_ZOMBIES = 1
$ZOMBIES_ALWAYS_VISIBLE = 1
$ZOMBIE_SPAWN_ON_COORD = 1
ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 1
$SPECIAL_INFECTED_SPAWN_OZC_FLAG = 1
$TANK_INTERIOR_SPAWN = 1
$HUNTER_INTERIOR_SPAWN = 1
$CHARGER_INTERIOR_SPAWN = 1
$SALVATION_FLAG = 1
$ZOMBIE_COORD_MAX = 1        
$ZOMBIE_X[0] = 1207.3813
$ZOMBIE_Y[0] = -772.8027
$ZOMBIE_Z[0] = 1067.7013
$SPAWN_TANK_FLAG = 1
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 3
$PHRASES_OFF_FLAG = 0
SPEC_INFECTED_MARKER_FLAG = 1
$SPECIAL_INF_MARKER_TYPE = 0

02AB: set_actor OOS_ACT_ENKER immunities BP 1 FP 1 EP 1 CP 0 MP 0
02AB: set_actor OOS_ACT_GARNET immunities BP 1 FP 1 EP 1 CP 0 MP 0
02AB: set_actor OOS_ACT_ARTEMIS immunities BP 1 FP 1 EP 1 CP 0 MP 0
02AB: set_actor OOS_ACT_DANIEL immunities BP 1 FP 1 EP 1 CP 0 MP 0

if
OOS_FARMERS_WITH_PLAYER == 1
then

for 0@ = 26 to 33
02AB: set_actor $RNDM_HOUSE_WEAPON[0@] immunities BP 1 FP 1 EP 1 CP 0 MP 0
end

end

008B: OOS_HUNTER_WAIT_SPAWN_MIN_PRE = $HUNTER_WAIT_SPAWN_MIN // (int)
008B: OOS_HUNTER_WAIT_SPAWN_MAX_PRE = $HUNTER_WAIT_SPAWN_MAX // (int)
008B: OOS_CHARGER_WAIT_SPAWN_MIN_PRE = $CHARGER_WAIT_SPAWN_MIN // (int)
008B: OOS_CHARGER_WAIT_SPAWN_MAX_PRE = $CHARGER_WAIT_SPAWN_MAX // (int)

$HUNTER_WAIT_SPAWN_MIN = 10000
$HUNTER_WAIT_SPAWN_MAX = 20000
$CHARGER_WAIT_SPAWN_MIN = 10000
$CHARGER_WAIT_SPAWN_MAX = 20000
wait 5
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 1
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 1
wait 1
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 0
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 0

ZAME_PROTECT_THE_OBJECT_SND = Audiostream.Load3d("AUDIO\SOUNDS\QUESTS\OOS\door_break.mp3")
008A: ZAME_PROTECT_THE_OBJECT_OBJ = OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ // (int)
ZAME_PROTECT_THE_OBJECT_FLAG = 2
ZAME_PROTECT_THE_OBJECT_CHAR = actor.Create(26,#MALE01,1180.1127, -730.1913, 1062.0322)
0337: set_actor ZAME_PROTECT_THE_OBJECT_CHAR visibility 0
actor.SetImmunities(ZAME_PROTECT_THE_OBJECT_CHAR,1,1,1,1,1)
actor.LockInCurrentPosition(ZAME_PROTECT_THE_OBJECT_CHAR,true)
0619: enable_actor ZAME_PROTECT_THE_OBJECT_CHAR collision_detection 0 

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
//    
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS8.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//then
//$MUSIC_FADE_NUMBER = 0 
//end
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

///////////////////////////////////////////////////////////////////// 

v$ST_DIALOG[0] = "END345"
v$ST_DIALOG[1] = "EN345"
v$ST_DIALOG[2] = "EN346"
v$ST_DIALOG[3] = "EN347"
v$ST_DIALOG[4] = "EN348"
v$ST_DIALOG[5] = "EN349"
v$ST_DIALOG[6] = "EN350"
v$ST_DIALOG[7] = "EN351"  
$DIALOG_COUNT = 7
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

v$OBJECTIVE = "GME1362"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1362"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

0392: make_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ moveable 1
07F7: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ destructible 1
09CA: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 0 MP 0
071F: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ health_to 3000
    
0392: make_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ moveable 1
07F7: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ destructible 1
09CA: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ immunities BP 1 FP 1 EP 1 CP 0 MP 0
071F: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ health_to 3000

04F7: vagina_text OOS_ACT_CONTAINER_LEFT_HEALTH_STATUS_TEXT type 1 line 1 GXT 'GME1363' // global_variable  // Scor
04F7: vagina_text OOS_ACT_CONTAINER_RIGHT_HEALTH_STATUS_TEXT type 1 line 2 GXT 'GME1364' // global_variable  // Scor

33@ = 0
0188: MISSION_CHECKPOINT = create_marker_above_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ
0188: MISSION_MARKER = create_marker_above_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ
07E0: set_marker MISSION_CHECKPOINT type_to 1
07E0: set_marker MISSION_MARKER type_to 1

008B: OOS_ACT_TANKS_KILLED_BEFORE = $TANK_KILLED // (int)
OOS_ACT_TANKS_KILLED_BEFORE += 2

repeat
wait 0

/////////////////////////////////////
    
5@ = 3500
1@ = actor.Health(OOS_ACT_ENKER)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: ENKER_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////
    
5@ = 3500
1@ = actor.Health(OOS_ACT_GARNET)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: GARNET_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////
    
5@ = 3500
1@ = actor.Health(OOS_ACT_ARTEMIS)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: FERNANDO_ZAM_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

5@ = 3500
1@ = actor.Health(OOS_ACT_DANIEL)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: ARTEMIS_DANIEL_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then

if
056D:   actor $TANK[0] defined
then
05BE: AS_actor $TANK[0] die
end

if
056D:   actor $TANK[1] defined
then
05BE: AS_actor $TANK[1] die
end

for 0@ = 0 to 19

if
056D:   actor $ZOMBIE[0@] defined
then
05BE: AS_actor $ZOMBIE[0@] die
end

end

0151: remove_status_text OOS_ACT_CONTAINER_LEFT_HEALTH_STATUS_TEXT
0151: remove_status_text OOS_ACT_CONTAINER_RIGHT_HEALTH_STATUS_TEXT
$END_DIALOG_INST = 1
wait 0
break
end

if and
$CHEATS_ON == 1
0E3D:   key_pressed 81
then
$END_DIALOG_INST = 1
wait 0
071F: set_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ health_to 0
071F: set_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ health_to 0
end

if and
$CAMP_AGRED_FLAG[$QUEST_CAMP_NUMBER] == 0
not $CAN_AIM_AT_SRVVRS == 2
jf @OOS_ACT_FAILED_AGRO
if
803A: not  LEADER_DIED_FLAG == $QUEST_CAMP_NUMBER // (int)
jf @OOS_ACT_FAILED_LDEAD
if
RANDOM_QUEST_CANCEL_FLAG == 0
jf @OOS_ACT_FAILED_CANCEL
if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL

if and
33@ >= 10000
OOS_ACT_PHRASE352_FLAG == 0
    then
    OOS_ACT_PHRASE352_FLAG = 1
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "EN352"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end
    
if and
$HUNTER_SPAWNED == 1
OOS_ACT_PHRASE353_FLAG == 0
    then
    OOS_ACT_PHRASE353_FLAG = 1
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "EN353"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end    

//0AD1: show_formatted_text_highpriority "$TANK_KILLED %d OOS_ACT_TANKS_KILLED_BEFORE %d OOS_ACT_PHRASE353B_FLAG %d" time 2000 $TANK_KILLED OOS_ACT_TANKS_KILLED_BEFORE OOS_ACT_PHRASE353B_FLAG
if and
002E:   $TANK_KILLED >= OOS_ACT_TANKS_KILLED_BEFORE  // (int)
OOS_ACT_PHRASE353B_FLAG == 0
    then
    OOS_ACT_PHRASE353B_FLAG = 1
    ZAME_PROTECT_THE_OBJECT_FLAG = 0
    audiostream.Release(ZAME_PROTECT_THE_OBJECT_SND)
    actor.DestroyInstantly(ZAME_PROTECT_THE_OBJECT_CHAR)
    marker.Disable(MISSION_CHECKPOINT)
    marker.Disable(MISSION_MARKER)
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "EN353B"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    0151: remove_status_text OOS_ACT_CONTAINER_LEFT_HEALTH_STATUS_TEXT
    0151: remove_status_text OOS_ACT_CONTAINER_RIGHT_HEALTH_STATUS_TEXT
    v$OBJECTIVE = "GME1365"
    if
    REALISM_MODE == 1
    then
    v$OBJECTIVE = "GME1365"
    end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    
    04F7: vagina_text ENKER_HEALTH_STATUS_TEXT type 1 line 1 GXT 'GME1355' // global_variable  // Scor
    04F7: vagina_text GARNET_HEALTH_STATUS_TEXT type 1 line 2 GXT 'GME1356' // global_variable  // Scor
    04F7: vagina_text FERNANDO_ZAM_HEALTH_STATUS_TEXT type 1 line 3 GXT 'GM1358B' // global_variable  // Scor
    04F7: vagina_text ARTEMIS_DANIEL_HEALTH_STATUS_TEXT type 1 line 4 GXT 'GM1358C' // global_variable  // Scor
    
    end

TEMPVAR_INT = 90
008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
if and
0E45: frame_mod TEMPVAR_INT
$TANK_SPAWNED == 1
then
if
0E4D: random_percent 50
    then
    008A: ZAME_PROTECT_THE_OBJECT_OBJ = OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ // (int)
    
    if
    056D:   actor $TANK[0] defined
    then
    06E2: AS_actor $TANK[0] run_to_object ZAME_PROTECT_THE_OBJECT_OBJ timelimit 999999 stop_within_radius 0.01
    end
    
    if
    056D:   actor $TANK[1] defined
    then
    06E2: AS_actor $TANK[1] run_to_object ZAME_PROTECT_THE_OBJECT_OBJ timelimit 999999 stop_within_radius 0.01
    end
    
    else
    008A: ZAME_PROTECT_THE_OBJECT_OBJ = OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ // (int)
    
    if
    056D:   actor $TANK[0] defined
    then
    06E2: AS_actor $TANK[0] run_to_object ZAME_PROTECT_THE_OBJECT_OBJ timelimit 999999 stop_within_radius 0.01
    end
    
    if
    056D:   actor $TANK[1] defined
    then
    06E2: AS_actor $TANK[1] run_to_object ZAME_PROTECT_THE_OBJECT_OBJ timelimit 999999 stop_within_radius 0.01
    end
    
    end
end

/////////////////////////////////////
    
5@ = 3000
071E: get_object OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ health_to 1@
if and
1@ < 1
OOS_ACT_PHRASE353B_FLAG == 0
then
jump to @OOS_ACT_FAILED_CONTAINER_GATES
end
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: OOS_ACT_CONTAINER_LEFT_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

5@ = 3000
071E: get_object OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ health_to 1@
if and
1@ < 1
OOS_ACT_PHRASE353B_FLAG == 0
then
jump to @OOS_ACT_FAILED_CONTAINER_GATES
end
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: OOS_ACT_CONTAINER_RIGHT_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

gosub @BASIC_AI_FORATTACK_ZOMBIES

if and
OOS_ACT_PHRASE353B_FLAG == 1
33@ >= 90000
    then
    break
    end

until false

$TANK_HEALTH /= 3
$SAVESTATUS = 0 
$ZOMBIES_COUNT = 0
$Z_DONT_CLIMB_FLAG = 0
$ZOMBIES_HORDE = 0
$ALLOW_ZOMBIES = 1
$ZOMBIE_SPAWN_ON_COORD = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
$SPECIAL_INFECTED_SPAWN_OZC_FLAG = 0
$TANK_INTERIOR_SPAWN = 0
$HUNTER_INTERIOR_SPAWN = 0
$CHARGER_INTERIOR_SPAWN = 0
$SALVATION_FLAG = 0
$ZOMBIES_ALWAYS_VISIBLE = 0
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 0
SPEC_INFECTED_MARKER_FLAG = 0

v$OBJECTIVE = "GME1366"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1366"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)      

repeat
wait 0

gosub @BASIC_AI_FORATTACK_ZOMBIES

/////////////////////////////////////
    
5@ = 3500
1@ = actor.Health(OOS_ACT_ENKER)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: ENKER_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////
    
5@ = 3500
1@ = actor.Health(OOS_ACT_GARNET)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: GARNET_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////
    
5@ = 3500
1@ = actor.Health(OOS_ACT_ARTEMIS)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: FERNANDO_ZAM_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

5@ = 3500
1@ = actor.Health(OOS_ACT_DANIEL)
                        
0085: 2@ = 1@ // (int)
0093: 2@ = integer 2@ to_float
0085: 4@ = 5@ // (int)
0093: 4@ = integer 4@ to_float                                                
4@ /= 100.0                     
0073: 2@ /= 4@ // (float)
0092: 2@ = float 2@ to_integer
            
008A: ARTEMIS_DANIEL_HEALTH_STATUS_TEXT = 2@ // (int)

/////////////////////////////////////

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

if and
$CHARGER_SPAWNED == 0
$HUNTER_SPAWNED == 0
$ZOMBIE_SPAWNED_COUNT == 0
then
break
end

until false

0151: remove_status_text ENKER_HEALTH_STATUS_TEXT
0151: remove_status_text GARNET_HEALTH_STATUS_TEXT
0151: remove_status_text FERNANDO_ZAM_HEALTH_STATUS_TEXT
0151: remove_status_text ARTEMIS_DANIEL_HEALTH_STATUS_TEXT

ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0

v$OBJECTIVE = "DUMMY"

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
//    
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)

v$ST_DIALOG[0] = "EN354"
v$ST_DIALOG[1] = "ED346"
v$ST_DIALOG[2] = "END346"
v$ST_DIALOG[3] = "END347"
v$ST_DIALOG[4] = "END348"
v$ST_DIALOG[5] = "END349"
if
OOS_FARMERS_WITH_PLAYER == 1
then
v$ST_DIALOG[6] = "END350"
v$ST_DIALOG[7] = "END351"
v$ST_DIALOG[8] = "END352"
v$ST_DIALOG[9] = "END353"
v$ST_DIALOG[10] = "END354"
else
v$ST_DIALOG[6] = "DUMMY"
v$ST_DIALOG[7] = "END351"
v$ST_DIALOG[8] = "END352"
v$ST_DIALOG[9] = "END353"
v$ST_DIALOG[10] = "DUMMY"
end
v$ST_DIALOG[11] = "END355"
v$ST_DIALOG[12] = "END356"
v$ST_DIALOG[13] = "END357"
v$ST_DIALOG[14] = "END358"
v$ST_DIALOG[15] = "END359"
$DIALOG_COUNT = 15
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2 10

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_ENKER)
jf @OOS_ACT_FAILED_ENKER
if
not actor.Dead(OOS_ACT_GARNET)
jf @OOS_ACT_FAILED_GARNET
if
not actor.Dead(OOS_ACT_ARTEMIS)
jf @OOS_ACT_FAILED_ARTEMIS
if
not actor.Dead(OOS_ACT_DANIEL)
jf @OOS_ACT_FAILED_DANIEL

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

until $DIALOG_END == 1

fade 0 2000
$HUD_REMOVE = 1
wait 2000

0A8D: 1@ = read_memory 0x0C402B9 size 4 virtual_protect 0
if or
099D:   night_vision_enabled
1@ == 1
then
09EB: remove_player_goggles 0 use_anim 0
end

$END_DIALOG_INST = 1
wait 0
$TIME_LOCK_OFF = 1

actor.DestroyInstantly(OOS_ACT_ENKER)
actor.DestroyInstantly(OOS_ACT_GARNET)
actor.DestroyInstantly(OOS_ACT_ARTEMIS)
actor.DestroyInstantly(OOS_ACT_DANIEL)

for 0@ = 26 to 33

if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
then
actor.DestroyInstantly($RNDM_HOUSE_WEAPON[0@])
end

end

$HUD_REMOVE = 1
$SAVESTATUS = 1

player.CanMove(PLAYER_CHAR,false)
cinema.Widescreen(1)
BLACK_POLOSKI_ON = 1
04BB: select_interior 0
0860: link_actor PLAYER_ACTOR to_interior 0
04FA: reset_sky_colors_with_fade 0
0777: delete_objects_in_object_group "bunker"
0777: delete_objects_in_object_group "bunker2"
wait 1000
$HUD_OFF_INST = 0

:CAR_CREATE_START_DFT30
if
model.Available(#DFT30)
then

actor.PutAtNoOffset(PLAYER_ACTOR,2899.1677, -1619.6041, -0.5373)
wait 500    
OOS_GOOD_END_DFT30 =  Car.Create(#DFT30, 2895.6921, -1527.2574, 11.6257)
Car.Angle(OOS_GOOD_END_DFT30) = 164.2874

0A97: 11@ = car OOS_GOOD_END_DFT30 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_GOOD_END_DFT30 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_GOOD_END_DFT30 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_GOOD_END_DFT30 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
036A: put_actor PLAYER_ACTOR in_car OOS_GOOD_END_DFT30

while not model.Available(3784)
wait 0
model.Load(3784)
mload
end
    
0@ = object.Create(3784,0.0,0.0,0.0)
0681: attach_object 0@ to_car OOS_GOOD_END_DFT30 with_offset -0.2 -1.0 1.2 rotation 0.0 0.0 0.0
0382: set_object 0@ collision_detection 0
    
if
model.Available(#DFT30)
then
//model.Destroy(#DFT30)
end
    
else
model.Load(#DFT30)
mload
wait 0
jump to @CAR_CREATE_START_DFT30
end

repeat
wait 0
07C0: load_path 812
until 07C1:   path 812 available

player.CanMove(PLAYER_CHAR,true)
wait 0         
05EB: assign_car OOS_GOOD_END_DFT30 to_path 812
06FD: set_car OOS_GOOD_END_DFT30 speed_on_path_to 1.0

camera.SetPosition(2881.919434, -1756.788818, 11.245783,0.0,0.0,0.0)
camera.OnVehicle(OOS_GOOD_END_DFT30,15,2)
create_thread @REFR_3D

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

fade 1 2000
wait 2000

repeat
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 2881.919434 -1756.788818 11.245783 radius 25.0
015D: set_gamespeed 0.3        
    
0622: AS_actor PLAYER_ACTOR bail_car OOS_GOOD_END_DFT30

repeat
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
until 0EEB: locate_car_distance_to_coordinates OOS_GOOD_END_DFT30 pos 2912.1196 -1790.0074 -2.5669 radius 10.0

05EC: release_car OOS_GOOD_END_DFT30 from_path
0873: release_path 812
wait 2000
fade 0 500
wait 500
015D: set_gamespeed 1.0

player.CanMove(PLAYER_CHAR,false)

actor.PutAtNoOffset(PLAYER_ACTOR,1291.4497, -786.0601, 96.4609)
actor.Angle(PLAYER_ACTOR) = 180.0

///////////////////////////////////////////////

while not model.Available(12785)
wait 0
model.Load(12785)
mload
end

OOS_ACT_GARNET = actor.Create(26,12785,1291.3521, -790.9642, 96.4554) //Гарнет 
actor.Angle(OOS_ACT_GARNET) = 2.0  
0D10: set_actor OOS_ACT_GARNET alpha 255 // IF and SET

///////////////////////////////////////////////

while not model.Available(12787)
wait 0
model.Load(12787)
mload
end

OOS_ACT_FERNANDO_ZAMESTITEL = actor.Create(26,12787,1289.0117, -790.6415, 96.4554) //Фернандо
actor.Angle(OOS_ACT_GARNET) = 338.0     
0D10: set_actor OOS_ACT_FERNANDO_ZAMESTITEL alpha 255 // IF and SET

///////////////////////////////////////////////

while not model.Available(12786)
wait 0
model.Load(12786)
mload
end

OOS_ACT_ENKER = actor.Create(26,12786,1293.7896, -789.5013, 96.4609) //Энкер
actor.Angle(OOS_ACT_ENKER) = 32.0     
0D10: set_actor OOS_ACT_ENKER alpha 255 // IF and SET

///////////////////////////////////////////////

0A1D: AS_actor OOS_ACT_GARNET rotate_to_and_look_at_actor PLAYER_ACTOR
0A1D: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL rotate_to_and_look_at_actor PLAYER_ACTOR
0A1D: AS_actor OOS_ACT_ENKER rotate_to_and_look_at_actor PLAYER_ACTOR
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1

camera.SetPosition(1294.250366 -784.699097 96.404968,0.0,0.0,0.0)
camera.PointAt(1293.709106, -785.538635, 96.358559,2)
create_thread @REFR_3D

fade 1 2000
wait 2000

v$ST_DIALOG[0] = "END360"
v$ST_DIALOG[1] = "END361"
0084: $DIALOG_ACTOR[0] = OOS_ACT_GARNET // (int)
0084: $DIALOG_ACTOR[1] = OOS_ACT_GARNET // (int)
$DIALOG_COUNT = 1
create_thread @DG_SYS

repeat
wait 0
until $DIALOG_END == 1

32@ = 0

while true
wait 0
text.ShowH('GME1036',100,1)

if
0E3E: is_button_just_pressed 0 button 11
then
text.ClearAll()
v$ST_DIALOG[0] = "END362"
0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
$DIALOG_COUNT = 0
create_thread @DG_SYS
break
end

if
0E3E: is_button_just_pressed 0 button 10
then

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT137_GOT"                        
if and
0@ == 0
$CHEATED_FLAG == 0
then
v$ACHIEVEMNT = "ACH137"
$ACHIEVEMENT_GOT_FLAG = 1                                    
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT137_GOT"
end

text.ClearAll()
OOS_CURRENT_PROGRESS = 8
v$ST_DIALOG[0] = "END363"
v$ST_DIALOG[1] = "END364"
v$ST_DIALOG[2] = "END365"
v$ST_DIALOG[3] = "END366"
v$ST_DIALOG[4] = "END367"
0084: $DIALOG_ACTOR[0] = PLAYER_ACTOR // (int)
0084: $DIALOG_ACTOR[1] = OOS_ACT_GARNET // (int)
0084: $DIALOG_ACTOR[2] = OOS_ACT_ENKER // (int)
0084: $DIALOG_ACTOR[3] = OOS_ACT_FERNANDO_ZAMESTITEL // (int)
0084: $DIALOG_ACTOR[4] = PLAYER_ACTOR // (int)
$DIALOG_COUNT = 4
create_thread @DG_SYS
break
end

end

repeat
wait 0
until $DIALOG_END == 1

if
OOS_CURRENT_PROGRESS == 8
then
fade 0 2500
wait 2500
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
actor.PutAtNoOffset(PLAYER_ACTOR,1256.4768, -814.5476, 84.1406)
actor.Angle(PLAYER_ACTOR) = 90.0
camera.Restore_WithJumpCut()
create_thread @REFR_3D
088E: set_next_day
088E: set_next_day
HARDCORE_DANGER_FLAG_SCRIPTED = 0
OOS_MARK = 0
CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0
$INT_ZMB_NOT = 0
CAMP_DONT_SAY_HELLO_FLAG = 0
CAMP_LEADER_DONT_SAY_BYE_FLAG = 0
PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
$PHRASES_OFF_FLAG = 0

$SAVESTATUS = 1
008A: $HUNTER_WAIT_SPAWN_MIN = OOS_HUNTER_WAIT_SPAWN_MIN_PRE // (int)
008A: $HUNTER_WAIT_SPAWN_MAX = OOS_HUNTER_WAIT_SPAWN_MAX_PRE // (int)
008A: $CHARGER_WAIT_SPAWN_MIN = OOS_CHARGER_WAIT_SPAWN_MIN_PRE // (int)
008A: $CHARGER_WAIT_SPAWN_MAX = OOS_CHARGER_WAIT_SPAWN_MAX_PRE // (int)
wait 5
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 1
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 1
wait 1000 
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 0
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 0

:CAR_CREATE_OOS_PRIZE
if
model.Available(15502)
then
200@ = Car.Create(15502, 1255.3431, -805.0184, 83.5595)
car.Angle(200@) = 180.0
car.DoorStatus(200@,0)
    
if
model.Available(15502)
then
//model.Destroy(15502)
end
    
else
model.Load(15502)
mload
wait 0
jump to @CAR_CREATE_OOS_PRIZE
end

0A97: 11@ = car 200@ struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car 200@ struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 50.0 
0A97: 22@ = car 200@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car 200@ struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2

actor.DestroyInstantly(OOS_ACT_ENKER)
actor.DestroyInstantly(OOS_ACT_GARNET)
actor.DestroyInstantly(OOS_ACT_FERNANDO_ZAMESTITEL)

$OOS_CAPTURED = 3
076C: set_zone 'OOSZN' gang 4 density_to 0
076C: set_zone 'OOSZN' gang 5 density_to 0
marker.Disable($OOS)
07FB: set_interior 'MADDOGS' access 1
07FB: set_interior 'MDDOGS' access 1
01BC: put_object OOS_ACT_GATES1_BUNKER_OBJ at 1195.1 -703.977 1066.74
01BC: put_object OOS_ACT_GATES2_BUNKER_OBJ at 1224.72 -669.758 1066.74
01BC: put_object OOS_ACT_GATES3_BUNKER_OBJ at 1266.85 -669.758 1066.74
create_thread @BUNKER

if
056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
then
car.Destroy($USED_CAR[LATEST_CAR_SLOT_USED])
end

if and
881E: not model $SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] boat
881F: not model $SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] plane
8820: not model $SAVE_CAR_MODEL[LATEST_CAR_SLOT_USED] heli
then                                    
$SAVE_CAR_X[LATEST_CAR_SLOT_USED] = 1246.3756
$SAVE_CAR_Y[LATEST_CAR_SLOT_USED] = -808.0202 
$SAVE_CAR_Z[LATEST_CAR_SLOT_USED] = 83.7687  
$SAVE_CAR_ANGLE[LATEST_CAR_SLOT_USED] = 180.8777
end

jump to @OOS_ACTION_END_JUMP

else

fade 0 2500
wait 2500

0A8D: 1@ = read_memory 0x0C402B9 size 4 virtual_protect 0
if or
099D:   night_vision_enabled
1@ == 1
then
09EB: remove_player_goggles 0 use_anim 0
end

CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
$DELETE_TEAMMATES = 1

/////////////////////Плавное затухание/////////////////////

//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end

/////////////////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS13.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 5000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 5000

/////////////////////////////////////////////////////////////////////
                         
:CAR_CREATE_START_CARGOBOB1B
if
model.Available(#CARGOBOB)
then
    
OOS_CARGOBOB1 = Car.Create(#CARGOBOB, 3006.2527, -861.6475, 72.8094)
Car.Angle(OOS_CARGOBOB1) = 270.3396
0825: set_helicopter OOS_CARGOBOB1 instant_rotor_start

0A97: 11@ = car OOS_CARGOBOB1 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_CARGOBOB1 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_CARGOBOB1 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_CARGOBOB1 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
    
if
model.Available(#CARGOBOB)
then
//model.Destroy(#CARGOBOB)
end
    
else
model.Load(#CARGOBOB)
mload
wait 0
jump to @CAR_CREATE_START_CARGOBOB1B
end

036A: put_actor PLAYER_ACTOR in_car OOS_CARGOBOB1
0743: heli OOS_CARGOBOB1 fly_to 9109.419434 -852.719604 70.059227 altitude 72.0 72.0

//////////////////////////////////////////////////////////////////////////////////////////////

:CAR_CREATE_START_CARGOBOB2
if
model.Available(#CARGOBOB)
then
    
OOS_CARGOBOB2 = Car.Create(#CARGOBOB, 2973.7893, -876.874, 74.0964)
Car.Angle(OOS_CARGOBOB2) = 254.4095
0825: set_helicopter OOS_CARGOBOB2 instant_rotor_start

0A97: 11@ = car OOS_CARGOBOB2 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_CARGOBOB2 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_CARGOBOB2 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_CARGOBOB2 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
0560: create_random_actor_in_car OOS_CARGOBOB2 handle_as 0@
0E0B: mark_char_as_needed 0@
0743: heli OOS_CARGOBOB2 fly_to 9973.7893 -876.874 74.0964 altitude 72.0 72.0
    
if
model.Available(#CARGOBOB)
then
//model.Destroy(#CARGOBOB)
end
    
else
model.Load(#CARGOBOB)
mload
wait 0
jump to @CAR_CREATE_START_CARGOBOB2
end

//////////////////////////////////////////////////////////////////////////////////////////////

:CAR_CREATE_START_CARGOBOB3
if
model.Available(#CARGOBOB)
then
    
OOS_CARGOBOB3 = Car.Create(#CARGOBOB, 3039.7893, -876.874, 74.0964)
Car.Angle(OOS_CARGOBOB3) = 254.4095
0825: set_helicopter OOS_CARGOBOB3 instant_rotor_start

0A97: 11@ = car OOS_CARGOBOB3 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_CARGOBOB3 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_CARGOBOB3 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_CARGOBOB3 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
0560: create_random_actor_in_car OOS_CARGOBOB3 handle_as 0@
0E0B: mark_char_as_needed 0@
0743: heli OOS_CARGOBOB3 fly_to 9039.7893 -876.874 74.0964 altitude 72.0 72.0
    
if
model.Available(#CARGOBOB)
then
//model.Destroy(#CARGOBOB)
end
    
else
model.Load(#CARGOBOB)
mload
wait 0
jump to @CAR_CREATE_START_CARGOBOB3
end

//////////////////////////////////////////////////////////////////////////////////////////////

:CAR_CREATE_START_BOAT1
if
model.Available(#JETMAX)
then
    
OOS_BOAT1 = Car.Create(#JETMAX, 3006.2527, -861.6475, 1.0)
Car.Angle(OOS_BOAT1) = 270.3396
car.SetSpeedInstantly(OOS_BOAT1,15.0)

0A97: 11@ = car OOS_BOAT1 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_BOAT1 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_BOAT1 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_BOAT1 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2

0560: create_random_actor_in_car OOS_BOAT1 handle_as 0@
0E0B: mark_char_as_needed 0@
02D3: boat OOS_BOAT1 sail_to 9109.419434 -852.719604 0.0
    
if
model.Available(#JETMAX)
then
//model.Destroy(#JETMAX)
end
    
else
model.Load(#JETMAX)
mload
wait 0
jump to @CAR_CREATE_START_BOAT1
end

//////////////////////////////////////////////////////////////////////////////////////////////

:CAR_CREATE_START_BOAT2
if
model.Available(#SQUALO)
then
    
OOS_BOAT2 = Car.Create(#SQUALO, 2973.7893, -876.874, 1.0)
Car.Angle(OOS_BOAT2) = 254.4095
car.SetSpeedInstantly(OOS_BOAT2,15.0)

0A97: 11@ = car OOS_BOAT2 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_BOAT2 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_BOAT2 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_BOAT2 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
0560: create_random_actor_in_car OOS_BOAT2 handle_as 0@
0E0B: mark_char_as_needed 0@
02D3: boat OOS_BOAT2 sail_to 9973.7893 -876.874 0.0
    
if
model.Available(#SQUALO)
then
//model.Destroy(#SQUALO)
end
    
else
model.Load(#SQUALO)
mload
wait 0
jump to @CAR_CREATE_START_BOAT2
end

//////////////////////////////////////////////////////////////////////////////////////////////

:CAR_CREATE_START_BOAT3
if
model.Available(#SPEEDER)
then
    
OOS_BOAT3 = Car.Create(#SPEEDER, 3039.7893, -876.874, 1.0)
Car.Angle(OOS_BOAT3) = 254.4095
car.SetSpeedInstantly(OOS_BOAT3,15.0)

0A97: 11@ = car OOS_BOAT3 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_BOAT3 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_BOAT3 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_BOAT3 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
0560: create_random_actor_in_car OOS_BOAT3 handle_as 0@
0E0B: mark_char_as_needed 0@
02D3: boat OOS_BOAT3 sail_to 9039.7893 -876.874 0.0
    
if
model.Available(#SPEEDER)
then
//model.Destroy(#SPEEDER)
end
    
else
model.Load(#SPEEDER)
mload
wait 0
jump to @CAR_CREATE_START_BOAT3
end

//////////////////////////////////////////////////////////////////////////////////////////////

camera.SetPosition(3109.419434, -852.719604, 70.059227,0.0,0.0,0.0)
camera.OnVehicle(OOS_CARGOBOB1,15,2)

fade 1 5000
wait 5000

0A48: enable_menu_access_in_widescreen_mode 0 
$TITLES_ENDED = 0
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 3
create_thread @FIN_TIT
0459: end_thread_named 'SIEGE'

repeat
wait 0
      
if or
0E3D: is_key_just_pressed 27 
$TITLES_ENDED == 1
    then
    break
    end

until false

$TITLES_ENDED = 1
0A48: enable_menu_access_in_widescreen_mode 1
0169: set_fade_color_RGB 0 0 0
fade 0 5000
wait 5000

$ALLOW_HUNGER = 0
$DELETE_SOUND = 1
$SAVER_COMING = 0 
$FPS_COUNTER_ENABLED = 0 
$FPS_COUNTER_ENABLED2 = 0    
$SATIETY_LEVEL = 600.0
$FATIGUE_LEVEL = 0.0

$STATS_SHOW_FLAG = 0
$STATS_SHOW_GAMEMODE = 1
create_thread @STS_SHW

$STATS_CAN_BE_SKIPPED = 0

0169: set_fade_color_RGB 0 0 0

//0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT114_GOT"                        
//if and
//0@ == 0
//$CHEATED_FLAG == 0
//then
//v$ACHIEVEMNT = "ACH114"
//$ACHIEVEMENT_GOT_FLAG = 1                                    
//0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT114_GOT"
//end

while $ACHIEVEMENT_GOT_FLAG == 1
wait 0
end

:CHECKING_STATS_OOS_2
wait 0

if
$STATS_CAN_BE_SKIPPED == 1
then
if or
$STATS_SHOW_END == 1
00E1:   player 0 pressed_key 17
jf @CHECKING_STATS_OOS_2
else
jump to @CHECKING_STATS_OOS_2
end

$STATS_SHOW_END = 1
$STATS_TOTAL_SHOW_OFF_FLAG = 1

32@ = 0

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 10000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)

/////////////////////////////////////////////////////////////////////

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME

end_thread

end

end 

:OOS_BAD_ENDING_JUMP

v$ST_DIALOG[0] = "END328"
v$ST_DIALOG[1] = "END329"
v$ST_DIALOG[2] = "END330"
$DIALOG_COUNT = 2
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

if
0800:   in_two_players_mode
then
05E2: AS_actor OOS_ACT_ENKER kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_GARNET kill_actor COOP_ACTOR
05E2: AS_actor OOS_ACT_ARTEMIS kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_DANIEL kill_actor COOP_ACTOR
077A: set_actor OOS_ACT_ENKER acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_GARNET acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_ARTEMIS acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_DANIEL acquaintance 4 to_actors_pedtype 1 // see ped.dat
else
05E2: AS_actor OOS_ACT_ENKER kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_GARNET kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_ARTEMIS kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_DANIEL kill_actor PLAYER_ACTOR
end

077A: set_actor OOS_ACT_ENKER acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_GARNET acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_ARTEMIS acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_DANIEL acquaintance 4 to_actors_pedtype 0 // see ped.dat
035F: actor OOS_ACT_ARTEMIS armour += 69
035F: actor OOS_ACT_DANIEL armour += 69
035F: actor OOS_ACT_ENKER armour += 69
035F: actor OOS_ACT_GARNET armour += 69
wait 0
wait 0
create_thread @PED_BKP OOS_ACT_ENKER 371 0 0 0 1 0 3 7 3
create_thread @PED_BKP OOS_ACT_GARNET 371 0 0 0 1 0 3 7 3
create_thread @PED_BKP OOS_ACT_ARTEMIS 371 0 0 0 1 0 3 7 3
create_thread @PED_BKP OOS_ACT_DANIEL 371 0 0 0 1 0 3 7 3
create_thread @ANT_PRE OOS_ACT_ENKER
create_thread @ANT_PRE OOS_ACT_GARNET
create_thread @ANT_PRE OOS_ACT_ARTEMIS
create_thread @ANT_PRE OOS_ACT_DANIEL

v$OBJECTIVE = "GME1353"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1353"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
actor.Dead(OOS_ACT_ENKER)
actor.Dead(OOS_ACT_GARNET)
actor.Dead(OOS_ACT_ARTEMIS)
actor.Dead(OOS_ACT_DANIEL)
    then
    $END_DIALOG_INST = 1
    wait 0
    break
    end

until false 

fade 0 0
player.CanMove(PLAYER_CHAR,false)

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)

$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

OOS_MARK = 666
$ACHIV_NUMBER = 3360
FREEMODE_VOICE_START = 3360
FREEMODE_VOICE_END = 3362
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

repeat
wait 0
until $ACHIV_SHOW_ENDED == 1

fade 1 150
player.CanMove(PLAYER_CHAR,true)

v$OBJECTIVE = "GME1354"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1354"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

018A: MISSION_CHECKPOINT = create_checkpoint_at 1180.8572 -730.5399 1061.8197
03BC: MISSION_SPHERE = create_sphere_at 1180.8572 -730.5399 1061.8197 radius 2.0

repeat
wait 0
until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1180.8572 -730.5399 1061.8197 radius 2.0

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

player.CanMove(PLAYER_CHAR,false)
$HUD_REMOVE = 1
$HUD_OFF_INST = 1
cinema.Widescreen(1)
BLACK_POLOSKI_ON = 1
camera.SetPosition(1183.854980, -724.955, 1063.3,0.0,0.0,0.0)
camera.PointAt(1183.275757, -725.767029, 1063.221191,2)
$DRUNK_MODE_FLAG = 0

21@ = Audiostream.Load3D("audio\sounds\quests\OOS\door_open.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ)

22@ = Audiostream.Load3D("audio\sounds\quests\OOS\door_open.mp3")
Audiostream.Volume(22@) = $SOUNDS_VOLUME
Audiostream.Loop(22@, 0)
Audiostream.PerformAction(22@, PLAY)
Audiostream.LinkToObject(22@,OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ)

50@ = 53.0
51@ = 53.0
52@ = 0
53@ = 0

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
50@ = 308.0
51@ = 195.0
object.Angle(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = 50@
object.Angle(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = 51@
end

//if
//0AB0:   key_pressed $KEY_USE
//then
//
//0AD0: show_formatted_text_lowpriority "LEFT ANGLE: %f, RIGHT ANGLE: %f" time 2000 50@ 51@

if and
50@ < 308.1
50@ >= 307.9
then
//done rotation to 308.0
52@ = 1
else 
50@ -= 1.0

if
50@ < 0.0
then
50@ = 360.0
end

object.Angle(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = 50@
end

if and
51@ < 195.1
51@ >= 194.9
then
//done rotation to 195.0
53@ = 1
else 
51@ += 1.0

if
51@ > 360.0
then
51@ = 0.0
end

object.Angle(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = 51@
end

//end

if and
52@ == 1
53@ == 1
    then
    break
    end 

until false

$HUD_OFF_INST = 0

32@ = 0
repeat
wait 0
0D52: draw_light_type 0 position 1177.5573 -728.2012 1062.1509 direction 1177.5573 -728.2012 1062.2509 radius 5.0 RGBA 0 0 0 affect_entity 0
until 32@ > 1000
07CD: AS_actor PLAYER_ACTOR walk_to 1177.5573 -728.2012 1062.1509 stop_with_angle 50.0 within_radius 2.0

repeat
wait 0
0D52: draw_light_type 0 position 1177.5573 -728.2012 1062.1509 direction 1177.5573 -728.2012 1062.2509 radius 5.0 RGBA 0 0 0 affect_entity 0
until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1177.5573 -728.2012 1062.1509 radius 2.0

fade 0 0

actor.DestroyInstantly(OOS_ACT_ENKER)
actor.DestroyInstantly(OOS_ACT_GARNET)
actor.DestroyInstantly(OOS_ACT_ARTEMIS)
actor.DestroyInstantly(OOS_ACT_DANIEL)

/////////////////////////////////////////////////////////////////////
    
MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\monologue.wav")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 3
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

OOS_MARK = 666
$ACHIV_NUMBER = 3331
FREEMODE_VOICE_START = 3331
FREEMODE_VOICE_END = 3337
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

repeat
wait 0
until $ACHIV_SHOW_ENDED == 1

if or
OOS_FARMERS_WITH_PLAYER == 0
OOS_ACT_FERMERS_SURVIVERS_NUM < 5
then
jump to @OOS_BAD_ENDING_END_JUMP
else
jump to @OOS_BAD_ENDING_FERMERS_KILL
end

:OOS_BAD_ENDING_END_JUMP

$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

OOS_MARK = 666
$ACHIV_NUMBER = 3338
FREEMODE_VOICE_START = 3338
FREEMODE_VOICE_END = 3344
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

repeat
wait 0
until $ACHIV_SHOW_ENDED == 1

:OOS_BAD_ENDING_END_JUMP_AFTER_KILLING_FERMERS

camera.Restore_WithJumpCut()
04BB: select_interior 0
0860: link_actor PLAYER_ACTOR to_interior 0
04FA: reset_sky_colors_with_fade 0
0777: delete_objects_in_object_group "bunker"
0777: delete_objects_in_object_group "bunker2"

0A8D: 1@ = read_memory 0x0C402B9 size 4 virtual_protect 0
if or
099D:   night_vision_enabled
1@ == 1
then
09EB: remove_player_goggles 0 use_anim 0
end

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)

/////////////////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS14.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 5000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 5000

/////////////////////////////////////////////////////////////////////

/////////////////////////////////////////
                         
:CAR_CREATE_START_CARGOBOB1A
if
model.Available(#CARGOBOB)
then
    
OOS_CARGOBOB1 = Car.Create(#CARGOBOB, 3006.2527, -861.6475, 72.8094)
Car.Angle(OOS_CARGOBOB1) = 270.3396
0825: set_helicopter OOS_CARGOBOB1 instant_rotor_start

0A97: 11@ = car OOS_CARGOBOB1 struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car OOS_CARGOBOB1 struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 100.0 
0A97: 22@ = car OOS_CARGOBOB1 struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car OOS_CARGOBOB1 struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2
    
if
model.Available(#CARGOBOB)
then
//model.Destroy(#CARGOBOB)
end
    
else
model.Load(#CARGOBOB)
mload
wait 0
jump to @CAR_CREATE_START_CARGOBOB1A
end

036A: put_actor PLAYER_ACTOR in_car OOS_CARGOBOB1
0743: heli OOS_CARGOBOB1 fly_to 9109.419434 -852.719604 70.059227 altitude 72.0 72.0

camera.SetPosition(3109.419434, -852.719604, 70.059227,0.0,0.0,0.0)
camera.OnVehicle(OOS_CARGOBOB1,15,2)

fade 1 5000
wait 5000

0A48: enable_menu_access_in_widescreen_mode 0 
$TITLES_ENDED = 0
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 3
create_thread @FIN_TIT
0459: end_thread_named 'SIEGE'

repeat
wait 0
      
if
0E3D: is_key_just_pressed 27 
    then
    break
    end

until false

$TITLES_ENDED = 1
0A48: enable_menu_access_in_widescreen_mode 1
0169: set_fade_color_RGB 0 0 0
fade 0 5000
wait 5000

$ALLOW_HUNGER = 0
$DELETE_SOUND = 1
$SAVER_COMING = 0 
$FPS_COUNTER_ENABLED = 0 
$FPS_COUNTER_ENABLED2 = 0    
$SATIETY_LEVEL = 600.0
$FATIGUE_LEVEL = 0.0

$STATS_SHOW_FLAG = 0
$STATS_SHOW_GAMEMODE = 1
create_thread @STS_SHW

$STATS_CAN_BE_SKIPPED = 0

0169: set_fade_color_RGB 0 0 0

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT139_GOT"                        
if and
0@ == 0
$CHEATED_FLAG == 0
then
v$ACHIEVEMNT = "ACH139"
$ACHIEVEMENT_GOT_FLAG = 1                                    
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT139_GOT"
end

while $ACHIEVEMENT_GOT_FLAG == 1
wait 0
end

:CHECKING_STATS_OOS_1
wait 0

if
$STATS_CAN_BE_SKIPPED == 1
then
if or
$STATS_SHOW_END == 1
00E1:   player 0 pressed_key 17
jf @CHECKING_STATS_OOS_1
else
jump to @CHECKING_STATS_OOS_1
end

$STATS_SHOW_END = 1
$STATS_TOTAL_SHOW_OFF_FLAG = 1

32@ = 0

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 10000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 10000
wait 10000
audiostream.Release($MUSIC_ASSHOLE)

/////////////////////////////////////////////////////////////////////

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME

end_thread

:OOS_BAD_ENDING_FERMERS_KILL

$ACHIV_TOTAL_SHOW_OFF_FLAG = 0

OOS_MARK = 666
$ACHIV_NUMBER = 3351
FREEMODE_VOICE_START = 3351
FREEMODE_VOICE_END = 3359
MIKE_VOICE_CANNOT_SKIP_FLAG = 1
create_thread @VOI_SHO

repeat
wait 0
until $ACHIV_SHOW_ENDED == 1

gosub @FERMERS_CREATE_FOR_SLAUTHER

0A8C: write_memory 0x969173 size 1 value 1 virtual_protect 0
048F: actor PLAYER_ACTOR remove_weapons
if
0800:   in_two_players_mode
then
048F: actor COOP_ACTOR remove_weapons
end
PLAYER_NO_ITEMS_FLAG = 1
$WOLVERINE_FLAG = 2
create_thread @HP_REGE
$ALLOW_PLAYER_SLOWMOTION = 0
$ALLOW_BLEEDING = 0
$DRAW_RED = 2
PLAYER_RESIST_MULT = 0.9

camera.SetPosition(1183.854980 -724.955 1063.3,0.0,0.0,0.0)
camera.PointAt(1183.275757 -725.767029 1063.221191,2)

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 500
wait 500
audiostream.Release($MUSIC_ASSHOLE)

/////////////////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS9.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

fade 1 2000
wait 2000

32@ = 0
repeat
wait 0
0D52: draw_light_type 0 position 1177.5573 -728.2012 1062.1509 direction 1177.5573 -728.2012 1062.2509 radius 5.0 RGBA 0 0 0 affect_entity 0
until 32@ > 1000
07CD: AS_actor PLAYER_ACTOR walk_to 1180.8572 -730.5399 1061.8197 stop_with_angle 229.9829 within_radius 2.0

repeat
wait 0
0D52: draw_light_type 0 position 1177.5573 -728.2012 1062.1509 direction 1177.5573 -728.2012 1062.2509 radius 5.0 RGBA 0 0 0 affect_entity 0
until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1180.8572 -730.5399 1061.8197 radius 2.0

50@ = 308.0
51@ = 195.0
52@ = 0
53@ = 0

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
50@ = 53.0
51@ = 53.0
object.Angle(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = 50@
object.Angle(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = 51@
break
end

//if
//0AB0:   key_pressed $KEY_USE
//then
//
//0AD0: show_formatted_text_lowpriority "LEFT ANGLE: %f, RIGHT ANGLE: %f" time 2000 50@ 51@

if and
50@ < 54.1
50@ >= 53.9
then
//done rotation to 53.0
52@ = 1
else 
50@ += 1.0

if
50@ > 360.0
then
50@ = 0.0
end

object.Angle(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = 50@
end

if and
51@ < 54.1
51@ >= 53.9
then
//done rotation to 53.0
53@ = 1
else 
51@ -= 1.0

if
51@ < 0.0
then
51@ = 360.0
end

object.Angle(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = 51@
end

//end

if and
52@ == 1
53@ == 1
    then
    break
    end 

until false

$HUD_REMOVE = 0
$HUD_ON_INST = 1
cinema.Widescreen(0)
BLACK_POLOSKI_ON = 0
camera.Restore_WithJumpCut()
player.CanMove(PLAYER_CHAR,true)

v$OBJECTIVE = "GME1360"
if
REALISM_MODE == 1
then
v$OBJECTIVE = "GME1360"
end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

v$ST_DIALOG[0] = "ENB340"
v$ST_DIALOG[1] = "ENB341"
$DIALOG_COUNT = 1
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

0568: set_actor OOS_ACT_FERMER1 untargetable 0
0568: set_actor OOS_ACT_FERMER2 untargetable 0
0568: set_actor OOS_ACT_FERMER3 untargetable 0
0568: set_actor OOS_ACT_FERMER4 untargetable 0
0568: set_actor OOS_ACT_FERMER5 untargetable 0
0568: set_actor OOS_ACT_FERMER6 untargetable 0
0568: set_actor OOS_ACT_FERMER7 untargetable 0
0568: set_actor OOS_ACT_FERMER8 untargetable 0
                                               
repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if or
051A:   actor OOS_ACT_FERMER1 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER2 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER3 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER4 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER5 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER6 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER7 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER8 damaged_by_actor PLAYER_ACTOR
    then
    $END_DIALOG_INST = 1
    wait 0
    jump to @SLAUGHTER_JUMP_START
    end
    
if
0800:   in_two_players_mode
    then
    
    if
    0EE4: locate_char_distance_to_char COOP_ACTOR char OOS_ACT_FERMER1 radius 20.0
    then
    break
    end
    
    if or
    051A:   actor OOS_ACT_FERMER1 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER2 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER3 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER4 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER5 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER6 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER7 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER8 damaged_by_actor COOP_ACTOR
        then
        jump to @OOS_DAMAGED_TEMMATES_JUMP
        end
    end     

until 0EE4: locate_char_distance_to_char PLAYER_ACTOR char OOS_ACT_FERMER1 radius 20.0

$END_DIALOG_INST = 1
wait 0

v$ST_DIALOG[0] = "ENB342"
v$ST_DIALOG[1] = "ENB343"
$DIALOG_COUNT = 1
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if or
051A:   actor OOS_ACT_FERMER1 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER2 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER3 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER4 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER5 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER6 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER7 damaged_by_actor PLAYER_ACTOR
051A:   actor OOS_ACT_FERMER8 damaged_by_actor PLAYER_ACTOR
    then
    $END_DIALOG_INST = 1
    wait 0
    jump to @SLAUGHTER_JUMP_START
    end
    
if
0800:   in_two_players_mode
    then
    
    if
    0EE4: locate_char_distance_to_char COOP_ACTOR char OOS_ACT_FERMER1 radius 20.0
    then
    break
    end
    
    if or
    051A:   actor OOS_ACT_FERMER1 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER2 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER3 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER4 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER5 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER6 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER7 damaged_by_actor COOP_ACTOR
    051A:   actor OOS_ACT_FERMER8 damaged_by_actor COOP_ACTOR
        then
        jump to @SLAUGHTER_JUMP_START
        end
    end        

until 0EE4: locate_char_distance_to_char PLAYER_ACTOR char OOS_ACT_FERMER1 radius 10.0

$END_DIALOG_INST = 1
wait 0

:SLAUGHTER_JUMP_START

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)

/////////////////////////////////////////////////////////////////////

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS11.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

if
0800:   in_two_players_mode
then
05E2: AS_actor OOS_ACT_FERMER1 kill_actor COOP_ACTOR
05E2: AS_actor OOS_ACT_FERMER2 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER3 kill_actor COOP_ACTOR
05E2: AS_actor OOS_ACT_FERMER4 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER5 kill_actor COOP_ACTOR
05E2: AS_actor OOS_ACT_FERMER6 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER7 kill_actor COOP_ACTOR
05E2: AS_actor OOS_ACT_FERMER8 kill_actor PLAYER_ACTOR  
077A: set_actor OOS_ACT_FERMER1 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER2 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER3 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER4 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER5 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER6 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER7 acquaintance 4 to_actors_pedtype 1 // see ped.dat
077A: set_actor OOS_ACT_FERMER8 acquaintance 4 to_actors_pedtype 1 // see ped.dat
else
05E2: AS_actor OOS_ACT_FERMER1 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER2 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER3 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER4 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER5 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER6 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER7 kill_actor PLAYER_ACTOR
05E2: AS_actor OOS_ACT_FERMER8 kill_actor PLAYER_ACTOR  
end

077A: set_actor OOS_ACT_FERMER1 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER2 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER3 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER4 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER5 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER6 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER7 acquaintance 4 to_actors_pedtype 0 // see ped.dat
077A: set_actor OOS_ACT_FERMER8 acquaintance 4 to_actors_pedtype 0 // see ped.dat

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
actor.Dead(OOS_ACT_FERMER1)
actor.Dead(OOS_ACT_FERMER2)
actor.Dead(OOS_ACT_FERMER3)
actor.Dead(OOS_ACT_FERMER4)
actor.Dead(OOS_ACT_FERMER5)
actor.Dead(OOS_ACT_FERMER6)
actor.Dead(OOS_ACT_FERMER7)
actor.Dead(OOS_ACT_FERMER8)
    then
    v$OBJECTIVE = "DUMMY"
    $END_DIALOG_INST = 1
    wait 0
    fade 0 2000
    $HUD_REMOVE = 1
    wait 2000
    $DRAW_RED = 0
    cinema.Widescreen(1)
    BLACK_POLOSKI_ON = 1
    break
    end

until false

jump to @OOS_BAD_ENDING_END_JUMP_AFTER_KILLING_FERMERS

:OOS_ACTION_END_JUMP

$QUEST_TYPE = -1
$NOTSPAWN_ETC = 0
$SURVIVORS_DONT_SPAWN_FLAG = 0

marker.Disable(MISSION_CHECKPOINT)

v$OBJECTIVE = "DUMMY"
$ONMISSION = 0
0629: change_integer_stat 258 to 0 
008A: $ALLOW_CHARGER = OOS_ACT_ALLOW_CHARGER_PRE // (int)
008A: $ALLOW_HUNTER = OOS_ACT_ALLOW_HUNTER_PRE // (int)
008A: $ALLOW_TANK = OOS_ACT_ALLOW_TANK_PRE // (int)
008A: $ALLOW_WITCH = OOS_ACT_ALLOW_WITCH_PRE // (int)

MAIN_QUEST_MUSIC_FLAG = 0
//08A8: set_markers_to_long_distance 0

cinema.Widescreen(0)
BLACK_POLOSKI_ON = 0
player.CanMove(PLAYER_CHAR,true)
$SAVESTATUS = 0
if
OOS_ACT_BERTON_IMPOSTER_FLAG == 0
then
01C7: remove_object_from_mission_cleanup_list OOS_ACT_GATES1_BUNKER_OBJ
01C7: remove_object_from_mission_cleanup_list OOS_ACT_GATES2_BUNKER_OBJ
01C7: remove_object_from_mission_cleanup_list OOS_ACT_GATES3_BUNKER_OBJ
end

08E7: disable_entrance_markers 0    

fade 1 1000
$HUD_REMOVE = 0
wait 1000

if
OOS_ACT_BERTON_IMPOSTER_FLAG == 0
then

if
not OOS_CURRENT_PROGRESS == 10
    then
    $TEMP_XP = 500000
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    if
    PERK_CHARISMA == 2
    then
    $TEMP_XP *= CHARISMA_LEVEL2_XP_COEFF
    end
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)
    
    random_int 0@ 10 to 21
    005E: $SNDK_BAN_CNT += 0@  // (int)
    random_int 0@ 5 to 11   
    005E: $SNDK_HEL_CNT += 0@  // (int)
    random_int 0@ 20 to 26  
    005E: $SNDK_BNT_CNT += 0@  // (int)
    random_int 0@ 10 to 21  
    005E: $SNDK_JIM_CNT += 0@  // (int)
    random_float 0@ $KANISTRA_FUEL_MIN $KANISTRA_FUEL_MAX
    0@ *= 30.5
    005F: $SNDK_GSLN_CNT += 0@  // (float)
    008C: $SNDK_GSLN_CNT2 = float $SNDK_GSLN_CNT to_integer
    
    0109: player PLAYER_CHAR money += 10000
    else
    $TEMP_XP = 50000
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    if
    PERK_CHARISMA == 2
    then
    $TEMP_XP *= CHARISMA_LEVEL2_XP_COEFF
    end
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)
    end

else
BERTON_STARTED_MEETED_FLAG = -2
$TEMP_XP = 50000
008D: $TEMP_XP = integer $TEMP_XP to_float
0069: $TEMP_XP *= $XP_COEFF // (float)
if
PERK_CHARISMA == 2
then
$TEMP_XP *= CHARISMA_LEVEL2_XP_COEFF
end
008C: $TEMP_XP = float $TEMP_XP to_integer
0058: $PLAYER_XP += $TEMP_XP // (int)
end

v$ACHIEVEMNT = "LSQ9F"
$GQUEST_GOT_FLAG = 1                             
0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "LSQ9GT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"

jump to @ASSUDALENIE_KODA282PIZDA_OOS_ACT

:GUNPOWDER_DO_SETTINGS

/////////////////////////////////////////////////////////////////////////////////
  
for 0@ = 21 to $ZONE_PEOPLE_COUNT 
Actor.SetWalkStyle($ARMY69_2[0@], "GANG2")

gosub @BANDITS_ZONE_RANDOM_HP

3@ *= 2
actor.Health($ARMY69_2[0@]) = 3@

081A: set_actor $ARMY69_2[0@] weapon_skill_to 1

gosub @BAMDITS_ZONE_RANDOM_ACQ

Actor.WeaponAccuracy($ARMY69_2[0@]) = 3@

060B: set_actor $ARMY69_2[0@] decision_maker_to $DEC_PCAMP
0446: set_actor $ARMY69_2[0@] dismemberment_possible 0   
0946: set_actor $ARMY69_2[0@] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
099F: AS_actor $ARMY69_2[0@] ignore_weapon_range 1
04D8: set_actor $ARMY69_2[0@] drowns_in_water 0
0E24: fix_char $ARMY69_2[0@] ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
0648: unknown_actor $ARMY69_2[0@] task_set 1000.0 // float
09F4: set_actor $ARMY69_2[0@] ignore_height_difference_following_nodes 1

if or
$FREEMODE == 1
$GAMEMODE_WAR == 1
then

random_int 1@ 0 6
if
not 1@ == 3
then
087E: set_actor $ARMY69_2[0@] weapon_droppable 0
end

end

0781: get_weapon_with_ID 46 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

create_thread @PED_BKP $ARMY69_2[0@] 371 0 0 0 1 0 2 7 3

0781: get_weapon_with_ID 31 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($ARMY69_2[0@],31,99999)

if
OOS_MARK == 156548
then
0860: link_actor $ARMY69_2[0@] to_interior 5
end

$ARMY69_2_MARKER[0@] = marker.CreateAboveActor($ARMY69_2[0@])
marker.SetIconSize($ARMY69_2_MARKER[0@],2)
018B: set_marker $ARMY69_2_MARKER[0@] radar_mode 0 //гы, костыль

if
$ONMISSION == 0
then
018B: set_marker $ARMY69_2_MARKER[0@] radar_mode 2
end

if
CARMA_VERY_BAD_FLAG == 1
then
018B: set_marker $ARMY69_2_MARKER[0@] radar_mode 0
end

if
$BANDITS_DONT_ATTACK_PLAYER_FLAG == 1
then
07E0: set_marker $ARMY69_2_MARKER[0@] type_to 1
end
 
end

/////////////////////////////////////////////////////////////////////////////////

if
$BANDITS_DONT_ATTACK_PLAYER_FLAG == 0
then

for 0@ = 0 to $ZONE_PEOPLE_COUNT
07E0: set_marker $ARMY69_2_MARKER[0@] type_to 0
0856: set_actor $ARMY69_2[0@] enable_crouch 0
end

end

/////////////////////////////////////////////////////////////////////////////////

if or
$PLAYER_BANDIT_SIDE == 1
$BANDITS_DONT_ATTACK_PLAYER_FLAG == 1
then

for 0@ = 0 to $ZONE_PEOPLE_COUNT
Actor.WeaponAccuracy($ARMY69_2[0@]) = ZONE_ROCKET_ACCURACY
081A: set_actor $ARMY69_2[0@] weapon_skill_to FRA_WEAP_SKILL
end

end

/////////////////////////////////////////////////////////////////////////////////  

07DD: set_actor $ARMY69_2[21] attack_rate 60 // previously known as temper_to  
07DD: set_actor $ARMY69_2[22] attack_rate 60 // previously known as temper_to
07DD: set_actor $ARMY69_2[23] attack_rate 60 // previously known as temper_to
07DD: set_actor $ARMY69_2[24] attack_rate 60 // previously known as temper_to
07DD: set_actor $ARMY69_2[25] attack_rate 60 // previously known as temper_to
07DD: set_actor $ARMY69_2[26] attack_rate 60 // previously known as temper_to
07DD: set_actor $ARMY69_2[27] attack_rate 60 // previously known as temper_to
07DD: set_actor $ARMY69_2[28] attack_rate 60 // previously known as temper_to
081A: set_actor $ARMY69_2[21] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[22] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[23] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[24] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[25] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[26] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[27] weapon_skill_to FRA_WEAP_SKILL
081A: set_actor $ARMY69_2[28] weapon_skill_to FRA_WEAP_SKILL

/////////////////////////////////////////////////////////////////////////////////

return

:CREATE_GUNPOWDER_SUPPORT
if
model.Available(#RDTRAIN)
then
    
OOS_ACT_GUNPOWDER_CAB = Car.Create(#RDTRAIN, 1721.572, -599.3844, 38.9643)
Car.Angle(OOS_ACT_GUNPOWDER_CAB) = 0.0
car.SetImmunities(OOS_ACT_GUNPOWDER_CAB,1,1,1,1,1)
0229: set_car OOS_ACT_GUNPOWDER_CAB primary_color_to $BANDITS_CAR_COLOR1 secondary_color_to $BANDITS_CAR_COLOR2
    
if
model.Available(#RDTRAIN)
then
//model.Destroy(#RDTRAIN)
end
    
else
model.Load(#RDTRAIN)
mload
wait 0
jump to @CREATE_GUNPOWDER_SUPPORT
end

:CREATE_GUNPOWDER_SUPPORT2
if
model.Available(#ARTICT1)
then

0407: store_coords_to 0@ 1@ 2@ from_car OOS_ACT_GUNPOWDER_CAB with_offset 0.0 -10.0 0.5
3@ = car.Angle(OOS_ACT_GUNPOWDER_CAB)    
OOS_ACT_GUNPOWDER_TRAILER = Car.Create(#ARTICT1,0@,1@,2@)
Car.Angle(OOS_ACT_GUNPOWDER_TRAILER) = 3@
car.SetImmunities(OOS_ACT_GUNPOWDER_TRAILER,1,1,1,1,1)
    
if
model.Available(#ARTICT1)
then
//model.Destroy(#RDTRAIN)
end
    
else
model.Load(#ARTICT1)
mload
wait 0
jump to @CREATE_GUNPOWDER_SUPPORT2
end

///////////////////////////////////////////////////////////////////

while not model.Available(3179)
wait 0
model.Load(3179)
mload
end

$ARMY69_2[21] = actor.CreateAsDriver(25,3179,OOS_ACT_GUNPOWDER_CAB)
actor.SetImmunities($ARMY69_2[21],1,1,1,1,1)

while not model.Available(3180)
wait 0
model.Load(3180)
mload
end

$ARMY69_2[22] = actor.CreateAsPassenger(25,3180,OOS_ACT_GUNPOWDER_CAB,0)
actor.SetImmunities($ARMY69_2[22],1,1,1,1,1)

while not model.Available(3181)
wait 0
model.Load(3181)
mload
end

$ARMY69_2[23] = actor.Create(25,3181,0.0,0.0,0.0)

while not model.Available(3182)
wait 0
model.Load(3182)
mload
end

$ARMY69_2[24] = actor.Create(25,3182,0.0,0.0,0.0)

while not model.Available(3183)
wait 0
model.Load(3183)
mload
end

$ARMY69_2[25] = actor.Create(25,3183,0.0,0.0,0.0)

while not model.Available(3184)
wait 0
model.Load(3184)
mload
end

$ARMY69_2[26] = actor.Create(25,3184,0.0,0.0,0.0)

while not model.Available(3185)
wait 0
model.Load(3185)
mload
end

$ARMY69_2[27] = actor.Create(25,3185,0.0,0.0,0.0)

while not model.Available(3186)
wait 0
model.Load(3186)
mload
end

$ARMY69_2[28] = actor.Create(25,3186,0.0,0.0,0.0)

for 0@ = 23 to 28
0464: put_actor $ARMY69_2[0@] into_turret_on_car OOS_ACT_GUNPOWDER_TRAILER at_car_offset 0.0 0.0 0.5 position 0 shooting_angle_limit 0.0 with_weapon 0
actor.SetImmunities($ARMY69_2[0@],1,1,1,1,1)
end

///////////////////////////////////////////////////////////////////

0893: put_trailer OOS_ACT_GUNPOWDER_TRAILER on_cab OOS_ACT_GUNPOWDER_CAB

088B: set_car OOS_ACT_GUNPOWDER_CAB form_drag_multiplier_to 0.0
0423: set_car OOS_ACT_GUNPOWDER_CAB improved_handling_to 2.0 // (float)
car.SetMaxSpeed(OOS_ACT_GUNPOWDER_CAB,50.0)  
00AE: set_car OOS_ACT_GUNPOWDER_CAB traffic_behaviour_to 2  
03AB: set_car OOS_ACT_GUNPOWDER_CAB strong 1
0704: car OOS_ACT_GUNPOWDER_CAB drive_to 1266.5725 -727.3784 94.8666
car.SetSpeedInstantly(OOS_ACT_GUNPOWDER_CAB,15.0) 
    
return  

:ASSKOD_PROVALA282PIZDA_OOS_ACT

if
075C:   marker MISSION_CHECKPOINT enabled
then
marker.Disable(MISSION_CHECKPOINT)
end
 
mission_cleanup     
return 

:ASSUDALENIE_KODA282PIZDA_OOS_ACT

$ONMISSION = 0

if
075C:   marker MISSION_CHECKPOINT enabled
then
marker.Disable(MISSION_CHECKPOINT)
end
    
mission_cleanup    
return

:OOS_ACT_FAILED_WALK

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()   
v$FAILED_TEXT = "MS_FL7" 
BLACK_POLOSKI_ON = 1
create_thread @GMV_OVR
mission_cleanup    
return

:OOS_ACT_FAILED_AGRO

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()     
v$FAILED_TEXT = "MS_FL5" 
BLACK_POLOSKI_ON = 1
create_thread @GMV_OVR
mission_cleanup    
return

:OOS_ACT_FAILED_LDEAD

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()   
v$FAILED_TEXT = "MS_FL43" 
BLACK_POLOSKI_ON = 1
create_thread @GMV_OVR
mission_cleanup    
return

:OOS_ACT_FAILED_CANCEL

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
v$FAILED_TEXT = "MS_FL44"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR 
mission_cleanup    
return

:OOS_ACT_FAILED_ENKER

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
BLACK_POLOSKI_ON = 1
v$FAILED_TEXT = "MS_FL89"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR  
mission_cleanup    
return

:OOS_ACT_FAILED_FERNANDO_ZAMESTITEL

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
BLACK_POLOSKI_ON = 1
v$FAILED_TEXT = "MS_FL90"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR  
mission_cleanup    
return

:OOS_ACT_FAILED_GARNET

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
BLACK_POLOSKI_ON = 1
v$FAILED_TEXT = "MS_FL88"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR  
mission_cleanup    
return

:OOS_ACT_FAILED_ARTEMIS

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
BLACK_POLOSKI_ON = 1
v$FAILED_TEXT = "MS_FL91"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR  
mission_cleanup    
return

:OOS_ACT_FAILED_DANIEL

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
BLACK_POLOSKI_ON = 1
v$FAILED_TEXT = "MS_FL92"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR  
mission_cleanup    
return

:OOS_ACT_FAILED_SECURITY_MAN_DIED

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250

///////////////////////////////////////////////////////////

text.ClearAll()
$ONMISSION = 0
BLACK_POLOSKI_ON = 1
v$FAILED_TEXT = "MS_FL93"
v$OBJECTIVE = "DUMMY"
create_thread @GMV_OVR  
mission_cleanup    
return

:OOS_ACT_FAILED_PLAYER_DIED

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//        
//wait 1
//        
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
    
MAIN_QUEST_MUSIC_FLAG = 0

text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL80"
create_thread @GMV_OVR
mission_cleanup
return

:OOS_ACT_FAILED_CONTAINER_GATES

v$OBJECTIVE = "DUMMY"
ZAME_PROTECT_THE_OBJECT_FLAG = 0
audiostream.Release(ZAME_PROTECT_THE_OBJECT_SND)
actor.DestroyInstantly(ZAME_PROTECT_THE_OBJECT_CHAR)
marker.Disable(MISSION_CHECKPOINT)
marker.Disable(MISSION_MARKER)
0151: remove_status_text OOS_ACT_CONTAINER_LEFT_HEALTH_STATUS_TEXT
0151: remove_status_text OOS_ACT_CONTAINER_RIGHT_HEALTH_STATUS_TEXT

fade 0 100
$HUD_REMOVE = 1
wait 100

$TANK_HEALTH /= 3
$ZOMBIES_COUNT = 0
$Z_DONT_CLIMB_FLAG = 0
$ZOMBIES_HORDE = 0
$ALLOW_ZOMBIES = 1
$ZOMBIE_SPAWN_ON_COORD = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
$SPECIAL_INFECTED_SPAWN_OZC_FLAG = 0
$TANK_INTERIOR_SPAWN = 0
$HUNTER_INTERIOR_SPAWN = 0
$CHARGER_INTERIOR_SPAWN = 0
$SALVATION_FLAG = 0
$ZOMBIES_ALWAYS_VISIBLE = 0
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 0
SPEC_INFECTED_MARKER_FLAG = 0

player.CanMove(PLAYER_CHAR,false)
cinema.Widescreen(1)
BLACK_POLOSKI_ON = 1

object.Angle(OOS_ACT_CONTAINER_LEFT_DOOR_BUNKER_OBJ) = 308.0
object.Angle(OOS_ACT_CONTAINER_RIGHT_DOOR_BUNKER_OBJ) = 195.0

0936: set_camera 1175.156860 -726.043152 1062.834595 position_to 1177.306641 -727.776123 1062.826660 time 2300 smooth_transition 1
0920: point_camera 1175.935303 -726.670837 1062.832031 transverse_to 1178.085083 -728.403809 1062.824097 time 2300 smooth_transition 1

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//        
//wait 1
//        
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\steps_of_monster.wav")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 3
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 0)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 250

/////////////////////////////////////////////////////////////////////

015D: set_gamespeed 0.1
fade 1 50

1@ = 0

repeat
wait 0

if
1@ == 0
then
1@ = 1
text.ShowH('EDF390',300,1)
end

if
1@ == 1
then
1@ = 2
text.ShowH('EDF391',300,1)
end

0AB9: get_mp3 $MUSIC_ASSHOLE state_to 0@

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
break
end

until 0@ == -1

fade 0 50
015D: set_gamespeed 1.0
0936: set_camera 1175.156860 -726.043152 1062.834595 position_to 1177.306641 -727.776123 1062.826660 time 1 smooth_transition 1
0920: point_camera 1175.935303 -726.670837 1062.832031 transverse_to 1178.085083 -728.403809 1062.824097 time 1 smooth_transition 1
wait 100

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//        
//wait 1
//        
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)

gosub @OOS_ACT_CREATE_LEADERS_EBAKA_MOMENT
if
OOS_FARMERS_WITH_PLAYER == 1
then

for 0@ = 26 to 33
0D10: set_actor $RNDM_HOUSE_WEAPON[0@] alpha 200 // IF and SET 
end

end

wait 500

fade 1 100
$HUD_REMOVE = 0
camera.Restore_WithJumpCut()
player.CanMove(PLAYER_CHAR,true)
cinema.Widescreen(0)
BLACK_POLOSKI_ON = 0
wait 100

035F: actor OOS_ACT_ARTEMIS armour += 69
035F: actor OOS_ACT_DANIEL armour += 69
035F: actor OOS_ACT_ENKER armour += 69
035F: actor OOS_ACT_GARNET armour += 69
0812: AS_actor OOS_ACT_ARTEMIS perform_animation "gas_cwr" IFP "ped" framedelta 4.0 loopA 1 lockX 1 lockY 1 lockF 0 time 999999  // versionB
0812: AS_actor OOS_ACT_DANIEL perform_animation "gas_cwr" IFP "ped" framedelta 4.0 loopA 1 lockX 1 lockY 1 lockF 0 time 999999  // versionB
0812: AS_actor OOS_ACT_ENKER perform_animation "gas_cwr" IFP "ped" framedelta 4.0 loopA 1 lockX 1 lockY 1 lockF 0 time 999999  // versionB
0812: AS_actor OOS_ACT_GARNET perform_animation "gas_cwr" IFP "ped" framedelta 4.0 loopA 1 lockX 1 lockY 1 lockF 0 time 999999  // versionB 

if
OOS_FARMERS_WITH_PLAYER == 1
then

for 0@ = 26 to 33
0812: AS_actor $RNDM_HOUSE_WEAPON[0@] perform_animation "gas_cwr" IFP "ped" framedelta 4.0 loopA 1 lockX 1 lockY 1 lockF 0 time 999999  // versionB
035F: actor $RNDM_HOUSE_WEAPON[0@] armour += 69
end

end

CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0

if
8800: not  in_two_players_mode
then
$DELETE_TEAMMATES = 1
end

//////////////////////////////////////////////////////////////////////

for 2@ = 0 to 19
if
056D:   actor $ZOMBIE[2@] defined
    then
    0D10: set_actor $ZOMBIE[2@] alpha 50 // IF and SET 
    end
end

for 2@ = 0 to 19
if
056D:   actor $HUNTER[2@] defined
    then
    0D10: set_actor $HUNTER[2@] alpha 50 // IF and SET 
    end
end

for 2@ = 0 to 19
if
056D:   actor $TANK[2@] defined
    then
    0D10: set_actor $TANK[2@] alpha 50 // IF and SET 
    end
end

for 2@ = 0 to 19
if
056D:   actor $CHARGER[2@] defined
    then
    0D10: set_actor $CHARGER[2@] alpha 50 // IF and SET
    end
end

for 2@ = 0 to 19
if
056D:   actor $WITCH[2@] defined
    then
    0D10: set_actor $WITCH[2@] alpha 50 // IF and SET
    end
end

//////////////////////////////////////////////////////////////////////

$DRUNK_MODE_FLAG = 1
$DRAW_RED = 3
$ALLOW_BLEEDING = 0

OOS_MARK = 223366

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "EDF392"
v$ST_DIALOG[1] = "EDF393"
v$ST_DIALOG[2] = "EDF394"
v$ST_DIALOG[3] = "EDF395"
v$ST_DIALOG[4] = "EDF396"
$DIALOG_COUNT = 4
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS10.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until $DIALOG_END == 1

///////////////////////////////////////////////////////////////////////////////

018A: MISSION_CHECKPOINT = create_checkpoint_at 1190.9487 -704.7061 1061.8241
03BC: MISSION_SPHERE = create_sphere_at 1190.9487 -704.7061 1061.8241 radius 1.0
v$OBJECTIVE = "GME1381"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1381"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

///////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1190.9487 -704.7061 1061.8241)
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1190.9487 -704.7061 radius 2.0 2.0 stopped

///////////////////////////////////////////////////////////////////////////////

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

v$OBJECTIVE = "DUMMY"

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0

0615: define_AS_pack_begin 0@
05D4: AS_actor -1 rotate_angle 90.0
0812: AS_actor -1 perform_animation "ATM" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time 5800  // versionB
0616: define_AS_pack_end 0@
0618: assign_actor PLAYER_ACTOR to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

///////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0687: clear_actor PLAYER_ACTOR task
break
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until actor.Animation(PLAYER_ACTOR) == "ATM"

///////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
0687: clear_actor PLAYER_ACTOR task
break
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until not actor.Animation(PLAYER_ACTOR) == "ATM"

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1

///////////////////////////////////////////////////////////////////////////////

21@ = Audiostream.Load3D("audio\sounds\quests\OOS\warehouse.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,OOS_ACT_GATES1_BUNKER_OBJ)

///////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
jump to @OOS_SKIP1B_JUMP
end

034E: move_object OOS_ACT_GATES1_BUNKER_OBJ to 1195.1 -703.977 1066.74 speed 0.02 0.02 0.02 collision_check 0

if or
04E6:   object OOS_ACT_GATES1_BUNKER_OBJ near_point 1195.1 -703.977 1066.74 radius 0.001 0.001 0.001 flag 0
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1188.6963 -703.4617 1060.7551 cornerB 1201.4523 -695.8497 1067.0336
then
:OOS_SKIP1B_JUMP
01BC: put_object OOS_ACT_GATES1_BUNKER_OBJ at 1195.1 -703.977 1066.74
break
end

until false

///////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1188.6963 -703.4617 1060.7551 cornerB 1201.4523 -695.8497 1067.0336

///////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
jump to @OOS_SKIP2B_JUMP
end

034E: move_object OOS_ACT_GATES1_BUNKER_OBJ to 1195.1 -703.977 1063.04 speed 1.0 1.0 1.0 collision_check 0

if
04E6:   object OOS_ACT_GATES1_BUNKER_OBJ near_point 1195.1 -703.977 1063.04 radius 0.001 0.001 0.001 flag 0
then
:OOS_SKIP2B_JUMP
01BC: put_object OOS_ACT_GATES1_BUNKER_OBJ at 1195.1 -703.977 1063.04
break
end

until false

Audiostream.PerformAction(21@, STOP)
Audiostream.Release(21@)
21@ = Audiostream.Load3D("audio\sounds\quests\OOS\warehouse2.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,OOS_ACT_GATES1_BUNKER_OBJ)

COOP_TP_TEAMMATES_FLAG = 1

if
0800:   in_two_players_mode
then
0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1
end

$DELETE_TEAMMATES = 0
0AF1: write_int 6 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT"
create_thread @OOS_CHK
create_thread @OOS_CH2

OOS_MARK = 999668
$ZMB_RADIUS = 65.0
$ZMB_Z_RADIUS = 5.0
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
$ZOMBIE_SPAWN_ON_COORD = 0
$SAVESTATUS = 1
$ZOMBIE_REMOVE_FLAG = 1
wait 1000
$SAVESTATUS = 0
$ZOMBIE_REMOVE_FLAG = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN = 1
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
$DRUNK_MODE_FLAG = 0
$DRAW_RED = 0
$ALLOW_BLEEDING = 1
$ZOMBIES_COUNT = 5

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "EDF397"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

actor.DestroyInstantly(OOS_ACT_ENKER)
actor.DestroyInstantly(OOS_ACT_GARNET)
actor.DestroyInstantly(OOS_ACT_ARTEMIS)
actor.DestroyInstantly(OOS_ACT_DANIEL)

for 0@ = 26 to 33

if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
then
actor.DestroyInstantly($RNDM_HOUSE_WEAPON[0@])
end

end

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//        
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 50
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//        
//wait 1
//        
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 250
wait 250
audiostream.Release($MUSIC_ASSHOLE)

:OOS_LOAD_CHECKPOINT_AFTER_FAILED_CONTAINER1

018A: MISSION_CHECKPOINT = create_checkpoint_at 1218.8197 -669.701 1061.8314
03BC: MISSION_SPHERE = create_sphere_at 1218.8197 -669.701 1061.8314 radius 2.0
v$OBJECTIVE = "GME1382"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1382"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

MAIN_QUEST_MUSIC_FLAG = 1
$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\OOS\OS12.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

/////////////////////Плавное нарастание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1 
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000

/////////////////////////////////////////////////////////////////////

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1200.3982 -675.0552 1060.6085 cornerB 1188.297 -662.7551 1068.1809

//audiostream.Release(21@)
marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE
v$OBJECTIVE = "DUMMY"

21@ = Audiostream.Load3D("audio\sounds\quests\OOS\warehouse.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,OOS_ACT_GATES1_BUNKER_OBJ)

32@ = 0
2@ = 0

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if
2@ == 1
then
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED
end

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
2@ == 0
then
jump to @OOS_SKIP1B2_JUMP_PRE
end

034E: move_object OOS_ACT_GATES2_BUNKER_OBJ to 1224.72 -669.758 1066.74 speed 0.02 0.02 0.02 collision_check 0
034E: move_object OOS_ACT_GATES3_BUNKER_OBJ to 1266.85 -669.758 1066.74 speed 0.02 0.02 0.02 collision_check 0

if and
32@ > 2000
2@ == 0
    then
    
    :OOS_SKIP1B2_JUMP_PRE

    if
    model.Available(#RCCAM)
    then
    1@ = Car.Create(#RCCAM, 1247.5652, -683.9684, 1066.3241)
    099A: set_car 1@ collision_detection 0
    car.LockInCurrentPosition(1@,true)
    0EB4: set_car_coordinates_simple 1@ position 1247.5652 -683.9684 1066.3241
    0338: set_car 1@ visibility 0 
    
    if
    model.Available(#RCCAM)
    then
    //model.Destroy(#RCCAM)
    end
    
    else
    0E98: request_priority_model #RCCAM
    0E99: load_all_priority_models_now
    wait 0
    jump to @OOS_SKIP1B2_JUMP_PRE
    end
    
    2@ = 1
    
    while not model.Available(3266)
    wait 0
    model.Load(3266)
    mload
    end
        
    OOS_ACT_SECURITY_MAN = actor.Create(26,3266,1247.3198, -688.2076, 1061.8241) //protect my pipi
    actor.Angle(OOS_ACT_SECURITY_MAN) = 180.0
    actor.Health(OOS_ACT_SECURITY_MAN) = 3000    
    0D10: set_actor OOS_ACT_SECURITY_MAN alpha 255 // IF and SET
    Actor.SetWalkStyle(OOS_ACT_SECURITY_MAN, "GANG2")
    0961: set_actor OOS_ACT_SECURITY_MAN keep_tasks_after_cleanup 1
    01C5: remove_actor_from_mission_cleanup_list OOS_ACT_SECURITY_MAN
    081A: set_actor OOS_ACT_SECURITY_MAN weapon_skill_to 2
    Actor.WeaponAccuracy(OOS_ACT_SECURITY_MAN) = 85
    060B: set_actor OOS_ACT_SECURITY_MAN decision_maker_to $DEC_PEOPLE
    0446: set_actor OOS_ACT_SECURITY_MAN dismemberment_possible 0   
    0946: set_actor OOS_ACT_SECURITY_MAN actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    099F: AS_actor OOS_ACT_SECURITY_MAN ignore_weapon_range 1
    04D8: set_actor OOS_ACT_SECURITY_MAN drowns_in_water 0
    0E24: fix_char OOS_ACT_SECURITY_MAN ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
    0648: unknown_actor OOS_ACT_SECURITY_MAN task_set 1000.0 // float
    09F4: set_actor OOS_ACT_SECURITY_MAN ignore_height_difference_following_nodes 1
    0350: set_actor OOS_ACT_SECURITY_MAN maintain_position_when_attacked 1
    0816: set_actor OOS_ACT_SECURITY_MAN dont_chase_victim 1
    create_thread @PED_BKP OOS_ACT_SECURITY_MAN 371 0 0 0 1 1 2 2 3 1
    
    if
    $SURVIVOR_IN_PLAYER_TEAM[0] == 0
        then
        0084:  $CREATURE[41] = OOS_ACT_SECURITY_MAN // (int)
        end
        
    if
    $SURVIVOR_IN_PLAYER_TEAM[1] == 0
        then
        0084:  $CREATURE[42] = OOS_ACT_SECURITY_MAN // (int)
        end
        
    if
    $SURVIVOR_IN_PLAYER_TEAM[2] == 0
        then
        0084:  $CREATURE[43] = OOS_ACT_SECURITY_MAN // (int)
        end
        
    if
    $SURVIVOR_IN_PLAYER_TEAM[3] == 0
        then
        0084:  $CREATURE[44] = OOS_ACT_SECURITY_MAN // (int)
        end
        
    if
    $SURVIVOR_IN_PLAYER_TEAM[4] == 0
        then
        0084:  $CREATURE[45] = OOS_ACT_SECURITY_MAN // (int)
        end                  
        
    0781: get_weapon_with_ID 29 model_to 1@
    
    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
    
    actor.GiveWeaponAndAmmo(OOS_ACT_SECURITY_MAN,29,99999)
    
    0615: define_AS_pack_begin 0@
    05D3: AS_actor -1 goto_point 1247.5592 -673.5286 1061.8314 mode 7 time 10000 ms // versionA
    05D4: AS_actor -1 rotate_angle 80.0
    0635: AS_actor -1 aim_at_actor PLAYER_ACTOR 2000 ms
    0616: define_AS_pack_end 0@
    0618: assign_actor OOS_ACT_SECURITY_MAN to_AS_pack 0@
    061B: remove_references_to_AS_pack 0@
    
    if and
    $CHEATS_ON == 1
    0E3D:   key_pressed $KEY_USE
    then
    jump to @OOS_SKIP1B2_JUMP
    end
    
    end

if
04E6:   object OOS_ACT_GATES2_BUNKER_OBJ near_point 1224.72 -669.758 1066.74 radius 0.001 0.001 0.001 flag 0
then
:OOS_SKIP1B2_JUMP
01BC: put_object OOS_ACT_GATES2_BUNKER_OBJ at 1224.72 -669.758 1066.74
01BC: put_object OOS_ACT_GATES3_BUNKER_OBJ at 1266.85 -669.758 1066.74
break
end

until false

repeat
wait 0

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED

until 0364:   actor PLAYER_ACTOR spotted_actor OOS_ACT_SECURITY_MAN

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "EDF398"
v$ST_DIALOG[1] = "EDF399"
v$ST_DIALOG[2] = "EDF400"
v$ST_DIALOG[3] = "EDF401"
v$ST_DIALOG[4] = "EDF402"
v$ST_DIALOG[5] = "EDF403"
v$ST_DIALOG[6] = "EDF404"
$DIALOG_COUNT = 6
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
$END_DIALOG_INST = 1
wait 0
break
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED

062E: get_actor OOS_ACT_SECURITY_MAN task 1506 status_store_to 1@ // ret 7 if not found
if and
0184:   actor OOS_ACT_SECURITY_MAN health > 0
1@ == 7
    then
    if
    82E0: not  actor OOS_ACT_SECURITY_MAN firing_weapon
        then
        random_int 1@ 1 25
        if
        056D:   actor $CREATURE[1@] defined
            then
            05E2: AS_actor OOS_ACT_SECURITY_MAN kill_actor $CREATURE[1@]
            end
        end
    end

until $DIALOG_END == 1

0631: put_actor OOS_ACT_SECURITY_MAN in_group PLAYER_GROUP
Actor.SetWalkStyle(OOS_ACT_SECURITY_MAN, "surv5") 

if
not $HUNTER_WAIT_SPAWN_MIN == 10000
then

008B: OOS_HUNTER_WAIT_SPAWN_MIN_PRE = $HUNTER_WAIT_SPAWN_MIN // (int)
008B: OOS_HUNTER_WAIT_SPAWN_MAX_PRE = $HUNTER_WAIT_SPAWN_MAX // (int)
008B: OOS_CHARGER_WAIT_SPAWN_MIN_PRE = $CHARGER_WAIT_SPAWN_MIN // (int)
008B: OOS_CHARGER_WAIT_SPAWN_MAX_PRE = $CHARGER_WAIT_SPAWN_MAX // (int)

$HUNTER_WAIT_SPAWN_MIN = 10000
$HUNTER_WAIT_SPAWN_MAX = 20000
$CHARGER_WAIT_SPAWN_MIN = 10000
$CHARGER_WAIT_SPAWN_MAX = 20000
wait 5
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 1
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 1
wait 1
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 0
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 0

end

$HUNTER_INTERIOR_SPAWN = 1
$CHARGER_INTERIOR_SPAWN = 1
$SPECIAL_INFECTED_SPAWN_OZC_FLAG = 1
$ZOMBIES_HORDE = 1

018A: MISSION_CHECKPOINT = create_checkpoint_at 1249.2645 -764.6652 1084.0165
03BC: MISSION_SPHERE = create_sphere_at 1249.2645 -764.6652 1084.0165 radius 2.0
v$OBJECTIVE = "GME1382"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1382"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

repeat
wait 0

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1249.2645 -764.6652 1084.0165)
end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED

if
8104: not  actor PLAYER_ACTOR near_actor OOS_ACT_SECURITY_MAN radius 30.0 30.0 5.0 sphere 0
    then
    $DIALOG_PAUSE = 1
    v$OBJECTIVE = "GME1383"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    marker.Disable(MISSION_CHECKPOINT)
    03BD: destroy_sphere MISSION_SPHERE
    MISSION_CHECKPOINT = marker.CreateAboveActor(OOS_ACT_SECURITY_MAN)
    07E0: set_marker MISSION_CHECKPOINT type_to 1
    
    while true
    wait 0    
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @OOS_ACT_FAILED_PLAYER_DIED
    if
    not actor.Dead(OOS_ACT_SECURITY_MAN)
    jf @OOS_ACT_FAILED_SECURITY_MAN_DIED
    
    if or
    8184:   actor OOS_ACT_SECURITY_MAN health < 1
    0104:   actor PLAYER_ACTOR near_actor OOS_ACT_SECURITY_MAN radius 30.0 30.0 5.0 sphere 0
        then
        break
        end
    
    end
    
    $DIALOG_PAUSE = 0    
    marker.Disable(MISSION_CHECKPOINT)    
    018A: MISSION_CHECKPOINT = create_checkpoint_at 1249.2645 -764.6652 1084.0165
    03BC: MISSION_SPHERE = create_sphere_at 1249.2645 -764.6652 1084.0165 radius 2.0
    v$OBJECTIVE = "GME1382"
    if
    REALISM_MODE == 1
        then
        v$OBJECTIVE = "GMR1382"
        end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)  
        
    end

until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1249.2645 -764.6652 1084.0165 radius 2.0

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

v$OBJECTIVE = "DUMMY"

fade 0 500
$HUD_REMOVE = 1
wait 500

actor.PutAtNoOffset(PLAYER_ACTOR,1249.5199, -765.6177, 1084.0156)
actor.Angle(PLAYER_ACTOR) = 180.0
06C9: remove_actor OOS_ACT_SECURITY_MAN from_group

if
0800:   in_two_players_mode
    then
    0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
    0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1
    end

OOS_MARK = 223367
$SAVESTATUS = 1
$ZOMBIE_REMOVE_FLAG = 1
wait 1000
$SAVESTATUS = 0
$ZOMBIE_REMOVE_FLAG = 0

$ZOMBIES_ALWAYS_VISIBLE = 1
$ZOMBIE_SPAWN_ON_COORD = 1
$SPECIAL_INFECTED_SPAWN_OZC_FLAG = 1
$ZMB_RADIUS = 40.0
$ZMB_Z_RADIUS = 5.0
$ZOMBIE_COORD_MAX = 15
  
$ZOMBIE_X[0] = 1260.9419
$ZOMBIE_Y[0] = -769.8329
$ZOMBIE_Z[0] = 1084.0078
  
$ZOMBIE_X[1] = 1248.7355
$ZOMBIE_Y[1] = -779.1937
$ZOMBIE_Z[1] = 1084.0078
  
$ZOMBIE_X[2] = 1283.3994
$ZOMBIE_Y[2] = -795.6265
$ZOMBIE_Z[2] = 1084.0149
  
$ZOMBIE_X[3] = 1284.0077
$ZOMBIE_Y[3] = -800.9301
$ZOMBIE_Z[3] = 1084.0078
  
$ZOMBIE_X[4] = 1262.1998
$ZOMBIE_Y[4] = -804.3779
$ZOMBIE_Z[4] = 1084.0078
  
$ZOMBIE_X[5] = 1242.2117
$ZOMBIE_Y[5] = -812.3816
$ZOMBIE_Z[5] = 1084.0078
  
$ZOMBIE_X[6] = 1254.5945
$ZOMBIE_Y[6] = -831.9625
$ZOMBIE_Z[6] = 1084.0171
  
$ZOMBIE_X[7] = 1286.5974
$ZOMBIE_Y[7] = -837.069
$ZOMBIE_Z[7] = 1085.635
  
$ZOMBIE_X[8] = 1282.2035
$ZOMBIE_Y[8] = -825.1664
$ZOMBIE_Z[8] = 1085.635
  
$ZOMBIE_X[9] = 1284.2606
$ZOMBIE_Y[9] = -821.8606
$ZOMBIE_Z[9] = 1089.9375
  
$ZOMBIE_X[10] = 1280.3962
$ZOMBIE_Y[10] = -813.9464
$ZOMBIE_Z[10] = 1089.9375
  
$ZOMBIE_X[11] = 1284.41
$ZOMBIE_Y[11] = -809.8161
$ZOMBIE_Z[11] = 1089.9375
  
$ZOMBIE_X[12] = 1280.3259
$ZOMBIE_Y[12] = -802.0048
$ZOMBIE_Z[12] = 1089.9375
  
$ZOMBIE_X[13] = 1284.3497
$ZOMBIE_Y[13] = -797.8437
$ZOMBIE_Z[13] = 1089.9375
  
$ZOMBIE_X[14] = 1280.1349
$ZOMBIE_Y[14] = -789.929
$ZOMBIE_Z[14] = 1089.9375

fade 1 500
$HUD_REMOVE = 0
wait 500

0615: define_AS_pack_begin 0@
07CD: AS_actor -1 walk_to 1251.8766 -767.0905 1084.0078 stop_with_angle 0.0 within_radius 0.5
0812: AS_actor -1 perform_animation "ATM" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time 5800  // versionB
0616: define_AS_pack_end 0@
0618: assign_actor OOS_ACT_SECURITY_MAN to_AS_pack 0@
061B: remove_references_to_AS_pack 0@

repeat
wait 0

if
0800:   in_two_players_mode
    then
    if or
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
        then
        0A8C: write_memory 0x0513256 size 1 value 1 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 1 virtual_protect 1
        else
        0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1
        end
    end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED

until actor.Animation(OOS_ACT_SECURITY_MAN) == "ATM"

repeat
wait 0   

if
0800:   in_two_players_mode
    then
    if or
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
        then
        0A8C: write_memory 0x0513256 size 1 value 1 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 1 virtual_protect 1
        else
        0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1
        end
    end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED

until not actor.Animation(OOS_ACT_SECURITY_MAN) == "ATM"

0631: put_actor OOS_ACT_SECURITY_MAN in_group PLAYER_GROUP

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "EDF405"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

018A: MISSION_CHECKPOINT = create_checkpoint_at 1261.0823 -785.5032 1091.9062
03BC: MISSION_SPHERE = create_sphere_at 1261.0823 -785.5032 1091.9062 radius 2.0
v$OBJECTIVE = "GME1382"
if
REALISM_MODE == 1
    then
    v$OBJECTIVE = "GMR1382"
    end
0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
$SOUNDS_VOLUME3 *= 0.5
Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
Audiostream.Loop($MENU_SCIFI_SOUND, 0)
Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)

repeat
wait 0

if
0800:   in_two_players_mode
    then
    if or
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1252.2971 -815.0826 1082.2509 cornerB 1287.7435 -785.3056 1088.1451
        then
        0A8C: write_memory 0x0513256 size 1 value 1 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 1 virtual_protect 1
        else
        0A8C: write_memory 0x0513256 size 1 value 0 virtual_protect 1 
        0A8C: write_memory 0x051329F size 1 value 0 virtual_protect 1
        end
    end

if and
8104: not  actor PLAYER_ACTOR near_actor OOS_ACT_SECURITY_MAN radius 30.0 30.0 5.0 sphere 0
not OOS_ACT_PLAYER_GNIDA_FLAG == 1
    then
    $DIALOG_PAUSE = 1
    v$OBJECTIVE = "GME1383"
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
    MISSION_MARKER = marker.CreateAboveActor(OOS_ACT_SECURITY_MAN)
    07E0: set_marker MISSION_MARKER type_to 1
    
    32@ = 0
    
    wait 100
    text.ShowH('EDF408',3000,1)
    
    while true
    wait 0    
    
    if
    not actor.Dead(PLAYER_ACTOR)
    jf @OOS_ACT_FAILED_PLAYER_DIED
    
    if or
    32@ > 5000
    actor.Dead(OOS_ACT_SECURITY_MAN)
        then
        marker.Disable(MISSION_MARKER)
        OOS_ACT_PLAYER_GNIDA_FLAG = 1    
        CARMA_BAD_POINTS += 30
        Audiostream.Loop($KARMA_BAD,0)
        Audiostream.PerformAction($KARMA_BAD, PLAY)
        Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
        CARMA_GOOD_POINTS -= 15
        06C9: remove_actor OOS_ACT_SECURITY_MAN from_group
        05BE: AS_actor OOS_ACT_SECURITY_MAN die
        v$OBJECTIVE = "DUMMY"
        text.ShowH('EDF409',3000,1)
        wait 3000
        break
        end
    
    if or
    8184:   actor OOS_ACT_SECURITY_MAN health < 1
    0104:   actor PLAYER_ACTOR near_actor OOS_ACT_SECURITY_MAN radius 30.0 30.0 5.0 sphere 0
        then
        break
        end
    
    end
    
    $DIALOG_PAUSE = 0    
    marker.Disable(MISSION_MARKER)    
    v$OBJECTIVE = "GME1382"
    if
    REALISM_MODE == 1
        then
        v$OBJECTIVE = "GMR1382"
        end
    0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
    $SOUNDS_VOLUME3 *= 0.5
    Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
    Audiostream.Loop($MENU_SCIFI_SOUND, 0)
    Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)  
        
    end

if
not actor.Dead(PLAYER_ACTOR)
jf @OOS_ACT_FAILED_PLAYER_DIED

if
not OOS_ACT_PLAYER_GNIDA_FLAG == 1
then
if
not actor.Dead(OOS_ACT_SECURITY_MAN)
jf @OOS_ACT_FAILED_SECURITY_MAN_DIED
end

if and
$CHEATS_ON == 1
0E3D:   key_pressed $KEY_USE
then
actor.PutAtNoOffset(PLAYER_ACTOR,1261.0823 -785.5032 1091.9062)
end

until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 1261.0823 -785.5032 1091.9062 radius 2.0 

marker.Disable(MISSION_CHECKPOINT)
03BD: destroy_sphere MISSION_SPHERE

fade 0 500
player.CanMove(PLAYER_CHAR,false)
$HUD_REMOVE = 1
wait 500 

v$OBJECTIVE = "DUMMY"

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//
//wait 1
//
//while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//wait 0
//end
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)

$SAVESTATUS = 0 
$ZOMBIES_COUNT = 20
$Z_DONT_CLIMB_FLAG = 0
$ZOMBIES_HORDE = 0
$ZOMBIES_ALWAYS_VISIBLE = 0
$ZOMBIE_SPAWN_ON_COORD = 0
$SPECIAL_INFECTED_SPAWN_OZC_FLAG = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN = 0
ZOMBIE_INTERIOR_ALLOW_SPAWN2 = 0
$ZMB_RADIUS = 180.0
$ZMB_Z_RADIUS = 40.0
$SALVATION_FLAG = 0
$ZOMBIES_ALWAYS_VISIBLE = 0
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 0
SPEC_INFECTED_MARKER_FLAG = 0
$HUNTER_INTERIOR_SPAWN = 0
$CHARGER_INTERIOR_SPAWN = 0

$OOS_CAPTURED = 3
076C: set_zone 'OOSZN' gang 4 density_to 0
076C: set_zone 'OOSZN' gang 5 density_to 0
marker.Disable($OOS)

HARDCORE_DANGER_FLAG_SCRIPTED = 0
OOS_MARK = 0
CUSTOM_MODE_NO_TEAMMATES_DEATHS = 0
INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1
$INT_ZMB_NOT = 0
CAMP_DONT_SAY_HELLO_FLAG = 0
CAMP_LEADER_DONT_SAY_BYE_FLAG = 0
PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
$PHRASES_OFF_FLAG = 0
OOS_CURRENT_PROGRESS = 10
035F: actor OOS_ACT_SECURITY_MAN armour += 69
wait 0
$TIME_LOCK_OFF = 1
$SAVESTATUS = 1
008A: $HUNTER_WAIT_SPAWN_MIN = OOS_HUNTER_WAIT_SPAWN_MIN_PRE // (int)
008A: $HUNTER_WAIT_SPAWN_MAX = OOS_HUNTER_WAIT_SPAWN_MAX_PRE // (int)
008A: $CHARGER_WAIT_SPAWN_MIN = OOS_CHARGER_WAIT_SPAWN_MIN_PRE // (int)
008A: $CHARGER_WAIT_SPAWN_MAX = OOS_CHARGER_WAIT_SPAWN_MAX_PRE // (int)
wait 5
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 1
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 1
wait 1000
$ZOMBIE_HUNTER_SPAWN_TIMER_RESTART = 0
$ZOMBIE_CHARGER_SPAWN_TIMER_RESTART = 0

actor.PutAtNoOffset(PLAYER_ACTOR,1259.0801, -785.4126, 92.0302)
actor.Angle(PLAYER_ACTOR) = 90.0
04BB: select_interior 0
0860: link_actor PLAYER_ACTOR to_interior 0
04FA: reset_sky_colors_with_fade 0
0777: delete_objects_in_object_group "bunker"
0777: delete_objects_in_object_group "bunker2"

///////////////////////////////////////////////////////////

:CAR_CREATE_OOS_BMX
if
model.Available(#BMX)
then

0@ = car.Create(#BMX,1257.4532, -779.3687, 91.9275)
0EB4: set_car_coordinates_simple 0@ position 1257.4532 -779.3687 91.9275
car.Angle(0@) = 39.1693           

if
model.Available(#BMX)
then
//model.Destroy(#BMX)
end

else
model.Load(#BMX)
mload
wait 0
jump to @CAR_CREATE_OOS_BMX
end

///////////////////////////////////////////////////////////

player.CanMove(PLAYER_CHAR,true)
camera.Restore_WithJumpCut()
create_thread @3D_REFR
fade 1 500
$HUD_REMOVE = 0
wait 500
INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0 

if
not OOS_ACT_PLAYER_GNIDA_FLAG == 1
then

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "EDF406"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

repeat
wait 0
until $DIALOG_END == 1

$END_DIALOG_INST = 1
wait 0
v$ST_DIALOG[0] = "EDF407"
$DIALOG_COUNT = 0
$DIALOG_NOT_SKIP = 1
create_thread @DG_SYS2

06C9: remove_actor OOS_ACT_SECURITY_MAN from_group
05E2: AS_actor OOS_ACT_SECURITY_MAN kill_actor PLAYER_ACTOR

end

jump to @OOS_ACTION_END_JUMP

:VORZAK_CHANGE_WEAPON_TO_M60_CLOSE
//0AD1: show_formatted_text_highpriority "MUDAK VSTAVAI I IDI EBI CHEESERA!!" time 100
01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 70

if
0597:   actor OOS_ACT_WORZAK crouching
then
04EB: AS_actor OOS_ACT_WORZAK crouch 0
end

02AB: set_actor OOS_ACT_WORZAK immunities BP 0 FP 1 EP 0 CP 1 MP 1
07DD: set_actor OOS_ACT_WORZAK attack_rate 100 // previously known as temper_to
actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 7 turn_radius 1.0 stop_radius 0.1 look_at_actor PLAYER_ACTOR
jump to @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE2

:VORZAK_CHANGE_WEAPON_TO_M60_CLOSE_COOP
//0AD1: show_formatted_text_highpriority "MUDAK VSTAVAI I IDI EBI CHEESERA!!" time 100
01B9: set_actor OOS_ACT_WORZAK armed_weapon_to 70

if
0597:   actor OOS_ACT_WORZAK crouching
then
04EB: AS_actor OOS_ACT_WORZAK crouch 0
end

02AB: set_actor OOS_ACT_WORZAK immunities BP 0 FP 1 EP 0 CP 1 MP 1
07DD: set_actor OOS_ACT_WORZAK attack_rate 100 // previously known as temper_to
actor.StorePos(COOP_ACTOR,4@,5@,6@)
0637: AS_actor OOS_ACT_WORZAK goto 4@ 5@ 6@ mode 7 turn_radius 1.0 stop_radius 0.1 look_at_actor PLAYER_ACTOR
jump to @VORZAK_CHANGE_WEAPON_TO_M60_CLOSE2

:OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE1

if
856D: not  actor $RNDM_HOUSE_WEAPON[0@] defined
then
return
end   

092B: 3@ = group PLAYER_GROUP member 11@

if
07D6:   3@ == COOP_ACTOR // @ == $ (int)
then
return
end

if
056D:  actor 3@ defined
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN

if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN    

if
056D:   actor 3@ defined
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN 

if and 
not actor.Driving(PLAYER_ACTOR)
$RANDOM_CAR_FLAG == 0  
89DE:   actor 3@ entering_car  
80DF:   actor 3@ in_a_car
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if or
0364:   actor 3@ spotted_actor $RNDM_HOUSE_WEAPON[0@]
0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 3@
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if
00F2:   actor 3@ near_actor $RNDM_HOUSE_WEAPON[0@] radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
$HUNTER_ON_PLAYER == 0
$PEOPLE_DONT_ATTACK == 0
$COMMAND_STAY_IN_CAR == 0
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if
not actor.Animation(3@) == "FLOOR_hit"
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if
$HUNTER_ON_GROUP == 0
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if
044B:   actor 3@ on_foot
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if
82E0: not actor 3@ firing_weapon
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "colt45_fire_2hands"
not actor.Animation(3@) == "python_fire" 
not actor.Animation(3@) == "shotgun_fire" 
not actor.Animation(3@) == "buddy_fire" 
not actor.Animation(3@) == "UZI_fire"
not actor.Animation(3@) == "RIFLE_fire" 
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "FLAME_fire" 
not actor.Animation(3@) == "RocketFire" 
not actor.Animation(3@) == "WEAPON_sniper" 
not actor.Animation(3@) == "WEAPON_throw"   
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN       
if and
not actor.Animation(3@) == "colt45_crouchfire"
not actor.Animation(3@) == "python_crouchfire" 
not actor.Animation(3@) == "shotgun_crouchfire" 
not actor.Animation(3@) == "buddy_crouchfire" 
not actor.Animation(3@) == "UZI_crouchfire"
not actor.Animation(3@) == "RIFLE_crouchfire" 
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_reload"
not actor.Animation(3@) == "python_reload" 
not actor.Animation(3@) == "shotgun_reload" 
not actor.Animation(3@) == "buddy_reload" 
not actor.Animation(3@) == "UZI_reload"
not actor.Animation(3@) == "RIFLE_load" 
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_crouchreload"
not actor.Animation(3@) == "python_crouchreload" 
not actor.Animation(3@) == "shotgun_crouchreload" 
not actor.Animation(3@) == "buddy_crouchreload" 
not actor.Animation(3@) == "UZI_crouchreload"
not actor.Animation(3@) == "RIFLE_crouchload" 
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN   
if and
not actor.Animation(3@) == "GunMove_BWD"
not actor.Animation(3@) == "GunMove_FWD"
not actor.Animation(3@) == "GunMove_L"
not actor.Animation(3@) == "GunMove_R"
not actor.Animation(3@) == "Gun_2_IDLE"
not actor.Animation(3@) == "GUN_BUTT"
not actor.Animation(3@) == "GUN_BUTT_crouch"
not actor.Animation(3@) == "Gun_stand" 
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "CLIMB_idle"
not actor.Animation(3@) == "CLIMB_jump"
not actor.Animation(3@) == "CLIMB_jump2fall"
not actor.Animation(3@) == "CLIMB_jump_B"
not actor.Animation(3@) == "CLIMB_Pull"
not actor.Animation(3@) == "CLIMB_Stand"
not actor.Animation(3@) == "CLIMB_Stand_finish" 
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
05C1: AS_actor 3@ speak_from_audio_table $PEOPLE_ZOMBIE_ATTACK_AUDIO_TABLE
if
056D:   actor 3@ defined
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN 
if and
not actor.Driving(PLAYER_ACTOR)
89DE:   actor PLAYER_ACTOR entering_car
80DF:   actor PLAYER_ACTOR in_a_car
80DF:   actor 3@ in_a_car
not actor.Dead(3@)
not actor.Dead($RNDM_HOUSE_WEAPON[0@])
jf @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
0647: AS_actor 3@ clear_look_task
05B9: AS_actor 3@ stay_idle 50 ms 
wait 50
if
056D:   actor 3@ defined  
then
05E2: AS_actor 3@ kill_actor $RNDM_HOUSE_WEAPON[0@]
end
jump @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN

:OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE_BEGIN
return

:BASIC_AI_FORATTACK_ZOMBIES

if
32@ > 250
then
32@ = 0

//Лидеры и Ренегаты
062E: get_actor OOS_ACT_ENKER task 1506 status_store_to 1@ // ret 7 if not found
if and
0184:   actor OOS_ACT_ENKER health > 0
1@ == 7
    then
    if
    82E0: not  actor OOS_ACT_ENKER firing_weapon
        then
        random_int 1@ 1 25
        if
        056D:   actor $CREATURE[1@] defined
            then
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then
            0350: set_actor OOS_ACT_ENKER maintain_position_when_attacked 1
            end
            
            05E2: AS_actor OOS_ACT_ENKER kill_actor $CREATURE[1@]
            end
        end
    end
062E: get_actor OOS_ACT_GARNET task 1506 status_store_to 1@ // ret 7 if not found
if and
0184:   actor OOS_ACT_GARNET health > 0
1@ == 7
    then
    if
    82E0: not  actor OOS_ACT_GARNET firing_weapon
        then
        random_int 1@ 1 25
        if
        056D:   actor $CREATURE[1@] defined
            then
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then
            0350: set_actor OOS_ACT_GARNET maintain_position_when_attacked 1
            end
            
            05E2: AS_actor OOS_ACT_GARNET kill_actor $CREATURE[1@]
            end
        end
    end
062E: get_actor OOS_ACT_ARTEMIS task 1506 status_store_to 1@ // ret 7 if not found
if and
0184:   actor OOS_ACT_ARTEMIS health > 0
1@ == 7
    then
    if
    82E0: not  actor OOS_ACT_ARTEMIS firing_weapon
        then
        random_int 1@ 1 25
        if
        056D:   actor $CREATURE[1@] defined
            then
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then
            0350: set_actor OOS_ACT_ARTEMIS maintain_position_when_attacked 1
            end
            
            05E2: AS_actor OOS_ACT_ARTEMIS kill_actor $CREATURE[1@]
            end
        end
    end
062E: get_actor OOS_ACT_DANIEL task 1506 status_store_to 1@ // ret 7 if not found
if and
0184:   actor OOS_ACT_DANIEL health > 0
1@ == 7
    then
    if
    82E0: not  actor OOS_ACT_DANIEL firing_weapon
        then
        random_int 1@ 1 25
        if
        056D:   actor $CREATURE[1@] defined
            then
            
            if
            OOS_FARMERS_WITH_PLAYER == 1
            then
            0350: set_actor OOS_ACT_DANIEL maintain_position_when_attacked 1
            end
            
            05E2: AS_actor OOS_ACT_DANIEL kill_actor $CREATURE[1@]
            end
        end
    end    

//Фермеры
if and
OOS_FARMERS_WITH_PLAYER == 1
OOS_ACT_FERMERS_SURVIVERS_NUM > 0
    then    
    random_int 0@ 26 34
    062E: get_actor $RNDM_HOUSE_WEAPON[0@] task 1506 status_store_to 1@ // ret 7 if not found
    if and
    0184:   actor $RNDM_HOUSE_WEAPON[0@] health > 0
    1@ == 7
        then
        if
        82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon
            then
            random_int 1@ 1 25
            if
            056D:   actor $CREATURE[1@] defined
                then
                0350: set_actor $RNDM_HOUSE_WEAPON[0@] maintain_position_when_attacked 1
                05E2: AS_actor $RNDM_HOUSE_WEAPON[0@] kill_actor $CREATURE[1@]
                end
            end
        end            
    end

end

return

:FERMERS_CREATE_BUNKER_GOOD_FOR_END

if and
OOS_FARMERS_WITH_PLAYER == 1
OOS_ACT_FERMERS_SURVIVERS_NUM > 0
then

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER1 = actor.Create(26,FERMER1_SKIN_ID,1205.2267, -752.084, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER1 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER1) = 0.0

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER2 = actor.Create(26,FERMER2_SKIN_ID,1205.155, -754.2565, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER2 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER2) = 45.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER3 = actor.Create(26,FERMER3_SKIN_ID,1207.4596, -751.3673, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER3 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER3) = 51.0

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER4 = actor.Create(26,FERMER4_SKIN_ID,1209.8772, -751.0151, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER4 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER4) = 54.0

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER5 = actor.Create(26,FERMER1_SKIN_ID,1204.0796, -756.0243, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER5 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER5) = 43.5

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER6 = actor.Create(26,FERMER2_SKIN_ID,1206.5128, -756.7116, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER6 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER6) = 45.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER7 = actor.Create(26,FERMER3_SKIN_ID,1208.8035, -755.2099, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER7 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER7) = 50.0

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER8 = actor.Create(26,FERMER4_SKIN_ID,1211.0071, -755.3051, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER8 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER8) = 50.0

end

062F: OOS_ACT_FERMERS_GROUP = create_group_type 0
0630: put_actor OOS_ACT_FERMER1 in_group OOS_ACT_FERMERS_GROUP as_leader
07B3: set_group OOS_ACT_FERMERS_GROUP give_command 0
0631: put_actor OOS_ACT_FERMER2 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER2 never_leave_group 1
0631: put_actor OOS_ACT_FERMER3 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER3 never_leave_group 1
0631: put_actor OOS_ACT_FERMER4 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER4 never_leave_group 1
0631: put_actor OOS_ACT_FERMER5 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER5 never_leave_group 1
0631: put_actor OOS_ACT_FERMER6 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER6 never_leave_group 1
0631: put_actor OOS_ACT_FERMER7 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER7 never_leave_group 1
0631: put_actor OOS_ACT_FERMER8 in_group OOS_ACT_FERMERS_GROUP
087F: set_actor OOS_ACT_FERMER8 never_leave_group 1

//OOS_ACT_FERMERS_SURVIVERS_NUM = 4

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 8
then
06C9: remove_actor OOS_ACT_FERMER8 from_group
0337: set_actor OOS_ACT_FERMER8 visibility 0
0619: enable_actor OOS_ACT_FERMER8 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER8,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER8,true)
05BE: AS_actor OOS_ACT_FERMER8 die
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 7
then
06C9: remove_actor OOS_ACT_FERMER7 from_group
0337: set_actor OOS_ACT_FERMER7 visibility 0
0619: enable_actor OOS_ACT_FERMER7 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER7,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER7,true)
05BE: AS_actor OOS_ACT_FERMER7 die
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 6
then
06C9: remove_actor OOS_ACT_FERMER6 from_group
0337: set_actor OOS_ACT_FERMER6 visibility 0
0619: enable_actor OOS_ACT_FERMER6 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER6,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER6,true)
05BE: AS_actor OOS_ACT_FERMER6 die
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 5
then
06C9: remove_actor OOS_ACT_FERMER5 from_group
0337: set_actor OOS_ACT_FERMER5 visibility 0
0619: enable_actor OOS_ACT_FERMER5 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER5,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER5,true)
05BE: AS_actor OOS_ACT_FERMER5 die
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 4
then
06C9: remove_actor OOS_ACT_FERMER4 from_group
0337: set_actor OOS_ACT_FERMER4 visibility 0
0619: enable_actor OOS_ACT_FERMER4 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER4,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER4,true)
05BE: AS_actor OOS_ACT_FERMER4 die
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 3
then
06C9: remove_actor OOS_ACT_FERMER3 from_group
0337: set_actor OOS_ACT_FERMER3 visibility 0
0619: enable_actor OOS_ACT_FERMER3 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER3,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER3,true)
05BE: AS_actor OOS_ACT_FERMER3 die
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM < 2
then
06C9: remove_actor OOS_ACT_FERMER2 from_group
0337: set_actor OOS_ACT_FERMER2 visibility 0
0619: enable_actor OOS_ACT_FERMER2 collision_detection 0
actor.PutAtNoOffset(OOS_ACT_FERMER2,2800.0,2800.0,0.0,0.0)
actor.LockInCurrentPosition(OOS_ACT_FERMER2,true)
05BE: AS_actor OOS_ACT_FERMER2 die
end

actor.PutAtNoOffset(OOS_ACT_FERMER1,1206.6366, -814.704, 1084.4113)
05D3: AS_actor OOS_ACT_FERMER1 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER1 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER1

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 1
then
05D3: AS_actor OOS_ACT_FERMER2 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER2 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER2
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 2
then
05D3: AS_actor OOS_ACT_FERMER3 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER3 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER3
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 3
then
05D3: AS_actor OOS_ACT_FERMER4 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER4 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER4
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 4
then
05D3: AS_actor OOS_ACT_FERMER5 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER5 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER5
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 5
then
05D3: AS_actor OOS_ACT_FERMER6 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER6 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER6
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 6
then
05D3: AS_actor OOS_ACT_FERMER7 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA
create_thread @PED_BKP OOS_ACT_FERMER7 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER7
end

if
OOS_ACT_FERMERS_SURVIVERS_NUM > 7
then
05D3: AS_actor OOS_ACT_FERMER8 goto_point 1207.5848 -757.0679 1061.8197 mode 7 time 30000 ms // versionA  
create_thread @PED_BKP OOS_ACT_FERMER8 371 0 0 0 1 1 3 1 3 1
create_thread @ANT_PRE OOS_ACT_FERMER8
end

for 0@ = 26 to 33

///stats

08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 1000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 5     

///wep

random_int 1@ 0 4
if
1@ == 0
then
1@ = 89
end

if
1@ == 1
then
1@ = 88
end

if
1@ == 2
then
1@ = 95
end

if
1@ == 3
then
1@ = 101
end

0085: 2@ = 1@ // (int)

0781: get_weapon_with_ID 1@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],2@,99999)

///wep

end 

return

:FERMERS_CREATE_FOR_SLAUTHER

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER1 = actor.Create(26,FERMER1_SKIN_ID,1205.2267, -752.084, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER1 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER1) = 48.6477

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER2 = actor.Create(26,FERMER2_SKIN_ID,1205.155, -754.2565, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER2 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER2) = 45.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER3 = actor.Create(26,FERMER3_SKIN_ID,1207.4596, -751.3673, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER3 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER3) = 51.0

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER4 = actor.Create(26,FERMER4_SKIN_ID,1209.8772, -751.0151, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER4 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER4) = 54.0

while not model.Available(FERMER1_SKIN_ID)
wait 0
model.Load(FERMER1_SKIN_ID)
mload
end

OOS_ACT_FERMER5 = actor.Create(26,FERMER1_SKIN_ID,1204.0796, -756.0243, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER5 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER5) = 43.5

while not model.Available(FERMER2_SKIN_ID)
wait 0
model.Load(FERMER2_SKIN_ID)
mload
end

OOS_ACT_FERMER6 = actor.Create(26,FERMER2_SKIN_ID,1206.5128, -756.7116, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER6 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER6) = 45.0

while not model.Available(FERMER3_SKIN_ID)
wait 0
model.Load(FERMER3_SKIN_ID)
mload
end

OOS_ACT_FERMER7 = actor.Create(26,FERMER3_SKIN_ID,1208.8035, -755.2099, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER7 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER7) = 50.0

while not model.Available(FERMER4_SKIN_ID)
wait 0
model.Load(FERMER4_SKIN_ID)
mload
end

OOS_ACT_FERMER8 = actor.Create(26,FERMER4_SKIN_ID,1211.0071, -755.3051, 1061.8197) //Фермер ГГ из войны фракций    
0D10: set_actor OOS_ACT_FERMER8 alpha 255 // IF and SET
actor.Angle(OOS_ACT_FERMER8) = 50.0

for 0@ = 26 to 33

///stats

08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 1000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 5
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 0 3 7 3
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]

///wep

random_int 1@ 0 4
if
1@ == 0
then
1@ = 89
end

if
1@ == 1
then
1@ = 88
end

if
1@ == 2
then
1@ = 95
end

if
1@ == 3
then
1@ = 101
end

0085: 2@ = 1@ // (int)

0781: get_weapon_with_ID 1@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],2@,99999)

///wep

end 

return

:VORZAK_PODOSOSI_CHECKS

if
856D: not  actor OOS_ACT_WORZAK_PODSOS1 defined
    then
    
    random_int 0@ 3194 3209
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    OOS_ACT_WORZAK_PODSOS1 = actor.Create(25,0@,1169.1863, -720.5139, 1061.8197)    
    actor.Angle(OOS_ACT_WORZAK_PODSOS1) = 279.0
    create_thread @PED_BKP OOS_ACT_WORZAK_PODSOS1 371 0 0 0 1 0 2 7 3 0 0 0 OOS_ACT_WORZAK_PODSOS_SLOWMO_RESTORE_COUNT
    create_thread @ANT_PRE OOS_ACT_WORZAK_PODSOS1
    
    0@ = 24
    gosub @PODSOS_GIVE_RANDOM_WEP
    05E2: AS_actor OOS_ACT_WORZAK_PODSOS1 kill_actor PLAYER_ACTOR
    else
    if
    actor.Dead(OOS_ACT_WORZAK_PODSOS1)
        then
        if or
        00F2:   actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        33@ >= 6500
            then
            33@ = 0
            actor.RemoveReferences(OOS_ACT_WORZAK_PODSOS1)
            OOS_ACT_WORZAK_PODSOS1 = -1
            end
        end
    end
    
if
856D: not  actor OOS_ACT_WORZAK_PODSOS2 defined
    then
    
    random_int 0@ 3194 3209
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    OOS_ACT_WORZAK_PODSOS2 = actor.Create(25,0@,1221.0934, -740.0015, 1061.8197)
    actor.Angle(OOS_ACT_WORZAK_PODSOS2) = 56.0 
    create_thread @PED_BKP OOS_ACT_WORZAK_PODSOS2 371 0 0 0 1 0 2 7 3 0 0 0 OOS_ACT_WORZAK_PODSOS_SLOWMO_RESTORE_COUNT
    create_thread @ANT_PRE OOS_ACT_WORZAK_PODSOS2 
    
    0@ = 25
    gosub @PODSOS_GIVE_RANDOM_WEP
    05E2: AS_actor OOS_ACT_WORZAK_PODSOS2 kill_actor PLAYER_ACTOR
    else
    if
    actor.Dead(OOS_ACT_WORZAK_PODSOS2)
        then
        if or
        00F2:   actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        33@ >= 6500
            then 
            33@ = 0
            actor.RemoveReferences(OOS_ACT_WORZAK_PODSOS2)
            OOS_ACT_WORZAK_PODSOS2 = -1
            end
        end
    end
    
if
856D: not  actor OOS_ACT_WORZAK_PODSOS3 defined
    then
    
    random_int 0@ 3194 3209
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    OOS_ACT_WORZAK_PODSOS3 = actor.Create(25,0@,1169.1863, -720.5139, 1061.8197)    
    actor.Angle(OOS_ACT_WORZAK_PODSOS3) = 88.0
    create_thread @PED_BKP OOS_ACT_WORZAK_PODSOS3 371 0 0 0 1 0 2 7 3 0 0 0 OOS_ACT_WORZAK_PODSOS_SLOWMO_RESTORE_COUNT
    create_thread @ANT_PRE OOS_ACT_WORZAK_PODSOS3
    
    0@ = 26
    gosub @PODSOS_GIVE_RANDOM_WEP
    05E2: AS_actor OOS_ACT_WORZAK_PODSOS3 kill_actor PLAYER_ACTOR
    else
    if
    actor.Dead(OOS_ACT_WORZAK_PODSOS3)
        then
        if or
        00F2:   actor OOS_ACT_WORZAK near_actor PLAYER_ACTOR radius 20.0 20.0 sphere 0
        33@ >= 6500
            then
            33@ = 0
            actor.RemoveReferences(OOS_ACT_WORZAK_PODSOS3)
            OOS_ACT_WORZAK_PODSOS3 = -1
            end
        end
    end        

random_int 0@ 24 27
if and
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
0E45: frame_mod 2
    then        
    062E: get_actor $RNDM_HOUSE_WEAPON[0@] task 1506 status_store_to 1@ // ret 7 if not found
    0E44: get_char_kill_target_char $RNDM_HOUSE_WEAPON[0@] store_to 2@
    if and
    0184:   actor $RNDM_HOUSE_WEAPON[0@] health > 0
    82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon
    1@ == 7
    856D: not  actor 2@ defined
        then
            
        if
        0E4D: random_percent 50
        then        
        if
        056D:   actor COOP_ACTOR defined        
            then            
            if
            0E4D: random_percent 50
                then
                008B: 3@ = COOP_ACTOR // (int)
                else
                008B: 3@ = PLAYER_ACTOR // (int)
                end            
            else
            008B: 3@ = PLAYER_ACTOR // (int)
            end        
        else
        random_int 2@ 41 46
        008B: 3@ = $CREATURE[2@] // (int)
        end
        
        if and
        056D:   actor 3@ defined
        not 3@ == -69
            then    
            if or
            0364:   actor 3@ spotted_actor $RNDM_HOUSE_WEAPON[0@]
            0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 3@
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor 3@
                then
                0350: set_actor $RNDM_HOUSE_WEAPON[0@] maintain_position_when_attacked 0
                07A5: AS_actor $RNDM_HOUSE_WEAPON[0@] attack_actor 3@ time 3000
                end
            end    
        end
    end
    
//FOX, IDI NAHUI!
for 0@ = 24 to 27
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
    then
    actor.StorePos($RNDM_HOUSE_WEAPON[0@],1@,2@,3@)
    if
    3@ < 1030.0
        then
        05BE: AS_actor $RNDM_HOUSE_WEAPON[0@] die
        end
    end
end    

return

:PODSOS_GIVE_RANDOM_WEP

random_int 1@ 0 7
if
1@ == 0
then
1@ = 85
end

if
1@ == 1
then
1@ = 105
end

if
1@ == 2
then
1@ = 99
end

if
1@ == 3
then
1@ = 30
end

if
1@ == 4
then
1@ = 86
end

if
1@ == 5
then
1@ = 29
end

if
1@ == 6
then
1@ = 24
end
   
0085: 2@ = 1@ // (int)

0781: get_weapon_with_ID 1@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],2@,99999)

actor.Health($RNDM_HOUSE_WEAPON[0@]) = 1000    
0D10: set_actor $RNDM_HOUSE_WEAPON[0@] alpha 255 // IF and SET
Actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@], "GANG2")
081A: set_actor $RNDM_HOUSE_WEAPON[0@] weapon_skill_to 2
if
2@ == 24
then
Actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 30
else
Actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 45
end

060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0   
0946: set_actor $RNDM_HOUSE_WEAPON[0@] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
099F: AS_actor $RNDM_HOUSE_WEAPON[0@] ignore_weapon_range 1
04D8: set_actor $RNDM_HOUSE_WEAPON[0@] drowns_in_water 0
0E24: fix_char $RNDM_HOUSE_WEAPON[0@] ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
0648: unknown_actor $RNDM_HOUSE_WEAPON[0@] task_set 1000.0 // float
09F4: set_actor $RNDM_HOUSE_WEAPON[0@] ignore_height_difference_following_nodes 1

if
0E4D: random_percent 15
then

///////////////////////////////

0555: remove_weapon 16 from_actor $RNDM_HOUSE_WEAPON[0@]
0555: remove_weapon 17 from_actor $RNDM_HOUSE_WEAPON[0@]
0555: remove_weapon 18 from_actor $RNDM_HOUSE_WEAPON[0@]

random_int 1@ 0 3
if
1@ == 0
    then    
    0781: get_weapon_with_ID 16 model_to 1@
    
    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
    
    actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],16,1)    
    end

if
1@ == 1
    then
    0781: get_weapon_with_ID 16 model_to 1@
    
    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
    
    actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],16,1)
    end

if
1@ == 2
    then
    0781: get_weapon_with_ID 18 model_to 1@
    
    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
    
    actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],18,1)
    end

///////////////////////////////

end

return

:OOS_ATTACK_SYSTEM

for 0@ = 0 to 39

if
056D:   actor $ARMY69_2[0@] defined
    then
    if and
    0184:   actor $ARMY69_2[0@] health > 0
    82E0: not  actor $ARMY69_2[0@] firing_weapon
    8E46: not is_char_using_gun $ARMY69_2[0@]
    8E42: not is_char_doing_task_id $ARMY69_2[0@] 1023
        then
            
        if
        0E4D: random_percent 50
        then        
        if
        056D:   actor COOP_ACTOR defined        
            then            
            if
            0E4D: random_percent 50
                then
                008B: 3@ = COOP_ACTOR // (int)
                else
                008B: 3@ = PLAYER_ACTOR // (int)
                end            
            else
            008B: 3@ = PLAYER_ACTOR // (int)
            end        
        else
        random_int 2@ 41 46
        008B: 3@ = $CREATURE[2@] // (int)  
        end
        
        if and
        056D:   actor 3@ defined
        not 3@ == -69
            then    
            if or
            0364:   actor 3@ spotted_actor $ARMY69_2[0@]
            0364:   actor $ARMY69_2[0@] spotted_actor 3@
            051A:   actor $ARMY69_2[0@] damaged_by_actor 3@
                then
                0350: set_actor $ARMY69_2[0@] maintain_position_when_attacked 0
                07A5: AS_actor $ARMY69_2[0@] attack_actor 3@ time 3000
                end
            end    
        end
    end
    
end    
    
return    

:EXTRA_MANSION_FIGHTERS_DO_AI_STUFF

for 0@ = 26 to 32
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
    then
    if and
    0184:   actor $RNDM_HOUSE_WEAPON[0@] health > 0
    82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon
    8E46: not is_char_using_gun $RNDM_HOUSE_WEAPON[0@]
    8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 1023
        then
            
        if
        0E4D: random_percent 50
        then        
        if
        056D:   actor COOP_ACTOR defined        
            then            
            if
            0E4D: random_percent 50
                then
                008B: 3@ = COOP_ACTOR // (int)
                else
                008B: 3@ = PLAYER_ACTOR // (int)
                end            
            else
            008B: 3@ = PLAYER_ACTOR // (int)
            end        
        else
        random_int 2@ 41 46
        008B: 3@ = $CREATURE[2@] // (int) 
        end
        
        if and
        056D:   actor 3@ defined
        not 3@ == -69
            then    
            if or
            0364:   actor 3@ spotted_actor $RNDM_HOUSE_WEAPON[0@]
            0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 3@
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor 3@
                then
                0350: set_actor $RNDM_HOUSE_WEAPON[0@] maintain_position_when_attacked 0
                07A5: AS_actor $RNDM_HOUSE_WEAPON[0@] attack_actor 3@ time 3000
                end
            end    
        end
    end
end

return

:BUNKER_DO_FIGHERS_AI_STUFF

if
0800:   in_two_players_mode
    then
    0A8C: write_memory 0x0513256 size 1 value 1 virtual_protect 1 
    0A8C: write_memory 0x051329F size 1 value 1 virtual_protect 1
    end

if
OOS_BUNKER_M60_MOMENT_FLAG == 0
then
if and
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1280.4943 -610.1118 1059.837 cornerB 1274.0736 -619.2064 1069.8279
not actor.Dead($RNDM_HOUSE_WEAPON[32])
    then
    OOS_BUNKER_M60_MOMENT_FLAG = 1
    actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[32],false)
    07DD: set_actor $RNDM_HOUSE_WEAPON[32] attack_rate 100 // previously known as temper_to
    actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[32]) = 35
    actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
    0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
    0226: 0@ = actor $RNDM_HOUSE_WEAPON[32] health
    0@ *= 2
    actor.Health($RNDM_HOUSE_WEAPON[32]) = 0@
    08AF: set_actor $RNDM_HOUSE_WEAPON[32] max_health_to 0@
    0946: set_actor $RNDM_HOUSE_WEAPON[32] actions_uninterupted_by_weapon_fire 1
    093B: set_actor $RNDM_HOUSE_WEAPON[32] upper_body_damage_anims_only 1
    099F: AS_actor $RNDM_HOUSE_WEAPON[32] ignore_weapon_range 1
    0ED9: set_char_ignore_damage_anims $RNDM_HOUSE_WEAPON[32] 1
    0648: unknown_actor $RNDM_HOUSE_WEAPON[32] task_set 1000.0 // float
    09F4: set_actor $RNDM_HOUSE_WEAPON[32] ignore_height_difference_following_nodes 1
    0350: set_actor $RNDM_HOUSE_WEAPON[32] maintain_position_when_attacked 1
    0816: set_actor $RNDM_HOUSE_WEAPON[32] dont_chase_victim 1
    085B: AS_actor $RNDM_HOUSE_WEAPON[32] set_kinda_stay_in_same_place 1
    end
    
if and
0800:   in_two_players_mode
056D:   actor COOP_ACTOR defined
    then
    if and
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1280.4943 -610.1118 1059.837 cornerB 1274.0736 -619.2064 1069.8279
    not actor.Dead($RNDM_HOUSE_WEAPON[32])
        then
        OOS_BUNKER_M60_MOMENT_FLAG = 1
        actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[32],false)
        07DD: set_actor $RNDM_HOUSE_WEAPON[32] attack_rate 100 // previously known as temper_to
        actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[32]) = 35
        actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
        0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
        0226: 0@ = actor $RNDM_HOUSE_WEAPON[32] health
        0@ *= 2
        actor.Health($RNDM_HOUSE_WEAPON[32]) = 0@
        08AF: set_actor $RNDM_HOUSE_WEAPON[32] max_health_to 0@
        0946: set_actor $RNDM_HOUSE_WEAPON[32] actions_uninterupted_by_weapon_fire 1
        093B: set_actor $RNDM_HOUSE_WEAPON[32] upper_body_damage_anims_only 1
        099F: AS_actor $RNDM_HOUSE_WEAPON[32] ignore_weapon_range 1
        0ED9: set_char_ignore_damage_anims $RNDM_HOUSE_WEAPON[32] 1
        0648: unknown_actor $RNDM_HOUSE_WEAPON[32] task_set 1000.0 // float
        09F4: set_actor $RNDM_HOUSE_WEAPON[32] ignore_height_difference_following_nodes 1
        0350: set_actor $RNDM_HOUSE_WEAPON[32] maintain_position_when_attacked 1
        0816: set_actor $RNDM_HOUSE_WEAPON[32] dont_chase_victim 1
        085B: AS_actor $RNDM_HOUSE_WEAPON[32] set_kinda_stay_in_same_place 1
        end
    end    
else
if and
0800:   in_two_players_mode
056D:   actor COOP_ACTOR defined
not actor.Dead($RNDM_HOUSE_WEAPON[32])
    then   
    TEMPVAR_INT = 30
    008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
    0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
    008C: TEMPVAR_INT = float TEMPVAR_INT to_integer 
    if
    0E45: frame_mod TEMPVAR_INT
        then
        
        if
        0E4D: random_percent 50
        then
        actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
        0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor COOP_ACTOR
        else
        actor.StorePos($RNDM_HOUSE_WEAPON[32],4@,5@,6@)
        0637: AS_actor $RNDM_HOUSE_WEAPON[32] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
        end
                
        end    
    end    
end

if
OOS_BUNKER_FLAME_MOMENT_FLAG == 0
then
if
not actor.Dead($RNDM_HOUSE_WEAPON[42])
    then
    if or
    051A:   actor $RNDM_HOUSE_WEAPON[42] damaged_by_actor PLAYER_ACTOR
    00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1249.7538 -580.2906 1060.6051 cornerB 1240.2012 -594.7291 1066.7755
        then
        OOS_BUNKER_FLAME_MOMENT_FLAG = 1
        actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[42],false)
        07DD: set_actor $RNDM_HOUSE_WEAPON[42] attack_rate 100 // previously known as temper_to
        actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[42]) = 35
        actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
    //    0637: AS_actor $RNDM_HOUSE_WEAPON[42] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
        0668: AS_actor $RNDM_HOUSE_WEAPON[42] rotate_and_shoot_at 4@ 5@ 6@ 20000 ms
        0226: 0@ = actor $RNDM_HOUSE_WEAPON[42] health
        0@ *= 2
        actor.Health($RNDM_HOUSE_WEAPON[42]) = 0@
        08AF: set_actor $RNDM_HOUSE_WEAPON[42] max_health_to 0@
        02AB: set_actor $RNDM_HOUSE_WEAPON[42] immunities BP 0 FP 1 EP 0 CP 0 MP 1
        0946: set_actor $RNDM_HOUSE_WEAPON[42] actions_uninterupted_by_weapon_fire 1
        093B: set_actor $RNDM_HOUSE_WEAPON[42] upper_body_damage_anims_only 1
        099F: AS_actor $RNDM_HOUSE_WEAPON[42] ignore_weapon_range 1
        0ED9: set_char_ignore_damage_anims $RNDM_HOUSE_WEAPON[42] 1
        0648: unknown_actor $RNDM_HOUSE_WEAPON[42] task_set 1000.0 // float
        09F4: set_actor $RNDM_HOUSE_WEAPON[42] ignore_height_difference_following_nodes 1
        0350: set_actor $RNDM_HOUSE_WEAPON[42] maintain_position_when_attacked 1
        0816: set_actor $RNDM_HOUSE_WEAPON[42] dont_chase_victim 1
        085B: AS_actor $RNDM_HOUSE_WEAPON[42] set_kinda_stay_in_same_place 1
        end
    end
    
if and
0800:   in_two_players_mode
056D:   actor COOP_ACTOR defined
not actor.Dead($RNDM_HOUSE_WEAPON[32])
    then 
    if or
    051A:   actor $RNDM_HOUSE_WEAPON[42] damaged_by_actor COOP_ACTOR
    00A4:   actor COOP_ACTOR sphere 0 in_cube_cornerA 1249.7538 -580.2906 1060.6051 cornerB 1240.2012 -594.7291 1066.7755
        then
        OOS_BUNKER_FLAME_MOMENT_FLAG = 1
        actor.LockInCurrentPosition($RNDM_HOUSE_WEAPON[42],false)
        07DD: set_actor $RNDM_HOUSE_WEAPON[42] attack_rate 100 // previously known as temper_to
        actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[42]) = 35
        actor.StorePos(COOP_ACTOR,4@,5@,6@)
    //    0637: AS_actor $RNDM_HOUSE_WEAPON[42] goto 4@ 5@ 6@ mode 6 turn_radius 1.0 stop_radius 5.0 look_at_actor PLAYER_ACTOR
        0668: AS_actor $RNDM_HOUSE_WEAPON[42] rotate_and_shoot_at 4@ 5@ 6@ 20000 ms
        0226: 0@ = actor $RNDM_HOUSE_WEAPON[42] health
        0@ *= 2
        actor.Health($RNDM_HOUSE_WEAPON[42]) = 0@
        08AF: set_actor $RNDM_HOUSE_WEAPON[42] max_health_to 0@
        02AB: set_actor $RNDM_HOUSE_WEAPON[42] immunities BP 0 FP 1 EP 0 CP 0 MP 1
        0946: set_actor $RNDM_HOUSE_WEAPON[42] actions_uninterupted_by_weapon_fire 1
        093B: set_actor $RNDM_HOUSE_WEAPON[42] upper_body_damage_anims_only 1
        099F: AS_actor $RNDM_HOUSE_WEAPON[42] ignore_weapon_range 1
        0ED9: set_char_ignore_damage_anims $RNDM_HOUSE_WEAPON[42] 1
        0648: unknown_actor $RNDM_HOUSE_WEAPON[42] task_set 1000.0 // float
        09F4: set_actor $RNDM_HOUSE_WEAPON[42] ignore_height_difference_following_nodes 1
        0350: set_actor $RNDM_HOUSE_WEAPON[42] maintain_position_when_attacked 1
        0816: set_actor $RNDM_HOUSE_WEAPON[42] dont_chase_victim 1
        085B: AS_actor $RNDM_HOUSE_WEAPON[42] set_kinda_stay_in_same_place 1
        end
    end    
    
else

if and
0800:   in_two_players_mode
056D:   actor COOP_ACTOR defined
not actor.Dead($RNDM_HOUSE_WEAPON[32])
    then 
    TEMPVAR_INT = 15
    008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
    0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
    008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
    if
    0E45: frame_mod TEMPVAR_INT
        then
        
        if
        0E4D: random_percent 50
        then
        actor.StorePos(COOP_ACTOR,4@,5@,6@)
        0668: AS_actor $RNDM_HOUSE_WEAPON[42] rotate_and_shoot_at 4@ 5@ 6@ 20000 ms
        else
        actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
        0668: AS_actor $RNDM_HOUSE_WEAPON[42] rotate_and_shoot_at 4@ 5@ 6@ 20000 ms
        end
        
        end 
    else

    TEMPVAR_INT = 15
    008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
    0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
    008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
    if and
    not actor.Dead($RNDM_HOUSE_WEAPON[42])
    0E45: frame_mod TEMPVAR_INT
        then
        actor.StorePos(PLAYER_ACTOR,4@,5@,6@)
        0668: AS_actor $RNDM_HOUSE_WEAPON[42] rotate_and_shoot_at 4@ 5@ 6@ 20000 ms
        end  
    
    end
      
end

random_int 11@ 0 5
random_int 0@ 26 54
gosub @OOS_BUNKER_FIGHTERS_TEAMMATES_ATTACK_PEOPLE1

if
OOS_ACT_PHRASE288_FLAG == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 1282.0425 -715.5222 1061.8241 radius 5.0 5.0 2.0
    then
    OOS_ACT_PHRASE288_FLAG = 1
    v$ST_DIALOG[0] = "END288"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end
end

if
OOS_ACT_PHRASE289_FLAG == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 1278.1244 -670.2421 1061.8241 radius 5.0 5.0 2.0
    then
    OOS_ACT_PHRASE289_FLAG = 1
    v$ST_DIALOG[0] = "END289"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end
end

if
OOS_ACT_PHRASE290_FLAG == 0
then
if
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere 1280.4313 -613.1785 1061.837 radius 5.0 5.0 2.0
    then
    OOS_ACT_PHRASE290_FLAG = 1
    v$ST_DIALOG[0] = "END290"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end
end

TEMPVAR_INT = 15
008D: TEMPVAR_INT = integer TEMPVAR_INT to_float
0069: TEMPVAR_INT *= GENERAL_FPS_TIMER_DIVIDER2 // (float)
008C: TEMPVAR_INT = float TEMPVAR_INT to_integer
if
0E45: frame_mod TEMPVAR_INT
then

for 0@ = 26 to 53
if
056D:   actor $RNDM_HOUSE_WEAPON[0@] defined
    then
    if and
    0184:   actor $RNDM_HOUSE_WEAPON[0@] health > 0
    82E0: not  actor $RNDM_HOUSE_WEAPON[0@] firing_weapon
    8E46: not is_char_using_gun $RNDM_HOUSE_WEAPON[0@]
    8E42: not is_char_doing_task_id $RNDM_HOUSE_WEAPON[0@] 1023
        then
            
        if
        0E4D: random_percent 50
        then        
        if
        056D:   actor COOP_ACTOR defined        
            then            
            if
            0E4D: random_percent 50
                then
                008B: 3@ = COOP_ACTOR // (int)
                else
                008B: 3@ = PLAYER_ACTOR // (int)
                end            
            else
            008B: 3@ = PLAYER_ACTOR // (int)
            end        
        else
        random_int 2@ 41 46
        008B: 3@ = $CREATURE[2@] // (int) 
        end
        
        if and
        056D:   actor 3@ defined
        not 3@ == -69
            then    
            if or
            0364:   actor 3@ spotted_actor $RNDM_HOUSE_WEAPON[0@]
            0364:   actor $RNDM_HOUSE_WEAPON[0@] spotted_actor 3@
            051A:   actor $RNDM_HOUSE_WEAPON[0@] damaged_by_actor 3@
                then
                0350: set_actor $RNDM_HOUSE_WEAPON[0@] maintain_position_when_attacked 0
                07A5: AS_actor $RNDM_HOUSE_WEAPON[0@] attack_actor 3@ time 3000
                end
            end    
        end
    end
end

end    

return

:OOS_ACT_CREATE_GARNET_GROUP

while not model.Available($CAMP_MODEL1[0])
wait 0
model.Load($CAMP_MODEL1[0])
mload
end

OOS_ACT_GARNET_RESIDENT1 = actor.CreateAsPassenger(26,$CAMP_MODEL1[0],OOS_START_BUS,0)
0631: put_actor OOS_ACT_GARNET_RESIDENT1 in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_GARNET_RESIDENT1 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON1[0] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET_RESIDENT1,$CAMP_WEAPON1[0],99999)

while not model.Available($CAMP_MODEL2[0])
wait 0
model.Load($CAMP_MODEL2[0])
mload
end

OOS_ACT_GARNET_RESIDENT2 = actor.CreateAsPassenger(26,$CAMP_MODEL2[0],OOS_START_BUS,1)
0631: put_actor OOS_ACT_GARNET_RESIDENT2 in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_GARNET_RESIDENT2 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON2[0] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET_RESIDENT2,$CAMP_WEAPON2[0],99999)

while not model.Available($CAMP_MODEL5[0])
wait 0
model.Load($CAMP_MODEL5[0])
mload
end

OOS_ACT_GARNET_RESIDENT3 = actor.CreateAsPassenger(26,$CAMP_MODEL5[0],OOS_START_BUS,2)
0631: put_actor OOS_ACT_GARNET_RESIDENT3 in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_GARNET_RESIDENT3 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON5[0] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET_RESIDENT3,$CAMP_WEAPON5[0],99999)

while not model.Available($CAMP_MODEL4[0])
wait 0
model.Load($CAMP_MODEL4[0])
mload
end

OOS_ACT_GARNET_RESIDENT4 = actor.CreateAsPassenger(26,$CAMP_MODEL4[0],OOS_START_BUS,3)
0631: put_actor OOS_ACT_GARNET_RESIDENT4 in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_GARNET_RESIDENT4 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON4[0] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET_RESIDENT4,$CAMP_WEAPON4[0],99999)

while not model.Available($CAMP_MODEL7[0])
wait 0
model.Load($CAMP_MODEL7[0])
mload
end

OOS_ACT_GARNET_RESIDENT5 = actor.CreateAsPassenger(26,$CAMP_MODEL7[0],OOS_START_BUS,4)
0631: put_actor OOS_ACT_GARNET_RESIDENT5 in_group OOS_ACT_GARNET_GROUP
087F: set_actor OOS_ACT_GARNET_RESIDENT5 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON7[0] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET_RESIDENT5,$CAMP_WEAPON7[0],99999)

return

:OOS_ACT_CREATE_ENKER_GROUP

while not model.Available($CAMP_MODEL1[1])
wait 0
model.Load($CAMP_MODEL1[1])
mload
end

OOS_ACT_ENKER_RESIDENT1 = actor.CreateAsPassenger(26,$CAMP_MODEL1[1],OOS_START_BUS,0)
0631: put_actor OOS_ACT_ENKER_RESIDENT1 in_group OOS_ACT_ENKER_GROUP
087F: set_actor OOS_ACT_ENKER_RESIDENT1 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON1[1] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER_RESIDENT1,$CAMP_WEAPON1[1],99999)

while not model.Available($CAMP_MODEL2[1])
wait 0
model.Load($CAMP_MODEL2[1])
mload
end

OOS_ACT_ENKER_RESIDENT2 = actor.CreateAsPassenger(26,$CAMP_MODEL2[1],OOS_START_BUS,1)
0631: put_actor OOS_ACT_ENKER_RESIDENT2 in_group OOS_ACT_ENKER_GROUP
087F: set_actor OOS_ACT_ENKER_RESIDENT2 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON1[1] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER_RESIDENT2,$CAMP_WEAPON2[1],99999)

while not model.Available($CAMP_MODEL5[1])
wait 0
model.Load($CAMP_MODEL5[1])
mload
end

OOS_ACT_ENKER_RESIDENT3 = actor.CreateAsPassenger(26,$CAMP_MODEL5[1],OOS_START_BUS,2)
0631: put_actor OOS_ACT_ENKER_RESIDENT3 in_group OOS_ACT_ENKER_GROUP
087F: set_actor OOS_ACT_ENKER_RESIDENT3 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON4[1] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER_RESIDENT3,$CAMP_WEAPON4[1],99999)

while not model.Available($CAMP_MODEL4[1])
wait 0
model.Load($CAMP_MODEL4[1])
mload
end

OOS_ACT_ENKER_RESIDENT4 = actor.CreateAsPassenger(26,$CAMP_MODEL4[1],OOS_START_BUS,3)
0631: put_actor OOS_ACT_ENKER_RESIDENT4 in_group OOS_ACT_ENKER_GROUP
087F: set_actor OOS_ACT_ENKER_RESIDENT4 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON4[1] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER_RESIDENT4,$CAMP_WEAPON4[1],99999)

while not model.Available($CAMP_MODEL7[1])
wait 0
model.Load($CAMP_MODEL7[1])
mload
end

OOS_ACT_ENKER_RESIDENT5 = actor.CreateAsPassenger(26,$CAMP_MODEL7[1],OOS_START_BUS,4)
0631: put_actor OOS_ACT_ENKER_RESIDENT5 in_group OOS_ACT_ENKER_GROUP
087F: set_actor OOS_ACT_ENKER_RESIDENT5 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON7[1] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER_RESIDENT5,$CAMP_WEAPON7[1],99999)

return

:OOS_ACT_CREATE_FERNANDO_ZAM_GROUP

while not model.Available($CAMP_MODEL1[2])
wait 0
model.Load($CAMP_MODEL1[2])
mload
end

OOS_ACT_FERNANDO_FIGTHER1 = actor.CreateAsPassenger(26,$CAMP_MODEL1[2],OOS_START_BUS,0)
0631: put_actor OOS_ACT_FERNANDO_FIGTHER1 in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
087F: set_actor OOS_ACT_FERNANDO_FIGTHER1 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON1[2] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_FERNANDO_FIGTHER1,$CAMP_WEAPON1[2],99999)

while not model.Available($CAMP_MODEL2[2])
wait 0
model.Load($CAMP_MODEL2[2])
mload
end

OOS_ACT_FERNANDO_FIGTHER2 = actor.CreateAsPassenger(26,$CAMP_MODEL2[2],OOS_START_BUS,1)
0631: put_actor OOS_ACT_FERNANDO_FIGTHER2 in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
087F: set_actor OOS_ACT_FERNANDO_FIGTHER2 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON2[2] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_FERNANDO_FIGTHER2,$CAMP_WEAPON2[2],99999)

while not model.Available($CAMP_MODEL5[2])
wait 0
model.Load($CAMP_MODEL5[2])
mload
end

OOS_ACT_FERNANDO_FIGTHER3 = actor.CreateAsPassenger(26,$CAMP_MODEL5[2],OOS_START_BUS,2)
0631: put_actor OOS_ACT_FERNANDO_FIGTHER3 in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
087F: set_actor OOS_ACT_FERNANDO_FIGTHER3 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON3[2] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_FERNANDO_FIGTHER3,$CAMP_WEAPON3[2],99999)

while not model.Available($CAMP_MODEL4[2])
wait 0
model.Load($CAMP_MODEL4[2])
mload
end

OOS_ACT_FERNANDO_FIGTHER4 = actor.CreateAsPassenger(26,$CAMP_MODEL4[2],OOS_START_BUS,3)
0631: put_actor OOS_ACT_FERNANDO_FIGTHER4 in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
087F: set_actor OOS_ACT_FERNANDO_FIGTHER4 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON4[2] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_FERNANDO_FIGTHER4,$CAMP_WEAPON4[2],99999)

while not model.Available($CAMP_MODEL7[2])
wait 0
model.Load($CAMP_MODEL7[2])
mload
end

OOS_ACT_FERNANDO_FIGTHER5 = actor.CreateAsPassenger(26,$CAMP_MODEL7[2],OOS_START_BUS,4)
0631: put_actor OOS_ACT_FERNANDO_FIGTHER5 in_group OOS_ACT_FERNANDO_ZAMESTITEL_GROUP
087F: set_actor OOS_ACT_FERNANDO_FIGTHER5 never_leave_group 1

0781: get_weapon_with_ID $CAMP_WEAPON7[2] model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_FERNANDO_FIGTHER5,$CAMP_WEAPON7[2],99999)
       
return

:OOS_ACT_CREATE_INBUS_LEADERS

while not model.Available(16998)
wait 0
model.Load(16998)
mload
end

OOS_ACT_ARTEMIS = actor.CreateAsPassenger(26,16998,OOS_START_BUS,0) //Артемис    
0D10: set_actor OOS_ACT_ARTEMIS alpha 255 // IF and SET

0781: get_weapon_with_ID 96 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ARTEMIS,96,99999)

while not model.Available(16999)
wait 0
model.Load(16999)
mload
end

OOS_ACT_DANIEL = actor.CreateAsPassenger(26,16999,OOS_START_BUS,1) //Дэниэл    
0D10: set_actor OOS_ACT_DANIEL alpha 255 // IF and SET

0781: get_weapon_with_ID 96 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_DANIEL,96,99999)

while not model.Available(12786)
wait 0
model.Load(12786)
mload
end

OOS_ACT_ENKER = actor.CreateAsPassenger(26,12786,OOS_START_BUS,2) //Энкер    
0D10: set_actor OOS_ACT_ENKER alpha 255 // IF and SET

0781: get_weapon_with_ID 97 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER,97,99999)

while not model.Available(12785)
wait 0
model.Load(12785)
mload
end

OOS_ACT_GARNET = actor.CreateAsPassenger(26,12785,OOS_START_BUS,3) //Гарнет    
0D10: set_actor OOS_ACT_GARNET alpha 255 // IF and SET

0781: get_weapon_with_ID 34 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET,34,99999)

while not model.Available(3245)
wait 0
model.Load(3245)
mload
end

OOS_ACT_FERNANDO_ZAMESTITEL = actor.CreateAsPassenger(26,3245,OOS_START_BUS,4) //Заместитель Фернандо    
0D10: set_actor OOS_ACT_FERNANDO_ZAMESTITEL alpha 255 // IF and SET

0781: get_weapon_with_ID 34 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_FERNANDO_ZAMESTITEL,34,99999)

for 0@ = 23 to 25
08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 3000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 2 2 3 1
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
end

for 0@ = 38 to 39
08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 3000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 2 2 3 1
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
end

return

:OOS_ACT_CREATE_LEADERS_AFTER_WORZAK

while not model.Available(16998)
wait 0
model.Load(16998)
mload
end

OOS_ACT_ARTEMIS = actor.Create(26,16998,1221.9558, -741.1838, 1060.8197) //Артемис    
0D10: set_actor OOS_ACT_ARTEMIS alpha 255 // IF and SET
actor.Angle(OOS_ACT_ARTEMIS) = 78.0

0781: get_weapon_with_ID 96 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ARTEMIS,96,99999)

while not model.Available(16999)
wait 0
model.Load(16999)
mload
end

OOS_ACT_DANIEL = actor.Create(26,16999,1221.9558, -738.1838, 1060.8197) //Дэниэл    
0D10: set_actor OOS_ACT_DANIEL alpha 255 // IF and SET
actor.Angle(OOS_ACT_DANIEL) = 78.0

0781: get_weapon_with_ID 96 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_DANIEL,96,99999)

while not model.Available(12786)
wait 0
model.Load(12786)
mload
end

OOS_ACT_ENKER = actor.Create(26,12786,1221.9558, -739.1838, 1060.8197) //Энкер    
0D10: set_actor OOS_ACT_ENKER alpha 255 // IF and SET
actor.Angle(OOS_ACT_ENKER) = 78.0

0781: get_weapon_with_ID 97 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_ENKER,97,99999)

while not model.Available(12785)
wait 0
model.Load(12785)
mload
end

OOS_ACT_GARNET = actor.Create(26,12785,1221.9558, -740.1838, 1060.8197) //Гарнет    
0D10: set_actor OOS_ACT_GARNET alpha 255 // IF and SET
actor.Angle(OOS_ACT_GARNET) = 78.0

0781: get_weapon_with_ID 34 model_to 1@
while not model.Available(1@)
wait 0
model.Load(1@)
mload
end
actor.GiveWeaponAndAmmo(OOS_ACT_GARNET,34,99999)

while not model.Available(3245)
wait 0
model.Load(3245)
mload
end

for 0@ = 23 to 25

if
not 0@ == 24
then
08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 3500
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 3 2 3
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
0860: link_actor $RNDM_HOUSE_WEAPON[0@] to_interior 5
0E24: fix_char $RNDM_HOUSE_WEAPON[0@] ground 0 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

end

for 0@ = 38 to 39
08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 3500
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 3 2 3
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
0860: link_actor $RNDM_HOUSE_WEAPON[0@] to_interior 5
0E24: fix_char $RNDM_HOUSE_WEAPON[0@] ground 0 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

062F: OOS_ACT_GARNET_GROUP = create_group_type 0
0630: put_actor OOS_ACT_GARNET in_group OOS_ACT_GARNET_GROUP as_leader
07B3: set_group OOS_ACT_GARNET_GROUP give_command 0
0631: put_actor OOS_ACT_ARTEMIS in_group OOS_ACT_GARNET_GROUP
0631: put_actor OOS_ACT_DANIEL in_group OOS_ACT_GARNET_GROUP
0631: put_actor OOS_ACT_ENKER in_group OOS_ACT_GARNET_GROUP
0850: AS_actor OOS_ACT_GARNET follow_actor PLAYER_ACTOR
0850: AS_actor OOS_ACT_ARTEMIS follow_actor PLAYER_ACTOR
0850: AS_actor OOS_ACT_DANIEL follow_actor PLAYER_ACTOR
0850: AS_actor OOS_ACT_ENKER follow_actor PLAYER_ACTOR

return

:OOS_ACT_CREATE_LEADERS_EBAKA_MOMENT

while not model.Available(7974)
wait 0
model.Load(7974)
mload
end

actor.StorePos(OOS_ACT_ARTEMIS,1@,2@,3@)
4@ = actor.Angle(OOS_ACT_ARTEMIS)
actor.DestroyInstantly(OOS_ACT_ARTEMIS)
OOS_ACT_ARTEMIS = actor.Create(26,7974,1@,2@,3@) //Артемис
0D10: set_actor OOS_ACT_ARTEMIS alpha 255 // IF and SET    
actor.Angle(OOS_ACT_ARTEMIS) = 4@

while not model.Available(7975)
wait 0
model.Load(7975)
mload
end

actor.StorePos(OOS_ACT_DANIEL,1@,2@,3@)
4@ = actor.Angle(OOS_ACT_DANIEL)
actor.DestroyInstantly(OOS_ACT_DANIEL)
OOS_ACT_DANIEL = actor.Create(26,7975,1@,2@,3@) //Дэниэл    
0D10: set_actor OOS_ACT_DANIEL alpha 255 // IF and SET
actor.Angle(OOS_ACT_DANIEL) = 4@

while not model.Available(7976)
wait 0
model.Load(7976)
mload
end

actor.StorePos(OOS_ACT_ENKER,1@,2@,3@)
4@ = actor.Angle(OOS_ACT_ENKER)
actor.DestroyInstantly(OOS_ACT_ENKER)
OOS_ACT_ENKER = actor.Create(26,7976,1@,2@,3@) //Энкер    
0D10: set_actor OOS_ACT_ENKER alpha 255 // IF and SET
actor.Angle(OOS_ACT_ENKER) = 4@

while not model.Available(7977)
wait 0
model.Load(7977)
mload
end

actor.StorePos(OOS_ACT_GARNET,1@,2@,3@)
4@ = actor.Angle(OOS_ACT_GARNET)
actor.DestroyInstantly(OOS_ACT_GARNET)
OOS_ACT_GARNET = actor.Create(26,7977,1@,2@,3@) //Гарнет    
0D10: set_actor OOS_ACT_GARNET alpha 255 // IF and SET
actor.Angle(OOS_ACT_GARNET) = 4@

for 0@ = 23 to 25

if
not 0@ == 24
then
08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 1000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 3 2 3
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
0860: link_actor $RNDM_HOUSE_WEAPON[0@] to_interior 5
0E24: fix_char $RNDM_HOUSE_WEAPON[0@] ground 0 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

end

for 0@ = 38 to 39
08C6: set_actor $RNDM_HOUSE_WEAPON[0@] stay_on_bike 1    
actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@],"GANG2")
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0
060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 1000
actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 95
create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371 0 0 0 1 1 3 2 3
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]
0860: link_actor $RNDM_HOUSE_WEAPON[0@] to_interior 5
0E24: fix_char $RNDM_HOUSE_WEAPON[0@] ground 0 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

return

:SPAWN_BUNKER_FIGHERS

///////////////////////////////EXTRA SHIT///////////////////////////////

while not model.Available(3194)
wait 0
model.Load(3194)
mload
end

$RNDM_HOUSE_WEAPON[26] = actor.Create(25,3194,1251.9735, -724.7789, 1061.8241)
actor.Angle($RNDM_HOUSE_WEAPON[26]) = 177.4185

while not model.Available(3195)
wait 0
model.Load(3195)
mload
end

$RNDM_HOUSE_WEAPON[27] = actor.Create(25,3195,1254.9517, -728.6545, 1061.8241)
actor.Angle($RNDM_HOUSE_WEAPON[27]) = 320.0845

while not model.Available(3196)
wait 0
model.Load(3196)
mload
end

$RNDM_HOUSE_WEAPON[28] = actor.Create(25,3196,1285.5237, -681.5416, 1061.8241)
actor.Angle($RNDM_HOUSE_WEAPON[28]) = 180.0

while not model.Available(3197)
wait 0
model.Load(3197)
mload
end

$RNDM_HOUSE_WEAPON[29] = actor.Create(25,3197,1275.9303, -650.7012, 1061.8297)
actor.Angle($RNDM_HOUSE_WEAPON[29]) = 180.4406

while not model.Available(3198)
wait 0
model.Load(3198)
mload
end

$RNDM_HOUSE_WEAPON[30] = actor.Create(25,3198,1272.9175, -650.7038, 1061.8297)
actor.Angle($RNDM_HOUSE_WEAPON[30]) = 180.4406

while not model.Available(3199)
wait 0
model.Load(3199)
mload
end

$RNDM_HOUSE_WEAPON[31] = actor.Create(25,3199,1278.1746, -716.1375, 1061.8241)
actor.Angle($RNDM_HOUSE_WEAPON[31]) = 108.0

while not model.Available(3209)
wait 0
model.Load(3209)
mload
end

$RNDM_HOUSE_WEAPON[32] = actor.Create(25,3209,1287.4946, -587.5588, 1061.8197)
actor.Angle($RNDM_HOUSE_WEAPON[32]) = 108.0 //GUNSMITH

while not model.Available(15014)
wait 0
model.Load(15014)
mload
end

if
MAIN_QUEST6_COMPLETED_FLAG == 1
then

$RNDM_HOUSE_WEAPON[33] = actor.Create(25,15014,1273.5076, -575.6003, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[33]) = 0.0

while not model.Available(15014)
wait 0
model.Load(15014)
mload
end

$RNDM_HOUSE_WEAPON[34] = actor.Create(25,15014,1269.2981, -575.8983, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[34]) = 0.0

while not model.Available(15014)
wait 0
model.Load(15014)
mload
end

$RNDM_HOUSE_WEAPON[35] = actor.Create(25,15014,1266.5325, -575.831, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[35]) = 0.0

while not model.Available(15014)
wait 0
model.Load(15014)
mload
end

$RNDM_HOUSE_WEAPON[36] = actor.Create(25,15014,1263.8416, -575.7925, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[36]) = 0.0

else

while not model.Available(3208)
wait 0
model.Load(3208)
mload
end

$RNDM_HOUSE_WEAPON[33] = actor.Create(25,3208,1273.5076, -575.6003, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[33]) = 0.0

while not model.Available(3207)
wait 0
model.Load(3207)
mload
end

$RNDM_HOUSE_WEAPON[34] = actor.Create(25,3207,1269.2981, -575.8983, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[34]) = 0.0

while not model.Available(3206)
wait 0
model.Load(3206)
mload
end

$RNDM_HOUSE_WEAPON[35] = actor.Create(25,3206,1266.5325, -575.831, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[35]) = 0.0

while not model.Available(3205)
wait 0
model.Load(3205)
mload
end

$RNDM_HOUSE_WEAPON[36] = actor.Create(25,3205,1263.8416, -575.7925, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[36]) = 0.0

end

while not model.Available(3200)
wait 0
model.Load(3200)
mload
end

$RNDM_HOUSE_WEAPON[37] = actor.Create(25,3200,1193.5428, -669.5184, 1061.8314)
actor.Angle($RNDM_HOUSE_WEAPON[37]) = 275.0

while not model.Available(3201)
wait 0
model.Load(3201)
mload
end

$RNDM_HOUSE_WEAPON[38] = actor.Create(25,3201,1221.7556, -643.2932, 1061.8219)
actor.Angle($RNDM_HOUSE_WEAPON[38]) = 273.0

while not model.Available(3202)
wait 0
model.Load(3202)
mload
end

$RNDM_HOUSE_WEAPON[39] = actor.Create(25,3202,1245.5759, -608.114, 1061.8197)
actor.Angle($RNDM_HOUSE_WEAPON[39]) = 357.0

while not model.Available(3203)
wait 0
model.Load(3203)
mload
end

$RNDM_HOUSE_WEAPON[40] = actor.Create(25,3203,1259.9254, -604.1364, 1061.8197)
actor.Angle($RNDM_HOUSE_WEAPON[40]) = 40.0

while not model.Available(3204)
wait 0
model.Load(3204)
mload
end

$RNDM_HOUSE_WEAPON[41] = actor.Create(25,3204,1253.7362, -606.5023, 1061.8197)
actor.Angle($RNDM_HOUSE_WEAPON[41]) = 22.0

while not model.Available(3210)
wait 0
model.Load(3210)
mload
end

$RNDM_HOUSE_WEAPON[42] = actor.Create(25,3210,1242.0105, -588.6971, 1061.8197)
actor.Angle($RNDM_HOUSE_WEAPON[42]) = 278.0 //DUOCHIEF
02AB: set_actor $RNDM_HOUSE_WEAPON[42] immunities BP 0 FP 1 EP 0 CP 0 MP 1

while not model.Available(3205)
wait 0
model.Load(3205)
mload
end

$RNDM_HOUSE_WEAPON[43] = actor.Create(25,3205,1288.7975, -721.0201, 1061.8241)
actor.Angle($RNDM_HOUSE_WEAPON[43]) = 90.1131

while not model.Available(3206)
wait 0
model.Load(3206)
mload
end

$RNDM_HOUSE_WEAPON[44] = actor.Create(25,3206,1288.7975, -718.4708, 1061.8241)
actor.Angle($RNDM_HOUSE_WEAPON[44]) = 87.2082

while not model.Available(3207)
wait 0
model.Load(3207)
mload
end

$RNDM_HOUSE_WEAPON[45] = actor.Create(25,3207,1261.8136, -645.8674, 1061.8297)
actor.Angle($RNDM_HOUSE_WEAPON[45]) = 245.9475

while not model.Available(3208)
wait 0
model.Load(3208)
mload
end

$RNDM_HOUSE_WEAPON[46] = actor.Create(25,3208,1262.3237, -650.4697, 1061.8297)
actor.Angle($RNDM_HOUSE_WEAPON[46]) = 270.9715

while not model.Available(3194)
wait 0
model.Load(3194)
mload
end

$RNDM_HOUSE_WEAPON[47] = actor.Create(25,3194,1279.1719, -577.0355, 1061.8203)
actor.Angle($RNDM_HOUSE_WEAPON[47]) = 271.2705

while not model.Available(3195)
wait 0
model.Load(3195)
mload
end

$RNDM_HOUSE_WEAPON[48] = actor.Create(25,3195,1274.8885, -566.2491, 1065.8203)
actor.Angle($RNDM_HOUSE_WEAPON[48]) = 257.8503

while not model.Available(3196)
wait 0
model.Load(3196)
mload
end

$RNDM_HOUSE_WEAPON[49] = actor.Create(25,3196,1264.5272, -595.5447, 1061.8197)
actor.Angle($RNDM_HOUSE_WEAPON[49]) = 74.2769

while not model.Available(3197)
wait 0
model.Load(3197)
mload
end

$RNDM_HOUSE_WEAPON[50] = actor.Create(25,3197,1246.6747, -640.2643, 1061.8219)
actor.Angle($RNDM_HOUSE_WEAPON[50]) = 359.7656

while not model.Available(3198)
wait 0
model.Load(3198)
mload
end

$RNDM_HOUSE_WEAPON[51] = actor.Create(25,3198,1218.2362, -665.4844, 1061.8314)
actor.Angle($RNDM_HOUSE_WEAPON[51]) = 354.8127

while not model.Available(3199)
wait 0
model.Load(3199)
mload
end

$RNDM_HOUSE_WEAPON[52] = actor.Create(25,3199,1223.1743, -665.2431, 1061.8314)
actor.Angle($RNDM_HOUSE_WEAPON[52]) = 180.4964

while not model.Available(3200)
wait 0
model.Load(3200)
mload
end

$RNDM_HOUSE_WEAPON[53] = actor.Create(25,3200,1253.299, -610.295, 1061.837)
actor.Angle($RNDM_HOUSE_WEAPON[53]) = 178.6305

/////////////////////////////////////////////////////////////////////////////////
  
for 0@ = 26 to 53 
Actor.SetWalkStyle($RNDM_HOUSE_WEAPON[0@], "GANG2")

gosub @BANDITS_ZONE_RANDOM_HP

3@ *= 4
actor.Health($RNDM_HOUSE_WEAPON[0@]) = 3@

081A: set_actor $RNDM_HOUSE_WEAPON[0@] weapon_skill_to 1

gosub @BAMDITS_ZONE_RANDOM_ACQ

Actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 3@

060B: set_actor $RNDM_HOUSE_WEAPON[0@] decision_maker_to $DEC_PEOPLE
0446: set_actor $RNDM_HOUSE_WEAPON[0@] dismemberment_possible 0   
0946: set_actor $RNDM_HOUSE_WEAPON[0@] actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
099F: AS_actor $RNDM_HOUSE_WEAPON[0@] ignore_weapon_range 1
04D8: set_actor $RNDM_HOUSE_WEAPON[0@] drowns_in_water 0
0E24: fix_char $RNDM_HOUSE_WEAPON[0@] ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
0648: unknown_actor $RNDM_HOUSE_WEAPON[0@] task_set 1000.0 // float
09F4: set_actor $RNDM_HOUSE_WEAPON[0@] ignore_height_difference_following_nodes 1

0350: set_actor $RNDM_HOUSE_WEAPON[0@] maintain_position_when_attacked 1
0816: set_actor $RNDM_HOUSE_WEAPON[0@] dont_chase_victim 1

if or
$FREEMODE == 1
$GAMEMODE_WAR == 1
then

random_int 1@ 0 6
if
not 1@ == 3
then
087E: set_actor $RNDM_HOUSE_WEAPON[0@] weapon_droppable 0
end

end

0781: get_weapon_with_ID 46 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

create_thread @PED_BKP $RNDM_HOUSE_WEAPON[0@] 371
create_thread @ANT_PRE $RNDM_HOUSE_WEAPON[0@]

if and
0@ < 11
not OOS_MARK == 156547
then

///////////////////////////////////////////////////////////

if
0E4D: random_percent 50
then

0781: get_weapon_with_ID 97 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],97,99999)

else

0781: get_weapon_with_ID 96 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],96,99999)

end

///////////////////////////////////////////////////////////

else

if
not OOS_MARK == 156547
then

random_int 1@ 0 4
if
1@ == 0
then
1@ = 82
end

if
1@ == 1
then
1@ = 88
end

if
1@ == 2
then
1@ = 95
end

if
1@ == 3
then
1@ = 101
end

else

04DD: 3@ = actor $RNDM_HOUSE_WEAPON[0@] armour

if
3@ > 0
then

0851: set_actor $RNDM_HOUSE_WEAPON[0@] decrease_health_by 1 affect_armour 1

random_int 1@ 0 3
if
1@ == 0
then
1@ = 96
end

if
1@ == 1
then
1@ = 97
end

if
1@ == 2
then
1@ = 80
end

else

random_int 1@ 0 7
if
1@ == 0
then
1@ = 85
end

if
1@ == 1
then
1@ = 105
end

if
1@ == 2
then
1@ = 99
end

if
1@ == 3
then
1@ = 30
end

if
1@ == 4
then
1@ = 86
end

if
1@ == 5
then
1@ = 29
end

if
1@ == 6
then
1@ = 24
end

end

end
   
0085: 2@ = 1@ // (int)

0781: get_weapon_with_ID 1@ model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],2@,99999)

end
 
end

/////////////////////////////////////////////////////////////////////////////////

if
MAIN_QUEST6_COMPLETED_FLAG == 0
then
//ass
else

0781: get_weapon_with_ID 94 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

for 0@ = 33 to 36
actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[0@],94,99999)
Actor.WeaponAccuracy($RNDM_HOUSE_WEAPON[0@]) = 15
end

end

/////////////////////////////////////////////////////////////////////////////////

0781: get_weapon_with_ID 70 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[32],70,99999)

0781: get_weapon_with_ID 37 model_to 1@

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

actor.GiveWeaponAndAmmo($RNDM_HOUSE_WEAPON[42],37,99999)

/////////////////////////////////////////////////////////////////////////////////

return

:RANDOM_DIALOG_ATTACK_VORZAK
random_int 0@ 294 299
v$PHRASE1 = "ENB" // v$ // Sunday
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2 // all string variables
return

:CHECK_LEADER_FOR_OTSEBYATINA_TASKS

if or
82A0: not  actor OOS_ACT_ENKER stopped
82A0: not  actor OOS_ACT_GARNET stopped
82A0: not  actor OOS_ACT_FERNANDO_ZAMESTITEL stopped
82A0: not  actor OOS_ACT_ARTEMIS stopped
82A0: not  actor OOS_ACT_DANIEL stopped
then

if
8EEA: not locate_char_distance_to_coordinates OOS_ACT_ENKER pos 1520.5262 -421.239 33.4823 radius 7.5
then
05B9: AS_actor OOS_ACT_ENKER stay_idle 999999 ms
0638: AS_actor OOS_ACT_ENKER stay_put 1
end

if
8EEA: not locate_char_distance_to_coordinates OOS_ACT_GARNET pos 1520.5262 -421.239 33.4823 radius 7.5
then
05B9: AS_actor OOS_ACT_GARNET stay_idle 999999 ms
0638: AS_actor OOS_ACT_GARNET stay_put 1
end

if
8EEA: not locate_char_distance_to_coordinates OOS_ACT_FERNANDO_ZAMESTITEL pos 1520.5262 -421.239 33.4823 radius 7.5
then
05B9: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL stay_idle 999999 ms
0638: AS_actor OOS_ACT_FERNANDO_ZAMESTITEL stay_put 1
end

if and
8EEA: not locate_char_distance_to_coordinates OOS_ACT_ARTEMIS pos 1520.5262 -421.239 33.4823 radius 7.5
8EEA: not locate_char_distance_to_coordinates OOS_ACT_ARTEMIS pos 1516.3606 -419.5305 33.5124 radius 3.0
then
05B9: AS_actor OOS_ACT_ARTEMIS stay_idle 999999 ms
0638: AS_actor OOS_ACT_ARTEMIS stay_put 1
end

if and
8EEA: not locate_char_distance_to_coordinates OOS_ACT_DANIEL pos 1520.5262 -421.239 33.4823 radius 7.5
8EEA: not locate_char_distance_to_coordinates OOS_ACT_DANIEL pos 1516.3606 -419.5305 33.5124 radius 3.0
then
05B9: AS_actor OOS_ACT_DANIEL stay_idle 999999 ms
0638: AS_actor OOS_ACT_DANIEL stay_put 1
end

//0AD1: show_formatted_text_highpriority "ANTI HER ON" time 250
end

return

:OOS_LEADERS_GO_CLIMB

//Enker
0615: define_AS_pack_begin 1@
05D3: AS_actor -1 goto_point 1220.2651 -724.4925 1061.8197 mode 7 time 3500 ms // versionA
05D4: AS_actor -1 rotate_angle 270.0 
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1221.5365 -723.8511 1063.4412 mode 6 time 3500 ms // versionA
05D4: AS_actor -1 rotate_angle 0.0  
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1221.6384 -720.1609 1065.8409 mode 6 time 3500 ms // versionA  
0616: define_AS_pack_end 1@

//Garnet
0615: define_AS_pack_begin 10@
05D3: AS_actor -1 goto_point 1220.382 -724.9198 1061.8197 mode 7 time 3500 ms // versionA
05D4: AS_actor -1 rotate_angle 270.0 
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1221.5365 -723.8511 1063.4412 mode 6 time 3500 ms // versionA
05D4: AS_actor -1 rotate_angle 180.0  
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1221.4161 -726.9033 1065.6639 mode 6 time 3500 ms // versionA  
0616: define_AS_pack_end 10@

//Artemis
0615: define_AS_pack_begin 2@
05D3: AS_actor -1 goto_point 1188.5149 -754.2706 1061.8197 mode 7 time 3500 ms // versionA
05D4: AS_actor -1 rotate_angle 180.8733
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1188.0907 -756.0675 1064.261 mode 6 time 5500 ms // versionA
//078F: AS_actor -1 climb 1
//05D3: AS_actor -1 goto_point 1182.0098 -756.0961 1066.7268 mode 7 time 3500 ms // versionA 
04EB: AS_actor -1 crouch 1 
0616: define_AS_pack_end 2@

//Daniel
0615: define_AS_pack_begin 20@
05D3: AS_actor -1 goto_point 1193.4603 -754.9067 1061.8197 mode 7 time 3500 ms // versionA
05D4: AS_actor -1 rotate_angle 180.8733
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1193.3896 -756.764 1064.261 mode 6 time 5500 ms // versionA
//078F: AS_actor -1 climb 1
//05D3: AS_actor -1 goto_point 1181.1486 -756.0635 1066.7268 mode 7 time 3500 ms // versionA 
04EB: AS_actor -1 crouch 1 
0616: define_AS_pack_end 20@

0615: define_AS_pack_begin 3@
05D3: AS_actor -1 goto_point 1204.5635 -743.9371 1061.8197 mode 7 time 2500 ms // versionA
05BC: AS_actor -1 jump 1
078F: AS_actor -1 climb 1
05D3: AS_actor -1 goto_point 1203.0562 -739.9301 1063.0699 mode 7 time 2500 ms // versionA 
04EB: AS_actor -1 crouch 1 
0616: define_AS_pack_end 3@

06C9: remove_actor OOS_ACT_ENKER from_group
0687: clear_actor OOS_ACT_ENKER task
0856: set_actor OOS_ACT_ENKER enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_ENKER

06C9: remove_actor OOS_ACT_GARNET from_group
0687: clear_actor OOS_ACT_GARNET task
0856: set_actor OOS_ACT_GARNET enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_GARNET

06C9: remove_actor OOS_ACT_ARTEMIS from_group
0687: clear_actor OOS_ACT_ARTEMIS task
0856: set_actor OOS_ACT_ARTEMIS enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_ARTEMIS 

06C9: remove_actor OOS_ACT_DANIEL from_group
0687: clear_actor OOS_ACT_DANIEL task
0856: set_actor OOS_ACT_DANIEL enable_crouch 0
0792: disembark_instantly_actor OOS_ACT_DANIEL 

0632: release_group OOS_ACT_GARNET_GROUP

for 0@ = 26 to 33
0618: assign_actor $RNDM_HOUSE_WEAPON[0@] to_AS_pack 3@
end

0618: assign_actor OOS_ACT_ENKER to_AS_pack 1@
0618: assign_actor OOS_ACT_GARNET to_AS_pack 10@
0618: assign_actor OOS_ACT_ARTEMIS to_AS_pack 2@
0618: assign_actor OOS_ACT_DANIEL to_AS_pack 20@

061B: remove_references_to_AS_pack 1@
061B: remove_references_to_AS_pack 10@
061B: remove_references_to_AS_pack 2@
061B: remove_references_to_AS_pack 20@
061B: remove_references_to_AS_pack 3@

return