const
ZA_ARIADNA_VAGON_OBJECT = 28@
ZA_ARIADNA_VAGON_GORSHOK = 27@
ZA_ARIADNA_VAGON_GORSHOK_DRIVER = 26@
ZA_ARIADNA_LIFT_OBJECT = $EXTRA_REWARD_Q5_INIT
ZA_ARIADNA_LIFT_DOOR1 = $JS_DLC_MISSION_TIMER
ZA_ARIADNA_LIFT_DOOR2 = $JS_DLC_MISSION_TIMER2
ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED = 0.02
ZA_ARIADNA_LIFT_SPEED = 0.18
ZA_ARIADNA_GOT_KEYCARD_FLAG = $ZOMBIEGEDDON_PATH_CAR
ZA_ARIADNA_KEYCARD_NUM = $CARMA_GLOB_RACE_LENGHT
ZA_ARIADNA_CARDREADER1_BROKEN_FLAG = $ZOMBIEGEDDON_PATH_CAR
ZA_ARIADNA_CARDREADER2_BROKEN_FLAG = $CARMA_GLOB_RACE_LENGHT
ZA_ARIADNA_CARDREADER1_BROKEN_TRIES = $CAMP_RAID_BANDITS_C
ZA_ARIADNA_CARDREADER2_BROKEN_TRIES = $ZOMBEGEDDON_TOURNAMENT
ZA_ARIADNA_CARDREADER1_SOUND = $ZOMBIEGEDDON_PATH_CAR2
ZA_ARIADNA_CARDREADER2_SOUND = $CARMA_GLOB_TIME_MULT
ZA_ARIADNA_CARDREADER1_DUMMY = $TRADER_SAVE_USLUGA
ZA_ARIADNA_CARDREADER2_DUMMY = $ANNA_FLAG_PREV
ZA_ARIADNA_CARDREADER_LEAVED_FLAG = $TALK_ASKED_SOME_FLAG
ZA_ARIADNA_ZAVAL_DUMMY = $TIM_HEALTH
ZA_ARIADNA_ZAVAL_MUSIC = $WEAPON_DAMAGE[26]
ZA_ARIADNA_ARMY_ZOMBIE = $ARMY69_2[0]
ZA_ARIADNA_CHECKPOINT = $ARMY69_2[0]
ARIADNA_FPS_LIMIT_FLAG = $DELITEL
end

:ARIADNA
thread 'ARIANDA'

if or
UNITED_MAP == 1
CLASSIC_CARMA_MAP >= 1
    then
    end_thread
    end

repeat
wait 250
until MAIN_QUEST9_COMPLETED_FLAG == 1

v$ACHIEVEMNT = "SFQ10B"
$GQUEST_GOT_FLAG = 1                             
0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ10GT"
$GQST_SLCTD_RGIN = 4
$GQEST_SLCTD_QST = 10

create_thread @ARI_PHR
0AF1: write_int 0 to_ini_file "saves\ZACM.set" section "SCR" key "ARIADNA_CHECKPOINT"

:ARIADNA_START

while true
wait 0

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
0AB0:   key_pressed 81
then
jump to @ARIDNA_SKIP1_JUMP
end

if and
PLAYER_IN_CANALS_FLAG == 1
$ONMISSION == 0
    then
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1989.6842 733.5753 1028.5234 radius 30.0
        then                
        0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1989.096069 733.146423 1028.826538 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0        
        
        if and
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1989.6842 733.5753 1028.5234 radius 2.0
        SHOW_HINTS_FLAG == 1        
        then
        0512: show_permanent_text_box 'GME1493'
        else
        if
        0A2A:   text_box 'GME1493' displayed
            then
            text.RemoveTextBox()
            end
        end
        
        if and
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1989.6842 733.5753 1028.5234 radius 2.0
        02A0:   actor PLAYER_ACTOR stopped
        0AB0:   key_pressed $KEY_USE        
            then
            
            :ARIDNA_SKIP1_JUMP
            
            if
            0A2A:   text_box 'GME1493' displayed
            then
            text.RemoveTextBox()
            end
            
            player.CanMove(PLAYER_CHAR,false)
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            actor.PutAtNoOffset(PLAYER_ACTOR,-1978.5039, 733.525, 1028.5828)
            actor.Angle(PLAYER_ACTOR) = 271.7334
            camera.Restore_WithJumpCut()
            DO_NOT_SPAWN_CANNIBALS = 1
            gosub @ARIADNA_TP_TEAMMATES
            
            if
            CANNIBALS_SHIELD_FLAG > 0
            then
            014F: stop_timer CANNIBALS_SHIELD_FLAG
            CANNIBALS_SHIELD_FLAG = -1
            DO_NOT_SPAWN_CANNIBALS = 0
            end
            
            for 0@ = 0 to 39
            $ARMY69_2_MARKER_FLAG[0@] = -1
        
            if
            056D:   actor $ARMY69_2[0@] defined
            then       
            05BE: AS_actor $ARMY69_2[0@] die                                  
            end
                            
            end
            
//            0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\SFX\dooropen.mp3")
//            Audiostream.PerformAction(0@, PLAY)
//            Audiostream.Loop(0@, 0)
//            Audiostream.Volume(0@) = $SOUNDS_VOLUME
            
            $ONMISSION = 1
            $WITCH_INTERIOR_SPAWN = 0
            
            wait 1000
            
            0AF0: 0@ = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "ARIADNA_CHECKPOINT"
            if
            0@ == 1
            then
            ZA_ARIADNA_CHECKPOINT = 699
            jump to @ARIDNA_SKIP2_JUMP
            end                        
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            break
            end            
        end
    end

end

////////////////////////////SECOND////////////////////////////

while true
wait 0

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP2_JUMP
end

//EXIT BACK
if
PLAYER_IN_CANALS_FLAG == 1
    then
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1980.0825 733.576 1028.575 radius 30.0
        then        
        0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1980.429077 734.117371 1028.852905 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0                        
        if and
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1980.0825 733.576 1028.575 radius 1.0
        02A0:   actor PLAYER_ACTOR stopped
        0AB0:   key_pressed $KEY_USE
            then
            
            player.CanMove(PLAYER_CHAR,false)
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            actor.PutAtNoOffset(PLAYER_ACTOR,-1989.9418, 733.527, 1028.5234)
            actor.Angle(PLAYER_ACTOR) = 89.4602
            camera.Restore_WithJumpCut()
            DO_NOT_SPAWN_CANNIBALS = 0
            gosub @ARIADNA_TP_TEAMMATES
            
//            0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\SFX\dooropen.mp3")
//            Audiostream.PerformAction(0@, PLAY)
//            Audiostream.Loop(0@, 0)
//            Audiostream.Volume(0@) = $SOUNDS_VOLUME
            
            wait 1000
            
            $ONMISSION = 0
            $WITCH_INTERIOR_SPAWN = 1
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            jump to @ARIADNA_START
            end
        else
        jump to @ARIADNA_START  
        end
    end

//ENTER DEPO
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1972.438 742.8344 1015.6369 radius 30.0
    then
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1972.438 742.8344 1015.0 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0            
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1972.438 742.8344 1015.6369 radius 2.0
    02A0:   actor PLAYER_ACTOR stopped
    0AB0:   key_pressed $KEY_USE
        then
        
        :ARIDNA_SKIP2_JUMP
            
        player.CanMove(PLAYER_CHAR,false)
        fade 0 500
        $HUD_REMOVE = 1
        wait 500
        
        0776: create_objects_in_object_group "metro"
        0776: create_objects_in_object_group "aridna8"
        0776: create_objects_in_object_group "ariadna1"
        
        ZA_ARIADNA_VAGON_OBJECT = Object.Init(18914,-2127.99,844.57,916.989)
        Object.Angle(ZA_ARIADNA_VAGON_OBJECT) = 90.0
        0392: make_object ZA_ARIADNA_VAGON_OBJECT moveable 1
        07F7: set_object ZA_ARIADNA_VAGON_OBJECT destructible 1
        09CA: set_object ZA_ARIADNA_VAGON_OBJECT immunities BP 1 FP 1 EP 1 CP 1 MP 1
        071F: set_object ZA_ARIADNA_VAGON_OBJECT health_to 999999
        object.KeepInMemory(ZA_ARIADNA_VAGON_OBJECT) = true
        
        ZA_ARIADNA_LIFT_OBJECT = Object.Init(16846, -1900.07, 955.775, 901.9)
        Object.Angle(ZA_ARIADNA_LIFT_OBJECT) = 270.0
        0392: make_object ZA_ARIADNA_LIFT_OBJECT moveable 1
        07F7: set_object ZA_ARIADNA_LIFT_OBJECT destructible 1
        09CA: set_object ZA_ARIADNA_LIFT_OBJECT immunities BP 1 FP 1 EP 1 CP 1 MP 1
        071F: set_object ZA_ARIADNA_LIFT_OBJECT health_to 999999
        object.KeepInMemory(ZA_ARIADNA_LIFT_OBJECT) = true
        
        ZA_ARIADNA_LIFT_DOOR1 = Object.Init(16844, -1898.02, 956.101, 901.92)
        Object.Angle(ZA_ARIADNA_LIFT_DOOR1) = 270.0
        0392: make_object ZA_ARIADNA_LIFT_DOOR1 moveable 1
        07F7: set_object ZA_ARIADNA_LIFT_DOOR1 destructible 1
        09CA: set_object ZA_ARIADNA_LIFT_DOOR1 immunities BP 1 FP 1 EP 1 CP 1 MP 1
        071F: set_object ZA_ARIADNA_LIFT_DOOR1 health_to 999999
        object.KeepInMemory(ZA_ARIADNA_LIFT_DOOR1) = true
        
        ZA_ARIADNA_LIFT_DOOR2 = Object.Init(16845, -1902.0, 956.101, 901.92)
        Object.Angle(ZA_ARIADNA_LIFT_DOOR2) = 270.0
        0392: make_object ZA_ARIADNA_LIFT_DOOR2 moveable 1
        07F7: set_object ZA_ARIADNA_LIFT_DOOR2 destructible 1
        09CA: set_object ZA_ARIADNA_LIFT_DOOR2 immunities BP 1 FP 1 EP 1 CP 1 MP 1
        071F: set_object ZA_ARIADNA_LIFT_DOOR2 health_to 999999
        object.KeepInMemory(ZA_ARIADNA_LIFT_DOOR2) = true
            
        $PIZDA_PICKUP[0] = pickup.Create(KANISTRA_PICKUP_ID,3,-2028.5099, 751.7673, 917.7622)
        $PIZDA_PICKUP_FUEL[0] = 5.5
            
        actor.PutAtNoOffset(PLAYER_ACTOR,-1971.5651, 738.2084, 916.4111)
        actor.Angle(PLAYER_ACTOR) = 157.145
        camera.Restore_WithJumpCut()
        gosub @ARIADNA_TP_TEAMMATES
        
        CANALS_MUSIC_PLAY_FLAG = 0
            
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 2500
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 2500        
                                    
        //////////////////////////////////////////////////////////
            
        0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\ljuk.mp3")
        if
        not ZA_ARIADNA_CHECKPOINT == 699
        then
        Audiostream.PerformAction(0@, PLAY)
        end
        Audiostream.Loop(0@, 0)
        Audiostream.Volume(0@) = $SOUNDS_VOLUME                                    

//        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
//        wait 0
//        end
        wait 2500
        audiostream.Release($MUSIC_ASSHOLE)
            
        audiostream.PerformAction(0@,STOP)
        audiostream.Release(0@)
        
        while not model.Available(#MALE01)
        wait 0
        model.Load(#MALE01)
        mload
        end
        
        ZA_ARIADNA_ZAVAL_DUMMY = actor.Create(26,#MALE01,-2044.3367, 714.2728, 919.1551)
        0619: enable_actor ZA_ARIADNA_ZAVAL_DUMMY collision_detection 0
        0337: set_actor ZA_ARIADNA_ZAVAL_DUMMY visibility 0
        0860: link_actor ZA_ARIADNA_ZAVAL_DUMMY to_interior 1
        0A09: set_actor ZA_ARIADNA_ZAVAL_DUMMY muted 1 // versionB        
        
        ZA_ARIADNA_ZAVAL_MUSIC = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\zaval_music.ogg")
        Audiostream.LinkToActor(ZA_ARIADNA_ZAVAL_MUSIC, ZA_ARIADNA_ZAVAL_DUMMY)    
        Audiostream.Loop(ZA_ARIADNA_ZAVAL_MUSIC, 1)
        Audiostream.Volume(ZA_ARIADNA_ZAVAL_MUSIC) = $SOUNDS_VOLUME
        Audiostream.PerformAction(ZA_ARIADNA_ZAVAL_MUSIC,PLAY)
        
        $QUEST_TYPE = 262962
        HARDCORE_DANGER_FLAG_SCRIPTED = 1                
        
        if
        not ZA_ARIADNA_CHECKPOINT == 699
        then    
        player.CanMove(PLAYER_CHAR,true)
        create_thread @REFR_3D
        fade 1 500
        $HUD_REMOVE = 0
        wait 500
        end
            
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\depot.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2    
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
        if
        not USER_TAPE_TURNED_ON_FLAG == 1
        then
            
        /////////////////////Плавное нарастание/////////////////////
//            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
        //////////////////////////////////////////////////////////
        
        end 
        
        gosub @CAR_CREATE_GENERATOR
        
        if
        ZA_ARIADNA_CHECKPOINT == 699
        then
        jump to @ARIDNA_SKIP3_JUMP
        end
            
        break
        end
    else
    jump to @ARIADNA_START   
    end

end

////////////////////////////THIRD////////////////////////////

25@ = 0

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP3_JUMP
end

if
056E:   car ZA_ARIADNA_VAGON_GORSHOK defined
then
0A97: 22@ = car ZA_ARIADNA_VAGON_GORSHOK struct 
0A8E: 23@ = 22@ + 5 // int
0A8D: 24@ = read_memory 23@ size 4 virtual_protect 0
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -2129.1812 844.4601 917.9031 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if
09D1:   pickup $PIZDA_PICKUP[0] created
then
if
048C:   pickup_at -2028.5099 751.7673 917.7622 available_to_be_picked_up
    then
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -2028.5099 751.7673 917.7622 size 0.5 far_clip 15.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
    end
end

if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2129.1812 844.4601 917.9031 radius 2.0
$PANEL_OPEN == 0
$KANISTRA_USING == 0
    then
    
    0512: show_permanent_text_box 'GME1578'
    
    while true
    wait 0
    
    if
    8A2A: not  text_box 'GME1578' displayed
    then
    0512: show_permanent_text_box 'GME1578'
    end
    
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2129.1812 844.4601 917.9031 radius 2.0
    $PANEL_OPEN == 0
    $KANISTRA_USING == 0
        then
        if
        0AB0:   key_pressed $KEY_USE
            then
            if
            $KANISTRA_FUEL > 4.9
                then
                $KANISTRA_FUEL -= 4.9
                text.RemoveTextBox()
                
                while not animation.Available("CAR_CHECKS")
                wait 0
                animation.Load("CAR_CHECKS")
                end          
                
                0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
                01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
                0992: set_player PLAYER_CHAR weapons_scrollable 0
                
                0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
                Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
                Audiostream.Loop($GASCAN_USE_SOUND, 1)
                Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY) 
                
                32@ = 0
                
                repeat
                wait 0
                until 32@ >= 3500
                
                Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
                Audiostream.Loop($GASCAN_USE_SOUND, 0)
                Audiostream.PerformAction($GASCAN_USE_SOUND, STOP)
                
                03E6: remove_text_box 
                06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
                01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
                0992: set_player PLAYER_CHAR weapons_scrollable 1
                0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
                
                jump to @ARIDNA_SKIP3_JUMP
                else
                text.RemoveTextBox()
                text.ShowTextBox('GME1579')
                wait 2000
                end
            end
        else
        break
        end
    
    end
    
    end 

if
24@ >= 4.9
    then
    
    :ARIDNA_SKIP3_JUMP
    
    if
    not ZA_ARIADNA_CHECKPOINT == 699
    then
    4@ = Audiostream.Load3D("AUDIO\SOUNDS\OTHER\ARIADNA\drezinuh.mp3")    
    Audiostream.LinkToActor(4@,ZA_ARIADNA_VAGON_GORSHOK_DRIVER)
    Audiostream.Volume(4@) = $SOUNDS_VOLUME
    Audiostream.PerformAction(4@,PLAY)
    Audiostream.Loop(4@,1)
    0E09: mark_car_as_needed ZA_ARIADNA_VAGON_GORSHOK
    0E0B: mark_char_as_needed ZA_ARIADNA_VAGON_GORSHOK_DRIVER    
    wait 3000
    end
    
    0939: attach_car ZA_ARIADNA_VAGON_GORSHOK to_object ZA_ARIADNA_VAGON_OBJECT with_offset 1.1912 0.1099 2.9141 rotation 0.0 0.0 0.0
//    0A8D: ARIADNA_FPS_LIMIT_FLAG = read_memory 0xBA6794 size 1 virtual_protect 0    
    
    repeat
    wait 0
//    0A8C: write_memory 0xBA6794 size 1 value 0 virtual_protect 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP4_JUMP
    end
    
    if
    ZA_ARIADNA_CHECKPOINT == 699
    then
    01BC: put_object ZA_ARIADNA_VAGON_OBJECT at -2127.99 894.57 916.989
    jump to @ARIDNA_SKIP14_JUMP
    end
    
    $TEMPVAR_FLOAT_1 = 0.0357
    0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)
    034E: move_object ZA_ARIADNA_VAGON_OBJECT to -2127.99 894.57 916.989 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 collision_check 0
    01BB: store_object ZA_ARIADNA_VAGON_OBJECT position_to 1@ 2@ 3@    
        
    if
    04E6:   object ZA_ARIADNA_VAGON_OBJECT near_point -2127.99 894.57 916.989 radius 0.001 0.001 0.001 flag 0
        then
        :ARIDNA_SKIP4_JUMP
//        0A8C: write_memory 0xBA6794 size 1 value ARIADNA_FPS_LIMIT_FLAG virtual_protect 0
        01BC: put_object ZA_ARIADNA_VAGON_OBJECT at -2127.99 894.57 916.989
        audiostream.PerformAction(4@,STOP)
        audiostream.Release(4@)
        actor.DestroyInstantly(ZA_ARIADNA_VAGON_GORSHOK_DRIVER)
        car.Destroy(ZA_ARIADNA_VAGON_GORSHOK)        
        break
        else
//        0AD1: show_formatted_text_highpriority "vagon IS GOING vpeder, %f\894.57" time 2000 3@
        end
    
    until false
    
    break
    
    end

end

////////////////////////////FOUR////////////////////////////

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP5_JUMP
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -2126.1 903.9897 921.5958 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2126.3962 903.9897 921.5958 radius 1.0
    then
    
    :ARIDNA_SKIP5_JUMP
    
    actor.LockInCurrentPosition(PLAYER_ACTOR,true)
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
            
    actor.PutAtNoOffset(PLAYER_ACTOR,-2127.5088, 903.8768, 936.1234)
    actor.Angle(PLAYER_ACTOR) = 91.6477
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
    actor.LockInCurrentPosition(PLAYER_ACTOR,false)
    
    wait 2000
    
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    while true
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -2139.03003 910.63098 936.02399 size 0.5 far_clip 5.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0        
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP6_JUMP
    end
    
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2139.0576 909.8989 936.1234 radius 1.0
    02A0:   actor PLAYER_ACTOR stopped
    0AB0:   key_pressed $KEY_USE
        then
        
        :ARIDNA_SKIP6_JUMP        
        
        wait 0
        
        /////////////////
        
        0777: delete_objects_in_object_group "ariadna1"
        
        Audiostream.Volume($PICKUP_ITEM_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($PICKUP_ITEM_SOUND, 0)
        Audiostream.PerformAction($PICKUP_ITEM_SOUND, PLAY)
        
        $END_DIALOG_INST = 1
    	wait 0
    	v$ST_DIALOG[0] = "END59"
    	$DIALOG_COUNT = 0
    	$DIALOG_NOT_SKIP = 1
    	create_thread @DG_SYS2
        
        /////////////////
                        
        while true
        wait 0
        
        if and
        not USER_TAPE_TURNED_ON_FLAG == 1
        not $READING_NOTE_FLAG == 1
        then
        Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
        else
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        end
        
        if and
        $CHEATS_ON == 1
        0AB0:   key_pressed $KEY_USE
        then
        jump to @ARIDNA_SKIP7_JUMP
        end                
        
        0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -2127.279785 903.347229 936.308411 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
        if and
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2127.5361 903.8636 936.1234 radius 2.0
        02A0:   actor PLAYER_ACTOR stopped
        0AB0:   key_pressed $KEY_USE
            then
            
            :ARIDNA_SKIP7_JUMP
            
            player.CanMove(PLAYER_CHAR,false)
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
                    
            actor.PutAtNoOffset(PLAYER_ACTOR,-2125.3044, 903.7876, 917.8267)
            actor.Angle(PLAYER_ACTOR) = 268.7115
            camera.Restore_WithJumpCut()
            gosub @ARIADNA_TP_TEAMMATES
            
            wait 2000
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            
            /////////////////
            
            while true
            wait 0
            
            if and
            not USER_TAPE_TURNED_ON_FLAG == 1
            not $READING_NOTE_FLAG == 1
            then
            Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
            else
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            end
            
            if and
            $CHEATS_ON == 1
            0AB0:   key_pressed $KEY_USE
            then
            jump to @ARIDNA_SKIP8_JUMP
            end                        
            
            0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1904.040161 949.190002 901.046875 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
            if and
            0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1904.6014 949.3268 900.9931 radius 2.0
            02A0:   actor PLAYER_ACTOR stopped
            0AB0:   key_pressed $KEY_USE
                then
                
                :ARIDNA_SKIP8_JUMP
                
                player.CanMove(PLAYER_CHAR,false)
                fade 0 500
                $HUD_REMOVE = 1
                wait 500
                        
                actor.PutAtNoOffset(PLAYER_ACTOR,-1899.9845, 965.8741, 901.0008)
                actor.Angle(PLAYER_ACTOR) = 181.1259
                camera.Restore_WithJumpCut()
                gosub @ARIADNA_TP_TEAMMATES
                
                wait 2000
                
                player.CanMove(PLAYER_CHAR,true)
                fade 1 500
                $HUD_REMOVE = 0
                wait 500
                
                /////////////////
            
                while true
                wait 0
                
                if and
                not USER_TAPE_TURNED_ON_FLAG == 1
                not $READING_NOTE_FLAG == 1
                then
                Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
                else
                Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
                end
                
                if and
                $CHEATS_ON == 1
                0AB0:   key_pressed $KEY_USE
                then
                jump to @ARIDNA_SKIP9_JUMP
                end                                
                
                0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1902.027344 958.495117 901.478455 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
                if and
                0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1902.054 958.547 900.9934 radius 1.0
                02A0:   actor PLAYER_ACTOR stopped
                0AB0:   key_pressed $KEY_USE
                    then
                    :ARIDNA_SKIP9_JUMP
                    gosub @KARTOCHKA_USE                    
                    jump to @ARIADNA_LIFT_START                    
                    end
                    
                end
                
                /////////////////
                
                end
                
            end
            
            /////////////////
               
            end
            
        end
        
        /////////////////
        
        end
    end
    
    end

end

end_thread

:ARIADNA_LIFT_START

21@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,ZA_ARIADNA_LIFT_DOOR1)

22@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
Audiostream.Volume(22@) = $SOUNDS_VOLUME
Audiostream.Loop(22@, 0)
Audiostream.PerformAction(22@, PLAY)
Audiostream.LinkToObject(22@,ZA_ARIADNA_LIFT_DOOR2)

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP11_JUMP
end

$TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)
034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1896.32 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1903.8 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0

if and
04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1896.32 956.101 901.92 radius 0.001 0.001 0.001 flag 0
04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1903.8 956.101 901.92 radius 0.001 0.001 0.001 flag 0
then
:ARIDNA_SKIP11_JUMP
01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1896.32 956.101 901.92
01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1903.8 956.101 901.92
break
end

until false

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP12_JUMP
end

until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1901.6147 956.3702 900.1 cornerB -1898.5225 954.2261 905.1

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1902.042725 957.262268 901.541870 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0

if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1901.6194 957.0116 901.1 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP12_JUMP
    break
    end

until false

gosub @BUTTON_USE

Audiostream.PerformAction(21@, PLAY)
Audiostream.PerformAction(22@, PLAY)

0E68: set_player_control_pad 0 0 
0E69: set_player_control_pad_movement 0 0

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP13_JUMP
end

$TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)
034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1898.02 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1902.0 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0

if and
04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1898.02 956.101 901.92 radius 0.001 0.001 0.001 flag 0
04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1902.0 956.101 901.92 radius 0.001 0.001 0.001 flag 0
then
:ARIDNA_SKIP13_JUMP
01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1898.02 956.101 901.92
01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1902.0 956.101 901.92
break
end

until false

0E68: set_player_control_pad 0 1 
0E69: set_player_control_pad_movement 0 1

21@ = Audiostream.Load3D("audio\sounds\other\office\lift_moving.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 1)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,ZA_ARIADNA_LIFT_OBJECT)
//0A8D: ARIADNA_FPS_LIMIT_FLAG = read_memory 0xBA6794 size 1 virtual_protect 0

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0
//0A8C: write_memory 0xBA6794 size 1 value 0 virtual_protect 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP14_JUMP
end

$TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_SPEED
0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)
034E: move_object ZA_ARIADNA_LIFT_OBJECT to -1900.07 955.775 685.39 speed 0.0 0.0 $TEMPVAR_FLOAT_1 collision_check 0
034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1898.02 956.101 685.42 speed 0.0 0.0 $TEMPVAR_FLOAT_1 collision_check 0
034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1902.0 956.101 685.42 speed 0.0 0.0 $TEMPVAR_FLOAT_1 collision_check 0

01BB: store_object ZA_ARIADNA_LIFT_OBJECT position_to 1@ 2@ 3@

if
04E6:   object ZA_ARIADNA_LIFT_OBJECT near_point -1900.07 955.775 685.39 radius 10.0 10.0 0.001 flag 0
then
:ARIDNA_SKIP14_JUMP
//0A8C: write_memory 0xBA6794 size 1 value ARIADNA_FPS_LIMIT_FLAG virtual_protect 0
01BC: put_object ZA_ARIADNA_LIFT_OBJECT at -1900.07 955.775 685.39
01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1898.02 956.101 685.42
01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1902.0 956.101 685.42
break
else
//0AD1: show_formatted_text_highpriority "LIFT IS GOING DOWN, %f\685.42" time 2000 3@
end

until false

0776: create_objects_in_object_group "ardna"
0776: create_objects_in_object_group "aridnb5"
0776: create_objects_in_object_group "aridnb6"
0776: create_objects_in_object_group "aridna7"

0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "ARIADNA_CHECKPOINT"

if
not ZA_ARIADNA_CHECKPOINT == 699
then
Audiostream.PerformAction(21@, STOP)
Audiostream.PerformAction(22@, STOP)
Audiostream.Release(21@)
Audiostream.Release(22@)
else
actor.PutAtNoOffset(PLAYER_ACTOR,-1900.1562, 955.6078, 684.59)
actor.Angle(PLAYER_ACTOR) = 0.0
camera.Restore_WithJumpCut()
end

21@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
Audiostream.Volume(21@) = $SOUNDS_VOLUME
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)
Audiostream.LinkToObject(21@,ZA_ARIADNA_LIFT_DOOR1)

22@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
Audiostream.Volume(22@) = $SOUNDS_VOLUME
Audiostream.Loop(22@, 0)
Audiostream.PerformAction(22@, PLAY)
Audiostream.LinkToObject(22@,ZA_ARIADNA_LIFT_DOOR2)

wait 500
Audiostream.PerformAction(21@, PLAY)
Audiostream.PerformAction(22@, PLAY)
if
ZA_ARIADNA_CHECKPOINT == 699
then
player.CanMove(PLAYER_CHAR,true)
fade 1 500
$HUD_REMOVE = 0
wait 500
end
create_thread @REFR_3D

0E68: set_player_control_pad 0 0 
0E69: set_player_control_pad_movement 0 0

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP15_JUMP
end

$TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)
034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1896.32 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 collision_check 0
034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1903.8 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 collision_check 0

if and
04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1896.32 956.101 685.42 radius 0.001 0.001 0.001 flag 0
04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1903.8 956.101 685.42 radius 0.001 0.001 0.001 flag 0
    then
    
    :ARIDNA_SKIP15_JUMP
    01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1896.32 956.101 685.42
    01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1903.8 956.101 685.42   
    
    23@ = Audiostream.Load3D("audio\sounds\other\office\lift_dzyn.mp3")
    Audiostream.Volume(23@) = $SOUNDS_VOLUME
    Audiostream.Loop(23@, 0)
    Audiostream.PerformAction(23@, PLAY)
    Audiostream.LinkToObject(23@,ZA_ARIADNA_LIFT_OBJECT)
    
    0E68: set_player_control_pad 0 1 
    0E69: set_player_control_pad_movement 0 1    
    
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP16_JUMP
    end
    
    until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1896.8411 964.4161 683.0 cornerB -1903.5654 958.8439 688.0491
    
    0E68: set_player_control_pad 0 0 
    0E69: set_player_control_pad_movement 0 0
    
    :ARIDNA_SKIP16_JUMP
    
    Audiostream.PerformAction(21@, PLAY)
    Audiostream.PerformAction(22@, PLAY)        
    
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP16B_JUMP
    end
    
    $TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
    0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)    
    034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1898.02 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
    034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1902.0 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
        
    if and
    04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1898.02 956.101 685.42 radius 0.001 0.001 0.001 flag 0
    04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1902.0 956.101 685.42 radius 0.001 0.001 0.001 flag 0
    then
    :ARIDNA_SKIP16B_JUMP
    01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1898.02 956.101 685.42
    01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1902.0 956.101 685.42
    0E68: set_player_control_pad 0 1 
    0E69: set_player_control_pad_movement 0 1
    break
    end
        
    until false
    
    jump to @ARIADNA_LAB
            
    end

until false        
        
end_thread

:ARIADNA_LAB

/////////////////////Плавное затухание/////////////////////
//
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
wait 1000
audiostream.Release($MUSIC_ASSHOLE)
    
//////////////////////////////////////////////////////////

$MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\ariadna.mp3")
250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2    
Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
Audiostream.Loop($MUSIC_ASSHOLE, 1)
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME

if
not USER_TAPE_TURNED_ON_FLAG == 1
then
    
/////////////////////Плавное нарастание/////////////////////
//    
//$MUSIC_FADE_NUMBER += 1
//if
//$MUSIC_FADE_NUMBER > 4
//    then
//    $MUSIC_FADE_NUMBER = 0 
//    end    
//    
//0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//    
//$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//create_thread @MUS_FAD
//    
//wait 1
2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 500
    
//////////////////////////////////////////////////////////

end

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP17_JUMP
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1895.015137 993.787048 684.957886 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1898.571411 1005.518188 684.936768 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1905.159668 993.761414 684.951904 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1875.138184 993.776489 684.934082 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0

if or
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1905.1381 993.761 684.5011 radius 1.0
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1898.5942 1005.4933 684.4946 radius 1.0
then
if and
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then    
    gosub @KARTOCHKA_USE    
    0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_denied.mp3")    
    Audiostream.PerformAction(0@, PLAY)
    Audiostream.Loop(0@, 0)
    Audiostream.Volume(0@) = $SOUNDS_VOLUME
    text.ShowH('END51',6100,1)
    wait 4100
    audiostream.PerformAction(0@,STOP)
    audiostream.Release(0@)                 
    end
end

if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1895.0452 993.7787 684.4946 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    
    gosub @KARTOCHKA_USE
    
    0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_granted.mp3")    
    Audiostream.PerformAction(0@, PLAY)
    Audiostream.Loop(0@, 0)
    Audiostream.Volume(0@) = $SOUNDS_VOLUME
    text.ShowH('END52',6100,1)
    wait 6100
    audiostream.PerformAction(0@,STOP)
    audiostream.Release(0@)
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
                    
    actor.PutAtNoOffset(PLAYER_ACTOR,-1894.2264, 995.2981, 684.5024)
    actor.Angle(PLAYER_ACTOR) = 269.4004
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
            
    wait 2000
            
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
                                                           
    end
    
if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1875.1622 993.802 684.5024 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    
    :ARIDNA_SKIP17_JUMP
    
    gosub @KARTOCHKA_USE
    
    0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_granted2.mp3")    
    Audiostream.PerformAction(0@, PLAY)
    Audiostream.Loop(0@, 0)
    Audiostream.Volume(0@) = $SOUNDS_VOLUME
    text.ShowH('END53',3100,1)
    wait 3100
    audiostream.PerformAction(0@,STOP)
    audiostream.Release(0@)
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
                    
    actor.PutAtNoOffset(PLAYER_ACTOR,-1871.7844, 995.3918, 684.4644)
    actor.Angle(PLAYER_ACTOR) = 270.1542
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
            
    wait 2000
            
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
                                        
    jump to @ARIADNA_ANGAR_ENTER                    
    end    

end

end_thread

:ARIADNA_ANGAR_ENTER

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP18_JUMP
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1805.946411 1063.250000 683.794067 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -1806.1166 1062.6874 684.4358 radius 1.5 1.5 2.0
044B:   actor PLAYER_ACTOR on_foot
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP18_JUMP                
        
    ///////////////////////////////////////////////////////////////////////////////////////
    
    0470: 9@ = actor PLAYER_ACTOR current_weapon
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    0992: set_player PLAYER_CHAR weapons_scrollable 0 
        
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
        
    while 83D0: not  wav 4 loaded 
    wait 0
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
    end
         
    0949: link_wav 4 to_actor PLAYER_ACTOR
    03D1: play_wav 4
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
        
    32@ = 0
    while 83D2:   wav 4 ended 
    wait 0
    if
    32@ > 3500
        then
        break
        end
    end
        
    040D: unload_wav 4 
    04EF: release_animation "BOMBER"
        
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
        
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
        
    ///////////////////////////////////////////////////////////////////////////////////////
                
    gosub @ARIADNA_NOTE
    0777: delete_objects_in_object_group "aridna7"
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "END61"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    ZA_ARIADNA_GOT_KEYCARD_FLAG = 0
    
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP19_JUMP
    end
    
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1873.569336 993.763489 684.950684 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1873.5405 993.7679 684.4652 radius 1.0
    then
    
    if
    ZA_ARIADNA_GOT_KEYCARD_FLAG == 0
    then
    
    if and
    02A0:   actor PLAYER_ACTOR stopped
    0AB0:   key_pressed $KEY_USE
        then
        :ARIDNA_SKIP19_JUMP    
        gosub @KARTOCHKA_USE    
        1@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_lockd.mp3")    
        Audiostream.PerformAction(1@, PLAY)
        Audiostream.Loop(1@, 0)
        Audiostream.Volume(1@) = $SOUNDS_VOLUME
        
    //    wait 4100
        
        32@ = 0
        
        text.ShowH('END54',9100,1)
        
        while 32@ < 9100
        wait 0
        
        if and
        not USER_TAPE_TURNED_ON_FLAG == 1
        not $READING_NOTE_FLAG == 1
        then
        Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
        else
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        end
        
        end
        
        $END_DIALOG_INST = 1
    	wait 0
    	v$ST_DIALOG[0] = "END62"
    	$DIALOG_COUNT = 0
    	$DIALOG_NOT_SKIP = 1
    	create_thread @DG_SYS2
        
        audiostream.PerformAction(1@,STOP)
        audiostream.Release(1@)
        break                 
        end
        
    end
    
    end
    
    until false
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
        
    //////////////////////////////////////////////////////////
    
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\ariadna_agression2.mp3")
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2    
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
    /////////////////////Плавное нарастание/////////////////////
//        
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 500
        
    //////////////////////////////////////////////////////////
    
    0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\screechON.mp3")    
    Audiostream.PerformAction(0@, PLAY)
    Audiostream.Loop(0@, 0)
    Audiostream.Volume(0@) = $SOUNDS_VOLUME        
    
    wait 2000
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "END62X"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    wait 5000
    audiostream.PerformAction(0@,STOP)
    audiostream.Release(0@)
    SWEET_SPAWN_FLAG = 666
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "END63X"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    jump to @ARIADNA_AGRRESSION2_START             
        
    end

end

end_thread

:ARIADNA_AGRRESSION2_START

random_int ZA_ARIADNA_KEYCARD_NUM 0 4
if
ZA_ARIADNA_KEYCARD_NUM == 0
then
0776: create_objects_in_object_group "aridna1"
0776: create_objects_in_object_group "aridnb1"
end

if
ZA_ARIADNA_KEYCARD_NUM == 1
then
0776: create_objects_in_object_group "aridna2"
0776: create_objects_in_object_group "aridnb2"
end

if
ZA_ARIADNA_KEYCARD_NUM == 2
then
0776: create_objects_in_object_group "aridna3"
0776: create_objects_in_object_group "aridnb3"
end

if
ZA_ARIADNA_KEYCARD_NUM == 3
then
0776: create_objects_in_object_group "aridna4"
0776: create_objects_in_object_group "aridnb4"
end

32@ = 0
ZA_ARIADNA_GOT_KEYCARD_FLAG = 0

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

////////////////////////////////////////////////////////

if
ZA_ARIADNA_GOT_KEYCARD_FLAG == 0
then

if
ZA_ARIADNA_KEYCARD_NUM == 0
then
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1763.69519 1105.33032 683.43994 size 0.5 far_clip 15.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0

if and
$CHEATS_ON == 1
0E3D: is_key_just_pressed 69
then
actor.PutAtNoOffset(PLAYER_ACTOR,-1763.6952, 1105.3302, 683.44)
end

end

if
ZA_ARIADNA_KEYCARD_NUM == 1
then
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1865.42004 1097.05005 687.41003 size 0.5 far_clip 15.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0

if and
$CHEATS_ON == 1
0E3D: is_key_just_pressed 69
then
actor.PutAtNoOffset(PLAYER_ACTOR,-1865.42004, 1097.05005, 687.41003)
end

end

if
ZA_ARIADNA_KEYCARD_NUM == 2
then
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1763.00000 1008.29999 691.37000 size 0.5 far_clip 15.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0

if and
$CHEATS_ON == 1
0E3D: is_key_just_pressed 69
then
actor.PutAtNoOffset(PLAYER_ACTOR,-1763.00000, 1008.29999, 691.37000)
end

end

if
ZA_ARIADNA_KEYCARD_NUM == 3
then
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1769.18994 1074.79004 691.37000 size 0.5 far_clip 15.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0

if and
$CHEATS_ON == 1
0E3D: is_key_just_pressed 69
then
actor.PutAtNoOffset(PLAYER_ACTOR,-1769.18994, 1074.79004, 691.37000)
end

end

if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -1763.6952 1105.3302 683.44 radius 1.5 1.5 2.0
044B:   actor PLAYER_ACTOR on_foot
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
ZA_ARIADNA_KEYCARD_NUM == 0
    then                
    gosub @ARIADNA_KARTOCHKA_GOT
    0777: delete_objects_in_object_group "aridnb1"                                                  
    end
    
if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -1865.42 1097.05 687.41 radius 1.5 1.5 2.0
044B:   actor PLAYER_ACTOR on_foot
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
ZA_ARIADNA_KEYCARD_NUM == 1
    then                
    gosub @ARIADNA_KARTOCHKA_GOT
    0777: delete_objects_in_object_group "aridnb2"                                                    
    end
    
if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -1763.0 1008.3 691.37 radius 1.5 1.5 2.0
044B:   actor PLAYER_ACTOR on_foot
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
ZA_ARIADNA_KEYCARD_NUM == 2
    then                
    gosub @ARIADNA_KARTOCHKA_GOT
    0777: delete_objects_in_object_group "aridnb3"                                                  
    end
    
if and
00FE:   actor PLAYER_ACTOR sphere 0 in_sphere -1769.19 1074.79 691.37 radius 1.5 1.5 2.0
044B:   actor PLAYER_ACTOR on_foot
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
ZA_ARIADNA_KEYCARD_NUM == 3
    then                
    gosub @ARIADNA_KARTOCHKA_GOT
    0777: delete_objects_in_object_group "aridnb4"                                                  
    end
    
end            

////////////////////////////////////////////////////////

if and
$CHEATS_ON == 1
ZA_ARIADNA_GOT_KEYCARD_FLAG == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP20_JUMP
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1873.569336 993.763489 684.950684 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1873.5405 993.7679 684.4652 radius 1.0
then

if
ZA_ARIADNA_GOT_KEYCARD_FLAG == 0
then

if and
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then    
    gosub @KARTOCHKA_USE    
    1@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_lockd.mp3")    
    Audiostream.PerformAction(1@, PLAY)
    Audiostream.Loop(1@, 0)
    Audiostream.Volume(1@) = $SOUNDS_VOLUME
//    wait 4100
    
    32@ = 0
    
    text.ShowH('END54',9100,1)
    
    while 32@ < 9100
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
//    gosub @ARIADNA_CARDREADER_DESTROY
    end
    
    audiostream.PerformAction(1@,STOP)
    audiostream.Release(1@)                 
    end
    
else
    
if and
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP20_JUMP    
    gosub @KARTOCHKA_USE    
    1@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_granted2.mp3")    
    Audiostream.PerformAction(1@, PLAY)
    Audiostream.Loop(1@, 0)
    Audiostream.Volume(1@) = $SOUNDS_VOLUME
//    wait 4100

    text.ShowH('END53',4100,1)
    
    32@ = 0
    
    while 32@ < 4100
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
//    gosub @ARIADNA_CARDREADER_DESTROY
    end
    
    audiostream.PerformAction(1@,STOP)
    audiostream.Release(1@)
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
                        
    actor.PutAtNoOffset(PLAYER_ACTOR,-1875.3427, 995.3542, 684.5024)
    actor.Angle(PLAYER_ACTOR) = 91.5854
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
                
    wait 2000
                
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    jump to @ARIADNA_AFTERCARD
                     
    end

end
    
end

////////////////////////////////////////////////////////

if
32@ > 500
then
32@ = 0

for 28@ = 0 to 4
random_int CANALS_CANNIBAL_COUNTER_IS 0 40
gosub @CHUBAKABRA_CREATE
end

end

////////////////////////////////////////////////////////

end

end_thread

:ARIADNA_AFTERCARD

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

ZA_ARIADNA_CARDREADER1_DUMMY = actor.Create(26,#MALE01,-1873.6176, 993.83, 684.4651)
0619: enable_actor ZA_ARIADNA_CARDREADER1_DUMMY collision_detection 0
0337: set_actor ZA_ARIADNA_CARDREADER1_DUMMY visibility 0
0860: link_actor ZA_ARIADNA_CARDREADER1_DUMMY to_interior 1
0A09: set_actor ZA_ARIADNA_CARDREADER1_DUMMY muted 1 // versionB

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

ZA_ARIADNA_CARDREADER2_DUMMY = actor.Create(26,#MALE01,-1894.2881, 993.7728, 684.5024)
0619: enable_actor ZA_ARIADNA_CARDREADER2_DUMMY collision_detection 0
0337: set_actor ZA_ARIADNA_CARDREADER2_DUMMY visibility 0
0860: link_actor ZA_ARIADNA_CARDREADER2_DUMMY to_interior 1
0A09: set_actor ZA_ARIADNA_CARDREADER2_DUMMY muted 1 // versionB

ZA_ARIADNA_CARDREADER1_SOUND = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\screeknock.mp3")
Audiostream.LinkToActor(ZA_ARIADNA_CARDREADER1_SOUND, ZA_ARIADNA_CARDREADER1_DUMMY)    
Audiostream.Loop(ZA_ARIADNA_CARDREADER1_SOUND, 0)
Audiostream.Volume(ZA_ARIADNA_CARDREADER1_SOUND) = $SOUNDS_VOLUME

ZA_ARIADNA_CARDREADER2_SOUND = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\screeknock.mp3")
Audiostream.LinkToActor(ZA_ARIADNA_CARDREADER2_SOUND, ZA_ARIADNA_CARDREADER2_DUMMY)    
Audiostream.Loop(ZA_ARIADNA_CARDREADER2_SOUND, 0)
Audiostream.Volume(ZA_ARIADNA_CARDREADER2_SOUND) = $SOUNDS_VOLUME

ZA_ARIADNA_CARDREADER1_BROKEN_FLAG = 0
ZA_ARIADNA_CARDREADER2_BROKEN_FLAG = 0
ZA_ARIADNA_CARDREADER1_BROKEN_TRIES = 0
ZA_ARIADNA_CARDREADER2_BROKEN_TRIES = 0
ZA_ARIADNA_CARDREADER_LEAVED_FLAG = 0

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

gosub @ARIADNA_CARDREADER_DESTROY

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1905.159668 993.761414 684.951904 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1898.571411 1005.518188 684.936768 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if or
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1905.1381 993.761 684.5011 radius 1.0
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1898.5942 1005.4933 684.4946 radius 1.0
then
if and
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then    
    gosub @KARTOCHKA_USE    
    1@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_denied.mp3")    
    Audiostream.PerformAction(1@, PLAY)
    Audiostream.Loop(1@, 0)
    Audiostream.Volume(1@) = $SOUNDS_VOLUME
//    wait 4100
    
    32@ = 0
    
    text.ShowH('END51',6100,1)
    
    while 32@ < 4100
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    gosub @ARIADNA_CARDREADER_DESTROY
    end
    
    audiostream.PerformAction(1@,STOP)
    audiostream.Release(1@)                 
    end
end

if
ZA_ARIADNA_CARDREADER_LEAVED_FLAG == 0
then

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP21_JUMP
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1894.314209 993.760864 684.947754 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1894.2875 993.7795 684.5024 radius 1.0
    then
    :ARIDNA_SKIP21_JUMP    
    gosub @KARTOCHKA_USE    
    1@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_granted2.mp3")    
    Audiostream.PerformAction(1@, PLAY)
    Audiostream.Loop(1@, 0)
    Audiostream.Volume(1@) = $SOUNDS_VOLUME
//    wait 4100

    text.ShowH('END53',4100,1)
    
    32@ = 0
    
    while 32@ < 4100
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    gosub @ARIADNA_CARDREADER_DESTROY
    end
    
    audiostream.PerformAction(1@,STOP)
    audiostream.Release(1@)
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
                        
    actor.PutAtNoOffset(PLAYER_ACTOR,-1895.0925, 995.3598, 684.4946)
    actor.Angle(PLAYER_ACTOR) = 90.578
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
                
    wait 2000
                
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    ZA_ARIADNA_CARDREADER_LEAVED_FLAG = 1    
                     
    end
    
else

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP22_JUMP
end

0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1902.044678 958.526245 684.962280 size 0.5 far_clip 10.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1902.0785 958.5441 684.4946 radius 1.0
    then
    :ARIDNA_SKIP22_JUMP
        
    gosub @KARTOCHKA_USE
        
    1@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\access_granted2.mp3")    
    Audiostream.PerformAction(1@, PLAY)
    Audiostream.Loop(1@, 0)
    Audiostream.Volume(1@) = $SOUNDS_VOLUME
//    wait 4100

    text.ShowH('END53',4100,1)
    
    32@ = 0
    
    while 32@ < 4100
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    gosub @ARIADNA_CARDREADER_DESTROY
    end
    
    audiostream.PerformAction(1@,STOP)
    audiostream.Release(1@)
    
    21@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
    Audiostream.Volume(21@) = $SOUNDS_VOLUME
    Audiostream.Loop(21@, 0)
    Audiostream.PerformAction(21@, PLAY)
    Audiostream.LinkToObject(21@,ZA_ARIADNA_LIFT_DOOR1)
    
    22@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
    Audiostream.Volume(22@) = $SOUNDS_VOLUME
    Audiostream.Loop(22@, 0)
    Audiostream.PerformAction(22@, PLAY)
    Audiostream.LinkToObject(22@,ZA_ARIADNA_LIFT_DOOR2)
    
    wait 500
    camera.Restore()
    Audiostream.PerformAction(21@, PLAY)
    Audiostream.PerformAction(22@, PLAY)
    
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP23_JUMP
    end
    
    gosub @ARIADNA_CARDREADER_DESTROY
    
    $TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
    0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)   
    034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1896.32 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 collision_check 0
    034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1903.8 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 collision_check 0
    
    if and
    04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1896.32 956.101 685.42 radius 0.001 0.001 0.001 flag 0
    04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1903.8 956.101 685.42 radius 0.001 0.001 0.001 flag 0
        then
        :ARIDNA_SKIP23_JUMP
        01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1896.32 956.101 685.42
        01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1903.8 956.101 685.42
        
        23@ = Audiostream.Load3D("audio\sounds\other\office\lift_dzyn.mp3")
        Audiostream.Volume(23@) = $SOUNDS_VOLUME
        Audiostream.Loop(23@, 0)
        Audiostream.PerformAction(23@, PLAY)
        Audiostream.LinkToObject(23@,ZA_ARIADNA_LIFT_OBJECT)    
        
        repeat
        wait 0
        
        if and
        not USER_TAPE_TURNED_ON_FLAG == 1
        not $READING_NOTE_FLAG == 1
        then
        Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
        else
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        end
        
        if and
        $CHEATS_ON == 1
        0AB0:   key_pressed $KEY_USE
        then
        jump to @ARIDNA_SKIP24_JUMP
        end
        
        gosub @ARIADNA_CARDREADER_DESTROY
        until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1901.6199 956.5352 683.0 cornerB -1898.52 954.3388 688.0491
        
        :ARIDNA_SKIP24_JUMP
        
        Audiostream.PerformAction(21@, PLAY)
        Audiostream.PerformAction(22@, PLAY)
        
        repeat
        wait 0
        
        if and
        not USER_TAPE_TURNED_ON_FLAG == 1
        not $READING_NOTE_FLAG == 1
        then
        Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
        else
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        end
        
        if and
        $CHEATS_ON == 1
        0AB0:   key_pressed $KEY_USE
        then
        jump to @ARIDNA_SKIP25_JUMP
        end
        
        $TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
        0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)       
        034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1898.02 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
        034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1902.0 956.101 685.42 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
            
        if and
        04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1898.02 956.101 685.42 radius 0.001 0.001 0.001 flag 0
        04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1902.0 956.101 685.42 radius 0.001 0.001 0.001 flag 0
        then
        :ARIDNA_SKIP25_JUMP
        01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1898.02 956.101 685.42
        01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1902.0 956.101 685.42
        break
        end
        
        gosub @ARIADNA_CARDREADER_DESTROY    
        until false
        
        0777: delete_objects_in_object_group "ardna"        
        
        $END_DIALOG_INST = 1
    	wait 0
    	v$ST_DIALOG[0] = "END63"
    	$DIALOG_COUNT = 0
    	$DIALOG_NOT_SKIP = 1
    	create_thread @DG_SYS2
        
        for 0@ = 0 to 39        
        
        if
        056D:   actor $ARMY69_2[0@] defined
        then       
        05BE: AS_actor $ARMY69_2[0@] die
        
        if
        not $ARMY69_2_MARKER_FLAG[0@] == -1
        then
        Audiostream.PerformAction($ARMY69_2_MARKER_FLAG[0@], STOP)
        Audiostream.Release($ARMY69_2_MARKER_FLAG[0@])
        end
                                          
        end
        
        $ARMY69_2_MARKER_FLAG[0@] = -1                    
        end
        
        SWEET_SPAWN_FLAG = 0
        
        audiostream.PerformAction(ZA_ARIADNA_CARDREADER1_SOUND,STOP)
        audiostream.PerformAction(ZA_ARIADNA_CARDREADER2_SOUND,STOP)
        audiostream.Release(ZA_ARIADNA_CARDREADER1_SOUND)
        audiostream.Release(ZA_ARIADNA_CARDREADER2_SOUND)
        actor.DestroyInstantly(ZA_ARIADNA_CARDREADER1_DUMMY)
        actor.DestroyInstantly(ZA_ARIADNA_CARDREADER2_DUMMY)
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\lift_moving.mp3")
        Audiostream.Volume(21@) = $SOUNDS_VOLUME
        Audiostream.Loop(21@, 1)
        Audiostream.PerformAction(21@, PLAY)
        Audiostream.LinkToObject(21@,ZA_ARIADNA_LIFT_OBJECT)
        
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
        wait 1000
        audiostream.Release($MUSIC_ASSHOLE)
            
        //////////////////////////////////////////////////////////
        
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\depot.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2    
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
        if
        not USER_TAPE_TURNED_ON_FLAG == 1
        then
            
        /////////////////////Плавное нарастание/////////////////////
//            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 500
            
        //////////////////////////////////////////////////////////
        
        end
        
//        0A8D: ARIADNA_FPS_LIMIT_FLAG = read_memory 0xBA6794 size 1 virtual_protect 0        
        
        repeat
        wait 0
//        0A8C: write_memory 0xBA6794 size 1 value 0 virtual_protect 0
        
        if and
        not USER_TAPE_TURNED_ON_FLAG == 1
        not $READING_NOTE_FLAG == 1
        then
        Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
        else
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        end
        
        if and
        $CHEATS_ON == 1
        0AB0:   key_pressed $KEY_USE
        then
        jump to @ARIDNA_SKIP26_JUMP
        end
        
        $TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_SPEED
        0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)    
        034E: move_object ZA_ARIADNA_LIFT_OBJECT to -1900.07 955.775 901.9 speed 0.0 0.0 $TEMPVAR_FLOAT_1 collision_check 0
        034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1898.02 956.101 901.92 speed 0.0 0.0 $TEMPVAR_FLOAT_1 collision_check 0
        034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1902.0 956.101 901.92 speed 0.0 0.0 $TEMPVAR_FLOAT_1 collision_check 0
        
        01BB: store_object ZA_ARIADNA_LIFT_OBJECT position_to 1@ 2@ 3@
        
        if
        04E6:   object ZA_ARIADNA_LIFT_OBJECT near_point -1900.07 955.775 901.9 radius 10.0 10.0 0.001 flag 0
        then
        :ARIDNA_SKIP26_JUMP
//        0A8C: write_memory 0xBA6794 size 1 value ARIADNA_FPS_LIMIT_FLAG virtual_protect 0
        01BC: put_object ZA_ARIADNA_LIFT_OBJECT at -1900.07 955.775 901.9
        01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1898.02 956.101 901.92
        01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1902.0 956.101 901.92
        break
        else
//        0AD1: show_formatted_text_highpriority "LIFT IS GOING UP, %f\901.9" time 2000 3@
        end
        
        until false
        
        Audiostream.PerformAction(21@, STOP)
        Audiostream.Release(21@)                        
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
        Audiostream.Volume(21@) = $SOUNDS_VOLUME
        Audiostream.Loop(21@, 0)
        Audiostream.PerformAction(21@, PLAY)
        Audiostream.LinkToObject(21@,ZA_ARIADNA_LIFT_DOOR1)
        
        22@ = Audiostream.Load3D("audio\sounds\other\office\lift_door_open.mp3")
        Audiostream.Volume(22@) = $SOUNDS_VOLUME
        Audiostream.Loop(22@, 0)
        Audiostream.PerformAction(22@, PLAY)
        Audiostream.LinkToObject(22@,ZA_ARIADNA_LIFT_DOOR2)
        
        camera.Restore()
        Audiostream.PerformAction(21@, PLAY)
        Audiostream.PerformAction(22@, PLAY)        
        
        repeat
        wait 0
        
        if and
        not USER_TAPE_TURNED_ON_FLAG == 1
        not $READING_NOTE_FLAG == 1
        then
        Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
        else
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        end
        
        if and
        $CHEATS_ON == 1
        0AB0:   key_pressed $KEY_USE
        then
        jump to @ARIDNA_SKIP27_JUMP
        end
        
        $TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
        0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)    
        034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1896.32 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
        034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1903.8 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
        
        if and
        04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1896.32 956.101 901.92 radius 0.001 0.001 0.001 flag 0
        04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1903.8 956.101 901.92 radius 0.001 0.001 0.001 flag 0
            then
            :ARIDNA_SKIP27_JUMP
            01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1896.32 956.101 901.92
            01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1903.8 956.101 901.92            
            
            23@ = Audiostream.Load3D("audio\sounds\other\office\lift_dzyn.mp3")
            Audiostream.Volume(23@) = $SOUNDS_VOLUME
            Audiostream.Loop(23@, 0)
            Audiostream.PerformAction(23@, PLAY)
            Audiostream.LinkToObject(23@,ZA_ARIADNA_LIFT_OBJECT)    
            
            repeat
            wait 0
            
            if and
            not USER_TAPE_TURNED_ON_FLAG == 1
            not $READING_NOTE_FLAG == 1
            then
            Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
            else
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            end
            
            if and
            $CHEATS_ON == 1
            0AB0:   key_pressed $KEY_USE
            then
            jump to @ARIDNA_SKIP28_JUMP
            end
            
            until 00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1906.3729 958.5056 900.0 cornerB -1893.6849 967.0494 905.0
            
            :ARIDNA_SKIP28_JUMP
            
            Audiostream.PerformAction(21@, PLAY)
            Audiostream.PerformAction(22@, PLAY)
            
            0E68: set_player_control_pad 0 0 
            0E69: set_player_control_pad_movement 0 0
            
            repeat
            wait 0
            
            if and
            not USER_TAPE_TURNED_ON_FLAG == 1
            not $READING_NOTE_FLAG == 1
            then
            Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
            else
            Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
            end
            
            if and
            $CHEATS_ON == 1
            0AB0:   key_pressed $KEY_USE
            then
            jump to @ARIDNA_SKIP29_JUMP
            end
            
            $TEMPVAR_FLOAT_1 = ZA_ARIADNA_LIFT_DOORS_OPEN_SPEED
            0069: $TEMPVAR_FLOAT_1 *= GENERAL_FPS_TIMER_DIVIDER // (float)        
            034E: move_object ZA_ARIADNA_LIFT_DOOR1 to -1898.02 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
            034E: move_object ZA_ARIADNA_LIFT_DOOR2 to -1902.0 956.101 901.92 speed $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_1 0.0 collision_check 0
                
            if and
            04E6:   object ZA_ARIADNA_LIFT_DOOR1 near_point -1898.02 956.101 901.92 radius 0.001 0.001 0.001 flag 0
            04E6:   object ZA_ARIADNA_LIFT_DOOR2 near_point -1902.0 956.101 901.92 radius 0.001 0.001 0.001 flag 0
            then
            :ARIDNA_SKIP29_JUMP
            01BC: put_object ZA_ARIADNA_LIFT_DOOR1 at -1898.02 956.101 901.92
            01BC: put_object ZA_ARIADNA_LIFT_DOOR2 at -1902.0 956.101 901.92
            0E68: set_player_control_pad 0 1 
            0E69: set_player_control_pad_movement 0 1            
            break
            else
//            0AD1: show_formatted_text_highpriority "NOT BOOM BOOM STAGE" time 2000
            end
                
            until false
            
            Audiostream.Release(21@)
            Audiostream.Release(22@)
            Audiostream.Release(23@)
//            0AD1: show_formatted_text_highpriority "BOOM BOOM STAGE" time 2000            
            jump to @ARIADNA_BOOMBOOM_STAGE                        
            
            end        
        
        until false
                
        end
        
    until false    
                     
    end

end    

   
   
////////////////////////////////////////////////////////
   
if
32@ > 500
then
32@ = 0

for 28@ = 0 to 4
random_int CANALS_CANNIBAL_COUNTER_IS 0 40
gosub @CHUBAKABRA_CREATE
end

end

////////////////////////////////////////////////////////

end

end_thread

:ARIADNA_BOOMBOOM_STAGE

/////////////////
            
while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP30_JUMP
end
                
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1899.320923 966.915039 901.044312 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1899.9331 966.7706 901.0008 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP30_JUMP
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
                        
    actor.PutAtNoOffset(PLAYER_ACTOR,-1904.6135, 949.3752, 900.9931)
    actor.Angle(PLAYER_ACTOR) = 144.06
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
                
    wait 2000
                
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    jump to @ARIADNA_BOOMBOOM_STAGE2
                                        
    end                    
                
/////////////////

end

end_thread                

:ARIADNA_BOOMBOOM_STAGE2
            
while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP31_JUMP
end
                
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -2037.043091 740.119080 917.030212 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2036.7494 739.8342 917.5087 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP31_JUMP
    
    ///////////////////////////////////////////////////////////////////////////////////////
    
    0470: 9@ = actor PLAYER_ACTOR current_weapon
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    0992: set_player PLAYER_CHAR weapons_scrollable 0 
            
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "END64"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
            
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
            
    while 83D0: not  wav 4 loaded 
    wait 0
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
    end
             
    0949: link_wav 4 to_actor PLAYER_ACTOR
    03D1: play_wav 4
            
    0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
            
    32@ = 0
    while 83D2:   wav 4 ended 
    wait 0
    if
    32@ > 3500
        then
        break
        end
    end
            
    040D: unload_wav 4 
    04EF: release_animation "BOMBER"                
            
    ///////////////////////////////////////////////////////////////////////////////////////
    
    0776: create_objects_in_object_group "aridnb7"
    wait 1000
    
    0812: AS_actor PLAYER_ACTOR perform_animation "bomber" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
    
    wait 250        
        
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
        
    0613: 2@ = actor PLAYER_ACTOR animation "bomber" time
        
    if
    not actor.Animation(PLAYER_ACTOR) == "bomber"
        then
        break
        end
            
    until 2@ >= 0.25
    
    0777: delete_objects_in_object_group "aridnb7"
    0776: create_objects_in_object_group "aridnc7"        
    
    $TIME = 5000        
    
    if
    BOMBS_TIMER > 0
        then
        014F: stop_timer BOMBS_TIMER
        create_thread @BMB_HLD
        end
    
    03C3: set_timer_to $TIME type 1 GXT 'BB_19' // global_variable  // Time
    
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    until not actor.Animation(PLAYER_ACTOR) == "bomber"
    
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0            
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
    
    repeat
    wait 0
    
    if and
    not USER_TAPE_TURNED_ON_FLAG == 1
    not $READING_NOTE_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    until $TIME < 1
    
    014F: stop_timer $TIME
    
    0948: create_explosion_at -2035.1 730.793 919.165 type 6 camera_shake 2.5
    0948: create_explosion_at -2032.12 731.185 917.765 type 6 camera_shake 2.5
    0948: create_explosion_at -2030.38 728.984 919.165 type 6 camera_shake 2.5
    0948: create_explosion_at -2032.2013 730.3932 919.665 type 6 camera_shake 2.5
    0948: create_explosion_at -2035.8119 725.8067 920.365 type 6 camera_shake 2.5
    
    0777: delete_objects_in_object_group "aridna8"
    
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "END65"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    jump to @ARIADNA_ARMY_FIGHT_STAGE     
                                        
    end                    
                
/////////////////

end

end_thread

:ARIADNA_ARMY_FIGHT_STAGE

while not model.Available(13670)
wait 0
model.Load(13670)
mload
end
    
ZA_ARIADNA_ARMY_ZOMBIE = actor.Create(23,13670,-2064.9526, 688.7562, 922.4235)

if
model.Available(13670)
then
//model.Destroy(13670)
end

actor.Angle(ZA_ARIADNA_ARMY_ZOMBIE) = 118.3484
08C6: set_actor ZA_ARIADNA_ARMY_ZOMBIE stay_on_bike 1    
actor.SetWalkStyle(ZA_ARIADNA_ARMY_ZOMBIE,"boredz")
0446: set_actor ZA_ARIADNA_ARMY_ZOMBIE dismemberment_possible 0

1@ = 1000
if
AUTOLEVELING_ON_FLAG == 1
then
for 0@ = 1 to $PLAYER_LEVEL
1@ += 100
end
end

actor.Health(ZA_ARIADNA_ARMY_ZOMBIE) = 1@
actor.WeaponAccuracy(ZA_ARIADNA_ARMY_ZOMBIE) = 85
087E: set_actor ZA_ARIADNA_ARMY_ZOMBIE weapon_droppable 0
0A09: set_actor ZA_ARIADNA_ARMY_ZOMBIE muted 1 // versionB
0967: actor ZA_ARIADNA_ARMY_ZOMBIE move_mouth 99999999 ms

0446: set_actor ZA_ARIADNA_ARMY_ZOMBIE dismemberment_possible $ZOMBIE_HEADSHOT 
060F: set_actor ZA_ARIADNA_ARMY_ZOMBIE melee_accuracy_to 150.0 
060B: set_actor ZA_ARIADNA_ARMY_ZOMBIE decision_maker_to $DEC_ZOMBIE  
07DD: set_actor ZA_ARIADNA_ARMY_ZOMBIE attack_rate $ZOMBIE_ATTACK_RATE // previously known as temper_to
0856: set_actor ZA_ARIADNA_ARMY_ZOMBIE enable_crouch 0
07FE: set_actor ZA_ARIADNA_ARMY_ZOMBIE fighting_style_to 5 moves 6
09B5: set_actor ZA_ARIADNA_ARMY_ZOMBIE signal_after_kill 0
09F4: set_actor ZA_ARIADNA_ARMY_ZOMBIE ignore_height_difference_following_nodes $Z_IGNORE_HEIGHT

0781: get_weapon_with_ID 219 model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end    
actor.GiveWeaponAndAmmo(ZA_ARIADNA_ARMY_ZOMBIE,219,1)

Audiostream.PerformAction(ZA_ARIADNA_ZAVAL_MUSIC,STOP)
Audiostream.Release(ZA_ARIADNA_ZAVAL_MUSIC)

ZA_ARIADNA_CARDREADER2_SOUND = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\zaval_music.ogg")
Audiostream.LinkToActor(ZA_ARIADNA_CARDREADER2_SOUND, ZA_ARIADNA_ARMY_ZOMBIE)    
Audiostream.Loop(ZA_ARIADNA_CARDREADER2_SOUND, 1)
Audiostream.Volume(ZA_ARIADNA_CARDREADER2_SOUND) = $SOUNDS_VOLUME
Audiostream.PerformAction(ZA_ARIADNA_CARDREADER2_SOUND,PLAY)

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP32_JUMP
end

until 0364:   actor PLAYER_ACTOR spotted_actor ZA_ARIADNA_ARMY_ZOMBIE

:ARIDNA_SKIP32_JUMP

05E2: AS_actor ZA_ARIADNA_ARMY_ZOMBIE kill_actor PLAYER_ACTOR

$DRUNK_MODE_FLAG = 1
2503: SET_AUDIO_STREAM_SPEED ZA_ARIADNA_CARDREADER2_SOUND speed 0.5

32@ = 0

repeat
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP33_JUMP
end
    
if
32@ > 500
    then
    fade 1 1000
    end
    
if
32@ > 1000
    then
    fade 0 1000
    32@ = 0
    0851: set_actor PLAYER_ACTOR decrease_health_by 10 affect_armour 0
    camera.Shake(20)
    099C: jiggle_camera type 1 timelimit 900.0 intensity 2.0
    end
    
until 8184:   actor ZA_ARIADNA_ARMY_ZOMBIE health < 1

:ARIDNA_SKIP33_JUMP

$DRUNK_MODE_FLAG = 0

Audiostream.PerformAction(ZA_ARIADNA_CARDREADER2_SOUND,STOP)
Audiostream.Release(ZA_ARIADNA_CARDREADER2_SOUND)

fade 1 1000

while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP34_JUMP
end

0889: store_actor ZA_ARIADNA_ARMY_ZOMBIE center_of_body_position_to 0@ 1@ 2@
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at 0@ 1@ 2@ size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
00F2:   actor PLAYER_ACTOR near_actor ZA_ARIADNA_ARMY_ZOMBIE radius 1.0 1.0 sphere 0
044B:   actor PLAYER_ACTOR on_foot
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP34_JUMP                
        
    ///////////////////////////////////////////////////////////////////////////////////////
    
    0470: 9@ = actor PLAYER_ACTOR current_weapon
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
    0992: set_player PLAYER_CHAR weapons_scrollable 0 
        
    while not animation.Available("BOMBER")
    wait 0
    animation.Load("BOMBER")
    end
        
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
        
    while 83D0: not  wav 4 loaded 
    wait 0
    03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
    end
         
    0949: link_wav 4 to_actor PLAYER_ACTOR
    03D1: play_wav 4
        
    0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
        
    32@ = 0
    while 83D2:   wav 4 ended 
    wait 0
    if
    32@ > 3500
        then
        break
        end
    end
        
    040D: unload_wav 4 
    04EF: release_animation "BOMBER"
        
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
        
    01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
        
    ///////////////////////////////////////////////////////////////////////////////////////
                
    gosub @ARIADNA_NOTE2
    
    $END_DIALOG_INST = 1
    wait 0
    if and
    MYERS_ALIVE == 0
    MYERS_MEET_FLAG == 1
    then
    v$ST_DIALOG[0] = "ENB66"
    else
    v$ST_DIALOG[0] = "END66"
    end
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    
    v$ACHIEVEMNT = "SFQ11B"
    $GQUEST_GOT_FLAG = 1                             
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
    $GQST_SLCTD_RGIN = 4
    $GQEST_SLCTD_QST = 11
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    if and
    MYERS_ALIVE == 0
    MYERS_MEET_FLAG == 1
    then
    v$ACHIEVEMNT = "SFQ11C"
    $GQUEST_GOT_FLAG = 1                             
    0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
    v$ACHIEVEMNT = "SFQ17B"
    $GQUEST_GOT_FLAG = 1                             
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ17GT"
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ18GT"
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ19GT"
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ20GT"
    PLAYER_KNOW_ABOUT_BOMBS = 1
    $GQST_SLCTD_RGIN = 4
    $GQEST_SLCTD_QST = 17
    end    
    
    jump to @ARIADNA_EXIT_STAGE             
        
    end
    
end    

end_thread

:ARIADNA_EXIT_STAGE

/////////////////
            
while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed $KEY_USE
then
jump to @ARIDNA_SKIP35_JUMP
end
                
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1970.981323 738.190674 916.397217 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1971.6034 738.22 916.411 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    :ARIDNA_SKIP35_JUMP
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500    
                        
    actor.PutAtNoOffset(PLAYER_ACTOR,-1973.3242, 740.2627, 1015.4313)
    actor.Angle(PLAYER_ACTOR) = 179.2128
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES
    
    0777: delete_objects_in_object_group "metro"
    actor.DestroyInstantly(ZA_ARIADNA_ARMY_ZOMBIE)
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
        
    //////////////////////////////////////////////////////////
    
    random_int 17@ 0 4
    if
    17@ == 0
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost1.wav")
    end
    if
    17@ == 1
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost2.wav")
    end
    if
    17@ == 2
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost3.wav")
    end
    if
    17@ == 3
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost4.wav")
    end
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    if
    not USER_TAPE_TURNED_ON_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    CANALS_MUSIC_PLAY_FLAG = 1
                
    wait 1000
                
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    while true
    wait 0
    
    if and
    $CHEATS_ON == 1
    0AB0:   key_pressed $KEY_USE
    then
    jump to @ARIDNA_SKIP36_JUMP
    end    
                    
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1980.429077 734.117371 1028.852905 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1980.3271 733.6182 1028.575 radius 1.0
    02A0:   actor PLAYER_ACTOR stopped
    0AB0:   key_pressed $KEY_USE
        then
        :ARIDNA_SKIP36_JUMP
        
        player.CanMove(PLAYER_CHAR,false)
        fade 0 500
        $HUD_REMOVE = 1
        wait 500
                            
        actor.PutAtNoOffset(PLAYER_ACTOR,-1990.5081, 733.5218, 1028.5234)
        actor.Angle(PLAYER_ACTOR) = 92.3546
        camera.Restore_WithJumpCut()
        gosub @ARIADNA_TP_TEAMMATES
                    
        wait 2000
                    
        player.CanMove(PLAYER_CHAR,true)
        fade 1 500
        $HUD_REMOVE = 0
        wait 500        
        
        $TEMP_XP = 20000
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        if
        PERK_CHARISMA == 2
        then
        $TEMP_XP *= CHARISMA_LEVEL2_XP_COEFF
        end
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int)
        
        $ONMISSION = 0
        $WITCH_INTERIOR_SPAWN = 1
        
        $QUEST_TYPE = -1
        $NOTSPAWN_ETC = 0
        $SURVIVORS_DONT_SPAWN_FLAG = 0
        HARDCORE_DANGER_FLAG_SCRIPTED = 0
        
        ARIADNA_FINISHED = 1
        DO_NOT_SPAWN_CANNIBALS = 0
        
        0AF1: write_int 0 to_ini_file "saves\ZACM.set" section "SCR" key "ARIADNA_CHECKPOINT"
                
        0777: delete_objects_in_object_group "ariadna1"
        0777: delete_objects_in_object_group "aridna1"
        0777: delete_objects_in_object_group "aridnb1"
        0777: delete_objects_in_object_group "aridna2"
        0777: delete_objects_in_object_group "aridnb2"
        0777: delete_objects_in_object_group "aridna3"
        0777: delete_objects_in_object_group "aridnb3"
        0777: delete_objects_in_object_group "aridna4"
        0777: delete_objects_in_object_group "aridnb4"
        0777: delete_objects_in_object_group "aridna5"
        0777: delete_objects_in_object_group "aridna6"
        0777: delete_objects_in_object_group "aridna7"
        0777: delete_objects_in_object_group "aridna8"
        0777: delete_objects_in_object_group "aridnb5"
        0777: delete_objects_in_object_group "aridnb6"
        0777: delete_objects_in_object_group "aridnb7"
        0777: delete_objects_in_object_group "aridnc7"
        
        jump to @ARIADNA_STAGE_COME_BACK_FOR_BOOM
                                            
        end       
    
    end
                                        
    end                    
                
/////////////////

end

end_thread

:ARIADNA_STAGE_COME_BACK_FOR_BOOM

////////////////////////////FIRST////////////////////////////

while true
wait 0

if
PLAYER_IN_CANALS_FLAG == 1
    then
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1989.6842 733.5753 1028.5234 radius 30.0
        then                
        0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1989.096069 733.146423 1028.826538 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0        
        if and
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1989.6842 733.5753 1028.5234 radius 2.0
        02A0:   actor PLAYER_ACTOR stopped
        0AB0:   key_pressed $KEY_USE
            then
            
            player.CanMove(PLAYER_CHAR,false)
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            actor.PutAtNoOffset(PLAYER_ACTOR,-1978.5039, 733.525, 1028.5828)
            actor.Angle(PLAYER_ACTOR) = 271.7334
            camera.Restore_WithJumpCut()
            gosub @ARIADNA_TP_TEAMMATES
            DO_NOT_SPAWN_CANNIBALS = 1
            
            for 0@ = 0 to 39
            $ARMY69_2_MARKER_FLAG[0@] = -1
        
            if
            056D:   actor $ARMY69_2[0@] defined
            then       
            05BE: AS_actor $ARMY69_2[0@] die                                  
            end
                            
            end
            
//            0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\SFX\dooropen.mp3")
//            Audiostream.PerformAction(0@, PLAY)
//            Audiostream.Loop(0@, 0)
//            Audiostream.Volume(0@) = $SOUNDS_VOLUME
            
            $ONMISSION = 1
            $WITCH_INTERIOR_SPAWN = 0
            
            wait 1000
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            break
            end            
        end
    end

end

////////////////////////////SECOND////////////////////////////

while true
wait 0

//EXIT BACK
if
PLAYER_IN_CANALS_FLAG == 1
    then
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1980.0825 733.576 1028.575 radius 30.0
        then        
        0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1980.429077 734.117371 1028.852905 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0                        
        if and
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1980.0825 733.576 1028.575 radius 1.0
        02A0:   actor PLAYER_ACTOR stopped
        0AB0:   key_pressed $KEY_USE
            then
            
            player.CanMove(PLAYER_CHAR,false)
            fade 0 500
            $HUD_REMOVE = 1
            wait 500
            
            actor.PutAtNoOffset(PLAYER_ACTOR,-1989.9418, 733.527, 1028.5234)
            actor.Angle(PLAYER_ACTOR) = 89.4602
            camera.Restore_WithJumpCut()
            gosub @ARIADNA_TP_TEAMMATES
            DO_NOT_SPAWN_CANNIBALS = 0
            
//            0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\SFX\dooropen.mp3")
//            Audiostream.PerformAction(0@, PLAY)
//            Audiostream.Loop(0@, 0)
//            Audiostream.Volume(0@) = $SOUNDS_VOLUME
            
            wait 1000
            
            $ONMISSION = 0
            $WITCH_INTERIOR_SPAWN = 1
            
            player.CanMove(PLAYER_CHAR,true)
            fade 1 500
            $HUD_REMOVE = 0
            wait 500
            jump to @ARIADNA_STAGE_COME_BACK_FOR_BOOM
            end
        else
        jump to @ARIADNA_STAGE_COME_BACK_FOR_BOOM  
        end
    end

//ENTER DEPO
if
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1972.438 742.8344 1015.6369 radius 30.0
    then
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1972.438 742.8344 1015.0 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0            
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1972.438 742.8344 1015.6369 radius 2.0
    02A0:   actor PLAYER_ACTOR stopped
    0AB0:   key_pressed $KEY_USE
        then
            
        player.CanMove(PLAYER_CHAR,false)
        fade 0 500
        $HUD_REMOVE = 1
        wait 500
        
        0776: create_objects_in_object_group "metro"
        0776: create_objects_in_object_group "aridnc7"
        
        ZA_ARIADNA_VAGON_OBJECT = Object.Init(18914,-2127.99, 894.57, 916.989)
        Object.Angle(ZA_ARIADNA_VAGON_OBJECT) = 90.0
        0392: make_object ZA_ARIADNA_VAGON_OBJECT moveable 1
        07F7: set_object ZA_ARIADNA_VAGON_OBJECT destructible 1
        09CA: set_object ZA_ARIADNA_VAGON_OBJECT immunities BP 1 FP 1 EP 1 CP 1 MP 1
        071F: set_object ZA_ARIADNA_VAGON_OBJECT health_to 999999
        object.KeepInMemory(ZA_ARIADNA_VAGON_OBJECT) = true                    
            
        actor.PutAtNoOffset(PLAYER_ACTOR,-1971.5651, 738.2084, 916.4111)
        actor.Angle(PLAYER_ACTOR) = 157.145
        camera.Restore_WithJumpCut()
        gosub @ARIADNA_TP_TEAMMATES
        
        CANALS_MUSIC_PLAY_FLAG = 0
            
        /////////////////////Плавное затухание/////////////////////
//
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 2500
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 2500
        wait 2500
        audiostream.Release($MUSIC_ASSHOLE)
                                    
        //////////////////////////////////////////////////////////
            
        0@ = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\ljuk.mp3")
        Audiostream.PerformAction(0@, PLAY)
        Audiostream.Loop(0@, 0)
        Audiostream.Volume(0@) = $SOUNDS_VOLUME                                    

        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
            
        audiostream.PerformAction(0@,STOP)
        audiostream.Release(0@)             
            
        player.CanMove(PLAYER_CHAR,true)
        create_thread @REFR_3D
        fade 1 500
        $HUD_REMOVE = 0
        wait 500
            
        $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\ARIADNA\depot.mp3")
        250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2    
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
        
        if
        not USER_TAPE_TURNED_ON_FLAG == 1
        then
            
        /////////////////////Плавное нарастание/////////////////////
//            
//        $MUSIC_FADE_NUMBER += 1
//        if
//        $MUSIC_FADE_NUMBER > 4
//            then
//            $MUSIC_FADE_NUMBER = 0 
//            end    
//            
//        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
//        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
//            
//        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
//        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//        create_thread @MUS_FAD
//            
//        wait 1
        2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume $MUSIC_VOLUME time 1000
            
        //////////////////////////////////////////////////////////
        
        end        
            
        break
        end
    else
    jump to @ARIADNA_STAGE_COME_BACK_FOR_BOOM   
    end

end

////////////////////////////THIRD////////////////////////////
            
while true
wait 0

if and
not USER_TAPE_TURNED_ON_FLAG == 1
not $READING_NOTE_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
else
Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
end
                
0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1970.981323 738.190674 916.397217 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1971.6034 738.22 916.411 radius 1.0
02A0:   actor PLAYER_ACTOR stopped
0AB0:   key_pressed $KEY_USE
    then
    
    player.CanMove(PLAYER_CHAR,false)
    fade 0 500
    $HUD_REMOVE = 1
    wait 500
    
    0777: delete_objects_in_object_group "metro"
    0777: delete_objects_in_object_group "aridnc7"    
                        
    actor.PutAtNoOffset(PLAYER_ACTOR,-1973.3242, 740.2627, 1015.4313)
    actor.Angle(PLAYER_ACTOR) = 179.2128
    camera.Restore_WithJumpCut()
    gosub @ARIADNA_TP_TEAMMATES    
    
    /////////////////////Плавное затухание/////////////////////
//
//    $MUSIC_FADE_NUMBER += 1
//    if
//    $MUSIC_FADE_NUMBER > 4
//        then
//        $MUSIC_FADE_NUMBER = 0 
//        end    
//        
//    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
//    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
//        
//    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
//    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
//    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
//    create_thread @MUS_FAD
//        
//    wait 1
    2504: SET_AUDIO_STREAM_VOLUME_WITH_TRANSITION $MUSIC_ASSHOLE volume 0.0 time 1000
    wait 1000
    audiostream.Release($MUSIC_ASSHOLE)
        
    //////////////////////////////////////////////////////////
    
    random_int 17@ 0 4
    if
    17@ == 0
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost1.wav")
    end
    if
    17@ == 1
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost2.wav")
    end
    if
    17@ == 2
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost3.wav")
    end
    if
    17@ == 3
    then
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\OTHER\CANALS\ost4.wav")
    end
    250A: SET_AUDIO_STREAM_TYPE $MUSIC_ASSHOLE type 2
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    if
    not USER_TAPE_TURNED_ON_FLAG == 1
    then
    Audiostream.Volume($MUSIC_ASSHOLE) = $MUSIC_VOLUME
    else
    Audiostream.Volume($MUSIC_ASSHOLE) = VERO_TIPA_VOLUME
    end
    
    CANALS_MUSIC_PLAY_FLAG = 1
                
    wait 1000
                
    player.CanMove(PLAYER_CHAR,true)
    fade 1 500
    $HUD_REMOVE = 0
    wait 500
    
    while true
    wait 0    
                    
    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1980.429077 734.117371 1028.852905 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1980.3271 733.6182 1028.575 radius 1.0
    02A0:   actor PLAYER_ACTOR stopped
    0AB0:   key_pressed $KEY_USE
        then
        
        player.CanMove(PLAYER_CHAR,false)
        fade 0 500
        $HUD_REMOVE = 1
        wait 500
                            
        actor.PutAtNoOffset(PLAYER_ACTOR,-1990.5081, 733.5218, 1028.5234)
        actor.Angle(PLAYER_ACTOR) = 92.3546
        camera.Restore_WithJumpCut()
        gosub @ARIADNA_TP_TEAMMATES
                    
        wait 2000
                    
        player.CanMove(PLAYER_CHAR,true)
        fade 1 500
        $HUD_REMOVE = 0
        wait 500
        
        $ONMISSION = 0
        $WITCH_INTERIOR_SPAWN = 1
        
        $QUEST_TYPE = -1
        $NOTSPAWN_ETC = 0
        $SURVIVORS_DONT_SPAWN_FLAG = 0
        HARDCORE_DANGER_FLAG_SCRIPTED = 0                
        
        jump to @ARIADNA_STAGE_COME_BACK_FOR_BOOM
                                            
        end       
    
    end
                                        
    end                    
                
/////////////////

end

end_thread

end_thread                

:CAR_CREATE_GENERATOR

if
model.Available(#RCCAM)
then
ZA_ARIADNA_VAGON_GORSHOK = Car.Create(#RCCAM, -2129.1812, 844.4601, 917.9031)
099A: set_car ZA_ARIADNA_VAGON_GORSHOK collision_detection 0
car.LockInCurrentPosition(ZA_ARIADNA_VAGON_GORSHOK,true)
0EB4: set_car_coordinates_simple ZA_ARIADNA_VAGON_GORSHOK position -2129.1812 844.4601 917.9031
0840: link_car ZA_ARIADNA_VAGON_GORSHOK to_interior 1
0338: set_car ZA_ARIADNA_VAGON_GORSHOK visibility 0 

while not model.Available(#MALE01)
wait 0
model.Load(#MALE01)
mload
end

ZA_ARIADNA_VAGON_GORSHOK_DRIVER = actor.CreateAsDriver(26,#MALE01,ZA_ARIADNA_VAGON_GORSHOK)
0619: enable_actor ZA_ARIADNA_VAGON_GORSHOK_DRIVER collision_detection 0
0337: set_actor ZA_ARIADNA_VAGON_GORSHOK_DRIVER visibility 0
0860: link_actor ZA_ARIADNA_VAGON_GORSHOK_DRIVER to_interior 1
0A09: set_actor ZA_ARIADNA_VAGON_GORSHOK_DRIVER muted 1 // versionB 

if
model.Available(#RCCAM)
then
//model.Destroy(#RCCAM)
end

else
0E98: request_priority_model #RCCAM
0E99: load_all_priority_models_now
wait 0
jump to @CAR_CREATE_GENERATOR
end

0A97: 11@ = car ZA_ARIADNA_VAGON_GORSHOK struct 
11@ += 9 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
0A97: 11@ = car ZA_ARIADNA_VAGON_GORSHOK struct 
11@ += 4 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
24@ = 0.0 
0A97: 22@ = car ZA_ARIADNA_VAGON_GORSHOK struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value 24@ virtual_protect 0 
08C3: clear 12@ bit 1 
08C3: clear 12@ bit 2 
0A97: 11@ = car ZA_ARIADNA_VAGON_GORSHOK struct 
11@ += 18 
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0 
08BD: set 12@ bit 2 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2 
Car.RemoveReferences(ZA_ARIADNA_VAGON_GORSHOK)
car.DoorStatus(ZA_ARIADNA_VAGON_GORSHOK,2)

return

:KARTOCHKA_USE

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0
0812: AS_actor PLAYER_ACTOR perform_animation "Use_SwipeCard" IFP "camera" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
    
wait 250        
    
repeat
wait 0           
until not actor.Animation(PLAYER_ACTOR) == "Use_SwipeCard"

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
    
return

:BUTTON_USE

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0
0812: AS_actor PLAYER_ACTOR perform_animation "bomber" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
    
wait 250        
    
repeat
wait 0    
0613: 2@ = actor PLAYER_ACTOR animation "bomber" time
    
if
not actor.Animation(PLAYER_ACTOR) == "bomber"
    then
    break
    end
        
until 2@ >= 0.963

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
    
return

:ARIADNA_NOTE

player.CanMove(PLAYER_CHAR,false)
        
fade 0 500
$HUD_REMOVE = 1
wait 500
        
cinema.Widescreen(1)
0A48: enable_menu_access_in_widescreen_mode 0
$READING_NOTE_FLAG = 1
        
////////////////////////////////////////////////////////
        
random_int 16@ 0 to 5 

if
16@ == 0
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll1.mp3") 
end
    
if
16@ == 1
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll2.mp3") 
end
    
if
16@ == 2
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll3.mp3") 
end
    
if
16@ == 3
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll4.mp3") 
end
    
if
16@ == 4
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll5.mp3") 
end
       
Audiostream.PerformAction(14@, PLAY)
Audiostream.Volume(14@) = $SOUNDS_VOLUME        
        
////////////////////////////////////////////////////////
    
0A0E: disable_text_with_style 1
        
0391: release_textures
0390: load_txd_dictionary 'ariadna' 
wait 1
038F: load_texture "alexand" as 1 // Load dictionary with 0390 first 
wait 1    
        
32@ = 0
$SPEED_08_FLAG = 1 
        
  repeat 
wait 0
03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
03E3: set_texture_to_be_drawn_antialiased 1 
  until 0E3E: is_button_just_pressed 0 17
         
$SPEED_08_FLAG = 0
015D: set_gamespeed 1.0      
         
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
        
0A0E: disable_text_with_style 0
        
////////////////////////////////////////////////////////
        
audiostream.PerformAction(14@,STOP)
audiostream.Release(14@)
        
$SPEED_08_FLAG = 0
$READING_NOTE_FLAG = 0
    
cinema.Widescreen(0)
0A48: enable_menu_access_in_widescreen_mode 1   
        
015D: set_gamespeed 1.0 
        
player.CanMove(PLAYER_CHAR) = true
        
fade 1 500
$HUD_REMOVE = 0
wait 500
        
return

:ARIADNA_NOTE2

player.CanMove(PLAYER_CHAR,false)
        
fade 0 500
$HUD_REMOVE = 1
wait 500
        
cinema.Widescreen(1)
0A48: enable_menu_access_in_widescreen_mode 0
$READING_NOTE_FLAG = 1
        
////////////////////////////////////////////////////////
        
random_int 16@ 0 to 5 

if
16@ == 0
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll1.mp3") 
end
    
if
16@ == 1
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll2.mp3") 
end
    
if
16@ == 2
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll3.mp3") 
end
    
if
16@ == 3
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll4.mp3") 
end
    
if
16@ == 4
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll5.mp3") 
end
       
Audiostream.PerformAction(14@, PLAY)
Audiostream.Volume(14@) = $SOUNDS_VOLUME        
        
////////////////////////////////////////////////////////
    
0A0E: disable_text_with_style 1
        
0391: release_textures
0390: load_txd_dictionary 'ariadna' 
wait 1
038F: load_texture "order" as 1 // Load dictionary with 0390 first 
wait 1    
        
32@ = 0
$SPEED_08_FLAG = 1 
        
  repeat 
wait 0
03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
03E3: set_texture_to_be_drawn_antialiased 1 
  until 0E3E: is_button_just_pressed 0 17
         
$SPEED_08_FLAG = 0
015D: set_gamespeed 1.0      
         
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
        
0A0E: disable_text_with_style 0
        
////////////////////////////////////////////////////////
        
audiostream.PerformAction(14@,STOP)
audiostream.Release(14@)
        
$SPEED_08_FLAG = 0
$READING_NOTE_FLAG = 0
    
cinema.Widescreen(0)
0A48: enable_menu_access_in_widescreen_mode 1   
        
015D: set_gamespeed 1.0 
        
player.CanMove(PLAYER_CHAR) = true
        
fade 1 500
$HUD_REMOVE = 0
wait 500
        
return

:CHUBAKABRA_CREATE

if
056D:   actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] defined
then
return
end

gosub @CHUBAKABRA_GET_COORD

if
6@ == 1
then
6@ = 0
CANNIBAL_SPAWNED_NOT_IN_HIS_ZONE_FLAG = 0
return
end

while not model.Available(14732)
wait 0
model.Load(14732)
mload
end

$ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] = actor.Create(29,14732,2@,3@,4@)

if
model.Available(14732)
then
//model.Destroy(14732)
end

0E24: fix_char $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
            
0D10: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] alpha 255 // IF and SET
09F4: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] ignore_height_difference_following_nodes $Z_IGNORE_HEIGHT    
Actor.WeaponAccuracy($ARMY69_2[CANALS_CANNIBAL_COUNTER_IS]) = 200

1@ = 1000
if
AUTOLEVELING_ON_FLAG == 1
then
for 0@ = 1 to $PLAYER_LEVEL
1@ += 100
end
end

Actor.Health($ARMY69_2[CANALS_CANNIBAL_COUNTER_IS]) = 1@     
Actor.SetWalkStyle($ARMY69_2[CANALS_CANNIBAL_COUNTER_IS], "SURV5")
0446: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] dismemberment_possible 0
060B: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] decision_maker_to $DEC_PCAMP
07DD: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] attack_rate 100 // previously known as temper_to
081A: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] weapon_skill_to 2  
060F: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] melee_accuracy_to 999.0
0946: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] actions_uninterupted_by_weapon_fire 1
094E: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] mute_pain_audio 1
03FE: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] money 0
    
0781: get_weapon_with_ID 215 model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end    
actor.GiveWeaponAndAmmo($ARMY69_2[CANALS_CANNIBAL_COUNTER_IS],215,1)
    
//05E2: AS_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] kill_actor PLAYER_ACTOR
//077A: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] acquaintance 4 to_actors_pedtype 0 // see ped.dat
    
0A96: 0@ = actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] struct
0A8E: 0@ = 0@ + 1376
0A8C: write_memory 0@ size 4 value 1024.0 virtual_protect 1
0856: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] enable_crouch 0

0860: link_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] to_interior 1
087E: set_actor $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS] weapon_droppable 0

$ARMY69_2_MARKER[CANALS_CANNIBAL_COUNTER_IS] = marker.CreateAboveActor($ARMY69_2[CANALS_CANNIBAL_COUNTER_IS])
marker.SetIconSize($ARMY69_2_MARKER[CANALS_CANNIBAL_COUNTER_IS],2)
018B: set_marker $ARMY69_2_MARKER[CANALS_CANNIBAL_COUNTER_IS] radar_mode 0

random_float 0@ 0.0 360.0
actor.Angle($ARMY69_2[CANALS_CANNIBAL_COUNTER_IS]) = 0@

if
$ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS] == -1
then

random_int 0@ 0 2
if
0@ == 0
then
$ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS] = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\screecher1.mp3")
Audiostream.LinkToActor($ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS], $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS])    
else
$ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS] = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\screecher2.mp3")
Audiostream.LinkToActor($ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS], $ARMY69_2[CANALS_CANNIBAL_COUNTER_IS])
end

Audiostream.PerformAction($ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS], PLAY)
Audiostream.Loop($ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS], 1)
Audiostream.Volume($ARMY69_2_MARKER_FLAG[CANALS_CANNIBAL_COUNTER_IS]) = $SOUNDS_VOLUME

end

return

:CHUBAKABRA_GET_COORD

0208: 2@ = random_float_in_ranges -1744.3013 -1872.8558 
0208: 3@ = random_float_in_ranges 1131.5078 990.5876
4@ = 684.4515
5@ = 693.5503 
4@ += 1.5
5@ -= 1.5

6@ = 0
gosub @CHUBAKABRA_COORD_SET

return

:CHUBAKABRA_COORD_SET 
0D3A: get_collision_between_poitns 2@ 3@ 4@ and 2@ 3@ 5@ flags 1 0 0 0 0 0 0 0 ignore_entity 0 store_point_to 2@ 3@ 4@ entity_to 5@ colpoint_data_to 1 // IF and SET
if and
8AE2: 30@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 5.0 find_next 0 pass_wrecked 1 //IF and SET
8AE1: 31@ = random_actor_near_point 2@ 3@ 4@ in_radius 2.0 find_next 0 pass_deads 0
4@ > 400.0
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 2@ 3@ 4@ radius 350.0 
jf @CHUBAKABRA_COORD_SET_FAIL
if or 
80C2: not  sphere_onscreen 2@ 3@ 4@ radius 1.0
8EEA: not locate_char_distance_to_coordinates PLAYER_ACTOR pos 2@ 3@ 4@ radius 100.0
jf @CHUBAKABRA_COORD_SET_FAIL
return

:CHUBAKABRA_COORD_SET_FAIL
6@ = 1
return

:ARIADNA_KARTOCHKA_GOT

ZA_ARIADNA_GOT_KEYCARD_FLAG = 1

///////////////////////////////////////////////////////////////////////////////////////
    
0470: 9@ = actor PLAYER_ACTOR current_weapon
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0 
        
while not animation.Available("BOMBER")
wait 0
animation.Load("BOMBER")
end
        
03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
        
while 83D0: not  wav 4 loaded 
wait 0
03CF: load_wav OLDWAV_WARDROBE_20802 as 4 
end
         
0949: link_wav 4 to_actor PLAYER_ACTOR
03D1: play_wav 4
        
0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
        
32@ = 0
while 83D2:   wav 4 ended 
wait 0
if
32@ > 3500
    then
    break
    end
end
        
040D: unload_wav 4 
04EF: release_animation "BOMBER"
        
0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
        
01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
        
///////////////////////////////////////////////////////////////////////////////////////

return

:ARIADNA_CARDREADER_DESTROY

//////////////////////////////////////////////////////////////

if
ZA_ARIADNA_CARDREADER1_BROKEN_FLAG == 1
    then
    random_int 0@ 0 40        
    if
    056D:   actor $ARMY69_2[0@] defined
        then       
        if and
        00A4:   actor $ARMY69_2[0@] sphere 0 in_cube_cornerA -1870.9138 989.7194 500.0 cornerB -1873.8218 998.3294 800.0
        not actor.Dead($ARMY69_2[0@])        
            then
            0208: 2@ = random_float_in_ranges -1875.1605 -1878.1776 
            0208: 3@ = random_float_in_ranges 994.1721 996.607
            actor.PutAtNoOffset($ARMY69_2[0@],2@,3@,684.5024)
//            0AD1: show_formatted_text_highpriority "gay in" time 300
            else
//            0AD1: show_formatted_text_highpriority "no gay near" time 300
            end 
        end
    end
    
if
ZA_ARIADNA_CARDREADER2_BROKEN_FLAG == 1
    then
    random_int 0@ 0 40        
    if
    056D:   actor $ARMY69_2[0@] defined
        then       
        if and
        00A4:   actor $ARMY69_2[0@] sphere 0 in_cube_cornerA -1890.2354 992.1667 500.0 cornerB -1894.2781 998.2177 800.0
        not actor.Dead($ARMY69_2[0@])        
            then
            0208: 2@ = random_float_in_ranges -1895.0476 -1897.6141 
            0208: 3@ = random_float_in_ranges 994.1751 996.792
            actor.PutAtNoOffset($ARMY69_2[0@],2@,3@,684.5024)
//            0AD1: show_formatted_text_highpriority "gay in" time 300
            else
//            0AD1: show_formatted_text_highpriority "no gay near" time 300
            end 
        end
    end           

//////////////////////////////////////////////////////////////

if
ZA_ARIADNA_CARDREADER1_BROKEN_FLAG == 0
    then
    random_int 0@ 0 40        
    if
    056D:   actor $ARMY69_2[0@] defined
        then       
        if and
        00A4:   actor $ARMY69_2[0@] sphere 0 in_cube_cornerA -1873.5383 990.0606 500.0 cornerB -1869.7354 1002.7977 800.0
        not actor.Dead($ARMY69_2[0@])        
            then
            ZA_ARIADNA_CARDREADER1_BROKEN_TRIES += 1
            Audiostream.PerformAction(ZA_ARIADNA_CARDREADER1_SOUND, PLAY)
            if
            ZA_ARIADNA_CARDREADER1_BROKEN_TRIES > 6
                then
                ZA_ARIADNA_CARDREADER1_BROKEN_FLAG = 1
                
                Audiostream.PerformAction(ZA_ARIADNA_CARDREADER1_SOUND, STOP)
                Audiostream.Release(ZA_ARIADNA_CARDREADER1_SOUND)
                
                ZA_ARIADNA_CARDREADER1_SOUND = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\cardre.mp3")
                Audiostream.LinkToActor(ZA_ARIADNA_CARDREADER1_SOUND, ZA_ARIADNA_CARDREADER1_DUMMY)    
                Audiostream.Loop(ZA_ARIADNA_CARDREADER1_SOUND, 1)
                Audiostream.Volume(ZA_ARIADNA_CARDREADER1_SOUND) = $SOUNDS_VOLUME
                Audiostream.PerformAction(ZA_ARIADNA_CARDREADER1_SOUND, PLAY)
                
//                0AD1: show_formatted_text_highpriority "gay in" time 300
                0777: delete_objects_in_object_group "aridnb6"
                0776: create_objects_in_object_group "aridna6"
                end
            else
//            0AD1: show_formatted_text_highpriority "no gay near" time 300
            end   
        end
    end
    
if
ZA_ARIADNA_CARDREADER2_BROKEN_FLAG == 0
    then
    random_int 0@ 0 40        
    if
    056D:   actor $ARMY69_2[0@] defined
        then       
        if and
        00A4:   actor $ARMY69_2[0@] sphere 0 in_cube_cornerA -1894.2883 992.5141 500.0 cornerB -1891.5514 998.2183 800.0
        not actor.Dead($ARMY69_2[0@])        
            then
            ZA_ARIADNA_CARDREADER2_BROKEN_TRIES += 1
            Audiostream.PerformAction(ZA_ARIADNA_CARDREADER2_SOUND, PLAY)
            if
            ZA_ARIADNA_CARDREADER2_BROKEN_TRIES > 6
                then
                ZA_ARIADNA_CARDREADER2_BROKEN_FLAG = 1
                
                Audiostream.PerformAction(ZA_ARIADNA_CARDREADER2_SOUND, STOP)
                Audiostream.Release(ZA_ARIADNA_CARDREADER2_SOUND)
                
                ZA_ARIADNA_CARDREADER2_SOUND = Audiostream.Load3d("AUDIO\SOUNDS\OTHER\ARIADNA\cardre.mp3")
                Audiostream.LinkToActor(ZA_ARIADNA_CARDREADER2_SOUND, ZA_ARIADNA_CARDREADER2_DUMMY)    
                Audiostream.Loop(ZA_ARIADNA_CARDREADER2_SOUND, 1)
                Audiostream.Volume(ZA_ARIADNA_CARDREADER2_SOUND) = $SOUNDS_VOLUME
                Audiostream.PerformAction(ZA_ARIADNA_CARDREADER2_SOUND, PLAY)
                
//                0AD1: show_formatted_text_highpriority "gay in" time 300
                0777: delete_objects_in_object_group "aridnb5"
                0776: create_objects_in_object_group "aridna5"
                end
            else
//            0AD1: show_formatted_text_highpriority "no gay near" time 300
            end   
        end
    end
    
return

:ARIADNA_TP_TEAMMATES

if
0800:   in_two_players_mode
then
return
end

0A96: 0@ = actor PLAYER_ACTOR struct
0AA5: call 0x043F1F0 num_params 1 pop 0 0@ //CEntryExit::WarpGangWithPlayer
return

:ARI_PHR
thread 'ARI_PHR'

while true
wait 0

if
00FE: actor PLAYER_ACTOR sphere 0 in_sphere -1900.0428 958.4788 684.4946 radius 10.0 10.0 5.0
then
end_thread
end

if
0@ == 0
then
if
00FE: actor PLAYER_ACTOR sphere 0 in_sphere -1899.843 966.7776 901.0008 radius 5.0 5.0 2.0
	then
	0@ = 1
	$END_DIALOG_INST = 1
	wait 0
	v$ST_DIALOG[0] = "END55"
	$DIALOG_COUNT = 0
	$DIALOG_NOT_SKIP = 1
	create_thread @DG_SYS2
	end
end

if
1@ == 0
then
if
00FE: actor PLAYER_ACTOR sphere 0 in_sphere -2029.3693 738.4559 917.5087 radius 5.0 5.0 2.0
	then
	1@ = 1
	$END_DIALOG_INST = 1
	wait 0
	v$ST_DIALOG[0] = "END56"
	$DIALOG_COUNT = 0
	$DIALOG_NOT_SKIP = 1
	create_thread @DG_SYS2
	end
end

if
2@ == 0
then
if
00FE: actor PLAYER_ACTOR sphere 0 in_sphere -2030.5247 732.6403 917.5087 radius 5.0 5.0 2.0
	then
	2@ = 1
	$END_DIALOG_INST = 1
	wait 0
	v$ST_DIALOG[0] = "END57"
	$DIALOG_COUNT = 0
	$DIALOG_NOT_SKIP = 1
	create_thread @DG_SYS2
	end
end

if
3@ == 0
then
if
00FE: actor PLAYER_ACTOR sphere 0 in_sphere -2128.5796 839.0663 916.4205 radius 5.0 5.0 2.0
	then
	3@ = 1
	$END_DIALOG_INST = 1
	wait 0
	v$ST_DIALOG[0] = "END58"
	$DIALOG_COUNT = 0
	$DIALOG_NOT_SKIP = 1
	create_thread @DG_SYS2
	end
end

if
4@ == 0
then
if
00FE: actor PLAYER_ACTOR sphere 0 in_sphere -1805.889 1063.4966 684.4603 radius 5.0 5.0 2.0
	then
	4@ = 1
	$END_DIALOG_INST = 1
	wait 0
	v$ST_DIALOG[0] = "END60"
	$DIALOG_COUNT = 0
	$DIALOG_NOT_SKIP = 1
	create_thread @DG_SYS2
	end
end

if and
0@ == 1
1@ == 1
2@ == 1
3@ == 1
4@ == 1
    then
    end_thread
    end

end

end_thread                                 