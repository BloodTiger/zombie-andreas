const
CSF_MYERS_DEAD_FLAG = 29@
CSF_MYERS_DEAD_DIG = 27@
end

:CSF_END
thread 'CSF_END'

//////////////////////////////////////////////////////////////////////////////

if
0@ == 69
then

0@ = marker.CreateIconAndSphere2(36,-2197.8457, 989.8751, 80.0)

while CSF_CURRENT_PROGRESS_FLAG == -1
wait 0

if or
$CAMP_DEAD_FLAG[6] == 1 //Лагерь Гарнет вымер
$CAMP_DEAD_FLAG[7] == 1 //Лагерь Джервиса вымер
$CAMP_DEAD_FLAG[8] == 1 //Лагерь Лайонелла вымер
CARMA_VERY_BAD_FLAG == 1 //Игрок стал отморозком
    then
    marker.Disable(0@)
    end_thread
    end

end

marker.Disable(0@)
end_thread

end

//////////////////////////////////////////////////////////////////////////////

0@ = marker.CreateIconAndSphere(36,-2184.8276, 1000.2729, 80.0068)
CSF_CURRENT_PROGRESS_FLAG = 0
0776: create_objects_in_object_group "myerscorp"
32@ = 0
005C: 32@ += $CSF_MYERS_TIMER_PRE // (int) 

while true
wait 0

if
CSF_CURRENT_PROGRESS_FLAG == 3
then
if
875C: not  marker 0@ enabled
    then
    0@ = marker.CreateIconAndSphere(36,-1298.3721, 490.5735, 11.1953)
    end
    
if and
ARIADNA_FINISHED == 1
PLAYER_KNOW_ABOUT_BOMBS == 0
    then  
    if
    875C: not  marker 20@ enabled
        then
        20@ = marker.CreateIconAndSphere(120,-1372.6031, 498.924, 11.1953)
        end  
    end
    
else
if and
ARIADNA_FINISHED == 1
PLAYER_KNOW_ABOUT_BOMBS == 0
MYERS_ALIVE == 1
    then  
    if
    875C: not  marker 20@ enabled
        then
        20@ = marker.CreateIconAndSphere2(120,-2197.9683, 990.074, 80.0)
        end
    else
    if and
    PLAYER_KNOW_ABOUT_BOMBS == 1
    075C:  marker 20@ enabled
        then
        marker.Disable(20@) 
        end 
    end  
end

if and
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
0AB0:   key_pressed 45
CSF_MYERS_DEAD_FLAG == 0
CSF_CURRENT_PROGRESS_FLAG == 1
then
0AD1: show_formatted_text_highpriority "Myers Timer is %d/1200000" time 10000 32@
end

if and
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
0AB0:   key_pressed 45
CSF_CURRENT_PROGRESS_FLAG == 2
then
0AD1: show_formatted_text_highpriority "Otpravka timer is %d/1440000" time 10000 33@
end

if and
$SAVESTATUS_TRUE == 1
$SAVING_DELAY == 1
AFTERSAVE_TIME_COUNT >= 20160
then

32@ += 480000

repeat
wait 0
until $SAVING_DELAY == 0

end

if and
$SAVESTATUS_TRUE == 1
$SAVING_DELAY == 1
AFTERSAVE_TIME_COUNT >= 20160
then

33@ += 480000

repeat
wait 0
until $SAVING_DELAY == 0

end

if and
0AB0:   key_pressed 8
CSF_CURRENT_PROGRESS_FLAG == 2
MAIN_QUEST9_COMPLETED_FLAG == 4
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
    then
    0AD1: show_formatted_text_highpriority "timer vse" time 2000
    33@ = 1440000
    end
    
if and
0AB0:   key_pressed 8
CSF_MYERS_DEAD_FLAG == 0
CSF_CURRENT_PROGRESS_FLAG == 1
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
    then
    0AD1: show_formatted_text_highpriority "myers vse" time 2000
    CSF_MYERS_DEAD_FLAG = 1
    end    

if and
32@ > 1200000
CSF_MYERS_DEAD_FLAG == 0
    then
    CSF_MYERS_DEAD_FLAG = 1    
    end

if and
PLAYER_IN_CANALS_FLAG == 1
CSF_CURRENT_PROGRESS_FLAG == 1
    then
    if
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1975.7847 63.3559 996.0719 radius 30.0
        then
        0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1976.340332 62.115002 996.219177 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0        
        
        if
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1976.340332 62.115002 996.219177 radius 2.0        
        then
        0512: show_permanent_text_box 'GME1493'
        else
        if
        0A2A:   text_box 'GME1493' displayed
            then
            text.RemoveTextBox()
            end
        end
        
        if and
        CSF_MYERS_DEAD_FLAG == 1
        0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1975.7847 63.3559 996.0719 radius 2.0
            then
            //////////////////////////////МАЙЕРС СДОХ, КСЕНУСА НЕ БУДЕТ!//////////////////////////////                        
            
            if and
            02A0:   actor PLAYER_ACTOR stopped
            $ONMISSION == 0
            0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1975.8254 62.3545 996.0719 radius 2.0
            0AB0:   key_pressed $KEY_USE
                then
                
                player.CanMove(PLAYER_CHAR,false)
                fade 0 500
                $HUD_REMOVE = 1
                wait 500
                
                if
                0A2A:   text_box 'GME1493' displayed
                then
                text.RemoveTextBox()
                end
                
                actor.PutAtNoOffset(PLAYER_ACTOR,-1968.2001, 58.8173, 996.0563)
                actor.Angle(PLAYER_ACTOR) = 182.7674
                camera.Restore_WithJumpCut()
                
                $QUEST_TYPE = 25
                $ONMISSION = 1
                
                DO_NOT_SPAWN_CANNIBALS = 1
                
                for 0@ = 0 to 39
    
                if
                056D:   actor $ARMY69_2[0@] defined
                then
                actor.DestroyWithFade($ARMY69_2[0@])
                $ARMY69_2[0@] = -69
                end
                
                end
                
                gosub @CSF_PEDIKS_IN_TV_CREATE
                actor.PutAtNoOffset($ARMY69_2[0],-1926.6285, 51.8905, 994.7672)
                actor.Angle($ARMY69_2[0]) = 254.6423
                actor.PutAtNoOffset($ARMY69_2[1],-1973.9598, 55.2414, 996.0563)
                actor.Angle($ARMY69_2[1]) = 311.3591
                actor.PutAtNoOffset($ARMY69_2[2],-1964.5298, 52.1417, 994.7672)
                actor.Angle($ARMY69_2[2]) = 135.1524
                actor.DestroyInstantly($ARMY69_2[3])
                $ARMY69_2[3] = -69
                05BE: AS_actor $ARMY69_2[0] die
                05BE: AS_actor $ARMY69_2[1] die
                05BE: AS_actor $ARMY69_2[2] die                                
                
                wait 500
                fade 1 500
                $HUD_REMOVE = 0
                player.CanMove(PLAYER_CHAR,true)
                wait 500                                
                
                repeat
                wait 0
                
                if or
                0EE4: locate_char_distance_to_char PLAYER_ACTOR char $ARMY69_2[0] radius 5.0
                0EE4: locate_char_distance_to_char PLAYER_ACTOR char $ARMY69_2[1] radius 5.0
                0EE4: locate_char_distance_to_char PLAYER_ACTOR char $ARMY69_2[2] radius 5.0
                    then
                    break
                    end
                    
                until false
                
                v$ST_DIALOG[0] = "END94"
                $DIALOG_COUNT = 0
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2
                
                repeat
                wait 0
                until $DIALOG_END == 1
                
                v$ST_DIALOG[0] = "END95"
                v$ST_DIALOG[1] = "END96"
                $DIALOG_COUNT = 1
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2
                
                v$ACHIEVEMNT = "SFQ13E"
                $GQUEST_GOT_FLAG = 1
                0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ13GT"
                $GQST_SLCTD_RGIN = 4
                $GQEST_SLCTD_QST = 13
                
                repeat
                wait 0
                0889: store_actor $ARMY69_2[0] center_of_body_position_to 1@ 2@ 3@
                0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
                
                if and
                00F2:   actor PLAYER_ACTOR near_actor $ARMY69_2[0] radius 1.0 1.0 sphere 0
                044B:   actor PLAYER_ACTOR on_foot
                02A0:   actor PLAYER_ACTOR stopped
                0AB0:   key_pressed $KEY_USE
                    then                
                        
                    ///////////////////////////////////////////////////////////////////////////////////////
                    
                    0470: 9@ = actor PLAYER_ACTOR current_weapon
                    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
                    0992: set_player PLAYER_CHAR weapons_scrollable 0 
                        
                    while not animation.Available("BOMBER")
                    wait 0
                    animation.Load("BOMBER")
                    end
                        
                    03CF: load_wav 20802 as 4 
                        
                    while 83D0: not  wav 4 loaded 
                    wait 0
                    03CF: load_wav 20802 as 4 
                    end
                         
                    0949: link_wav 4 to_actor PLAYER_ACTOR
                    03D1: play_wav 4
                        
                    0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
                        
                    32@ = 0
                    while 83D2:   wav 4 ended 
                    wait 0
                    if
                    32@ > 3500
                        then
                        break
                        end
                    end
                        
                    040D: unload_wav 4 
                    04EF: release_animation "BOMBER"
                        
                    0992: set_player PLAYER_CHAR weapons_scrollable 1
                    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
                        
                    01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
                        
                    ///////////////////////////////////////////////////////////////////////////////////////
                    
                    gosub @MYERS_NOTE
                    MYERS_MEET_FLAG = 1
                    
                    if
                    ARIADNA_FINISHED == 1
                    then
                    v$ST_DIALOG[0] = "ENB97"
                    else
                    v$ST_DIALOG[0] = "END97"
                    end
                    v$ST_DIALOG[1] = "END98"
                    $DIALOG_COUNT = 1
                    $DIALOG_NOT_SKIP = 1
                    create_thread @DG_SYS2
                    
                    repeat
                    wait 0
                    until $DIALOG_END == 1
                                
                    break             
                        
                    end
                
                until false
                
                if
                056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
                then
                car.Destroy($USED_CAR[LATEST_CAR_SLOT_USED])
                end
                                  
                $SAVE_CAR_X[LATEST_CAR_SLOT_USED] = -2187.8979
                $SAVE_CAR_Y[LATEST_CAR_SLOT_USED] = 1017.5416
                $SAVE_CAR_Z[LATEST_CAR_SLOT_USED] = 79.5356
                $SAVE_CAR_ANGLE[LATEST_CAR_SLOT_USED] = 89.7372                                
                
                fade 0 500
                $HUD_REMOVE = 1
                player.CanMove(PLAYER_CHAR,false)
                wait 500
                
                /////////////////////Плавное затухание/////////////////////

                $MUSIC_FADE_NUMBER += 1
                if
                $MUSIC_FADE_NUMBER > 4
                    then
                    $MUSIC_FADE_NUMBER = 0 
                    end    
                        
                0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
                $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
                        
                $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1
                $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
                $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
                create_thread @MUS_FAD
                        
                wait 1
                
                CSF_CURRENT_PROGRESS_FLAG = 2
                INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1
                
                select_interior 0
                0860: link_actor PLAYER_ACTOR to_interior 0
                
                actor.PutAtNoOffset(PLAYER_ACTOR,-2197.4382, 989.7289, 80.0)
                actor.Angle(PLAYER_ACTOR) = 105.6439
                
                actor.DestroyInstantly($ARMY69_2[0])
                actor.DestroyInstantly($ARMY69_2[1])
                actor.DestroyInstantly($ARMY69_2[2])
                actor.DestroyInstantly($ARMY69_2[3])
                
                $QUEST_READY_FLAG = 1
                
                $TALK_SIMULATE = 1
                $CAMP_SPOTTED_FLAG = 1
                $CAMP_SPOTTED_FLAG_SAVE = 1
                
                create_thread @REFR_3D
                
                repeat
                wait 0
                player.CanMove(PLAYER_CHAR,false)
                until $QUEST_TYPE == -1
                
                $ONMISSION = 0
                $NOTSPAWN_ETC = 0
                $SURVIVORS_DONT_SPAWN_FLAG = 0
                INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0
                DO_NOT_SPAWN_CANNIBALS = 0
                33@ = 0
                
                if
                ARIADNA_FINISHED == 1
                then
                v$ACHIEVEMNT = "SFQ11C"
                $GQUEST_GOT_FLAG = 1                             
                0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
                v$ACHIEVEMNT = "SFQ17B"
                $GQUEST_GOT_FLAG = 1                             
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ17GT"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ18GT"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ19GT"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ20GT"
                PLAYER_KNOW_ABOUT_BOMBS = 1
                $GQST_SLCTD_RGIN = 4
                $GQEST_SLCTD_QST = 17
                end                                                                
                                      
                end    
            else
            //////////////////////////////МАЙЕРС НЕ СДОХ, НО КСЕНУСА ВСЕ РАВНО НЕ БУДЕТ!//////////////////////////////
            if and
            02A0:   actor PLAYER_ACTOR stopped
            $ONMISSION == 0
            0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1975.8254 62.3545 996.0719 radius 2.0
            0AB0:   key_pressed $KEY_USE
                then
                
                player.CanMove(PLAYER_CHAR,false)
                fade 0 500
                $HUD_REMOVE = 1
                wait 500
                
                if
                0A2A:   text_box 'GME1493' displayed
                then
                text.RemoveTextBox()
                end
                
                DO_NOT_SPAWN_CANNIBALS = 1
                
                for 0@ = 0 to 39
    
                if
                056D:   actor $ARMY69_2[0@] defined
                then
                actor.DestroyWithFade($ARMY69_2[0@])
                $ARMY69_2[0@] = -69
                end
                
                end
                
                actor.PutAtNoOffset(PLAYER_ACTOR,-1968.2001, 58.8173, 996.0563)
                actor.Angle(PLAYER_ACTOR) = 182.7674
                camera.Restore_WithJumpCut()
                
                $QUEST_TYPE = 24
                $ONMISSION = 1
                
                /////////////////////Плавное затухание/////////////////////

                $MUSIC_FADE_NUMBER += 1
                if
                $MUSIC_FADE_NUMBER > 4
                    then
                    $MUSIC_FADE_NUMBER = 0 
                    end    
                        
                0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
                $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
                        
                $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1
                $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
                $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
                create_thread @MUS_FAD
                        
                wait 1
                
                gosub @CSF_PEDIKS_IN_TV_CREATE
                
                wait 500
                fade 1 500
                $HUD_REMOVE = 0
                player.CanMove(PLAYER_CHAR,true)
                wait 500                                
                                                
                //////////////////////////////////////////////////////////
                
                $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\CSF\myerstheme.wav")
                        
                Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
                Audiostream.Loop($MUSIC_ASSHOLE, 1)
                Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
                        
                /////////////////////Плавное нарастание/////////////////////
                        
                $MUSIC_FADE_NUMBER += 1
                if
                $MUSIC_FADE_NUMBER > 4
                    then
                    $MUSIC_FADE_NUMBER = 0 
                    end    
                        
                0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
                0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
                        
                $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
                $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
                $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
                create_thread @MUS_FAD
                        
                wait 1                               
                
                0350: set_actor $ARMY69_2[1] maintain_position_when_attacked 1
                0816: set_actor $ARMY69_2[1] dont_chase_victim 1
                0350: set_actor $ARMY69_2[2] maintain_position_when_attacked 1
                0816: set_actor $ARMY69_2[2] dont_chase_victim 1
                0350: set_actor $ARMY69_2[3] maintain_position_when_attacked 1
                0816: set_actor $ARMY69_2[3] dont_chase_victim 1
                
                05E2: AS_actor $ARMY69_2[1] kill_actor PLAYER_ACTOR
                05E2: AS_actor $ARMY69_2[2] kill_actor PLAYER_ACTOR
                05E2: AS_actor $ARMY69_2[3] kill_actor PLAYER_ACTOR
                
                05C5: AS_actor $ARMY69_2[0] cower 9999999 ms
                
                v$ST_DIALOG[0] = "END77"
                $DIALOG_COUNT = 0
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2
                
                repeat
                wait 0
                
                if
                not actor.Dead($ARMY69_2[0])
                jf @CSF_MYERS_DIED_PIZDEC_BY_IGROK
                
                if and
                actor.Dead($ARMY69_2[1])
                actor.Dead($ARMY69_2[2])
                actor.Dead($ARMY69_2[3])
                    then
                    break
                    end
                
                until false
                
                v$ST_DIALOG[0] = "END78"
                $DIALOG_COUNT = 0
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2
                
                v$OBJECTIVE = "GME1372"
                0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
                $SOUNDS_VOLUME3 *= 0.5
                Audiostream.Volume($MENU_SCIFI_SOUND) = $SOUNDS_VOLUME3 
                Audiostream.Loop($MENU_SCIFI_SOUND, 0)
                Audiostream.PerformAction($MENU_SCIFI_SOUND, PLAY)
                
                repeat
                wait 0
                
                if
                not actor.Dead($ARMY69_2[0])
                jf @CSF_MYERS_DIED_PIZDEC_BY_IGROK
                
                actor.StorePos($ARMY69_2[0],1@,2@,3@)
                0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at 1@ 2@ 3@ size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0
                
                if and
                0457:   player 0 aiming_at_actor $ARMY69_2[0]
                0EE4: locate_char_distance_to_char PLAYER_ACTOR char $ARMY69_2[0] radius 5.0
                then
                break
                end
                
                until false
                
                v$OBJECTIVE = "DUMMY"
                
                05BF: AS_actor $ARMY69_2[0] look_at_actor PLAYER_ACTOR 9999999 ms
                05BF: AS_actor PLAYER_ACTOR look_at_actor $ARMY69_2[0] 9999999 ms
                
                if
                ARIADNA_FINISHED == 1
                then
                v$ST_DIALOG[0] = "END79"
                v$ST_DIALOG[1] = "END80"
                v$ST_DIALOG[2] = "ENB81"
                v$ST_DIALOG[3] = "ENB82"
                v$ST_DIALOG[4] = "ENB83"
                v$ST_DIALOG[5] = "ENB84"
                v$ST_DIALOG[6] = "ENB85"
                v$ST_DIALOG[7] = "ENB86"
                v$ST_DIALOG[8] = "ENB87"
                v$ST_DIALOG[9] = "ENB88"
                v$ST_DIALOG[10] = "ENB89"
                v$ST_DIALOG[11] = "ENB90"
                v$ST_DIALOG[12] = "ENB91"
                v$ST_DIALOG[13] = "END92"
                $DIALOG_COUNT = 13
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2                
                else
                v$ST_DIALOG[0] = "END79"
                v$ST_DIALOG[1] = "END80"
                $DIALOG_COUNT = 1
                $DIALOG_NOT_SKIP = 1
                create_thread @DG_SYS2
                end
                
                32@ = 0
                
                repeat
                wait 0
                
                if
                32@ > 3000
                then
                $DIALOG_NOT_SKIP = 0
                end
                
                if
                8457: not  player 0 aiming_at_actor $ARMY69_2[0]
                then
                $DIALOG_PAUSE = 1
                else
                $DIALOG_PAUSE = 0
                end
                
                if
                not actor.Dead($ARMY69_2[0])
                jf @CSF_MYERS_DIED_PIZDEC_BY_IGROK
                
                until $DIALOG_END == 1
                
                $DIALOG_PAUSE = 0
                MYERS_MEET_FLAG = 1
                
                if
                ARIADNA_FINISHED == 1
                then                
                PLAYER_KNOW_ABOUT_BOMBS = 1
                v$ACHIEVEMNT = "SFQ11C"
                $GQUEST_GOT_FLAG = 1                             
                0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
                $GQST_SLCTD_RGIN = 4
                $GQEST_SLCTD_QST = 11                                
                end                                
                
                if
                056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
                then
                car.Destroy($USED_CAR[LATEST_CAR_SLOT_USED])
                end
                
                $SAVE_CAR_X[LATEST_CAR_SLOT_USED] = -2187.8979
                $SAVE_CAR_Y[LATEST_CAR_SLOT_USED] = 1017.5416
                $SAVE_CAR_Z[LATEST_CAR_SLOT_USED] = 79.5356
                $SAVE_CAR_ANGLE[LATEST_CAR_SLOT_USED] = 89.7372                
                
                fade 0 500
                $HUD_REMOVE = 1
                player.CanMove(PLAYER_CHAR,false)
                wait 500
                
                /////////////////////Плавное затухание/////////////////////

                $MUSIC_FADE_NUMBER += 1
                if
                $MUSIC_FADE_NUMBER > 4
                    then
                    $MUSIC_FADE_NUMBER = 0 
                    end    
                        
                0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
                $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
                        
                $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
                $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
                $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
                create_thread @MUS_FAD
                        
                wait 1
                
                CSF_CURRENT_PROGRESS_FLAG = 2
                INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1
                
                select_interior 0
                0860: link_actor PLAYER_ACTOR to_interior 0
                
                actor.PutAtNoOffset(PLAYER_ACTOR,-2197.4382, 989.7289, 80.0)
                actor.Angle(PLAYER_ACTOR) = 105.6439
                
                actor.DestroyInstantly($ARMY69_2[0])
                actor.DestroyInstantly($ARMY69_2[1])
                actor.DestroyInstantly($ARMY69_2[2])
                actor.DestroyInstantly($ARMY69_2[3])
                
                $QUEST_READY_FLAG = 1
                
                $TALK_SIMULATE = 1
                $CAMP_SPOTTED_FLAG = 1
                $CAMP_SPOTTED_FLAG_SAVE = 1
                
                create_thread @REFR_3D
                
                repeat
                wait 0
                player.CanMove(PLAYER_CHAR,false)
                until $QUEST_TYPE == -1
                
                $ONMISSION = 0
                $NOTSPAWN_ETC = 0
                $SURVIVORS_DONT_SPAWN_FLAG = 0
                INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 0
                DO_NOT_SPAWN_CANNIBALS = 0
                33@ = 0
                
                v$ACHIEVEMNT = "SFQ13C"
                $GQUEST_GOT_FLAG = 1
                0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ13GT"
                $GQST_SLCTD_RGIN = 4
                $GQEST_SLCTD_QST = 13
                
                if
                ARIADNA_FINISHED == 1
                then
                
                repeat
                wait 0
                until $GQUEST_GOT_FLAG == 0
                
                v$ACHIEVEMNT = "SFQ11C"
                $GQUEST_GOT_FLAG = 1                             
                0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
                $GQST_SLCTD_RGIN = 4
                $GQEST_SLCTD_QST = 11
                
                repeat
                wait 0
                until $GQUEST_GOT_FLAG == 0
                                
                v$ACHIEVEMNT = "SFQ17B"
                $GQUEST_GOT_FLAG = 1                             
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ17GT"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ18GT"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ19GT"
                0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ20GT"
                $GQST_SLCTD_RGIN = 4
                $GQEST_SLCTD_QST = 17                                
                
                end                
                
                end
            end
        end
    end
    
if
not MAIN_QUEST9_COMPLETED_FLAG == 4
    then
    33@ = 0
    end    
    
if and
CSF_CURRENT_PROGRESS_FLAG == 2
MAIN_QUEST9_COMPLETED_FLAG == 4
33@ > 1440000
MYERS_ALIVE == 0
$ONMISSION == 0
not $ENTERED_CAMP_NUMBER == 6
not $ENTERED_CAMP_NUMBER == 7
not $ENTERED_CAMP_NUMBER == 8
    then
    if and
    not $SAVESTATUS == 1
    not $SAVESTATUS_TRUE == 1
    not $SAVING_DELAY == 1
    not $INT_ENTERING_FLAG == 1
    not $CAMP_SPOTTED_FLAG_SAVE == 1
    AFTER_ON_MISSION_TIMER == -1
    not $PANEL_OPEN == 1
    not $PANEL_OPEN2 == 1
        then
        
        $ONMISSION = 1
        
        create_thread @CSF_REM
    
        ///////////////////////////////////////////////////////////////////
    
        $RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
        Audiostream.Loop($RADIO_SOUND, 1)  
        Audiostream.Volume($RADIO_SOUND) = 0.0
        Audiostream.PerformAction($RADIO_SOUND, PLAY)
        
        Audiostream.Loop($RADIO_ON_SOUND,0)
        Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
        Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME
            
        /////////////////////Плавное нарастание/////////////////////
            
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
            
        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
            
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
        create_thread @MUS_FAD
            
        wait 1 
            
        ////////////////////////////////////////////////////////
               
        v$ST_DIALOG[0] = "END100"
        v$ST_DIALOG[1] = "END101"
        $DIALOG_COUNT = 1
        $DIALOG_NOT_SKIP = 1                 
        create_thread @DG_SYS2    
            
        text.ClearAll()
            
        repeat
        wait 0                        
            
        if or
        $SAVESTATUS_TRUE == 1
        $SAVESTATUS == 1
            then
            break
            end
            
        until $DIALOG_END == 1
            
        /////////////////////Плавное затухание/////////////////////
            
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
            
        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
            
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
        create_thread @MUS_FAD
            
        wait 1
        
        Audiostream.Loop($RADIO_OFF_SOUND,0)
        Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
        Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME
            
        0@ = marker.CreateIconAndSphere(36,-1298.3721, 490.5735, 11.1953)
        
        CSF_CURRENT_PROGRESS_FLAG = 3
        $ONMISSION = 0
        
        v$ACHIEVEMNT = "SFQ16B"
        $GQUEST_GOT_FLAG = 1
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ16GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 16
        
        if and
        ARIADNA_FINISHED == 1
        PLAYER_KNOW_ABOUT_BOMBS == 0
        then
        
        if
        075C:  marker 20@ enabled
        then
        marker.Disable(20@)
        end
        
        20@ = marker.CreateIconAndSphere(120,-1372.6031, 498.924, 11.1953)
        end
        
        end    
    end
    
if and
CSF_CURRENT_PROGRESS_FLAG == 2
MAIN_QUEST9_COMPLETED_FLAG == 4
33@ > 1440000
MYERS_ALIVE == 1
$ONMISSION == 0
not $ENTERED_CAMP_NUMBER == 6
not $ENTERED_CAMP_NUMBER == 7
not $ENTERED_CAMP_NUMBER == 8
    then
    if and
    not $SAVESTATUS == 1
    not $SAVESTATUS_TRUE == 1
    not $SAVING_DELAY == 1
    not $INT_ENTERING_FLAG == 1
    not $CAMP_SPOTTED_FLAG_SAVE == 1
    AFTER_ON_MISSION_TIMER == -1
    not $PANEL_OPEN == 1
    not $PANEL_OPEN2 == 1
        then
        
        $ONMISSION = 1
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 1
        LADDER_ON_MARKER_FLAG = 1
        create_thread @CSF_REM
        
        ///////////////////////////////////////////////////////////////////
    
        $RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
        Audiostream.Loop($RADIO_SOUND, 1)  
        Audiostream.Volume($RADIO_SOUND) = 0.0
        Audiostream.PerformAction($RADIO_SOUND, PLAY)
        
        Audiostream.Loop($RADIO_ON_SOUND,0)
        Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
        Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME
            
        /////////////////////Плавное нарастание/////////////////////
            
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
            
        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
            
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
        create_thread @MUS_FAD
            
        wait 1 
            
        ////////////////////////////////////////////////////////
               
        v$ST_DIALOG[0] = "END127"
        v$ST_DIALOG[1] = "END128"
        v$ST_DIALOG[2] = "END129" //NOT USED, NOT RADIO DIALOG
        $DIALOG_COUNT = 1
        $DIALOG_NOT_SKIP = 1                 
        create_thread @DG_SYS2    
            
        text.ClearAll()
            
        repeat
        wait 0                        
            
        if or
        $SAVESTATUS_TRUE == 1
        $SAVESTATUS == 1
            then
            break
            end
            
        until $DIALOG_END == 1
        
        ///////////////////////////////////////////////
    
        32@ = 0
        
        while true
        wait 0
        text.ShowH('GME1036',100,1)
        
        if
        0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()
        break
        end
        
        if
        0E3E: is_button_just_pressed 0 button 10
        then
        $QUEST_TYPE = 12869
        create_thread @CSFREM2
        text.ClearAll()
        v$ST_DIALOG[0] = "END150"
        v$ST_DIALOG[1] = "END151"
        $DIALOG_COUNT = 1
        $DIALOG_NOT_SKIP = 1                 
        create_thread @DG_SYS2
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        $QUEST_TYPE = -1
        
        /////////////////////Плавное затухание/////////////////////
            
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
            
        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
            
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
        create_thread @MUS_FAD
        
        Audiostream.Loop($RADIO_OFF_SOUND,0)
        Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
        Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME                              
        
        CSF_UEHALI_BEZ_NAS_FLAG = 1
        $ONMISSION = 0
        $NOTSPAWN_ETC = 0
        $SURVIVORS_DONT_SPAWN_FLAG = 0
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
        LADDER_ON_MARKER_FLAG = 0
        
        $TEMP_XP = 150000
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        if
        PERK_CHARISMA == 2
        then
        $TEMP_XP *= CHARISMA_LEVEL2_XP_COEFF
        end
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int)
        
        v$ACHIEVEMNT = "SFQ15E"
        $GQUEST_GOT_FLAG = 1
        0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ12GT"
        0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ15GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 15
        
        end_thread
        end
        
        end
        
        ///////////////////////////////////////////////
        
        v$ST_DIALOG[0] = "ENY130"
        $DIALOG_COUNT = 0
        $DIALOG_NOT_SKIP = 1                 
        create_thread @DG_SYS2    
            
        text.ClearAll()
            
        repeat
        wait 0                        
            
        if or
        $SAVESTATUS_TRUE == 1
        $SAVESTATUS == 1
            then
            break
            end
            
        until $DIALOG_END == 1
            
        /////////////////////Плавное затухание/////////////////////
            
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
            
        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
            
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
        create_thread @MUS_FAD
            
        wait 1
        
        Audiostream.Loop($RADIO_OFF_SOUND,0)
        Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
        Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME
            
        0@ = marker.CreateIconAndSphere(36,-1298.3721, 490.5735, 11.1953)
        
        CSF_CURRENT_PROGRESS_FLAG = 3
        $ONMISSION = 0
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG = 0
        LADDER_ON_MARKER_FLAG = 0
        32@ = 0
        
        v$ACHIEVEMNT = "SFQ15B"
        $GQUEST_GOT_FLAG = 1
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ15GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 15
        
        if and
        ARIADNA_FINISHED == 1
        PLAYER_KNOW_ABOUT_BOMBS == 0
        then
        
        if
        075C:  marker 20@ enabled
        then
        marker.Disable(20@)
        end
        
        20@ = marker.CreateIconAndSphere(120,-1372.6031, 498.924, 11.1953)
        end
        
        end    
    end
    
if and
CSF_CURRENT_PROGRESS_FLAG == 3
MAIN_QUEST9_COMPLETED_FLAG == 4
LS_BOMB_ACTIVATED_FLAG == 1
SF_BOMB_ACTIVATED_FLAG == 1
LV_BOMB_ACTIVATED_FLAG == 1
MYERS_ALIVE == 0
    then
    
    if
    $ZONE69_CAPTURED == 1
    then    
    marker.Disable(0@)
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "ENDG66"
    v$ST_DIALOG[1] = "ENDC66"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    else
    marker.Disable(0@)
    $END_DIALOG_INST = 1
    wait 0
    v$ST_DIALOG[0] = "ENDG66"
    v$ST_DIALOG[1] = "ENDE66"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end    
        
    end_thread
    end        
    
if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1298.3721 490.5735 11.1953 radius 2.0
CSF_CURRENT_PROGRESS_FLAG == 3
MAIN_QUEST9_COMPLETED_FLAG == 4
$ONMISSION == 0
    then
    
    marker.Disable(0@)
    
    player.CanMove(PLAYER_CHAR,false)
    $HUD_REMOVE = 1
    
    fade 0 500
    wait 500
    
    start_mission 100
    end_thread
    
    end   
    
if and
ARIADNA_FINISHED == 1
CSF_CURRENT_PROGRESS_FLAG == 3
MAIN_QUEST9_COMPLETED_FLAG == 4
$ONMISSION == 0
PLAYER_KNOW_ABOUT_BOMBS == 0
    then
    
//    0D54: draw_corona_with_extra_params_texture 0 color 255 0 0 155 on_entity 0 at -1372.6031 498.924 11.1953 size 0.5 far_clip 25.0 near_clip 0.01 flare 0 enable_reflection 1 check_obstacles 0 flash_while_fading 0 fade_speed 15.0 only_from_below 0    
    if and
    0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -1372.6031 498.924 11.1953 radius 2.0
    044B:   actor PLAYER_ACTOR on_foot
    02A0:   actor PLAYER_ACTOR stopped
        then
        
        player.CanMove(0,false)
        
        marker.Disable(20@)
        
        if
        MYERS_ALIVE == 1
        then
        
        03E6: remove_text_box
        08DA: remove_panel $PANEL 
        00BE: text_clear_all
                        
        $QUEST_TYPE = 24
        $ONMISSION = 1
                 
        fade 0 2000
        $HUD_REMOVE = 1
        wait 2000
        
        cinema.Widescreen(1)
        
        v$ST_DIALOG[0] = "END158"
        v$ST_DIALOG[1] = "END159"
        v$ST_DIALOG[2] = "END160"
        v$ST_DIALOG[3] = "END161"
        v$ST_DIALOG[4] = "END162"
        v$ST_DIALOG[5] = "END163"
        v$ST_DIALOG[6] = "END164"
        v$ST_DIALOG[7] = "END165"
        v$ST_DIALOG[8] = "END166"
        v$ST_DIALOG[9] = "END167"
        $DIALOG_COUNT = 9
        create_thread @DG_SYS2
        
        repeat
        wait 0
        0924: enable_screen_darkness 1 with_value 255
        fade 1 1
        until $DIALOG_END == 1
        
        0924: enable_screen_darkness 1 with_value 255
        fade 0 0
        wait 2000
        0924: enable_screen_darkness 0 with_value -1
        
        PLAYER_KNOW_ABOUT_BOMBS = 1
        
        actor.PutAtNoOffset(PLAYER_ACTOR,-1370.9186, 499.0299, 11.1953)
        actor.Angle(PLAYER_ACTOR) = 270.2018
        camera.Restore_WithJumpCut()
        
        cinema.Widescreen(0)
        
        fade 1 2000
        $HUD_REMOVE = 0
        wait 2000
        
        player.CanMove(0,true)
        
        v$ACHIEVEMNT = "SFQ11C"
        $GQUEST_GOT_FLAG = 1                             
        0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 11
        
        $ONMISSION = 0
        $QUEST_TYPE = -1
        
        repeat
        wait 0
        until $GQUEST_GOT_FLAG == 0
        
        $NOTSPAWN_ETC = 0
        $SURVIVORS_DONT_SPAWN_FLAG = 0

        v$ACHIEVEMNT = "SFQ17B"
        $GQUEST_GOT_FLAG = 1                             
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ17GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ18GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ19GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ20GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 17
        
        else
        
        fade 0 2000
        $HUD_REMOVE = 1
        wait 2000
            
        ///////////////////////////////////////////////////////////////////////////////////////
        
        0470: 9@ = actor PLAYER_ACTOR current_weapon
        06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
        0992: set_player PLAYER_CHAR weapons_scrollable 0 
            
        while not animation.Available("BOMBER")
        wait 0
        animation.Load("BOMBER")
        end
            
        03CF: load_wav 20802 as 4 
            
        while 83D0: not  wav 4 loaded 
        wait 0
        03CF: load_wav 20802 as 4 
        end
             
        0949: link_wav 4 to_actor PLAYER_ACTOR
        03D1: play_wav 4
            
        0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "BOMBER" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1     
            
        32@ = 0
        while 83D2:   wav 4 ended 
        wait 0
        if
        32@ > 3500
            then
            break
            end
        end
            
        040D: unload_wav 4 
        04EF: release_animation "BOMBER"
            
        0992: set_player PLAYER_CHAR weapons_scrollable 1
        06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
            
        01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
            
        ///////////////////////////////////////////////////////////////////////////////////////
        
        PLAYER_KNOW_ABOUT_BOMBS = 1        
        actor.PutAtNoOffset(PLAYER_ACTOR,-1370.9186, 499.0299, 11.1953)
        actor.Angle(PLAYER_ACTOR) = 270.2018
        camera.Restore_WithJumpCut()
        
        fade 1 2000
        $HUD_REMOVE = 0
        wait 2000
        
        gosub @MYERS_NOTE                
        
        v$ST_DIALOG[0] = "ENB97"
        $DIALOG_COUNT = 0
        $DIALOG_NOT_SKIP = 1
        create_thread @DG_SYS2
        
        repeat
        wait 0
        until $DIALOG_END == 1
        
        player.CanMove(0,true) 
        
        v$ACHIEVEMNT = "SFQ11C"
        $GQUEST_GOT_FLAG = 1                             
        0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 11
        
        $ONMISSION = 0
        $QUEST_TYPE = -1
        
        repeat
        wait 0
        until $GQUEST_GOT_FLAG == 0
        
        $NOTSPAWN_ETC = 0
        $SURVIVORS_DONT_SPAWN_FLAG = 0

        v$ACHIEVEMNT = "SFQ17B"
        $GQUEST_GOT_FLAG = 1                             
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ17GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ18GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ19GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ20GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 17
    
        end
        
        player.CanMove(0,true)
                            
        end
    
    end         

if and
0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos -2184.8276 1000.2729 80.0068 radius 2.0
02A0:   actor PLAYER_ACTOR stopped
044B:   actor PLAYER_ACTOR on_foot
CSF_CURRENT_PROGRESS_FLAG == 0
$ONMISSION == 0
    then
    
    marker.Disable(0@)
    $QUEST_TYPE = 26
    
    player.CanMove(PLAYER_CHAR,false)
    $HUD_REMOVE = 1
    
    fade 0 500
    wait 500
    
    if
    056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
    then
    car.Destroy($USED_CAR[LATEST_CAR_SLOT_USED])
    $SAVE_CAR_X[LATEST_CAR_SLOT_USED] = -2187.8979
    $SAVE_CAR_Y[LATEST_CAR_SLOT_USED] = 1017.5416
    $SAVE_CAR_Z[LATEST_CAR_SLOT_USED] = 79.5356
    $SAVE_CAR_ANGLE[LATEST_CAR_SLOT_USED] = 89.7372
    end
    
    $SAVESTATUS = 1
    wait 1000
    cinema.Widescreen(1)
    BLACK_POLOSKI_ON = 1    
    $ONMISSION = 1
    
    $CAMP_SPOTTED_FLAG_SAVE = 1
    
    actor.PutAtNoOffset(PLAYER_ACTOR,-2184.8276, 1000.2729, 80.0068)
    actor.Angle(PLAYER_ACTOR) = 218.9303
    
    CSF_CURRENT_PROGRESS_FLAG = 1
    
    0936: set_camera -2200.198486 1020.380676 85.061996 position_to -2187.468750 1003.766541 82.375465 time 90000 smooth_transition 1
    0920: point_camera -2199.610596 1019.601318 84.845329 transverse_to -2186.864746 1002.982605 82.231911 time 90000 smooth_transition 1
    
    gosub @CSF_SOBRANIE_START
    
    fade 1 3000
    
    MAIN_QUEST_MUSIC_FLAG = 1
    $MUSIC_ASSHOLE = Audiostream.Load("AUDIO\SOUNDS\QUESTS\CSF\csfsummit.wav")
    Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
    Audiostream.Loop($MUSIC_ASSHOLE, 1)
    Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
    
    /////////////////////Плавное нарастание/////////////////////
    
    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
    
    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
    
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
    create_thread @MUS_FAD
    
    wait 1 
    
    ////////////////////////////////////////////////////////
    
    0084: $DIALOG_ACTOR[0] = $ARMY69_2[0] // (int)
    0084: $DIALOG_ACTOR[1] = $ARMY69_2[0] // (int)
    0084: $DIALOG_ACTOR[2] = $ARMY69_2[0] // (int)
    0084: $DIALOG_ACTOR[3] = $ARMY69_2[0] // (int)
    0084: $DIALOG_ACTOR[4] = $ARMY69_2[0] // (int)
    0084: $DIALOG_ACTOR[5] = $ARMY69_2[0] // (int)
    v$ST_DIALOG[0] = "END69"
    v$ST_DIALOG[1] = "END70"
    v$ST_DIALOG[2] = "END71"
    v$ST_DIALOG[3] = "END72"
    v$ST_DIALOG[4] = "END73"
    v$ST_DIALOG[5] = "END74"
    v$ST_DIALOG[6] = "END74L"
    $DIALOG_COUNT = 6
    $DIALOG_NOT_SKIP = 0
    create_thread @DG_SYS
    
    repeat
    wait 0
    
    /////////////////////////////
    
    if
    0E45: frame_mod 30
        then
        
        for 0@ = 3 to 25        
        05BF: AS_actor $ARMY69_2[0@] look_at_actor $ARMY69_2[0] 90000 ms            
        end
        
        end
    
    /////////////////////////////
    
    until $DIALOG_END == 1
    
    fade 0 500
    wait 500
    
    0936: set_camera -2200.198486 1020.380676 85.061996 position_to -2187.468750 1003.766541 82.375465 time 1 smooth_transition 1
    0920: point_camera -2199.610596 1019.601318 84.845329 transverse_to -2186.864746 1002.982605 82.231911 time 1 smooth_transition 1
    
    0E2F: delete_render_object 28@
    
    for 0@ = 0 to 26
    actor.DestroyInstantly($ARMY69_2[0@])
    $ARMY69_2[0@] = -69
    end
    
    $SAVESTATUS = 0
    wait 1000
    
    /////////////////////Плавное затухание/////////////////////

    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
        
    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int)
    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
    create_thread @MUS_FAD
        
    wait 1
        
    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
    wait 0
    end
    
    MAIN_QUEST_MUSIC_FLAG = 0
    MAIN_QUEST9_COMPLETED_FLAG = 3
    
    cinema.Widescreen(0)
    BLACK_POLOSKI_ON = 0
    $QUEST_TYPE = -1
    $ONMISSION = 0
    actor.PutAtNoOffset(PLAYER_ACTOR,-2184.8276, 1000.2729, 80.0068)
    actor.Angle(PLAYER_ACTOR) = 38.9303
    camera.Restore_WithJumpCut()
    $CAMP_SPOTTED_FLAG_SAVE = 1
    player.CanMove(PLAYER_CHAR,true)
    
    fade 1 500
    $HUD_REMOVE = 0
    wait 500        
    
    $NOTSPAWN_ETC = 0
    $SURVIVORS_DONT_SPAWN_FLAG = 0
    
    if
    ARIADNA_FINISHED == 1
    then
    v$ST_DIALOG[0] = "END75"
    v$ST_DIALOG[1] = "ENB76"
    $DIALOG_COUNT = 1
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    else
    v$ST_DIALOG[0] = "END75"
    $DIALOG_COUNT = 0
    $DIALOG_NOT_SKIP = 1
    create_thread @DG_SYS2
    end
    
    v$ACHIEVEMNT = "SFQ12B"
    $GQUEST_GOT_FLAG = 1                             
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ12GT"
    $GQST_SLCTD_RGIN = 4
    $GQEST_SLCTD_QST = 12
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    v$ACHIEVEMNT = "SFQ13B"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ13GT"
    $GQST_SLCTD_RGIN = 4
    $GQEST_SLCTD_QST = 13
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    v$ACHIEVEMNT = "SFQ14B"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ14GT"
    $GQST_SLCTD_RGIN = 4
    $GQEST_SLCTD_QST = 14            
        
    end
    
if 
CSF_CURRENT_PROGRESS_FLAG < 3
then
if or
$CAMP_DEAD_FLAG[6] == 1 //Лагерь Гарнет вымер
$CAMP_DEAD_FLAG[7] == 1 //Лагерь Джервиса вымер
$CAMP_DEAD_FLAG[8] == 1 //Лагерь Лайонелла вымер
CARMA_VERY_BAD_FLAG == 1 //Игрок стал отморозком
    then
    
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ12GT"
    
    0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SRV" key "SFQ13GT"
    if
    1@ == 0
    then       
    
    v$ACHIEVEMNT = "SFQ13F"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ13GT"
    $GQST_SLCTD_RGIN = 0    
    $GQEST_SLCTD_QST = 8
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    end
    
    0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SRV" key "SFQ14GT"
    if
    1@ == 0
    then            
    
    v$ACHIEVEMNT = "SFQ14F"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ14GT"
    $GQST_SLCTD_RGIN = 0    
    $GQEST_SLCTD_QST = 9
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    end
    
    0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
    if
    1@ == 0
    then            
    
    v$ACHIEVEMNT = "SFQ11F"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
    $GQST_SLCTD_RGIN = 0    
    $GQEST_SLCTD_QST = 9
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    end        
        
    end_thread
    end
else
if
CARMA_VERY_BAD_FLAG == 1 //Игрок стал отморозком
    then
    
    marker.Disable(0@)
    if
    075C:  marker 20@ enabled
    then
    marker.Disable(20@)
    end
        
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ12GT"
    
    0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SRV" key "SFQ15GT"
    if
    1@ == 0
    then            
    
    v$ACHIEVEMNT = "SFQ15F"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ15GT"
    $GQST_SLCTD_RGIN = 0    
    $GQEST_SLCTD_QST = 9
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    end
    
    0AF0: 1@ = get_int_from_ini_file "data\survival.set" section "SRV" key "SFQ16GT"
    if
    1@ == 0
    then            
    
    v$ACHIEVEMNT = "SFQ16F"
    $GQUEST_GOT_FLAG = 1
    0AF1: write_int 3 to_ini_file "data\survival.set" section "SRV" key "SFQ16GT"
    $GQST_SLCTD_RGIN = 0    
    $GQEST_SLCTD_QST = 9
    
    repeat
    wait 0
    until $GQUEST_GOT_FLAG == 0
    
    end
    
    end
end    

end

end_thread

:CSF_SOBRANIE_START

while not model.Available($CAMP_MODEL7[8])
wait 0
model.Load($CAMP_MODEL7[8])
mload
end

$ARMY69_2[0] = actor.Create(26,$CAMP_MODEL7[8],-2182.6294, 997.5231, 81.7154) //Лайонелл    
0D10: set_actor $ARMY69_2[0] alpha 255 // IF and SET
actor.Angle($ARMY69_2[0]) = 43.8321

while not model.Available($CAMP_MODEL5[7])
wait 0
model.Load($CAMP_MODEL5[7])
mload
end

$ARMY69_2[1] = actor.Create(26,$CAMP_MODEL5[7],-2182.6482, 996.4487, 81.7154) //Лейн    
0D10: set_actor $ARMY69_2[1] alpha 255 // IF and SET
actor.Angle($ARMY69_2[1]) = 43.8321

while not model.Available($CAMP_MODEL3[6])
wait 0
model.Load($CAMP_MODEL3[6])
mload
end

$ARMY69_2[2] = actor.Create(26,$CAMP_MODEL3[6],-2181.5115, 997.6298, 81.7154) //Джервис    
0D10: set_actor $ARMY69_2[2] alpha 255 // IF and SET
actor.Angle($ARMY69_2[2]) = 43.8321

//////////////////////Лагерь в СФ (океанское побережье)//////////////////////

while not model.Available($CAMP_MODEL1[6])
wait 0
model.Load($CAMP_MODEL1[6])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -2.0 0.0 0.0
$ARMY69_2[3] = actor.Create(26,$CAMP_MODEL1[6],3@,4@,5@) //X: -2.0, Y: 0.0
actor.Angle($ARMY69_2[3]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[3] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[3],3@,4@,5@)

/////////////////

while not model.Available($CAMP_MODEL2[6])
wait 0
model.Load($CAMP_MODEL2[6])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 2.0 0.0 0.0
$ARMY69_2[4] = actor.Create(26,$CAMP_MODEL2[6],3@,4@,5@) //X: 2.0, Y: 0.0
actor.Angle($ARMY69_2[4]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[4] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[4],3@,4@,5@)
/////////////////

while not model.Available($CAMP_MODEL4[6])
wait 0
model.Load($CAMP_MODEL4[6])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 2.0 -2.0 0.0
$ARMY69_2[5] = actor.Create(26,$CAMP_MODEL4[6],3@,4@,5@) //X: 2.0, Y: -2.0
actor.Angle($ARMY69_2[5]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[5] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[5],3@,4@,5@)
/////////////////

while not model.Available($CAMP_MODEL5[6])
wait 0
model.Load($CAMP_MODEL5[6])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -2.0 -2.0 0.0
$ARMY69_2[6] = actor.Create(26,$CAMP_MODEL5[6],3@,4@,5@) //X: -2.0, Y: -2.0
actor.Angle($ARMY69_2[6]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[6] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[6],3@,4@,5@)
/////////////////

while not model.Available($CAMP_MODEL6[6])
wait 0
model.Load($CAMP_MODEL6[6])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -2.0 -4.0 0.0
$ARMY69_2[7] = actor.Create(26,$CAMP_MODEL6[6],3@,4@,5@) //X: -2.0, Y: -4.0
actor.Angle($ARMY69_2[7]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[7] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[7],3@,4@,5@)
/////////////////

////////////////////////////Лагерь в СФ (поклонная гора)////////////////////////////
while not model.Available($CAMP_MODEL1[7])
wait 0
model.Load($CAMP_MODEL1[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 2.0 -4.0 0.0
$ARMY69_2[8] = actor.Create(26,$CAMP_MODEL1[7],3@,4@,5@) //X: 2.0, Y: -4.0
actor.Angle($ARMY69_2[8]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[8] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[8],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL2[7])
wait 0
model.Load($CAMP_MODEL2[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -4.0 -4.0 0.0
$ARMY69_2[9] = actor.Create(26,$CAMP_MODEL2[7],3@,4@,5@) //X: -4.0, Y: -4.0
actor.Angle($ARMY69_2[9]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[9] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[9],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL3[7])
wait 0
model.Load($CAMP_MODEL3[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 4.0 -4.0 0.0
$ARMY69_2[10] = actor.Create(26,$CAMP_MODEL3[7],3@,4@,5@) //X: 4.0, Y: -4.0
actor.Angle($ARMY69_2[10]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[10] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[10],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL4[7])
wait 0
model.Load($CAMP_MODEL4[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 4.0 -6.0 0.0
$ARMY69_2[11] = actor.Create(26,$CAMP_MODEL4[7],3@,4@,5@) //X: 4.0, Y: -6.0
actor.Angle($ARMY69_2[11]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[11] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[11],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL6[7])
wait 0
model.Load($CAMP_MODEL6[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -4.0 -6.0 0.0
$ARMY69_2[12] = actor.Create(26,$CAMP_MODEL6[7],3@,4@,5@) //X: -4.0, Y: -6.0
actor.Angle($ARMY69_2[12]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[12] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[12],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL7[7])
wait 0
model.Load($CAMP_MODEL7[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -4.0 -8.0 0.0
$ARMY69_2[13] = actor.Create(26,$CAMP_MODEL7[7],3@,4@,5@) //X: -4.0, Y: -8.0
actor.Angle($ARMY69_2[13]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[13] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[13],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL8[7])
wait 0
model.Load($CAMP_MODEL8[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 4.0 -8.0 0.0
$ARMY69_2[14] = actor.Create(26,$CAMP_MODEL8[7],3@,4@,5@) //X: 4.0, Y: -8.0
actor.Angle($ARMY69_2[14]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[14] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[14],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL9[7])
wait 0
model.Load($CAMP_MODEL9[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -6.0 -8.0 0.0
$ARMY69_2[15] = actor.Create(26,$CAMP_MODEL9[7],3@,4@,5@) //X: -6.0, Y: -8.0
actor.Angle($ARMY69_2[15]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[15] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[15],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL10[7])
wait 0
model.Load($CAMP_MODEL10[7])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 6.0 -8.0 0.0
$ARMY69_2[16] = actor.Create(26,$CAMP_MODEL10[7],3@,4@,5@) //X: 6.0, Y: -8.0
actor.Angle($ARMY69_2[16]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[16] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[16],3@,4@,5@)

////////////////////////////Лагерь в СФ (калтон хейтс)////////////////////////////
while not model.Available($CAMP_MODEL1[8])
wait 0
model.Load($CAMP_MODEL1[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 0.0 -8.0 0.0
$ARMY69_2[17] = actor.Create(26,$CAMP_MODEL1[8],3@,4@,5@) //X: 0.0, Y: -8.0
actor.Angle($ARMY69_2[17]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[17] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[17],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL2[8])
wait 0
model.Load($CAMP_MODEL2[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 2.0 -8.0 0.0
$ARMY69_2[18] = actor.Create(26,$CAMP_MODEL2[8],3@,4@,5@) //X: 2.0, Y: -8.0
actor.Angle($ARMY69_2[18]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[18] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[18],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL3[8])
wait 0
model.Load($CAMP_MODEL3[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 4.0 -10.0 0.0
$ARMY69_2[19] = actor.Create(26,$CAMP_MODEL3[8],3@,4@,5@) //X: 4.0, Y: -10.0
actor.Angle($ARMY69_2[19]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[19] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[19],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL4[8])
wait 0
model.Load($CAMP_MODEL4[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -2.0 -10.0 0.0
$ARMY69_2[20] = actor.Create(26,$CAMP_MODEL4[8],3@,4@,5@) //X: -2.0, Y: -10.0
actor.Angle($ARMY69_2[20]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[20] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[20],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL5[8])
wait 0
model.Load($CAMP_MODEL5[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset -4.0 -10.0 0.0
$ARMY69_2[21] = actor.Create(26,$CAMP_MODEL5[8],3@,4@,5@) //X: -4.0, Y: -10.0
actor.Angle($ARMY69_2[21]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[21] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[21],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL6[8])
wait 0
model.Load($CAMP_MODEL6[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 0.0 -12.0 0.0
$ARMY69_2[22] = actor.Create(26,$CAMP_MODEL6[8],3@,4@,5@) //X: 0.0, Y: -12.0
actor.Angle($ARMY69_2[22]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[22] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[22],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL8[8])
wait 0
model.Load($CAMP_MODEL8[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 2.0 -12.0 0.0
$ARMY69_2[23] = actor.Create(26,$CAMP_MODEL8[8],3@,4@,5@) //X: 2.0, Y: -12.0
actor.StorePos($ARMY69_2[23],3@,4@,5@)
actor.Angle($ARMY69_2[23]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[23] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[23],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL9[8])
wait 0
model.Load($CAMP_MODEL9[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 4.0 -12.0 0.0
$ARMY69_2[24] = actor.Create(26,$CAMP_MODEL9[8],3@,4@,5@) //X: 4.0, Y: -12.0
actor.Angle($ARMY69_2[24]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[24] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[24],3@,4@,5@)

/////////////////
while not model.Available($CAMP_MODEL10[8])
wait 0
model.Load($CAMP_MODEL10[8])
mload
end

04C4: store_coords_to 3@ 4@ 5@ from_actor PLAYER_ACTOR with_offset 2.0 -14.0 0.0
$ARMY69_2[25] = actor.Create(26,$CAMP_MODEL10[8],3@,4@,5@) //X: 2.0, Y: -14.0
actor.Angle($ARMY69_2[25]) = 218.9303
random_float 6@ -0.15 0.15
random_float 7@ -0.15 0.15
04C4: store_coords_to 3@ 4@ 5@ from_actor $ARMY69_2[25] with_offset 6@ 7@ 0.0
actor.PutAtNoOffset($ARMY69_2[25],3@,4@,5@)

05BF: AS_actor PLAYER_ACTOR look_at_actor $ARMY69_2[0] 90000 ms

for 0@ = 0 to 25
create_thread @PED_BKP $ARMY69_2[0@] 371

if
0@ > 2
    then
    random_int 1@ 0 3
    074D: AS_actor $ARMY69_2[0@] turns_to_and_look_at_actor $ARMY69_2[1@] timelimit 900000    
    end

end

while not model.Available(14645)
wait 0
model.Load(14645)
mload
end

$ARMY69_2[26] = actor.Create(26,14645,-2182.739, 995.3628, 81.7154) //Люс    
0D10: set_actor $ARMY69_2[26] alpha 255 // IF and SET
actor.Angle($ARMY69_2[26]) = 37.0446

while not model.Available(18121)
wait 0
model.Load(18121)
end

0E2E: create_render_object_to_char_bone $ARMY69_2[26] model 18121 bone 7 offset 0.14 0.12 0.05 rotation 90.0 0.0 10.0 store_to 28@

wait 1000

return

:CSF_PEDIKS_IN_TV_CREATE

///////////////////////////////////////////////////////////////////////////////////////

while not model.Available(#ARMY3)
wait 0
model.Load(#ARMY3)
mload
end
    
$ARMY69_2[0] = actor.Create(27,#ARMY3,-1934.0815, 48.7447, 996.0719)
actor.Angle($ARMY69_2[0]) = 3.6421

if
model.Available(#ARMY3)
then
//model.Destroy(#ARMY3)
end

actor.Angle($ARMY69_2[0]) = 118.3484
08C6: set_actor $ARMY69_2[0] stay_on_bike 1    
actor.SetWalkStyle($ARMY69_2[0],"surv5")
0446: set_actor $ARMY69_2[0] dismemberment_possible 0
actor.Health($ARMY69_2[0]) = 1000
actor.WeaponAccuracy($ARMY69_2[0]) = 85
087E: set_actor $ARMY69_2[0] weapon_droppable 0
060B: set_actor $ARMY69_2[0] decision_maker_to $DEC_PEOPLE
077A: set_actor $ARMY69_2[0] acquaintance 0 to_actors_pedtype 0 // see ped.dat
create_thread @ANT_PRE $ARMY69_2[0]

///////////////////////////////////////////////////////////////////////////////////////

while not model.Available(#ARMY2)
wait 0
model.Load(#ARMY2)
mload
end
    
$ARMY69_2[1] = actor.Create(27,#ARMY2,-1957.5293, 55.4947, 996.0719)
actor.Angle($ARMY69_2[1]) = 90.6898

if
model.Available(#ARMY2)
then
//model.Destroy(#ARMY2)
end

actor.Angle($ARMY69_2[1]) = 118.3484
08C6: set_actor $ARMY69_2[1] stay_on_bike 1    
actor.SetWalkStyle($ARMY69_2[1],"surv5")
0446: set_actor $ARMY69_2[1] dismemberment_possible 0
actor.Health($ARMY69_2[1]) = 1000
actor.WeaponAccuracy($ARMY69_2[1]) = 85
087E: set_actor $ARMY69_2[1] weapon_droppable 0
060B: set_actor $ARMY69_2[1] decision_maker_to $DEC_PEOPLE
create_thread @ANT_PRE $ARMY69_2[1]

0781: get_weapon_with_ID 75 model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end    
actor.GiveWeaponAndAmmo($ARMY69_2[1],75,99999)

///////////////////////////////////////////////////////////////////////////////////////

while not model.Available(#ARMY4)
wait 0
model.Load(#ARMY4)
mload
end
    
$ARMY69_2[2] = actor.Create(27,#ARMY4,-1953.4608, 48.9894, 996.0719)
actor.Angle($ARMY69_2[2]) = 65.2912

if
model.Available(#ARMY4)
then
//model.Destroy(#ARMY4)
end

actor.Angle($ARMY69_2[2]) = 118.3484
08C6: set_actor $ARMY69_2[2] stay_on_bike 1    
actor.SetWalkStyle($ARMY69_2[2],"surv5")
0446: set_actor $ARMY69_2[2] dismemberment_possible 0
actor.Health($ARMY69_2[2]) = 1000
actor.WeaponAccuracy($ARMY69_2[2]) = 85
087E: set_actor $ARMY69_2[2] weapon_droppable 0
060B: set_actor $ARMY69_2[2] decision_maker_to $DEC_PEOPLE
create_thread @ANT_PRE $ARMY69_2[2]

0781: get_weapon_with_ID 75 model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end    
actor.GiveWeaponAndAmmo($ARMY69_2[2],75,99999)

///////////////////////////////////////////////////////////////////////////////////////

while not model.Available(#ARMY1)
wait 0
model.Load(#ARMY1)
mload
end
    
$ARMY69_2[3] = actor.Create(27,#ARMY1,-1964.7131, 49.0651, 996.0719)
actor.Angle($ARMY69_2[3]) = 3.311

if
model.Available(#ARMY1)
then
//model.Destroy(#ARMY1)
end

actor.Angle($ARMY69_2[3]) = 118.3484
08C6: set_actor $ARMY69_2[3] stay_on_bike 1    
actor.SetWalkStyle($ARMY69_2[3],"surv5")
0446: set_actor $ARMY69_2[3] dismemberment_possible 0
actor.Health($ARMY69_2[3]) = 1000
actor.WeaponAccuracy($ARMY69_2[3]) = 85
087E: set_actor $ARMY69_2[3] weapon_droppable 0
060B: set_actor $ARMY69_2[3] decision_maker_to $DEC_PEOPLE
create_thread @ANT_PRE $ARMY69_2[3]

0781: get_weapon_with_ID 75 model_to 0@
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end    
actor.GiveWeaponAndAmmo($ARMY69_2[3],75,99999)

return

:MYERS_NOTE

player.CanMove(PLAYER_CHAR,false)
        
fade 0 500
$HUD_REMOVE = 1
wait 500
        
cinema.Widescreen(1)
0A48: enable_menu_access_in_widescreen_mode 0
$READING_NOTE_FLAG = 1
        
////////////////////////////////////////////////////////
        
random_int 16@ 0 to 5 

if
16@ == 0
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll1.mp3") 
end
    
if
16@ == 1
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll2.mp3") 
end
    
if
16@ == 2
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll3.mp3") 
end
    
if
16@ == 3
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll4.mp3") 
end
    
if
16@ == 4
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll5.mp3") 
end
       
Audiostream.PerformAction(14@, PLAY)
Audiostream.Volume(14@) = $SOUNDS_VOLUME        
        
////////////////////////////////////////////////////////
    
0A0E: disable_text_with_style 1
        
0391: release_textures
0390: load_txd_dictionary 'myers' 
wait 1
038F: load_texture "peso" as 1 // Load dictionary with 0390 first 
wait 1    
        
32@ = 0
$SPEED_08_FLAG = 1 
        
  repeat 
wait 0
03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
03E3: set_texture_to_be_drawn_antialiased 1 
  until 0E3E: is_button_just_pressed 0 17
         
$SPEED_08_FLAG = 0
015D: set_gamespeed 1.0      
         
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
        
0A0E: disable_text_with_style 0
        
////////////////////////////////////////////////////////
        
audiostream.PerformAction(14@,STOP)
audiostream.Release(14@)
        
$SPEED_08_FLAG = 0
$READING_NOTE_FLAG = 0
    
cinema.Widescreen(0)
0A48: enable_menu_access_in_widescreen_mode 1   
        
015D: set_gamespeed 1.0 
        
player.CanMove(PLAYER_CHAR) = true
        
fade 1 500
$HUD_REMOVE = 0
wait 500
        
return

:CSF_MYERS_DIED_PIZDEC_BY_IGROK
text.ClearAll()
BLACK_POLOSKI_ON = 1
$MUSIC_TURN_OFF_FLAG = 1
v$FAILED_TEXT = "MS_FL81"
create_thread @GMV_OVR
end_thread

:CSF_TIM
thread 'CSF_TIM'

32@ = 0

repeat
wait 0

008A: CSF_MYERS_TIMER_PRE = 32@ // (int)

if and
$SAVESTATUS_TRUE == 1
$SAVING_DELAY == 1
then

32@ += 480000

repeat
wait 0
until $SAVING_DELAY == 0

end

until CSF_CURRENT_PROGRESS_FLAG == 2

end_thread