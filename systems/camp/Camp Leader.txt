const
CAMP_QUEST_READY_PHRASE = 23@
CAMP_PREV_QUEST_NUMBER = 19@
CAMP_LEADER_DONATE_FLAG = 21@
CAMP_SURV_IN_TEAM_CHAR = 24@
end

const
PANEL_FT_ACTIVE_ROW = $WEAPON_DAMAGE[32]
CAMP_FASTTRAVEL_DO_FLAG = $RNDM_HOUSE_BANKA[180]
CAMP_FASTTRAVEL_X = $TRADER_SPHERE_X[0]
CAMP_FASTTRAVEL_Y = $TRADER_SPHERE_Y[0]
CAMP_FASTTRAVEL_Z = $TRADER_SPHERE_Z[0]
CAMP_FASTTRAVEL_A = $TRADER_SPHERE_X[1]
CAMP_HIDEOUT_AFTER_TP_X = $TRADER_SPHERE_X[2]
CAMP_HIDEOUT_AFTER_TP_Y = $TRADER_SPHERE_Y[1]
CAMP_HIDEOUT_AFTER_TP_Z = $TRADER_SPHERE_Z[1]
CAMP_HIDEOUT_AFTER_TP_A = $TRADER_SPHERE_X[3]
end

:C_LEADER
thread 'C_LEADER'

if
UNITED_MAP == 0
then
create_thread @OOS
end

15@ = 0
CAMP_QUEST_READY_PHRASE = 0
CAMP_PREV_QUEST_NUMBER = -1

:CAMP_LEADER_CHECK
wait 0

////////////////////////////////////////////////

if and
MAIN_QUEST1_COMPLETED_FLAG == 1
MAIN_QUEST2_COMPLETED_FLAG == 1
MAIN_QUEST3_COMPLETED_FLAG == 1
CAMP1_RESPECT >= 100
CAMP2_RESPECT >= 100
CAMP3_RESPECT >= 100
OOS_CURRENT_PROGRESS == 1
$ENTERED_CAMP_NUMBER == 0
    then
    if and
    $CAMP_DEAD_FLAG[0] == 0 //Лагерь Гарнет не вымер
    $CAMP_DEAD_FLAG[1] == 0 //Лагерь Фернандо не вымер
    $CAMP_DEAD_FLAG[2] == 0 //Лагерь Энкера не вымер
    $CAMP_AGRED_FLAG[0] == 0 //Лагерь Гарнет не сагрен
    $CAMP_AGRED_FLAG[1] == 0 //Лагерь Фернандо не сагрен
    $CAMP_AGRED_FLAG[2] == 0 //Лагерь Энкера не сагрен
        then
        if and
        $CAMP_MODEL3[0] == 12785
        $CAMP_MODEL3[1] == 12786
        $CAMP_MODEL6[2] == 12787
            then
            $CHECKPOINT[$ENTERED_CAMP_NUMBER] += 20160 
            end
        end
    end

////////////////////////////////////////////////

if and
$ENTERED_CAMP_NUMBER == 5
MAIN_QUEST6_COMPLETED_FLAG == 0
UNITED_MAP == 0
then 
0@ = 5
0@ += 156
if
$RNDM_HOUSE_BANKA[0@] >= 100
    then
    if and
    $CAMP_DEAD_FLAG[0] == 0
    $CAMP_MODEL3[0] == 12785
    $CAMP_DEAD_FLAG[3] == 0
    $CAMP_MODEL8[3] == 12788
        then
        //ass
        else
        0@ = 5
        0@ += 8
        $WEAPON_DAMAGE[0@] = -1
        end
    end
end

////////////////////////////////////////////////

random_int 16@ 0 10
{$INCLUDE Camp System Talk System.txt}

gosub @CAMP_LEADER_GET_NUM

//////////////////////////////////////////////////////

if or
$FREEMODE == 1
$DEFENSE_CHALLENGE_FLAG == 1
then
if and
LEADER_DIED_FLAG == -1
056D:   actor $CAMP_ACTOR[15@] defined
not $CAMP_ACTOR[15@] == -69
not $ENTERED_CAMP_NUMBER == -1
    then
    if
    8184:   actor $CAMP_ACTOR[15@] health < 1
        then                
        0084: LEADER_DIED_FLAG = $ENTERED_CAMP_NUMBER // (int)        
        else
        LEADER_DIED_FLAG = -1
        0084: CAMP_LEADER_ACTOR_VAR = $CAMP_ACTOR[15@] // (int)
        end
    end
end

if and
056D:   actor $CAMP_ACTOR[15@] defined
$FREEMODE == 1
not $GAMEMODE_STORYLINE == 1
not CARMA_VERY_BAD_FLAG == 1
CAMP_LEADER_MARKER_CREATED == 1
$CAMP_AGRED_FLAG[$ENTERED_CAMP_NUMBER] == 0
    then
    
    if and
    CSF_CURRENT_PROGRESS_FLAG > 0
    UNITED_MAP == 0    
        then
        if or
        $ENTERED_CAMP_NUMBER == 6
        $ENTERED_CAMP_NUMBER == 7
        $ENTERED_CAMP_NUMBER == 8
            then
            jump to @CAMP_QUEST_PHRASE_SKIP_JUMP
            end
        end
        
    if and
    MAIN_QUEST9_COMPLETED_FLAG > 1
    CSF_CURRENT_PROGRESS_FLAG == 0
    $ENTERED_CAMP_NUMBER == 8
        then
        jump to @CAMP_QUEST_PHRASE_SKIP_JUMP
        end         
        
    if and
    OOS_CURRENT_PROGRESS > 0
    UNITED_MAP == 0    
        then
        if or
        $ENTERED_CAMP_NUMBER == 1
        $ENTERED_CAMP_NUMBER == 2
            then
            jump to @CAMP_QUEST_PHRASE_SKIP_JUMP 
            end
        end
        
    if and
    OOS_CURRENT_PROGRESS > 1
    UNITED_MAP == 0
    $ENTERED_CAMP_NUMBER == 0
        then
        jump to @CAMP_QUEST_PHRASE_SKIP_JUMP
        end        
    
    if and
    0184:   actor $CAMP_ACTOR[15@] health > 0
    $CHECKPOINT[$ENTERED_CAMP_NUMBER] > 20160
    CAMP_QUEST_READY_PHRASE == 0
    $PANEL_OPEN == 0
    $PHRASES_OFF_FLAG == 0
    $ONMISSION == 0
    0104:   actor PLAYER_ACTOR near_actor $CAMP_ACTOR[15@] radius 30.0 30.0 10.0 sphere 0
    0364:   actor $CAMP_ACTOR[15@] spotted_actor PLAYER_ACTOR
        then                        
        CAMP_QUEST_READY_PHRASE = 1
        
//        008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
//        0@ += 156
//        008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
//        if and
//        31@ < 100
//        31@ > 89
//        then
//        jump to @CAMP_QUEST_PHRASE_SKIP_JUMP
//        end
        
        0605: actor $CAMP_ACTOR[15@] perform_animation "wave_in" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
        05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 830 ms        
        
        $PHRASES_OFF_FLAG = 1
        
        gosub @RANDOM_DIALOG_LEADER_QUEST_READY
                
        v$2NAME3 = "GAME513"
                                
        09FD: get_gxt_string v$PHRASE3 width_to 29@
        0093: 29@ = integer 29@ to_float
        29@ *= 8.0
        0092: 29@ = float 29@ to_integer
                    
        32@ = 0                          
                    
        repeat
        wait 0                                                          
        
        if and
        ZAME_SPEAK_WITH_LEADER_FLAG == 225
        003A:   $ENTERED_CAMP_NUMBER == ZAME_SPEAK_WITH_LEADER_CAMP_ID // (int)
        then
        jump to @CAMP_QUEST_READY_PLAYER_NAME 
        end
                                    
        008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
        0@ += 156
        008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
        if
        31@ >= 100
        then
        
        :CAMP_QUEST_READY_PLAYER_NAME    
        if
        FREEMODE_CUSTOM_NAME == 1 
        then
        06D1: v$NAME3 = "F_NAME" // v$ = string
        end
            
        0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
        else                
        0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
        end
        
        if
        056D:   actor $CAMP_ACTOR[15@] defined
            then
            if and
            32@ > 2000
            0104:   actor PLAYER_ACTOR near_actor $CAMP_ACTOR[15@] radius 5.0 5.0 10.0 sphere 0
                then
                break                                                                                
                end
            else
            break
            end
            
        if or
        $SAVESTATUS_TRUE == 1
        $SAVESTATUS == 1
        GAME_OVER_FLAG == 1
        80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0            
            then
            break
            end    
                                    
        until 002D:   32@ >= 29@  // (int)
        
        $PHRASES_OFF_FLAG = 0            
        text.ClearAll()
        
        end
    end
    
:CAMP_QUEST_PHRASE_SKIP_JUMP        
    
//////////////////////////////////////////////////////    

//if and
//CAMP_LEADER_MARKER_CREATED == 0
//075C:   marker CAMP_LEADER_MARKER enabled
//    then
//    marker.Disable(CAMP_LEADER_MARKER)
//    end

if and
056D:   actor $CAMP_ACTOR[15@] defined
CAMP_LEADER_MARKER_CREATED == 1
    then
    0084: CAMP_LEADER_ACTOR_VAR = $CAMP_ACTOR[15@] // (int) 
    if
    actor.Dead($CAMP_ACTOR[15@])
        then
        
        CAMP_LEADER_MARKER_CREATED = 0
        $LEADER_ACTOR = -1
        
        if
        075C:   marker CAMP_LEADER_MARKER enabled
        then
        marker.Disable(CAMP_LEADER_MARKER)
        CAMP_LEADER_MARKER = 0
        text.ShowTextBox('GAME706')
        
        0665: get_actor $CAMP_ACTOR[15@] model_to 0@
        if and
        0@ >= 12785
        0@ < 12799
            then
            create_thread @ACH142
            else
            if
            0@ == 14529
                then
                create_thread @ACH142
                end
            end
        
        end
        
        008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
        0@ += 8
        $WEAPON_DAMAGE[0@] = -1
        
        if
        15@ == 0
            then
            $CAMP_ACTOR1_GDF[$ENTERED_CAMP_NUMBER] += 60000             
            end
            
        if
        15@ == 1
            then
            $CAMP_ACTOR2_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 2
            then
            $CAMP_ACTOR3_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 3
            then
            $CAMP_ACTOR4_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 4
            then
            $CAMP_ACTOR5_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 5
            then
            $CAMP_ACTOR6_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 6
            then
            $CAMP_ACTOR7_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 7
            then
            $CAMP_ACTOR8_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 8
            then
            $CAMP_ACTOR9_GDF[$ENTERED_CAMP_NUMBER] += 60000
            end
            
        if
        15@ == 9
            then
            $CAMP_ACTOR10_GDF[$ENTERED_CAMP_NUMBER] += 60000   
            end
        
        end
    end
    
if and
056D:   actor $CAMP_ACTOR[15@] defined
$DEFENSE_CHALLENGE_FLAG == 1
    then
    0084: CAMP_LEADER_ACTOR_VAR = $CAMP_ACTOR[15@] // (int) 
    end    
    
//////////////////////////////////////////////////////        

if and
056D:   actor $CAMP_ACTOR[15@] defined
$GAMEMODE_WAR == 0
not $GAMEMODE_VERSUS == 1
$DEFENSE_CHALLENGE_FLAG == 0
PLAYER_CANT_SPEAK_WITH_LEADER_FLAG == 0
not LADDER_ON_MARKER_FLAG == 1
    then
    
    0084: $LEADER_ACTOR = $CAMP_ACTOR[15@] // (int)
    
    if and
    CAMP_LEADER_MARKER_CREATED == 0
    not actor.Dead($CAMP_ACTOR[15@])
    then
    actor.StorePos($CAMP_ACTOR[15@],25@,26@,27@)
    
    if and
    80EC: not  actor $CAMP_ACTOR[15@] sphere 0 near_point 2410.1462 1123.8119 radius 5.0 5.0
    80EC: not  actor $CAMP_ACTOR[15@] sphere 0 near_point 2815.6936 -1366.8728 radius 5.0 5.0
    80FE: not  actor $CAMP_ACTOR[15@] sphere 0 in_sphere 2130.8008 -2274.9788 7.801 radius 5.0 5.0 3.0 
    then    
    CAMP_LEADER_MARKER = Marker.CreateIconAndSphere2(58, 25@, 26@, 27@)    
    else    
    CAMP_LEADER_MARKER = Marker.CreateIconAndSphere2(58, 25@, 26@, 27@)  
    018B: set_marker CAMP_LEADER_MARKER radar_mode 0
    018B: set_marker $ARMY69_2_MARKER[15@] radar_mode 0    
    0337: set_actor $CAMP_ACTOR[15@] visibility 0
    actor.LockInCurrentPosition($CAMP_ACTOR[15@],true)
    actor.SetImmunities($CAMP_ACTOR[15@],1,1,1,1,1)
    end        
    
    CAMP_LEADER_MARKER_CREATED = 1
    CAMP_QUEST_READY_PHRASE = 0
    LEADER_DIED_FLAG = -1
    end
    
    if and
    MAIN_QUEST_MUSIC_FLAG == 1
    003A:   $ENTERED_CAMP_NUMBER == $QUEST_CAMP_NUMBER // (int)
    MQ_CHECKPOINT_FUCKNO >= -1 //was 0
    not $QUEST_READY_FLAG > 0
    then
    jump to @SKIP_LEADER_TALK_IN_MAINQUEST
    end
    
    if or
    $KANISTRA_USING == 1
    $JIMMY_USING == 1
    then
    jump to @SKIP_LEADER_TALK_IN_MAINQUEST
    end
        
    if and
    $CAMP_AGRED_FLAG[$ENTERED_CAMP_NUMBER] == 0
    $GAMEMODE_WAR == 0
    not $GAMEMODE_VERSUS == 1   
    $PANEL_OPEN == 0
    not actor.Driving(PLAYER_ACTOR)
    not actor.Dead($CAMP_ACTOR[15@])
    not LADDER_ON_MARKER_FLAG == 1    
        then
        
        if and
        0104:   actor PLAYER_ACTOR near_actor $CAMP_ACTOR[15@] radius 3.0 3.0 1.0 sphere 0
        0364:   actor $CAMP_ACTOR[15@] spotted_actor PLAYER_ACTOR
        80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_SAVE_X[$ENTERED_CAMP_NUMBER] $CAMP_SAVE_Y[$ENTERED_CAMP_NUMBER] $CAMP_SAVE_Z[$ENTERED_CAMP_NUMBER] radius 3.0 3.0 3.0
        89DE: not  actor PLAYER_ACTOR entering_car
        PLAYER_CANT_SPEAK_WITH_LEADER_FLAG == 0
        8457: not  player PLAYER_CHAR aiming_at_actor $CAMP_ACTOR[15@]
        RADIO_TEXTURE_RENDER_NUMBER == 0
            then
        
            if
            not PLAYER_CANT_SPEAK_WITH_LEADER_FLAG == 1
            then
            
            if and
            $KEY_USE == 69
            8A4B: not  controls_set_to_joystick
            then
            if
            8A2A: not  text_box 'GAME512' displayed
                then
                0512: show_permanent_text_box 'GAME512'
                end    
            else
            
            if
            8A4B: not  controls_set_to_joystick
            then
            
            if
            8A2A: not  text_box 'AME512B' displayed
                then
                0512: show_permanent_text_box 'AME512B'
                end
                
            else
            
            if
            8A2A: not  text_box 'AME512C' displayed
                then
                0512: show_permanent_text_box 'AME512C'
                end
            
            end   
                
            end
            
            end    
            
            else
            
            if or
            0A2A:   text_box 'GAME512' displayed
            0A2A:   text_box 'AME512B' displayed
            0A2A:   text_box 'AME512C' displayed
            then
            text.RemoveTextBox() 
            end
            
            end
        end
    else
    
    if
    CAMP_LEADER_MARKER_CREATED == 1
    then    
    CAMP_LEADER_MARKER_CREATED = 0
    $LEADER_ACTOR = -1
    
    if
    075C:   marker CAMP_LEADER_MARKER enabled
    then
    marker.Disable(CAMP_LEADER_MARKER)
    CAMP_LEADER_MARKER = 0
    end
    
    end
    
    end
    
:SKIP_LEADER_TALK_IN_MAINQUEST    
    
if and
$TALK_SIMULATE == 1
056D:   actor $CAMP_ACTOR[15@] defined
    then
    $TALK_SIMULATE = 0
    jump to @LEADER_SIMULATE_TALK
    end    

if and
056D:   actor $CAMP_ACTOR[15@] defined
PLAYER_CANT_SPEAK_WITH_LEADER_FLAG == 0
RADIO_TEXTURE_RENDER_NUMBER == 0
not $GAMEMODE_VERSUS == 1
    then                
    if and
    $CAMP_AGRED_FLAG[$ENTERED_CAMP_NUMBER] == 0
    $GAMEMODE_WAR == 0   
    $PANEL_OPEN == 0
    0AB0:   key_pressed $KEY_USE
    0104:   actor PLAYER_ACTOR near_actor $CAMP_ACTOR[15@] radius 3.0 3.0 1.0 sphere 0
    not actor.Dead($CAMP_ACTOR[15@])
    not actor.Driving(PLAYER_ACTOR)
    0364:   actor $CAMP_ACTOR[15@] spotted_actor PLAYER_ACTOR
        then
        
        if and
        MAIN_QUEST_MUSIC_FLAG == 1
        003A:   $ENTERED_CAMP_NUMBER == $QUEST_CAMP_NUMBER // (int)
        MQ_CHECKPOINT_FUCKNO == 0
        not $QUEST_READY_FLAG > 0
        then
        jump to @CAMP_LEADER_CHECK
        end
        
        if and
        $KANISTRA_USING == 0
        $JIMMY_USING == 0
        80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_SAVE_X[$ENTERED_CAMP_NUMBER] $CAMP_SAVE_Y[$ENTERED_CAMP_NUMBER] $CAMP_SAVE_Z[$ENTERED_CAMP_NUMBER] radius 3.0 3.0 3.0
        8457: not  player PLAYER_CHAR aiming_at_actor $CAMP_ACTOR[15@]
        not LADDER_ON_MARKER_FLAG == 1
            then   
            
            if and
            USHER_STORY_FLAG == 1
            not ZAME_SPEAK_WITH_LEADER_FLAG == 222 //Выдача припасов
            not ZAME_SPEAK_WITH_LEADER_FLAG == 223 //Поговорить
            not ZAME_SPEAK_WITH_LEADER_FLAG == 224 //Взять задание
            then
            
            if and
            $ENTERED_CAMP_NUMBER == 7
            $QUEST_READY_FLAG == -122            
            then
            jump to @LEADER_SIMULATE_TALK
            end
            
            if and
            $ENTERED_CAMP_NUMBER == 7
            $QUEST_READY_FLAG == -119            
            then
            jump to @LEADER_SIMULATE_TALK
            end
            
            if and
            $ENTERED_CAMP_NUMBER == 7
            $QUEST_READY_FLAG == -121            
            then
            jump to @LEADER_SIMULATE_TALK
            end            
                        
            if
            not $ENTERED_CAMP_NUMBER == 6
                then
                
                text.RemoveTextBox()
                
                random_int 29@ 0 4
                if
                29@ == 0
                then
                v$PHRASE3 = "NOTALK1"
                end
                
                if
                29@ == 1
                then
                v$PHRASE3 = "NOTALK2"
                end
                
                if
                29@ == 2
                then
                v$PHRASE3 = "NOTALK3"
                end
                
                if
                29@ == 3
                then
                v$PHRASE3 = "NOTALK4"
                end
                
                if
                29@ == 4
                then
                v$PHRASE3 = "NOTALK5"
                end
                
                09FD: get_gxt_string v$PHRASE3 width_to 29@
                0093: 29@ = integer 29@ to_float
                29@ *= 8.0
                0092: 29@ = float 29@ to_integer
                0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 29@ 1
                32@ = 0            
                jump to @CAMP_LEADER_USHER_NOTLAK_JUMP
                end            
            end
                                 
            :LEADER_SIMULATE_TALK
            actor.SetImmunities($CAMP_ACTOR[15@],1,1,1,1,1)
            0084: PLAY_TALK_ACTOR = $CAMP_ACTOR[15@] // (int)
            {$INCLUDE Camp Leader Quest Reward.txt}                                                            
            player.CanMove(PLAYER_CHAR) = false            
            text.RemoveTextBox()
            $PHRASES_OFF_FLAG = 1
            $PANEL_OPEN = 1    
            fade 0 400
            $HUD_REMOVE = 1
            wait 400                        
            text.ClearAll()    
            0470: 22@ = actor PLAYER_ACTOR current_weapon
            06AB: set_actor $CAMP_ACTOR[15@] all_weapons_hidden 1
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
            01B9: set_actor PLAYER_ACTOR armed_weapon_to 0   
            
            if and
            $FP_ACTIVATED == 1
            $GAMEMODE_STORYLINE == 1
            then
            repeat
            wait 0
            until $FP_ACTIVATED == 0
            end
                 
            04C4: store_coords_to $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_2 $TEMPVAR_FLOAT_3 from_actor PLAYER_ACTOR with_offset 0.5 -1.3 1.0
            015F: set_camera_position $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_2 $TEMPVAR_FLOAT_3 rotation 0.0 0.0 0.0
            camera.OnPed($CAMP_ACTOR[15@],15,2)
            0581: enable_radar 0            
            $PHRASES_OFF_FLAG = 1
            text.ClearAll()
            0639: AS_actor PLAYER_ACTOR rotate_to_actor $CAMP_ACTOR[15@]
            0639: AS_actor $CAMP_ACTOR[15@] rotate_to_actor PLAYER_ACTOR
            05BF: AS_actor PLAYER_ACTOR look_at_actor $CAMP_ACTOR[15@] 999999 ms
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 999999 ms
            
            if
            not $TALK_SIMULATE == 2
            then
            wait 400
            fade 1 400              
            wait 400
            end
            
            $FIST_HUD_ALWAYS = 1    
            gosub @CAMP_LEADER_START_MENU
            :CAMP_LEADER_BYE                        
            $FIST_HUD_ALWAYS = 0
            fade 0 400
            $HUD_REMOVE = 1
            wait 400 
            text.ClearAll()
            cinema.Widescreen(0) 
            05BF: AS_actor PLAYER_ACTOR look_at_actor $CAMP_ACTOR[15@] 1 ms
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 1 ms
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
            06AB: set_actor $CAMP_ACTOR[15@] all_weapons_hidden 0
            if
            0491:   actor PLAYER_ACTOR has_weapon 22@
            then
            01B9: set_actor PLAYER_ACTOR armed_weapon_to 22@
            end 
            camera.SetBehindPlayer()
            camera.Restore_WithJumpCut()
            
            if and
            not $QUEST_TYPE == 12
            not $QUEST_READY_FLAG == 30
            CAMP_LEADER_DONT_SAY_BYE_FLAG == 0
            then
            fade 1 400
            $HUD_REMOVE = 0  
            wait 400
            end
            
            actor.SetImmunities($CAMP_ACTOR[15@],0,0,0,0,0)
            cinema.Radar(1)
            $PANEL_OPEN = 0
            player.CanMove(PLAYER_CHAR) = true
            if and
            not $QUEST_TYPE == 12
            not $QUEST_TYPE == 14
            CAMP_LEADER_DONT_SAY_BYE_FLAG == 0
                then
                05C1: AS_actor $CAMP_ACTOR[15@] speak_from_audio_table 162    
                gosub @RANDOM_DIALOG_LEADER_BYE
                
                v$2NAME3 = "GAME513"
                            
                09FD: get_gxt_string v$PHRASE3 width_to 29@
                0093: 29@ = integer 29@ to_float
                29@ *= 8.0
                0092: 29@ = float 29@ to_integer              
                
                32@ = 0
                
                :CAMP_LEADER_USHER_NOTLAK_JUMP
                    
                repeat
                wait 0  
                                                                                
                008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
                0@ += 156
                008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
                if
                31@ >= 100
                then
                
                if
                FREEMODE_CUSTOM_NAME == 1 
                then
                06D1: v$NAME3 = "F_NAME" // v$ = string
                end
                
                0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
                else                
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
                end
                                    
                if or
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                $PANEL_OPEN == 1
                GAME_OVER_FLAG == 1
                80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
                    then
                    break
                    end
                                    
                until 002D:   32@ >= 29@  // (int)
                
                $PHRASES_OFF_FLAG = 0                
                PLAY_TALK_ACTOR = -1
                
                else
                
                $PHRASES_OFF_FLAG = 0
                PLAY_TALK_ACTOR = -1
                
                if
                CAMP_FASTTRAVEL_DO_FLAG == 1 //Лагерь выживших
                    then
                    CAMP_FASTTRAVEL_DO_FLAG = 0
                    0AAA: TEMPVAR_INT = thread 'HAB_DRP' pointer
                    if
                    TEMPVAR_INT > 0
                    then
                    0D2F: TEMPVAR_INT2 = get_thread TEMPVAR_INT var 32
                    TEMPVAR_INT2 += 120000 //скипаем таймер эирдропа на 2 минуты (2 внутриигровых часа)
                    0D2E: set_thread TEMPVAR_INT var 32 to TEMPVAR_INT2
                    end
                    
                    CAMP_LEADER_DONT_SAY_BYE_FLAG = 0
                    if
                    056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
                        then                        
                        
                        marker.Disable(CAMP_LEADER_MARKER)
                        CAMP_LEADER_MARKER_CREATED = 0
                        
                        SAVE_PRE_TP_TEAMMATES_FLAG = 1
                        
                        repeat
                        wait 0
                        until SAVE_PRE_TP_TEAMMATES_FLAG == 0
                        
                        repeat
                        wait 0
                        until 056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined                        
                        
                        036A: put_actor PLAYER_ACTOR in_car $USED_CAR[LATEST_CAR_SLOT_USED]  
                        SAVE_PRE_TP_TEAMMATES_FLAG = 111
                        
                        repeat
                        wait 0
                        until SAVE_PRE_TP_TEAMMATES_FLAG == 0                        
                                                                               
                        car.PutAt($USED_CAR[LATEST_CAR_SLOT_USED],CAMP_FASTTRAVEL_X,CAMP_FASTTRAVEL_Y,CAMP_FASTTRAVEL_Z)
                        car.Angle($USED_CAR[LATEST_CAR_SLOT_USED]) = CAMP_FASTTRAVEL_A
                        camera.Restore_WithJumpCut()  
                        create_thread @3D_REFR
                        
                        repeat
                        wait 0                       
                        until 856D: not  actor $CAMP_ACTOR[15@] defined
                        
                        repeat
                        wait 0
                        $CAMP_SPOTTED_FLAG = 1                       
                        until 003A:   $ENTERED_CAMP_NUMBER == PANEL_FT_ACTIVE_ROW // (int)
                        
                        repeat
                        wait 0
                        gosub @CAMP_LEADER_GET_NUM
                        $CAMP_SPOTTED_FLAG = 1                        
                        until 056D:   actor $CAMP_ACTOR[15@] defined
                        
                        04C4: store_coords_to $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_2 $TEMPVAR_FLOAT_3 from_actor $CAMP_ACTOR[15@] with_offset 0.0 3.0 0.0
                        0362: remove_actor PLAYER_ACTOR from_car_and_place_at $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_2 $TEMPVAR_FLOAT_3
                        SAVE_PRE_TP_TEAMMATES_FLAG = 1                                                                        
                        $TEMPVAR_FLOAT_3 = actor.Angle($CAMP_ACTOR[15@])
                        $TEMPVAR_FLOAT_3 -= 180.0
                        actor.Angle(PLAYER_ACTOR) = $TEMPVAR_FLOAT_3
                        camera.Restore_WithJumpCut()
                        create_thread @3D_REFR
                        
                        wait 0
                        SAVE_PRE_TP_TEAMMATES_FLAG = 1
                        
                        repeat
                        wait 0
                        $CAMP_SPOTTED_FLAG = 1
                        until SAVE_PRE_TP_TEAMMATES_FLAG == 0
                        
                        create_thread @PED_BKP PLAYER_ACTOR 371
                        text.RemoveTextBox()
                        wait 2000
                        $CAMP_SPOTTED_FLAG = 1
                        text.RemoveTextBox()
                        
                        fade 1 400  
                        $HUD_REMOVE = 0                      
                        wait 400
                        $CAMP_SPOTTED_FLAG = 1                        
                        if
                        HJ2_CREATED == -2
                        then
                        create_thread @HJ2
                        HJ2_CREATED = 1
                        end
                                                
                        end
                    end
                    
                if or
                CAMP_FASTTRAVEL_DO_FLAG == 2 //Малое убежище
                CAMP_FASTTRAVEL_DO_FLAG == 3 //Транзитный лагерь
                    then
                    CAMP_FASTTRAVEL_DO_FLAG = 0
                    0AAA: TEMPVAR_INT = thread 'HAB_DRP' pointer
                    if
                    TEMPVAR_INT > 0
                    then
                    0D2F: TEMPVAR_INT2 = get_thread TEMPVAR_INT var 32
                    TEMPVAR_INT2 += 120000 //скипаем таймер эирдропа на 2 минуты (2 внутриигровых часа)
                    0D2E: set_thread TEMPVAR_INT var 32 to TEMPVAR_INT2
                    end
                    
                    CAMP_LEADER_DONT_SAY_BYE_FLAG = 0
                    if
                    056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined
                        then                        
                        
                        marker.Disable(CAMP_LEADER_MARKER)
                        CAMP_LEADER_MARKER_CREATED = 0
                        
                        SAVE_PRE_TP_TEAMMATES_FLAG = 1
                        
                        repeat
                        wait 0
                        until SAVE_PRE_TP_TEAMMATES_FLAG == 0
                        
                        repeat
                        wait 0
                        until 056E:   car $USED_CAR[LATEST_CAR_SLOT_USED] defined                        
                        
                        036A: put_actor PLAYER_ACTOR in_car $USED_CAR[LATEST_CAR_SLOT_USED]  
                        SAVE_PRE_TP_TEAMMATES_FLAG = 111
                        
                        repeat
                        wait 0
                        until SAVE_PRE_TP_TEAMMATES_FLAG == 0                        
                                                                               
                        car.PutAt($USED_CAR[LATEST_CAR_SLOT_USED],CAMP_FASTTRAVEL_X,CAMP_FASTTRAVEL_Y,CAMP_FASTTRAVEL_Z)
                        car.Angle($USED_CAR[LATEST_CAR_SLOT_USED]) = CAMP_FASTTRAVEL_A
                        camera.Restore_WithJumpCut()  
                        create_thread @3D_REFR
                        
                        repeat
                        wait 0                       
                        until 856D: not  actor $CAMP_ACTOR[15@] defined                                               
                                                
                        0362: remove_actor PLAYER_ACTOR from_car_and_place_at CAMP_HIDEOUT_AFTER_TP_X CAMP_HIDEOUT_AFTER_TP_Y CAMP_HIDEOUT_AFTER_TP_Z
                        SAVE_PRE_TP_TEAMMATES_FLAG = 1                                                                        
                        actor.Angle(PLAYER_ACTOR) = CAMP_HIDEOUT_AFTER_TP_A
                        camera.Restore_WithJumpCut()
                        create_thread @3D_REFR
                        
                        wait 0
                        SAVE_PRE_TP_TEAMMATES_FLAG = 1
                        
                        repeat
                        wait 0
                        until SAVE_PRE_TP_TEAMMATES_FLAG == 0
                        
                        create_thread @PED_BKP PLAYER_ACTOR 371
                        text.RemoveTextBox()
                        wait 2000
                        text.RemoveTextBox()                        
                        
                        fade 1 400
                        $HUD_REMOVE = 0                        
                        wait 400
                        if
                        HJ2_CREATED == -2
                        then
                        create_thread @HJ2
                        HJ2_CREATED = 1
                        end
                                                
                        end
                    end    
                      
                end
            end
        end
    end        
    
jump to @CAMP_LEADER_CHECK    

:CAMP_LEADER_START_MENU

text.ClearAll()

$PANEL_OPEN = 1
$PHRASES_OFF_FLAG = 1

if
not USHER_STORY_FLAG == 1
then

if or
$FREEMODE == 0
$GAMEMODE_STORYLINE == 1
then
jump to @CAMP_HABAR_GET_INSTANT_JUMP
end  

end      

v$2NAME1 = "N_ME"
0665: get_actor $CAMP_ACTOR[15@] model_to 0@
CAMP_LEADER_DONATE_FLAG = 0

if and
0@ > 12784
0@ < 12799
then
CAMP_LEADER_RANDOM_FLAG = 0
else
if or
0@ == 14529
0@ == 9198
0@ == 3137
    then
    CAMP_LEADER_RANDOM_FLAG = 0
    else
    CAMP_LEADER_RANDOM_FLAG = 1
    end
end

if and
OOS_CURRENT_PROGRESS == 2
$ENTERED_CAMP_NUMBER == 3
OOS_TALKED_WITH_NORWOOD_FLAG == 0
CAMP_LEADER_RANDOM_FLAG == 1
    then
    
    $END_DIALOG_INST = 1
    wait 0
    
    v$PHRASE3 = "ENС203"
    gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
    v$PHRASE3 = "ENС204"
    008B: 28@ = $RNDM_HOUSE_WEAPON[23] // (int)
    gosub @RANDOM_DIALOG_MQPERS_NOTRANDOM
    v$PHRASE3 = "ENС205"
    gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
    OOS_TALKED_WITH_NORWOOD_FLAG = 69   
            
    jump to @CAMP_LEADER_MENU_EXIT
    end    
    
if and
OOS_CURRENT_PROGRESS == 4
$ENTERED_CAMP_NUMBER == 0
    then    
    
    OOS_CURRENT_PROGRESS = 5
    
    $END_DIALOG_INST = 1
    wait 0
    
    if
    OOS_FARMERS_WITH_PLAYER == 0
    then
    v$PHRASE3 = "ENB268"
    gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
    else
    v$PHRASE3 = "END268"
    gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
    end
    
    OOS_CURRENT_PROGRESS = 6
            
    jump to @CAMP_LEADER_MENU_EXIT
    
    end     
    
if
0@ < 1000
then
v$2NAME1 = "N_ME"
end        

if
0@ > 1000
then
v$2NAME1 = "N_"
end
0AD3: v$2NAME2 = format "%d" 0@
098B: v$2NAME3 = v$2NAME1 + v$2NAME2

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if
$RNDM_HOUSE_BANKA[0@] > 150
then
$RNDM_HOUSE_BANKA[0@] = 150
end
008B: 1@ = $RNDM_HOUSE_BANKA[0@] // (int)

if or
UNITED_MAP == 1
$ONMISSION == 1
USHER_STORY_FLAG == 1
BOMBS_TIMER > 0
then
0512: show_permanent_text_box 'GAME331'
else
0512: show_permanent_text_box 'GME331B'
end

$PANEL = 0
08D4: $PANEL = create_panel_with_title v$2NAME3 position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 2 interactive 1 background 1 alignment 1

if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then

if and
$ONMISSION == 0
not USHER_STORY_FEATRUES_LOCKED == -2
then

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)

if
$ENTERED_CAMP_NUMBER == 5
then

if and
$CAMP_DEAD_FLAG[0] == 0
$CAMP_MODEL3[0] == 12785
$CAMP_DEAD_FLAG[3] == 0
$CAMP_MODEL8[3] == 12788
then
//ass
else
31@ = -1
end

end

if and
31@ < 100
31@ > 89
not CAMP_LEADER_RANDOM_FLAG == 1
then
CAMP_LEADER_DONATE_FLAG = 2
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME509' 'GAME511' 'GME1273' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else  
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME509' 'GAME511' 'GAME510' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

else
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME509' 'GAME511' 'GAME655' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

if and
CAMP_RAID_FLAG == 1
UNITED_MAP == 0
    then
    08D9: set_panel $PANEL row 0 enable 0
    
    if
    $PANEL_CL_ACTIVE_ROW == 0
        then
        $PANEL_CL_ACTIVE_ROW = 1
        end
    
    end

if or
MAIN_QUEST9_COMPLETED_FLAG == 3
MAIN_QUEST9_COMPLETED_FLAG == 4
then

if or
$ENTERED_CAMP_NUMBER == 6
$ENTERED_CAMP_NUMBER == 7
$ENTERED_CAMP_NUMBER == 8
then

if
$ENTERED_CAMP_NUMBER == 8
then

if and
MYERS_MEET_FLAG == 1
MYERS_ALIVE == 1
ARIADNA_FINISHED == 1
PLAYER_KNOW_ABOUT_BOMBS == 0
then
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME509' 'GME1228' 'GME1027' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME509' 'GAME511' 'GME1027' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

end

if and
MYERS_MEET_FLAG == 1
MYERS_ALIVE == 1
ARIADNA_FINISHED == 1
PLAYER_KNOW_ABOUT_BOMBS == 0
then
08D9: set_panel $PANEL row 1 enable 1
else
08D9: set_panel $PANEL row 1 enable 0 
end

if
MAIN_QUEST9_COMPLETED_FLAG == 4
    then
    08D9: set_panel $PANEL row 2 enable 0
    
    if
    $PANEL_CL_ACTIVE_ROW == 2
        then
        $PANEL_CL_ACTIVE_ROW = 0
        end
    
    end
if
$PANEL_CL_ACTIVE_ROW == 1
    then
    if and
    not MAIN_QUEST9_COMPLETED_FLAG == 4
    not $ENTERED_CAMP_NUMBER == 6
    not $ENTERED_CAMP_NUMBER == 7
        then                    
        $PANEL_CL_ACTIVE_ROW = 2  
        else
        $PANEL_CL_ACTIVE_ROW = 0
        end
    end
end


end

else

if
$ONMISSION == 0
then  
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME511' 'GAME510' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel $PANEL column 0 header 'GAME328' data 'GAME511' 'GAME655' 'INV15' 'GAME575' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

end

if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
08D6: set_panel $PANEL column 1 alignment 1
08EE: set_panel $PANEL column 1 row 4 text_2numbers GXT 'INV288' number 1@
09DB: set_panel $PANEL column 0 width 130 
09DB: set_panel $PANEL column 1 width 50
08D9: set_panel $PANEL row 3 enable 0
08D9: set_panel $PANEL row 4 enable 0
else
08D6: set_panel $PANEL column 1 alignment 1
08EE: set_panel $PANEL column 1 row 3 text_2numbers GXT 'INV288' number 1@
09DB: set_panel $PANEL column 0 width 130 
09DB: set_panel $PANEL column 1 width 50
08D9: set_panel $PANEL row 2 enable 0
08D9: set_panel $PANEL row 3 enable 0

if
$PANEL_CL_ACTIVE_ROW == 2
then
$PANEL_CL_ACTIVE_ROW = 1
end

end

if and
$ONMISSION == 1
803A: not  $ENTERED_CAMP_NUMBER == $QUEST_CAMP_NUMBER // (int)
then

if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
08D9: set_panel $PANEL row 2 enable 0

if
$PANEL_CL_ACTIVE_ROW == 2
then
$PANEL_CL_ACTIVE_ROW = 1
end

else

08D9: set_panel $PANEL row 1 enable 0 

if
$PANEL_CL_ACTIVE_ROW == 1
then
$PANEL_CL_ACTIVE_ROW = 0
end

end

end

if and
$QUEST_TYPE > 9
not $QUEST_TYPE == 100
then
jump to @CAMP_LEADER_ANTI_CANCEL_MQ_JUMP
end

if
CSF_CURRENT_PROGRESS_FLAG > 0
    then
    if or
    $ENTERED_CAMP_NUMBER == 6
    $ENTERED_CAMP_NUMBER == 7
        then
        jump to @CAMP_LEADER_ANTI_CANCEL_MQ_JUMP
        end
    end
    
if and
MAIN_QUEST9_COMPLETED_FLAG > 1
CSF_CURRENT_PROGRESS_FLAG == 0
$ENTERED_CAMP_NUMBER == 8
    then
    jump to @CAMP_LEADER_ANTI_CANCEL_MQ_JUMP
    end    

if and
$ONMISSION == 1
CAMP_RAID_FLAG == 1
then

:CAMP_LEADER_ANTI_CANCEL_MQ_JUMP

if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
08D9: set_panel $PANEL row 2 enable 0

if
$PANEL_CL_ACTIVE_ROW == 2
then
$PANEL_CL_ACTIVE_ROW = 1
end

else
08D9: set_panel $PANEL row 1 enable 0 

if
$PANEL_CL_ACTIVE_ROW == 1
then
$PANEL_CL_ACTIVE_ROW = 0
end

end

end

if and
OOS_CURRENT_PROGRESS > 0
UNITED_MAP == 0    
    then
    if or
    $ENTERED_CAMP_NUMBER == 0
    $ENTERED_CAMP_NUMBER == 1
    $ENTERED_CAMP_NUMBER == 2
        then
        08D9: set_panel $PANEL row 2 enable 0    
        if
        $PANEL_CL_ACTIVE_ROW == 2
            then
            $PANEL_CL_ACTIVE_ROW = 0
            end
        end
    end
    
if or
USHER_STORY_FEATRUES_LOCKED == -2
USHER_STORY_FEATRUES_LOCKED == -3
USHER_STORY_FEATRUES_LOCKED == -4
then
08D9: set_panel $PANEL row 2 enable 0
end    

090E: set_panel $PANEL active_row $PANEL_CL_ACTIVE_ROW 
wait 100

:CAMP_LEADER_MENU_IDLE
wait 0

$PHRASES_OFF_FLAG = 1

if or
UNITED_MAP == 1
$ONMISSION == 1
USHER_STORY_FLAG == 1
BOMBS_TIMER > 0
then

if
8A2A: not  text_box 'GAME331' displayed
then
0512: show_permanent_text_box 'GAME331' 
end   

else

if
8A2A: not  text_box 'GME331B' displayed
then
0512: show_permanent_text_box 'GME331B' 
end   

end   

08D7: $PANEL_CL_ACTIVE_ROW = panel $PANEL active_row        

if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
3@ = 0
else
3@ = 9
end

if or
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int)
$TALK_SIMULATE == 2 
    then     
    text.ShowH('GMD_117',10,1)  
    if or
    00E1: player 0 pressed_key 16
    $TALK_SIMULATE == 2
        then                
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        
        ///////////////////////////////////////////////////////////////////////
        
        008B: 3@ = $ENTERED_CAMP_NUMBER // (int)
        3@ += 156
        
        2@ = 0
        if and
        CARMA_BAD_POINTS >= 30
        $RNDM_HOUSE_BANKA[29@] < 60
        then
        2@ = 1
        end
        
        if or
        $RNDM_HOUSE_BANKA[3@] < 1
        2@ == 1
            then
        
            gosub @RANDOM_DIALOG_LEADER_STORY_FUCKNO
            
            0605: actor $CAMP_ACTOR[15@] perform_animation "fucku2" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 1333 ms
                    
            v$2NAME3 = "GAME513"
                                    
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer
                        
            32@ = 0                          
                        
            repeat
            wait 0
                        
            $PHRASES_OFF_FLAG = 1                              
                                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
                                        
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                                        
            until 002D:   32@ >= 29@  // (int)
                        
            text.ClearAll()
            
            jump to @CAMP_LEADER_START_MENU
            
            end
            
         ///////////////////////////////////////////////////////////////////////   
                        
        jump to @CAMP_LEADER_SURV_START_MENU
        end
    end
    
if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
3@ = 1
else
3@ = 0
end    

if and
PLAYER_KNOW_ABOUT_BOMBS == 0
MYERS_MEET_FLAG == 1
MYERS_ALIVE == 1
ARIADNA_FINISHED == 1
$ENTERED_CAMP_NUMBER == 8
then

if 
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int) 
    then     
    text.ShowH('GMD_175',10,1)  
    if
    00E1: player 0 pressed_key 16    
        then
        
        03E6: remove_text_box
        08DA: remove_panel $PANEL 
        00BE: text_clear_all
                        
        $QUEST_TYPE = 24
        $ONMISSION = 1
        
        v$PHRASE3 = "END155"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM_PLAYER
        v$PHRASE3 = "END156"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
        v$PHRASE3 = "END157"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM_PLAYER        
        
        fade 0 2000  
        wait 2000 
        
        v$ST_DIALOG[0] = "END158"
        v$ST_DIALOG[1] = "END159"
        v$ST_DIALOG[2] = "END160"
        v$ST_DIALOG[3] = "END161"
        v$ST_DIALOG[4] = "END162"
        v$ST_DIALOG[5] = "END163"
        v$ST_DIALOG[6] = "END164"
        v$ST_DIALOG[7] = "END165"
        v$ST_DIALOG[8] = "END166"
        v$ST_DIALOG[9] = "END167"
        $DIALOG_COUNT = 9
        create_thread @DG_SYS2
        
        repeat
        wait 0
        0924: enable_screen_darkness 1 with_value 255
        fade 1 1
        until $DIALOG_END == 1
        
        0924: enable_screen_darkness 1 with_value 255
        fade 0 0
        wait 2000
        0924: enable_screen_darkness 0 with_value -1
        
        PLAYER_KNOW_ABOUT_BOMBS = 1
        $PANEL_CL_ACTIVE_ROW = 0
        
        fade 1 2000  
        wait 2000
        
        v$ACHIEVEMNT = "SFQ11C"
//        $GQUEST_GOT_FLAG = 1                             
        0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ11GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 11
        
        v$PHRASE3 = "END168"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM_PLAYER
        v$PHRASE3 = "END169"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
        v$PHRASE3 = "END170"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM_PLAYER
        v$PHRASE3 = "END171"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
        v$PHRASE3 = "END172"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM_PLAYER
        v$PHRASE3 = "END173"
        gosub @RANDOM_DIALOG_LEADER_NOTRANDOM                
        
//        repeat
//        wait 0
//        until $GQUEST_GOT_FLAG == 0
                                
        v$ACHIEVEMNT = "SFQ17B"
        $GQUEST_GOT_FLAG = 1                             
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ17GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ18GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ19GT"
        0AF1: write_int 0 to_ini_file "data\survival.set" section "SRV" key "SFQ20GT"
        $GQST_SLCTD_RGIN = 4
        $GQEST_SLCTD_QST = 17
        $ONMISSION = 0
        $QUEST_TYPE = -1
               
        jump to @CAMP_LEADER_START_MENU
        
        end
    end
else
    
if 
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int) 
    then     
    text.ShowH('GMD_119',10,1)  
    if
    00E1: player 0 pressed_key 16    
        then
        :CAMP_HABAR_GET_INSTANT_JUMP
        008B: 29@ = $ENTERED_CAMP_NUMBER // (int)
        29@ += 156
        
        2@ = 0
        if and
        CARMA_BAD_POINTS >= 30
        $RNDM_HOUSE_BANKA[29@] < 60
        then
        2@ = 1
        end
        
        if and
        MAIN_QUEST3_COMPLETED_FLAG == 0
        UNITED_MAP == 0
        $FREEMODE == 1
        $ENTERED_CAMP_NUMBER == 2
        $RNDM_HOUSE_BANKA[29@] < 80
        not CUSTOM_MODE_TURN_OFF_STORY_THINGS == 1
        then
        2@ = 1
        end
        
        if and
        $CAMP_HABAR_TIMER > 20160
        not $RNDM_HOUSE_BANKA[29@] < 1
        not 2@ == 1
            then
            $CAMP_HABAR_TIMER = 0    
            03E6: remove_text_box 
            if and
            $FREEMODE == 1
            not $GAMEMODE_STORYLINE == 1
            then 
            08DA: remove_panel $PANEL
            end  
            
            if
            USHER_STORY_FLAG == 1
            then
            08DA: remove_panel $PANEL
            end
            
            00BE: text_clear_all
            
            gosub @RANDOM_DIALOG_LEADER_HABAR_YES
            
            0605: actor $CAMP_ACTOR[15@] perform_animation "habargive" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 1170 ms                        
            
            v$2NAME3 = "GAME513"
                        
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer                          
            
            $HEAL += 1
            $BINT += 1
            
            random_int 0@ 0 to 2
            if
            PLAYER_FOOD_ZAPAS > 20
            then
            0@ = 0
            end
            
            if
            0@ == 0
            then
            $BANKA += 1
            else
            $BANKA += 2
            end
            
            046D: 0@ = actor PLAYER_ACTOR members_in_group
            
            if and
            0@ >= 1
            0E4D: random_percent 85
            then
            $BANKA += 1
            $BINT += 1
            end
            
            if and
            0@ >= 2
            0E4D: random_percent 70
            PLAYER_FOOD_ZAPAS < 45
            then
            $BANKA += 1
            $BINT += 1
            end
            
            if and
            0@ >= 3
            0E4D: random_percent 50
            PLAYER_FOOD_ZAPAS < 30
            then
            $BANKA += 2
            $BINT += 1
            end
            
            if or
            $EASY_MODE == 1
            EASIER_SHIT_LEVEL == 2
            then
            $BANKA += 3
            $BINT += 3
            $HEAL += 3
            end
            
            if or
            $NORMAL_MODE == 1
            EASIER_SHIT_LEVEL == 1
            then
            $BANKA += 2
            $BINT += 1
            $HEAL += 1
            end
            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
            if
            31@ >= 100
                then
                if
                0E4D: random_percent 70
                    then
                    $BANKA += 1
                    $BINT += 1
                    $HEAL += 1
                    
                    if
                    $KANISTRA > 0
                    then
                    $KANISTRA_FUEL += 8.0
                    end
                    
                    else
                    $BINT += 1
                    
                    if
                    $KANISTRA > 0
                    then
                    $KANISTRA_FUEL += 4.5
                    end
                    
                    end
                end
            if
            31@ >= 150
                then
            
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 2 weapon 0@ ammo 1@ model 2@
                if
                0488:   model 2@ exists  // versionA
                    then
                    random_int 1@ 20 40
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end    
                
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 3 weapon 0@ ammo 1@ model 2@
                if
                0488:   model 2@ exists  // versionA
                    then
                    random_int 1@ 10 17
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end
                
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 4 weapon 0@ ammo 1@ model 2@
                if
                0488:   model 2@ exists  // versionA
                    then
                    random_int 1@ 20 40
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end
                
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 5 weapon 0@ ammo 1@ model 2@
                if
                0488:   model 2@ exists  // versionA
                    then
                    random_int 1@ 20 40
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end
                
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 6 weapon 0@ ammo 1@ model 2@
                if
                0488:   model 2@ exists  // versionA
                    then
                    random_int 1@ 10 20
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end
                    
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 7 weapon 0@ ammo 1@ model 2@
                if and
                0488:   model 2@ exists  // versionA
                not 2@ == 109
                not 2@ == 93
                not 2@ == 70
                    then
                    random_int 1@ 3 6
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end
                    
                04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 8 weapon 0@ ammo 1@ model 2@
                if
                0488:   model 2@ exists  // versionA
                    then
                    random_int 1@ 3 6
                    0093: 1@ = integer 1@ to_float
                    006F: 1@ *= AMMO_DELIVERY_FROM_LEADER_COEFF // (float)
                    0092: 1@ = float 1@ to_integer
                    0114: set_actor PLAYER_ACTOR weapon 0@ add_ammo 1@
                    end
            
                end
            
            Audiostream.Volume($PICKUP_ITEM_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($PICKUP_ITEM_SOUND, 0)
            Audiostream.PerformAction($PICKUP_ITEM_SOUND, PLAY)
            
            32@ = 0
            
            repeat
            wait 0
            
            $PHRASES_OFF_FLAG = 1                              
            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
            if
            31@ >= 100
            then
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end
            
            0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
            else                
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
            end
                            
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                            
            until 002D:   32@ >= 29@  // (int)
            
            text.ClearAll()
            
            if
            not USHER_STORY_FLAG == 1
            then
            
            if or
            $FREEMODE == 0
            $GAMEMODE_STORYLINE == 1
            then
            jump to @CAMP_LEADER_MENU_EXIT
            end
            
            end
                    
            jump to @CAMP_LEADER_START_MENU
            else
            
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            008B: 29@ = $ENTERED_CAMP_NUMBER // (int)
            29@ += 156
            
            2@ = 0
            if and
            CARMA_BAD_POINTS >= 30
            $RNDM_HOUSE_BANKA[29@] < 60
            then
            2@ = 1
            end
            
            if and
            not $RNDM_HOUSE_BANKA[29@] < 1
            not 2@ == 1
            then
            gosub @RANDOM_DIALOG_LEADER_HABAR_NO
            0605: actor $CAMP_ACTOR[15@] perform_animation "endchat_02" IFP "PED" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 2000 ms
            else
            gosub @RANDOM_DIALOG_LEADER_HABAR_FUCKNO
            0605: actor $CAMP_ACTOR[15@] perform_animation "fucku2" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 1333 ms
            end
            
            v$2NAME3 = "GAME513"
                        
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer
            
            32@ = 0                          
            
            repeat
            wait 0
            
            $PHRASES_OFF_FLAG = 1                              
                            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
            if
            31@ >= 100
            then
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end
            
            0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
            else                
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
            end
                            
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                            
            until 002D:   32@ >= 29@  // (int)
            
            text.ClearAll()
            
            if
            not USHER_STORY_FLAG == 1
            then
            
            if or
            $FREEMODE == 0
            $GAMEMODE_STORYLINE == 1
            then
            jump to @CAMP_LEADER_MENU_EXIT
            end
            
            end
            
            if
            ZAME_SPEAK_WITH_LEADER_FLAG == 222
            then
            CAMP_LEADER_DONT_SAY_BYE_FLAG = 1
            end
            
            jump to @CAMP_LEADER_START_MENU
            end
        end
    end
    
end    
    
if and
$PANEL_CL_ACTIVE_ROW == 2
MAIN_QUEST9_COMPLETED_FLAG == 3
$ENTERED_CAMP_NUMBER == 8 
    then     
    text.ShowH('GMD_165',10,1)  
    if
    00E1: player 0 pressed_key 16    
        then
        0@ = 0                
        if and
        $BANKA >= 20
        $HEAL >= 10
        0@ == 0
            then
            
            $CAMP_HABAR_TIMER = 0    
            03E6: remove_text_box
            if and
            $FREEMODE == 1
            not $GAMEMODE_STORYLINE == 1
            then 
            08DA: remove_panel $PANEL
            end  
            
            if
            USHER_STORY_FLAG == 1
            then
            08DA: remove_panel $PANEL
            end
            
            00BE: text_clear_all                                                                        
            
            v$2NAME3 = "GAME513"
                        
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer                          
            
            if
            CSF_CURRENT_PROGRESS_FLAG == 1
            then
            v$PHRASE3 = "ENDF74"
            gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
            v$PHRASE3 = "ENDF75"
            gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
            else
            v$PHRASE3 = "ENDF74"
            gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
            v$PHRASE3 = "ENDZ74"
            gosub @RANDOM_DIALOG_LEADER_NOTRANDOM
            end
            
            32@ = 0
            
            repeat
            wait 0
            
            $PHRASES_OFF_FLAG = 1                              
            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
            if
            31@ >= 100
            then
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end
            
            0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
            else                
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
            end
                            
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                            
            until 002D:   32@ >= 29@  // (int)
            
            $BANKA -= 20
            $HEAL -= 10
            MAIN_QUEST9_COMPLETED_FLAG = 4
            
            v$ACHIEVEMNT = "SFQ14C"
            $GQUEST_GOT_FLAG = 1
            0AF1: write_int 1 to_ini_file "data\survival.set" section "SRV" key "SFQ14GT"
            $GQST_SLCTD_RGIN = 4
            $GQEST_SLCTD_QST = 14
            
            0605: actor PLAYER_ACTOR perform_animation "habargive" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor PLAYER_ACTOR look_at_actor $CAMP_ACTOR[15@] 1170 ms
                                    
            Audiostream.Volume($PICKUP_ITEM_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($PICKUP_ITEM_SOUND, 0)
            Audiostream.PerformAction($PICKUP_ITEM_SOUND, PLAY)
            
            text.ClearAll()
            
            if or
            $FREEMODE == 0
            $GAMEMODE_STORYLINE == 1
            then
            jump to @CAMP_LEADER_MENU_EXIT
            end
                    
            jump to @CAMP_LEADER_START_MENU
            else
            
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all            
            
            0605: actor $CAMP_ACTOR[15@] perform_animation "endchat_02" IFP "PED" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 2000 ms
            
            v$PHRASE3 = "ENDN74"
            gosub @RANDOM_DIALOG_LEADER_NOTRANDOM                        
            
            v$2NAME3 = "GAME513"
                        
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer
            
            32@ = 0                          
            
            repeat
            wait 0
            
            $PHRASES_OFF_FLAG = 1                              
                            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
            if
            31@ >= 100
            then
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end
            
            0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
            else                
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
            end
                            
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                            
            until 002D:   32@ >= 29@  // (int)
            
            text.ClearAll()
            
            if or
            $FREEMODE == 0
            $GAMEMODE_STORYLINE == 1
            then
            jump to @CAMP_LEADER_MENU_EXIT
            end
            
            jump to @CAMP_LEADER_START_MENU
            end
        end
    end    
    
if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
3@ = 2
else
3@ = 1
end

if or
$ENTERED_CAMP_NUMBER == 6
$ENTERED_CAMP_NUMBER == 7
$ENTERED_CAMP_NUMBER == 8
then
if
MAIN_QUEST9_COMPLETED_FLAG == 3
    then
    jump to @CAMP_LEADER_WANNAWORK_SKIP
    end
end             
    
if and
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int)
$ONMISSION == 0
CAMP_LEADER_DONATE_FLAG == 0 
    then     
    text.ShowH('GMD_118',10,1)  
    if
    00E1: player 0 pressed_key 16
        then
        :GO_ZADANIE_PLEASE
        if
        $CHECKPOINT[$ENTERED_CAMP_NUMBER] > 20160
            then    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all        
            jump to @CAMP_LEADER_QUEST_GET
            else
            
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            gosub @RANDOM_DIALOG_LEADER_QUEST_NO
            
            0605: actor $CAMP_ACTOR[15@] perform_animation "endchat_02" IFP "PED" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor $CAMP_ACTOR[15@] look_at_actor PLAYER_ACTOR 2000 ms
            
            v$2NAME3 = "GAME513"
                        
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer
            
            32@ = 0                          
            
            repeat
            wait 0
            
            $PHRASES_OFF_FLAG = 1                              
                            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
            if
            31@ >= 100
            then
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end
            
            0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
            else                
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
            end
                            
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                            
            until 002D:   32@ >= 29@  // (int)
            
            text.ClearAll()
            
            jump to @CAMP_LEADER_START_MENU
            
            end
        end
    end
    
:CAMP_LEADER_WANNAWORK_SKIP    
    
if and
UNITED_MAP == 0
not CAMP_LEADER_RANDOM_FLAG == 1
then
3@ = 2
else
3@ = 1
end    
    
if and
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int)
$ONMISSION == 1 
    then     
    text.ShowH('GMD_137',10,1)  
    if
    00E1: player 0 pressed_key 16
        then                
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        repeat
        wait 0
        text.ShowH('GME1395',250,1) 
        
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            jump to @CAMP_LEADER_START_MENU
            end
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            break
            end    
        
        until false    
        
        gosub @RANDOM_DIALOG_LEADER_QUEST_CANCEL
            
        v$2NAME3 = "GAME513"
                        
        09FD: get_gxt_string v$PHRASE3 width_to 29@
        0093: 29@ = integer 29@ to_float
        29@ *= 8.0
        0092: 29@ = float 29@ to_integer
            
        32@ = 0                          
            
        repeat
        wait 0
            
        $PHRASES_OFF_FLAG = 1                              
                            
        0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
                            
        if or
        $SAVESTATUS_TRUE == 1
        $SAVESTATUS == 1
        GAME_OVER_FLAG == 1
        80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
        00E1:   player 0 pressed_key 17
            then
            break
            end
                            
        until 002D:   32@ >= 29@  // (int)
            
        text.ClearAll()
            
        RANDOM_QUEST_CANCEL_FLAG = 2            
        return            
        end
    end
    
if and
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int)
$ONMISSION == 0
CAMP_LEADER_DONATE_FLAG == 1 
    then     
    text.ShowH('GMD_178',10,1)  
    if
    00E1: player 0 pressed_key 16
        then
        :GO_DONATE_PLEASE
        if and
        $BANKA >= 3
        $HEAL >= 3
            then
            $CAMP_HABAR_TIMER = 0    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all                                            
            0605: actor PLAYER_ACTOR perform_animation "habargive" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1
            05BF: AS_actor PLAYER_ACTOR look_at_actor $CAMP_ACTOR[15@] 1170 ms
            wait 1170
            $BANKA -= 3
            $HEAL -= 3
            
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            gosub @RANDOM_DIALOG_LEADER_DONATE
                
            v$2NAME3 = "GAME513"
                            
            09FD: get_gxt_string v$PHRASE3 width_to 29@
            0093: 29@ = integer 29@ to_float
            29@ *= 8.0
            0092: 29@ = float 29@ to_integer
                
            32@ = 0                          
                
            repeat
            wait 0
                
            $PHRASES_OFF_FLAG = 1                              
                                
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
                                
            if or
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            GAME_OVER_FLAG == 1
            80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
            00E1:   player 0 pressed_key 17
                then
                break
                end
                                
            until 002D:   32@ >= 29@  // (int)
                
            text.ClearAll()
            
            008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
            0@ += 156
            $RNDM_HOUSE_BANKA[0@] = 100
            
            $CHECKPOINT[$ENTERED_CAMP_NUMBER] += 20160
            
            jump to @CAMP_LEADER_START_MENU
                        
            else                        
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            text.ShowH('GME1274',2000,1)
            wait 2000
            jump to @CAMP_LEADER_START_MENU
            
            end
        end
    end
    
if and
003C:   $PANEL_CL_ACTIVE_ROW == 3@  // (int)
$ONMISSION == 0
CAMP_LEADER_DONATE_FLAG == 2 
    then     
    text.ShowH('GMD_178',10,1)  
    if
    00E1: player 0 pressed_key 16
        then
        
        /////////////////////////////////////////////////////////////////////////////////////
        
        text.ClearAll()
        text.RemoveTextBox()
        08DA: remove_panel $PANEL
        00BE: text_clear_all
        
        while true
        wait 0
        text.ShowH('GME1499',100,1)
                
        if or
        00E1:  player 0 pressed_key 15 
        actor.Dead(PLAYER_ACTOR)
        $HUNTER_ON_PLAYER == 1
        0818:  actor PLAYER_ACTOR in_air
        then
        break
        end
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            CAMP_LEADER_DONATE_FLAG = 1
            08D4: $PANEL = create_panel_with_title v$2NAME3 position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 2 interactive 1 background 1 alignment 1
            jump to @GO_DONATE_PLEASE    
            break
            end  
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll() 
            CAMP_LEADER_DONATE_FLAG = 2
            08D4: $PANEL = create_panel_with_title v$2NAME3 position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 2 interactive 1 background 1 alignment 1  
            jump to @GO_ZADANIE_PLEASE  
            break
            end      
            
        end  
        
        /////////////////////////////////////////////////////////////////////////////////////
        
        end
    end 
    
if and
00E1: player 0 pressed_key 4
UNITED_MAP == 0
$ONMISSION == 0
USHER_STORY_FLAG == 0
BOMBS_TIMER < 1
    then     
    00BE: text_clear_all
    wait 0
    cinema.Widescreen(1)   
    03E6: remove_text_box 
    08DA: remove_panel $PANEL      
    jump to @CAMP_LEADER_FASTTRAVEL_ZAKAZ
    end                                                  

if or
00E1:  player 0 pressed_key 15 
actor.Dead(PLAYER_ACTOR)
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
then
:CAMP_LEADER_MENU_EXIT
03E6: remove_text_box
if and
$FREEMODE == 1
not $GAMEMODE_STORYLINE == 1
then 
08DA: remove_panel $PANEL
end    

if
USHER_STORY_FLAG == 1
then
08DA: remove_panel $PANEL
end

00BE: text_clear_all    
$PANEL_OPEN = 0
return
else
jump @CAMP_LEADER_MENU_IDLE
end        

jump to @CAMP_LEADER_MENU_IDLE

{$INCLUDE Camp Random Quest.txt}

:CAMP_LEADER_STORY_TELL

008B: 29@ = $ENTERED_CAMP_NUMBER // (int)
29@ += 100
if
$RNDM_HOUSE_WEAPON[29@] == 1
    then

    gosub @RANDOM_DIALOG_LEADER_STORY_AGAIN
            
    v$2NAME3 = "GAME513"
                            
    09FD: get_gxt_string v$PHRASE3 width_to 29@
    0093: 29@ = integer 29@ to_float
    29@ *= 8.0
    0092: 29@ = float 29@ to_integer
                
    32@ = 0                          
                
    repeat
    wait 0
                
    $PHRASES_OFF_FLAG = 1                              
                                
    0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 99 1
                                
    if or
    $SAVESTATUS_TRUE == 1
    $SAVESTATUS == 1
    GAME_OVER_FLAG == 1
    80FE: not  actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_X[$ENTERED_CAMP_NUMBER] $CAMP_Y[$ENTERED_CAMP_NUMBER] $CAMP_Z[$ENTERED_CAMP_NUMBER] radius 140.0 140.0 140.0
        then
        break
        end
                                
    until 002D:   32@ >= 29@  // (int)
                
    text.ClearAll()
    
    gosub @STORY_AGAIN_ACCEPT
    
    if
    0@ == 1
    then
    else
    jump to @CAMP_LEADER_START_MENU
    end

    end

///////////////////////////////////////////ОБЩИЕ КОНЦОВКИ///////////////////////////////////////////

if
$ENTERED_CAMP_NUMBER == 0   
then
$X_MIN = 0
$X_MAX = 9
end

if
$ENTERED_CAMP_NUMBER == 1   
then
$X_MIN = 10
$X_MAX = 18
end

if
$ENTERED_CAMP_NUMBER == 2   
then
$X_MIN = 19
$X_MAX = 27
end

if
$ENTERED_CAMP_NUMBER == 3   
then
$X_MIN = 28
$X_MAX = 36
end

if
$ENTERED_CAMP_NUMBER == 4   
then
$X_MIN = 37
$X_MAX = 45
end

if
$ENTERED_CAMP_NUMBER == 5   
then
$X_MIN = 46
$X_MAX = 55
end

if
$ENTERED_CAMP_NUMBER == 6   
then
$X_MIN = 69
$X_MAX = 79
end

if
$ENTERED_CAMP_NUMBER == 7   
then
$X_MIN = 56
$X_MAX = 68
end

if
$ENTERED_CAMP_NUMBER == 8   
then
$X_MIN = 80
$X_MAX = 89
end

if
$ENTERED_CAMP_NUMBER == 9   
then
$X_MIN = 136
$X_MAX = 145
end

if
$ENTERED_CAMP_NUMBER == 10   
then
$X_MIN = 124
$X_MAX = 135
end

if
$ENTERED_CAMP_NUMBER == 11   
then
$X_MIN = 113
$X_MAX = 123
end

if
$ENTERED_CAMP_NUMBER == 12   
then
$X_MIN = 103
$X_MAX = 112
end

if
$ENTERED_CAMP_NUMBER == 13   
then
$X_MIN = 90
$X_MAX = 102
end

while not animation.Available('GANGS')
wait 0
animation.Load('GANGS')
end

text.ClearAll()
wait 1
text.ClearAll()
wait 1
text.ClearAll()
wait 1
cinema.Widescreen(1)

////////////////////////////////////////////////////////////////////////////
    
for 16@ = $X_MIN to $X_MAX

v$X1 = "L" // v$ // Sunday

0AD3: v$X2 = format "%d" 16@  
098B: v$X3 = v$X1 + v$X2 // all string variables

09FD: get_gxt_string v$X3 width_to 3@  // ~k~~PED_SPRINT~ Select
0093: 3@ = integer 3@ to_float
3@ *= 10.0
0092: 3@ = float 3@ to_integer    
    
0384: show_text_1string GXT v$X3 string v$NAME3 time 3@ 1

0967: actor $CAMP_ACTOR[15@] move_mouth 3@ ms
gosub @RANDOM_LEADER_ANIM_TALK
0605: actor $CAMP_ACTOR[15@] perform_animation 10@v IFP "GANGS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 3@

32@ = 0
33@ = 0

while 801D: not  32@ > 3@  // (int)
wait 0

$PHRASES_OFF_FLAG = 1

text.RemoveTextBox()

if and
00E1: key_pressed 0 17
33@ > 400
    then
    
    008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
    0@ += 100
    
    if
    not $RNDM_HOUSE_WEAPON[0@] == 1
    then    
    33@ /= 40
    008A: $TEMP_XP = 33@ // (int)    
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)
    end
        
    break
    end
    
end
    
end

////////////////////////////////////////////////////////////////////////////

0605: actor $CAMP_ACTOR[15@] perform_animation 10@v IFP "GANGS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 100
//0967: actor $CAMP_ACTOR[15@] move_mouth 100 ms
0968: actor $CAMP_ACTOR[15@] stop_mouth

text.ClearAll()
cinema.Widescreen(0)
animation.Release('GANGS')

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 100
$RNDM_HOUSE_WEAPON[0@] = 1

jump to @CAMP_LEADER_START_MENU

:RANDOM_LEADER_ANIM_TALK
random_int 2@ 0 7
if
not 2@ == 0
jf @RANDOM_LEADER_ANIM_TALK1
if
not 2@ == 1
jf @RANDOM_LEADER_ANIM_TALK2
if
not 2@ == 2
jf @RANDOM_LEADER_ANIM_TALK3
if
not 2@ == 3
jf @RANDOM_LEADER_ANIM_TALK4
if
not 2@ == 4
jf @RANDOM_LEADER_ANIM_TALK5
if
not 2@ == 5
jf @RANDOM_LEADER_ANIM_TALK6
if
not 2@ == 6
jf @RANDOM_LEADER_ANIM_TALK7
if
not 2@ == 7
jf @RANDOM_LEADER_ANIM_TALK8

:RANDOM_LEADER_ANIM_TALK1
06D2: 10@v = "talk1" // @v = string
return  

:RANDOM_LEADER_ANIM_TALK2
06D2: 10@v = "talk2" // v$ = string  
return

:RANDOM_LEADER_ANIM_TALK3
06D2: 10@v = "talk3" // v$ = string  
return

:RANDOM_LEADER_ANIM_TALK4
06D2: 10@v = "talk4" // v$ = string  
return

:RANDOM_LEADER_ANIM_TALK5
06D2: 10@v = "talk5" // v$ = string  
return

:RANDOM_LEADER_ANIM_TALK6
06D2: 10@v = "talk6" // v$ = string  
return

:RANDOM_LEADER_ANIM_TALK7
06D2: 10@v = "talk7" // v$ = string  
return

:RANDOM_LEADER_ANIM_TALK8
06D2: 10@v = "talk8" // v$ = string  
return

:RANDOM_DIALOG_LEADER_HABAR_NO
    
for 1@ = 0 to 200

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
if
31@ < 100
    then
    v$PHRASE1 = "PH109_"
    end
if
31@ >= 100
    then
    v$PHRASE1 = "PH134_"
    end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end                     

end  

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
if
31@ < 100
    then
    v$PHRASE1 = "PH109_"
    end
if
31@ >= 100
    then
    v$PHRASE1 = "PH134_"
    end

0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_HABAR_YES
    
for 1@ = 0 to 200

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
if
31@ < 100
    then
    v$PHRASE1 = "PH110_"
    end
if and
31@ >= 100
31@ < 150
    then
    v$PHRASE1 = "PH132_"
    end
if
31@ >= 150
    then
    v$PHRASE1 = "PH133_"
    end
    
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
008B: 31@ = $RNDM_HOUSE_BANKA[0@] // (int)
if
31@ < 100
    then
    v$PHRASE1 = "PH110_"
    end
if and
31@ >= 100
31@ < 150
    then
    v$PHRASE1 = "PH132_"
    end
if
31@ >= 150
    then
    v$PHRASE1 = "PH133_"
    end

0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_BYE
    
for 1@ = 0 to 200

008B: 29@ = $ENTERED_CAMP_NUMBER // (int)
29@ += 156

2@ = 0
if and
CARMA_BAD_POINTS >= 30
$RNDM_HOUSE_BANKA[29@] < 60
then
2@ = 1
end

if and
not $RNDM_HOUSE_BANKA[29@] < 1
not 2@ == 1
then

if
$RNDM_HOUSE_BANKA[29@] >= 100
then
v$PHRASE1 = "PH192_"
else                
v$PHRASE1 = "PH111_"
end

else
v$PHRASE1 = "PH127_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end

2@ = 0
if and
CARMA_BAD_POINTS >= 30
$RNDM_HOUSE_BANKA[29@] < 60
then
2@ = 1
end  

if and
not $RNDM_HOUSE_BANKA[29@] < 1
not 2@ == 1
then

if
$RNDM_HOUSE_BANKA[29@] >= 100
then
v$PHRASE1 = "PH192_"
else                
v$PHRASE1 = "PH111_"
end

else
v$PHRASE1 = "PH127_"
end

0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_QUEST_NO

008B: 29@ = $ENTERED_CAMP_NUMBER // (int)
29@ += 156
    
for 1@ = 0 to 200

2@ = 0
if and
CARMA_BAD_POINTS >= 30
$RNDM_HOUSE_BANKA[29@] < 60
then
2@ = 1
end

if and
$RNDM_HOUSE_BANKA[29@] > 0
not 2@ == 1
then

if
$RNDM_HOUSE_BANKA[29@] >= 100
then
v$PHRASE1 = "PH189_"
else
v$PHRASE1 = "PH118_"
end

else
v$PHRASE1 = "PH123_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

2@ = 0
if and
CARMA_BAD_POINTS >= 30
$RNDM_HOUSE_BANKA[29@] < 60
then
2@ = 1
end

if and
$RNDM_HOUSE_BANKA[29@] > 0
not 2@ == 1
then

if
$RNDM_HOUSE_BANKA[29@] >= 100
then
v$PHRASE1 = "PH189_"
else
v$PHRASE1 = "PH118_"
end

else
v$PHRASE1 = "PH123_"
end

0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_QUEST_READY

008B: 29@ = $ENTERED_CAMP_NUMBER // (int)
29@ += 156
    
for 1@ = 0 to 200

2@ = 0
if and
CARMA_BAD_POINTS >= 30
$RNDM_HOUSE_BANKA[29@] < 60
then
2@ = 1
end

if and
$RNDM_HOUSE_BANKA[29@] > 0
not 2@ == 1
then

if
$RNDM_HOUSE_BANKA[29@] >= 100
then
v$PHRASE1 = "PH188_"
else
v$PHRASE1 = "PH119_"
end

else
v$PHRASE1 = "PH124_"
end

if and
ZAME_SPEAK_WITH_LEADER_FLAG == 225
003A:   $ENTERED_CAMP_NUMBER == ZAME_SPEAK_WITH_LEADER_CAMP_ID // (int)
then
v$PHRASE1 = "PH187_" 
end

if and
MAIN_QUEST1_COMPLETED_FLAG == 1
MAIN_QUEST2_COMPLETED_FLAG == 1
MAIN_QUEST3_COMPLETED_FLAG == 1
CAMP1_RESPECT >= 100
CAMP2_RESPECT >= 100
CAMP3_RESPECT >= 100
OOS_CURRENT_PROGRESS == 1
$ENTERED_CAMP_NUMBER == 0
    then
    if and
    $CAMP_DEAD_FLAG[0] == 0 //Лагерь Гарнет не вымер
    $CAMP_DEAD_FLAG[1] == 0 //Лагерь Фернандо не вымер
    $CAMP_DEAD_FLAG[2] == 0 //Лагерь Энкера не вымер
    $CAMP_AGRED_FLAG[0] == 0 //Лагерь Гарнет не сагрен
    $CAMP_AGRED_FLAG[1] == 0 //Лагерь Фернандо не сагрен
    $CAMP_AGRED_FLAG[2] == 0 //Лагерь Энкера не сагрен
        then
        if and
        $CAMP_MODEL3[0] == 12785
        $CAMP_MODEL3[1] == 12786
        $CAMP_MODEL6[2] == 12787
            then
            v$PHRASE1 = "PH187_" 
            end
        end
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 10
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST13_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12797
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 11
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST12_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12796
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 13
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST10_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12794
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 8
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST9_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12793
    then
    v$PHRASE1 = "PH187_"
    end
    
008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 8
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST7_COMPLETED_FLAG == 1
MAIN_QUEST8_COMPLETED_FLAG == 1
MAIN_QUEST9_COMPLETED_FLAG == 1
02F2:   actor $CAMP_ACTOR[15@] model == 12793
    then
    if and
    $CAMP_MODEL5[7] == 12791
    $CAMP_MODEL3[6] == 12792
    $CAMP_MODEL7[8] == 12793
        then
        v$PHRASE1 = "PH187_"
        end
    end    

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 6
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST8_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12792
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 5
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST6_COMPLETED_FLAG == 0
$CAMP_DEAD_FLAG[0] == 0
$CAMP_MODEL3[0] == 12785
$CAMP_DEAD_FLAG[3] == 0
$CAMP_MODEL8[3] == 12788
02F2:   actor $CAMP_ACTOR[15@] model == 12790
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 4
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST5_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12789
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 3
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST4_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12788
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 2
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST3_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12787
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 1
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST2_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12786
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 0
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST1_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12785
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 9
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST14_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12798
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 7
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST7_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12791
    then
    v$PHRASE1 = "PH187_"
    end        
    
008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 12
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST11_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12795
    then
    v$PHRASE1 = "PH187_"
    end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

2@ = 0
if and
CARMA_BAD_POINTS >= 30
$RNDM_HOUSE_BANKA[29@] < 60
then
2@ = 1
end

if and
$RNDM_HOUSE_BANKA[29@] > 0
not 2@ == 1
then

if
$RNDM_HOUSE_BANKA[29@] >= 100
then
v$PHRASE1 = "PH188_"
else
v$PHRASE1 = "PH119_"
end

else
v$PHRASE1 = "PH124_"
end

if and
ZAME_SPEAK_WITH_LEADER_FLAG == 225
003A:   $ENTERED_CAMP_NUMBER == ZAME_SPEAK_WITH_LEADER_CAMP_ID // (int)
then
v$PHRASE1 = "PH187_" 
end

if and
MAIN_QUEST1_COMPLETED_FLAG == 1
MAIN_QUEST2_COMPLETED_FLAG == 1
MAIN_QUEST3_COMPLETED_FLAG == 1
CAMP1_RESPECT >= 100
CAMP2_RESPECT >= 100
CAMP3_RESPECT >= 100       
OOS_CURRENT_PROGRESS == 1
$ENTERED_CAMP_NUMBER == 0
    then
    if and
    $CAMP_DEAD_FLAG[0] == 0 //Лагерь Гарнет не вымер
    $CAMP_DEAD_FLAG[1] == 0 //Лагерь Фернандо не вымер
    $CAMP_DEAD_FLAG[2] == 0 //Лагерь Энкера не вымер
    $CAMP_AGRED_FLAG[0] == 0 //Лагерь Гарнет не сагрен
    $CAMP_AGRED_FLAG[1] == 0 //Лагерь Фернандо не сагрен
    $CAMP_AGRED_FLAG[2] == 0 //Лагерь Энкера не сагрен
        then
        if and
        $CAMP_MODEL3[0] == 12785
        $CAMP_MODEL3[1] == 12786
        $CAMP_MODEL6[2] == 12787
            then
            v$PHRASE1 = "PH187_" 
            end
        end
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 10
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST13_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12797
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 11
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST12_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12796
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 13
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST10_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12794
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 8
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST9_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12793
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 6
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST8_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12792
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 5
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST6_COMPLETED_FLAG == 0
$CAMP_DEAD_FLAG[0] == 0
$CAMP_MODEL3[0] == 12785
$CAMP_DEAD_FLAG[3] == 0
$CAMP_MODEL8[3] == 12788
02F2:   actor $CAMP_ACTOR[15@] model == 12790
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 4
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST5_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12789
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 3
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST4_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12788
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 2
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST3_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12787
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 1
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST2_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12786
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 0
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST1_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12785
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 9
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST14_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12798
    then
    v$PHRASE1 = "PH187_"
    end

008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 7
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST7_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12791
    then
    v$PHRASE1 = "PH187_"
    end
    
008B: 0@ = $ENTERED_CAMP_NUMBER // (int)
0@ += 156
if and
$ENTERED_CAMP_NUMBER == 12
$RNDM_HOUSE_BANKA[0@] >= 100
MAIN_QUEST11_COMPLETED_FLAG == 0
02F2:   actor $CAMP_ACTOR[15@] model == 12795
    then
    v$PHRASE1 = "PH187_"
    end

0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_HABAR_FUCKNO
    
for 1@ = 0 to 200

v$PHRASE1 = "PH120_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

v$PHRASE1 = "PH120_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_STORY_FUCKNO
    
for 1@ = 0 to 200

v$PHRASE1 = "PH121_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

v$PHRASE1 = "PH121_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_STORY_AGAIN
    
for 1@ = 0 to 200

v$PHRASE1 = "PH122_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

v$PHRASE1 = "PH122_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_QUEST_CANCEL
    
for 1@ = 0 to 200

v$PHRASE1 = "PH130_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

v$PHRASE1 = "PH130_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LEADER_DONATE
    
for 1@ = 0 to 200

v$PHRASE1 = "DNTSL_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
31@ == 0
    then    
    random_int 30@ 0 1@
    break
    end

end  

v$PHRASE1 = "DNTSL_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:CAMP_QUEST_COMPLETED_STAT_PLUS

$QUESTS_COMPLETED += 1
0629: change_integer_stat 258 to 0

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_QUESTS_COMPLETED"

if
$CHEATED_FLAG == 0 
then        
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_QUESTS_COMPLETED"

random_int $CHECKPOINT[$ENTERED_CAMP_NUMBER] 0 10160

return

:CAMP_QUEST_COMPLETED_STAT_PLUS2

for 0@ = 22 to 53
$RNDM_HOUSE_WEAPON[0@] = -69
end

$QUESTS_COMPLETED += 1
0629: change_integer_stat 258 to 0

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_QUESTS_COMPLETED"

if
$CHEATED_FLAG == 0 
then        
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_QUESTS_COMPLETED"

random_int $CHECKPOINT[$ENTERED_CAMP_NUMBER] 0 10160

return

:RAIDS_PASSED_STAT_PLUS

for 0@ = 0 to 14
$CAMP_SAVE_TIMER[0@] = 0
end

$RAIDS_PASSED += 1
0629: change_integer_stat 258 to 0

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_RAIDS_PASSED"

if
$CHEATED_FLAG == 0 
then        
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_RAIDS_PASSED"

random_int $CHECKPOINT[$ENTERED_CAMP_NUMBER] 0 10160

0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT112_GOT"            
if and
1@ == 0
0@ >= 50
    then
    v$ACHIEVEMNT = "ACH112"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT112_GOT"        
    end

return

:CAMP_LEADER_GET_NUM

if
CUSTOM_MAP_FLAG == 1
then
15@ = 0
return
end

if
UNITED_MAP == 0
then

if
$ENTERED_CAMP_NUMBER == 0
then
15@ = 2
end

if
$ENTERED_CAMP_NUMBER == 1
then
15@ = 2
end

if
$ENTERED_CAMP_NUMBER == 2
then
15@ = 5
end

if
$ENTERED_CAMP_NUMBER == 3
then
15@ = 7
end

if
$ENTERED_CAMP_NUMBER == 4
then
15@ = 7
end

if
$ENTERED_CAMP_NUMBER == 5
then
15@ = 4
end

if
$ENTERED_CAMP_NUMBER == 6
then
15@ = 2
end

if
$ENTERED_CAMP_NUMBER == 7
then
15@ = 4
end

if
$ENTERED_CAMP_NUMBER == 8
then
15@ = 6
end

if
$ENTERED_CAMP_NUMBER == 9
then
15@ = 3
end

if
$ENTERED_CAMP_NUMBER == 10
then
15@ = 0
end

if
$ENTERED_CAMP_NUMBER == 11
then
15@ = 7
end

if
$ENTERED_CAMP_NUMBER == 12
then
15@ = 0
end

if
$ENTERED_CAMP_NUMBER == 13
then
15@ = 7
end

if
$ENTERED_CAMP_NUMBER == 14
then
15@ = 8
end

else

if
$ENTERED_CAMP_NUMBER == 0
then
15@ = 0
end

if
$ENTERED_CAMP_NUMBER == 1
then
15@ = 5
end

if
$ENTERED_CAMP_NUMBER == 2
then
15@ = 5
end

if
$ENTERED_CAMP_NUMBER == 3
then
15@ = 7
end

if
$ENTERED_CAMP_NUMBER == 4
then
15@ = 7
end

if
$ENTERED_CAMP_NUMBER == 5
then
15@ = 4
end

if
$ENTERED_CAMP_NUMBER == 6
then
15@ = 8
end

if
$ENTERED_CAMP_NUMBER == 7
then

if
STORIES_MAP == 0
then
15@ = 2
else
15@ = 5
end

end

if
$ENTERED_CAMP_NUMBER == 8
then
15@ = 9
end

if
$ENTERED_CAMP_NUMBER == 9
then

if
STORIES_MAP == 0
then
15@ = 7
else
15@ = 3
end

end

end

return

const
CAMP_LTALK_XP_FLAG = 9@
end

{$INCLUDE Camp System Talk System Menu.txt}
{$INCLUDE Camp System Talk System Menu Dialogs.txt}

{$INCLUDE Camp System Leader Talk System Menu.txt}
{$INCLUDE Camp System Leader Talk System Menu Dialogs.txt}

{$INCLUDE Camp Leader FastTravel Menu.txt} 