:GAMEMODE_SELECT

0B00: delete_file "data\survival.set"  // IF and SET

if
UNITED_MAP == 1
then
ULOD_ACTION_FLAG = 1
create_thread @ULOD
else
create_thread @SIEGE
end

if and
UNITED_MAP == 0
CLASSIC_CARMA_MAP < 1
then
0776: create_objects_in_object_group "carter"
0776: create_objects_in_object_group "aircraft"
0776: create_objects_in_object_group "fortpost"
0776: create_objects_in_object_group "police1"
0776: create_objects_in_object_group "police2"
0776: create_objects_in_object_group "police3"
0776: create_objects_in_object_group "police4"
0776: create_objects_in_object_group "policedep"
0776: create_objects_in_object_group "policedep2"
0776: create_objects_in_object_group "policedep3"
0776: create_objects_in_object_group "meds"
0776: create_objects_in_object_group "statesiege"
create_thread @IPL_CR3
end

/////////////////////////////////////////////////////////

0AA7: call_function 0x00403DA0{_getModelPtr} num_params 1 pop 1 iId 18161 pclInfo 7@
if 7@ > 0
    then
    0A8E: 9@ = 7@ + 0x18 // CModel*** - CModelHier - CBaseModelInfo - m_fDrawDistance
    0A8D: 0@ = read_memory 9@ size 4 virtual_protect 0    
    0A8C: write_memory 9@ size 4 value -100.0 vp 0                
    end
    
/////////////////////////////////////////////////////////           

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "DB_EB"

if and
not 0@ == 1
not CLASSIC_CARMA_MAP >= 1
then

$PLUGINS_CHECKED_FLAG = 0

create_thread @PG_CHEC
wait 0

while $PLUGINS_CHECKED_FLAG == 0
wait 0
end

end

create_thread @SKYBOX

if
UNITED_MAP == 1
then
create_thread @WTH_SIM
else
create_thread @RND_WTH
end

///////////////////////////////////////////////////////////////////////////////////////////////////

GAMEMODE_AUTOSELECT = -1
GAMEMODE_AUTOSELECT_NUMBER = -1
GAMEMODE_AUTOSELECT_PARAM = -1

0AF0: GAMEMODE_AUTOSELECT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT"
0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_CRASH"
if
0@ == 1
then
GAMEMODE_AUTOSELECT = 1
0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_CRASH"
end

if
GAMEMODE_AUTOSELECT == 1
then
0AF0: GAMEMODE_AUTOSELECT_NUMBER = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_NUMBER"
0AF0: GAMEMODE_AUTOSELECT_PARAM = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_PARAM"
else
0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_NUMBER"
end

if and
GAMEMODE_AUTOSELECT_NUMBER == 8
CLASSIC_CARMA_MAP >= 1
then
SELECT_RANDOM_MAP_AFTER_SELECT_GAMEMODE = 1
end

///////////////////////////////////////////////////////////////////////////////////////////////////

$PANEL1_ACTIVE_ROW = 0
$PANEL2_ACTIVE_ROW = 1
$PANEL221_ACTIVE_ROW = 0
$PANEL4_ACTIVE_ROW = 0
$PNEL_CM_ACTVE_RW = 0
$PNEL_CM2_ACTVE_RW = 0
$PANEL5_ACTIVE_ROW = 0
$PANEL51_ACTIVE_ROW = 0
$PANEL55_ACTIVE_ROW = 0
$PANEL555_ACTIVE_ROW = 0
$PANEL6_ACTIVE_ROW = 0
$PANEL7_ACTIVE_ROW = 0
$PANEL8_ACTIVE_ROW = 0 
$PANEL81_ACTIVE_ROW = 0
$PANEL92_ACTIVE_ROW = 0 

$MUTATION_SELECTED = 0
$MUTATION_ACTIVE = -1
$CHALLENGE_SELECTED = -1
$CHALLENGE_SELECTED_NUMBER = -1

STORY_UNLOCKED = 1

//if
//not CLASSIC_CARMA_MAP >= 1
//then
create_thread @RND_CAM
//else
//camera.SetPosition(347.919800, 551.853821, -72.988655,0.0,0.0,0.0)
//camera.PointAt(348.223572, 551.214539, -73.695099,2)
//end  

0209: 10@ = random_int_in_ranges 0 24
0209: 11@ = random_int_in_ranges 0 59
00C0: set_current_time_hours_to 10@ minutes_to 11@

0581: toggle_radar 0 
0826: enable_hud 0

$FPS_MAX = 30
$WEATHER_SYNC_FLAG = 1
$MENU_BACK_WAIT = 10
BASE_MISSION_BASE_NUMBER = -699      

0AF0: $DEBUG_MENU_ON = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "DB_EB" 
0AF0: $FIRST_LAUNCH = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "FS"
0AF0: $STORY_TUTORIAL = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "STORY_TUTORIAL"
0AF0: $STORY2_TUTORIAL = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "STORY2_TUTORIAL"
0AF0: $SURV2_TUTORIAL = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "SURV2_TUTORIAL"   

if
$FIRST_LAUNCH == 1
    then
    gosub @LOGO_SHOW
    end    

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT1_GOT"

if and
not 0@ == 2
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH1"
    $ACHIEVEMENT_GOT_FLAG = 0    
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT1_GOT"    
    end   
    
while not $ACHIEVEMENT_GOT_FLAG == 0
wait 0
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
if
0@ == 1
then

$FPS_COUNTER_ENABLED = 0
$SELECT_MUSIC_END = 1
actor.LockInCurrentPosition(PLAYER_ACTOR,false)    
0337: set_actor PLAYER_ACTOR visibility 1
0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
$FPS_MAX = FPS_MAX_NORMAL
$CAMERA_ZOOM_END = 1
THREADS_AFTERGAMEMODE_SELECT_DELETE = 1
$ZOMBIE_DONT_ATTACK_PLAYER = 0
$GAMEMODE_SELECTED = 1
$GAMEMODE_EDITOR = 1
if
COOP_ACTIVE_FLAG == 1
then
COOP_ACTOR_SURV_NUM = 0
end
                                 
create_thread @ZAME_GM
0629: change_integer_stat 134 to 0
0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
end_thread
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_START"

if
CLASSIC_CARMA_MAP >= 1
then
0@ = 1
CARMA_GLOB_MAP_NABOR = -1
end     

wait 50

actor.LockInCurrentPosition(PLAYER_ACTOR,true)

if
0@ == 0
then
create_thread @SEL_MUS
0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_MODE"
if
not GAMEMODE_AUTOSELECT_NUMBER == 8
    then
    0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_SPECTATE"
    end
end
  
Player.CanMove(PLAYER_CHAR) = false
actor.Health(PLAYER_ACTOR) = 1000
wait 100

////////////////////////////////////Usher Tutorial Start////////////////////////////////////

if and
UNITED_MAP == 0
CLASSIC_CARMA_MAP < 1
then

0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
0AF0: 3@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_COMPLETED"  
if and
not 3@ == 1
not 1@ == 2
    then       
    0AF0: 3@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
    
    if and
    3@ == 1
    8AF0: not 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_DIFF"
    then
    3@ = 0
    end
    
    if and
    not 3@ == 1
    not 3@ == 2
        then    
        
        if
        MIKE_SGMD_FLAG == 0
            then
            
            $FPS_COUNTER_ENABLED = 0
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all                
                    
            MIKE_SGMD_FLAG = 1
                    
            audiostream.PerformAction($SELECT_MUSIC,PAUSE)
            actor.StorePos(PLAYER_ACTOR,10@,11@,12@)
            13@ = actor.Angle(PLAYER_ACTOR)
                        
            fade 0 250
            wait 250
                        
            $SAVESTATUS = 1
            
            model.Load(3676)
            model.Load(13723)
            model.Load(3678)
            model.Load(4694)
            model.Load(13882)
            model.Load(3754)
            model.Load(4734)
            model.Load(1267)
            model.Load(4660)
            model.Load(4653)
            model.Load(5803)
            model.Load(1283)
            model.Load(1294)
            model.Load(714)
            model.Load(1290)
            mload
                    
            actor.PutAtNoOffset(PLAYER_ACTOR,987.6003, -1612.5034, 7.3406)
            actor.Angle(PLAYER_ACTOR) = 48.2534
            actor.LockInCurrentPosition(PLAYER_ACTOR,true)
            camera.SetPosition(986.248779 -1610.492676 7.226234,0.0,0.0,0.0)
            camera.PointAt(985.577759 -1609.751465 7.208707,2)
            
            select_interior 1
            0860: link_actor PLAYER_ACTOR to_interior 1
            04F9: set_sky_color 1 fade 0        
            0776: create_objects_in_object_group "usher_h"
                    
            create_thread @REFR_3D
            wait 50
            
            $FPS_COUNTER_ENABLED = 1
                    
            fade 1 250
                    
            $SELECT_MUSIC_CARL = Audiostream.Load("audio\sounds\music\usher_music\main_theme.wav")
            Audiostream.Volume($SELECT_MUSIC_CARL) = $MUSIC_VOLUME
            Audiostream.Loop($SELECT_MUSIC_CARL, 1)
            Audiostream.PerformAction($SELECT_MUSIC_CARL, PLAY)
            end                    
        
        wait 0
        fade 1 1000
        
        $FPS_COUNTER_ENABLED = 0
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        //wait $MENU_BACK_WAIT
        
        while true
        wait 0
        
        09C1: add_next_text_to_brief_history 0
        text.ShowH('GME1490',5,1)
        
        if 
        0E3E: is_button_just_pressed 0 button 10
            then    
            
            32@ = 0
            
            while true
            wait 0
            09C1: add_next_text_to_brief_history 0
            text.ShowH('GME1491',5,1)
            
            if and
            32@ >= 1000
            0E3E: is_button_just_pressed 0 button 17
                then
                break
                end
            
            end
            
            Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($MENU_BACK_SOUND, 0)
            Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
            $FPS_COUNTER_ENABLED = 1                                        
            0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
            break    
            end
            
        if 
        0E3E: is_button_just_pressed 0 button 11
            then          
            Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
            Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
            $FPS_COUNTER_ENABLED = 0                  
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
            0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_CHECKPOINT" 
            0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_TRIP_SKIP"
            0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_SLOYPOK_FLAG"   
            jump to @USHER_TUTOR_SELECT_JUMP    
            end  
            
        end      
        
        if
        MIKE_SGMD_FLAG == 1
            then        
            
            $FPS_COUNTER_ENABLED = 0        
            fade 0 250
            wait 250
                
            text.RemoveTextBox()
            text.ClearAll()    
                
            MIKE_SGMD_FLAG = 0
            $SAVESTATUS = 0
            
            select_interior 0
            0860: link_actor PLAYER_ACTOR to_interior 0
            04FA: reset_sky_colors_with_fade 0                
            actor.PutAtNoOffset(PLAYER_ACTOR,10@,11@,12@)
            actor.Angle(PLAYER_ACTOR) = 13@
            camera.Restore_WithJumpCut()
            067C: put_camera_on_actor PLAYER_ACTOR offset 0.0 -1.0 0.0 rotation 0.0 0.0 0.0 tilt 0.0 switchstyle 2
            create_thread @REFR_3D
                
            0777: delete_objects_in_object_group "usher_h"
                                            
            audiostream.PerformAction($SELECT_MUSIC_CARL,STOP)
            audiostream.Release($SELECT_MUSIC_CARL)
            audiostream.PerformAction($SELECT_MUSIC,RESUME)
            $FPS_COUNTER_ENABLED = 1        
            fade 1 250
                
            end
        
        else        
        if and
        3@ == 1
        0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_DIFF"
            then
            GAMEMODE_AUTOSELECT = 1
            GAMEMODE_AUTOSELECT_NUMBER = 12
            0AF0: GAMEMODE_AUTOSELECT_PARAM = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_DIFF" 
            end 
        end         
    end         
end

//////////////////////////////////////////////////////////////////////////////////////// 

if and
0@ == 0
not GAMEMODE_AUTOSELECT == 1
then

if and
UNITED_MAP == 0
CLASSIC_CARMA_MAP < 1
then
0776: create_objects_in_object_group "gatesC" 
0776: create_objects_in_object_group "carl"
end

wait 0
fade 1 1000 

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
if
UNITED_MAP == 1
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
if and
not 1@ == 1
not STORIES_MAP == 1
    then
    0@ = 0  
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
    end
else
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
if
not 1@ == 0
    then
    0@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"  
    end
end

if
STORIES_MAP == 1
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
if
not 1@ == 2
    then
    0@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"  
    end
end

if
0@ == 2
then
jump to @COMMUNITY_MISSIONS_MENU_SELECT
end

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"

if
UNITED_MAP == 1
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "HOLD_EHE_MAP"
if and
not 1@ == 1
not STORIES_MAP == 1
    then
    2@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"
    end
else
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "HOLD_EHE_MAP"
if
not 1@ == 0
    then
    2@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"  
    end
end

if
STORIES_MAP == 1
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "HOLD_EHE_MAP"
if
not 1@ == 2
    then
    2@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"  
    end
end

if
2@ == 1
then
jump to @HOLD_SELECT
end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"

if
UNITED_MAP == 1
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_EHE_MAP"
if and
not 1@ == 1
not STORIES_MAP == 1
    then
    2@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"
    end
else
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_EHE_MAP"
if
not 1@ == 0
    then
    2@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"  
    end
end

if
STORIES_MAP == 1
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_EHE_MAP"
if
not 1@ == 2
    then
    2@ = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"  
    end
end

if
2@ == 1
then
jump to @MUTATION_SELECT22
end

if and
GAMEMODE_AUTOSELECT == 1
GAMEMODE_AUTOSELECT_NUMBER == 12
then

0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_COMPLETED"  
if and
not 0@ == 1
not 1@ == 2
then
0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
end

if and
$DEBUG_MENU_ON == 1
not 0@ == 1
then
fade 1 1000 
$CHEATS_ON = 1
end

05A9: s$TIME_STRING = 'INV186'
05A9: s$TIME2_STRING = 'INV187'
05A9: s$WEIGHT_STRING = 'INV188'
$FPS_COUNTER_ENABLED = 0
$SELECT_MUSIC_END = 1
jump to @OHAH
end

if
0@ == 1
then

if and
00E1:   player 0 pressed_key 4
$DEBUG_MENU_ON == 1
then
create_thread @SEL_MUS
wait 100
fade 1 1000
$CHEATS_ON = 1
05A9: s$TIME_STRING = 'INV186'
05A9: s$TIME2_STRING = 'INV187'
05A9: s$WEIGHT_STRING = 'INV188'
$FPS_COUNTER_ENABLED = 0
$SELECT_MUSIC_END = 1
jump to @OHAH
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_MODE"
0AF0: 1@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"

if or
8AF0: not ZOMBEGEDDON_TOURNAMENT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_TOURNAMENT"
1@ == 1
then
ZOMBEGEDDON_TOURNAMENT = 0
else

0AF0:  ZOMBEGEDDON_TOURNAMENT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_TOURNAMENT"
if
ZOMBEGEDDON_TOURNAMENT == 1
    then    
    gosub @ZOMBIEGEDDON_XMOD_TOURNAMENT_MAP_NUM_CHECK    
    if
    803B: not  2@ == 3@  // (int)
        then
        ZOMBEGEDDON_TOURNAMENT = 0
        0AF1: write_int 1 to_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"
        0AF0: 0@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "MODE"
        0AF1: write_int 0@ to_ini_file "data\derby_Tournament.ini" section "LIST" key "MODE"
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_TOURNAMENT"
        jump to @ZOMBEGEDDON_TOURNAMENT_END
        end    
    end

if and
8AAB: not  file_exists "data\derby_Tournament.ini"
ZOMBEGEDDON_TOURNAMENT == 1
    then
    :ZOMBEGEDDON_TOURNAMENT_END
    ZOMBEGEDDON_TOURNAMENT = 0
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_START"
    0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_MODE"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_TOURNAMENT"
    0@ = -1
    if
    CLASSIC_CARMA_MAP < 1
        then
        create_thread @SEL_MUS
        wait 100
        fade 1 1000
        jump to @SELECT_GAMEMODE
        end    
    end      

end

if
not 0@ == -1
then
0AF0: ZOMBIEGEDDON_GAME_TYPE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_MODE"
else
0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_SPECTATE"
end

if and
0@ == -1
CLASSIC_CARMA_MAP >= 1
then
create_thread @SEL_MUS
wait 100
fade 1 1000
:ZOMBIEGEDDON_MODE_SELECT
gosub @ZOMBIEGEDDON_XMOD_SELECT_SELECT
if
$ZMBG_XMOD_SELECT_SELECTED == 1
jf @ZOMBIEGEDDON_MODE_SELECT
015D: set_gamespeed 1.0
gosub @GAMEMODE_ENTER_SOUND
fade 0 1000   
gosub @MUSIC_GAMEMODE_SELECT_OFF
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_SPECTATE"
if
not 0@ == -1
then
0AF0: $SPECTATING_FLAG = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_SPECTATE"
end

text.RemoveTextBox()

$FPS_COUNTER_ENABLED = 0
$SELECT_MUSIC_END = 1
actor.LockInCurrentPosition(PLAYER_ACTOR,false)    
0337: set_actor PLAYER_ACTOR visibility 1
$FPS_MAX = FPS_MAX_NORMAL
$CAMERA_ZOOM_END = 1
$ZOMBIE_DERBY_FLAG = 1
THREADS_AFTERGAMEMODE_SELECT_DELETE = 1
$ZOMBIE_DONT_ATTACK_PLAYER = 0
$GAMEMODE_SELECTED = 1
if
COOP_ACTIVE_FLAG == 1
then
COOP_ACTOR_SURV_NUM = 0
end

0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_MODE"

actor.PutAtNoOffset(PLAYER_ACTOR,1377.9486, -3931.9926, 3400.1875)
actor.Angle(PLAYER_ACTOR) = 173.7605

if
UNITED_MAP == 1
then
create_thread @ULOD2
end
    
$FPS_COUNTER_ENABLED = 0
$FPS_COUNTER_ENABLED2 = 0
$X_MENU_SELECT_GAMEMODE = 230.0
$GAMEMODE_CHALLENGE = 1
gosub @DIFFUCLITY_NORMAL_SELECT
create_thread @DRB_ZOM
0629: change_integer_stat 134 to 0
0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
end_thread
end

///////////////////////////////////Выбор режима игры///////////////////////////////////

:SELECT_GAMEMODE

$FP_ON = 1
$FREEMODE = 0     

$FPS_COUNTER_ENABLED = 1

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GAME4' 
08D4: $PANEL = create_panel_with_title 'GAME72' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then

if and
$DEBUG_MENU_ON == 1
$CHEATS_ON == 1
then      
08DB: set_panel $PANEL column 0 header 'GAME77' data 'GAME1B' 'GAME497' 'GAME12' 'GAME3' 'GAME498' 'GAME355' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel $PANEL column 0 header 'GAME77' data 'GAME1' 'GAME497' 'GAME12' 'GAME3' 'GAME498' 'GAME355' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

else
08DB: set_panel $PANEL column 0 header 'GAME77' data 'GAME497' 'GAME12' 'GAME3' 'GAME498' 'GAME355' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end  

090E: set_panel $PANEL active_row $PANEL1_ACTIVE_ROW  

:SELECT_GAMEMODE_IDLE
wait 0

if
DEV_CHEAT_SWITCH_FLAG == 1
then
DEV_CHEAT_SWITCH_FLAG = 0
$FPS_COUNTER_ENABLED = 0
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @SELECT_GAMEMODE
end

if
8A2A: not  text_box 'GAME4' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME4' 
end    

$PREPARING_LOADING_OFF = 1 

$FPS_COUNTER_ENABLED = 1

{$INCLUDE Select Gamemode Menu Other Menus.txt}                  

08D7: $PANEL1_ACTIVE_ROW = panel $PANEL active_row

//////////////////////////////////Тестовый режим//////////////////////////////////

if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then
0@ = 0
else
0@ = -1

if and
0AB0:   key_pressed 69
$CHEATS_ON == 1
    then
    jump to @OHAH
    end

end

//////////////////////////////////Введение//////////////////////////////////    

if and       
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
$CHEATS_ON == 0
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_1',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :USHER_TUTOR_SELECT_JUMP            
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        if
        MIKE_SGMD_FLAG == 0
        then
        
        $FPS_COUNTER_ENABLED = 0
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                
                
        MIKE_SGMD_FLAG = 1
                
        audiostream.PerformAction($SELECT_MUSIC,PAUSE)
        actor.StorePos(PLAYER_ACTOR,10@,11@,12@)
        13@ = actor.Angle(PLAYER_ACTOR)
                    
        fade 0 250
        wait 250
                    
        $SAVESTATUS = 1
        
        model.Load(3676)
        model.Load(13723)
        model.Load(3678)
        model.Load(4694)
        model.Load(13882)
        model.Load(3754)
        model.Load(4734)
        model.Load(1267)
        model.Load(4660)
        model.Load(4653)
        model.Load(5803)
        model.Load(1283)
        model.Load(1294)
        model.Load(714)
        model.Load(1290)
        mload
                
        actor.PutAtNoOffset(PLAYER_ACTOR,987.6003, -1612.5034, 7.3406)
        actor.Angle(PLAYER_ACTOR) = 48.2534
        actor.LockInCurrentPosition(PLAYER_ACTOR,true)
        camera.SetPosition(986.248779 -1610.492676 7.226234,0.0,0.0,0.0)
        camera.PointAt(985.577759 -1609.751465 7.208707,2)
        
        select_interior 1
        0860: link_actor PLAYER_ACTOR to_interior 1
        04F9: set_sky_color 1 fade 0        
        0776: create_objects_in_object_group "usher_h"
                
        create_thread @REFR_3D
        wait 50
        
        $FPS_COUNTER_ENABLED = 1
                
        fade 1 250
                
        $SELECT_MUSIC_CARL = Audiostream.Load("audio\sounds\music\usher_music\main_theme.wav")
        Audiostream.Volume($SELECT_MUSIC_CARL) = $MUSIC_VOLUME
        Audiostream.Loop($SELECT_MUSIC_CARL, 1)
        Audiostream.PerformAction($SELECT_MUSIC_CARL, PLAY)
        end                    
        
        jump to @OHAH        
        
//        jump to @ADDITIONAL_CONTENT_SELECT
        end              
    end
    
//////////////////////////////////Тестовый режим (с F4)//////////////////////////////////    

if and       
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
$CHEATS_ON == 1
    then            
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_1B',5,1)  
    if 
    0E3E: is_button_just_pressed 0 16
        then
        
        if
        0AB0:   key_pressed 49
        then      
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        jump to @OHAH_MIKEOLD222
        end
        
        if
        0AB0:   key_pressed 50
        then  
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all    
        jump to @2OHAH
        end
        
        if
        0AB0:   key_pressed 51
        then      
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        MIKE_SHIZA_FLAG = 1
        jump to @OHAH_MIKEOLD222
        end
        
//        if and
//        00E1:   player 0 pressed_key 4
//        $CHEATS_ON == 1
//        then
        jump to @OHAH
//        end
        
        if
        MIKE_SGMD_FLAG == 0
        then
        
        $FPS_COUNTER_ENABLED = 0
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                
                
        MIKE_SGMD_FLAG = 1
                
        audiostream.PerformAction($SELECT_MUSIC,PAUSE)
        actor.StorePos(PLAYER_ACTOR,10@,11@,12@)
        13@ = actor.Angle(PLAYER_ACTOR)
                    
        fade 0 250
        wait 250
                    
        $SAVESTATUS = 1
        
        model.Load(3676)
        model.Load(13723)
        model.Load(3678)
        model.Load(4694)
        model.Load(13882)
        model.Load(3754)
        model.Load(4734)
        model.Load(1267)
        model.Load(4660)
        model.Load(4653)
        model.Load(5803)
        model.Load(1283)
        model.Load(1294)
        model.Load(714)
        model.Load(1290)
        mload
                
        actor.PutAtNoOffset(PLAYER_ACTOR,1380.0056, -956.3161, 35.1667)
        actor.Angle(PLAYER_ACTOR) = 298.2439
        actor.LockInCurrentPosition(PLAYER_ACTOR,true)
        Camera.SetPosition(1383.683350, -953.050232, 34.846645,0.0,0.0,0.0)
        Camera.PointAt(1384.532227, -952.529785, 34.939766, 2)
                
        0776: create_objects_in_object_group "mike"
                
        create_thread @REFR_3D
        wait 50
        
        $FPS_COUNTER_ENABLED = 1
                
        fade 1 250
                
        $SELECT_MUSIC_CARL = Audiostream.Load(CLASSIC_MUSIC_0B)
        Audiostream.Volume($SELECT_MUSIC_CARL) = $MUSIC_VOLUME
        Audiostream.Loop($SELECT_MUSIC_CARL, 1)
        Audiostream.PerformAction($SELECT_MUSIC_CARL, PLAY)
        end                                                                   
            
        :OHAH
            
        05A9: s$TIME_STRING = 'INV215'
        05A9: s$TIME2_STRING = 'INV312'
        05A9: s$WEIGHT_STRING = 'INV188'        
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
            
        0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MIKE_STORY_STARTED"        
            
//        if and
//        00E1:   player 0 pressed_key 4
//        $CHEATS_ON == 1
//        then    
        jump to @DIFF_SELECT22        
//        end                                    
            
        :DIFF_SELECT                                             
            
        :DIFF_SELECT22  
            
        $FPS_COUNTER_ENABLED = 1 
            
        15@ = 1       
        
        $DIFFICULTY_SET = 0
        $DIFFICULTY_SELECTED = 0                                        
        
        0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_STORY_EVER_COMPLETED"
        if and
        not 2@ == 1
        not $CHEATS_ON == 1
        then
        USHER_STORY_SELECT_DIFF_FLAG = 1
        gosub @SURV_DIFFICULTY_SELECT
        USHER_STORY_SELECT_DIFF_FLAG = 0
        else    
        gosub @SURV_DIFFICULTY_SELECT
        end
        
        if
        $DIFFICULTY_SELECTED == 1
            then
            
            0AF0: 0@ = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_CHECKPOINT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
            if and
            0@ > 0
            not 1@ == 1
            not $CHEATS_ON == 1
            then
            jump to @USHER1_CHECKPOINT_ACCEPT
            end
            :USHER1_CHECKPOINT_ACCEPTED
            
            015D: set_gamespeed 1.0
                
            if
            MIKE_SGMD_FLAG == 1
            then
            audiostream.PerformAction($SELECT_MUSIC,STOP)
            audiostream.Release($SELECT_MUSIC)
            0084: $SELECT_MUSIC = $SELECT_MUSIC_CARL // (int)
            end
                
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_STORYLINE = 1
            
            if 
            not $MIKE_OLD == 1
            then
            USHER_STORY_FLAG = 1
            end
                
            if
            CLASSIC_CARMA_MAP < 1
            then
            gosub @GENERAL
            end
                
            if and
            $CHEATS_ON == 1
            CLASSIC_CARMA_MAP < 1
            then
            gosub @HIDDEN_PACKAGES_CREATE
            end
                            
            if
            UNITED_MAP == 1
            then
            gosub @UNITED_MAP_GATES_OFF_START
            end
            $FREEMODE = 1                         
            create_thread @ST_MIKE
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else
            
            if
            MIKE_SGMD_FLAG == 1
            then        
            
            $FPS_COUNTER_ENABLED = 0        
            fade 0 250
            wait 250
                
            text.RemoveTextBox()
            text.ClearAll()    
                
            MIKE_SGMD_FLAG = 0
            $SAVESTATUS = 0
            
            select_interior 0
            0860: link_actor PLAYER_ACTOR to_interior 0
            04FA: reset_sky_colors_with_fade 0                
            actor.PutAtNoOffset(PLAYER_ACTOR,10@,11@,12@)
            actor.Angle(PLAYER_ACTOR) = 13@
            camera.Restore_WithJumpCut()
            067C: put_camera_on_actor PLAYER_ACTOR offset 0.0 -1.0 0.0 rotation 0.0 0.0 0.0 tilt 0.0 switchstyle 2
            create_thread @REFR_3D
                
            0777: delete_objects_in_object_group "usher_h"
                                            
            audiostream.PerformAction($SELECT_MUSIC_CARL,STOP)
            audiostream.Release($SELECT_MUSIC_CARL)
            audiostream.PerformAction($SELECT_MUSIC,RESUME)
            $FPS_COUNTER_ENABLED = 1        
            fade 1 250
                
            end
            
            HARDCORE_MODE = 0
            HARDCORE_PLUS_MODE = 0
            15@ = 0
            jump to @SELECT_GAMEMODE
            end                           
        end                  
    end               

//////////////////////////////////Выживание\модификаторы//////////////////////////////////

if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then
0@ = 1
else
0@ = 0
end

if
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_154',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all 
        jump to @SURVIVAL_OR_MODIFICATORS_SELECT                           
        end
     end    

//////////////////////////////////Удержание//////////////////////////////////

if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then
0@ = 2
else
0@ = 1
end

if        
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_68',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :HOLD_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        if
        $HOLD_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 216
        $TUTORIAL_MAX = 231       
        gosub @TUTORIAL
        $HOLD_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_TUTORIAL"            
        end     
        
        :SELECT_MAP2
        $MAP_SELECTED = 0
        gosub @SELECT_MAP
        
        if and
        not GAMEMODE_AUTOSELECT == 1
        not 25@ == 1
        then
        wait 1
        03F0: enable_text_draw 0
        wait 1
        0391: release_textures
        end
         
        if
        $MAP_SELECTED == 1
            then
            $DIFFICULTY_SET = 3
            $DIFFICULTY_SELECTED = 0
            gosub @DIFFUCLITY_HARD_SELECT        
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF  
            $GAMEMODE_HOLD = 1                   
            gosub @RANDOM_MODEL  
            create_thread @GMD_HLD
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"
            
            if
            UNITED_MAP == 0
            then
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_EHE_MAP"
            else
            
            if
            STORIES_MAP == 0
            then
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_EHE_MAP"
            else
            0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_EHE_MAP"
            end
            
            end
            
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return        
            else
            $FPS_COUNTER_ENABLED = 1
            jump to @SELECT_GAMEMODE
            end           
        end      
    end

:CONTENT_UH

//////////////////////////////////Сражение//////////////////////////////////

if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then
0@ = 3
else
0@ = 2
end

if         
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_3',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                
        
        :VERSUS_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        :VERSUS_PRE_SELECT
        0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "TASK_CHECK_SYS_FAILED"
        if
        0@ == 1
        then
        
        $FPS_COUNTER_ENABLED = 0
        
        ////////////////////////////////////

        repeat
        wait 0
        text.ShowH('GAME976',100,1)
        
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "TASK_CHECK_SYS_FAILED"
            text.ClearAll()
            break
            end
        
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()
            jump to @OTHER_GAMEMODES_SELECT
            end
            
        if
        0AB0:   key_pressed 87
            then
            text.ClearAll()
            $TUTORIAL_MIN = 1000
            $TUTORIAL_MAX = 1008       
            gosub @TUTORIAL
            $FPS_COUNTER_ENABLED = 0
            jump to @VERSUS_PRE_SELECT
            end    
        
        until false
        
        ////////////////////////////////////
        
        end 
        
        if
        $VERSUS_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 651
        $TUTORIAL_MAX = 666       
        gosub @TUTORIAL
        $VERSUS_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "VERSUS_TUTORIAL"            
        end               
                 
        015D: set_gamespeed 1.0
        gosub @GAMEMODE_ENTER_SOUND
        fade 0 1000           
        gosub @MUSIC_GAMEMODE_SELECT_OFF
        $ALLOW_ARMY_CAMPS = 0
        $ALLOW_BANDITS_CAMPS = 0
        $ALLOW_SURVIVERS_CAMP = 0
        $ALLOW_TRADERS = 0
        $GAMEMODE_VERSUS = 1
        create_thread @GMD_VRS
        0629: change_integer_stat 134 to 0
        0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
        return   
        end                 
    end    
    
//////////////////////////////////Прочие режимы игры//////////////////////////////////    

if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then
0@ = 4
else
0@ = 3
end

if        
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_109',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all         
        jump to @OTHER_GAMEMODES_SELECT    
        end       
    end               
    
//////////////////////////////////Случайный выбор//////////////////////////////////    

:SHIT_SELECT

if and
UNITED_MAP == 0
STORY_UNLOCKED == 1
then
0@ = 5
else
0@ = 4
end
    
if or
003C:   $PANEL1_ACTIVE_ROW == 0@  // (int)
GAMEMODE_AUTOSELECT == 1
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_103',5,1)  
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
        then     

        if
        GAMEMODE_AUTOSELECT_NUMBER < 0
        then
        random_int 0@ 0 to 8
        else
        0@ = -1
        end  
        
        25@ = 1
        
        $X_MENU_SELECT_GAMEMODE = 9000.0
        
        if or
        0@ == 0
        GAMEMODE_AUTOSELECT_NUMBER == 0
        then
        jump to @FRACTION_WAR_SELECT
        end
                         
        if or
        0@ == 1
        GAMEMODE_AUTOSELECT_NUMBER == 1
        then        
        jump to @ESCAPE_SELECT        
        end            
        
        if or
        0@ == 2
        GAMEMODE_AUTOSELECT_NUMBER == 2
        then                        
        jump to @SURVIVAL_SELECT_2_R
        end
        
        if or
        0@ == 3
        GAMEMODE_AUTOSELECT_NUMBER == 3
        then
        jump to @HOLD_SELECT
        end
        
        if or
        0@ == 4
        GAMEMODE_AUTOSELECT_NUMBER == 4
        then
        jump to @VERSUS_SELECT
        end
        
        if or
        0@ == 5
        GAMEMODE_AUTOSELECT_NUMBER == 5
        then
        jump to @CRAZY_SELECT
        end
        
        if or
        0@ == 6
        GAMEMODE_AUTOSELECT_NUMBER == 6
        GAMEMODE_AUTOSELECT_NUMBER == 9
        then
        jump to @MUTATION_SELECT22
        end
        
        if or
        0@ == 7
        GAMEMODE_AUTOSELECT_NUMBER == 7
        GAMEMODE_AUTOSELECT_NUMBER == 8
        GAMEMODE_AUTOSELECT_NUMBER == 10
        GAMEMODE_AUTOSELECT_NUMBER == 11
        then                                             
        SELECT_RANDOM_MAP_AFTER_SELECT_GAMEMODE = 1
        jump to @CHALLENGE_RANDOM_SELECT
        end
        
        if
        GAMEMODE_AUTOSELECT_NUMBER == 13
        then
        jump to @ZAME_SELECT
        end               

        end              
    end
    
if
0E3E: is_button_just_pressed 0 15 
then

//if 
//0AA2: 0@ = load_library "User32.dll"
//    then
//    if 
//    0AA4: 1@ = get_proc_address "keybd_event" library 0@
//        then                                              
//        0AA5: call 1@ num_params 4 pop 0 0 0 0 0x1B
//        wait 0
//        0AA5: call 1@ num_params 4 pop 0 0 0x02 0 0x1B
//        0AA3: free_library 0@    
//        end
//    end

jump @SELECT_GAMEMODE_IDLE
else
jump @SELECT_GAMEMODE_IDLE
end                

jump @SELECT_GAMEMODE_IDLE

///////////////////////////////////Выбор выживания\модификаторов///////////////////////////////////      

:SURVIVAL_OR_MODIFICATORS_SELECT

if and
not 25@ == 1
not GAMEMODE_AUTOSELECT == 1
then
090E: set_panel $PANEL active_row $PANEL91_ACTIVE_ROW   
else
jump to @RANDOM_SURVIVAL_OR_MODIFICATORS
end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME871' 
08D4: $PANEL = create_panel_with_title 'GME1451' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME872' data 'GAME875' 'GAME876' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
090E: set_panel $PANEL active_row $PANEL91_ACTIVE_ROW 
//wait $MENU_BACK_WAIT 

:SURVIVAL_OR_MODIFICATORS_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME871' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME871' 
end

08D7: $PANEL91_ACTIVE_ROW = panel $PANEL active_row

//////////////////////////////////Выживание//////////////////////////////////    

if
$PANEL91_ACTIVE_ROW == 0  
    then
    09C1: add_next_text_to_brief_history 0
    text.ShowH('GMD_108',5,1)     
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :SURVIVAL_SELECT_2_R
                       
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                                             
        
        if
        $CHEATS_ON == 1
        then
        
        if
        0E8D: is_any_fire_button_pressed 0
        then
        REALISM_MODE = 1
        0629: change_integer_stat 282 to 1
        end
        
        jump to @SURVIVAL_SELECT_2
        end                       
        
        :SURVIVAL_SELECT_2     
               
        $FREEMODE = 1    
        
        05A9: s$TIME_STRING = 'INV215'
        05A9: s$TIME2_STRING = 'INV312'
        05A9: s$WEIGHT_STRING = 'INV188'                 
         
        if
        $SURV2_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 868
        $TUTORIAL_MAX = 908       
        gosub @TUTORIAL
        $SURV2_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURV2_TUTORIAL"            
        end                                                               
        
        :FREEMODE_DIFF_SELECT
                   
        $SETTINGS_SELECTED = 0            
        gosub @FREEMODE_SETTINGS                       
        if
        $SETTINGS_SELECTED == 1
            then               
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_SURVIVAL = 1  
            gosub @RANDOM_MODEL 
            gosub @GENERAL  
            create_thread @GMD_SRV
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else
            
            $FREEMODE = 0
                
            if
            FREEMODE_CUSTOM_SKIN == 1
            then
            $RANDOM_MODE_MODEL = 0
            FREEMODE_CUSTOM_SKIN = 0
            FREEMODE_CUSTOM_NAME = 0
            end                
                
            HARDCORE_MODE = 0
            HARDCORE_PLUS_MODE = 0
            jump to @SURVIVAL_OR_MODIFICATORS_SELECT
            end               
        end 
    end                    
     
if
$PANEL91_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_153',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        :NOTKANON_MODIFICATORS_SELECT
        jump to @NOTKANON_SURVIVAL_SELECT                         
        end
     end        
     
if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
HARDCORE_MODE = 0
HARDCORE_PLUS_MODE = 0
jump to @SELECT_GAMEMODE
else
jump @SURVIVAL_OR_MODIFICATORS_SELECT_IDLE
end       

jump @SURVIVAL_OR_MODIFICATORS_SELECT_IDLE   

:RANDOM_SURVIVAL_OR_MODIFICATORS

random_int 0@ 0 to 2
if
0@ == 0
then
jump to @SURVIVAL_SELECT_2_R
else
jump to @NOTKANON_MODIFICATORS_SELECT
end

return

///////////////////////////////////Выбор модификаторов выживания///////////////////////////////////      

:NOTKANON_SURVIVAL_SELECT

if and
not 25@ == 1
not GAMEMODE_AUTOSELECT == 1
then
090E: set_panel $PANEL active_row $PANEL93_ACTIVE_ROW   
else
jump to @RANDOM_NOTKANON_SURVIVAL
end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME871' 
08D4: $PANEL = create_panel_with_title 'GAME870' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME872' data 'GAME2' 'GAME98B' 'GAME70' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
090E: set_panel $PANEL active_row $PANEL93_ACTIVE_ROW 
//wait $MENU_BACK_WAIT

:NOTKANON_SURVIVAL_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME871' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME871' 
end

08D7: $PANEL93_ACTIVE_ROW = panel $PANEL active_row    

//////////////////////////////////Побег из штата//////////////////////////////////    

if
$PANEL93_ACTIVE_ROW == 0        
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_2',5,1)  
    if 
    0E3E: is_button_just_pressed 0 16
        then       
        
        :ESCAPE_SELECT
                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all 
        
        $FREEMODE = 0
        
        0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ESCAPE_GAMEMODE_WARNING"
        if and
        0@ > 0
        25@ == 0
        then
        0@ -= 1
        0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "ESCAPE_GAMEMODE_WARNING"
        jump to @ESCAPE_GAMEMODE_ACCEPT
        :ESCAPE_GAMEMOE_ACCEPTED
        else
        end        
        
        05A9: s$TIME_STRING = 'INV186'
        05A9: s$TIME2_STRING = 'INV187'
        05A9: s$WEIGHT_STRING = 'INV188'    
         
        if
        $SURV_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 55
        $TUTORIAL_MAX = 115       
        gosub @TUTORIAL
        $SURV_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURV_TUTORIAL"            
        end            
                   
        $DIFFICULTY_SET = 2
        $DIFFICULTY_SELECTED = 0
        gosub @SURV_DIFFICULTY_SELECT
        if
        $DIFFICULTY_SELECTED == 1
            then
            $CAMPS_COUNT = 15                   
            0A48: enable_menu_access_in_widescreen_mode 0    
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ASS_GONE_AWAY2"   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "ASS_GONE_AWAY2"        
            $GAMEMODE_SURVIVAL = 1   
            cinema.Widescreen(1)
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ASS_GONE_AWAY3"
            gosub @RANDOM_MODEL
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "ASS_GONE_AWAY3"
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ASS_GONE_AWAY4"  
            gosub @GENERAL
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "ASS_GONE_AWAY4"  
            create_thread @GMD_SRV
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else            
            jump to @NOTKANON_SURVIVAL_SELECT            
            end         
        end      
    end  

//////////////////////////////////Война фракций//////////////////////////////////

if 
$PANEL93_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0 
    text.ShowH('GMD_43',5,1)    
    if 
    0E3E: is_button_just_pressed 0 16
        then     
        
        :FRACTION_WAR_SELECT
           
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all              
        
        if
        $WAR_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 544
        $TUTORIAL_MAX = 556       
        gosub @TUTORIAL
        $WAR_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "WAR_TUTORIAL"            
        end         
        
        $FRACTION_SELECTED = 0
        gosub @FRACTION_SELECT
        if
        $FRACTION_SELECTED == 1
            then
            $CAMPS_COUNT = 15                   
            0A48: enable_menu_access_in_widescreen_mode 0
            $NOTSAVE_MODE = 0
            $DIFFICULTY_SET = 2
            $DIFFICULTY_SELECTED = 0
            $ZOMBIE_AGRO_SHOOT_MAX = 10
            $ZOMBIE_AGRO_HORDE_MAX = 10
            $ZOMBIE_AGRO_IDLE_MAX = 10 
            gosub @DIFFUCLITY_HARD_SELECT 
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            $GAMEMODE_WAR = 1               
            $ALLOW_HEADSHOOT = 0
            $ALLOW_SAFETY_IN_CAMPS = 0
            $BANDITS_SPAWN_MIN = 5
            $BANDITS_SPAWN_MAX = 15                        
            $ARMY_SPAWN_MIN = 5
            $ARMY_SPAWN_MAX = 15                        
            $FERMER_SPAWN_MIN = 5
            $FERMER_SPAWN_MAX = 15                                
            $SWAT_SPAWN_MIN = 5
            $SWAT_SPAWN_MAX = 15                        
            $ARMY_THROW_TIME = 90
            $SWAT_THROW_TIME = 90            
            $FERMERS_THROW_TIME = 90            
            $BANDITS_THROW_TIME = 90            
            $SURVIVOR_THROW_TIME = 250                        
            $SURVIVERS_SPAWN_MIN = 14000
            $SURVIVERS_SPAWN_MAX = 28000                        
            $RNDM_PEOPLE_CAR_SPAWN_MIN = 44
            $RNDM_PEOPLE_CAR_SPAWN_MIN = 62                        
            $DYNAMIC_MUSIC_OFF = 1            
            $ROCKET_LAUNCHER_RIFLE_WEIGHT = 2
            $ROCKET_LAUNCHER2_RIFLE_WEIGHT = 2                        
            $ARMY_RHINO_SPAWN_MIN = 30
            $ARMY_RHINO_SPAWN_MAX = 60
            $ARMY_HUNTER_SPAWN_MIN = 60
            $ARMY_HUNTER_SPAWN_MAX = 120   
            $BANDIT_HELI_SPAWN_MIN = 60
            $BANDIT_HELI_SPAWN_MAX = 120
            $SWAT_HELI_SPAWN_MIN = 60
            $SWAT_HELI_SPAWN_MAX = 120
            $FERMERS_HELI_SPAWN_MIN = 60
            $FERMERS_HELI_SPAWN_MAX = 120
            $FERMERS_PLANE_SPAWN_MIN = 60
            $FERMERS_PLANE_SPAWN_MAX = 120
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_WAR = 1   
            $GAMEMODE_SURVIVAL = 1   
            cinema.Widescreen(1)
            gosub @RANDOM_MODEL
            gosub @GENERAL  
            create_thread @GMD_SRV
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else        
            jump to @NOTKANON_SURVIVAL_SELECT                   
            end      
        end
    end
    
//////////////////////////////////Мутация//////////////////////////////////    
    
if
$PANEL93_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_69',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION_SELECT22
        
        05A9: s$TIME_STRING = 'INV186'
        05A9: s$TIME2_STRING = 'INV187'
        05A9: s$WEIGHT_STRING = 'INV188'
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        
        if
        $MUT_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 436
        $TUTORIAL_MAX = 461       
        gosub @TUTORIAL
        $MUT_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUT_TUTORIAL"            
        end        
                
        $MUTATION_SELECTED = 0
        gosub @MUTATION_SELECT
        if
        $MUTATION_SELECTED == 1
            then
            $CAMPS_COUNT = 15
            0629: change_integer_stat 263 to 1
            0629: change_integer_stat 264 to $MUTATION_ACTIVE
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_SURVIVAL = 1
            gosub @RANDOM_MODEL
            
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"
            
            if
            UNITED_MAP == 0
            then
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_EHE_MAP"
            else
            
            if
            STORIES_MAP == 0
            then
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_EHE_MAP"
            else
            0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_EHE_MAP"
            end
            
            end
            
            gosub @GENERAL
            create_thread @GMD_SRV
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else        
            jump to @NOTKANON_SURVIVAL_SELECT             
            end
        end              
    end               
     
if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @SURVIVAL_OR_MODIFICATORS_SELECT
else
jump @NOTKANON_SURVIVAL_SELECT_IDLE
end       

jump @NOTKANON_SURVIVAL_SELECT_IDLE   

:RANDOM_NOTKANON_SURVIVAL

random_int 0@ 0 to 3
if
0@ == 0
then
jump to @ESCAPE_SELECT
end

if
0@ == 1
then
jump to @FRACTION_WAR_SELECT
end

if
0@ == 2
then
jump to @MUTATION_SELECT22
end

return

///////////////////////////////////Настройка параметров "Выживания"///////////////////////////////////  

:FREEMODE_SETTINGS

if or
25@ == 1
GAMEMODE_AUTOSELECT == 1
then
jump to @SURV_DEF_SETTINGS_PRE
end     

$FPS_COUNTER_ENABLED = 1

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GAME240' 
08D4: $PANEL = create_panel_with_title 'GAME245' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME246' data 'GAME291' 'GAME242' 'GAME243' 'GME1407' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 
090E: set_panel $PANEL active_row $PANEL81_ACTIVE_ROW 
    
if and
FREEMODE_CUSTOM_SKIN == 1
FREEMODE_CUSTOM_NAME == 1
$PANEL81_ACTIVE_ROW == 3
    then
    08D9: set_panel $PANEL row 3 enable 0
    090E: set_panel $PANEL active_row 0
    end            

//wait $MENU_BACK_WAIT

:FREEMODE_SETTINGS_IDLE
wait 0

if
8A2A: not  text_box 'GAME240' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME240' 
end  

$PREPARING_LOADING_OFF = 1 

$FPS_COUNTER_ENABLED = 1

08D7: $PANEL81_ACTIVE_ROW = panel $PANEL active_row

//////////////////////////Начать выживание с дефолтными настройками//////////////////////////////////    
    
if
$PANEL81_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_80',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        :SURV_DEF_SETTINGS_PRE
        
        $DIFFICULTY_SET = 2
        $DIFFICULTY_SELECTED = 0
        gosub @SURV_DIFFICULTY_SELECT
        if
        $DIFFICULTY_SELECTED == 1
            then
                        
            0AF0: 0@ = get_int_from_ini_file "saves\ZACM.set" section "SCR" key "DEV_RESTART"
            if and
            0@ == 1
            $FREEMODE == 1
            0AAB:   file_exists "debug\survsettings.temp"
            then
            0B04: copy_file "debug\survsettings.temp" to "data\survsettings.temp" //IF and SET
            FREEMODE_CUSTOM_SKIN = 1
            jump to @SHITJUMP
            end
            
            if and
            $CHEATS_ON == 1
            $DEBUG_MENU_ON == 1
            then
            
            if
            0AB0:   key_pressed 49
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 1
            end
            
            if
            0AB0:   key_pressed 50
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 2
            end
            
            if
            0AB0:   key_pressed 51
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 3
            end
            
            if
            0AB0:   key_pressed 52
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 4
            end
            
            if
            0AB0:   key_pressed 53
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 5
            end
            
            if
            0AB0:   key_pressed 54
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 6
            end
            
            if
            0AB0:   key_pressed 55
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 7
            end
            
            if
            0AB0:   key_pressed 56
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 8
            end
            
            if
            0AB0:   key_pressed 57
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 9
            end
            
            if
            0AB0:   key_pressed 48
            then
            SURVIVAL_CUSTOM_WEAPON_NABOR = 10
            end
            
            0629: change_integer_stat 274 to SURVIVAL_CUSTOM_WEAPON_NABOR
            
            0B04: copy_file "debug\survsettingsFAST.temp" to "data\survsettings.temp" //IF and SET
            
            jump to @SURV_DEF_SETTINGS
            end
            
            if and
            $FREEMODE == 1
            GAMEMODE_AUTOSELECT == 1
            0AAB:   file_exists "data\survsettings.temp"
            then
            jump to @SHITJUMP
            end
            
            if
            25@ == 1
            then
            jump to @SURV_DEF_SETTINGS
            end
            
            if and
            $FREEMODE == 1
            GAMEMODE_AUTOSELECT == 1
            0AAB:   file_exists "data\survsettings.temp"
            then
            jump to @SHITJUMP
            else        
            gosub @CHARACTER_SELECT_GOSUB
            end
            
            if
            FREEMODE_CUSTOM_SKIN == 1
                then
                
                :SHITJUMP            
                
                if and
                $FREEMODE == 1
                GAMEMODE_AUTOSELECT == 1
                0AAB:   file_exists "data\survsettings.temp"
                then
                
                0AF0: 0@ = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "CUSTOM_MODE"
                if
                0@ == 1
                then
                jump to @SHITJUMP2
                end
                
                FREEMODE_CUSTOM_SKIN = 1
                FREEMODE_CUSTOM_NAME = 1
                
                0AF0: $RANDOM_MODE_MODEL = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "SKIN"
                0AF0: LOCATION_NUM = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
                0AF0: REALISM_MODE = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "REALISM_MODE"                               
                
                0AF4: v$SNAME3 = read_string_from_ini_file "data\survsettings.temp" section "PLAYER" key "NAME"
                0AE0: remove_dynamic_GXT_entry "F_NAME"
                0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3
                
                0AF0: SURVIVAL_CUSTOM_WEAPON_NABOR = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "ORIGIN"
                0629: change_integer_stat 274 to SURVIVAL_CUSTOM_WEAPON_NABOR
                
                0AF0: 0@ = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "SCUMBAG_FLAG"
                if
                0@ == 1
                then
                CARMA_BAD_POINTS = 100
                end
                
                0AF0: 0@ = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
                if 
                0@ == 0
                    then
                    062A: change_float_stat 23 to 0.0
                    062A: change_float_stat 21 to 0.0
                    070D: rebuild_player PLAYER_CHAR        
                    end
                        
                if 
                0@ == 1
                    then
                    062A: change_float_stat 23 to 501.0
                    062A: change_float_stat 21 to 0.0
                    070D: rebuild_player PLAYER_CHAR
                    end
                        
                if 
                0@ == 2
                    then
                    062A: change_float_stat 23 to 0.0
                    062A: change_float_stat 21 to 1000.0
                    070D: rebuild_player PLAYER_CHAR
                    end    
                
                if
                0AF0: TEAM1_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM1" key "SKIN"
                then
                0AF0: TEAM1_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM1" key "SKIN"
                end
                
                if
                0AF0: TEAM2_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM2" key "SKIN"
                then
                0AF0: TEAM2_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM2" key "SKIN"
                end
                
                if
                0AF0: TEAM3_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM3" key "SKIN"
                then
                0AF0: TEAM3_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM3" key "SKIN"
                end
                
                if
                0AF4: TEAM1_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM1" key "NAME"
                then
                0AF4: TEAM1_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM1" key "NAME"
                0AE0: remove_dynamic_GXT_entry "F_NAME1"
                0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME
                end
                
                if
                0AF4: TEAM2_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM2" key "NAME"
                then
                0AF4: TEAM2_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM2" key "NAME"
                0AE0: remove_dynamic_GXT_entry "F_NAME2"
                0ADF: add_dynamic_GXT_entry "F_NAME2" text TEAM2_NAME
                end
                
                if
                0AF4: TEAM3_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM3" key "NAME"
                then
                0AF4: TEAM3_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM3" key "NAME"
                0AE0: remove_dynamic_GXT_entry "F_NAME3"
                0ADF: add_dynamic_GXT_entry "F_NAME3" text TEAM3_NAME
                end
                
                end
                
                :SURV_DEF_SETTINGS
                        
                gosub @ALLOW_THINGS_SET                                
                $SETTINGS_SELECTED = 1                      
                return
                else
                jump @FREEMODE_SETTINGS
                end
            else
            jump @FREEMODE_SETTINGS
            end
         end         
     end

//////////////////////////Начать выживание с кастомными настройками//////////////////////////////////    
    
if
$PANEL81_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_70',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        if and
        $CHEATS_ON == 1
        $DEBUG_MENU_ON == 1
        then
        jump to @SURV_DEF_SETTINGS2
        end
        
        if and
        $FREEMODE == 1
        GAMEMODE_AUTOSELECT == 1
        0AAB:   file_exists "data\survsettings.temp"
        then
        jump to @SHITJUMP2
        else 
        gosub @CHARACTER_SELECT_GOSUB
        end
        
        if
        FREEMODE_CUSTOM_SKIN == 1
            then
            
            if and
            $FREEMODE == 1
            GAMEMODE_AUTOSELECT == 1
            0AAB:   file_exists "data\survsettings.temp"
            then
            
            :SHITJUMP2
            
            FREEMODE_CUSTOM_SKIN = 1
            FREEMODE_CUSTOM_NAME = 1
            
            0AF0: $RANDOM_MODE_MODEL = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "SKIN"
            0AF0: LOCATION_NUM = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
            0AF0: REALISM_MODE = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "REALISM_MODE"             
            
            0AF4: v$SNAME3 = read_string_from_ini_file "data\survsettings.temp" section "PLAYER" key "NAME"
            0AE0: remove_dynamic_GXT_entry "F_NAME"
            0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3
            
            0AF0: SURVIVAL_CUSTOM_WEAPON_NABOR = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "ORIGIN"
            0629: change_integer_stat 274 to SURVIVAL_CUSTOM_WEAPON_NABOR
            
            0AF0: 0@ = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "SCUMBAG_FLAG"
            if
            0@ == 1
            then
            CARMA_BAD_POINTS = 100
            end
            
            0AF0: 0@ = get_int_from_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
            if 
            0@ == 0
                then
                062A: change_float_stat 23 to 0.0
                062A: change_float_stat 21 to 0.0
                070D: rebuild_player PLAYER_CHAR        
                end
                    
            if 
            0@ == 1
                then
                062A: change_float_stat 23 to 501.0
                062A: change_float_stat 21 to 0.0
                070D: rebuild_player PLAYER_CHAR
                end
                    
            if 
            0@ == 2
                then
                062A: change_float_stat 23 to 0.0
                062A: change_float_stat 21 to 1000.0
                070D: rebuild_player PLAYER_CHAR
                end    
            
            if
            0AF0: TEAM1_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM1" key "SKIN"
            then
            0AF0: TEAM1_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM1" key "SKIN"
            end
            
            if
            0AF0: TEAM2_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM2" key "SKIN"
            then
            0AF0: TEAM2_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM2" key "SKIN"
            end
            
            if
            0AF0: TEAM3_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM3" key "SKIN"
            then
            0AF0: TEAM3_SKIN = get_int_from_ini_file "data\survsettings.temp" section "TEAM3" key "SKIN"
            end
            
            if
            0AF4: TEAM1_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM1" key "NAME"
            then
            0AF4: TEAM1_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM1" key "NAME"
            0AE0: remove_dynamic_GXT_entry "F_NAME1"
            0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME
            end
            
            if
            0AF4: TEAM2_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM2" key "NAME"
            then
            0AF4: TEAM2_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM2" key "NAME"
            0AE0: remove_dynamic_GXT_entry "F_NAME2"
            0ADF: add_dynamic_GXT_entry "F_NAME2" text TEAM2_NAME
            end
            
            if
            0AF4: TEAM3_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM3" key "NAME"
            then
            0AF4: TEAM3_NAME = read_string_from_ini_file "data\survsettings.temp" section "TEAM3" key "NAME"
            0AE0: remove_dynamic_GXT_entry "F_NAME3"
            0ADF: add_dynamic_GXT_entry "F_NAME3" text TEAM3_NAME
            end
            
            end
            
            :SURV_DEF_SETTINGS2
            
            gosub @FREEMODE_SETTINGS_GET
            if and
            HARDCORE_MODE == 1
            HARDCORE_PLUS_MODE == 1
            then
            create_thread @HRC_PLS   
            end
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            $CUSTOM_MODE = 1
            0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "CUSTOM_MODE"
            gosub @DIFFUCLITY_CUSTOM_SELECT    
            $SETTINGS_SELECTED = 1                      
            return
            else
            jump @FREEMODE_SETTINGS
            end
         end       
     end                
     
//////////////////////////Изменить параметры игры//////////////////////////////////    
    
if
$PANEL81_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_71',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all    
        
        $FPS_COUNTER_ENABLED = 0
        
        09C1: add_next_text_to_brief_history 0
        0512: show_permanent_text_box 'GAME241'
        
        gosub @FREEMODE_SETTINGSS 
        
        text.ClearAll()
        text.RemoveTextBox()
        
        $FPS_COUNTER_ENABLED = 1  
        
        jump to @FREEMODE_SETTINGS                          
        end       
     end
     
//////////////////////////Изменить правила игры//////////////////////////////////    
    
if
$PANEL81_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_186',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all    
        
        $FPS_COUNTER_ENABLED = 0
        
        09C1: add_next_text_to_brief_history 0
        0512: show_permanent_text_box 'GAME241'
        
        gosub @FREEMODE_SETTINGSS_ADD_RULES 
        
        text.ClearAll()
        text.RemoveTextBox()
        
        $FPS_COUNTER_ENABLED = 1  
        
        jump to @FREEMODE_SETTINGS                          
        end       
     end                                                                      
     
if
0E3E: is_button_just_pressed 0 15 
then
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
$RANDOM_MODE_MODEL = 0
FREEMODE_CUSTOM_SKIN = 0                
FREEMODE_CUSTOM_NAME = 0  
gosub @ALLOW_THINGS_SET
return
else
jump @FREEMODE_SETTINGS_IDLE
end     

jump @FREEMODE_SETTINGS_IDLE

//////////////////////////Выбор персонажа//////////////////////////////////

:CHARACTER_SELECT_GOSUB
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all    

$FPS_COUNTER_ENABLED = 0
audiostream.PerformAction($SELECT_MUSIC,PAUSE)
actor.StorePos(PLAYER_ACTOR,10@,11@,12@)
13@ = actor.Angle(PLAYER_ACTOR)

fade 0 500
wait 500

$SAVESTATUS = 1
0B00: delete_file "data\survsettings.temp"  // IF and SET

0391: release_textures
wait 1
0390: load_txd_dictionary 'origins'
038F: load_texture "ORIGIN0" as 1
038F: load_texture "ORIGIN1" as 2
038F: load_texture "ORIGIN2" as 3
038F: load_texture "ORIGIN3" as 4
038F: load_texture "ORIGIN4" as 5
038F: load_texture "ORIGIN5" as 6
038F: load_texture "ORIGIN6" as 7
038F: load_texture "ORIGIN7" as 8
038F: load_texture "ORIGIN8" as 9
038F: load_texture "ORIGIN9" as 10
038F: load_texture "ORIGIN10" as 11 

if
UNITED_MAP == 0
then
actor.PutAtNoOffset(PLAYER_ACTOR,258.807, -41.4674, 1005.8052)
actor.Angle(PLAYER_ACTOR) = 32.9773
select_interior 14
0860: link_actor PLAYER_ACTOR to_interior 14
0337: set_actor PLAYER_ACTOR visibility 0
camera.SetPosition(254.718643, -39.905739, 1001.965027,0.0,0.0,0.0)
camera.PointAt(255.515015, -40.509468, 1002.001282,2)
04F9: set_sky_color 1 fade 0
else

if and
STORIES_MAP == 0
$UNITED_VC_FLAG == 1
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,2230.8938, -2212.6553, 1011.8168)
    actor.Angle(PLAYER_ACTOR) = 187.9198
    select_interior 1
    0860: link_actor PLAYER_ACTOR to_interior 1
    0337: set_actor PLAYER_ACTOR visibility 0
    camera.SetPosition(2232.395264, -2216.878906, 1008.063843,0.0,0.0,0.0)
    camera.PointAt(2232.006348, -2215.957764, 1008.041870,2)
    end
    
if and
STORIES_MAP == 0
$UNITED_VC_FLAG == 0
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,-453.8065, 1493.739, 1001.5547)
    actor.Angle(PLAYER_ACTOR) = 112.7161
    select_interior 2
    0860: link_actor PLAYER_ACTOR to_interior 2
    0337: set_actor PLAYER_ACTOR visibility 0
    camera.SetPosition(-457.701630, 1492.388794, 998.644775,0.0,0.0,0.0)
    camera.PointAt(-456.788116, 1492.795410, 998.631470,2)
    end
    
if and
STORIES_MAP == 1
$UNITED_VC_FLAG == 0
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,-210.3794, 1533.5731, 1004.0062)
    actor.Angle(PLAYER_ACTOR) = 207.2616
    select_interior 2
    0860: link_actor PLAYER_ACTOR to_interior 2
    0337: set_actor PLAYER_ACTOR visibility 0
    camera.SetPosition(-208.361725, 1531.034424, 999.360962,0.0,0.0,0.0)
    camera.PointAt(-208.912369, 1531.868652, 999.391724,2)
    end
    
if and
STORIES_MAP == 1
$UNITED_VC_FLAG == 1
    then
    actor.PutAtNoOffset(PLAYER_ACTOR,355.6834, -1239.3584, 1004.1521)
    actor.Angle(PLAYER_ACTOR) = 15.4324
    select_interior 1
    0860: link_actor PLAYER_ACTOR to_interior 1
    0337: set_actor PLAYER_ACTOR visibility 0
    camera.SetPosition(354.050934, -1236.379150, 999.031738,0.0,0.0,0.0)
    camera.PointAt(354.575531, -1237.230347, 999.017212,2)
    end    

end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME749'

create_thread @REFR_3D

wait 500

27@ = 0
22@ = 0
gosub @CHARACTER_SETTINGSS
$COMMUN_MISS_NUM = 0 

text.RemoveTextBox()

fade 0 500
wait 500

03F0: enable_text_draw 0
wait 0
0391: release_textures

0E9F: remove_all_unused_models

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1

while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

//////////////////////////////////////////////////////////

if
056D:   actor $NAME_ACTOR defined
then
actor.DestroyInstantly($NAME_ACTOR)
end

if
056D:   actor $LV_BMB_ACTVTD defined
then
actor.DestroyInstantly($LV_BMB_ACTVTD)
end
$LV_BMB_ACTVTD = 0

if
056D:   actor $LV_BMB_ACTVTD defined
then
actor.DestroyInstantly($LV_BMB_ACTVTD)
end
$LV_BMB_ACTVTD = 0

if
056D:   actor $LS_BMB_ACTVTD defined
then
actor.DestroyInstantly($LS_BMB_ACTVTD)
end
$LS_BMB_ACTVTD = 0

if
056D:   actor $SF_BMB_ACTVTD defined
then
actor.DestroyInstantly($SF_BMB_ACTVTD)
end
$SF_BMB_ACTVTD = 0

$C_GL_DO_NOT_A_Z = 0

$SAVESTATUS = 0
wait 50      

select_interior 0
0860: link_actor PLAYER_ACTOR to_interior 0
04FA: reset_sky_colors_with_fade 0
actor.PutAtNoOffset(PLAYER_ACTOR,10@,11@,12@)
actor.Angle(PLAYER_ACTOR) = 13@
camera.Restore_WithJumpCut()
067C: put_camera_on_actor PLAYER_ACTOR offset 0.0 -1.0 0.0 rotation 0.0 0.0 0.0 tilt 0.0 switchstyle 2
create_thread @REFR_3D

$FPS_COUNTER_ENABLED = 1
if
FREEMODE_CUSTOM_SKIN == 0
then
fade 1 500
audiostream.PerformAction($SELECT_MUSIC,RESUME)
end  

return

///////////////////////////////////Выбор кастомного персонажа "Выживания"///////////////////////////////////

{$INCLUDE Custom Character Select.txt} 

///////////////////////////////////Звук входа в режим/////////////////////////////////// 

:GAMEMODE_ENTER_SOUND

0B00: delete_file "data\survival.set"  // IF and SET
0AF1: write_int $BUILD_VERSION1 to_ini_file "data\survival.set" section "BUILD_VERSION" key "BUILD1"
0AF1: write_int $BUILD_VERSION2 to_ini_file "data\survival.set" section "BUILD_VERSION" key "BUILD2"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "SURVIVAL_SECONDS"    
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "SURVIVAL_MINUTES"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "SURVIVAL_HOURS"
if and
$FREEMODE == 1
UNITED_MAP == 0
then
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ1_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ2_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ3_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_DONE"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_CARS_ROOT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_DONE"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ4_GUNS_ROOT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ5_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ6_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ7_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ8_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ9_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ10_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ11_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ12_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ13_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "MQ14_CHECKPOINT"
0AF1: write_int 0 to_ini_file "data\survival.set" section "SCR" key "OOS_CHECKPOINT" 
end

if
SNIPER_OTHER_AIM == 1
then
SNIPER_GAYMPAD_FLAG = 1
0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\joy_snipers.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt" //IF and SET
else

if and
0A4B:   controls_set_to_joystick
COOP_ACTIVE_FLAG == 0
then
SNIPER_GAYMPAD_FLAG = 1
0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\joy_snipers.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt" //IF and SET
end

if and
8A4B: not  controls_set_to_joystick
0AAB:   file_exists "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"
not COOP_ACTIVE_FLAG == 1
then
0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"  // IF and SET
end

if and
8AAB: not  file_exists "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"
COOP_ACTIVE_FLAG == 1
then
0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\joy_snipers.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt" //IF and SET
end

end 

if
GAMEMODE_AUTOSELECT == 1
then
return
end

Audiostream.Volume($MENU_COUNTDOWN_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_COUNTDOWN_SOUND, 0)
Audiostream.PerformAction($MENU_COUNTDOWN_SOUND, PLAY) 
return

///////////////////////////////////Меню просмотра статистики///////////////////////////////////

:STAT_TOTAL_SHOW_START  
$STATS_TOTAL_SHOW_LIST_FLAG = 1
create_thread @STS_SHO

repeat
wait 0
until 0E3E: is_button_just_pressed 0 15

Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME   
$STATS_TOTAL_SHOW_OFF_FLAG = 1
wait 1  
$FPS_COUNTER_ENABLED = 1

if
OTHER_GAMEMODES_MENU_IN == 1
then
jump to @OTHER_GAMEMODES_SELECT
end

jump to @SELECT_GAMEMODE

///////////////////////////////////Меню просмотра достижений/////////////////////////////////// 

:ACHIV_TOTAL_SHOW_START
$ACHIV_TOTAL_SHOW_LIST_FLAG = 1
create_thread @ACHIV_S

repeat
wait 0
until 0E3E: is_button_just_pressed 0 15

Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME   
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
wait 1  
$FPS_COUNTER_ENABLED = 1

if
OTHER_GAMEMODES_MENU_IN == 1
then
jump to @OTHER_GAMEMODES_SELECT
end

jump to @SELECT_GAMEMODE

///////////////////////////////////Меню просмотра достижений (История Майка)/////////////////////////////////// 

:ACHIV_TOTAL_SHOW_START_MIKE
$ACHIV_TOTAL_SHOW_LIST_FLAG = 1
create_thread @ACHIV_S 1

repeat
wait 0
until 0E3E: is_button_just_pressed 0 15

Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME   
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
wait 1  
$FPS_COUNTER_ENABLED = 1
jump to @MIKE_CONTENT_SELECT

///////////////////////////////////Меню просмотра достижений (История Карла)/////////////////////////////////// 

:ACHIV_TOTAL_SHOW_START_CARL
$ACHIV_TOTAL_SHOW_LIST_FLAG = 1
create_thread @ACHIV_S 2

repeat
wait 0
until 0E3E: is_button_just_pressed 0 15

Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME   
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
wait 1  
$FPS_COUNTER_ENABLED = 1
jump to @CARL_CONTENT_SELECT

///////////////////////////////////Меню просмотра кассет///////////////////////////////////        

:CASSETTES_TOTAL_SHOW_START
$ACHIV_TOTAL_SHOW_LIST_FLAG = 1
create_thread @CAS_SHW

repeat
wait 0
until 0E3E: is_button_just_pressed 0 15

Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME   
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
wait 1  
$FPS_COUNTER_ENABLED = 1

if
OTHER_GAMEMODES_MENU_IN == 1
then
jump to @OTHER_GAMEMODES_SELECT
end

jump to @SELECT_GAMEMODE

///////////////////////////////////Меню просмотра записок///////////////////////////////////    

:NOTES_TOTAL_SHOW_START
$ACHIV_TOTAL_SHOW_LIST_FLAG = 1
create_thread @NT_SHOW

repeat
wait 0

if and
$READING_NOTE_FLAG == 0
0E3E: is_button_just_pressed 0 15
    then
    break
    end 

until false

Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME   
$ACHIV_TOTAL_SHOW_OFF_FLAG = 1
wait 1  
$FPS_COUNTER_ENABLED = 1

if
OTHER_GAMEMODES_MENU_IN == 1
then
jump to @OTHER_GAMEMODES_SELECT
end

jump to @SELECT_GAMEMODE

///////////////////////////////////Потдверждение выбора легкого режима/////////////////////////////////// 

:EASY_GAMEMODE_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT

if
BASE_MISSION_BASE_NUMBER == -699
then
BASE_MISSION_BASE_NUMBER = Audiostream.Load("AUDIO\SOUNDS\EXTRA\rubber_toy_4.ogg")
end 

:EASY_GAMEMODE_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GAME203',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1    
    jump to @SURV_DIFFICULTY_SELECT
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then  
    
    Audiostream.Volume(BASE_MISSION_BASE_NUMBER) = $SOUNDS_VOLUME 
    Audiostream.Loop(BASE_MISSION_BASE_NUMBER, 0)
    Audiostream.PerformAction(BASE_MISSION_BASE_NUMBER, PLAY)     
    $FPS_COUNTER_ENABLED = 0      
    $DIFFICULTY_SELECTED = 1    
    jump to @DIFFUCLITY_EASY_SELECT
    end    

jump @EASY_GAMEMODE_ACCEPT_IDLE

///////////////////////////////////Потдверждение выбора кошмарного режима/////////////////////////////////// 

:NIGHTMARE_GAMEMODE_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:NIGHTMARE_GAMEMODE_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GAME204',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1    
    jump to @SURV_DIFFICULTY_SELECT
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then      
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 0      
    $DIFFICULTY_SELECTED = 1    
    jump to @DIFFUCLITY_NIGHTMARE_SELECT
    end    

jump @NIGHTMARE_GAMEMODE_ACCEPT_IDLE

///////////////////////////////////Потдверждение начала нового хардкорного сохранения/////////////////////////////////// 

:HARDCORE_GAMEMODE_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:HARDCORE_GAMEMODE_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GAME827',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1
    29@ = 0    
    return
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then             
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)
    29@ = 1     
    return
    end    

jump @HARDCORE_GAMEMODE_ACCEPT_IDLE

///////////////////////////////////Потдверждение начала нового хардкорного+ сохранения/////////////////////////////////// 

:HARDCORE_PLUS_GAMEMODE_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:HARDCORE_PLUS_GAMEMODE_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GAME961',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1
    29@ = 0    
    return
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then             
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)
    29@ = 1     
    return
    end    

jump @HARDCORE_PLUS_GAMEMODE_ACCEPT_IDLE

///////////////////////////////////Потдверждение выбора "Побега из штата"/////////////////////////////////// 

:ESCAPE_GAMEMODE_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:ESCAPE_GAMEMODE_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GAME640',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1    
    jump to @SELECT_GAMEMODE
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then      
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1          
    jump to @ESCAPE_GAMEMOE_ACCEPTED
    end    

jump @ESCAPE_GAMEMODE_ACCEPT_IDLE

///////////////////////////////////Потдверждение выбора "Нестандартного варианта истории Майка"/////////////////////////////////// 

:MIKE_SHIZA_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:MIKE_SHIZA_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GME1189',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1
    MIKE_SHIZA_FLAG = 0    
    return
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then      
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1
    MIKE_SHIZA_FLAG = 1          
    return
    end    

jump @MIKE_SHIZA_ACCEPT_IDLE        

///////////////////////////////////Сброс статистики карт удержания/////////////////////////////////// 

:ZERO_MAPS_STATS_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:ZERO_MAPS_STATS_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('GAME441',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    text.ClearAll()
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)     
    return
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then       
    text.ClearAll()   
    create_thread @MPS_ZER
    wait 1    
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)     
    return
    end    

jump @ZERO_MAPS_STATS_ACCEPT_IDLE

///////////////////////////////////Потдверждение выбора чекпоинита USHER1/////////////////////////////////// 

:USHER1_CHECKPOINT_ACCEPT
$FPS_COUNTER_ENABLED = 0
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
//wait $MENU_BACK_WAIT 

:USHER1_CHECKPOINT_ACCEPT_IDLE
wait 0

09C1: add_next_text_to_brief_history 0
text.ShowH('STRB94',5,1)

if 
0E3E: is_button_just_pressed 0 button 10
    then    
    Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_HORROR01_SOUND, 0)
    Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1 
    0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_CHECKPOINT" 
    0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_TRIP_SKIP"
    0AF1: write_int -1 to_ini_file "saves\ZACM.set" section "SCR" key "USHER_INTRO_SLOYPOK_FLAG"    
    jump to @USHER1_CHECKPOINT_ACCEPTED
    end
    
if 
0E3E: is_button_just_pressed 0 button 11
    then      
    Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
    Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
    $FPS_COUNTER_ENABLED = 1          
    jump to @USHER1_CHECKPOINT_ACCEPTED
    end    

jump @USHER1_CHECKPOINT_ACCEPT_IDLE

///////////////////////////////////Выбор карты для удержания/////////////////////////////////// 

:SELECT_MAP 

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GAME13'

if and
not 25@ == 1
not GAMEMODE_AUTOSELECT == 1
then
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)   
else

if
UNITED_MAP == 0
then
jump to @RANDOM_MAP
else
jump to @2RANDOM_MAP
end

end

0391: release_textures    
 
0390: load_txd_dictionary 'maps'  

$FPS_COUNTER_ENABLED = 0
 
wait 1                       

if
UNITED_MAP == 0
then
038F: load_texture "MAP00" as 1
038F: load_texture "MAP01" as 2 
038F: load_texture "MAP02" as 3 
038F: load_texture "MAP03" as 4 
038F: load_texture "MAP04" as 5 
038F: load_texture "MAP05" as 6 
038F: load_texture "MAP06" as 7 
038F: load_texture "MAP07" as 8 
038F: load_texture "MAP08" as 9
038F: load_texture "MAP09" as 10
038F: load_texture "MAP10" as 11
038F: load_texture "MAP11" as 12
038F: load_texture "MAP12" as 13
038F: load_texture "RNDM" as 116 
else

if
$UNITED_III_SPAWN == 1
then

if
STORIES_MAP == 0
then
038F: load_texture "2MAP01" as 1 
038F: load_texture "2MAP02" as 2
038F: load_texture "2MAP03" as 3
038F: load_texture "2MAP04" as 4
else
038F: load_texture "2MAP09" as 1 
038F: load_texture "2MAP10" as 2
end

else

if
STORIES_MAP == 0
then  
038F: load_texture "2MAP05" as 1
038F: load_texture "2MAP06" as 2
038F: load_texture "2MAP07" as 3
038F: load_texture "2MAP08" as 4
else
038F: load_texture "2MAP11" as 1 
038F: load_texture "2MAP12" as 2
end

end

038F: load_texture "RNDM" as 116
end 

038F: load_texture "bronze" as 113 
038F: load_texture "silver" as 114 
038F: load_texture "gold" as 115 
wait 1 

$MAP_NAME_TEXT_X = 320.0
$MAP_NAME_TEXT_Y = 80.0 

$MAP_NAME_TEXT_SIZE_X = 0.4
$MAP_NAME_TEXT_SIZE_Y = 1.3

1@ = 0 

32@ = 0
33@ = 0

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"
if
0@ == 1
then
0AF0: $PANEL4_ACTIVE_ROW = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_PARAM"

if and
UNITED_MAP == 0
$PANEL4_ACTIVE_ROW == 12
then
$PANEL4_ACTIVE_ROW = 0
jump to @SKIP_SHIT_HOLD
end

if and
UNITED_MAP == 0
$PANEL4_ACTIVE_ROW == 0
then
$PANEL4_ACTIVE_ROW = 5
jump to @SKIP_SHIT_HOLD
end

if and
UNITED_MAP == 0
$PANEL4_ACTIVE_ROW > 4
not $PANEL4_ACTIVE_ROW == 12
then
$PANEL4_ACTIVE_ROW += 1
jump to @SKIP_SHIT_HOLD
end

:SKIP_SHIT_HOLD

0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "HOLD_MAP_FLAG"
end     

:SELECT_MAP_PRE_ILDE
wait 0

if
UNITED_MAP == 0
then

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
if
1@ == 13
then
26@ = 1
1@ = 116
else
26@ = 0
1@ += 1 
end

else

if
STORIES_MAP == 0
then

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
if
1@ == 8
then
26@ = 1
1@ = 116
else
26@ = 0
1@ += 1 
end

else

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
if
1@ == 3
then
26@ = 1
1@ = 116
else
26@ = 0
1@ += 1 
end

end

end

03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 1@ position 320.0 200.0 size 300.0 180.0 RGBA 255 255 255 255    

if
001F:   32@ > $MENU_BACK_WAIT // (int)
jf @SELECT_MAP_PRE_ILDE

:SELECT_MAP_IDLE
wait 0

if
8A2A: not  text_box 'GAME13' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME13' 
end

////////////////////////////////////////////////////

00E2: get_player 0 key 1 state_to 0@
if and
00E1:   player 0 pressed_key 9
0A4B:   controls_set_to_joystick
    then
    0@ = 1
    end    

if and
0@ > 0
33@ > 100
then
33@ = 0
$PANEL4_ACTIVE_ROW -= 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
00E1:   player 0 pressed_key 8
0A4B:   controls_set_to_joystick
    then
    0@ = -1
    end

if and
0@ < 0
33@ > 100
then
33@ = 0
$PANEL4_ACTIVE_ROW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

////////////////////////////////////////////////////

if
UNITED_MAP == 0
then

if
$PANEL4_ACTIVE_ROW < 0
then
$PANEL4_ACTIVE_ROW = 13
end

if
$PANEL4_ACTIVE_ROW > 13
then
$PANEL4_ACTIVE_ROW = 0
end

else

if
STORIES_MAP == 0
then

if
$PANEL4_ACTIVE_ROW < 0
then
$PANEL4_ACTIVE_ROW = 4
end

if
$PANEL4_ACTIVE_ROW > 4
then
$PANEL4_ACTIVE_ROW = 0
end

else

if
$PANEL4_ACTIVE_ROW < 0
then
$PANEL4_ACTIVE_ROW = 2
end

if
$PANEL4_ACTIVE_ROW > 2
then
$PANEL4_ACTIVE_ROW = 0
end

end

end

////////////////////////////////////////////////////

if
UNITED_MAP == 0
then

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
if
1@ == 13
then
26@ = 1
1@ = 116
else
26@ = 0
1@ += 1 
end

else

if
STORIES_MAP == 0
then

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
if
1@ == 4
then
26@ = 1
1@ = 116
else
26@ = 0
1@ += 1 
end

else

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
if
1@ == 2
then
26@ = 1
1@ = 116
else
26@ = 0
1@ += 1 
end

end

end

//////////////////////////////////////////////////// 

03F0: enable_text_draw 1  
03E3: set_texture_to_be_drawn_antialiased 1   
038D: draw_texture 1@ position 320.0 200.0 size 300.0 180.0 RGBA 255 255 255 255

if and
26@ == 0
25@ == 0
then
gosub @MEDAL_CHECK

$MEDAL_TEXT_X = 500.0
$MEDAL_TEXT_Y = 235.0

if
$BRONZE_MEDAL_GOT == 1
then
03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 113 position $MEDAL_TEXT_X $MEDAL_TEXT_Y size 50.0 65.0 RGBA 255 255 255 255
end

if
$SILVER_MEDAL_GOT == 1
then
$MEDAL_TEXT_Y -= 35.0
03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 114 position $MEDAL_TEXT_X $MEDAL_TEXT_Y size 50.0 65.0 RGBA 255 255 255 255
end

if
$GOLD_MEDAL_GOT == 1
then
$MEDAL_TEXT_Y -= 35.0
03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 115 position $MEDAL_TEXT_X $MEDAL_TEXT_Y size 50.0 65.0 RGBA 255 255 255 255
end       

end

03F0: enable_text_draw 1 
03E0: draw_text_behind_textures 1
0349: set_text_draw_font 2
03E3: set_texture_to_be_drawn_antialiased 1 
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 300.0 for_centered_text
033F: set_text_draw_letter_size $MAP_NAME_TEXT_SIZE_X $MAP_NAME_TEXT_SIZE_Y 
081C: draw_text_outline 1 RGBA 0 0 0 255 
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end 

008B: 2@ = $PANEL4_ACTIVE_ROW // (int)

if
UNITED_MAP == 0
then

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1190'  // Push  
end  

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME36'  // Push  
end 

if
2@ == 2
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME65'  // Push  
end 

if
2@ == 3
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME64'  // Push  
end 

if
2@ == 4
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME125'  // Push  
end

if
2@ == 5
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME41'  // Push  
end 

if
2@ == 6
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME312'  // Push  
end 

if
2@ == 7
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME314'  // Push  
end 

if
2@ == 8
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME316'  // Push  
end

if
2@ == 9
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME501'  // Push  
end

if
2@ == 10
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME503'  // Push  
end

if
2@ == 11
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME505'  // Push  
end

if
2@ == 12
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME507'  // Push  
end

if
2@ == 13
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME353'  // Push  
end

else

if
$UNITED_III_SPAWN == 1
then

if
STORIES_MAP == 0
then

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME427'  // Push  
end 

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME428'  // Push  
end

if
2@ == 2
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME429'  // Push  
end

if
2@ == 3
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME430'  // Push  
end

if
2@ == 4 //RANDOM
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME353'  // Push  
end

else

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME428'  // Push  
end

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME429'  // Push  
end

if
2@ == 2 //RANDOM
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME353'  // Push  
end

end 

else

if
STORIES_MAP == 0
then

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME977'  // Push  
end

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME979'  // Push  
end

if
2@ == 2
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME981'  // Push  
end

if
2@ == 3
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME983'  // Push  
end 

if
2@ == 4 //RANDOM
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME353'  // Push  
end

else

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME979B'  // Push  
end

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME981B'  // Push  
end

if
2@ == 2 //RANDOM
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GAME353'  // Push  
end

end

end

end 

if 
0E3D:   key_pressed 82
    then
    03E6: remove_text_box   
    00BE: text_clear_all
    gosub @ZERO_MAPS_STATS_ACCEPT   
    jump to @SELECT_MAP 
    end

if
UNITED_MAP == 0
then

//////////////////////////////////1 - Линден Сайд//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 0 
    then
    
    :MAP13_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 12
    
    0776: create_objects_in_object_group "hold00"
    
    return
    end      
end        

//////////////////////////////////2 - Дель дьябло//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 1 
    then  
    
    :MAP02_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 1
    
    0776: create_objects_in_object_group "hold02"
    
    return
    end      
end

//////////////////////////////////3 - Тир в пустыне//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 2 
    then
    
    :MAP03_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 2
    
    0776: create_objects_in_object_group "hold03"
    
    return
    end      
end

//////////////////////////////////4 - Бензозаправка в ветстоуне//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 3 
    then
    
    :MAP04_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 3
    
    0776: create_objects_in_object_group "hold04"
    
    return
    end      
end

//////////////////////////////////5 - Zombotech//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 4 
    then
    
    :MAP05_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 4
    
    0776: create_objects_in_object_group "hold05"
    
    return
    end      
end

//////////////////////////////////6 - Аэропорт СФ//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 5 
    then
    
    :MAP01_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 0
    
    0776: create_objects_in_object_group "hold01"
    
    return
    end      
end        

//////////////////////////////////6 - Большое ухо//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 6 
    then
    
    :MAP06_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 5
    
    0776: create_objects_in_object_group "hold06"
    
    return
    end      
end

//////////////////////////////////7 - Мотель//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 7 
    then
    
    :MAP07_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 6
    
    0776: create_objects_in_object_group "hold07"
    
    return
    end      
end

//////////////////////////////////8 - Ферма//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 8 
    then
    
    :MAP08_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 7
    
    0776: create_objects_in_object_group "hold08"
    
    return
    end      
end

//////////////////////////////////9 - Аэропорт ЛС//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 9 
    then
    
    :MAP09_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 8
    
    0776: create_objects_in_object_group "hold09"
    
    return
    end      
end

////////////////////////////////10 - Станция Крэнбэрри//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 10 
    then
    
    :MAP10_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 9
    
    0776: create_objects_in_object_group "hold10"
    
    return
    end      
end

////////////////////////////////11 - Кам-э-лот//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 11 
    then
    
    :MAP11_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 10
    
    0776: create_objects_in_object_group "hold11"
    
    return
    end      
end

////////////////////////////////12 - Рока Эскаланте//////////////////////////////////

if
$PANEL4_ACTIVE_ROW == 12 
    then
    
    :MAP12_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $MAP_SELECTED_NUMBER = 11
    
    0776: create_objects_in_object_group "hold12"
    
    return
    end      
end

//////////////////////////////////Случайный выбор//////////////////////////////////

if or
$PANEL4_ACTIVE_ROW == 13 
25@ == 1
GAMEMODE_AUTOSELECT == 1
    then
    09C1: add_next_text_to_brief_history 0  
    text.ShowH('GAME354',5,1)
    if or
    0E3E: is_button_just_pressed 0 16
    25@ == 1
    GAMEMODE_AUTOSELECT == 1
        then     
        
        :RANDOM_MAP        
        
        if
        GAMEMODE_AUTOSELECT < 0
        then
        random_int 0@ 0 to 12
        else
        0@ = -1
        end  
          
        if or
        0@ == 0
        GAMEMODE_AUTOSELECT_PARAM == 0
        then
        jump to @MAP01_SELECT
        end
        
        if or
        0@ == 1
        GAMEMODE_AUTOSELECT_PARAM == 1
        then
        jump to @MAP02_SELECT
        end
        
        if or
        0@ == 2
        GAMEMODE_AUTOSELECT_PARAM == 2
        then
        jump to @MAP03_SELECT
        end
        
        if or
        0@ == 3
        GAMEMODE_AUTOSELECT_PARAM == 3
        then
        jump to @MAP04_SELECT
        end
        
        if or
        0@ == 4
        GAMEMODE_AUTOSELECT_PARAM == 4
        then
        jump to @MAP05_SELECT
        end
        
        if or
        0@ == 5
        GAMEMODE_AUTOSELECT_PARAM == 5
        then
        jump to @MAP06_SELECT
        end
        
        if or
        0@ == 6
        GAMEMODE_AUTOSELECT_PARAM == 6
        then
        jump to @MAP07_SELECT
        end
        
        if or
        0@ == 7
        GAMEMODE_AUTOSELECT_PARAM == 7
        then
        jump to @MAP08_SELECT
        end
        
        if or
        0@ == 8
        GAMEMODE_AUTOSELECT_PARAM == 8
        then
        jump to @MAP09_SELECT
        end
        
        if or
        0@ == 9
        GAMEMODE_AUTOSELECT_PARAM == 9
        then
        jump to @MAP10_SELECT
        end
        
        if or
        0@ == 10
        GAMEMODE_AUTOSELECT_PARAM == 10
        then
        jump to @MAP11_SELECT
        end
        
        if or
        0@ == 11
        GAMEMODE_AUTOSELECT_PARAM == 11
        then
        jump to @MAP12_SELECT
        end        
        
        end   
    end   

else

//////////////////////////////////1 - Стройка Стаунтона (III)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 0
$UNITED_III_SPAWN == 1
STORIES_MAP == 0 
    then
    
    :2MAP01_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_ZOMBIE_KILLS"
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)       
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 1
    $MAP_SELECTED_NUMBER = 0
    
    0776: create_objects_in_object_group "hold01"
    
    return
    end      
end        

//////////////////////////////////2 - Либерти Кампус (LC)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 1
$UNITED_III_SPAWN == 1
STORIES_MAP == 0 
    then  
    
    :2MAP02_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 1
    $MAP_SELECTED_NUMBER = 1
    
    0776: create_objects_in_object_group "hold02"
    
    return
    end      
end

//////////////////////////////////3 - Битва у метро (III)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 2
$UNITED_III_SPAWN == 1
STORIES_MAP == 0 
    then  
    
    :2MAP03_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 1
    $MAP_SELECTED_NUMBER = 2
    
    0776: create_objects_in_object_group "hold03"
    
    return
    end      
end

//////////////////////////////////4 - Квартал красных фонарей (III)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 3
$UNITED_III_SPAWN == 1
STORIES_MAP == 0 
    then  
    
    :2MAP04_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 1
    $MAP_SELECTED_NUMBER = 3
    
    0776: create_objects_in_object_group "hold04"
    
    return
    end      
end

//////////////////////////////////5 - Стройка (VC)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 0
$UNITED_III_SPAWN == 0
STORIES_MAP == 0 
    then  
    
    :2MAP05_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 0
    $MAP_SELECTED_NUMBER = 0
    
    0776: create_objects_in_object_group "hold05"
    
    return
    end      
end

//////////////////////////////////6 - Заправка (VC)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 1
$UNITED_III_SPAWN == 0
STORIES_MAP == 0 
    then  
    
    :2MAP06_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 0
    $MAP_SELECTED_NUMBER = 1
    
    0776: create_objects_in_object_group "hold06"
    
    return
    end      
end

//////////////////////////////////7 - VAJ Finance (VC)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 2
$UNITED_III_SPAWN == 0
STORIES_MAP == 0 
    then  
    
    :2MAP07_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 0
    $MAP_SELECTED_NUMBER = 2
    
    0776: create_objects_in_object_group "hold07"
    
    return
    end      
end

//////////////////////////////////8 - Escobar International (VC)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 3
$UNITED_III_SPAWN == 0 
STORIES_MAP == 0
    then  
    
    :2MAP08_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 0
    $MAP_SELECTED_NUMBER = 3
    
    0776: create_objects_in_object_group "hold08"
    
    return
    end      
end

//////////////////////////////////9 - Либерти Кампус (LCS)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 0
$UNITED_III_SPAWN == 1
STORIES_MAP == 1 
    then  
    
    :2MAP09_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 1
    $MAP_SELECTED_NUMBER = 0
    
    0776: create_objects_in_object_group "hold09"
    
    return
    end      
end

//////////////////////////////////10 - Битва у метро (LCS)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 1
$UNITED_III_SPAWN == 1
STORIES_MAP == 1 
    then  
    
    :2MAP10_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 1
    $MAP_SELECTED_NUMBER = 1
    
    0776: create_objects_in_object_group "hold10"
    
    return
    end      
end

//////////////////////////////////11 - Заправка (VCS)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 0
$UNITED_III_SPAWN == 0
STORIES_MAP == 1 
    then  
    
    :2MAP11_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 0
    $MAP_SELECTED_NUMBER = 0
    
    0776: create_objects_in_object_group "hold11"
    
    return
    end      
end

//////////////////////////////////12 - VAJ Finance (VCS)//////////////////////////////////

if and
$PANEL4_ACTIVE_ROW == 1
$UNITED_III_SPAWN == 0
STORIES_MAP == 1 
    then  
    
    :2MAP12_SELECT
    
    0AF0: $RECORD_WAVE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_WAVE"
    0AF0: $RECORD_MINUTES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_MINUTES"
    0AF0: $RECORD_SECONDS = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_SECONDS"
    0AF0: $RECORD_ZOMBIES = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_ZOMBIE_KILLS"    
    
    text.Show4Number('GAME35',$RECORD_WAVE,$RECORD_MINUTES,$RECORD_SECONDS,$RECORD_ZOMBIES,50,1)     
    if or
    0E3E: is_button_just_pressed 0 16
    GAMEMODE_AUTOSELECT == 1
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    $MAP_SELECTED = 1
    $UNITED_III_SPAWN = 0
    $MAP_SELECTED_NUMBER = 1
    
    0776: create_objects_in_object_group "hold12"
    
    return
    end      
end

//////////////////////////////////Случайный выбор//////////////////////////////////

if
STORIES_MAP == 0
then
0@ = 4
else
0@ = 2
end

if or
003C:   $PANEL4_ACTIVE_ROW == 0@  // (int) 
25@ == 1
GAMEMODE_AUTOSELECT == 1
    then
    :RANDOM_HOLD_MAP_CHOOSE
    09C1: add_next_text_to_brief_history 0  
    text.ShowH('GAME354',5,1)
    if or
    0E3E: is_button_just_pressed 0 16
    25@ == 1
    GAMEMODE_AUTOSELECT == 1
        then     
        
        :2RANDOM_MAP                
        
        if
        STORIES_MAP == 0
        then
        random_int 0@ 0 to 4
        else
        random_int 0@ 0 to 2
        end  
        
        if
        $UNITED_III_SPAWN == 1
            then
            
            if
            STORIES_MAP == 0
            then
            
            //III HOLD MAPS
              
            if 
            0@ == 0
            then
            jump to @2MAP01_SELECT
            end
            
            if 
            0@ == 1
            then
            jump to @2MAP02_SELECT
            end
            
            if 
            0@ == 2
            then
            jump to @2MAP03_SELECT
            end
            
            if 
            0@ == 3
            then
            jump to @2MAP04_SELECT
            end
            
            else
            
            //LCS HOLD MAPS
            
            if 
            0@ == 0
            then
            jump to @2MAP09_SELECT
            end
            
            if 
            0@ == 1
            then
            jump to @2MAP10_SELECT
            end
            
            end
            
            else
            
            if
            STORIES_MAP == 0
            then
            
            //VC HOLD MAPS
              
            if 
            0@ == 0
            then
            jump to @2MAP05_SELECT
            end
            
            if 
            0@ == 1
            then
            jump to @2MAP06_SELECT
            end
            
            if 
            0@ == 2
            then
            jump to @2MAP07_SELECT
            end
            
            if 
            0@ == 3
            then
            jump to @2MAP08_SELECT
            end
            
            else
            
            //VCS HOLD MAPS
            
            if 
            0@ == 0
            then
            jump to @2MAP11_SELECT
            end
            
            if 
            0@ == 1
            then
            jump to @2MAP12_SELECT
            end
            
            end
            
            end        
        
        end   
    end   

end

if
0E3E: is_button_just_pressed 0 15 
then
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
03E6: remove_text_box   
00BE: text_clear_all
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
return
else
jump @SELECT_MAP_IDLE
end

jump @SELECT_MAP_IDLE

:MEDAL_CHECK

//////////////////////////////////////////////////////////////////////////////////////////////

if
UNITED_MAP == 1
then

if
$UNITED_III_SPAWN == 1
then

if
STORIES_MAP == 0
then

if
1@ == 1
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP01_GOLD"
end

if
1@ == 2
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP02_GOLD"
end

if
1@ == 3
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP03_GOLD"
end

if
1@ == 4
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP04_GOLD"
end

else

if
1@ == 1
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP09_GOLD"
end

if
1@ == 2
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP10_GOLD"
end

end

else

if
STORIES_MAP == 0
then

if
1@ == 1
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP05_GOLD"
end

if
1@ == 2
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP06_GOLD"
end

if
1@ == 3
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP07_GOLD"
end

if
1@ == 4
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP08_GOLD"
end

else

if
1@ == 1
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP11_GOLD"
end

if
1@ == 2
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "2MAP12_GOLD"
end

end

end

return
end

//////////////////////////////////////////////////////////////////////////////////////////////

if
1@ == 1
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_GOLD"
end

if
1@ == 2
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP02_GOLD"
end

if
1@ == 3
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP03_GOLD"
end

if
1@ == 4
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP04_GOLD"
end

if
1@ == 5
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP05_GOLD"
end

if
1@ == 6
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP01_GOLD"
end

if
1@ == 7
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP06_GOLD"
end  

if
1@ == 8
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP07_GOLD"
end

if
1@ == 9
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP08_GOLD"
end

if
1@ == 10
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP09_GOLD"
end

if
1@ == 11
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP10_GOLD"
end

if
1@ == 12
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP11_GOLD"
end

if
1@ == 13
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP12_GOLD"
end

if
1@ == 14
then
0AF0: $BRONZE_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_BRONZE"
0AF0: $SILVER_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_SILVER"
0AF0: $GOLD_MEDAL_GOT = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MAP13_GOLD"
end  

return

///////////////////////////////////Миссии сообщества (общее меню)///////////////////////////////////

:COMMUNITY_MISSIONS_MENU_SELECT

//if
//UNITED_MAP == 1
//then
//03E6: remove_text_box 
//08DA: remove_panel $PANEL  
//00BE: text_clear_all        
//$TUTORIAL_MIN = 1009
//$TUTORIAL_MAX = 1011       
//gosub @TUTORIAL                                    
//jump to @ZAME_SELECT
//end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
if
0@ == 2
then
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_DEV_FLAG"
if
not 1@ == 1
    then
    COMMUNITY_MISSION_NUM = -1
    0AF0: $PNEL_CM_ACTVE_RW = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_NUM"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_NUM"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_DEV_FLAG"
    jump to @GO_TO_COMMUNITY_MISSIONS
    else
    COMMUNITY_MISSION_NUM = -1
    0AF0: $PNEL_CM2_ACTVE_RW = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_NUM"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_NUM"
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_DEV_FLAG"
    jump to @GO_TO_DEV_MISSIONS
    end
end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1175' 
08D4: $PANEL = create_panel_with_title 'GME1162' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
08DB: set_panel $PANEL column 0 header 'GME1176' data 'GME1162' 'GME1163' 'GME1174' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'  
090E: set_panel $PANEL active_row $PNEL_CM3_ACTVE_RW

COMMUNITY_MISSION_NUM = -1

if and
STORIES_MAP == 1
UNITED_MAP == 1
then
08D9: set_panel $PANEL row 1 enable 0
end

if
$UNITED_III_SPAWN == 1
then
08D9: set_panel $PANEL row 1 enable 0
end
    
//wait $MENU_BACK_WAIT                  

:COMMUNITY_MISSIONS_MENU_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GME1175' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1175' 
end

08D7: $PNEL_CM3_ACTVE_RW = panel $PANEL active_row

//////////////////////////////////Миссии сообщества//////////////////////////////////        

if        
$PNEL_CM3_ACTVE_RW == 0
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_171',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        if
        UNITED_MAP == 1
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        $TUTORIAL_MIN = 1009
        $TUTORIAL_MAX = 1011       
        gosub @TUTORIAL                                    
        jump to @ZAME_SELECT
        end
        
        :GO_TO_COMMUNITY_MISSIONS                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        gosub @SELECT_CUSTOM_COMMUNITY_MISSION        
        if
        not COMMUNITY_MISSION_NUM == -1
            then
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF                             
            $FPS_COUNTER_ENABLED = 0
            $SELECT_MUSIC_END = 1
            actor.LockInCurrentPosition(PLAYER_ACTOR,false)    
            0337: set_actor PLAYER_ACTOR visibility 1
            0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
            $FPS_MAX = FPS_MAX_NORMAL
            $CAMERA_ZOOM_END = 1
            THREADS_AFTERGAMEMODE_SELECT_DELETE = 1
            $ZOMBIE_DONT_ATTACK_PLAYER = 0
            $GAMEMODE_SELECTED = 1
            $GAMEMODE_EDITOR = 1
            if
            COOP_ACTIVE_FLAG == 1
            then
            COOP_ACTOR_SURV_NUM = 0
            end                                             
            create_thread @ZAME_GM
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            0AF1: write_int 9 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
            
            if
            UNITED_MAP == 0
            then
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
            else
            
            if
            STORIES_MAP == 0
            then
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
            else
            0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
            end
            
            end
            
            0AF1: write_int 0 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_FROM_OBJ"
            end_thread                                                                          
            else            
            jump to @COMMUNITY_MISSIONS_MENU_SELECT            
            end
        end       
    end
    
//////////////////////////////////Примеры разработчиков//////////////////////////////////        

if        
$PNEL_CM3_ACTVE_RW == 1
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_172',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :GO_TO_DEV_MISSIONS                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        if
        not UNITED_MAP == 1
        then                
        gosub @SELECT_CUSTOM_MISSION_EXAMPLES
        else
        
        if
        STORIES_MAP == 0
        then
        gosub @SELECT_CUSTOM_MISSION_EXAMPLES_UNITED
        else
//        gosub @SELECT_CUSTOM_MISSION_EXAMPLES_STORIES
        end
        
        end
                
        if
        not COMMUNITY_MISSION_NUM == -1
            then
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF                             
            $FPS_COUNTER_ENABLED = 0
            $SELECT_MUSIC_END = 1
            actor.LockInCurrentPosition(PLAYER_ACTOR,false)    
            0337: set_actor PLAYER_ACTOR visibility 1
            0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
            $FPS_MAX = FPS_MAX_NORMAL
            $CAMERA_ZOOM_END = 1
            THREADS_AFTERGAMEMODE_SELECT_DELETE = 1
            $ZOMBIE_DONT_ATTACK_PLAYER = 0
            $GAMEMODE_SELECTED = 1
            $GAMEMODE_EDITOR = 1
            if
            COOP_ACTIVE_FLAG == 1
            then
            COOP_ACTOR_SURV_NUM = 0
            end                                             
            create_thread @ZAME_GM
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            0AF1: write_int 9 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
            
            if
            UNITED_MAP == 0
            then
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
            else
            
            if
            STORIES_MAP == 0
            then
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
            else
            0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_MAP"
            end
            
            end
            
            0AF1: write_int 0 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_FROM_OBJ"
            end_thread                                                                          
            else            
            jump to @COMMUNITY_MISSIONS_MENU_SELECT            
            end
        end       
    end    
    
if        
$PNEL_CM3_ACTVE_RW == 2
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GME1174',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        $TUTORIAL_MIN = 1009
        $TUTORIAL_MAX = 1011       
        gosub @TUTORIAL                                    
        jump to @ZAME_SELECT
        end              
    end                                                                  

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @OTHER_GAMEMODES_SELECT
else
jump @COMMUNITY_MISSIONS_MENU_SELECT_IDLE
end

jump @COMMUNITY_MISSIONS_MENU_SELECT_IDLE

///////////////////////////////////Выбор миссии сообщества (непосредственно миссии пиплов)/////////////////////////////////// 

:SELECT_CUSTOM_COMMUNITY_MISSION 

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GME1173'

Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)   

0391: release_textures    
 
0390: load_txd_dictionary 'cmissns'  

$FPS_COUNTER_ENABLED = 0
 
wait 1                       

038F: load_texture "avaccine" as 1
038F: load_texture "strikethr" as 2
038F: load_texture "lostsoldier" as 3  

$MAP_NAME_TEXT_X = 320.0
$MAP_NAME_TEXT_Y = 80.0 

$MAP_NAME_TEXT_SIZE_X = 0.4
$MAP_NAME_TEXT_SIZE_Y = 1.3

1@ = 0 

32@ = 0
33@ = 0     

:SELECT_COMMUNITY_MISSION_PRE_ILDE
wait 0

008B: 1@ = $PNEL_CM_ACTVE_RW // (int)
1@ += 1 

03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 1@ position 320.0 200.0 size 300.0 180.0 RGBA 255 255 255 255    

if
001F:   32@ > $MENU_BACK_WAIT // (int)
jf @SELECT_COMMUNITY_MISSION_PRE_ILDE

:SELECT_COMMUNITY_MISSION_IDLE
wait 0

if
8A2A: not  text_box 'GME1173' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1173' 
end

////////////////////////////////////////////////////

00E2: get_player 0 key 1 state_to 0@
if and
00E1:   player 0 pressed_key 9
0A4B:   controls_set_to_joystick
    then
    0@ = 1
    end

if and
0@ > 0
33@ > 100
then
33@ = 0
$PNEL_CM_ACTVE_RW -= 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
00E1:   player 0 pressed_key 8
0A4B:   controls_set_to_joystick
    then
    0@ = -1
    end

if and
0@ < 0
33@ > 100
then
33@ = 0
$PNEL_CM_ACTVE_RW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

////////////////////////////////////////////////////

if
$PNEL_CM_ACTVE_RW < 0
then
$PNEL_CM_ACTVE_RW = 2
end

if
$PNEL_CM_ACTVE_RW > 2
then
$PNEL_CM_ACTVE_RW = 0
end

////////////////////////////////////////////////////

008B: 1@ = $PNEL_CM_ACTVE_RW // (int)
1@ += 1 

//////////////////////////////////////////////////// 

03F0: enable_text_draw 1  
03E3: set_texture_to_be_drawn_antialiased 1   
038D: draw_texture 1@ position 320.0 190.0 size 300.0 180.0 RGBA 255 255 255 255

03F0: enable_text_draw 1 
03E0: draw_text_behind_textures 1
0349: set_text_draw_font 2
03E3: set_texture_to_be_drawn_antialiased 1 
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 500.0 for_centered_text
033F: set_text_draw_letter_size $MAP_NAME_TEXT_SIZE_X $MAP_NAME_TEXT_SIZE_Y 
081C: draw_text_outline 1 RGBA 0 0 0 255 
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end 

008B: 2@ = $PNEL_CM_ACTVE_RW // (int)

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1164'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1165',5,1)  
end

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1404'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1405',5,1)  
end

if
2@ == 2
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1414'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1415',5,1)  
end 

//////////////////////////////////1 - Avia Vaccine (by Pixart)//////////////////////////////////

if
$PNEL_CM_ACTVE_RW == 0 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all    
    COMMUNITY_MISSION_NUM = 0  
    return
    end      
end

//////////////////////////////////2 - Strike Three (by Metum)//////////////////////////////////

if
$PNEL_CM_ACTVE_RW == 1 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all    
    COMMUNITY_MISSION_NUM = 1  
    return
    end      
end

//////////////////////////////////3 - Lost Soldier (by AgentFox)//////////////////////////////////

if
$PNEL_CM_ACTVE_RW == 2 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all    
    COMMUNITY_MISSION_NUM = 2  
    return
    end      
end 

if
0E3E: is_button_just_pressed 0 15 
then
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
03E6: remove_text_box   
00BE: text_clear_all
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
$FPS_COUNTER_ENABLED = 1
return
else
jump @SELECT_COMMUNITY_MISSION_IDLE
end       

///////////////////////////////////Выбор миссии сообщества (примеры разработчиков)/////////////////////////////////// 

:SELECT_CUSTOM_MISSION_EXAMPLES 

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GME1172'

Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     

0391: release_textures    
 
0390: load_txd_dictionary 'cmxampl'  

$FPS_COUNTER_ENABLED = 0
 
wait 1                       

038F: load_texture "examp1" as 1 
038F: load_texture "examp4" as 2 
038F: load_texture "examp5" as 3 
038F: load_texture "examp2" as 4 
038F: load_texture "examp3" as 5 
038F: load_texture "examp6" as 6
038F: load_texture "examp7" as 7 
038F: load_texture "examp8" as 8  

$MAP_NAME_TEXT_X = 320.0
$MAP_NAME_TEXT_Y = 80.0 

$MAP_NAME_TEXT_SIZE_X = 0.4
$MAP_NAME_TEXT_SIZE_Y = 1.3

1@ = 0 

32@ = 0
33@ = 0     

:SELECT_COMMUNITY_MISSION_EXAMPLE_PRE_ILDE
wait 0

008B: 1@ = $PNEL_CM2_ACTVE_RW // (int)
1@ += 1 

03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 1@ position 320.0 200.0 size 300.0 180.0 RGBA 255 255 255 255    

if
001F:   32@ > $MENU_BACK_WAIT // (int)
jf @SELECT_COMMUNITY_MISSION_EXAMPLE_PRE_ILDE

:SELECT_COMMUNITY_MISSION_EXAMPLE_IDLE
wait 0

if
8A2A: not  text_box 'GME1172' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1172' 
end

////////////////////////////////////////////////////

00E2: get_player 0 key 1 state_to 0@
if and
00E1:   player 0 pressed_key 9
0A4B:   controls_set_to_joystick
    then
    0@ = 1
    end

if and
0@ > 0
33@ > 100
then
33@ = 0
$PNEL_CM2_ACTVE_RW -= 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
00E1:   player 0 pressed_key 8
0A4B:   controls_set_to_joystick
    then
    0@ = -1
    end

if and
0@ < 0
33@ > 100
then
33@ = 0
$PNEL_CM2_ACTVE_RW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

////////////////////////////////////////////////////

if
$PNEL_CM2_ACTVE_RW < 0
then
$PNEL_CM2_ACTVE_RW = 7
end

if
$PNEL_CM2_ACTVE_RW > 7
then
$PNEL_CM2_ACTVE_RW = 0
end

////////////////////////////////////////////////////

008B: 1@ = $PNEL_CM2_ACTVE_RW // (int)
1@ += 1 

//////////////////////////////////////////////////// 

03F0: enable_text_draw 1  
03E3: set_texture_to_be_drawn_antialiased 1   
038D: draw_texture 1@ position 320.0 190.0 size 300.0 180.0 RGBA 255 255 255 255

03F0: enable_text_draw 1 
03E0: draw_text_behind_textures 1
0349: set_text_draw_font 2
03E3: set_texture_to_be_drawn_antialiased 1 
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 500.0 for_centered_text
033F: set_text_draw_letter_size $MAP_NAME_TEXT_SIZE_X $MAP_NAME_TEXT_SIZE_Y 
081C: draw_text_outline 1 RGBA 0 0 0 255 
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end 

008B: 2@ = $PNEL_CM2_ACTVE_RW // (int)

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1166'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1167',5,1)  
end

if
2@ == 1
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1185'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1186',5,1)  
end  

if
2@ == 2
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1187'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1188',5,1)  
end

if
2@ == 3
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1168'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GE1168B',5,1)  
end

if
2@ == 4
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1169'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1170',5,1)  
end

if
2@ == 5
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1328'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1329',5,1)  
end

if
2@ == 6
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1500'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1501',5,1)  
end

if
2@ == 7
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1502'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1503',5,1)  
end

//////////////////////////////////1 - The 4th Survivor (Example by PTSDriver)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 0 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    COMMUNITY_MISSION_NUM = -2  
    return
    end      
end

//////////////////////////////////2 - Kris Nightmare (Example by Cumbineoff)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 1 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    COMMUNITY_MISSION_NUM = -5    
    return
    end      
end 

//////////////////////////////////3 - Quarantine (Example by Gas-Dust Cloud)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 2 
    then      
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all   
    COMMUNITY_MISSION_NUM = -6
    return
    end      
end            

//////////////////////////////////4 - San-Fierro Bridge (Example by Cumbineoff)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 3 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    COMMUNITY_MISSION_NUM = -3    
    return
    end      
end

//////////////////////////////////5 - Canals Rescue (Example by Gas-Dust Cloud)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 4 
    then      
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all   
    COMMUNITY_MISSION_NUM = -4
    return
    end      
end

//////////////////////////////////6 - Theatre of Work (Example by Gas-Dust Cloud)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 5 
    then      
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all   
    COMMUNITY_MISSION_NUM = -7
    return
    end      
end  

//////////////////////////////////7 - Kris Nightmare 2 (Example by Cumbineoff)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 6 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    COMMUNITY_MISSION_NUM = -8    
    return
    end      
end

//////////////////////////////////8 - COF: Reraise (example by Deadshot Calamity)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 7 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    COMMUNITY_MISSION_NUM = -9    
    return
    end      
end      

if
0E3E: is_button_just_pressed 0 15 
then
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
03E6: remove_text_box   
00BE: text_clear_all
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
$FPS_COUNTER_ENABLED = 1
return
else
jump @SELECT_COMMUNITY_MISSION_EXAMPLE_IDLE
end

///////////////////////////////////Выбор миссии сообщества (примеры разработчиков)/////////////////////////////////// 

:SELECT_CUSTOM_MISSION_EXAMPLES_UNITED 

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GME1172'

Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)   

0391: release_textures    
 
0390: load_txd_dictionary 'cmxampl'  

$FPS_COUNTER_ENABLED = 0
 
wait 1                       

038F: load_texture "examp9" as 1 
//038F: load_texture "examp4" as 2 
//038F: load_texture "examp5" as 3 
//038F: load_texture "examp2" as 4 
//038F: load_texture "examp3" as 5 
//038F: load_texture "examp6" as 6
//038F: load_texture "examp7" as 7 
//038F: load_texture "examp8" as 8  

$MAP_NAME_TEXT_X = 320.0
$MAP_NAME_TEXT_Y = 80.0 

$MAP_NAME_TEXT_SIZE_X = 0.4
$MAP_NAME_TEXT_SIZE_Y = 1.3

1@ = 0 

32@ = 0
33@ = 0     

:SELECT_COMMUNITY_MISSION_EXAMPLE_UNITED_PRE_ILDE
wait 0

008B: 1@ = $PNEL_CM2_ACTVE_RW // (int)
1@ += 1 

03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 1@ position 320.0 200.0 size 300.0 180.0 RGBA 255 255 255 255    

if
001F:   32@ > $MENU_BACK_WAIT // (int)
jf @SELECT_COMMUNITY_MISSION_EXAMPLE_UNITED_PRE_ILDE

:SELECT_COMMUNITY_MISSION_EXAMPLE_UNITED_IDLE
wait 0

if
8A2A: not  text_box 'GME1172' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1172' 
end

////////////////////////////////////////////////////

00E2: get_player 0 key 1 state_to 0@
if and
00E1:   player 0 pressed_key 9
0A4B:   controls_set_to_joystick
    then
    0@ = 1
    end

if and
0@ > 0
33@ > 100
then
33@ = 0
$PNEL_CM2_ACTVE_RW -= 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
00E1:   player 0 pressed_key 8
0A4B:   controls_set_to_joystick
    then
    0@ = -1
    end

if and
0@ < 0
33@ > 100
then
33@ = 0
$PNEL_CM2_ACTVE_RW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

////////////////////////////////////////////////////

if
$PNEL_CM2_ACTVE_RW < 0
then
$PNEL_CM2_ACTVE_RW = 0 //count
end

if
$PNEL_CM2_ACTVE_RW > 0 //count
then
$PNEL_CM2_ACTVE_RW = 0
end

////////////////////////////////////////////////////

008B: 1@ = $PNEL_CM2_ACTVE_RW // (int)
1@ += 1 

//////////////////////////////////////////////////// 

03F0: enable_text_draw 1  
03E3: set_texture_to_be_drawn_antialiased 1   
038D: draw_texture 1@ position 320.0 190.0 size 300.0 180.0 RGBA 255 255 255 255

03F0: enable_text_draw 1 
03E0: draw_text_behind_textures 1
0349: set_text_draw_font 2
03E3: set_texture_to_be_drawn_antialiased 1 
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 500.0 for_centered_text
033F: set_text_draw_letter_size $MAP_NAME_TEXT_SIZE_X $MAP_NAME_TEXT_SIZE_Y 
081C: draw_text_outline 1 RGBA 0 0 0 255 
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end 

008B: 2@ = $PNEL_CM2_ACTVE_RW // (int)

if
2@ == 0
then
033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'GME1505'  // Push
09C1: add_next_text_to_brief_history 0     
text.ShowH('GME1506',5,1)  
end

//////////////////////////////////1 - Fear And Delight (example by Gas-dust Cloud)//////////////////////////////////

if
$PNEL_CM2_ACTVE_RW == 0 
    then    
    if
    0E3E: is_button_just_pressed 0 16
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    COMMUNITY_MISSION_NUM = -10  
    return
    end      
end

if
0E3E: is_button_just_pressed 0 15 
then
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 
03E6: remove_text_box   
00BE: text_clear_all
Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_BACK_SOUND, 0)
Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
$FPS_COUNTER_ENABLED = 1
return
else
jump @SELECT_COMMUNITY_MISSION_EXAMPLE_UNITED_IDLE
end

///////////////////////////////////Выбор мутации///////////////////////////////////

:MUTATION_SELECT

if or
25@ == 1
GAMEMODE_AUTOSELECT == 1
then
jump to @RANDOM_MUTATION
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"
if
0@ == 1
then

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_PARAM"
if or
0@ == 9
0@ == 11
0@ == 10
0@ == 13
0@ == 4
0@ == 8
0@ == 12
    then
    gosub @CONVERT_MUTATION_NUMBER_TO_PANEL_NUMBER
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"
    jump to @MUTATION_SELECT2
    end

if or
0@ == 14
0@ == 15
0@ == 16
0@ == 17
    then
    gosub @CONVERT_MUTATION_NUMBER_TO_PANEL_NUMBER
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG"
    jump to @MUTATION_SELECT3 
    else
    gosub @CONVERT_MUTATION_NUMBER_TO_PANEL_NUMBER
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "MUTATION_MAP_FLAG" 
    end

end     

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME76' 
08D4: $PANEL = create_panel_with_title 'GAME70' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
if
not COOP_ACTIVE_FLAG == 1
then  
08DB: set_panel $PANEL column 0 header 'GAME85' data 'GAME87' 'GAME86' 'GAME166' 'GAME332' 'GAME345' 'GAME333' 'GAME334' 'GAME164' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel $PANEL column 0 header 'GAME85' data 'GAME87' 'GAME86B' 'AME166B' 'AME332B' 'GAME345' 'GAME333' 'GAME334' 'GAME164' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end  
090E: set_panel $PANEL active_row $PANEL5_ACTIVE_ROW

if
UNITED_MAP == 1
then
08D9: set_panel $PANEL row 3 enable 0
end
    
//wait $MENU_BACK_WAIT      

$MUTATION_SELECTED = 0
$MUTATION_ACTIVE = -1            

:MUTATION_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME76' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME76' 
end

08D7: $PANEL5_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////Умирать вчетвером 'GAME87'//////////////////////////////////      
    
if
$PANEL5_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_89',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION0_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 0
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end               
    
////////////////////////////////Последний выживший 'GAME86'//////////////////////////////////      
    
if
$PANEL5_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    not COOP_ACTIVE_FLAG == 1
    then     
    text.ShowH('GMD_90',5,1)
    else
    text.ShowH('GMD90B',5,1)
    end
      
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION1_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 1        
        
        //////////////////////////////////////// 
        $ALLOW_ARMY_CONVOY = 0
        $ALLOW_BANDIT_CONVOY = 0
        $ALLOW_FERMERS_CONVOY = 0
        $ALLOW_SWAT_CONVOY = 0
        
        $ALLOW_RANDOM_SURVIVERS = 0
        if
        COOP_ACTIVE_FLAG == 1
        then
        $SURVIVOR_ALLOW_SPAWN[0] = 1
        $SURVIVOR_ALLOW_SPAWN[1] = 0
        $SURVIVOR_ALLOW_SPAWN[2] = 0
        $SURVIVOR_ALLOW_SPAWN[3] = 0
        $SURVIVOR_ALLOW_SPAWN[4] = 0
        $ALLOW_RANDOM_SURVIVERS = 1
        end
        $ALLOW_RANDOM_SURVIVERS_ON_CARS = 0
        
        $ALLOW_SURVIVERS_CAMP = 0
        $ALLOW_ARMY_CAMPS = 0
        $ALLOW_BANDITS_CAMPS = 0
        
        $ALLOW_TRADERS = 0
        ////////////////////////////////////////
        
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end        
    
////////////////////////////////Один против всех 'GAME166'//////////////////////////////////      
    
if
$PANEL5_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_91',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION2_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 2
        jump to @DIFFUCLITY_HARD_SELECT
        end
    end          
    
////////////////////////////////Новое измерение 'GAME332'//////////////////////////////////              
    
if
$PANEL5_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    not COOP_ACTIVE_FLAG == 1
    then     
    text.ShowH('GMD_92',5,1)
    else
    text.ShowH('GMD92B',5,1)
    end
      
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION3_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 3
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end            
    
////////////////////////////////Хаотичное пекло 'GAME345'//////////////////////////////////          

if
$PANEL5_ACTIVE_ROW == 4 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_97',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION7_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all          
        
        0A8C: write_memory 0x457236 size 4 value 30000 virtual_protect 0 
        0A8C: write_memory 0x457243 size 4 value 30000 virtual_protect 0        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 7
        jump to @DIFFUCLITY_NORMAL_SELECT
        end
    end        

////////////////////////////////Интоксикация 'GAME333'//////////////////////////////////     
    
if
$PANEL5_ACTIVE_ROW == 5 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_98',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then   
        
        :MUTATION6_SELECT                     
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 6
        $DRUNK_MODE_FLAG = 1
        jump to @DIFFUCLITY_NORMAL_SELECT
        end
    end

////////////////////////////////Спец. отряд 'GAME334'//////////////////////////////////             
    
if
$PANEL5_ACTIVE_ROW == 6 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_94',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION5_SELECT
        
        $ALLOW_ZOMBIES = 0   
        $ALLOW_ZOMBIE_HORDES = 0   
        
        $TANK_MUSIC_PLAY = 0
        $WITCH_INSTANT_AGR = 1          
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 5
        jump to @DIFFUCLITY_EASY_SELECT
        end
    end                       

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////                                                               
    
if
$PANEL5_ACTIVE_ROW == 7 
    then
    09C1: add_next_text_to_brief_history 0  
    text.ShowH('GMD_99',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then              
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        jump to @MUTATION_SELECT2
        end
    end                           

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
return
else
jump @MUTATION_SELECT_IDLE
end

jump @MUTATION_SELECT_IDLE

///////////////////////////////////Выбор мутации 2///////////////////////////////////  

:MUTATION_SELECT2
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME76' 
08D4: $PANEL = create_panel_with_title 'GAME70' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME85' data  'GAME347' 'GAME452' 'GAME450' 'GAME163' 'GAME335' 'GAME336' 'GAME162' 'GAME164' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 
090E: set_panel $PANEL active_row $PANEL55_ACTIVE_ROW 
//wait $MENU_BACK_WAIT                  

:MUTATION_SELECT2_IDLE
wait 0

if
8A2A: not  text_box 'GAME76' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME76' 
end

08D7: $PANEL55_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////This is America 'GAME347'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_96',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION9_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        $ALLOW_TANK = 0
        $ALLOW_HUNTER = 0
        $ALLOW_CHARGER = 0
        $ALLOW_WITCH = 0
        
        $ALLOW_ZOMBIE_CLOWN = 0
        $ALLOW_HAZMAT_ZOMBIE = 0
        $ALLOW_ZOMBIE_HORDES = 0
                
        $ALLOW_FATIGUE = 0                
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 9
        $ZOMBIE_ACQ_TO_PEOPLE = 4
        PLAYER_RESIST_MULT = 0.5
        jump to @DIFFUCLITY_NORMAL_SELECT
        end
    end
    
////////////////////////////////Экстремальный побег 'GAME452'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_111',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION11_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 11        
        
        $ALLOW_ARMY_RHINO = 1
        $ALLOW_ARMY_HUNTER = 1
        $ALLOW_BANDITS_HELI = 1
        $ALLOW_FERMERS_HELI = 1
        $ALLOW_POLICE_HELI = 1
        $ALLOW_FERMERS_PLANE = 1
        
        $ARMY_RHINO_SPAWN_MIN = 180
        $ARMY_RHINO_SPAWN_MAX = 210
        $ARMY_HUNTER_SPAWN_MIN = 150
        $ARMY_HUNTER_SPAWN_MAX = 310   
        $ARMY_HYDRA_SPAWN_MIN = 120000
        $ARMY_HYDRA_SPAWN_MAX = 280000   
        $BANDIT_HELI_SPAWN_MIN = 90
        $BANDIT_HELI_SPAWN_MAX = 120    
        $SWAT_HELI_SPAWN_MIN = 90
        $SWAT_HELI_SPAWN_MAX = 120
        $FERMERS_HELI_SPAWN_MIN = 90
        $FERMERS_HELI_SPAWN_MAX = 120
        $FERMERS_PLANE_SPAWN_MIN = 90
        $FERMERS_PLANE_SPAWN_MAX = 120
        
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end           
    
////////////////////////////////Взрывоопасные твари 'GAME450'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_110',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION10_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        $ALLOW_TANK = 0
        $ALLOW_HUNTER = 0
        $ALLOW_CHARGER = 0
        $ALLOW_WITCH = 0
        $EXPLODING_ZOMBIES = 1        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 10
        jump to @DIFFUCLITY_NORMAL_SELECT
        end
    end
    
////////////////////////////////Перелетные птицы 'GAME163'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_115',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION13_SELECT
        
        $ALLOW_ZOMBIES = 0   
        $ALLOW_ZOMBIE_HORDES = 0
        
        $ALLOW_TANK = 0
        $ALLOW_WITCH = 0
        $ALLOW_CHARGER = 0           
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 13
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end         

////////////////////////////////Рукопашная лихорадка 'GAME335'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 4 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_93',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :MUTATION4_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        
        $ALLOW_TANK = 0
        $ALLOW_HUNTER = 0
        $ALLOW_CHARGER = 0
        $ALLOW_WITCH = 0
        $ALLOW_HAZMAT_ZOMBIE = 0
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 4
        CUSTOM_MODE_ONLY_MELEE = 1
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end        

////////////////////////////////Лунная походка 'GAME336'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 5 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_95',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION8_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 8
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end
    
////////////////////////////////ТА-А-А-А-АНК! 'GAME162'//////////////////////////////////             
    
if
$PANEL55_ACTIVE_ROW == 6 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_114',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION12_SELECT
        
        $ALLOW_ZOMBIES = 0   
        $ALLOW_ZOMBIE_HORDES = 0
        
        $ALLOW_HUNTER = 0
        $ALLOW_WITCH = 0
        $ALLOW_CHARGER = 0   
        
        $TANK_MUSIC_PLAY = 0
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 12
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end                              
    
if
$PANEL55_ACTIVE_ROW == 7 
    then
    09C1: add_next_text_to_brief_history 0 
    text.ShowH('GMD_99',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        jump to @MUTATION_SELECT3
        end
    end                                 

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @MUTATION_SELECT
else
jump @MUTATION_SELECT2_IDLE
end

jump @MUTATION_SELECT2_IDLE

///////////////////////////////////Выбор мутации 3///////////////////////////////////

:MUTATION_SELECT3
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME76' 
08D4: $PANEL = create_panel_with_title 'GAME70' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME85' data  'GAME492' 'GME1118' 'GME1120' 'GME1215' 'GAME351' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 
090E: set_panel $PANEL active_row $PANEL555_ACTIVE_ROW 
//wait $MENU_BACK_WAIT                  

:MUTATION_SELECT3_IDLE
wait 0

if
8A2A: not  text_box 'GAME76' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME76' 
end

08D7: $PANEL555_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////HESOYAM 'GAME492'//////////////////////////////////             
    
if
$PANEL555_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_116',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION14_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 14
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end
    
////////////////////////////////Мазохист 'GME1118'//////////////////////////////////             
    
if
$PANEL555_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_167',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION15_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 15
        CUSTOM_MODE_ONE_HIT_KO = 1
        DAMAGE_PERCENTS_SHOW_STYLE = 0
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end
    
////////////////////////////////Уитчвилль 'GME1120'//////////////////////////////////             
    
if
$PANEL555_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_168',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION16_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 16
        
        $ALLOW_TANK = 0
        $ALLOW_HUNTER = 0
        $ALLOW_CHARGER = 0
        
        $ALLOW_ZOMBIES = 0
        $ALLOW_ZOMBIE_CLOWN = 0
        $ALLOW_HAZMAT_ZOMBIE = 0
        
        $ALLOW_ZOMBIE_HORDES = 0                
        
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end
    
////////////////////////////////5 минут в запасе 'GME1215'//////////////////////////////////             
    
if
$PANEL555_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_174',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :MUTATION17_SELECT
            
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                        
        
        $MUTATION_SELECTED = 1
        $MUTATION_ACTIVE = 17                        
        
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
    end    
    
////////////////////////////////Случайный выбор//////////////////////////////////                
    
if
$PANEL555_ACTIVE_ROW == 4  
    then
    09C1: add_next_text_to_brief_history 0 
    text.ShowH('GMD_104',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        
        :RANDOM_MUTATION        
        
        if
        GAMEMODE_AUTOSELECT < 0
        then
        random_int 0@ 0 to 18
        end
        
        /////////////////////////////////////////////
        
        if and
        UNITED_MAP == 1
        GAMEMODE_AUTOSELECT < 0
        then        
        if
        0@ == 3
            then
            jump to @RANDOM_MUTATION             
            end                           
        end
        
        /////////////////////////////////////////////
        
        if or
        0@ == 0
        GAMEMODE_AUTOSELECT_PARAM == 0
        then
        jump to @MUTATION0_SELECT
        end
        
        if or
        0@ == 1
        GAMEMODE_AUTOSELECT_PARAM == 1
        then
        jump to @MUTATION1_SELECT
        end
        
        if or
        0@ == 2
        GAMEMODE_AUTOSELECT_PARAM == 2
        then
        jump to @MUTATION2_SELECT
        end
        
        if or
        0@ == 3
        GAMEMODE_AUTOSELECT_PARAM == 3
        then
        jump to @MUTATION3_SELECT
        end
        
        if or
        0@ == 4
        GAMEMODE_AUTOSELECT_PARAM == 4
        then
        jump to @MUTATION4_SELECT
        end
        
        if or
        0@ == 5
        GAMEMODE_AUTOSELECT_PARAM == 5
        then
        jump to @MUTATION5_SELECT
        end
        
        if or
        0@ == 6
        GAMEMODE_AUTOSELECT_PARAM == 6
        then
        jump to @MUTATION6_SELECT
        end
        
        if or
        0@ == 7
        GAMEMODE_AUTOSELECT_PARAM == 7
        then
        jump to @MUTATION7_SELECT
        end
        
        if or
        0@ == 8
        GAMEMODE_AUTOSELECT_PARAM == 8
        then
        jump to @MUTATION8_SELECT
        end
        
        if or
        0@ == 9
        GAMEMODE_AUTOSELECT_PARAM == 9
        then
        jump to @MUTATION9_SELECT
        end
        
        if or
        0@ == 10
        GAMEMODE_AUTOSELECT_PARAM == 10
        then
        jump to @MUTATION10_SELECT
        end
        
        if or
        0@ == 11
        GAMEMODE_AUTOSELECT_PARAM == 11
        then
        jump to @MUTATION11_SELECT
        end
        
        if or
        0@ == 12
        GAMEMODE_AUTOSELECT_PARAM == 12
        then
        jump to @MUTATION12_SELECT
        end
        
        if or
        0@ == 13
        GAMEMODE_AUTOSELECT_PARAM == 13
        then
        jump to @MUTATION13_SELECT
        end
        
        if or
        0@ == 14
        GAMEMODE_AUTOSELECT_PARAM == 14
        then
        jump to @MUTATION14_SELECT
        end
        
        if or
        0@ == 15
        GAMEMODE_AUTOSELECT_PARAM == 15
        then
        jump to @MUTATION15_SELECT
        end
        
        if or
        0@ == 16
        GAMEMODE_AUTOSELECT_PARAM == 16
        then
        jump to @MUTATION16_SELECT
        end
        
        if or
        0@ == 17
        GAMEMODE_AUTOSELECT_PARAM == 17
        then
        jump to @MUTATION17_SELECT
        end
        
        end
    end                             

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @MUTATION_SELECT2
else
jump @MUTATION_SELECT3_IDLE
end

jump @MUTATION_SELECT3_IDLE

:CONVERT_MUTATION_NUMBER_TO_PANEL_NUMBER

//1-ая страница

if
0@ == 0
then
$PANEL5_ACTIVE_ROW = 0
end

if
0@ == 1
then
$PANEL5_ACTIVE_ROW = 1
end

if
0@ == 2
then
$PANEL5_ACTIVE_ROW = 2
end

if
0@ == 3
then
$PANEL5_ACTIVE_ROW = 3
end

if
0@ == 7
then
$PANEL5_ACTIVE_ROW = 4
end

if
0@ == 6
then
$PANEL5_ACTIVE_ROW = 5
end

if
0@ == 5
then
$PANEL5_ACTIVE_ROW = 6
end

//2-ая страница
if
0@ == 9
then
$PANEL55_ACTIVE_ROW = 0
end

if
0@ == 11
then
$PANEL55_ACTIVE_ROW = 1
end

if
0@ == 10
then
$PANEL55_ACTIVE_ROW = 2
end

if
0@ == 13
then
$PANEL55_ACTIVE_ROW = 3
end

if
0@ == 4
then
$PANEL55_ACTIVE_ROW = 4
end

if
0@ == 8
then
$PANEL55_ACTIVE_ROW = 5
end

if
0@ == 12
then
$PANEL55_ACTIVE_ROW = 6
end

//3-ая страница
if
0@ == 14
then
$PANEL555_ACTIVE_ROW = 0
end

if
0@ == 15
then
$PANEL555_ACTIVE_ROW = 1
end

if
0@ == 16
then
$PANEL555_ACTIVE_ROW = 2
end

if
0@ == 17
then
$PANEL555_ACTIVE_ROW = 3
end

return

///////////////////////////////////Перечитка туториалов///////////////////////////////////

:TUTORIAL_READ_SELECT

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME623' 
08D4: $PANEL = create_panel_with_title 'GAME624' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME625' data 'GAME2B' 'GME497B' 'GAME70B' 'GAME98C' 'GAME12B' 'GAME3B' 'GAME62B' 'GME1275' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'  
090E: set_panel $PANEL active_row $PANEL92_ACTIVE_ROW
    
//wait $MENU_BACK_WAIT                  

:TUTORIAL_READ_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME623' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME623' 
end

08D7: $PANEL92_ACTIVE_ROW = panel $PANEL active_row
    
//////////////////////////////////Туториал побега//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 0
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_2',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 55
        $TUTORIAL_MAX = 115       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end
    
//////////////////////////////////Туториал выживания//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 1
    then
    09C1: add_next_text_to_brief_history 0
    text.ShowH('GMD_108',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 868
        $TUTORIAL_MAX = 908       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end    
    
//////////////////////////////////Туториал мутации//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 2
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_69',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 436
        $TUTORIAL_MAX = 461       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end    
    
//////////////////////////////////Туториал войны фракций//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 3
    then
    09C1: add_next_text_to_brief_history 0 
    text.ShowH('GMD_43',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 544
        $TUTORIAL_MAX = 556       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end
    
//////////////////////////////////Туториал удержания//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 4
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_68',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 216
        $TUTORIAL_MAX = 231       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end
    
//////////////////////////////////Туториал сражения//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 5
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_3',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 651
        $TUTORIAL_MAX = 666       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end
    
//////////////////////////////////Туториал безумия//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 6
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_67',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 326
        $TUTORIAL_MAX = 336       
        gosub @TUTORIAL
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end
    
//////////////////////////////////Всплывающие подсказки//////////////////////////////////        

if        
$PANEL92_ACTIVE_ROW == 7
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_179',5,1)       
    if
    0E3E: is_button_just_pressed 0 16
        then                
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                 
        $TUTORIAL_MIN = 1
        $TUTORIAL_MAX = 53
        5@ = 340957345       
        gosub @TUTORIAL
        5@ = 0
        jump to @TUTORIAL_READ_SELECT                                                      
        end       
    end                                                       

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @OTHER_GAMEMODES_SELECT
else
jump @TUTORIAL_READ_SELECT_IDLE
end

jump @TUTORIAL_READ_SELECT_IDLE

///////////////////////////////////Выбор прочих режимов игры///////////////////////////////////

:OTHER_GAMEMODES_SELECT

if or
25@ == 1
GAMEMODE_AUTOSELECT == 1
then
jump to @CHALLENGE_RANDOM_SELECT
end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME4C' 
08D4: $PANEL = create_panel_with_title 'GAME72' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
08DB: set_panel $PANEL column 0 header 'GAME77' data 'GAME499' 'GAME62' 'GAME897' 'GME1122' 'GME1004' 'GAME878' 'GAME626' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'  
090E: set_panel $PANEL active_row $PANEL51_ACTIVE_ROW

if or
UNITED_MAP == 1
8AE4: not  directory_exists "modloader\ZAOLDSTORYFILES"
then 
08D9: set_panel $PANEL row 5 enable 0
end

OTHER_GAMEMODES_MENU_IN = 1
    
//wait $MENU_BACK_WAIT                  

:OTHER_GAMEMODES_SELECT_IDLE
wait 0

{$INCLUDE Select Gamemode Menu Other Menus.txt}

if
8A2A: not  text_box 'GAME4C' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME4C' 
end

08D7: $PANEL51_ACTIVE_ROW = panel $PANEL active_row

//////////////////////////////////Испытания//////////////////////////////////        

if        
$PANEL51_ACTIVE_ROW == 0
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_128',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        :CHALLENGE_RANDOM_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        gosub @CHALLENGE_SELECT
        
        if
        $CHALLENGE_SELECTED == 1
            then                             
            
            if
            $CHALLENGE_SELECTED_NUMBER == 0
            then
            
            if
            GAMEMODE_AUTOSELECT == -1
            then
            gosub @ZOMBIEGEDDON_XMOD_SELECT_SELECT
            else
            $ZMBG_XMOD_SELECT_SELECTED = 1            
            0AF0: ZOMBIEGEDDON_GAME_TYPE = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "GAMEMODE_AUTOSELECT_PARAM"
            end
            
                if
                $ZMBG_XMOD_SELECT_SELECTED == 0
                then
                jump to @CHALLENGE_RANDOM_SELECT
                end
            end                 
                     
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_CHALLENGE = 1
            
            while 016B:   fading
            wait 0
            end                        
            
            if
            $CHALLENGE_SELECTED_NUMBER == 0
            then
            $ZOMBIE_DERBY_FLAG = 1
            create_thread @DRB_ZOM
            end
            
            if
            $CHALLENGE_SELECTED_NUMBER == 1
            then
            $ALLOW_TRADERS = 0
            $ALLOW_BANDITS_CAMPS = 0
            $ALLOW_ARMY_CAMPS = 0
            $DEFENSE_CHALLENGE_FLAG = 1
            gosub @RANDOM_MODEL  
            gosub @GENERAL
            create_thread @RD_DEF
            end
            
            if
            $CHALLENGE_SELECTED_NUMBER == 2
            then
            gosub @RANDOM_MODEL  
            create_thread @CANLS_ES
            end
            
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return   
            else            
            jump to @OTHER_GAMEMODES_SELECT            
            end
        end       
    end

//////////////////////////////////Безумие//////////////////////////////////        

if        
$PANEL51_ACTIVE_ROW == 1
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_67',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                
        
        :CRAZY_SELECT
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        gosub @CRAZY_MODE_ENEMIES_SELECT
        if
        not $ENEMY_PRESET == -1
            then
        
            :CRAZY_PRE_SELECT
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "TASK_CHECK_SYS_FAILED"
            if
            0@ == 1
            then
            
            $FPS_COUNTER_ENABLED = 0
            
            ////////////////////////////////////
    
            repeat
            wait 0
            text.ShowH('GAME976',100,1)
            
            if
            0E3E: is_button_just_pressed 0 button 11
                then
                0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "TASK_CHECK_SYS_FAILED"
                text.ClearAll()
                break
                end
            
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                text.ClearAll()
                jump to @OTHER_GAMEMODES_SELECT
                end
                
            if
            0AB0:   key_pressed 87
                then
                text.ClearAll()
                $TUTORIAL_MIN = 1000
                $TUTORIAL_MAX = 1008       
                gosub @TUTORIAL
                $FPS_COUNTER_ENABLED = 0
                jump to @CRAZY_PRE_SELECT
                end    
            
            until false
            
            ////////////////////////////////////
            
            end 
            
            if
            $CRAZY_TUTORIAL == 1
            then
            $TUTORIAL_MIN = 326
            $TUTORIAL_MAX = 336       
            gosub @TUTORIAL
            $CRAZY_TUTORIAL = 0        
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "CRAZY_TUTORIAL"            
            end                     
                     
            015D: set_gamespeed 1.0
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_CRAZY = 1
            create_thread @GMD_CRZ
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else
            jump to @OTHER_GAMEMODES_SELECT
            end   
        end       
    end               
    
//////////////////////////////////Редактор миссий//////////////////////////////////    

if        
$PANEL51_ACTIVE_ROW == 2
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_157',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                        
        :ZAME_SELECT
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                           
                 
        015D: set_gamespeed 1.0
        gosub @GAMEMODE_ENTER_SOUND
        fade 0 1000   
        gosub @MUSIC_GAMEMODE_SELECT_OFF
        $GAMEMODE_EDITOR = 1
        create_thread @ZAME_GM
        0629: change_integer_stat 134 to 0
        0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
        return
        
        end              
    end
    
//////////////////////////////////Миссии сообщества//////////////////////////////////    

if        
$PANEL51_ACTIVE_ROW == 3
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_169',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                                  
        jump to @COMMUNITY_MISSIONS_MENU_SELECT
        end              
    end
    
//////////////////////////////////Доп. настройки//////////////////////////////////    

if        
$PANEL51_ACTIVE_ROW == 4
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_164',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                                            
        jump to @ADDITIONAL_SETTINGS_MENU        
        end              
    end
    
//////////////////////////////////Доп. контент//////////////////////////////////    

if        
$PANEL51_ACTIVE_ROW == 5
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_183',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                                            
        jump to @ADDITIONAL_CONTENT_SELECT        
        end              
    end                   
    
//////////////////////////////////Туториалы//////////////////////////////////    

if        
$PANEL51_ACTIVE_ROW == 6
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_136',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                
        jump to @TUTORIAL_READ_SELECT
        end              
    end                                                                   

if
0E3E: is_button_just_pressed 0 15 
then
OTHER_GAMEMODES_MENU_IN = 0
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @SELECT_GAMEMODE
else
jump @OTHER_GAMEMODES_SELECT_IDLE
end

jump @OTHER_GAMEMODES_SELECT_IDLE

///////////////////////////////////Выбор доп. контента///////////////////////////////////

:ADDITIONAL_CONTENT_SELECT

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME879' 
08D4: $PANEL = create_panel_with_title 'GAME878' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
if or
UNITED_MAP == 1
8AE4: not  directory_exists "modloader\ZAOLDSTORYFILES"
then 
08DB: set_panel $PANEL column 0 header 'GAME880' data 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
28@ = -6996699
else
08DB: set_panel $PANEL column 0 header 'GAME880' data 'GAME956' 'AME956B' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end 
090E: set_panel $PANEL active_row $PANEL51S_ACTIVE_ROW
    
//wait $MENU_BACK_WAIT                  

:ADDITIONAL_CONTENT_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME879' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME879' 
end

08D7: $PANEL51S_ACTIVE_ROW = panel $PANEL active_row

//////////////////////////////////История Майка//////////////////////////////////

if and
$PANEL51S_ACTIVE_ROW == 0
not 28@ == -6996699
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_112',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                       
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        if
        MIKE_SGMD_FLAG == 0
        then
        
        $FPS_COUNTER_ENABLED = 0
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                
                
        MIKE_SGMD_FLAG = 1
                
        audiostream.PerformAction($SELECT_MUSIC,PAUSE)
        actor.StorePos(PLAYER_ACTOR,10@,11@,12@)
        13@ = actor.Angle(PLAYER_ACTOR)
                    
        fade 0 250
        wait 250
                    
        $SAVESTATUS = 1
        
        model.Load(3676)
        model.Load(13723)
        model.Load(3678)
        model.Load(4694)
        model.Load(13882)
        model.Load(3754)
        model.Load(4734)
        model.Load(1267)
        model.Load(4660)
        model.Load(4653)
        model.Load(5803)
        model.Load(1283)
        model.Load(1294)
        model.Load(714)
        model.Load(1290)
        mload
                
        actor.PutAtNoOffset(PLAYER_ACTOR,1380.0056, -956.3161, 35.1667)
        actor.Angle(PLAYER_ACTOR) = 298.2439
        actor.LockInCurrentPosition(PLAYER_ACTOR,true)
        Camera.SetPosition(1383.683350, -953.050232, 34.846645,0.0,0.0,0.0)
        Camera.PointAt(1384.532227, -952.529785, 34.939766, 2)
                
        0776: create_objects_in_object_group "mike"
                
        create_thread @REFR_3D
        wait 50
        
        $FPS_COUNTER_ENABLED = 1
                
        fade 1 250
                
        $SELECT_MUSIC_CARL = Audiostream.Load(CLASSIC_MUSIC_0B)
        Audiostream.Volume($SELECT_MUSIC_CARL) = $MUSIC_VOLUME
        Audiostream.Loop($SELECT_MUSIC_CARL, 1)
        Audiostream.PerformAction($SELECT_MUSIC_CARL, PLAY)
        end                                                                                                                
        
        if
        $CHEATS_ON == 1
        then
        jump to @OHAH_MIKEOLD
        end
        
        jump to @MIKE_CONTENT_SELECT                              
        
        :OLDMIKE_DIFF_SELECT
        
        if
        $STORY_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 761
        $TUTORIAL_MAX = 764       
        gosub @TUTORIAL
        $STORY_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "STORY_TUTORIAL"            
        end                        
        
        :OHAH_MIKEOLD
        
        gosub @MIKE_SHIZA_ACCEPT
        
        :OHAH_MIKEOLD222                          
        
        $FPS_COUNTER_ENABLED = 1 
        
        15@ = 1       
    
        $DIFFICULTY_SET = 0
        $DIFFICULTY_SELECTED = 0
        gosub @SURV_DIFFICULTY_SELECT
        if
        $DIFFICULTY_SELECTED == 1
            then
            015D: set_gamespeed 1.0            
            
            if
            MIKE_SGMD_FLAG == 1
            then
            audiostream.PerformAction($SELECT_MUSIC,STOP)
            audiostream.Release($SELECT_MUSIC)
            0084: $SELECT_MUSIC = $SELECT_MUSIC_CARL // (int)
            end
            
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_STORYLINE = 1
            
            MCS_FLAG = 1
            if and
            not MIKE_SHIZA_FLAG == 1
            not CLASSIC_CARMA_MAP >= 1
            then
            $FREEMODE = 1
            else
            
            for 1@ = 12203796 to 12203887    
            0A8C: write_memory 1@ size 1 value 1 virtual_protect 0
            end
            
            end
            
            if and
            CLASSIC_CARMA_MAP < 1
            not MIKE_SHIZA_FLAG == 1
            not CLASSIC_CARMA_MAP >= 1
            then
            gosub @GENERAL
            end
            
            $MIKE_OLD = 1             
            create_thread @ST_MIKE
            0629: change_integer_stat 134 to 0
            0A8C: write_memory 0xB79038 size 2 value 0 virtual_protect 0
            return
            else
            jump to @MIKE_CONTENT_SELECT
            :MIKEOLD_NOTACCEPT
            15@ = 0
            
            if
            MIKE_SGMD_FLAG == 1
            then        
                
            $FPS_COUNTER_ENABLED = 0        
            fade 0 250
            wait 250
                    
            text.RemoveTextBox()
            text.ClearAll()    
                    
            MIKE_SGMD_FLAG = 0
            $SAVESTATUS = 0
                    
            actor.PutAtNoOffset(PLAYER_ACTOR,10@,11@,12@)
            actor.Angle(PLAYER_ACTOR) = 13@
            camera.Restore_WithJumpCut()
            067C: put_camera_on_actor PLAYER_ACTOR offset 0.0 -1.0 0.0 rotation 0.0 0.0 0.0 tilt 0.0 switchstyle 2
            create_thread @REFR_3D
                    
            0777: delete_objects_in_object_group "mike"
                                                
            audiostream.PerformAction($SELECT_MUSIC_CARL,STOP)
            audiostream.Release($SELECT_MUSIC_CARL)
            audiostream.PerformAction($SELECT_MUSIC,RESUME)
            $FPS_COUNTER_ENABLED = 1        
            fade 1 250
                    
            end
            
            jump to @ADDITIONAL_CONTENT_SELECT
            end
        end      
    end
    
//////////////////////////////////История Карла//////////////////////////////////

if and
$PANEL51S_ACTIVE_ROW == 1
not 28@ == -6996699 
    then                
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_145',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        
        if
        $CHEATS_ON == 1
        then
        jump to @2OHAH
        end
        
        if
        CARL_SGMD_FLAG == 0
        then
        
        text.ShowH('GMD_145',2000,1)
        
        CARL_SGMD_FLAG = 1
        
        audiostream.PerformAction($SELECT_MUSIC,PAUSE)
        actor.StorePos(PLAYER_ACTOR,10@,11@,12@)
        13@ = actor.Angle(PLAYER_ACTOR)
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        $FPS_COUNTER_ENABLED = 0    
        fade 0 250
        wait 250
            
        $SAVESTATUS = 1
        
        actor.PutAtNoOffset(PLAYER_ACTOR,2455.0647, -1657.6803, 23.3047)
        actor.LockInCurrentPosition(PLAYER_ACTOR,true)
        Camera.SetPosition(2459.4841, -1658.9724, 13.3047,0.0,0.0,0.0)
        Camera.PointAt(2487.8091, -1667.5007, 13.3437, 2)
        
        0776: create_objects_in_object_group "carl"
        
        create_thread @REFR_3D
        wait 50
        
        fade 1 250
        $FPS_COUNTER_ENABLED = 1
        
        $SELECT_MUSIC_CARL = Audiostream.Load("modloader\ZAOLDSTORYFILES\m2\10.wav")
        Audiostream.Volume($SELECT_MUSIC_CARL) = $MUSIC_VOLUME
        Audiostream.Loop($SELECT_MUSIC_CARL, 1)
        Audiostream.PerformAction($SELECT_MUSIC_CARL, PLAY)
        end        
        
        if
        $STORY2_TUTORIAL == 1
        then
        $TUTORIAL_MIN = 765
        $TUTORIAL_MAX = 768       
        gosub @TUTORIAL
        $STORY2_TUTORIAL = 0        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "STORY2_TUTORIAL"            
        end 
        
        jump to @CARL_CONTENT_SELECT      
    
        :2OHAH
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        05A9: s$TIME_STRING = 'INV215'
        05A9: s$TIME2_STRING = 'INV312'
        05A9: s$WEIGHT_STRING = 'INV188'                                                                      
    
        :2DIFF_SELECT                                  
    
        $FPS_COUNTER_ENABLED = 1 
    
        15@ = 1       

        $DIFFICULTY_SET = 0
        $DIFFICULTY_SELECTED = 0
        gosub @SURV_DIFFICULTY_SELECT
        if
        $DIFFICULTY_SELECTED == 1
            then
            audiostream.PerformAction($SELECT_MUSIC,STOP)
            audiostream.Release($SELECT_MUSIC)
            0084: $SELECT_MUSIC = $SELECT_MUSIC_CARL // (int)
            015D: set_gamespeed 1.0
            $CAMPS_COUNT = 15
            gosub @GAMEMODE_ENTER_SOUND
            fade 0 1000   
            gosub @MUSIC_GAMEMODE_SELECT_OFF
            $GAMEMODE_STORYLINE = 1
            $CARL_STORY = 1
            $FREEMODE = 1
            gosub @GENERAL
            $CAMP_MARKER[14] = Marker.CreateIconWithoutSphere(31, $CAMP_X[14], $CAMP_Y[14], $CAMP_Z[14])             
            create_thread @ST_CARL
            return
            else
            jump to @CARL_CONTENT_SELECT            
            :JSDLC_NOTACCEPT
            15@ = 0
            
            if
            CARL_SGMD_FLAG == 1
            then        
            
            $FPS_COUNTER_ENABLED = 0    
            fade 0 250
            wait 250
            
            text.RemoveTextBox()
            text.ClearAll()    
            
            CARL_SGMD_FLAG = 0
            $SAVESTATUS = 0
            
            actor.PutAtNoOffset(PLAYER_ACTOR,10@,11@,12@)
            actor.Angle(PLAYER_ACTOR) = 13@
            camera.Restore_WithJumpCut()
            067C: put_camera_on_actor PLAYER_ACTOR offset 0.0 -1.0 0.0 rotation 0.0 0.0 0.0 tilt 0.0 switchstyle 2
            create_thread @REFR_3D
            
            0777: delete_objects_in_object_group "carl"
                                        
            audiostream.PerformAction($SELECT_MUSIC_CARL,STOP)
            audiostream.Release($SELECT_MUSIC_CARL)
            audiostream.PerformAction($SELECT_MUSIC,RESUME)        
            fade 1 250
            $FPS_COUNTER_ENABLED = 1
            
            end
            
            15@ = 0
            jump to @ADDITIONAL_CONTENT_SELECT
            end
        end          
    end
    
if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @OTHER_GAMEMODES_SELECT
else
jump @ADDITIONAL_CONTENT_SELECT_IDLE
end    

jump @ADDITIONAL_CONTENT_SELECT_IDLE

///////////////////////////////////История Майка///////////////////////////////////

:MIKE_CONTENT_SELECT

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME240' 
08D4: $PANEL = create_panel_with_title 'AME956C' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
08DB: set_panel $PANEL column 0 header 'GAME246' data 'GME1385' 'GME1386' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
090E: set_panel $PANEL active_row $PANEL51S2_ACTIVE_ROW

:MIKE_CONTENT_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME240' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME240' 
end

08D7: $PANEL51S2_ACTIVE_ROW = panel $PANEL active_row

if
$PANEL51S2_ACTIVE_ROW == 0 
    then                
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_184',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        jump to @OHAH_MIKEOLD
        end
    end
    
if
$PANEL51S2_ACTIVE_ROW == 1 
    then                
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_185',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        $FPS_COUNTER_ENABLED = 0
    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "FS2"  
    
        if
        0@ > 0
        then
        
        0@ -= 1
            
        0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "FS2" 
            
        00BA: show_text_styled GXT "GAME66" time 2500 style 4  // Beefy Baron
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_HORROR01_SOUND, 0)
        Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY) 
        wait 2500
        end       
        
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME   
        jump to @ACHIV_TOTAL_SHOW_START_MIKE
        end
    end    

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @MIKEOLD_NOTACCEPT
else
jump @MIKE_CONTENT_SELECT_IDLE
end    

jump @MIKE_CONTENT_SELECT_IDLE

///////////////////////////////////История Карла///////////////////////////////////

:CARL_CONTENT_SELECT

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME240' 
08D4: $PANEL = create_panel_with_title 'AME956B' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
08DB: set_panel $PANEL column 0 header 'GAME246' data 'GME1385' 'GME1386' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
090E: set_panel $PANEL active_row $PANEL51S3_ACTIVE_ROW

:CARL_CONTENT_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME240' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME240' 
end

08D7: $PANEL51S3_ACTIVE_ROW = panel $PANEL active_row

if
$PANEL51S3_ACTIVE_ROW == 0 
    then                
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_184',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        jump to @2OHAH
        end
    end
    
if
$PANEL51S3_ACTIVE_ROW == 1 
    then                
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_185',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        $FPS_COUNTER_ENABLED = 0
    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "FS2"  
    
        if
        0@ > 0
        then
        
        0@ -= 1
            
        0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "FS2" 
            
        00BA: show_text_styled GXT "GAME66" time 2500 style 4  // Beefy Baron
        0086: $SOUNDS_VOLUME3 = $SOUNDS_VOLUME // (float)
        $SOUNDS_VOLUME3 *= 0.5
        Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME3 
        Audiostream.Loop($MENU_HORROR01_SOUND, 0)
        Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY) 
        wait 2500
        end       
        
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME   
        jump to @ACHIV_TOTAL_SHOW_START_CARL
        end
    end    

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @JSDLC_NOTACCEPT
else
jump @CARL_CONTENT_SELECT_IDLE
end    

jump @CARL_CONTENT_SELECT_IDLE


///////////////////////////////////Меню доп. настроек///////////////////////////////////

:ADDITIONAL_SETTINGS_MENU

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1013' 
08D4: $PANEL = create_panel_with_title 'GME1004' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 2 interactive 1 background 1 alignment 0

if
DAMAGE_PERCENTS_SHOW_STYLE == 2
    then
    0@s = 'GME1005'
    end
if
DAMAGE_PERCENTS_SHOW_STYLE == 1
    then
    0@s = 'GME1006'
    end
if
DAMAGE_PERCENTS_SHOW_STYLE == 0
    then
    0@s = 'GME1007'
    end
    
if
DO_AUTOMOVEHEAD_FLAG == 1
    then
    2@s = 'GME1008'
    end
if
DO_AUTOMOVEHEAD_FLAG == 0
    then
    2@s = 'GME1009'
    end
    
if
AUTOLEVELING_ON_FLAG == 1
    then
    4@s = 'GME1010'
    end
if
AUTOLEVELING_ON_FLAG == 0
    then
    4@s = 'GME1011'
    end
    
if
HEALTH_SHOW_STYLE == 1
    then
    6@s = 'GME1038'
    end
if
HEALTH_SHOW_STYLE == 0
    then
    6@s = 'GME1039'
    end

if
DYNAMIC_CROSS_FLAG == 1
    then
    8@s = 'GME1040'
    end
if
DYNAMIC_CROSS_FLAG == 0
    then
    8@s = 'GME1041'
    end
    
if
COOP_ACTIVE_FLAG == 1
    then
    10@s = 'GME1147'
    end
if
COOP_ACTIVE_FLAG == 0
    then
    10@s = 'GME1148'
    end
    
if
MAKE_1P_CONTROLLER_2P == 1
    then
    12@s = 'GME1149'
    end
if
MAKE_1P_CONTROLLER_2P == 0
    then
    12@s = 'GME1150'
    end
    
if
PLAYSTATION_BUTTONS == 1
    then
    14@s = 'GME1152'
    end
if
PLAYSTATION_BUTTONS == 0
    then
    14@s = 'GME1153'
    end                    
  
08DB: set_panel $PANEL column 0 header 'GME1014' data 0@s 2@s 4@s 6@s 8@s 10@s 12@s 14@s 'GAME164' 'DUMMY' 'DUMMY' 'DUMMY'          
090E: set_panel $PANEL active_row $PANEL51S_ACTIVE_ROW

:ADDITIONAL_SETTINGS_MENU_IDLE
wait 0

if
8A2A: not  text_box 'GME1013' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1013' 
end

08D7: $PANEL51S_ACTIVE_ROW = panel $PANEL active_row

if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 0 
    then    
    DAMAGE_PERCENTS_SHOW_STYLE += 1    
    if
    DAMAGE_PERCENTS_SHOW_STYLE > 2
        then
        DAMAGE_PERCENTS_SHOW_STYLE = 0
        end
    0AF1: write_int DAMAGE_PERCENTS_SHOW_STYLE to_ini_file "saves/ZACM.set" section "SCR" key "DAMAGE_PERCENTS_SHOW_STYLE"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 1 
    then    
    DO_AUTOMOVEHEAD_FLAG += 1    
    if
    DO_AUTOMOVEHEAD_FLAG > 1
        then
        DO_AUTOMOVEHEAD_FLAG = 0        
        0459: end_thread_named 'HED_MOV'            
        else            
        0A92: create_custom_thread "script9.dat"        
        end
    0AF1: write_int DO_AUTOMOVEHEAD_FLAG to_ini_file "saves/ZACM.set" section "SCR" key "DO_AUTOMOVEHEAD_FLAG"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 2 
    then    
    AUTOLEVELING_ON_FLAG += 1    
    if
    AUTOLEVELING_ON_FLAG > 1
        then
        AUTOLEVELING_ON_FLAG = 0
        end
    0AF1: write_int AUTOLEVELING_ON_FLAG to_ini_file "saves/ZACM.set" section "SCR" key "AUTOLEVELING_ON_FLAG"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 3 
    then    
    HEALTH_SHOW_STYLE += 1    
    if
    HEALTH_SHOW_STYLE > 1
        then
        HEALTH_SHOW_STYLE = 0
        end
    0AF1: write_int HEALTH_SHOW_STYLE to_ini_file "saves/ZACM.set" section "SCR" key "HEALTH_SHOW_STYLE"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 4 
    then    
    DYNAMIC_CROSS_FLAG += 1    
    if
    DYNAMIC_CROSS_FLAG > 1
        then
        DYNAMIC_CROSS_FLAG = 0
        end
    0AF1: write_int DYNAMIC_CROSS_FLAG to_ini_file "saves/ZACM.set" section "SCR" key "DYNAMIC_CROSS_FLAG"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 5 
    then    
    COOP_ACTIVE_FLAG += 1    
    if
    COOP_ACTIVE_FLAG > 1
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        COOP_ACTIVE_FLAG = 0
        0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"  // IF and SET
//        0A8C: write_memory 0x060E3DF size 2 value 33807 virtual_protect 0
//        0A8C: write_memory 0x060E857 size 2 value 33807 virtual_protect 0
        0E6A: make_nop 0x0440A1C size 2
        else
        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $FPS_COUNTER_ENABLED = 0
        
        ////////////////////////////////////////////////////////////////////////////////////        
        
        32@ = 0
        
        repeat
        wait 0
        
        1@ = 6000
        0085: 0@ = 32@ // (int)
        0062: 1@ -= 0@  // (int)
        1@ /= 1000
        
        text.Show1Number('GME1403',1@,100,1)                
        
        if
        0E3E: is_button_just_pressed 1 button 12
            then
            text.ClearAll()
            break
            end  
            
        if or
        32@ > 5000
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()
            COOP_ACTIVE_FLAG = 0
            $FPS_COUNTER_ENABLED = 1            
            jump to @ADDITIONAL_SETTINGS_MENU
            end                        
        
        until false
        
        $FPS_COUNTER_ENABLED = 1
        0A8C: write_memory 0x0440A1C size 2 value 2164 virtual_protect 0
        
        ////////////////////////////////////////////////////////////////////////////////////
        
        0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt" //IF and SET
        end
    0AF1: write_int COOP_ACTIVE_FLAG to_ini_file "saves/ZACM.set" section "SCR" key "COOPERATIVE_ON_FLAG"
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 6 
    then    
    MAKE_1P_CONTROLLER_2P += 1    
    if
    MAKE_1P_CONTROLLER_2P > 1
        then
        MAKE_1P_CONTROLLER_2P = 0
        end
    0AF1: write_int MAKE_1P_CONTROLLER_2P to_ini_file "GInputSA.ini" section "GInput" key "MapPadOneToPadTwo"
    0EFE: get_loaded_library "GInputSA.asi" store_to 0@   
    0@ += 0x3AB5A
    0A8C: write_memory 0@ size 1 value MAKE_1P_CONTROLLER_2P virtual_protect 0
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all    
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 7 
    then    
    PLAYSTATION_BUTTONS += 1    
    if
    PLAYSTATION_BUTTONS > 1
        then
        PLAYSTATION_BUTTONS = 0
        end
    0AF1: write_int PLAYSTATION_BUTTONS to_ini_file "GInputSA.ini" section "GInput" key "PlayStationButtons"       
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all    
    text.ShowH('GME1181',3000,1)  
    jump to @ADDITIONAL_SETTINGS_MENU        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S_ACTIVE_ROW == 8
    then
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU2
    end                                

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @OTHER_GAMEMODES_SELECT
else
jump @ADDITIONAL_SETTINGS_MENU_IDLE
end

jump @ADDITIONAL_SETTINGS_MENU_IDLE 

///////////////////////////////////Меню доп. настроек 2///////////////////////////////////

:ADDITIONAL_SETTINGS_MENU2

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1013' 
08D4: $PANEL = create_panel_with_title 'GME1004' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 2 interactive 1 background 1 alignment 0

//if and
//BLOOD_DROPS_ON == 1
//RAIN_DROPS_ON == 0
//then
//RAIN_DROPS_ON = 0
//BLOOD_DROPS_ON = 0
//0AF1: write_int BLOOD_DROPS_ON to_ini_file "saves/ZACM.set" section "SCR" key "BLOOD_DROPS_ON"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_Andreas.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_Andreas_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_III.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_III_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_VC.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_VC_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_VCS.ini" section "SkyGfx" key "neoBloodDrops"
//0AF1: write_int 0 to_ini_file "scripts/skygfx1_VCS_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//end

if
FRIENDLY_FIRE_ON == 1
    then
    0@s = 'GME1157'
    end
if
FRIENDLY_FIRE_ON == 0
    then
    0@s = 'GME1158'
    end
    
if
SNIPER_OTHER_AIM == 1
    then
    2@s = 'GME1331'
    end
if
SNIPER_OTHER_AIM == 0
    then
    2@s = 'GME1332'
    if
    COOP_ACTIVE_FLAG == 0
        then
        0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"  // IF and SET
        end
    end    
    
//if
//RAIN_DROPS_ON == 1
//    then
//    2@s = 'GME1220'
//    end
//if
//RAIN_DROPS_ON == 0
//    then
//    2@s = 'GME1221'
//    end
//    
//if
//RAIN_DROPS_ON == 1
//    then
//    4@s = 'GME1222'
//    end
//if
//BLOOD_DROPS_ON == 0
//    then
//    4@s = 'GME1223'
//    end

if
VIBRATION_ON == 1
    then
    4@s = 'GME1418'
    end
if
VIBRATION_ON == 0
    then
    4@s = 'GME1419'
    end
    
if
SHOW_HINTS_FLAG == 1
    then
    6@s = 'GME1494'
    end
if
SHOW_HINTS_FLAG == 0
    then
    6@s = 'GME1495'
    end
    
if
HYBRID_CONTORLS == 1
    then
    8@s = 'GME1564'
    end
if or
HYBRID_CONTORLS == 0
UNITED_MAP == 0
    then
    8@s = 'GME1565'
    end
    
if
AIM_FOLLOWS_CAM == 1
    then
    10@s = 'GME1567'
    end
if
AIM_FOLLOWS_CAM == 0
    then
    10@s = 'GME1568'
    end
    
if
ENGLISH_MEASURMENTS == 1
    then
    12@s = 'GME1570'
    end
if
ENGLISH_MEASURMENTS == 0
    then
    12@s = 'GME1571'
    end        
    
if
UNITED_MAP == 0
then
08D9: set_panel $PANEL row 4 enable 0
end                             
  
08DB: set_panel $PANEL column 0 header 'GME1014' data 0@s 2@s 4@s 6@s 8@s 10@s 12@s 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'          
090E: set_panel $PANEL active_row $PANEL51S2_ACTIVE_ROW

:ADDITIONAL_SETTINGS_MENU2_IDLE
wait 0

if
8A2A: not  text_box 'GME1013' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1013' 
end

08D7: $PANEL51S2_ACTIVE_ROW = panel $PANEL active_row

if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 0 
    then    
    FRIENDLY_FIRE_ON += 1    
    if
    FRIENDLY_FIRE_ON > 1
        then
        FRIENDLY_FIRE_ON = 0
//        0E6A: make_nop 0x04AD4A8 size 6
//        0E6A: make_nop 0x04AD4B1 size 6
        else
        //Регулируем нужно ли дамажить союзных педов от взрыва гранаты (хуево работает на "ничейные гранаты", встроил шайтан штуку в систему доп. урона от взрывов)
//        0A8C: write_memory 0x04AD4A8 size 4 value 9667599 virtual_protect 1
//        0A8C: write_memory 0x04AD4AC size 2 value 0 virtual_protect 1
//        0A8C: write_memory 0x04AD4B1 size 4 value 9077775 virtual_protect 1
//        0A8C: write_memory 0x04AD4B5 size 2 value 0 virtual_protect 1
        end
    0AF1: write_int FRIENDLY_FIRE_ON to_ini_file "saves/ZACM.set" section "SCR" key "FRIENDLY_FIRE_ON"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 1 
    then    
    SNIPER_OTHER_AIM += 1    
    if
    SNIPER_OTHER_AIM > 1
        then
        SNIPER_OTHER_AIM = 0
        end
    0AF1: write_int SNIPER_OTHER_AIM to_ini_file "saves/ZACM.set" section "SCR" key "SNIPER_OTHER_AIM"
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end 
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 2 
    then    
    VIBRATION_ON += 1    
    if
    VIBRATION_ON > 1
        then
        VIBRATION_ON = 0
        else
        015B: shake_player_controller 0 time 500 intensity 155
        end
    0AF1: write_int VIBRATION_ON to_ini_file "GInputSA.ini" section "GInput" key "Vibration"        
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all
    text.ShowH('GME1181',3000,1)    
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 3 
    then    
    SHOW_HINTS_FLAG += 1    
    if
    SHOW_HINTS_FLAG > 1
        then
        SHOW_HINTS_FLAG = 0
        end
    0AF1: write_int SHOW_HINTS_FLAG to_ini_file "saves/ZACM.set" section "SCR" key "SHOW_HINTS_FLAG"        
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all  
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 4 
    then    
    HYBRID_CONTORLS += 1    
    if
    HYBRID_CONTORLS > 1
        then
        HYBRID_CONTORLS = 0
        end
    0AF1: write_int HYBRID_CONTORLS to_ini_file "saves/ZACM.set" section "SCR" key "HYBRID_CONTORLS"        
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all  
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 5 
    then    
    AIM_FOLLOWS_CAM += 1    
    if
    AIM_FOLLOWS_CAM > 1
        then
        AIM_FOLLOWS_CAM = 0
        end
    0AF1: write_int AIM_FOLLOWS_CAM to_ini_file "saves/ZACM.set" section "SCR" key "AIM_FOLLOWS_CAM"        
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all  
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end
    
if and
0E3E: is_button_just_pressed 0 16
$PANEL51S2_ACTIVE_ROW == 6 
    then    
    ENGLISH_MEASURMENTS += 1    
    if
    ENGLISH_MEASURMENTS > 1
        then
        ENGLISH_MEASURMENTS = 0
        end
    0AF1: write_int ENGLISH_MEASURMENTS to_ini_file "saves/ZACM.set" section "SCR" key "ENGLISH_MEASURMENTS"        
    03E6: remove_text_box 
    08DA: remove_panel $PANEL  
    00BE: text_clear_all  
    jump to @ADDITIONAL_SETTINGS_MENU2        
    end                       
    
//if and
//0E3E: is_button_just_pressed 0 16
//$PANEL51S2_ACTIVE_ROW == 1 
//    then        
//    RAIN_DROPS_ON += 1    
//    if
//    RAIN_DROPS_ON > 1
//        then
//        RAIN_DROPS_ON = 0
//        0AF1: write_int BLOOD_DROPS_ON to_ini_file "saves/ZACM.set" section "SCR" key "BLOOD_DROPS_ON"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_Andreas.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_Andreas_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_III.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_III_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_VC.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_VC_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_VCS.ini" section "SkyGfx" key "neoBloodDrops"
//        0AF1: write_int 0 to_ini_file "scripts/skygfx1_VCS_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//        end
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "saves/ZACM.set" section "SCR" key "RAIN_DROPS_ON"    
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_Andreas.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_Andreas_fxoff.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_III.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_III_fxoff.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_VC.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_VC_fxoff.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_VCS.ini" section "SkyGfx" key "neoWaterDrops"
//    0AF1: write_int RAIN_DROPS_ON to_ini_file "scripts/skygfx1_VCS_fxoff.ini" section "SkyGfx" key "neoWaterDrops"
//    03E6: remove_text_box 
//    08DA: remove_panel $PANEL  
//    00BE: text_clear_all
//    text.ShowH('GME1224',2000,1)
//    jump to @ADDITIONAL_SETTINGS_MENU2        
//    end
//    
//if and
//0E3E: is_button_just_pressed 0 16
//$PANEL51S2_ACTIVE_ROW == 2 
//    then        
//    BLOOD_DROPS_ON += 1    
//    if
//    BLOOD_DROPS_ON > 1
//        then
//        BLOOD_DROPS_ON = 0
//        end
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "saves/ZACM.set" section "SCR" key "BLOOD_DROPS_ON"    
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_Andreas.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_Andreas_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_III.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_III_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_VC.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_VC_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_VCS.ini" section "SkyGfx" key "neoBloodDrops"
//    0AF1: write_int BLOOD_DROPS_ON to_ini_file "scripts/skygfx1_VCS_fxoff.ini" section "SkyGfx" key "neoBloodDrops"
//    03E6: remove_text_box 
//    08DA: remove_panel $PANEL  
//    00BE: text_clear_all
//    text.ShowH('GME1224',2000,1)
//    jump to @ADDITIONAL_SETTINGS_MENU2        
//    end                        

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
jump to @ADDITIONAL_SETTINGS_MENU
else
jump @ADDITIONAL_SETTINGS_MENU2_IDLE
end

jump @ADDITIONAL_SETTINGS_MENU2_IDLE

///////////////////////////////////Выбор противников в безумии///////////////////////////////////

:CRAZY_MODE_ENEMIES_SELECT

if
25@ == 1
then
random_int $ENEMY_PRESET 0 7

if
$ENEMY_PRESET == 0
then
jump to @CRAZY_ENEMIES1_SELECT
end

if
$ENEMY_PRESET == 1
then
jump to @CRAZY_ENEMIES2_SELECT
end

if
$ENEMY_PRESET == 2
then
jump to @CRAZY_ENEMIES3_SELECT
end

if
$ENEMY_PRESET == 3
then
jump to @CRAZY_ENEMIES4_SELECT
end

if
$ENEMY_PRESET == 4
then
jump to @CRAZY_ENEMIES5_SELECT
end

if
$ENEMY_PRESET == 5
then
jump to @CRAZY_ENEMIES6_SELECT
end

if
$ENEMY_PRESET == 6
then
jump to @CRAZY_ENEMIES7_SELECT
end

end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME78' 
08D4: $PANEL = create_panel_with_title 'GAME161' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
08DB: set_panel $PANEL column 0 header 'GAME74' data 'GAME100' 'AME1991' 'GAME117' 'GAME118' 'GAME119' 'AME119B' 'AME119C' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
090E: set_panel $PANEL active_row $PANEL51S_ACTIVE_ROW
$ENEMY_PRESET = -1
    
//wait $MENU_BACK_WAIT                  

:CRAZY_MODE_ENEMIES_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME78' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME78' 
end

08D7: $PANEL51S_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////Танки 'GAME100'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_14',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES1_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 0
        return
        end
    end
    
////////////////////////////////Oxoтники 'AME1991'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_15',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES2_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 1
        return
        end
    end
    
////////////////////////////////Ведьмы 'GAME117'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_16',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES3_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 2
        return
        end
    end
    
////////////////////////////////Громилы 'GAME118'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_17',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES4_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 3
        return
        end
    end
    
////////////////////////////////Микс 1 (танки и громилы) 'GAME119'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 4 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_18',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES5_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 4
        return
        end
    end
    
////////////////////////////////Микс 2 (охотники и ведьмы) 'AME119B'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 5 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_19',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES6_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 5
        return
        end
    end
    
////////////////////////////////Все разом 'AME119C'//////////////////////////////////      
    
if
$PANEL51S_ACTIVE_ROW == 6 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_20',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CRAZY_ENEMIES7_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $ENEMY_PRESET = 6
        return
        end
    end                        

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
return
else
jump @CRAZY_MODE_ENEMIES_SELECT_IDLE
end

jump @CRAZY_MODE_ENEMIES_SELECT_IDLE

///////////////////////////////////Выбор испытания///////////////////////////////////

:CHALLENGE_SELECT

if or
25@ == 1
GAMEMODE_AUTOSELECT == 1
then
jump to @RANDOM_CHALLENGE
end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME521' 
08D4: $PANEL = create_panel_with_title 'GAME522' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
if
UNITED_MAP == 0
then  
08DB: set_panel $PANEL column 0 header 'GAME523' data 'GAME520' 'GAME701' 'GAME829' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel $PANEL column 0 header 'GAME523' data 'GAME520' 'GAME701' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end  
090E: set_panel $PANEL active_row $PANEL5D_ACTIVE_ROW

if
UNITED_MAP == 1
then
08D9: set_panel $PANEL row 2 enable 0
end
    
//wait $MENU_BACK_WAIT

$CHALLENGE_SELECTED = -1
$CHALLENGE_SELECTED_NUMBER = -1                  

:CHALLENGE_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME521' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME521' 
end

08D7: $PANEL5D_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////Зомбигеддон 'GAME520'//////////////////////////////////      
    
if
$PANEL5D_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_127',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CHALLENGE1_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $CHALLENGE_SELECTED_NUMBER = 0
        $CHALLENGE_SELECTED = 1        
        jump to @DIFFUCLITY_NORMAL_SELECT
        return
        end
    end
    
////////////////////////////////Оборона 'GAME701'//////////////////////////////////      
    
if
$PANEL5D_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_138',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CHALLENGE2_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $CHALLENGE_SELECTED_NUMBER = 1
        $CHALLENGE_SELECTED = 1
        random_int $MAP_SELECTED_NUMBER 0 14
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        end
    end
    
////////////////////////////////Побег из преисподней 'GAME829'//////////////////////////////////      
    
if
$PANEL5D_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_151',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :CHALLENGE3_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $CHALLENGE_SELECTED_NUMBER = 2
        $CHALLENGE_SELECTED = 1
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        end
    end                                                                                          
    
//if
//$PANEL5D_ACTIVE_ROW == 7 
//    then  
//    text.ShowH('GMD_99',5,1)  
//    if
//    0E3E: is_button_just_pressed 0 16
//        then              
//        03E6: remove_text_box 
//        08DA: remove_panel $PANEL  
//        00BE: text_clear_all
//        jump to @CHALLENGE_SELECT2
//        end
//    end                           

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
return
else
jump @CHALLENGE_SELECT_IDLE
end

jump @CHALLENGE_SELECT_IDLE

:RANDOM_CHALLENGE        

/////////////////////////////////////////////

if and
UNITED_MAP == 0
not GAMEMODE_AUTOSELECT_NUMBER > 7
then        
random_int 0@ 0 to 3
else

if
not GAMEMODE_AUTOSELECT_NUMBER > 7
then
jump to @CHALLENGE1_SELECT
end

end

/////////////////////////////////////////////                
        
if or
0@ == 0
GAMEMODE_AUTOSELECT_NUMBER == 8
then
jump to @CHALLENGE1_SELECT
end
        
if or
0@ == 1
GAMEMODE_AUTOSELECT_NUMBER == 10
then
jump to @CHALLENGE2_SELECT
end

if or
0@ == 2
GAMEMODE_AUTOSELECT_NUMBER == 11
then
jump to @CHALLENGE3_SELECT
end

jump @CHALLENGE_SELECT_IDLE

///////////////////////////////////Выбор режима зомбигеддона///////////////////////////////////

:ZOMBIEGEDDON_XMOD_SELECT_SELECT

if or
25@ == 1
GAMEMODE_AUTOSELECT == 1
then
jump to @RANDOM_ZOMBIEGEDDON_XMOD_SELECT
end

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME737' 
08D4: $PANEL = create_panel_with_title 'GAME735' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0

if
ZOMBEGEDDON_TOURNAMENT == 0
then
06D2: 0@s = "GAME884" // @v = string
else
06D2: 0@s = "GAME885" // @v = string
08D9: set_panel $PANEL row 4 enable 0
08D9: set_panel $PANEL row 5 enable 0
end

if
0AF0: 4@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"
then
gosub @ZOMBIEGEDDON_XMOD_TOURNAMENT_MAP_NUM_CHECK
if
003B:  2@ == 3@  // (int)
    then
    06D2: 2@s = "GME1333" // @v = string 
    else
    06D2: 2@s = "DUMMY" // @v = string
    end
else
06D2: 2@s = "DUMMY" // @v = string
end

0AF0: 4@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"
if or
CLASSIC_CARMA_MAP == 0
4@ == 1
    then  
    08DB: set_panel $PANEL column 0 header 'GAME736' data 'GAME731' 'GAME732' 'GAME733' 'GAME734' 'GAME813' 'GAME861' 0@s 'GAME969' 'GAME352' 2@s 'DUMMY' 'DUMMY'  
    end

if and
CLASSIC_CARMA_MAP == 1
not 4@ == 1
    then  
    if
    0AAB:   file_exists "modloader\ZOMBIEGEDDON AC ADDON\models\gta_AC.img"
        then
        08DB: set_panel $PANEL column 0 header 'GAME736' data 'GAME731' 'GAME732' 'GAME733' 'GAME734' 'GAME813' 'GAME861' 0@s 'GAME969' 'GAME352' 'CRM69' 'DUMMY' 'DUMMY'
        5@ = 1
        else
        08DB: set_panel $PANEL column 0 header 'GAME736' data 'GAME731' 'GAME732' 'GAME733' 'GAME734' 'GAME813' 'GAME861' 0@s 'GAME969' 'GAME352' 'DUMMY' 'DUMMY' 'DUMMY'
        5@ = 0
        end     
    end

if and
CLASSIC_CARMA_MAP == 2
not 4@ == 1
    then  
    08DB: set_panel $PANEL column 0 header 'GAME736' data 'GAME731' 'GAME732' 'GAME733' 'GAME734' 'GAME813' 'GAME861' 0@s 'GAME969' 'GAME352' 'CRM70' 'DUMMY' 'DUMMY'
    5@ = 1  
    end

090E: set_panel $PANEL active_row $PANEL5C_ACTIVE_ROW
    
//wait $MENU_BACK_WAIT

$ZMBG_XMOD_SELECT_SELECTED = 0
ZOMBIEGEDDON_GAME_TYPE = -1                  

:ZOMBIEGEDDON_XMOD_SELECT_SELECT_IDLE
wait 0

if
CLASSIC_CARMA_MAP >= 1
    then
    if
    00E1:   player 1 pressed_key 12
        then
        if
        COOP_ACTIVE_FLAG == 0
            then
            09C1: add_next_text_to_brief_history 0     
            text.ShowH('CRM_COP',2000,1)
            COOP_ACTIVE_FLAG = 1
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "COOPERATIVE_ON_FLAG"
            wait 2000
            else
            09C1: add_next_text_to_brief_history 0     
            text.ShowH('CRM_CO2',2000,1)
            COOP_ACTIVE_FLAG = 0
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "COOPERATIVE_ON_FLAG"
            wait 2000
            end
        end
    end

if
8A2A: not  text_box 'GAME737' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME737' 
end

08D7: $PANEL5C_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////Classic 'GAME731'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_140',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :ZOMBIEGEDDON_XMOD_SELECT1_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        ZOMBIEGEDDON_GAME_TYPE = 0
        $ZMBG_XMOD_SELECT_SELECTED = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        ZOMBEGEDDON_TOURNAMENT == 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    end
    
////////////////////////////////Classic+ 'GAME732'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_141',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :ZOMBIEGEDDON_XMOD_SELECT2_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        ZOMBIEGEDDON_GAME_TYPE = 1
        $ZMBG_XMOD_SELECT_SELECTED = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        ZOMBEGEDDON_TOURNAMENT == 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    end
    
////////////////////////////////Checkpoint Rush 'GAME733'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_142',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :ZOMBIEGEDDON_XMOD_SELECT3_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        ZOMBIEGEDDON_GAME_TYPE = 2
        $ZMBG_XMOD_SELECT_SELECTED = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        ZOMBEGEDDON_TOURNAMENT == 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    end
    
////////////////////////////////Zombie Rush 'GAME734'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_143',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :ZOMBIEGEDDON_XMOD_SELECT4_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        ZOMBIEGEDDON_GAME_TYPE = 3
        $ZMBG_XMOD_SELECT_SELECTED = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        ZOMBEGEDDON_TOURNAMENT == 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    end
    
////////////////////////////////Classic+ Spectate 'GAME813'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 4 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_148',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :ZOMBIEGEDDON_XMOD_SELECT5_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        ZOMBIEGEDDON_GAME_TYPE = 1
        $ZMBG_XMOD_SELECT_SELECTED = 1
        $SPECTATING_FLAG = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    end
    
////////////////////////////////CP. Rush Spectate 'GAME861'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 5 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_152',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then            
        :ZOMBIEGEDDON_XMOD_SELECT6_SELECT        
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        ZOMBIEGEDDON_GAME_TYPE = 2
        $ZMBG_XMOD_SELECT_SELECTED = 1
        $SPECTATING_FLAG = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    end
    
////////////////////////////////Режим турнира 'GAME861'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 6 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_156',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        if
        ZOMBEGEDDON_TOURNAMENT == 0
        then
        
        if
        CLASSIC_CARMA_MAP < 1
        then
        $FPS_COUNTER_ENABLED = 0        
        gosub @ZOMBIEGEDDON_XMOD_TOURNAMENT_GENERATE
        $FPS_COUNTER_ENABLED = 1
        if
        ZOMBEGEDDON_TOURNAMENT == 1
            then
            //ass
            else
            jump to @ZOMBIEGEDDON_XMOD_SELECT_SELECT
            end
        else
        $FPS_COUNTER_ENABLED = 0
        gosub @ZOMBIEGEDDON_XMOD_TOURNAMENT_GENERATE_CLASSIC
        $FPS_COUNTER_ENABLED = 1
        if
        ZOMBEGEDDON_TOURNAMENT == 1
            then
            //ass
            else
            jump to @ZOMBIEGEDDON_XMOD_SELECT_SELECT
            end
        end                
        
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "PLAYED_TIME" key "DERBY_SECONDS"
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "PLAYED_TIME" key "DERBY_MINUTES"
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "PLAYED_TIME" key "DERBY_HOURS"
        
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "GLOB_STATS" key "DERBY_CREDITS"
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "GLOB_STATS" key "DERBY_TIME_BONUS"
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "GLOB_STATS" key "OPPONENTS_WRECKED_BY_PLAYER"
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "GLOB_STATS" key "DERBY_KILLED_PLAYER"
        
        else
        ZOMBEGEDDON_TOURNAMENT = 0
        0B00: delete_file "data\derby_Tournament.ini"  // IF and SET
        end                
        
        jump to @ZOMBIEGEDDON_XMOD_SELECT_SELECT
        
        end
    end
    
////////////////////////////////Просмотр повторов 'GAME969'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 7 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_160',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        
        0@ = 0
        gosub @ZOMBIEGEDDON_REPLAY_SELECT
        if
        0@ == 1
            then           
            ZOMBIEGEDDON_GAME_TYPE = 2
            CARMA_REPLAY_FLAG = 1
            $ZMBG_XMOD_SELECT_SELECTED = 1                
            $SPECTATING_FLAG = 1            
            jump to @ZOMBIEGEDDON_XMOD_SELECT3_SELECT
            else
            jump to @ZOMBIEGEDDON_XMOD_SELECT_SELECT
            end
                
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        end
    end
    
////////////////////////////////Случайный выбор 'GAME352'//////////////////////////////////      
    
if
$PANEL5C_ACTIVE_ROW == 8 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_107',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        SELECT_RANDOM_MAP_AFTER_SELECT_GAMEMODE = 1        
        jump to @RANDOM_ZOMBIEGEDDON_XMOD_SELECT
        end
    end
    
////////////////////////////////Продолжить турнир 'GME1333'//////////////////////////////////      
    
if and
$PANEL5C_ACTIVE_ROW == 9 
4@ == 1
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_182',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then                    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        0AF0: ZOMBIEGEDDON_GAME_TYPE = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "MODE"
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_START"
        0AF1: write_int ZOMBIEGEDDON_GAME_TYPE to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_MODE"
        0AF1: write_int -1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_SPECTATE"
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "CARMAGEDDON_TOURNAMENT"
        0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"
        0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"
        $ZMBG_XMOD_SELECT_SELECTED = 1
        ZOMBEGEDDON_TOURNAMENT = 1
        
        if or
        CLASSIC_CARMA_MAP < 1
        ZOMBEGEDDON_TOURNAMENT == 1
        CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        else
        jump to @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT
        end
        
        end
    else    
    if and
    5@ == 1
    $PANEL5C_ACTIVE_ROW == 9 
        then    
        if
        CLASSIC_CARMA_MAP == 1
            then
            09C1: add_next_text_to_brief_history 0     
            text.ShowH('GMD_187',5,1)  
            if
            0E3E: is_button_just_pressed 0 16
                then
                0AF1: write_int 2 to_ini_file "config.ini" section "LAUNCHER" key "CLASSIC_CARMA"
                0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "MODLOADER GTC FILES"
                0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZOMBIEGEDDON AC ADDON" 
                0AA2: 0@ = load_library "kernel32.dll" // IF and SET
                0AA4: 1@ = get_proc_address "ExitProcess" library 0@ // IF and SET
                0AA5: call 1@ num_params 1 pop 0 0                   
                end
            end
        if
        CLASSIC_CARMA_MAP == 2
            then
            09C1: add_next_text_to_brief_history 0     
            text.ShowH('GMD_188',5,1)  
            if
            0E3E: is_button_just_pressed 0 16
                then 
                0AF1: write_int 1 to_ini_file "config.ini" section "LAUNCHER" key "CLASSIC_CARMA"
                0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "MODLOADER GTC FILES"
                0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZOMBIEGEDDON AC ADDON" 
                0AA2: 0@ = load_library "kernel32.dll" // IF and SET
                0AA4: 1@ = get_proc_address "ExitProcess" library 0@ // IF and SET
                0AA5: call 1@ num_params 1 pop 0 0                  
                end
            end        
        end                
    end                                                                                                                                                     

if and
0E3E: is_button_just_pressed 0 15
ZOMBEGEDDON_TOURNAMENT == 0
CLASSIC_CARMA_MAP < 1 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
return
else
jump @ZOMBIEGEDDON_XMOD_SELECT_SELECT_IDLE
end

jump @ZOMBIEGEDDON_XMOD_SELECT_SELECT_IDLE

///////////////////////////////////Выбор набора карт классического зомбигеддона///////////////////////////////////

:ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT

if or
CARMA_REPLAY_FLAG == 1
GAMEMODE_AUTOSELECT == 1
then
return
end

if
SELECT_RANDOM_MAP_AFTER_SELECT_GAMEMODE == 1
then
random_int CARMA_GLOB_MAP_NABOR 0 3

if
CARMA_GLOB_MAP_NABOR == 0
then
jump to @CARMA_MAP_GLOB_NABOR1_SELECT
end

if
CARMA_GLOB_MAP_NABOR == 1
then
jump to @CARMA_MAP_GLOB_NABOR2_SELECT
end

if
CARMA_GLOB_MAP_NABOR == 2
then
jump to @CARMA_MAP_GLOB_NABOR3_SELECT
end

end

$FPS_COUNTER_ENABLED = 0
0391: release_textures     
0390: load_txd_dictionary 'title'
038F: load_texture "carmatitle" as 1
038F: load_texture "carmatitl2" as 2 
038F: load_texture "carmatitl3" as 3
$MAP_NAME_TEXT_X = 320.0
$MAP_NAME_TEXT_Y = 80.0
$MAP_NAME_TEXT_SIZE_X = 0.4
$MAP_NAME_TEXT_SIZE_Y = 1.3  

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME990' 
//08D4: $PANEL = create_panel_with_title 'GAME986' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0  
//08DB: set_panel $PANEL column 0 header 'GAME985' data 'GAME987' 'GAME988' 'GAME989' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'  
//090E: set_panel $PANEL active_row $PANEL4_ACTIVE_ROW

CARMA_GLOB_MAP_NABOR = -1
    
//wait $MENU_BACK_WAIT               

:ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME990' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME990' 
end

//08D7: $PANEL4_ACTIVE_ROW = panel $PANEL active_row

////////////////////////////////////////////////////

00E2: get_player 0 key 1 state_to 0@
if and
00E1:   player 0 pressed_key 9
0A4B:   controls_set_to_joystick
    then
    0@ = 1
    end    

if and
0@ > 0
33@ > 100
then
33@ = 0
$PANEL4_ACTIVE_ROW -= 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
00E1:   player 0 pressed_key 8
0A4B:   controls_set_to_joystick
    then
    0@ = -1
    end

if and
0@ < 0
33@ > 100
then
33@ = 0
$PANEL4_ACTIVE_ROW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

////////////////////////////////////////////////////

if
UNITED_MAP == 0
then

if
$PANEL4_ACTIVE_ROW < 0
then
$PANEL4_ACTIVE_ROW = 2
end

if
$PANEL4_ACTIVE_ROW > 2
then
$PANEL4_ACTIVE_ROW = 0
end

end

////////////////////////////////////////////////////

008B: 1@ = $PANEL4_ACTIVE_ROW // (int)
1@ += 1
03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1 
038D: draw_texture 1@ position 320.0 200.0 size 300.0 180.0 RGBA 255 255 255 255

03F0: enable_text_draw 1 
03E0: draw_text_behind_textures 1
0349: set_text_draw_font 2
03E3: set_texture_to_be_drawn_antialiased 1 
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 300.0 for_centered_text
033F: set_text_draw_letter_size $MAP_NAME_TEXT_SIZE_X $MAP_NAME_TEXT_SIZE_Y 
081C: draw_text_outline 1 RGBA 0 0 0 255 
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end   

////////////////////////////////Carmageddon 1 'GAME987'//////////////////////////////////      
    
if
$PANEL4_ACTIVE_ROW == 0 
    then              
    033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'CRM73'  // Push
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_161',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :CARMA_MAP_GLOB_NABOR1_SELECT                    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        CARMA_GLOB_MAP_NABOR = 0        
        jump to @DIFFUCLITY_NORMAL_SELECT
        return
        end
    end
    
////////////////////////////////Carmageddon Splat Pack 'GAME987'//////////////////////////////////      
    
if
$PANEL4_ACTIVE_ROW == 1 
    then                   
    033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'CRM74'  // Push
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_162',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :CARMA_MAP_GLOB_NABOR2_SELECT                   
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        CARMA_GLOB_MAP_NABOR = 1        
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        end
    end
    
////////////////////////////////Carmageddon 2 'GAME989'//////////////////////////////////      
    
if
$PANEL4_ACTIVE_ROW == 2 
    then             
    033E: set_draw_text_position $MAP_NAME_TEXT_X $MAP_NAME_TEXT_Y GXT 'CRM75'  // Push
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_163',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :CARMA_MAP_GLOB_NABOR3_SELECT                  
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        CARMA_GLOB_MAP_NABOR = 2        
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        return
        end
    end                                                                                                                          

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
//08DA: remove_panel $PANEL  
00BE: text_clear_all
wait 0
0391: release_textures
$FPS_COUNTER_ENABLED = 1
jump to @ZOMBIEGEDDON_XMOD_SELECT_SELECT
else
jump @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT_IDLE
end

jump @ZOMBIEGEDDON_MAP_NABOR_SELECT_SELECT_IDLE

///////////////////////////////////Выбор повтора зомбигеддона///////////////////////////////////

:ZOMBIEGEDDON_REPLAY_SELECT

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME970' 
08D4: $PANEL = create_panel_with_title 'GAME971' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0
gosub @DERBY_REPLAYS_NAMES_CHECK   
08DB: set_panel $PANEL column 0 header 'GAME972' data 'ZAMEM1' 'ZAMEM2' 'ZAMEM3' 'ZAMEM4' 'ZAMEM5' 'ZAMEM6' 'ZAMEM7' 'ZAMEM8' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'  
090E: set_panel $PANEL active_row $PANEL5R_ACTIVE_ROW

32@ = 9999
    
//wait $MENU_BACK_WAIT                  

:ZOMBIEGEDDON_REPLAY_SELECT_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME970' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME970' 
end

08D7: $PANEL5R_ACTIVE_ROW = panel $PANEL active_row

gosub @DERBY_REPLAY_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @DERBY_REPLAY_GET_DATE                               
    end

////////////////////////////////Повтор 1//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 0 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\0\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\0\0.dat"
        1@ == 1
            then            
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\0\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 2//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 1 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\1\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\1\0.dat"
        1@ == 1
            then                    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\1\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 3//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 2 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\2\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\2\0.dat"
        1@ == 1
            then                    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\2\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 4//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 3 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\3\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\3\0.dat"
        1@ == 1
            then                    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\3\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 5//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 4 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\4\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\4\0.dat"
        1@ == 1
            then                   
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\4\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 6//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 5 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\5\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\5\0.dat"
        1@ == 1
            then                   
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\5\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 7//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 6 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\6\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\6\0.dat"
        1@ == 1
            then                    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\6\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end
    
////////////////////////////////Повтор 8//////////////////////////////////      
    
if
$PANEL5R_ACTIVE_ROW == 7 
    then           
    if
    0E3E: is_button_just_pressed 0 16
        then
        06D2: 0@v = "za\DB\7\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if and
        0AAB:   file_exists "za\DB\7\0.dat"
        1@ == 1
            then                    
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
                    
            $FPS_COUNTER_ENABLED = 0
            
            ///////////////////////////////////////////////////////////DAT///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\0.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\0.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\1.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\1.dat" //IF and SET
            
            repeat
            //wait 0       
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\2.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\2.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\3.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\3.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\4.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\4.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\5.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\5.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\6.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\6.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\7.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\7.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\8.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\8.dat" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\9.dat" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\9.dat" //IF and SET
            
            ///////////////////////////////////////////////////////////RRR///////////////////////////////////////////////////////////
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\0.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec074.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\1.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec075.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\2.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec076.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\3.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec077.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\4.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec078.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr"  // IF and SET"        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\5.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec079.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\6.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec080.rrr" //IF and SET
            
            repeat
            //wait 0
            
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\7.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec081.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\8.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec082.rrr" //IF and SET
            
            repeat
            //wait 0        
            until 0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr"  // IF and SET        
            repeat
            //wait 0        
            until 0B04: copy_file "za\DB\7\9.rrr" to "modloader\MODLOADER GLOBAL FILES\ExtraContent\Zombiegeddon Replay\carrec083.rrr" //IF and SET
                    
            0@ = 1        
            return
            end                
        end
    end                                                                                                                                                                                                                         

if
0E3E: is_button_just_pressed 0 15
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
return
else
jump @ZOMBIEGEDDON_REPLAY_SELECT_SELECT_IDLE
end

jump @ZOMBIEGEDDON_REPLAY_SELECT_SELECT_IDLE

:DERBY_REPLAYS_NAMES_CHECK

0AE0: remove_dynamic_GXT_entry "ZAMEM1"
0ADF: add_dynamic_GXT_entry "ZAMEM1" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM2"
0ADF: add_dynamic_GXT_entry "ZAMEM2" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM3"
0ADF: add_dynamic_GXT_entry "ZAMEM3" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM4"
0ADF: add_dynamic_GXT_entry "ZAMEM4" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM5"
0ADF: add_dynamic_GXT_entry "ZAMEM5" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM6"
0ADF: add_dynamic_GXT_entry "ZAMEM6" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM7"
0ADF: add_dynamic_GXT_entry "ZAMEM7" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM8"
0ADF: add_dynamic_GXT_entry "ZAMEM8" text "-"

if
0AF0: 1@ = get_int_from_ini_file "za\DB\0\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\0\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\0\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM1"
        0ADF: add_dynamic_GXT_entry "ZAMEM1" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM1"
        0ADF: add_dynamic_GXT_entry "ZAMEM1" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\1\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\1\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\1\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM2"
        0ADF: add_dynamic_GXT_entry "ZAMEM2" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM2"
        0ADF: add_dynamic_GXT_entry "ZAMEM2" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\2\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\2\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\2\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM3"
        0ADF: add_dynamic_GXT_entry "ZAMEM3" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM3"
        0ADF: add_dynamic_GXT_entry "ZAMEM3" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\3\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\3\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\3\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM4"
        0ADF: add_dynamic_GXT_entry "ZAMEM4" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM4"
        0ADF: add_dynamic_GXT_entry "ZAMEM4" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\4\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\4\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\4\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM5"
        0ADF: add_dynamic_GXT_entry "ZAMEM5" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM5"
        0ADF: add_dynamic_GXT_entry "ZAMEM5" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\5\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\5\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\5\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM6"
        0ADF: add_dynamic_GXT_entry "ZAMEM6" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM6"
        0ADF: add_dynamic_GXT_entry "ZAMEM6" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\6\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\6\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\6\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM7"
        0ADF: add_dynamic_GXT_entry "ZAMEM7" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM7"
        0ADF: add_dynamic_GXT_entry "ZAMEM7" text 0@
        end    
    end
    
if
0AF0: 1@ = get_int_from_ini_file "za\DB\7\9.dat" section "GAMEINFO" key "RACE_NUM"
    then
    06D2: 0@v = "za\DB\7\9.dat" // @v = string
    gosub @CARMA_REPLAY_MAP_CHECK
    if
    1@ == 1
        then
        0AF0: 1@ = get_int_from_ini_file "za\DB\7\9.dat" section "GAMEINFO" key "RACE_NUM"
        0AD3: v$SNAME3 = format "CMAP%d" 1@
        0ADE: 0@ = text_by_GXT_entry v$SNAME3
        0AE0: remove_dynamic_GXT_entry "ZAMEM8"
        0ADF: add_dynamic_GXT_entry "ZAMEM8" text 0@
        else
        0ADE: 0@ = text_by_GXT_entry "GME1112"
        0AE0: remove_dynamic_GXT_entry "ZAMEM8"
        0ADF: add_dynamic_GXT_entry "ZAMEM8" text 0@
        end    
    end                                

return

:CARMA_REPLAY_MAP_CHECK

if
8AAB: not  file_exists 0@v
then
1@ = 0
return
end

if
UNITED_MAP == 0
then
    
if
CLASSIC_CARMA_MAP < 1
then 
0AF0: 4@ = get_int_from_ini_file 0@v section "GAMEINFO" key "MAP_NUM"
if
4@ == 28
    then
    1@ = 1
    else
    1@ = 0
    end

else

if
CLASSIC_CARMA_MAP_AC_MODE == 0
then
0AF0: 4@ = get_int_from_ini_file 0@v section "GAMEINFO" key "MAP_NUM"
if
4@ == 69
    then
    1@ = 1
    else
    1@ = 0
    end
else
0AF0: 4@ = get_int_from_ini_file 0@v section "GAMEINFO" key "MAP_NUM"
if
4@ == 699
    then
    1@ = 1
    else
    1@ = 0
    end
end    
    
end
    
else
0AF0: 4@ = get_int_from_ini_file 0@v section "GAMEINFO" key "MAP_NUM"
if
07D6:   4@ == LCVC_MAP_NUM // @ == $ (int)
    then
    1@ = 1
    else
    1@ = 0
    end
end

return 
      
:DERBY_REPLAY_DATE_RENDER

if
1@ < 1
then
return
end

03F0: enable_text_draw 1  
0349: set_text_draw_font 1 
0342: set_text_draw_centered 1
03E0: draw_text_behind_textures 1
03E3: set_texture_to_be_drawn_antialiased 1 
033F: set_text_draw_letter_size 0.22 1.1            
081C: draw_text_outline 1 RGBA 0 0 0 255
0340: set_text_draw_RGBA 200 200 200 255

if
UNITED_MAP == 1
then    
0349: set_text_draw_font 1
end
      
if and
2@ > 9
1@ > 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG131' numbers 2@ 1@  
end

if and
2@ <= 9
1@ > 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG128' numbers 2@ 1@   
end

if and
2@ <= 9
1@ <= 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG129' numbers 2@ 1@
end

if and
2@ > 9
1@ <= 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG130' numbers 2@ 1@
end  

03F0: enable_text_draw 1  
0349: set_text_draw_font 1 
0342: set_text_draw_centered 1
03E0: draw_text_behind_textures 1
03E3: set_texture_to_be_drawn_antialiased 1 
033F: set_text_draw_letter_size 0.22 1.1
            
081C: draw_text_outline 1 RGBA 0 0 0 255
0340: set_text_draw_RGBA 200 200 200 255

if
UNITED_MAP == 1
then    
0349: set_text_draw_font 1
end 

if and
3@ > 9
4@ > 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG23' numbers 3@ 4@  
end

if and
3@ <= 9
4@ > 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG20' numbers 3@ 4@   
end

if and
3@ <= 9
4@ <= 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG21' numbers 3@ 4@
end

if and
3@ > 9
4@ <= 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG22' numbers 3@ 4@
end

return

:DERBY_REPLAY_GET_DATE
    
    if and
    $PANEL5R_ACTIVE_ROW == 0
    0AAB:   file_exists "za\DB\0\9.dat"
        then
        06D2: 0@v = "za\DB\0\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\0\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\0\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\0\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\0\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 1
    0AAB:   file_exists "za\DB\1\9.dat"
        then
        06D2: 0@v = "za\DB\1\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\1\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\1\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\1\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\1\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 2
    0AAB:   file_exists "za\DB\2\9.dat"
        then
        06D2: 0@v = "za\DB\2\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\2\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\2\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\2\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\2\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 3
    0AAB:   file_exists "za\DB\3\9.dat"
        then
        06D2: 0@v = "za\DB\3\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\3\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\3\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\3\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\3\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 4
    0AAB:   file_exists "za\DB\4\9.dat"
        then
        06D2: 0@v = "za\DB\4\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\4\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\4\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\4\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\4\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 5
    0AAB:   file_exists "za\DB\5\9.dat"
        then
        06D2: 0@v = "za\DB\5\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\5\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\5\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\5\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\5\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end 
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 6
    0AAB:   file_exists "za\DB\6\9.dat"
        then
        06D2: 0@v = "za\DB\6\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\6\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\6\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\6\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\6\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
    if and
    $PANEL5R_ACTIVE_ROW == 7
    0AAB:   file_exists "za\DB\7\9.dat"
        then
        06D2: 0@v = "za\DB\7\9.dat" // @v = string
        gosub @CARMA_REPLAY_MAP_CHECK
        if
        1@ == 1
            then
            0AF0: 1@ = get_int_from_ini_file "za\DB\7\9.dat" section "GAMEINFO" key "DATE_MONTH"
            0AF0: 2@ = get_int_from_ini_file "za\DB\7\9.dat" section "GAMEINFO" key "DATE_DAY"
            0AF0: 3@ = get_int_from_ini_file "za\DB\7\9.dat" section "GAMEINFO" key "DATE_HOUR"
            0AF0: 4@ = get_int_from_ini_file "za\DB\7\9.dat" section "GAMEINFO" key "DATE_MINUTE"
            end
        end
        
return         

:RANDOM_ZOMBIEGEDDON_XMOD_SELECT        
        
random_int 0@ 0 to 4                
        
if or
0@ == 0
GAMEMODE_AUTOSELECT_PARAM == 0
then
jump to @ZOMBIEGEDDON_XMOD_SELECT1_SELECT
end
        
if or
0@ == 1
GAMEMODE_AUTOSELECT_PARAM == 1
then
jump to @ZOMBIEGEDDON_XMOD_SELECT2_SELECT
end

if or
0@ == 2
GAMEMODE_AUTOSELECT_PARAM == 2
then
jump to @ZOMBIEGEDDON_XMOD_SELECT3_SELECT
end

if or
0@ == 3
GAMEMODE_AUTOSELECT_PARAM == 3
then
jump to @ZOMBIEGEDDON_XMOD_SELECT3_SELECT
end

jump @ZOMBIEGEDDON_XMOD_SELECT_SELECT_IDLE

:ZOMBIEGEDDON_XMOD_TOURNAMENT_GENERATE

0AF0: 0@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"

if or
0AAB:   file_exists "data\derby_Tournament.ini"
0@ == 1
then

//////////////////////////////

32@ = 0

while true
wait 0
text.ShowH('GAME886',100,1)

if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0B00: delete_file "data\derby_Tournament.ini"  // IF and SET
    break
    end

if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    ZOMBEGEDDON_TOURNAMENT = 0
    return
    end

end

//////////////////////////////

end

////////////////////////////////////

repeat
wait 0
text.ShowH('GME973B',100,1)

if
00E1:   player 0 pressed_key 10
    then
    text.ClearAll()
    6@ = 0
    break
    end

if
00E1:   player 0 pressed_key 11
    then
    text.ClearAll()
    6@ = 1
    break
    end

until false

////////////////////////////////////

gosub @RACE_START_SEARCH_TOURNAMENT

//////

1@ = -1
2@ = 0
0085: 30@ = 29@ // (int)
30@ += 1

repeat 
    
    :RACE_TOURNAMENT_GENERATE_AGAIN
    
    if
    6@ == 1
    then
    random_int 1@ 0 30@
    else
    1@ += 1
    end
    
    if and
    not 2@ == 18
    1@ == 18
    then
    jump to @RACE_TOURNAMENT_GENERATE_AGAIN
    end
    
    0AD3: v$FP_FILE = format "RACE%d" 2@
    0AD3: v$RACE_FILE = format "%d" 1@    
    
    if
    8AF0: not 0@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key v$RACE_FILE
    then
    0AF1: write_int 1 to_ini_file "data\derby_Tournament.ini" section "LIST" key v$RACE_FILE
    0AF1: write_int 1@ to_ini_file "data\derby_Tournament.ini" section v$FP_FILE key "RACENUM"    
    2@ += 1
    end

until 002D:   2@ >= 30@  // (int)

//////

if
6@ == 1
then
random_int 1@ 0 29@
else
1@ = 0
end

0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "LIST" key "CURRENT_MAP"
0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "LIST" key "MAPS_COMPLETED"
0AF1: write_int 30@ to_ini_file "data\derby_Tournament.ini" section "LIST" key "MAPS_TOTAL"
gosub @ZOMBIEGEDDON_XMOD_TOURNAMENT_MAP_NUM_CHECK
0AF1: write_int 3@ to_ini_file "data\derby_Tournament.ini" section "LIST" key "CURRENT_MAP_TECH"
ZOMBEGEDDON_TOURNAMENT = 1

return

:ZOMBIEGEDDON_XMOD_TOURNAMENT_GENERATE_CLASSIC

0AF0: 0@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "PAUSED"

if or
0AAB:   file_exists "data\derby_Tournament.ini"
0@ == 1
then

//////////////////////////////

32@ = 0

while true
wait 0
text.ShowH('GAME886',100,1)

if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0B00: delete_file "data\derby_Tournament.ini"  // IF and SET
    break
    end

if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    ZOMBEGEDDON_TOURNAMENT = 0
    return
    end

end

//////////////////////////////

end

////////////////////////////////////

if
not CLASSIC_CARMA_MAP_AC_MODE == 1
then

repeat
wait 0
text.ShowH('GAME973',100,1)

if
0AB0:   key_pressed 49
    then
    text.ClearAll()
    4@ = 0
    break
    end

if
0AB0:   key_pressed 50
    then
    text.ClearAll()
    4@ = 1
    break
    end

if
0AB0:   key_pressed 51
    then
    text.ClearAll()
    4@ = 2
    break
    end

until false

else
4@ = 0
end

////////////////////////////////////

repeat
wait 0
text.ShowH('GME973B',100,1)

if
00E1:   player 0 pressed_key 10
    then
    text.ClearAll()
    6@ = 0
    break
    end

if
00E1:   player 0 pressed_key 11
    then
    text.ClearAll()
    6@ = 1
    break
    end

until false

////////////////////////////////////

if
not CLASSIC_CARMA_MAP_AC_MODE == 1
then

if
4@ == 0 //Carmageddon 1
    then
    5@ = 36
    end
if
4@ == 1 //Carmageddon Splat Pack
    then
    5@ = 21        
    end
if
4@ == 2 //Carmageddon 2
    then
    5@ = 29
    end
    
else
5@ = 30 //Carmageddon AC Addon
4@ = 0
end

///////////////////////////////////               

0AF1: write_int 4@ to_ini_file "data\derby_Tournament.ini" section "LIST" key "CURRENT_MAP_NABOR"
gosub @RACE_START_SEARCH_TOURNAMENT_CLASSIC

//////

1@ = -1
2@ = 0
0085: 30@ = 29@ // (int)
30@ += 1

repeat 
    
:RACE_TOURNAMENT_GENERATE_AGAIN_CLASSIC
        
/////////////////////////////////////////////////////////////////////
    
if
6@ == 1
then
random_int 1@ 0 30@
else
1@ += 1
end
    
008A: CARMA_GLOB_RACE_NUMBER_T = 1@ // (int)    
gosub @MAP_GET_NUMBER_TOURNAMENT_CLASSIC    
    
0AD3: v$FP_FILE = format "RACE%d" 2@    
0AD3: v$RACE_FILE = format "%d" 1@
0AD3: v$EDITOR_FILE = format "RACE%d" 1@

if and
not 2@ == 20
1@ == 57
then
jump to @RACE_TOURNAMENT_GENERATE_AGAIN_CLASSIC
end

if
not CLASSIC_CARMA_MAP_AC_MODE == 1
then
       
0AF0: 3@ = get_int_from_ini_file CLASSIC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "CARMA_GAME_NUM"    
if and
8AF0: not 0@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key v$RACE_FILE
8AF0: not 0@ = get_int_from_ini_file CLASSIC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "SKIP_THIS_MAP"
003B:   3@ == 4@  // (int)
then
0AF1: write_int 1 to_ini_file "data\derby_Tournament.ini" section "LIST" key v$RACE_FILE
0AF1: write_int 1@ to_ini_file "data\derby_Tournament.ini" section v$FP_FILE key "RACENUM"
//0AD1: show_formatted_text_highpriority "ADDED MAP TECH ID: %d BY USUAL COUNTER %d" time 2000 1@ CARMA_GLOB_RACE_NUMBER_T
//wait 1000  
2@ += 1
if
not 6@ == 1
    then
    008B: 1@ = DO_NOT_SPAWN_CANNIBALS // (int)
    end
else
if
not 6@ == 1
    then
    008B: 1@ = DO_NOT_SPAWN_CANNIBALS // (int)
    end    
end

else
        
if and
8AF0: not 0@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key v$RACE_FILE
0AF0: 0@ = get_int_from_ini_file AC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "AC_MAP"
003B:   3@ == 4@  // (int)
then
0AF1: write_int 1 to_ini_file "data\derby_Tournament.ini" section "LIST" key v$RACE_FILE
0AF1: write_int 1@ to_ini_file "data\derby_Tournament.ini" section v$FP_FILE key "RACENUM"
//0AD1: show_formatted_text_highpriority "ADDED MAP TECH ID: %d BY USUAL COUNTER %d" time 2000 1@ CARMA_GLOB_RACE_NUMBER_T
//wait 1000  
2@ += 1
if
not 6@ == 1
    then
    008B: 1@ = DO_NOT_SPAWN_CANNIBALS // (int)
    end
else
if
not 6@ == 1
    then
    008B: 1@ = DO_NOT_SPAWN_CANNIBALS // (int)
    end    
end

end
    
////////////////////////////////////////////////////////////////////    

    
//0AD1: show_formatted_text_highpriority "%d >= %d, TOTAL MAPS: %d, MAX RANDOM NUM: %d, KOLODA: %d" time 2000 2@ 5@ 29@ 30@ 1@
//wait 0    

until 002D:   2@ >= 5@  // (int)

//////

if
6@ == 1
then
random_int 1@ 0 29@
else
1@ = 0
end
0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "LIST" key "CURRENT_MAP"
0AF1: write_int 0 to_ini_file "data\derby_Tournament.ini" section "LIST" key "MAPS_COMPLETED"
0AF1: write_int 5@ to_ini_file "data\derby_Tournament.ini" section "LIST" key "MAPS_TOTAL"
gosub @ZOMBIEGEDDON_XMOD_TOURNAMENT_MAP_NUM_CHECK
0AF1: write_int 3@ to_ini_file "data\derby_Tournament.ini" section "LIST" key "CURRENT_MAP_TECH"
ZOMBEGEDDON_TOURNAMENT = 1

return

:RACE_START_SEARCH_TOURNAMENT
wait 0

for 29@ = 0 to 99

if or
not $UNITED_VC_FLAG == 1
UNITED_MAP == 0
then
0AD3: v$EDITOR_FILE = format "RACE%d" 29@
else
0AD3: v$EDITOR_FILE = format "2RACE%d" 29@
end

if
CLASSIC_CARMA_MAP < 1
then
0AF0: 31@ = get_int_from_ini_file "data/derby.ini" section v$EDITOR_FILE key "TOTAL_CHECKPOINTS"
else

if
CLASSIC_CARMA_MAP_AC_MODE == 0
then
0AF0: 31@ = get_int_from_ini_file CLASSIC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "TOTAL_CHECKPOINTS"
else
0AF0: 31@ = get_int_from_ini_file AC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "TOTAL_CHECKPOINTS"
end

end

if
not 31@ < -1
    then    
    else
    29@ -= 1
    break
    end

end

if or
not $UNITED_VC_FLAG == 1
UNITED_MAP == 0
then
0AD3: v$EDITOR_FILE = format "RACE%d" CARMA_GLOB_RACE_NUMBER
else
0AD3: v$EDITOR_FILE = format "2RACE%d" CARMA_GLOB_RACE_NUMBER
end

if
CLASSIC_CARMA_MAP < 1
then
0AF0: 2@ = get_int_from_ini_file "data/derby.ini" section v$EDITOR_FILE key "LAPS"
else

if
CLASSIC_CARMA_MAP_AC_MODE == 0
then
0AF0: 2@ = get_int_from_ini_file CLASSIC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "LAPS"
else
0AF0: 2@ = get_int_from_ini_file AC_CARMAGEDDON_RACES_INI_PATH section v$EDITOR_FILE key "LAPS"
end

end

if
2@ < -1
then
jump to @RACE_START_SEARCH_TOURNAMENT
end

:RACE_START_SEARCH_TOURNAMENT_CLASSIC

if
CLASSIC_CARMA_MAP >= 1
    then
    
    if
    4@ == 0
    then    
    if
    not CLASSIC_CARMA_MAP_AC_MODE == 1
        then
        29@ = 35
        else
        29@ = 29
        end    
    end
    
    if
    4@ == 1
    then
    29@ = 20
    end
    
    if
    4@ == 2
    then
    29@ = 28
    end
    
    29@ += 1    
    
    end

008A: CARMA_GLOB_RACES_TOTAL = 29@ // (int)

return

:MAP_GET_NUMBER_TOURNAMENT_CLASSIC

008A: DO_NOT_SPAWN_CANNIBALS = 1@ // (int)

///////////////////////////////////////////////////////////

if
4@ == 0
then

if
CARMA_GLOB_RACE_NUMBER_T == 0
then
1@ = 0 //1
end

if
CARMA_GLOB_RACE_NUMBER_T == 1
then
1@ = 1 //2
end

if
CARMA_GLOB_RACE_NUMBER_T == 2
then
1@ = 2 //3
end

if
CARMA_GLOB_RACE_NUMBER_T == 3
then
1@ = 3 //4
end

if
CARMA_GLOB_RACE_NUMBER_T == 4
then
1@ = 31 //5
end

if
CARMA_GLOB_RACE_NUMBER_T == 5
then
1@ = 32 //6
end

if
CARMA_GLOB_RACE_NUMBER_T == 6
then
1@ = 4 //7
end

if
CARMA_GLOB_RACE_NUMBER_T == 7
then
1@ = 5 //8
end

if
CARMA_GLOB_RACE_NUMBER_T == 8
then
1@ = 6 //9
end

if
CARMA_GLOB_RACE_NUMBER_T == 9
then
1@ = 7 //10
end

if
CARMA_GLOB_RACE_NUMBER_T == 10
then
1@ = 78 //11
end

if
CARMA_GLOB_RACE_NUMBER_T == 11
then
1@ = 8 //12
end

if
CARMA_GLOB_RACE_NUMBER_T == 12
then
1@ = 33 //13
end

if
CARMA_GLOB_RACE_NUMBER_T == 13
then
1@ = 34 //14
end

if
CARMA_GLOB_RACE_NUMBER_T == 14
then
1@ = 10 //15
end

if
CARMA_GLOB_RACE_NUMBER_T == 15
then
1@ = 35 //16
end

if
CARMA_GLOB_RACE_NUMBER_T == 16
then
1@ = 36 //17
end

if
CARMA_GLOB_RACE_NUMBER_T == 17
then
1@ = 9 //18
end

if
CARMA_GLOB_RACE_NUMBER_T == 18
then
1@ = 37 //22
end

if
CARMA_GLOB_RACE_NUMBER_T == 19
then
1@ = 79 //19
end

if
CARMA_GLOB_RACE_NUMBER_T == 20
then
1@ = 38 //20
end

if
CARMA_GLOB_RACE_NUMBER_T == 21
then
1@ = 12 //21
end

if
CARMA_GLOB_RACE_NUMBER_T == 22
then
1@ = 39 //26
end

if
CARMA_GLOB_RACE_NUMBER_T == 23
then
1@ = 40 //23
end

if
CARMA_GLOB_RACE_NUMBER_T == 24
then
1@ = 13 //24
end

if
CARMA_GLOB_RACE_NUMBER_T == 25
then
1@ = 41 //25
end

if
CARMA_GLOB_RACE_NUMBER_T == 26
then
1@ = 80 //27
end

if
CARMA_GLOB_RACE_NUMBER_T == 27
then
1@ = 84 //28
end

if
CARMA_GLOB_RACE_NUMBER_T == 28
then
1@ = 42 //29
end

if
CARMA_GLOB_RACE_NUMBER_T == 29
then
1@ = 86 //30
end

if
CARMA_GLOB_RACE_NUMBER_T == 30
then
1@ = 81 //31
end

if
CARMA_GLOB_RACE_NUMBER_T == 31
then
1@ = 82 //32
end

if
CARMA_GLOB_RACE_NUMBER_T == 32
then
1@ = 83 //33
end

if
CARMA_GLOB_RACE_NUMBER_T == 33
then
1@ = 85 //34
end

if
CARMA_GLOB_RACE_NUMBER_T == 34
then
1@ = 43 //35
end

if
CARMA_GLOB_RACE_NUMBER_T == 35
then
1@ = 44 //36
end

end

///////////////////////////////////////////////////////////

if
4@ == 1
then

if
CARMA_GLOB_RACE_NUMBER_T == 0
then
1@ = 14 //1
end

if
CARMA_GLOB_RACE_NUMBER_T == 1
then
1@ = 45 //2
end

if
CARMA_GLOB_RACE_NUMBER_T == 2
then
1@ = 46 //3
end

if
CARMA_GLOB_RACE_NUMBER_T == 3
then
1@ = 15 //4
end

if
CARMA_GLOB_RACE_NUMBER_T == 4
then
1@ = 47 //5
end

if
CARMA_GLOB_RACE_NUMBER_T == 5
then
1@ = 48 //6
end

if
CARMA_GLOB_RACE_NUMBER_T == 6
then
1@ = 16 //7
end

if
CARMA_GLOB_RACE_NUMBER_T == 7
then
1@ = 49 //8
end

if
CARMA_GLOB_RACE_NUMBER_T == 8
then
1@ = 50 //9
end

if
CARMA_GLOB_RACE_NUMBER_T == 9
then
1@ = 51 //10
end

if
CARMA_GLOB_RACE_NUMBER_T == 10
then
1@ = 18 //11
end

if
CARMA_GLOB_RACE_NUMBER_T == 11
then
1@ = 52 //12
end

if
CARMA_GLOB_RACE_NUMBER_T == 12
then
1@ = 77 //13
end

if
CARMA_GLOB_RACE_NUMBER_T == 13
then
1@ = 19 //14
end

if
CARMA_GLOB_RACE_NUMBER_T == 14
then
1@ = 17 //15
end

if
CARMA_GLOB_RACE_NUMBER_T == 15
then
1@ = 53 //16
end

if
CARMA_GLOB_RACE_NUMBER_T == 16
then
1@ = 54 //17
end

if
CARMA_GLOB_RACE_NUMBER_T == 17
then
1@ = 20 //18
end

if
CARMA_GLOB_RACE_NUMBER_T == 18
then
1@ = 55 //19
end

if
CARMA_GLOB_RACE_NUMBER_T == 19
then
1@ = 56 //20
end

if
CARMA_GLOB_RACE_NUMBER_T == 20
then
1@ = 57 //21
end

end

///////////////////////////////////////////////////////////

if
4@ == 2
then

if
CARMA_GLOB_RACE_NUMBER_T == 0
then
1@ = 21 //1
end

if
CARMA_GLOB_RACE_NUMBER_T == 1
then
1@ = 22 //2
end

if
CARMA_GLOB_RACE_NUMBER_T == 2
then
1@ = 27 //3
end

if
CARMA_GLOB_RACE_NUMBER_T == 3
then
1@ = 60 //4
end

if
CARMA_GLOB_RACE_NUMBER_T == 4
then
1@ = 30 //5
end

if
CARMA_GLOB_RACE_NUMBER_T == 5
then
1@ = 61 //6
end

if
CARMA_GLOB_RACE_NUMBER_T == 6
then
1@ = 24 //7
end

if
CARMA_GLOB_RACE_NUMBER_T == 7
then
1@ = 23 //8
end

if
CARMA_GLOB_RACE_NUMBER_T == 8
then
1@ = 62 //9
end

if
CARMA_GLOB_RACE_NUMBER_T == 9
then
1@ = 26 //10
end

if
CARMA_GLOB_RACE_NUMBER_T == 10
then
1@ = 59 //11
end

if
CARMA_GLOB_RACE_NUMBER_T == 11
then
1@ = 63 //12
end

if
CARMA_GLOB_RACE_NUMBER_T == 12
then
1@ = 64 //13
end

if
CARMA_GLOB_RACE_NUMBER_T == 13
then
1@ = 67 //14
end

if
CARMA_GLOB_RACE_NUMBER_T == 14
then
1@ = 58 //15
end

if
CARMA_GLOB_RACE_NUMBER_T == 15
then
1@ = 29 //16
end

if
CARMA_GLOB_RACE_NUMBER_T == 16
then
1@ = 65 //17
end

if
CARMA_GLOB_RACE_NUMBER_T == 17
then
1@ = 68 //18
end

if
CARMA_GLOB_RACE_NUMBER_T == 18
then
1@ = 70 //19
end

if
CARMA_GLOB_RACE_NUMBER_T == 19
then
1@ = 72 //20
end

if
CARMA_GLOB_RACE_NUMBER_T == 20
then
1@ = 66 //21
end

if
CARMA_GLOB_RACE_NUMBER_T == 21
then
1@ = 25 //22
end

if
CARMA_GLOB_RACE_NUMBER_T == 22
then
1@ = 71 //23
end

if
CARMA_GLOB_RACE_NUMBER_T == 23
then
1@ = 73 //24
end

if
CARMA_GLOB_RACE_NUMBER_T == 24
then
1@ = 74 //25
end

if
CARMA_GLOB_RACE_NUMBER_T == 25
then
1@ = 28 //26
end

if
CARMA_GLOB_RACE_NUMBER_T == 26
then
1@ = 75 //27
end

if
CARMA_GLOB_RACE_NUMBER_T == 27
then
1@ = 76 //28
end

if
CARMA_GLOB_RACE_NUMBER_T == 28
then
1@ = 69 //29
end

end

return

:ZOMBIEGEDDON_XMOD_TOURNAMENT_MAP_NUM_CHECK

0AF0: 2@ = get_int_from_ini_file "data\derby_Tournament.ini" section "LIST" key "CURRENT_MAP_TECH"

if
UNITED_MAP == 0
then

if
CLASSIC_CARMA_MAP < 1
then
3@ = 0
else

if
CLASSIC_CARMA_MAP_AC_MODE == 0
then
3@ = 5
else
3@ = 6
end

end

return
end

if and
UNITED_MAP == 1
STORIES_MAP == 0
$UNITED_III_SPAWN == 1
then
3@ = 1
return
end

if and
UNITED_MAP == 1
STORIES_MAP == 0
$UNITED_III_SPAWN == 0
then
3@ = 2
return
end

if and
UNITED_MAP == 1
STORIES_MAP == 1
$UNITED_III_SPAWN == 1
then
3@ = 3
return
end

if and
UNITED_MAP == 1
STORIES_MAP == 1
$UNITED_III_SPAWN == 0
then
3@ = 4
return
end

return                                         

///////////////////////////////////Выбор фракции///////////////////////////////////   

:FRACTION_SELECT
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME89' 
08D4: $PANEL = create_panel_with_title 'GAME109' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0

if
UNITED_MAP == 0
then  
08DB: set_panel $PANEL column 0 header 'GAME110' data 'GAME111' 'GAME112' 'GAME114' 'GAME113' 'GAME351' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel $PANEL column 0 header 'GAME110' data 'GAME111' 'GAME112' 'GAME113' 'GAME351' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

090E: set_panel $PANEL active_row $PANEL6_ACTIVE_ROW 
//wait $MENU_BACK_WAIT 

:FRACTION_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME89' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME89' 
end

08D7: $PANEL6_ACTIVE_ROW = panel $PANEL active_row      
     
if
$PANEL6_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_75',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :ARMY_SELECT
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all   
        $RANDOM_MODE_MODEL = 287
        $FRACTION_SELECTED = 1 
        $PLAYER_ARMY_SIDE = 1
        0629: change_integer_stat 254 to 1
        return
        end
     end     
     
if
$PANEL6_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_76',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :BANDITS_SELECT
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $RANDOM_MODE_MODEL = 133
        $FRACTION_SELECTED = 1 
        $PLAYER_BANDIT_SIDE = 1
        0629: change_integer_stat 254 to 2
        return
        end
     end
     
if
UNITED_MAP == 0
then
0@ = 2
else
0@ = 69
end                     
     
if and
003C:   $PANEL6_ACTIVE_ROW == 0@  // (int)
UNITED_MAP == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_78',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :FERMERS_SELECT
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $RANDOM_MODE_MODEL = 128
        $FRACTION_SELECTED = 1 
        $PLAYER_FERMERS_SIDE = 1
        0629: change_integer_stat 254 to 3       
        return
        end
     end
     
if
UNITED_MAP == 0
then
0@ = 3
else
0@ = 2
end                     
     
if
003C:   $PANEL6_ACTIVE_ROW == 0@  // (int) 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_77',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        :SWAT_SELECT
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $RANDOM_MODE_MODEL = 285
        $FRACTION_SELECTED = 1 
        $PLAYER_SWAT_SIDE = 1
        0629: change_integer_stat 254 to 4       
        return
        end
     end                               

if
UNITED_MAP == 0
then
0@ = 4
else
0@ = 3
end
     
if or
003C:   $PANEL6_ACTIVE_ROW == 0@  // (int) 
25@ == 1
GAMEMODE_AUTOSELECT == 1
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_101',5,1)  
    if or
    0E3E: is_button_just_pressed 0 16
    25@ == 1
    GAMEMODE_AUTOSELECT == 1
        then
        
        if
        GAMEMODE_AUTOSELECT < 0
        then
        
        if
        UNITED_MAP == 0
        then
        random_int 0@ 0 to 4
        else
        random_int 0@ 0 to 3
        end
        
        end
        
        if or
        0@ == 0
        GAMEMODE_AUTOSELECT_PARAM == 0
        then
        jump to @ARMY_SELECT
        end
        
        if or
        0@ == 1
        GAMEMODE_AUTOSELECT_PARAM == 1
        then
        jump to @BANDITS_SELECT
        end
        
        if or
        0@ == 2
        GAMEMODE_AUTOSELECT_PARAM == 2
        then
        jump to @SWAT_SELECT
        end
        
        if or
        0@ == 3
        GAMEMODE_AUTOSELECT_PARAM == 3
        then
        jump to @FERMERS_SELECT
        end        
        
        return
        end
     end                   

if
0E3E: is_button_just_pressed 0 15 
then
03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
return
else
jump @FRACTION_SELECT_IDLE
end

jump @FRACTION_SELECT_IDLE

///////////////////////////////////Выбор сложности///////////////////////////////////
                   
:SURV_DIFFICULTY_SELECT
09C1: add_next_text_to_brief_history 0      
0512: show_permanent_text_box 'GAME39' 
08D4: $PANEL = create_panel_with_title 'GAME73' position $X_MENU_SELECT_GAMEMODE $Y_MENU_SELECT_GAMEMODE width $WIDTH_MENU_SELECT_GAMEMODE columns 1 interactive 1 background 1 alignment 0     

if
USHER_STORY_SELECT_DIFF_FLAG == 1
then
08DB: set_panel $PANEL column 0 header 'GAME38' data 'GME1427' 'GME1428' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 
else
08DB: set_panel $PANEL column 0 header 'GAME38' data 'GAME279' 'GAME280' 'GAME281' 'GAME282' 'GAME828' 'GAME960' 'GAME352' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'   
end   

$EASY_MODE = 0
$NORMAL_MODE = 0
$HARD_MODE = 0
$NIGHTMARE_MODE = 0

090E: set_panel $PANEL active_row $PANEL2_ACTIVE_ROW 
//wait $MENU_BACK_WAIT

:DIFFICULTY_SELECT_IDLE
wait 0

if
8A2A: not  text_box 'GAME39' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME39' 
end

08D7: $PANEL2_ACTIVE_ROW = panel $PANEL active_row 
     
if
not USHER_STORY_SELECT_DIFF_FLAG == 1
then 

if
$PANEL2_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_7',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all        
        jump to @EASY_GAMEMODE_ACCEPT
        end
    end     

if
$PANEL2_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_8',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $DIFFICULTY_SELECTED = 1                
        jump to @DIFFUCLITY_NORMAL_SELECT        
        end
     end          

if
$PANEL2_ACTIVE_ROW == 2 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_9',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $DIFFICULTY_SELECTED = 1
        jump to @DIFFUCLITY_HARD_SELECT
        end
    end      

if
$PANEL2_ACTIVE_ROW == 3 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_12',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all                        
        jump to @NIGHTMARE_GAMEMODE_ACCEPT
        end
    end
    
if
$PANEL2_ACTIVE_ROW == 4 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_150',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        29@ = 0
                                
        gosub @HARDCORE_GAMEMODE_ACCEPT
        
        if
        29@ == 0
        then
        jump to @SURV_DIFFICULTY_SELECT
        else
        HARDCORE_MODE = 1
        $DIFFICULTY_SELECTED = 1
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
        
        end
    end 
    
if
$PANEL2_ACTIVE_ROW == 5 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_159',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        29@ = 0
                                
        gosub @HARDCORE_PLUS_GAMEMODE_ACCEPT
        
        if
        29@ == 0
        then
        jump to @SURV_DIFFICULTY_SELECT
        else
        HARDCORE_MODE = 1
        HARDCORE_PLUS_MODE = 1
        create_thread @HRC_PLS
        $DIFFICULTY_SELECTED = 1
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
        
        end
    end  

0@ = 6
else
0@ = 2   

if
$PANEL2_ACTIVE_ROW == 0 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_187',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then    
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all    
        $DIFFICULTY_SELECTED = 1
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_DIFF"    
        jump to @DIFFUCLITY_EASY_SELECT
        end
    end     

if
$PANEL2_ACTIVE_ROW == 1 
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_188',5,1)  
    if
    0E3E: is_button_just_pressed 0 16
        then
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $DIFFICULTY_SELECTED = 1   
        0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_DIFF"             
        jump to @DIFFUCLITY_NORMAL_SELECT        
        end
     end       
 
end              
    
if or
$PANEL2_ACTIVE_ROW == 6
25@ == 1
GAMEMODE_AUTOSELECT == 1
    then
    09C1: add_next_text_to_brief_history 0     
    text.ShowH('GMD_102',5,1)  
    if or
    0E3E: is_button_just_pressed 0 16
    25@ == 1
    GAMEMODE_AUTOSELECT == 1
        then              
        03E6: remove_text_box 
        08DA: remove_panel $PANEL  
        00BE: text_clear_all
        $DIFFICULTY_SELECTED = 1
        
        if
        GAMEMODE_AUTOSELECT < 0
        then
        random_int 0@ 0 to 4
        else
        0@ = -1
        end
        
        if or
        0@ == 0
        GAMEMODE_AUTOSELECT_PARAM == 1
        then
        jump to @DIFFUCLITY_EASY_SELECT
        end
                
        if or
        0@ == 1
        GAMEMODE_AUTOSELECT_PARAM == 2
        then
        jump to @DIFFUCLITY_NORMAL_SELECT
        end
        
        if or
        0@ == 2
        GAMEMODE_AUTOSELECT_PARAM == 3
        then
        jump to @DIFFUCLITY_HARD_SELECT
        end
        
        if or
        0@ == 3
        GAMEMODE_AUTOSELECT_PARAM == 4
        then
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
        
        if
        GAMEMODE_AUTOSELECT_PARAM == 5
        then
        HARDCORE_MODE = 1
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end
        
        if
        GAMEMODE_AUTOSELECT_PARAM == 6
        then
        HARDCORE_MODE = 1
        HARDCORE_PLUS_MODE = 1
        jump to @DIFFUCLITY_NIGHTMARE_SELECT
        end        
        
        end
    end                                                     

if
0E3E: is_button_just_pressed 0 15 
then

if
USHER_STORY_SELECT_DIFF_FLAG == 1
then
0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "USHER_TUT_ASKED"
if
0@ == 1
    then
    jump @DIFFICULTY_SELECT_IDLE
    end
end

03E6: remove_text_box 
08DA: remove_panel $PANEL  
00BE: text_clear_all
HARDCORE_MODE = 0
HARDCORE_PLUS_MODE = 0
return
else
jump @DIFFICULTY_SELECT_IDLE
end

///////////////////////////////////Выключение музыки выбора режимов///////////////////////////////////

:MUSIC_GAMEMODE_SELECT_OFF 

$FPS_COUNTER_ENABLED = 0

$SELECT_MUSIC_END = 1

015D: set_gamespeed 1.0

if
not GAMEMODE_AUTOSELECT == 1
then

//////////////////////////////////////////////////////////////////////

if
CLASSIC_CARMA_MAP < 1
then

while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end
 
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $SELECT_MUSIC // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1

end

while 016B:   fading
wait 0
end

//////////////////////////////////////////////////////////////////////

end
    
0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
$FPS_MAX = FPS_MAX_NORMAL
$CAMERA_ZOOM_END = 1

if
not GAMEMODE_AUTOSELECT == 1
then

while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0
end

else

audiostream.Release($SELECT_MUSIC)

end

$SAVESTATUS = 1
THREADS_AFTERGAMEMODE_SELECT_DELETE = 1
$ZOMBIE_DONT_ATTACK_PLAYER = 0 
$GAMEMODE_SELECTED = 1
if
COOP_ACTIVE_FLAG == 1
then
COOP_ACTOR_SURV_NUM = 0
end

if
not BASE_MISSION_BASE_NUMBER == -699
then
audiostream.Release(BASE_MISSION_BASE_NUMBER)
BASE_MISSION_BASE_NUMBER = 0
end

if and
UNITED_MAP == 0
CLASSIC_CARMA_MAP < 1
then
0777: delete_objects_in_object_group "gatesC" 
0777: delete_objects_in_object_group "carl"
end

create_thread @IPL_CR3    

$FPS_COUNTER_ENABLED = 0
$FPS_COUNTER_ENABLED2 = 0

$X_MENU_SELECT_GAMEMODE = 230.0

return

///////////////////////////////////Показ логотипа///////////////////////////////////

:LOGO_SHOW    

0A0E: disable_text_with_style 1

0391: release_textures
0390: load_txd_dictionary 'prsnts' 
wait 1
038F: load_texture "zacm" as 1 
wait 1

1@ = 0

 repeat 
wait 0
1@ += 5
03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 220.0 size 600.0 400.0 RGBA 255 255 255 1@
03E3: set_texture_to_be_drawn_antialiased 1 
 until 1@ == 255

32@ = 0 

 repeat 
wait 0
03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 220.0 size 600.0 400.0 RGBA 255 255 255 1@
03E3: set_texture_to_be_drawn_antialiased 1 

if
32@ > 3500
    then
    break
    end
    
 until 00E1: key_pressed 0 17

 repeat
wait 0
1@ -= 5
03F0: enable_text_draw 1
038D: draw_texture 1 position 320.0 220.0 size 600.0 400.0 RGBA 255 255 255 1@
03E3: set_texture_to_be_drawn_antialiased 1 
 until 1@ == 0
 
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 

0A0E: disable_text_with_style 0

0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "FS"  

return

///////////////////////////////////Показ туториала///////////////////////////////////

:TUTORIAL

$FPS_COUNTER_ENABLED = 0

const
TEXT_R = 29@
TEXT_G = 30@
TEXT_B = 31@
end

if
BRIGHT_ATMOSPHERE == 1
then
29@ = 225
30@ = 225
31@ = 225
else
29@ = 195
30@ = 195
31@ = 195
end  

0084: $TUTORIAL_NUMBER = $TUTORIAL_MIN // (int)
$TUTORIAL_NUMBER -= 1

$TUTORIAL_TEXT_X = 320.0
$TUTORIAL_TEXT_Y = 200.0

$TUTORIAL_TEXT_SIZE_X = 0.4
$TUTORIAL_TEXT_SIZE_Y = 1.3

$TUTORIAL_TEXT_SIZE2_X = 0.4
$TUTORIAL_TEXT_SIZE2_Y = 1.3

$TUTORIAL_TEXT_SIZE_X *= 1.1
$TUTORIAL_TEXT_SIZE_Y *= 1.1

$TUTORIAL_TEXT_SIZE2_X *= 1.3
$TUTORIAL_TEXT_SIZE2_Y *= 1.3

:TUTORIAL_START_DRAW

$TUTORIAL_NUMBER += 1
1@ = 255
008B: 2@ = $TUTORIAL_NUMBER // (int)
008B: 3@ = $TUTORIAL_MIN // (int)
008B: 4@ = $TUTORIAL_MAX // (int)
0062: 4@ -= 3@  // (int)
0062: 2@ -= 3@  // (int)
2@ += 1
4@ += 1

Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME    

// repeat 
//wait 0
//1@ += 51
//gosub @TUTORIAL_DRAW
// until 1@ == 255   

 repeat 
wait 0
gosub @TUTORIAL_DRAW

if
00E1: key_pressed 0 15
then

 repeat
wait 0
1@ -= 51
gosub @TUTORIAL_DRAW
 until 1@ == 0

jump to @TUTORIAL_SKIP
end

 until 00E1: key_pressed 0 17

 repeat
wait 0
1@ -= 51
gosub @TUTORIAL_DRAW
 until 1@ == 0 
 
if or
003A:   $TUTORIAL_NUMBER == $TUTORIAL_MAX // (int)
00E1: key_pressed 0 15
    then
    :TUTORIAL_SKIP    
    $FPS_COUNTER_ENABLED = 1   
    return
    end 

jump to @TUTORIAL_START_DRAW

:TUTORIAL_DRAW

if
not 5@ == 340957345
then
06D1: v$TUTORIAL_NAME1 = 'TUT' // v$ = string
else
06D1: v$TUTORIAL_NAME1 = 'HNT' // v$ = string
end

0AD3: v$TUTORIAL_NAME2 = format "%d" $TUTORIAL_NUMBER 
098B: v$TUTORIAL_NAME3 = v$TUTORIAL_NAME1 + v$TUTORIAL_NAME2 // all string variables

03F0: enable_text_draw 1   

0349: set_text_draw_font 1
0342: set_text_draw_centered 1
033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE_X $TUTORIAL_TEXT_SIZE_Y 
081C: draw_text_outline 1 RGBA 0 0 0 1@
0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
0344: set_text_draw_linewidth 500.0 for_centered_text

if
0A4B:   controls_set_to_joystick
then

if
not 5@ == 340957345
    then
    0AD3: v$TUTORIAL_NAME2 = format "TUT%dG" $TUTORIAL_NUMBER
    09FD: get_gxt_string v$TUTORIAL_NAME2 width_to 0@  // ~k~~PED_SPRINT~ Select
    if
    0@ > 0
    then
    0AD3: v$TUTORIAL_NAME3 = format "TUT%dG" $TUTORIAL_NUMBER
    end
    
    else
    
    0AD3: v$TUTORIAL_NAME2 = format "HNT%dG" $TUTORIAL_NUMBER
    09FD: get_gxt_string v$TUTORIAL_NAME2 width_to 0@  // ~k~~PED_SPRINT~ Select
    if
    0@ > 0
    then
    0AD3: v$TUTORIAL_NAME3 = format "HNT%dG" $TUTORIAL_NUMBER
    end
    
    end

end

033E: set_draw_text_position $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y GXT v$TUTORIAL_NAME3  // Push  

$TUTORIAL_TEXT_Y2 = 400.0

03F0: enable_text_draw 1   

0349: set_text_draw_font 2
0342: set_text_draw_centered 1
033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE2_X $TUTORIAL_TEXT_SIZE2_Y 
081C: draw_text_outline 1 RGBA 0 0 0 1@
0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 1@
end

0344: set_text_draw_linewidth 500.0 for_centered_text

033E: set_draw_text_position $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y2 GXT 'TUT0'  // Push

$TUTORIAL_TEXT_Y2 = 180.0

03F0: enable_text_draw 1   

0349: set_text_draw_font 2
0342: set_text_draw_centered 1
033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE2_X $TUTORIAL_TEXT_SIZE2_Y 
081C: draw_text_outline 1 RGBA 0 0 0 1@
0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 1@
end

0344: set_text_draw_linewidth 500.0 for_centered_text

045B: draw_text_2numbers $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y2 GXT 'DISP5' numbers 2@ 4@  // ~1~:~1~

////////////////////////////////////////////////////////////////////////////////////////////////////

06D1: v$TUTORIAL_NAME1 = 'TUTB' // v$ = string
0AD3: v$TUTORIAL_NAME2 = format "%d" $TUTORIAL_NUMBER 
098B: v$TUTORIAL_NAME3 = v$TUTORIAL_NAME1 + v$TUTORIAL_NAME2 // all string variables

if
8846: not  string v$TUTORIAL_NAME3 empty // v$
    then
    
    if and
    0A4B:   controls_set_to_joystick
    not 5@ == 340957345
    then
    
    0AD3: v$TUTORIAL_NAME2 = format "TUTB%dG" $TUTORIAL_NUMBER
    09FD: get_gxt_string v$TUTORIAL_NAME2 width_to 0@  // ~k~~PED_SPRINT~ Select
    if
    0@ > 0
    then
    0AD3: v$TUTORIAL_NAME3 = format "TUTB%dG" $TUTORIAL_NUMBER
    end
    
    end
    
    03F0: enable_text_draw 1   
    
    0349: set_text_draw_font 1
    0342: set_text_draw_centered 1
    033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE_X $TUTORIAL_TEXT_SIZE_Y 
    081C: draw_text_outline 1 RGBA 0 0 0 1@
    0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
    0344: set_text_draw_linewidth 500.0 for_centered_text
    
    033E: set_draw_text_position $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y GXT v$TUTORIAL_NAME3  // Push  
    
    $TUTORIAL_TEXT_Y2 = 400.0
    
    03F0: enable_text_draw 1   
    
    0349: set_text_draw_font 2
    0342: set_text_draw_centered 1
    033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE2_X $TUTORIAL_TEXT_SIZE2_Y 
    081C: draw_text_outline 1 RGBA 0 0 0 1@
    0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
    if
    DIRECTFONT_INSTALLED == 1
    then    
    0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 1@
    end
    
    0344: set_text_draw_linewidth 500.0 for_centered_text
    
    033E: set_draw_text_position $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y2 GXT 'TUT0'  // Push
    
    end
    
////////////////////////////////////////////////////////////////////////////////////////////////////

06D1: v$TUTORIAL_NAME1 = 'TUTC' // v$ = string
0AD3: v$TUTORIAL_NAME2 = format "%d" $TUTORIAL_NUMBER 
098B: v$TUTORIAL_NAME3 = v$TUTORIAL_NAME1 + v$TUTORIAL_NAME2 // all string variables

if
8846: not  string v$TUTORIAL_NAME3 empty // v$
    then
    
    03F0: enable_text_draw 1   
    
    0349: set_text_draw_font 1
    0342: set_text_draw_centered 1
    033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE_X $TUTORIAL_TEXT_SIZE_Y 
    081C: draw_text_outline 1 RGBA 0 0 0 1@
    0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
    0344: set_text_draw_linewidth 500.0 for_centered_text
    
    033E: set_draw_text_position $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y GXT v$TUTORIAL_NAME3  // Push  
    
    $TUTORIAL_TEXT_Y2 = 400.0
    
    03F0: enable_text_draw 1   
    
    0349: set_text_draw_font 2
    0342: set_text_draw_centered 1
    033F: set_text_draw_letter_size $TUTORIAL_TEXT_SIZE2_X $TUTORIAL_TEXT_SIZE2_Y 
    081C: draw_text_outline 1 RGBA 0 0 0 1@
    0340: set_text_draw_RGBA TEXT_R TEXT_G TEXT_B 1@
    if
    DIRECTFONT_INSTALLED == 1
    then    
    0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 1@
    end
    
    0344: set_text_draw_linewidth 500.0 for_centered_text
    
    033E: set_draw_text_position $TUTORIAL_TEXT_X $TUTORIAL_TEXT_Y2 GXT 'TUT0'  // Push
    
    end        

return

///////////////////////////////////Выбор случайной модели для игрока///////////////////////////////////

:RANDOM_MODEL

if
FREEMODE_CUSTOM_SKIN == 1 
then
$PLAYER_SURVIVOR_SIDE = 1
$TEAMMATES_PED_TYPE = 26
jump to @RANDOM_MODEL_SKIP
end
    
random_int 0@ = MIN_SKIN2_GEN MAX_SKIN2_GEN
if and
0@ == SKIN2_GEN_SET    
UNITED_MAP == 0
$GAMEMODE_WAR == 0
    then            
    
    :NEWSKINS_CHECK1
    if
    0E4D: random_percent NEWSKINS2_GEN_PERCENT
    then
    random_int $RANDOM_MODE_MODEL $MIN_SKIN2 $MAX_SKIN2
    else
    random_int $RANDOM_MODE_MODEL $MIN_SKIN $MAX_SKIN
    end
    
    if or
    $FP_ON == 1
    $MUTATION_ACTIVE == 3
    then
    0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
    0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "SKINS" key v$FP_FILE
    if or
    not 1@ == 1
    FP_DEACTIVATED == 1
    jf @NEWSKINS_CHECK1
    end
    
    0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
    0AF0: 0@ = get_int_from_ini_file "data\skins.ini" section "BODYTYPE" key v$FP_FILE
    create_thread @FAT_SWC 0@
    
    if
    not model.Available($RANDOM_MODE_MODEL)
    then
    model.Load($RANDOM_MODE_MODEL)
    mload
    end        
    
    0665: get_actor PLAYER_ACTOR model_to 1@
    if
    87D6: not  1@ == $RANDOM_MODE_MODEL // @ == $ (int)
    then
    09C7: change_player PLAYER_CHAR model_to $RANDOM_MODE_MODEL
    0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
    end         
    
    v$NAME1 = "N_ME"
    0665: get_actor PLAYER_ACTOR model_to 1@ 
    if
    1@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 1@
    098B: v$NAME3 = v$NAME1 + v$NAME2 // all string variables
    
    //НАХУЙ ЭТОГО ЕБАНОГО КРИСТОФЕРА БЛЯТЬ, ЗАЕБАЛ, Я НЕ ТЫ, СУКА, ТЫ НЕ Я!
    098B: FUCK_CHRISTOPHER = v$NAME1 + v$NAME2 // all string variables
    
    gosub @YEAR_SELECT 
    
    $PLAYER_SURVIVOR_SIDE = 1
    $TEAMMATES_PED_TYPE = 26
    
    return
    end
    
random_int 0@ = MIN_SKIN2_GEN MAX_SKIN2_GEN
if and
0@ == SKIN2_GEN_SET    
UNITED_MAP == 0
$GAMEMODE_CRAZY == 1
    then            
    
    0AF0: 1@ = get_int_from_ini_file "data/otherskins.ini" section "INFO" key "MAX"
    1@ += 1
    random_int $RANDOM_MODE_MODEL 1 1@
    0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
    0AF0: $RANDOM_MODE_MODEL = get_int_from_ini_file "data/otherskins.ini" section "SKINS" key v$FP_FILE
    
    0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
    0AF0: 0@ = get_int_from_ini_file "data\skins.ini" section "BODYTYPE" key v$FP_FILE
    create_thread @FAT_SWC 0@   
    
    if
    not model.Available($RANDOM_MODE_MODEL)
    then
    model.Load($RANDOM_MODE_MODEL)
    mload
    end        
    
    0665: get_actor PLAYER_ACTOR model_to 1@
    if
    87D6: not  1@ == $RANDOM_MODE_MODEL // @ == $ (int)
    then
    09C7: change_player PLAYER_CHAR model_to $RANDOM_MODE_MODEL
    0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
    end         
    
    v$NAME1 = "N_ME"
    0665: get_actor PLAYER_ACTOR model_to 1@ 
    if
    1@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 1@
    098B: v$NAME3 = v$NAME1 + v$NAME2 // all string variables
    
    gosub @YEAR_SELECT 
    
    $PLAYER_SURVIVOR_SIDE = 1
    $TEAMMATES_PED_TYPE = 26
    
    return
    end    
    
//////////////////////////////////////////////////    

if
UNITED_MAP == 0
then
0209: $RANDOM_MODE_MODEL = random_int_in_ranges 7 285
else

if
$UNITED_III_SPAWN == 0
then

if
STORIES_MAP == 0
then
0209: $RANDOM_MODE_MODEL = random_int_in_ranges MINID_VC_SKIN MAXID_VC_SKIN
else
0209: $RANDOM_MODE_MODEL = random_int_in_ranges MINID_VCS_SKIN MAXID_VCS_SKIN
end

else

if
STORIES_MAP == 0
then
0209: $RANDOM_MODE_MODEL = random_int_in_ranges MINID_III_SKIN MAXID_III_SKIN
else
0209: $RANDOM_MODE_MODEL = random_int_in_ranges MINID_LCS_SKIN MAXID_LCS_SKIN
end

end

end

if
07DE:   model $RANDOM_MODE_MODEL exists  // versionB
jf @RANDOM_MODEL

0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key v$FP_FILE
if or
not 1@ == 1
$GAMEMODE_CRAZY == 1
jf @RANDOM_MODEL

if or
$FP_ON == 1
$MUTATION_ACTIVE == 3
then
0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "SKINS" key v$FP_FILE
if or
not 1@ == 1
FP_DEACTIVATED == 1
jf @RANDOM_MODEL
end

if
$GAMEMODE_WAR == 0
then
$PLAYER_SURVIVOR_SIDE = 1
$TEAMMATES_PED_TYPE = 26      
else

if
$PLAYER_ARMY_SIDE == 1
then

ARMY_SAVES_ON = 1

$PLAYER_BANDIT_SIDE = 0
$PLAYER_SWAT_SIDE = 0
$PLAYER_FERMERS_SIDE = 0

if
UNITED_MAP == 0
then

for 0@ = 0 to 14
$CAMP_AGRED_FLAG[0@] = 1
end

else

for 0@ = 0 to 9
$CAMP_AGRED_FLAG[0@] = 1
end

end

$PLAYER_SURVIVOR_SIDE = 0
$ARMY_DONT_ATTACK_PLAYER_FLAG = 1
$PEOPLE_ATTACK_PLAYER_FLAG = 1

if
UNITED_MAP == 0
then                           
$RANDOM_MODE_MODEL = #ARMYWAR
else

if   
$UNITED_III_SPAWN == 0
then
0084: $RANDOM_MODE_MODEL = $VC_ARMY_SKIN // (int)
else
0084: $RANDOM_MODE_MODEL = $III_ARMY_SKIN // (int)
end

end

$TEAMMATES_PED_TYPE = 27
$ALLOW_ARMY_CONVOY = 0
end

if
$PLAYER_BANDIT_SIDE == 1
then

BANDITS_SAVES_ON = 1

$PLAYER_ARMY_SIDE = 0
$PLAYER_SWAT_SIDE = 0
$PLAYER_FERMERS_SIDE = 0

if
UNITED_MAP == 0
then

for 0@ = 0 to 14
$CAMP_AGRED_FLAG[0@] = 1
end

else

for 0@ = 0 to 9
$CAMP_AGRED_FLAG[0@] = 1
end

end          

$PLAYER_SURVIVOR_SIDE = 0
$BANDITS_DONT_ATTACK_PLAYER_FLAG = 1
$PEOPLE_ATTACK_PLAYER_FLAG = 1

if
UNITED_MAP == 0
then
$RANDOM_MODE_MODEL = #BANDITWAR
else

if   
$UNITED_III_SPAWN == 0
then
0084: $RANDOM_MODE_MODEL = $VC_BANDITS_SKIN1 // (int)
else
0084: $RANDOM_MODE_MODEL = $III_BANDITS_SKIN1 // (int)
end

end

$TEAMMATES_PED_TYPE = 25
$ALLOW_BANDIT_CONVOY = 0
end

if
$PLAYER_SWAT_SIDE == 1
then

$PLAYER_ARMY_SIDE = 0
$PLAYER_BANDIT_SIDE = 0
$PLAYER_FERMERS_SIDE = 0

$PLAYER_SURVIVOR_SIDE = 0

if
UNITED_MAP == 0
then                           
$RANDOM_MODE_MODEL = #SWATWAR
else

if   
$UNITED_III_SPAWN == 0
then
0084: $RANDOM_MODE_MODEL = $VC_SWAT_SKIN // (int)
else
0084: $RANDOM_MODE_MODEL = $III_SWAT_SKIN // (int)
end

end

$TEAMMATES_PED_TYPE = 26
$ALLOW_SWAT_CONVOY = 0
end

if
$PLAYER_FERMERS_SIDE == 1
then

$PLAYER_ARMY_SIDE = 0
$PLAYER_BANDIT_SIDE = 0
$PLAYER_SWAT_SIDE = 0

$PLAYER_SURVIVOR_SIDE = 0
$RANDOM_MODE_MODEL = #FERMERWAR
$TEAMMATES_PED_TYPE = 26
$ALLOW_FERMERS_CONVOY = 0
end

end

if
$MUTATION_ACTIVE == 2
then

if
UNITED_MAP == 0
then
    
for 0@ = 0 to 14
$CAMP_AGRED_FLAG[0@] = 1
end

else

for 0@ = 0 to 9
$CAMP_AGRED_FLAG[0@] = 1
end

end

for 0@ = 0 to 14
$TRADER_ANGRY_FLAG[0@] = 1
end
    
end    
    
if
07DE:   model $RANDOM_MODE_MODEL exists  // versionB
jf @RANDOM_MODEL

0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
0AF0: 0@ = get_int_from_ini_file "data\skins.ini" section "BODYTYPE" key v$FP_FILE
create_thread @FAT_SWC 0@

:RANDOM_MODEL_SKIP  

while not model.Available($RANDOM_MODE_MODEL)
wait 0
model.Load($RANDOM_MODE_MODEL)
mload
end

0665: get_actor PLAYER_ACTOR model_to 1@
if
87D6: not  1@ == $RANDOM_MODE_MODEL // @ == $ (int)
then
09C7: change_player PLAYER_CHAR model_to $RANDOM_MODE_MODEL
0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
070D: rebuild_player PLAYER_CHAR
end

v$NAME1 = "N_ME"
0665: get_actor PLAYER_ACTOR model_to 1@ 
if
1@ > 10000
then
v$NAME1 = "N_"
end
0AD3: v$NAME2 = format "%d" 1@
098B: v$NAME3 = v$NAME1 + v$NAME2 // all string variables

//НАХУЙ ЭТОГО ЕБАНОГО КРИСТОФЕРА БЛЯТЬ, ЗАЕБАЛ, Я НЕ ТЫ, СУКА, ТЫ НЕ Я!
098B: FUCK_CHRISTOPHER = v$NAME1 + v$NAME2 // all string variables

if
FREEMODE_CUSTOM_NAME == 1 
then
06D1: v$NAME3 = "F_NAME" // v$ = string

if
$FP_ON == 1
then
0AD3: v$FP_FILE = format "%d" $RANDOM_MODE_MODEL
0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "SKINS" key v$FP_FILE
if or
1@ == 1
FP_DEACTIVATED == 1
    then
    $FP_ON = 0
    $FP_ONLY_IN_CAR = 1
    end
end

end

gosub @YEAR_SELECT
 
return

:YEAR_SELECT

////////////////////////////////////////////

if
UNITED_MAP == 0
then
GAME_START_YEAR = 1992
GAME_CURRENT_YEAR = 1992
else

if
STORIES_MAP == 0
then

if
$UNITED_III_SPAWN == 1
then
GAME_START_YEAR = 2001
GAME_CURRENT_YEAR = 2001
else
GAME_START_YEAR = 1986
GAME_CURRENT_YEAR = 1986
end

else

if
$UNITED_III_SPAWN == 1
then
GAME_START_YEAR = 1998
GAME_CURRENT_YEAR = 1998
else
GAME_START_YEAR = 1984
GAME_CURRENT_YEAR = 1984
end

end
   
end

////////////////////////////////////////////

return