const
KEYS_TYPED_NUM = 26@
CHARACTER_SELECT_MUSIC_STARTED_FLAG = 22@
CURRENT_LAYOUT = $CURRENT_LAYOUT
CAPSLOCK_ON_FLAG = $CAPSLOCK_ON_FLAG
TEAMMATES_CUS_NUM = 25@
KOMANDA_KUKLA_PLAYER = $LV_BMB_ACTVTD
KOMANDA_KUKLA_TEAMMATE1 = $LV_BMB_ACTVTD
KOMANDA_KUKLA_TEAMMATE2 = $LS_BMB_ACTVTD
KOMANDA_KUKLA_TEAMMATE3 = $SF_BMB_ACTVTD
RANDOM_SELECT_ALL_CHAR_PARAMS = $C_GL_DO_NOT_A_Z
end

:CHARACTER_SETTINGSS

TEAMMATES_CUS_NUM = 0

:CHARACTER_SETTINGSS_PRE2

FREEMODE_CUSTOM_SKIN = 0

:CHARACTER_SETTINGSS_PRE

if
27@ == 0
then

////////////////////////////////////////////////

const
EXTRA_SKINS_COUNT_MIN = 29@
EXTRA_SKINS_COUNT_MAX = 30@
end

////////////////////////////////////////////////    
    
if
UNITED_MAP == 0
then
EXTRA_SKINS_COUNT_MIN = 7
EXTRA_SKINS_COUNT_MAX = 288
else
    
if
$UNITED_III_SPAWN == 1
then
    
if
STORIES_MAP == 0
then
EXTRA_SKINS_COUNT_MIN = 15850
EXTRA_SKINS_COUNT_MAX = 15962
else
EXTRA_SKINS_COUNT_MIN = 15743
EXTRA_SKINS_COUNT_MAX = 15847
end
    
else
    
if
STORIES_MAP == 0
then
EXTRA_SKINS_COUNT_MIN = 15599
EXTRA_SKINS_COUNT_MAX = 15742
else
EXTRA_SKINS_COUNT_MIN = 16791
EXTRA_SKINS_COUNT_MAX = 16899
end
    
end
    
end

else

if and
UNITED_MAP == 0
27@ == 1
then

if
NEWSKINS2_NABOR_LISTATB == 0
then
0AF0: EXTRA_SKINS_COUNT_MIN = get_int_from_ini_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\New Survivors\CONFIG\NEWSKINS.ini" section "NEWSKINS" key "NEW_SKINS_COUNT_MIN"  
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\New Survivors\CONFIG\NEWSKINS.ini" section "NEWSKINS" key "NEW_SKINS_COUNT_MAX"
else
0AF0: EXTRA_SKINS_COUNT_MIN = get_int_from_ini_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\New Survivors\CONFIG\NEWSKINS.ini" section "NEWSKINS2" key "NEW_SKINS_COUNT_MIN"  
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\New Survivors\CONFIG\NEWSKINS.ini" section "NEWSKINS2" key "NEW_SKINS_COUNT_MAX"
end

else

if
27@ == 4
then

if
8AAB: not  file_exists "modloader/MODLOADER GLOBAL FILES/ExtraContent/New Selectable Skins/EXTRASKINS.dat"
then
EXTRA_SKINS_COUNT_MIN = 7
EXTRA_SKINS_COUNT_MAX = 7
NEWSKINS2_NABOR_LISTATB = 6928
else
0AF0: EXTRA_SKINS_COUNT_MIN = get_int_from_ini_file "modloader/MODLOADER GLOBAL FILES/ExtraContent/New Selectable Skins/EXTRASKINS.dat" section "EXTRASKINS" key "EXTRA_SKINS_COUNT_MIN"  
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "modloader/MODLOADER GLOBAL FILES/ExtraContent/New Selectable Skins/EXTRASKINS.dat" section "EXTRASKINS" key "EXTRA_SKINS_COUNT_MAX"
end

else

if
27@ == 2
then
EXTRA_SKINS_COUNT_MIN = 1

//////////////////////////////////////////////////////////////////////////////////////////////////////

if
UNITED_MAP == 0
then
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "data/otherskins.ini" section "INFO" key "MAX"
else

if
STORIES_MAP == 0
then

if
$UNITED_III_SPAWN == 1
then
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "data/otherskins1.ini" section "INFO" key "MAX"
else
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "data/otherskins2.ini" section "INFO" key "MAX"
end

else

if
$UNITED_III_SPAWN == 1
then
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "data/otherskins4.ini" section "INFO" key "MAX"
else
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "data/otherskins5.ini" section "INFO" key "MAX"
end

end

end

//////////////////////////////////////////////////////////////////////////////////////////////////////

else
EXTRA_SKINS_COUNT_MIN = 1
0AF0: EXTRA_SKINS_COUNT_MAX = get_int_from_ini_file "data/otherskinscs.ini" section "INFO" key "MAX"
end

end

end

end

:CHARACTER_SETTINGSS2

////////////////////////////////////////////////                                                                                                                                                                        

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME749'

if
FREEMODE_CUSTOM_SKIN == 0
then
0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)

if and
27@ == 3
$RANDOM_MODE_MODEL == 0
TEAMMATES_CUS_NUM > 0
then
28@ += 1
end

FREEMODE_CUSTOM_SKIN = -1
else

if
FREEMODE_CUSTOM_SKIN == 1
then

//////////////

if
TEAMMATES_CUS_NUM == 0
then
008B: 28@ = $RANDOM_MODE_MODEL // (int)
else
    
if
TEAMMATES_CUS_NUM == 1
then
if and
not 27@ == 2
not 27@ == 3
    then
    008B: 28@ = TEAM1_SKIN // (int)
    end
end
    
if
TEAMMATES_CUS_NUM == 2
then  
if and
not 27@ == 2
not 27@ == 3
    then
    008B: 28@ = TEAM2_SKIN // (int)  
    end 
end
    
if
TEAMMATES_CUS_NUM == 3
then   
if and
not 27@ == 2
not 27@ == 3
    then
    008B: 28@ = TEAM3_SKIN // (int) 
    end
end
    
end

//////////////
                                       
end

end

if
$TRADER_SAVE_USLUGA == 1
then
$TRADER_SAVE_USLUGA = 0

if or
27@ == 2
27@ == 3
then
008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
end

end

gosub @SECOND_NABOR_GET_ID

gosub @SKIN_REFRESH

if or
27@ == 2
27@ == 3
then
008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
end

32@ = 0

if
CHARACTER_SELECT_MUSIC_STARTED_FLAG == 0
then

fade 1 500
wait 500

CHARACTER_SELECT_MUSIC_STARTED_FLAG = 1

if
UNITED_MAP == 0
then
$MUSIC_MISSION = Audiostream.Load("AUDIO\SOUNDS\CS_OriginMusic.wav")
Audiostream.Volume($MUSIC_MISSION) = 0.0
Audiostream.Loop($MUSIC_MISSION, 1)
Audiostream.PerformAction($MUSIC_MISSION, PLAY)
else
$MUSIC_MISSION = Audiostream.Load("AUDIO\SOUNDS\CS_ElevatorMusic.wav")
Audiostream.Volume($MUSIC_MISSION) = 0.0
Audiostream.Loop($MUSIC_MISSION, 1)
Audiostream.PerformAction($MUSIC_MISSION, PLAY)
end

/////////////////////Плавное нарастание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_MISSION // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 2000
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1

////////////////////////////////////////////////////////////////////////////
end

while true
gosub @SKINS_NABOR_RENDER_TEXT
wait 0
gosub @SKINS_NABOR_RENDER_TEXT

if
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 17
    then
    random_int 28@ EXTRA_SKINS_COUNT_MIN EXTRA_SKINS_COUNT_MAX
    RANDOM_SELECT_ALL_CHAR_PARAMS = 1
    CHAR_SELECT_PLA_PAD = 1
    jump to @CHARACTER_RANDOM_SKIN_REFERSH
    end
    
if
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
    then
    random_int 28@ EXTRA_SKINS_COUNT_MIN EXTRA_SKINS_COUNT_MAX
    jump to @CHARACTER_RANDOM_SKIN_REFERSH
    end    

if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
32@ > 500
    then
    32@ = 0
    
    if and
    27@ == 3
    UNITED_MAP == 0
    then
    0337: set_actor $NAME_ACTOR visibility 0
    0D10: set_actor $NAME_ACTOR alpha 0 // IF and SET
    end
    
    if and
    27@ == 1
    NEWSKINS2_NABOR_LISTATB == 0
    then
    NEWSKINS2_NABOR_LISTATB += 1
    else
    27@ += 1
    NEWSKINS2_NABOR_LISTATB = 0
    end
    
    if and
    27@ == 1
    UNITED_MAP == 1
    then
    27@ = 2
    end        
    
    if and
    27@ == 3
    UNITED_MAP == 1
    then
    27@ = 0
    end
    
    if and
    27@ == 3
    UNITED_MAP == 0
    then
    27@ = 4    
    end
    
    if
    27@ > 4
    then
    27@ = 0
    end       
    
    jump to @CHARACTER_SETTINGSS_PRE2    
    end

00E2: get_player CHAR_SELECT_PLA_PAD key 1 state_to 0@
if and
0A4B:   controls_set_to_joystick
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 8
    then
    0@ = -1
    end

if and
0@ < 0
32@ > 85
    then
    32@ = 0
    
    while true
    
    gosub @SKINS_NABOR_RENDER_TEXT
    
    if or
    27@ == 3
    27@ == 4
    then
    wait 0
    end
    
    gosub @SKINS_NABOR_RENDER_TEXT
    
    ////////////////////////////////////////////////////////////////////////////////////////////////        
            
    28@ += 1        
    
    if and
    28@ == 15673
    UNITED_MAP == 1
    STORIES_MAP == 0
    then
    28@ = 15687
    end
    
    :CHARACTER_RANDOM_SKIN_REFERSH
    
    if
    001D:   28@ > EXTRA_SKINS_COUNT_MAX  // (int)
    then
//    0AD1: show_formatted_text_highpriority "28@ (%d) > EXTRA_SKINS_COUNT_MAX" time 2000 28@
    0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ += 1
    end
    
    end
    
    gosub @SECOND_NABOR_GET_ID
    
    0AD3: v$FP_FILE = format "%d" 28@        
    0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key v$FP_FILE    
    if and
    07DE:   model 28@ exists  // versionB
    not 1@ == 2
    then
    break
    else
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    if
    not 27@ == 4
    then
//    28@ += 1
    else
    
    if
    001D:   28@ > EXTRA_SKINS_COUNT_MAX  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ += 1
    end
    
    end
    
    break
    end
    
    end
        
    if
    001D:   28@ > EXTRA_SKINS_COUNT_MAX  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ += 1
    end
    
    end
        
    ////////////////////////////////////////////////////////////////////////////////////////////////    
    
    end            
    
    gosub @SKIN_REFRESH
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    end

00E2: get_player CHAR_SELECT_PLA_PAD key 1 state_to 0@
if and
0A4B:   controls_set_to_joystick
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 9
    then
    0@ = 1
    end

if and
0@ > 0
32@ > 85
    then
    32@ = 0
    
    while true
    
    gosub @SKINS_NABOR_RENDER_TEXT
    
    if or
    27@ == 3
    27@ == 4
    then
    wait 0
    end
    
    gosub @SKINS_NABOR_RENDER_TEXT
    
    ////////////////////////////////////////////////////////////////////////////////////////////////    
        
    28@ -= 1
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ -= 1
    end
    
    if and
    28@ == 15686
    UNITED_MAP == 1
    STORIES_MAP == 0
    then
    28@ = 15672
    end
    
    if
    801D: not  28@ > EXTRA_SKINS_COUNT_MIN  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MAX // (int)
//    0AD1: show_formatted_text_highpriority "28@(%d) < EXTRA_SKINS_COUNT_MIN" time 2000 28@
    end
    
    gosub @SECOND_NABOR_GET_ID
    
    0AD3: v$FP_FILE = format "%d" 28@        
    0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key v$FP_FILE    
    if and
    07DE:   model 28@ exists  // versionB
    not 1@ == 2
    then
    break
    else
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    if
    not 27@ == 4
    then
//    28@ -= 1
    else
    
    if
    801D: not  28@ > EXTRA_SKINS_COUNT_MIN  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MAX // (int)
    end
    
    break
    end
    
    end
        
    if
    801D: not  28@ > EXTRA_SKINS_COUNT_MIN  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MAX // (int)
    end
        
    ////////////////////////////////////////////////////////////////////////////////////////////////    
    
    end
                
    gosub @SKIN_REFRESH
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    end
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 15
not TEAMMATES_CUS_NUM > 0
33@ > 500
    then
    
    0652: 0@ = integer_stat 276
    if
    0@ == 1
    then
    0629: change_integer_stat 276 to 0
    //Выключаем билдинг одежды Карла 
    0E6A: make_nop 0x5A834D size 5
    0337: set_actor $NAME_ACTOR visibility 0
    0D10: set_actor $NAME_ACTOR alpha 0 // IF and SET
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()        
    return
    end
    
if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
0E45: frame_mod 30
then
jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP1
end    
    
if
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
    then
    :RANDOM_SELECT_CHAR_PARAMS_JUMP1
    text.RemoveTextBox()
    text.ClearAll()
    wait 100    
    gosub @CHARACTER_NAME_SELECT
    
    if
    FREEMODE_CUSTOM_NAME == 1
    then
    FREEMODE_CUSTOM_SKIN = 1    
    gosub @SECOND_NABOR_GET_ID2
    
    if
    TEAMMATES_CUS_NUM == 0
    then
    008A: $RANDOM_MODE_MODEL = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "PLAYER" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS
    else
    
    if
    TEAMMATES_CUS_NUM == 1
    then
    008A: TEAM1_SKIN = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "TEAM1" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS
    end
    
    if
    TEAMMATES_CUS_NUM == 2
    then
    008A: TEAM2_SKIN = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "TEAM2" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS
    end
    
    if
    TEAMMATES_CUS_NUM == 3
    then
    008A: TEAM3_SKIN = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "TEAM3" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS
    end
    
    end
            
    else
    FREEMODE_CUSTOM_SKIN = 1
    gosub @SECOND_NABOR_GET_ID2
    
    if
    TEAMMATES_CUS_NUM == 0
    then
    008A: $RANDOM_MODE_MODEL = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "PLAYER" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS
    else
    
    if
    TEAMMATES_CUS_NUM == 1
    then
    008A: TEAM1_SKIN = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "TEAM1" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS 
    end
    
    if
    TEAMMATES_CUS_NUM == 2
    then
    008A: TEAM2_SKIN = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "TEAM2" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS  
    end
    
    if
    TEAMMATES_CUS_NUM == 3
    then
    008A: TEAM3_SKIN = 28@ // (int)
    0AF1: write_int 28@ to_ini_file "data\survsettings.temp" section "TEAM3" key "SKIN"
    gosub @RETURN_INDEX_OF_ASS
    end
    
    end
                    
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
    jump to @CHARACTER_SETTINGSS_PRE        
    end
    
    end
    
if and
FREEMODE_CUSTOM_NAME == 1
FREEMODE_CUSTOM_SKIN == 1
then

if
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
then
jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP3
end

///////////////////////////////////Потдверждение выбора персонажа/////////////////////////////////// 

Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
wait $MENU_BACK_WAIT 

while true
wait 0

09C1: add_next_text_to_brief_history 0
if
TEAMMATES_CUS_NUM == 0
then
text.ShowH('GAME752',10,1)
else

if
not COOP_ACTIVE_FLAG == 1
then
text.ShowH('GAME949',10,1)
else
text.ShowH('AME949B',10,1)
end

end

if 
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 10
    then
    FREEMODE_CUSTOM_NAME = 0
    Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_BACK_SOUND, 0)
    Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)
    
    if
    27@ == 2
    then
    $TRADER_SAVE_USLUGA = 1
    end
                    
    jump to @CHARACTER_SETTINGSS_PRE
    end
    
if 
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 11
    then
    :RANDOM_SELECT_CHAR_PARAMS_JUMP3
    FREEMODE_CUSTOM_NAME = 1
    
    if and
    27@ == 4
    UNITED_MAP == 0
    TEAMMATES_CUS_NUM == 0
    then
    text.ShowH('GME1268',2000,1)
    wait 2000
    PLAYER_HAS_CUSTOM_VOICE = -1
    gosub @CHARACTER_VOICE_SELECT            
    end
    
    if and
    UNITED_MAP == 0
    TEAMMATES_CUS_NUM == 0
    then
    gosub @RANDOM_WEAPON_NABOR_SELECT
    if
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        RANDOM_SELECT_ALL_CHAR_PARAMS = 1
        end
    end
    
    ///////////////////////////////////Потдверждение настройки своей изначальной команды/////////////////////////////////// 
    
    if
    TEAMMATES_CUS_NUM == 0
    then
    
    if
    COOP_ACTIVE_FLAG == 1
    then
    text.ShowH('AME948C',2000,1)
    wait 2000
    jump to @COOP_CHAR_SEL
    end
    
    /////////////////////////////////////////////////////////////////
    
    if
    RANDOM_SELECT_ALL_CHAR_PARAMS == 1
    then
    if
    0E4D: random_percent 30
        then
        jump to @COOP_CHAR_SEL
        else
        if
        0E4D: random_percent 15
            then
            jump to @COOP_CHAR_SEL
            else
            jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP5
            end
        end    
    end
    
    Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
    Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
    wait $MENU_BACK_WAIT 
    
    while true
    wait 0
    
    09C1: add_next_text_to_brief_history 0
    
    text.ShowH('GAME942',10,1)
    
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 11
        then        
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        :COOP_CHAR_SEL
        TEAMMATES_CUS_NUM = 1
        FREEMODE_CUSTOM_NAME = 0
        
        if
        COOP_ACTIVE_FLAG == 1
        then
        CHAR_SELECT_PLA_PAD = 1
        end                
        
        if
        02F2:   actor $NAME_ACTOR model == 0
        then
        28@ = 2
        TEAM1_SKIN = 2
        else
        0084: TEAM1_SKIN = $RANDOM_MODE_MODEL // (int)
        end
        
        0665: get_actor $NAME_ACTOR model_to 0@
        04C4: store_coords_to 1@ 2@ 3@ from_actor $NAME_ACTOR with_offset -0.5 -0.5 0.0
        4@ = actor.Angle($NAME_ACTOR)
        
        while not model.Available(0@)
        wait 0
        model.Load(0@)
        mload
        end
        
        KOMANDA_KUKLA_PLAYER = actor.Create(26,0@,1@,2@,3@)
        0E32: set_char_coordinates_simple KOMANDA_KUKLA_PLAYER coord 1@ 2@ 3@
        actor.Angle(KOMANDA_KUKLA_PLAYER) = 4@
                
        jump to @CHARACTER_SETTINGSS_PRE        
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 10
        then
        SINGLE_SPAWN_FLAG = 1
        break             
        end
        
    end
    
    /////////////////////////////////////////////////////////////////
    
    else
    
    :TEAM_SETTING_GOGO
    
    /////////////////////////////////////////////////////////////////
    
    if and
    TEAMMATES_CUS_NUM < 3
    not COOP_ACTIVE_FLAG == 1
        then
        
        if
        RANDOM_SELECT_ALL_CHAR_PARAMS == 1
        then
        if
        0E4D: random_percent 30
            then
            jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP4
            else
            if
            0E4D: random_percent 15
                then
                jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP4
                else
                jump to @TEAM_SETTING_END
                end
            end    
        end
        
        //////////////////////////////
        
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        wait $MENU_BACK_WAIT 
        
        while true
        wait 0
        
        09C1: add_next_text_to_brief_history 0
        
        text.ShowH('GAME943',10,1)
        
        if 
        0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 10
            then
            :RANDOM_SELECT_CHAR_PARAMS_JUMP4        
            Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
            Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
            TEAMMATES_CUS_NUM += 1
            FREEMODE_CUSTOM_NAME = 0
            
            if
            TEAMMATES_CUS_NUM == 2
            then
            0084: TEAM2_SKIN = TEAM1_SKIN // (int)
            0665: get_actor $NAME_ACTOR model_to 0@
            04C4: store_coords_to 1@ 2@ 3@ from_actor $NAME_ACTOR with_offset 0.5 -0.5 0.0
            4@ = actor.Angle($NAME_ACTOR)
            
            while not model.Available(0@)
            wait 0
            model.Load(0@)
            mload
            end
            
            KOMANDA_KUKLA_TEAMMATE2 = actor.Create(26,0@,1@,2@,3@)
            0E32: set_char_coordinates_simple KOMANDA_KUKLA_TEAMMATE2 coord 1@ 2@ 3@
            actor.Angle(KOMANDA_KUKLA_TEAMMATE2) = 4@
            end
            
            if
            TEAMMATES_CUS_NUM == 3
            then
            0084: TEAM3_SKIN = TEAM2_SKIN // (int)
            0665: get_actor $NAME_ACTOR model_to 0@
            04C4: store_coords_to 1@ 2@ 3@ from_actor $NAME_ACTOR with_offset 0.0 -0.5 0.0
            4@ = actor.Angle($NAME_ACTOR)
            
            while not model.Available(0@)
            wait 0
            model.Load(0@)
            mload
            end
            
            KOMANDA_KUKLA_TEAMMATE3 = actor.Create(26,0@,1@,2@,3@)
            0E32: set_char_coordinates_simple KOMANDA_KUKLA_TEAMMATE3 coord 1@ 2@ 3@
            actor.Angle(KOMANDA_KUKLA_TEAMMATE3) = 4@
            end
            
            jump to @CHARACTER_SETTINGSS_PRE        
            end
            
        if 
        0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 11
            then
            jump to @TEAM_SETTING_END             
            end
            
        end
        
        //////////////////////////////
        
        else
        
        :TEAM_SETTING_END
        09C1: add_next_text_to_brief_history 0
        
        if
        not COOP_ACTIVE_FLAG == 1
        then
        text.ShowH('GAME948',2000,1)
        wait 2000
        else
        CHAR_SELECT_PLA_PAD = 0
        text.ShowH('AME948B',2000,1)
        wait 2000
        end
        
        end
        
    /////////////////////////////////////////////////////////////////    
    
    end
    
    :RANDOM_SELECT_CHAR_PARAMS_JUMP5
    
    ///////////////////////////////////Выбор стиля анимации/////////////////////////////////// 
    
    if and
    82F2: not  actor $NAME_ACTOR model == 0
    not $RANDOM_MODE_MODEL == 0
    not UNITED_MAP == 1
    then
    
    0629: change_integer_stat 276 to 0
    //Выключаем билдинг одежды Карла 
    0E6A: make_nop 0x5A834D size 5        
    
    Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
    Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
    wait $MENU_BACK_WAIT 
    
    while true
    wait 0
    
    if and
    RANDOM_SELECT_ALL_CHAR_PARAMS == 1
    0E45: frame_mod 30
    then
    random_int 0@ 0 to 3
    if
    0@ == 0
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP5A
        end
    if
    0@ == 1
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP5B
        end
    if
    0E4D: random_percent 30
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP5C
        else
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP5A
        end        
    end
    
    09C1: add_next_text_to_brief_history 0
    
    if
    0A4B:   controls_set_to_joystick
    then
    text.ShowH('GME991B',10,1)
    
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
        then
        0AF1: write_int 0 to_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
        062A: change_float_stat 23 to 0.0
        062A: change_float_stat 21 to 0.0
        070D: rebuild_player PLAYER_CHAR        
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        break
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
        then
        0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
        062A: change_float_stat 23 to 501.0
        062A: change_float_stat 21 to 0.0
        070D: rebuild_player PLAYER_CHAR
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 17
        then
        0AF1: write_int 2 to_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
        062A: change_float_stat 23 to 0.0
        062A: change_float_stat 21 to 1000.0
        070D: rebuild_player PLAYER_CHAR
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end  
    
    else    
    text.ShowH('GAME991',10,1)
    
    if 
    0E3D:   key_pressed 49
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP5A
        0AF1: write_int 0 to_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
        062A: change_float_stat 23 to 0.0
        062A: change_float_stat 21 to 0.0
        070D: rebuild_player PLAYER_CHAR        
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        break
        end
        
    if 
    0E3D:   key_pressed 50
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP5B
        0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
        062A: change_float_stat 23 to 501.0
        062A: change_float_stat 21 to 0.0
        070D: rebuild_player PLAYER_CHAR
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if 
    0E3D:   key_pressed 51
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP5C
        0AF1: write_int 2 to_ini_file "data\survsettings.temp" section "PLAYER" key "ANIM_STYLE"
        062A: change_float_stat 23 to 0.0
        062A: change_float_stat 21 to 1000.0
        070D: rebuild_player PLAYER_CHAR
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end  
    
    end          
        
    end
    
    end
    
    ///////////////////////////////////Выбор локации/////////////////////////////////// 
    
    if and
    UNITED_MAP == 0
    not SURVIVAL_CUSTOM_WEAPON_NABOR == 1
    then    
    
    Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
    Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
    wait $MENU_BACK_WAIT 
    
    while true
    wait 0
    
    if and
    RANDOM_SELECT_ALL_CHAR_PARAMS == 1
    0E45: frame_mod 30
    then
    random_int 0@ 0 5
    if
    0@ == 0
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMPPR6A_PRE        
        end
    if
    0@ == 1
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMPPR6B_PRE        
        end
    if
    0@ == 2
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMPPR6C_PRE        
        end
    if
    0@ == 3
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMPPR6D_PRE        
        end
    if
    0@ == 4
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMPPR6E_PRE        
        end                   
    end
    
    09C1: add_next_text_to_brief_history 0
    if
    0A4B:   controls_set_to_joystick
    then
    text.ShowH('GE1020B',10,1)
    
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 15
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMPPR6A_PRE
        0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 1        
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        break
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMPPR6B_PRE
        0AF1: write_int 2 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 2
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMPPR6C_PRE
        0AF1: write_int 3 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 3
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 17
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMPPR6D_PRE
        0AF1: write_int 4 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 4
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 6
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMPPR6E_PRE
        0AF1: write_int 0 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 0
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end       
    
    else    
    text.ShowH('GME1020',10,1)
    
    if 
    0E3D:   key_pressed 49
        then
        0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 1        
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
        break
        end
        
    if 
    0E3D:   key_pressed 50
        then
        0AF1: write_int 2 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 2
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if 
    0E3D:   key_pressed 51
        then
        0AF1: write_int 3 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 3
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if 
    0E3D:   key_pressed 52
        then
        0AF1: write_int 4 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 4
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end
        
    if
    0E3D:   key_pressed 53
        then
        0AF1: write_int 0 to_ini_file "data\survsettings.temp" section "PLAYER" key "LOC_NUM"
        LOCATION_NUM = 0
        Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
        Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)     
        break
        end       
    
    end         
        
    end
    
    end
    
    ///////////////////////////////////Потдверждение выбора "Реалистичного режима"///////////////////////////////////         
    
    Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
    Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
    wait $MENU_BACK_WAIT 
    
    if
    not COOP_ACTIVE_FLAG == 1
    then
    
    while true
    wait 0
    
    if and
    RANDOM_SELECT_ALL_CHAR_PARAMS == 1
    0E45: frame_mod 30
    then
    random_int 0@ 0 2
    if
    0@ == 0
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP6A
        else
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP6B
        end
    end
    
    09C1: add_next_text_to_brief_history 0
    text.ShowH('GME1288',10,1)
    
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 11
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP6A
        0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "REALISM_MODE"
        REALISM_MODE = 1        
        0629: change_integer_stat 282 to 1                        
        break        
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 10
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP6B
        0AF1: write_int 0 to_ini_file "data\survsettings.temp" section "PLAYER" key "REALISM_MODE"
        REALISM_MODE = 0        
        break        
        end                    
    
    end
    
    end                                                      
    
    ///////////////////////////////////Потдверждение выбора игры сразу за отморзка\изгоя/////////////////////////////////// 
    
    Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
    Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
    Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
    wait $MENU_BACK_WAIT 
    
    while true
    wait 0
    
    if and
    RANDOM_SELECT_ALL_CHAR_PARAMS == 1
    0E45: frame_mod 30
    then
    random_int 0@ 0 2
    if
    0@ == 0
        then
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP7A
        else
        jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP7B
        end
    end
    
    09C1: add_next_text_to_brief_history 0
    
    text.ShowH('GAME811',10,1)
    
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 11
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP7A
        0AF1: write_int 0 to_ini_file "data\survsettings.temp" section "PLAYER" key "SCUMBAG_FLAG"        
        Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_HORROR01_SOUND, 0)
        Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)
        return
        end
        
    if 
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 10
        then
        :RANDOM_SELECT_CHAR_PARAMS_JUMP7B
        CARMA_BAD_POINTS = 100
        
        0629: change_integer_stat 275 to 1
        
        0AF1: write_int 1 to_ini_file "data\survsettings.temp" section "PLAYER" key "SCUMBAG_FLAG"
        Audiostream.Volume($MENU_HORROR01_SOUND) = $SOUNDS_VOLUME 
        Audiostream.Loop($MENU_HORROR01_SOUND, 0)
        Audiostream.PerformAction($MENU_HORROR01_SOUND, PLAY)
        
        if
        UNITED_MAP == 0
        then
        
        CARMA_VERY_BAD_FLAG = 1
        $PEOPLE_ATTACK_PLAYER_FLAG = 1
        $BANDITS_DONT_ATTACK_PLAYER_FLAG = 1
        BANDITS_SAVES_ON = 1
        create_thread @ZN_SAVE
        create_thread @C_LEADE2
        create_thread @FR_HELI
        create_thread @PARK_C
        wait 0
        
        ////////////////////////////////////////////////
    
        for 0@ = 86 to 90
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        for 0@ = 91 to 95
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        for 0@ = 77 to 85
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        for 0@ = 96 to 99
        
        $PARK_CAR_DOORS[0@] = 1
         
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        if
        UNITED_MAP == 0
        then
        
        for 0@ = 0 to 13
        $CAMP_AGRED_FLAG[0@] = 1
        end
        
        else
        
        for 0@ = 0 to 9
        $CAMP_AGRED_FLAG[0@] = 1
        end
        
        end
        
        ////////////////////////////////////////////////////////////////            
    
        0879: enable_gang_wars 0
        
        if
        UNITED_MAP == 0
        then
        create_thread @ZON_SA
        else
        
        if
        $UNITED_III_SPAWN == 1
        then
        create_thread @ZON_III
        else
        create_thread @ZON_VC
        end
        
        end
        
        0879: enable_gang_wars 1
        
        ////////////////////////////////////////////////////////////////
        
        else
        
        if
        $UNITED_III_SPAWN == 1
        then  
        
        CARMA_VERY_BAD_FLAG = 1
        $PEOPLE_ATTACK_PLAYER_FLAG = 1
        $BANDITS_DONT_ATTACK_PLAYER_FLAG = 1
        BANDITS_SAVES_ON = 1
        create_thread @ZN_SAVE
        create_thread @C_LEADE2
        create_thread @SW_HELI
        create_thread @PARK_C
        wait 0
        
        ////////////////////////////////////////////////
    
        for 0@ = 28 to 33
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        for 0@ = 34 to 35
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        for 0@ = 47 to 51
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////    
        
        if
        UNITED_MAP == 0
        then
        
        for 0@ = 0 to 13
        $CAMP_AGRED_FLAG[0@] = 1
        end
        
        else
        
        for 0@ = 0 to 9
        $CAMP_AGRED_FLAG[0@] = 1
        end
        
        end
        
        ////////////////////////////////////////////////////////////////                
    
        0879: enable_gang_wars 0
        
        if
        UNITED_MAP == 0
        then
        create_thread @ZON_SA
        else
        
        if
        $UNITED_III_SPAWN == 1
        then
        create_thread @ZON_III
        else
        create_thread @ZON_VC
        end
        
        end
        
        0879: enable_gang_wars 1
        
        ////////////////////////////////////////////////////////////////
            
        else
        
        CARMA_VERY_BAD_FLAG = 1
        $PEOPLE_ATTACK_PLAYER_FLAG = 1
        $BANDITS_DONT_ATTACK_PLAYER_FLAG = 1
        BANDITS_SAVES_ON = 1
        create_thread @ZN_SAVE
        create_thread @C_LEADE2
        create_thread @FR_HELI        
        create_thread @PARK_C
        wait 0
        
        ////////////////////////////////////////////////
    
        for 0@ = 36 to 41
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////
        
        for 0@ = 45 to 48
        
        $PARK_CAR_DOORS[0@] = 1
        
        if
        056E:   car $PARK_CAR[0@] defined
        then
        car.DoorStatus($PARK_CAR[0@],0)    
        end
        
        end
        
        ////////////////////////////////////////////////              
        
        if
        UNITED_MAP == 0
        then
        
        for 0@ = 0 to 13
        $CAMP_AGRED_FLAG[0@] = 1
        end
        
        else
        
        for 0@ = 0 to 9
        $CAMP_AGRED_FLAG[0@] = 1
        end
        
        end
        
        ////////////////////////////////////////////////////////////////            
    
        0879: enable_gang_wars 0
        
        if
        UNITED_MAP == 0
        then
        create_thread @ZON_SA
        else
        
        if
        $UNITED_III_SPAWN == 1
        then
        create_thread @ZON_III
        else
        create_thread @ZON_VC
        end
        
        end
        
        0879: enable_gang_wars 1
        
        ////////////////////////////////////////////////////////////////
        
        end
        
        end
             
        return
        end
        
    end
    
    end
    
end

else        
FREEMODE_CUSTOM_NAME = 0
FREEMODE_CUSTOM_SKIN = 0
end            

end

return

:RANDOM_WEAPON_NABOR_SELECT

text.ClearAll()
wait 50
cinema.Widescreen(1)

0@ = 0
32@ = 0

09C1: add_next_text_to_brief_history 0   
0512: show_permanent_text_box 'GAME822'

while true
wait 0

if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
0E45: frame_mod 30
then
random_int 0@ 0 11
RANDOM_SELECT_ALL_CHAR_PARAMS = 2
end

if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 2
0E45: frame_mod 60
then
RANDOM_SELECT_ALL_CHAR_PARAMS = 3
end

00E2: get_player CHAR_SELECT_PLA_PAD key 1 state_to 1@
if and
0A4B:   controls_set_to_joystick
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 8
    then
    1@ = -1
    end

if and
1@ < 0
32@ > 85
    then
    32@ = 0
    0@ += 1            
    Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
    Audiostream.Loop($MENU_FOCUS_SOUND, 0)
    Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME    
    end
    
00E2: get_player CHAR_SELECT_PLA_PAD key 1 state_to 1@
if and
0A4B:   controls_set_to_joystick
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 9
    then
    1@ = 1
    end

if and
1@ > 0
32@ > 85
    then
    32@ = 0
    0@ -= 1            
    Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
    Audiostream.Loop($MENU_FOCUS_SOUND, 0)
    Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME     
    end
    
if
0@ > 10
then
0@ = 0
end

if
0@ < 0
then
0@ = 10
end

gosub @SKINS_ORIGIN_TEXT_TXD
gosub @SKINS_ORIGIN_TEXT_TRANSPORT_ABILITY        

if
8A2A: not  text_box 'GAME822' displayed
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME822' 
end

//0AD1: show_formatted_text_highpriority "%d" time 2000 0@

if
0@ == 0 //Случайный набор
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S111',10,1)
    else
    text.ShowH('GMBS111',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 0        
        break
        end
    end
    
if
0@ == 1 //Охотничий набор
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S112',10,1)
    else
    text.ShowH('GMBS112',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()                 
        SURVIVAL_CUSTOM_WEAPON_NABOR = 1
        break
        end
    end
    
if
0@ == 2 //Полицейский набор
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S113',10,1)
    else
    text.ShowH('GMBS113',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 2
        break
        end
    end
    
if
0@ == 3 //Набор анархиста
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S114',10,1)
    else
    text.ShowH('GMBS114',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 3
        break
        end
    end
    
if
0@ == 4 //Снайперский набор
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S115',10,1)
    else
    text.ShowH('GMBS115',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 4
        break
        end
    end
    
if
0@ == 5 //Набор пулемётчика
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S116',10,1)
    else
    text.ShowH('GMBS116',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 5
        break
        end
    end
    
if
0@ == 6 //Армейский набор
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S117',10,1)
    else
    text.ShowH('GMBS117',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 6
        break
        end
    end
    
if
0@ == 7 //Набор гранатометчика
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S118',10,1)
    else
    text.ShowH('GMBS118',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 7
        break
        end
    end
    
if
0@ == 8 //Набор КДЗ
    then
    09C1: add_next_text_to_brief_history 0
    text.ShowH('GM_S123',10,1)    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 8
        break
        end
    end
    
if
0@ == 9 //Набор каннибала
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S124',10,1)
    else
    text.ShowH('GMBS124',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 9
        break
        end
    end
    
if
0@ == 10 //Набор жнеца
    then
    09C1: add_next_text_to_brief_history 0
    
    if
    8A4B: not  controls_set_to_joystick
    then
    text.ShowH('GM_S125',10,1)
    else
    text.ShowH('GMBS125',10,1)
    end
    
    if or
    0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD 16
    RANDOM_SELECT_ALL_CHAR_PARAMS == 3
        then
        03E6: remove_text_box
        text.ClearAll()
        SURVIVAL_CUSTOM_WEAPON_NABOR = 10
        break
        end
    end                                        

end

text.ClearAll()
cinema.Widescreen(0)
0AF1: write_int SURVIVAL_CUSTOM_WEAPON_NABOR to_ini_file "data\survsettings.temp" section "PLAYER" key "ORIGIN"
0629: change_integer_stat 274 to SURVIVAL_CUSTOM_WEAPON_NABOR

return

:SKINS_ORIGIN_TEXT_TXD
03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 1
0085: 1@ = 0@ // (int)
1@ += 1
038D: draw_texture 1@ position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255
return

:SKINS_ORIGIN_TEXT

if
0@ == 0
then 
1@s = 'MS132R2'
end

if
0@ == 1
then 
1@s = 'TX112R2'
end

if
0@ == 2
then 
1@s = 'TX113R2'
end

if
0@ == 3
then 
1@s = 'TX114R2'
end

if
0@ == 4
then 
1@s = 'TX115R2'
end

if
0@ == 5
then 
1@s = 'TX116R2'
end

if
0@ == 6
then 
1@s = 'TX117R2'
end

if
0@ == 7
then 
1@s = 'TX118R2'
end

if
0@ == 8
then 
1@s = 'TX119R2'
end

if
0@ == 9
then 
1@s = 'TX120R2'
end

if
0@ == 10
then 
1@s = 'TX120R2'
end

//03F0: enable_text_draw 1
//0937: text_draw_box_cornerA 380.0 142.0 cornerB 608.0 368.0 GXT_reference 1@s style 1

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255
0343: set_text_draw_linewidth 470.0
033E: set_draw_text_position 380.0 142.0 GXT 1@s  // ~z~Ecћњ ¬ o¤e®© ™py—a, cљeћaќ ¤¦o-®њ—yљ©, ¤¦o o—eџoЈacњ¦ ¦e—¬.

//0D66: print 1@s at 380.0 142.0 scale 1.0 1.0 style 0 prop 1 align 1 wrap 600.0 justify 0 color 255 255 255 255 outline 0 shadow 0 dropColor 0 0 0 0 background 1 backColor 0 0 0 0

return

:SKINS_ORIGIN_TEXT_TRANSPORT_ABILITY

if
0@ == 0
then 
1@s = 'GME1521'
end

if
0@ == 1
then 
1@s = 'GME1522'
end

if
0@ == 2
then 
1@s = 'GME1523'
end

if
0@ == 3
then 
1@s = 'GME1524'
end

if
0@ == 4
then 
1@s = 'GME1525'
end

if
0@ == 5
then 
1@s = 'GME1526'
end

if
0@ == 6
then 
1@s = 'GME1527'
end

if
0@ == 7
then 
1@s = 'GME1528'
end

if
0@ == 8
then 
1@s = 'GME1529'
end

if
0@ == 9
then 
1@s = 'GME1530'
end

if
0@ == 10
then 
1@s = 'GME1531'
end

//03F0: enable_text_draw 1
//0937: text_draw_box_cornerA 380.0 142.0 cornerB 608.0 368.0 GXT_reference 1@s style 1

03F0: enable_text_draw 1
0349: set_text_draw_font 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.3 0.9
081C: draw_text_outline 1 RGBA 0 0 0 255
0343: set_text_draw_linewidth 300.0
033E: set_draw_text_position 20.0 350.0 GXT 1@s  // ~z~Ecћњ ¬ o¤e®© ™py—a, cљeћaќ ¤¦o-®њ—yљ©, ¤¦o o—eџoЈacњ¦ ¦e—¬.

//0D66: print 1@s at 380.0 142.0 scale 1.0 1.0 style 0 prop 1 align 1 wrap 600.0 justify 0 color 255 255 255 255 outline 0 shadow 0 dropColor 0 0 0 0 background 1 backColor 0 0 0 0

return

:SKINS_ORIGIN_TEXT_TITLE

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.75 1.45
081C: draw_text_outline 1 RGBA 0 0 0 255
0344: set_text_draw_linewidth 280.0 for_centered_text

return    

:SKINS_ORIGIN_TEXT2

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255
0344: set_text_draw_linewidth 280.0 for_centered_text

if
0@ == 0
then 
033E: set_draw_text_position 160.0 120.5 GXT 'MS132R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS111R2'  // Push
end

if
0@ == 1
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX112R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS112R2'  // Push
end

if
0@ == 2
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX113R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS113R2'  // Push
end

if
0@ == 3
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX114R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS114R2'  // Push
end

if
0@ == 4
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX115R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS115R2'  // Push
end

if
0@ == 5
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX116R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS116R2'  // Push
end

if
0@ == 6
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX117R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS117R2'  // Push
end

if
0@ == 7
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX118R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS118R2'  // Push
end

if
0@ == 8
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX119R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS119R2'  // Push
end

if
0@ == 9
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX120R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS120R2'  // Push
end

if
0@ == 10
then 
033E: set_draw_text_position 160.0 120.5 GXT 'TX125R2'  // Push
gosub @SKINS_ORIGIN_TEXT_TITLE
033E: set_draw_text_position 160.0 100.5 GXT 'MS125R2'  // Push
end

return

:CHARACTER_VOICE_SELECT

09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GME1267'

EXTRA_SKINS_COUNT_MIN = 7
EXTRA_SKINS_COUNT_MAX = 288
27@ = 0
28@ = 7

gosub @SKIN_REFRESH

0665: get_actor $NAME_ACTOR model_to 0@
04C4: store_coords_to 1@ 2@ 3@ from_actor $NAME_ACTOR with_offset 0.0 0.0 0.0
4@ = actor.Angle($NAME_ACTOR)

while not model.Available($RANDOM_MODE_MODEL)
wait 0
model.Load($RANDOM_MODE_MODEL)
mload
end

KOMANDA_KUKLA_PLAYER = actor.Create(26,$RANDOM_MODE_MODEL,1@,2@,3@)
0E32: set_char_coordinates_simple KOMANDA_KUKLA_PLAYER coord 1@ 2@ 3@
actor.Angle(KOMANDA_KUKLA_PLAYER) = 4@

repeat
wait 0

if
894D: not actor $NAME_ACTOR mutally_active
then
0489: set_actor $NAME_ACTOR muted 0
gosub @RANDOM_SPEAK_FOR_VOICE_SAMPLE
end

if
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 17
    then
    random_int 28@ EXTRA_SKINS_COUNT_MIN EXTRA_SKINS_COUNT_MAX
    jump to @CHARACTER_RANDOM_SKIN_REFERSH2
    end
    
00E2: get_player CHAR_SELECT_PLA_PAD key 1 state_to 0@
if and
0A4B:   controls_set_to_joystick
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 8
    then
    0@ = -1
    end

if and
0@ < 0
32@ > 85
    then
    32@ = 0
    
    while true        
    
    if or
    27@ == 3
    27@ == 4
    then
    wait 0
    end    
    
    ////////////////////////////////////////////////////////////////////////////////////////////////        
            
    28@ += 1        
    
    if and
    28@ == 15673
    UNITED_MAP == 1
    STORIES_MAP == 0
    then
    28@ = 15687
    end
    
    :CHARACTER_RANDOM_SKIN_REFERSH2
    
    if
    001D:   28@ > EXTRA_SKINS_COUNT_MAX  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ += 1
    end
    
    end
    
    gosub @SECOND_NABOR_GET_ID
    
    0AD3: v$FP_FILE = format "%d" 28@        
    0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key v$FP_FILE    
    if and
    07DE:   model 28@ exists  // versionB
    not 1@ == 2
    then
    break
    else
    
    if
    not 27@ == 4
    then
//    28@ += 1
    else
    
    if
    001D:   28@ > EXTRA_SKINS_COUNT_MAX  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ += 1
    end
    
    end
    
    break
    end
    
    end
        
    if
    001D:   28@ > EXTRA_SKINS_COUNT_MAX  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MIN // (int)
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ += 1
    end
    
    end
        
    ////////////////////////////////////////////////////////////////////////////////////////////////    
    
    end            
    
    gosub @SKIN_REFRESH
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    end

00E2: get_player CHAR_SELECT_PLA_PAD key 1 state_to 0@
if and
0A4B:   controls_set_to_joystick
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 9
    then
    0@ = 1
    end

if and
0@ > 0
32@ > 85
    then
    32@ = 0
    
    while true    
    
    if or
    27@ == 3
    27@ == 4
    then
    wait 0
    end    
    
    ////////////////////////////////////////////////////////////////////////////////////////////////    
        
    28@ -= 1
    
    if and
    27@ == 3
    28@ == 1
    TEAMMATES_CUS_NUM > 0
    then
    28@ -= 1
    end
    
    if and
    28@ == 15686
    UNITED_MAP == 1
    STORIES_MAP == 0
    then
    28@ = 15672
    end
    
    if
    801D: not  28@ > EXTRA_SKINS_COUNT_MIN  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MAX // (int)
    end
    
    gosub @SECOND_NABOR_GET_ID
    
    0AD3: v$FP_FILE = format "%d" 28@        
    0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key v$FP_FILE    
    if and
    07DE:   model 28@ exists  // versionB
    not 1@ == 2
    then
    break
    else
    
    if
    not 27@ == 4
    then
//    28@ -= 1
    else
    
    if
    801D: not  28@ > EXTRA_SKINS_COUNT_MIN  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MAX // (int)
    end
    
    break
    end
    
    end
        
    if
    801D: not  28@ > EXTRA_SKINS_COUNT_MIN  // (int)
    then
    0085: 28@ = EXTRA_SKINS_COUNT_MAX // (int)
    end
        
    ////////////////////////////////////////////////////////////////////////////////////////////////    
    
    end
                
    gosub @SKIN_REFRESH
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    end
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 15
33@ > 500
    then
    
    actor.DestroyInstantly(KOMANDA_KUKLA_PLAYER)
    
    0652: 0@ = integer_stat 276
    if
    0@ == 1
    then
    0629: change_integer_stat 276 to 0
    //Выключаем билдинг одежды Карла 
    0E6A: make_nop 0x5A834D size 5
    0337: set_actor $NAME_ACTOR visibility 0
    0D10: set_actor $NAME_ACTOR alpha 0 // IF and SET
    end        
    
    PLAYER_HAS_CUSTOM_VOICE = 0
    
    008B: 28@ = $RANDOM_MODE_MODEL // (int)
    gosub @SKIN_REFRESH
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()        
    return
    end
    
if
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
    then
    actor.DestroyInstantly(KOMANDA_KUKLA_PLAYER)    
    008A: PLAYER_HAS_CUSTOM_VOICE = 28@ // (int)    
    008B: 28@ = $RANDOM_MODE_MODEL // (int)
    gosub @SKIN_REFRESH    
    text.RemoveTextBox()
    text.ClearAll()
    wait 100        
    return         
    end    

until false

return    

:CHARACTER_NAME_SELECT

if or
0A4B:   controls_set_to_joystick
CHAR_SELECT_PLA_PAD == 1
then

if
not RANDOM_SELECT_ALL_CHAR_PARAMS == 1
then
ACTIVATE_KBRD_PANEL = 1
KBRD_PANEL_CHRTC = 1
CURRENT_LAYOUT = 1
end

end

gosub @SECOND_NABOR_GET_ID2

FREEMODE_CUSTOM_NAME = -1
29@ = 0
33@ = 0
KEYS_TYPED_NUM = -69

v$NAME1 = "N_ME" 
if
28@ > 10000
then
v$NAME1 = "N_"
end
0AD3: v$NAME2 = format "%d" 28@
098B: v$NAME3 = v$NAME1 + v$NAME2

if
TEAMMATES_CUS_NUM == 0
then
0ADE: 0@ = text_by_GXT_entry v$NAME3
0AD3: v$SNAME3 = format "%s" 0@    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3
else

if
TEAMMATES_CUS_NUM == 1
then
0ADE: 0@ = text_by_GXT_entry v$NAME3
0AD3: TEAM1_NAME = format "%s" 0@
0AE0: remove_dynamic_GXT_entry "F_NAME1"
0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME
end

if
TEAMMATES_CUS_NUM == 2
then
0ADE: 0@ = text_by_GXT_entry v$NAME3
0AD3: TEAM2_NAME = format "%s" 0@
0AE0: remove_dynamic_GXT_entry "F_NAME2"
0ADF: add_dynamic_GXT_entry "F_NAME2" text TEAM2_NAME
end

if
TEAMMATES_CUS_NUM == 3
then
0ADE: 0@ = text_by_GXT_entry v$NAME3
0AD3: TEAM3_NAME = format "%s" 0@
0AE0: remove_dynamic_GXT_entry "F_NAME3"
0ADF: add_dynamic_GXT_entry "F_NAME3" text TEAM3_NAME
end 

end

while true
wait 0

09C1: add_next_text_to_brief_history 0

if
TEAMMATES_CUS_NUM == 0
then

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

else

if
TEAMMATES_CUS_NUM == 1
then

if
8846: not  string TEAM1_NAME empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME1" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

end

if
TEAMMATES_CUS_NUM == 2
then

if
8846: not  string TEAM2_NAME empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME2" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

end

if
TEAMMATES_CUS_NUM == 3
then

if
8846: not  string TEAM3_NAME empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME3" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

end 

end

if
CURRENT_LAYOUT == 0
then

if
CAPSLOCK_ON_FLAG == 0
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME772'
else
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'AME772B'
end

if and
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 14
0AB0:   key_pressed 18
33@ > 500
    then        
    CURRENT_LAYOUT = 1
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 0
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 1
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 1
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 0
    33@ = 0
    end        

else

if
ACTIVATE_KBRD_PANEL == 1
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'AME772C'
else

if
CAPSLOCK_ON_FLAG == 0
then
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'GAME771'
else
09C1: add_next_text_to_brief_history 0
0512: show_permanent_text_box 'AME771B'
end

end

if and
00E1:   player CHAR_SELECT_PLA_PAD pressed_key 14
0AB0:   key_pressed 18
33@ > 500
    then    
    CURRENT_LAYOUT = 0
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 0
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 1
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 1
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 0
    33@ = 0
    end    

end

gosub @CHARACTER_NAME_SELECT_KEYS_CHECK

if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 15
8AB0: not  key_pressed 70
33@ > 500
    then
    ACTIVATE_KBRD_PANEL = 0
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    
    if or
    27@ == 2
    27@ == 3
    then
    008B: 28@ = $TEMPVAR_CUST_CHAR // (int)    
    end
    
    return
    end
    
if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
0E45: frame_mod 30
33@ > 500
8846: not  string v$SNAME3 empty // v$
TEAMMATES_CUS_NUM == 0
    then
    jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP2A
    end    
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
TEAMMATES_CUS_NUM == 0
    then
    :RANDOM_SELECT_CHAR_PARAMS_JUMP2A
    ACTIVATE_KBRD_PANEL = 0
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    0AF5: write_string v$SNAME3 to_ini_file "data\survsettings.temp" section "PLAYER" key "NAME"
    FREEMODE_CUSTOM_NAME = 1
    wait 5
    return
    end
    
if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
0E45: frame_mod 30
33@ > 500
8846: not  string TEAM1_NAME empty // v$
TEAMMATES_CUS_NUM == 1
then
jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP2B
end    
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
33@ > 500
8846: not  string TEAM1_NAME empty // v$
TEAMMATES_CUS_NUM == 1
    then
    :RANDOM_SELECT_CHAR_PARAMS_JUMP2B
    ACTIVATE_KBRD_PANEL = 0
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    FREEMODE_CUSTOM_NAME = 1
    0AF5: write_string TEAM1_NAME to_ini_file "data\survsettings.temp" section "TEAM1" key "NAME"
    wait 5
    return
    end
    
if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
0E45: frame_mod 30
33@ > 500
8846: not  string TEAM2_NAME empty // v$
TEAMMATES_CUS_NUM == 2
then
jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP2C
end    
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
33@ > 500
8846: not  string TEAM2_NAME empty // v$
TEAMMATES_CUS_NUM == 2
    then
    :RANDOM_SELECT_CHAR_PARAMS_JUMP2C
    ACTIVATE_KBRD_PANEL = 0
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    FREEMODE_CUSTOM_NAME = 1
    0AF5: write_string TEAM2_NAME to_ini_file "data\survsettings.temp" section "TEAM2" key "NAME"
    wait 5
    return
    end
    
if and
RANDOM_SELECT_ALL_CHAR_PARAMS == 1
0E45: frame_mod 30
33@ > 500
8846: not  string TEAM3_NAME empty // v$
TEAMMATES_CUS_NUM == 3
then
jump to @RANDOM_SELECT_CHAR_PARAMS_JUMP2D
end    
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 16
33@ > 500
8846: not  string TEAM3_NAME empty // v$
TEAMMATES_CUS_NUM == 3
    then
    :RANDOM_SELECT_CHAR_PARAMS_JUMP2D
    ACTIVATE_KBRD_PANEL = 0
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    FREEMODE_CUSTOM_NAME = 1
    0AF5: write_string TEAM3_NAME to_ini_file "data\survsettings.temp" section "TEAM3" key "NAME"
    wait 5
    return
    end                        
    
end    

return

:CHARACTER_NAME_SELECT_KEYS_CHECK

if
not RANDOM_SELECT_ALL_CHAR_PARAMS == 0
then
jump to @ASS_JUMP_NUMBER_NINE
end

if or
0A4B:   controls_set_to_joystick
CHAR_SELECT_PLA_PAD == 1
then

if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
TEAMMATES_CUS_NUM == 0 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: v$SNAME3 = format "%s" 0@    
    0AE0: remove_dynamic_GXT_entry "F_NAME"
    0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3    
    end
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
TEAMMATES_CUS_NUM == 1 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: TEAM1_NAME = format "%s" 0@
    0AE0: remove_dynamic_GXT_entry "F_NAME1"
    0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME    
    end
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
TEAMMATES_CUS_NUM == 2 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: TEAM2_NAME = format "%s" 0@
    0AE0: remove_dynamic_GXT_entry "F_NAME2"
    0ADF: add_dynamic_GXT_entry "F_NAME2" text TEAM2_NAME    
    end
    
if and
0E3E: is_button_just_pressed CHAR_SELECT_PLA_PAD button 14
TEAMMATES_CUS_NUM == 3 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: TEAM3_NAME = format "%s" 0@
    0AE0: remove_dynamic_GXT_entry "F_NAME3"
    0ADF: add_dynamic_GXT_entry "F_NAME3" text TEAM3_NAME    
    end

else

:ASS_JUMP_NUMBER_NINE

if and
0E3D:   key_pressed 8
TEAMMATES_CUS_NUM == 0 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: v$SNAME3 = format "%s" 0@    
    0AE0: remove_dynamic_GXT_entry "F_NAME"
    0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3    
    end
    
if and
0E3D:   key_pressed 8
TEAMMATES_CUS_NUM == 1 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: TEAM1_NAME = format "%s" 0@
    0AE0: remove_dynamic_GXT_entry "F_NAME1"
    0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME    
    end
    
if and
0E3D:   key_pressed 8
TEAMMATES_CUS_NUM == 2 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: TEAM2_NAME = format "%s" 0@
    0AE0: remove_dynamic_GXT_entry "F_NAME2"
    0ADF: add_dynamic_GXT_entry "F_NAME2" text TEAM2_NAME    
    end
    
if and
0E3D:   key_pressed 8
TEAMMATES_CUS_NUM == 3 
    then
    KEYS_TYPED_NUM = -69
    
    v$NAME1 = "N_ME" 
    if
    28@ > 10000
    then
    v$NAME1 = "N_"
    end
    0AD3: v$NAME2 = format "%d" 28@
    098B: v$NAME3 = v$NAME1 + v$NAME2    
    
    0ADE: 0@ = text_by_GXT_entry v$NAME3
    0AD3: TEAM3_NAME = format "%s" 0@
    0AE0: remove_dynamic_GXT_entry "F_NAME3"
    0ADF: add_dynamic_GXT_entry "F_NAME3" text TEAM3_NAME    
    end
    
end                

if
0E3D:   key_pressed 48
    then        
    06D1: v$SNAME2 = "0" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 49
    then        
    06D1: v$SNAME2 = "1" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 50
    then        
    06D1: v$SNAME2 = "2" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 51
    then        
    06D1: v$SNAME2 = "3" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 52
    then        
    06D1: v$SNAME2 = "4" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 53
    then        
    06D1: v$SNAME2 = "5" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 54
    then        
    06D1: v$SNAME2 = "6" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 55
    then        
    06D1: v$SNAME2 = "7" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 56
    then        
    06D1: v$SNAME2 = "8" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 57
    then        
    06D1: v$SNAME2 = "9" // v$ // Sunday        
    gosub @CHARACTER_NAME_SELECT_KEY_ADD    
    end                                    
    
if
0E3D:   key_pressed 65
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ѓ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 66
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "њ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "…" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "b" // v$ // Sunday
    else
    06D1: v$SNAME2 = "B" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end 
    
if
0E3D:   key_pressed 67
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 68
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "ў" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‹" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "d" // v$ // Sunday
    else
    06D1: v$SNAME2 = "D" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed $KEY_USE
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 70
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "f" // v$ // Sunday
    else
    06D1: v$SNAME2 = "F" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 71
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "Ј" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Њ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "g" // v$ // Sunday
    else
    06D1: v$SNAME2 = "G" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 72
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "h" // v$ // Sunday
    else
    06D1: v$SNAME2 = "H" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 73
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "Ґ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ћ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "i" // v$ // Sunday
    else
    06D1: v$SNAME2 = "I" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 74
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "j" // v$ // Sunday
    else
    06D1: v$SNAME2 = "J" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 75
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "ћ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‡" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 76
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "љ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "ѓ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "l" // v$ // Sunday
    else
    06D1: v$SNAME2 = "L" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 77
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "©" // v$ // Sunday
    else
    06D1: v$SNAME2 = "’" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "m" // v$ // Sunday
    else
    06D1: v$SNAME2 = "M" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 78
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "¦" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Џ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "n" // v$ // Sunday
    else
    06D1: v$SNAME2 = "N" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 79
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "Ў" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Љ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 80
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "џ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "€" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 81
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "ќ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "†" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "q" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Q" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 82
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "r" // v$ // Sunday
    else
    06D1: v$SNAME2 = "R" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 83
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "Ё" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‘" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "s" // v$ // Sunday
    else
    06D1: v$SNAME2 = "S" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 84
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "t" // v$ // Sunday
    else
    06D1: v$SNAME2 = "T" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 85
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "™" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‚" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "u" // v$ // Sunday
    else
    06D1: v$SNAME2 = "U" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 86
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "Ї" // v$ // Sunday
    else
    06D1: v$SNAME2 = "–" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "v" // v$ // Sunday
    else
    06D1: v$SNAME2 = "V" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 87
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = " " // v$ // Sunday
    else
    06D1: v$SNAME2 = "‰" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "w" // v$ // Sunday
    else
    06D1: v$SNAME2 = "W" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 88
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "¤" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ќ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 89
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "®" // v$ // Sunday
    else
    06D1: v$SNAME2 = "­" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 90
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "¬" // v$ // Sunday
    else
    06D1: v$SNAME2 = "•" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    80E1: not  player CHAR_SELECT_PLA_PAD pressed_key 4
    then
    06D1: v$SNAME2 = "z" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Z" // v$ // Sunday
    end
    
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 219
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 221
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    then
    06D1: v$SNAME2 = "§" // v$ // Sunday
    else
    06D1: v$SNAME2 = "ђ" // v$ // Sunday
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 186
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    then
    06D1: v$SNAME2 = "›" // v$ // Sunday
    else
    06D1: v$SNAME2 = "„" // v$ // Sunday
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 222
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    then
    06D1: v$SNAME2 = "Є" // v$ // Sunday
    else
    06D1: v$SNAME2 = "“" // v$ // Sunday
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 188
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    then
    06D1: v$SNAME2 = "—" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ђ" // v$ // Sunday
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 190
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    80E1: not  player 0 pressed_key 14
    then
    06D1: v$SNAME2 = "«" // v$ // Sunday
    else
    06D1: v$SNAME2 = "”" // v$ // Sunday
    end
    
    gosub @CHARACTER_NAME_SELECT_KEY_ADD
    
    end                                                                                                                                           

return

:CHARACTER_NAME_SELECT_KEY_ADD

if
KEYS_TYPED_NUM == -69
then

if
TEAMMATES_CUS_NUM == 0 
    then
    KEYS_TYPED_NUM = -1
    06D1: v$SNAME3 = "" // v$ // Sunday
    0AE0: remove_dynamic_GXT_entry "F_NAME"
    0ADF: add_dynamic_GXT_entry "F_NAME" text ""
    end
    
if
TEAMMATES_CUS_NUM == 1 
    then
    KEYS_TYPED_NUM = -1
    06D1: TEAM1_NAME = "" // v$ // Sunday
    0AE0: remove_dynamic_GXT_entry "F_NAME1"
    0ADF: add_dynamic_GXT_entry "F_NAME1" text ""
    end
    
if
TEAMMATES_CUS_NUM == 2 
    then
    KEYS_TYPED_NUM = -1
    06D1: TEAM2_NAME = "" // v$ // Sunday
    0AE0: remove_dynamic_GXT_entry "F_NAME2"
    0ADF: add_dynamic_GXT_entry "F_NAME2" text ""
    end
    
if
TEAMMATES_CUS_NUM == 3 
    then
    KEYS_TYPED_NUM = -1
    06D1: TEAM3_NAME = "" // v$ // Sunday
    0AE0: remove_dynamic_GXT_entry "F_NAME3"
    0ADF: add_dynamic_GXT_entry "F_NAME3" text ""
    end
    
end                

KEYS_TYPED_NUM += 1

if
KEYS_TYPED_NUM >= 15
then
Audiostream.Volume($MENU_INVALID_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_INVALID_SOUND, 0)
Audiostream.PerformAction($MENU_INVALID_SOUND, PLAY)
return
end

Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)

29@ = 1
09C1: add_next_text_to_brief_history 0

if
TEAMMATES_CUS_NUM == 0
then

098B: v$SNAME3 = v$SNAME3 + v$SNAME2 // all string variables
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

else

//////////////////////////////////////////////////////////////////////////////

if
TEAMMATES_CUS_NUM == 1
then

098B: TEAM1_NAME = TEAM1_NAME + v$SNAME2 // all string variables

0AE0: remove_dynamic_GXT_entry "F_NAME1"
0ADF: add_dynamic_GXT_entry "F_NAME1" text TEAM1_NAME

if
8846: not  string TEAM1_NAME empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME1" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

end

//////////////////////////////////////////////////////////////////////////////

if
TEAMMATES_CUS_NUM == 2
then

098B: TEAM2_NAME = TEAM2_NAME + v$SNAME2 // all string variables

0AE0: remove_dynamic_GXT_entry "F_NAME2"
0ADF: add_dynamic_GXT_entry "F_NAME2" text TEAM2_NAME

if
8846: not  string TEAM2_NAME empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME2" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

end

//////////////////////////////////////////////////////////////////////////////

if
TEAMMATES_CUS_NUM == 3
then

098B: TEAM3_NAME = TEAM3_NAME + v$SNAME2 // all string variables

0AE0: remove_dynamic_GXT_entry "F_NAME3"
0ADF: add_dynamic_GXT_entry "F_NAME3" text TEAM3_NAME

if
8846: not  string TEAM3_NAME empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME3" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

end

//////////////////////////////////////////////////////////////////////////////

end

return

:SKIN_REFRESH

if and
not 27@ == 3
not PLAYER_HAS_CUSTOM_VOICE == -1
then
    
while not model.Available(28@)
gosub @SKINS_NABOR_RENDER_TEXT
wait 0
gosub @SKINS_NABOR_RENDER_TEXT
model.Load(28@)
mload
end

else

if
PLAYER_HAS_CUSTOM_VOICE == -1
    then
    
    while not model.Available(28@)
    wait 0
    model.Load(28@)
    mload
    end
    
    end

end    

if
056D:   actor $NAME_ACTOR defined
then
actor.DestroyInstantly($NAME_ACTOR)
end

if
not $RANDOM_MODE_MODEL == 0
then

0652: 0@ = integer_stat 276
if
0@ == 1
then
0629: change_integer_stat 276 to 0
//Выключаем билдинг одежды Карла 
0E6A: make_nop 0x5A834D size 5
0337: set_actor PLAYER_ACTOR visibility 0
0D10: set_actor PLAYER_ACTOR alpha 0 // IF and SET
end

end

if
27@ == 3
then

if
$TEMPVAR_CUST_CHAR == 0
then
$TEMPVAR_CUST_CHAR = 1
end

if
not $TEMPVAR_CUST_CHAR == 1
then

0652: 0@ = integer_stat 276
if
0@ == 1
then
0629: change_integer_stat 276 to 0
//Выключаем билдинг одежды Карла 
0E6A: make_nop 0x5A834D size 5
0337: set_actor PLAYER_ACTOR visibility 0
0D10: set_actor PLAYER_ACTOR alpha 0 // IF and SET
end
 
//while 023D:   special_actor 1 loaded
//wait 0
if
TEAMMATES_CUS_NUM == 0
then
0296: unload_special_actor 10
end
if
TEAMMATES_CUS_NUM == 1
then
0296: unload_special_actor 9
end
if
TEAMMATES_CUS_NUM == 2
then
0296: unload_special_actor 8
end
if
TEAMMATES_CUS_NUM == 3
then
0296: unload_special_actor 7
end
//0AD1: show_formatted_text_highpriority "TRYING TO UNLOAD PREV SKIN" time 2000
//end

//while 823D: not  special_actor 1 loaded
//wait 0
if
TEAMMATES_CUS_NUM == 0
then
023C: load_special_actor s$CSA_SKIN as 10 // models 290-299
mload
end
if
TEAMMATES_CUS_NUM == 1
then
023C: load_special_actor TEAM1_STSK as 9 // models 290-299
mload
end
if
TEAMMATES_CUS_NUM == 2
then
023C: load_special_actor TEAM2_STSK as 8 // models 290-299
mload
end
if
TEAMMATES_CUS_NUM == 3
then
023C: load_special_actor TEAM3_STSK as 7 // models 290-299
mload
end
//0AD1: show_formatted_text_highpriority "TRYING TO LOAD: %s" time 2000 s$CSA_SKIN
//end

if
TEAMMATES_CUS_NUM == 0
then
$NAME_ACTOR = actor.Create(26,#SPECIAL10,257.6425, -42.1901, 1002.0234)
end

if
TEAMMATES_CUS_NUM == 1
then
$NAME_ACTOR = actor.Create(26,#SPECIAL09,257.6425, -42.1901, 1002.0234) 
end

if
TEAMMATES_CUS_NUM == 2
then
$NAME_ACTOR = actor.Create(26,#SPECIAL08,257.6425, -42.1901, 1002.0234)
end

if
TEAMMATES_CUS_NUM == 3
then
$NAME_ACTOR = actor.Create(26,#SPECIAL07,257.6425, -42.1901, 1002.0234)
end

actor.PutAtNoOffset($NAME_ACTOR,257.6425, -42.1901, 1002.0234)
actor.Angle($NAME_ACTOR) = 32.9773

if
$CHEATS_ON == 1
then
0E24: fix_char $NAME_ACTOR ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

else

0337: set_actor PLAYER_ACTOR visibility 1
0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET

gosub @CUSTOM_CHARACTER_SELECT_CARL_BUILD
 
$NAME_ACTOR = actor.Create(26,0,257.6425, -42.1901, 1002.0234)
actor.PutAtNoOffset($NAME_ACTOR,257.6425, -42.1901, 1002.0234)
actor.Angle($NAME_ACTOR) = 32.9773

end

else

if
UNITED_MAP == 0
then
$NAME_ACTOR = actor.Create(26,28@,257.6425, -42.1901, 1002.0234)
//model.Destroy(0@)
actor.PutAtNoOffset($NAME_ACTOR,257.6425, -42.1901, 1002.0234)
actor.Angle($NAME_ACTOR) = 32.9773

if
$CHEATS_ON == 1
then
0E24: fix_char $NAME_ACTOR ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

else

if and
STORIES_MAP == 0
$UNITED_VC_FLAG == 1
    then             
    $NAME_ACTOR = actor.Create(26,28@,2230.8552, -2212.3796, 1007.9459)
    //model.Destroy(28@)
    actor.PutAtNoOffset($NAME_ACTOR,2230.8552, -2212.3796, 1007.9459)
    actor.Angle($NAME_ACTOR) = 187.9198
    04C4: store_coords_to 0@ 1@ 2@ from_actor $NAME_ACTOR with_offset 0.0 1.0 0.0
    actor.PutAtNoOffset($NAME_ACTOR,0@,1@,2@)
    end
    
if and
STORIES_MAP == 0
$UNITED_VC_FLAG == 0
    then
    $NAME_ACTOR = actor.Create(26,28@,-453.8065, 1493.739, 998.5156)
    //model.Destroy(28@)
    actor.PutAtNoOffset($NAME_ACTOR,-453.8065, 1493.739, 998.5156)
    actor.Angle($NAME_ACTOR) = 100.7161
    04C4: store_coords_to 0@ 1@ 2@ from_actor $NAME_ACTOR with_offset 0.0 1.0 0.0
    actor.PutAtNoOffset($NAME_ACTOR,0@,1@,2@)
    end
    
if and
STORIES_MAP == 1
$UNITED_VC_FLAG == 0
    then
    $NAME_ACTOR = actor.Create(26,28@,-210.2334, 1533.926, 999.3494)
    //model.Destroy(28@)
    actor.PutAtNoOffset($NAME_ACTOR,-210.2334, 1533.926, 999.3494)
    actor.Angle($NAME_ACTOR) = 207.2616
    04C4: store_coords_to 0@ 1@ 2@ from_actor $NAME_ACTOR with_offset 0.0 1.0 0.0
    actor.PutAtNoOffset($NAME_ACTOR,0@,1@,2@)
    end
    
if and
STORIES_MAP == 1
$UNITED_VC_FLAG == 1
    then
    $NAME_ACTOR = actor.Create(26,28@,355.7352, -1239.5463, 998.9223)
    //model.Destroy(28@)
    actor.PutAtNoOffset($NAME_ACTOR,355.7352, -1239.5463, 998.9223)
    actor.Angle($NAME_ACTOR) = 15.4324
    04C4: store_coords_to 0@ 1@ 2@ from_actor $NAME_ACTOR with_offset 0.0 1.0 0.0
    actor.PutAtNoOffset($NAME_ACTOR,0@,1@,2@)
    end            

end

if and
STORIES_MAP == 1
$UNITED_III_SPAWN == 0
then
0D10: set_actor $NAME_ACTOR alpha 255 // IF and SET 
end

end

09C1: add_next_text_to_brief_history 0

if
PLAYER_HAS_CUSTOM_VOICE == -1
then
0337: set_actor $NAME_ACTOR visibility 0
end

if and
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
then
0AD3: v$FP_FILE = format "%d" 28@
0AF0: SOME_BOT_IS_USING_MELEE_FLAG = get_int_from_ini_file "data\skins.ini" section "BODYTYPE" key v$FP_FILE
end
    
if
$FP_ON == 1
then
0AD3: v$FP_FILE = format "%d" 28@
0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "SKINS" key v$FP_FILE
    
if and
1@ == 1
not FP_DEACTIVATED == 1
then

if
not 27@ == 3
then

if
not PLAYER_HAS_CUSTOM_VOICE == -1
then
text.Show1Number('GAME750',28@,9999999,1)
else
text.Show1Number('GME1269',28@,9999999,1)
end

else

if
TEAMMATES_CUS_NUM == 0
    then
    //0384: show_text_1string GXT 'GAME864' string s$CSA_SKIN time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 s$CSA_SKIN
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 s$CSA_SKIN
    end
    
    end
    
if
TEAMMATES_CUS_NUM == 1
    then
    //0384: show_text_1string GXT 'GAME864' string TEAM1_STSK time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 TEAM1_STSK  
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 TEAM1_STSK  
    end
    
    end
    
if
TEAMMATES_CUS_NUM == 2
    then
    //0384: show_text_1string GXT 'GAME864' string TEAM2_STSK time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 TEAM2_STSK 
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 TEAM2_STSK 
    end
    
    end
    
if
TEAMMATES_CUS_NUM == 3
    then
    //0384: show_text_1string GXT 'GAME864' string TEAM1_STSK time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 TEAM3_STSK 
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 TEAM3_STSK 
    end
    
    end            

end

else

if
not 27@ == 3
then

if
not PLAYER_HAS_CUSTOM_VOICE == -1
then
text.Show1Number('GAME753',28@,9999999,1)
else
text.Show1Number('GME1269',28@,9999999,1)
end
  
else

if
TEAMMATES_CUS_NUM == 0
    then
    //0384: show_text_1string GXT 'GAME864' string s$CSA_SKIN time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 s$CSA_SKIN 
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 s$CSA_SKIN 
    end
    
    end
    
if
TEAMMATES_CUS_NUM == 1
    then
    //0384: show_text_1string GXT 'GAME864' string TEAM1_STSK time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 TEAM1_STSK 
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 TEAM1_STSK 
    end
    
    end
    
if
TEAMMATES_CUS_NUM == 2
    then
    //0384: show_text_1string GXT 'GAME864' string TEAM2_STSK time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 TEAM2_STSK 
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 TEAM2_STSK 
    end
    
    end
    
if
TEAMMATES_CUS_NUM == 3
    then
    //0384: show_text_1string GXT 'GAME864' string TEAM1_STSK time 9999999 1
    
    if
    ENGLISH_TRANSLATE == 0
    then
    0AD1: show_formatted_text_highpriority "…Ї¬ ckњ®a: ~b~%s~w~" time 2000 TEAM3_STSK 
    else
    0AD1: show_formatted_text_highpriority "Skin name: ~b~%s~w~" time 2000 TEAM3_STSK 
    end
    
    end

end
 
end

end

return

:SECOND_NABOR_GET_ID

if
27@ == 3 
then
008A: $TEMPVAR_CUST_CHAR = 28@ // (int)        
0AD3: v$FP_FILE = format "%d" 28@

if
TEAMMATES_CUS_NUM == 0
then             
0AF4: s$CSA_SKIN = read_string_from_ini_file "data/otherskinscs.ini" section "SKINS" key v$FP_FILE  
end

if or
TEAMMATES_CUS_NUM == 1
TEAMMATES_CUS_NUM == 0
then      
0AF4: TEAM1_STSK = read_string_from_ini_file "data/otherskinscs.ini" section "SKINS" key v$FP_FILE    
if
28@ == 1
    then
    TEAM1_STSK = 'ANDRE'
    end
end

if or
TEAMMATES_CUS_NUM == 2
TEAMMATES_CUS_NUM == 1
then                                                                                                   
0AF4: TEAM2_STSK = read_string_from_ini_file "data/otherskinscs.ini" section "SKINS" key v$FP_FILE   
end

if or
TEAMMATES_CUS_NUM == 3
TEAMMATES_CUS_NUM == 2
then                                                                                        
0AF4: TEAM3_STSK = read_string_from_ini_file "data/otherskinscs.ini" section "SKINS" key v$FP_FILE    
end

28@ = #MALE01
return
end

if
not 27@ == 2
then
return
end

008A: $TEMPVAR_CUST_CHAR = 28@ // (int)        
0AD3: v$FP_FILE = format "%d" 28@
        
//////////////////////////////////////////////////////////////////////////////////////////////////////////

if
UNITED_MAP == 0
then
0AF0: 28@ = get_int_from_ini_file "data/otherskins.ini" section "SKINS" key v$FP_FILE
else

if
STORIES_MAP == 0
then

if
$UNITED_III_SPAWN == 1
then
0AF0: 28@ = get_int_from_ini_file "data/otherskins1.ini" section "SKINS" key v$FP_FILE
else
0AF0: 28@ = get_int_from_ini_file "data/otherskins2.ini" section "SKINS" key v$FP_FILE
end

else

if
$UNITED_III_SPAWN == 1
then
0AF0: 28@ = get_int_from_ini_file "data/otherskins4.ini" section "SKINS" key v$FP_FILE
else
0AF0: 28@ = get_int_from_ini_file "data/otherskins5.ini" section "SKINS" key v$FP_FILE
end

end

end

//////////////////////////////////////////////////////////////////////////////////////////////////////////

//0AD1: show_formatted_text_highpriority "GOT ID %d by index %d" time 250 28@ $TEMPVAR_CUST_CHAR
//wait 250

008A: $TEMPVAR_CUST_CHAR2 = 28@ // (int)
return

:SECOND_NABOR_GET_ID2

if
27@ == 3 
then

if
TEAMMATES_CUS_NUM == 0
then

0652: 0@ = integer_stat 276
if
0@ == 0
then
28@ = #SPECIAL10
else
28@ = 0
end

end

if
TEAMMATES_CUS_NUM == 1
then
28@ = #SPECIAL09
end

if
TEAMMATES_CUS_NUM == 2
then
28@ = #SPECIAL08
end

if
TEAMMATES_CUS_NUM == 3
then
28@ = #SPECIAL07
end

end

if
not 27@ == 2
then
return
end

008B: 28@ = $TEMPVAR_CUST_CHAR2 // (int)

return

:BODYTYPE_WRITE

if
UNITED_MAP == 0
then
0B00: delete_file "data/skins_Andreas.ini"  // IF and SET
0B04: copy_file "data/skins.ini" to "data/skins_Andreas.ini" //IF and SET
end

if and
UNITED_MAP == 1
STORIES_MAP == 0
then
0B00: delete_file "data/skins_United.ini"  // IF and SET
0B04: copy_file "data/skins.ini" to "data/skins_United.ini" //IF and SET
end

if and
UNITED_MAP == 1
STORIES_MAP == 1
then
0B00: delete_file "data/skins_Stories.ini"  // IF and SET
0B04: copy_file "data/skins.ini" to "data/skins_Stories.ini" //IF and SET
end

return

:SKINS_NABOR_RENDER_TEXT

if and
$CHEATS_ON == 1
$DEBUG_MENU_ON == 1
then

if and
27@ == 1
NEWSKINS2_NABOR_LISTATB == 0
then 

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255

0085: 0@ = 28@ // (int)
0@ -= 11681
045A: draw_text_1number 360.0 350.0 GXT 'GME1440' number 0@
end

if and
27@ == 1
NEWSKINS2_NABOR_LISTATB == 1
then 

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255

0085: 0@ = 28@ // (int)
0@ -= 12248
045A: draw_text_1number 360.0 350.0 GXT 'GME1441' number 0@
end

0967: actor $NAME_ACTOR move_mouth 10000 ms

if
UNITED_MAP == 0
then
0D52: draw_light_type 0 position 257.6425 -42.1901 1002.0234 direction 257.6425 -42.2901 1002.0234 radius 5.0 RGBA 255 255 255 affect_entity 0
end

if
SOME_BOT_IS_USING_MELEE_FLAG == 0
then
03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255
033E: set_draw_text_position 320.0 15.5 GXT 'GME1108'  // Push
end

if
SOME_BOT_IS_USING_MELEE_FLAG == 1
then
03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255
033E: set_draw_text_position 320.0 15.5 GXT 'GME1109'  // Push
else

if
SOME_BOT_IS_USING_MELEE_FLAG < -1
then
03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255
033E: set_draw_text_position 320.0 15.5 GXT 'GME1110'  // Push
end

end 

if
0AB0:   key_pressed 70
then
0665: get_actor $NAME_ACTOR model_to 0@
0AD3: v$EDITOR_FILE = format "%d" 0@
0AF1: write_int 0 to_ini_file "data\skins.ini" section "BODYTYPE" key v$EDITOR_FILE
SOME_BOT_IS_USING_MELEE_FLAG = 0
0AD1: show_formatted_text_highpriority "%d id is now fat skin" time 2000 0@
gosub @BODYTYPE_WRITE
end

if
0AB0:   key_pressed 77
then
0665: get_actor $NAME_ACTOR model_to 0@
0AD3: v$EDITOR_FILE = format "%d" 0@
0AF1: write_int 1 to_ini_file "data\skins.ini" section "BODYTYPE" key v$EDITOR_FILE
0AD1: show_formatted_text_highpriority "%d id is now muscular skin" time 2000 0@
gosub @BODYTYPE_WRITE
end

if
0AB0:   key_pressed 85
then
0665: get_actor $NAME_ACTOR model_to 0@
0AD3: v$EDITOR_FILE = format "%d" 0@
0AF1: write_int -2 to_ini_file "data\skins.ini" section "BODYTYPE" key v$EDITOR_FILE
SOME_BOT_IS_USING_MELEE_FLAG = -2
0AD1: show_formatted_text_highpriority "%d id is now usual skin" time 2000 0@
gosub @BODYTYPE_WRITE
end

end

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255

if
27@ == 0
then
NEWSKINS2_NABOR_LISTATB = 0 
033E: set_draw_text_position 320.0 2.5 GXT 'GAME865'  // Push
end

if and
27@ == 1
NEWSKINS2_NABOR_LISTATB == 0
then 
033E: set_draw_text_position 320.0 2.5 GXT 'GAME866'  // Push
end

if and
27@ == 1
NEWSKINS2_NABOR_LISTATB == 1
then 
033E: set_draw_text_position 320.0 2.5 GXT 'AME866B'  // Push
end

if
27@ == 2
then

if
UNITED_MAP == 0
then 
033E: set_draw_text_position 320.0 2.5 GXT 'GAME867'  // Push
else
033E: set_draw_text_position 320.0 2.5 GXT 'GAME868'  // Push
end

end

if
27@ == 3
then 
033E: set_draw_text_position 320.0 2.5 GXT 'GAME868'  // Push
end

if
27@ == 4
then 
033E: set_draw_text_position 320.0 2.5 GXT 'GAME869'  // Push
end

if and
27@ == 4
NEWSKINS2_NABOR_LISTATB == 6928
then
03F0: enable_text_draw 1   
0349: set_text_draw_font 1
0342: set_text_draw_centered 1
033F: set_text_draw_letter_size 0.4 1.3 
081C: draw_text_outline 1 RGBA 0 0 0 255
0340: set_text_draw_RGBA 255 255 255 255
0344: set_text_draw_linewidth 500.0 for_centered_text
033E: set_draw_text_position 320.0 200.0 GXT 'AME869B'  // Push
end

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255

v$NAME1 = "N_ME" 
if
28@ > 10000
then
v$NAME1 = "N_"
end
0AD3: v$NAME2 = format "%d" 28@
098B: v$NAME3 = v$NAME1 + v$NAME2

if and
not 27@ == 2
not 27@ == 3
then
033E: set_draw_text_position 370.0 392.0 GXT v$NAME3  // Push
end

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0342: set_text_draw_centered 1
0340: set_text_draw_RGBA 255 255 255 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25
081C: draw_text_outline 1 RGBA 0 0 0 255

if
TEAMMATES_CUS_NUM == 0
then
033E: set_draw_text_position 370.0 407.0 GXT 'GAME947'  // Push
end

if
TEAMMATES_CUS_NUM == 1
then
if
not COOP_ACTIVE_FLAG == 1
    then
    033E: set_draw_text_position 370.0 407.0 GXT 'GAME944'  // Push
    else
    033E: set_draw_text_position 370.0 407.0 GXT 'AME944B'  // Push
    end
end

if
TEAMMATES_CUS_NUM == 2
then
033E: set_draw_text_position 370.0 407.0 GXT 'GAME945'  // Push
end

if
TEAMMATES_CUS_NUM == 3
then
033E: set_draw_text_position 370.0 407.0 GXT 'GAME946'  // Push
end

return

:CUSTOM_CHARACTER_SELECT_CARL_BUILD

0629: change_integer_stat 276 to 1
//Включаем билдинг одежды Карла
0A8C: write_memory 0x5A834D size 2 value 36584 virtual_protect 0
0A8C: write_memory 0x5A834F size 2 value 65534 virtual_protect 0
0A8C: write_memory 0x5A8351 size 1 value 255 virtual_protect 0

087B: set_player PLAYER_CHAR clothes_texture "PLAYER_FACE" model "HEAD" body_part 1 
087B: set_player PLAYER_CHAR clothes_texture "JEANSDENIM" model "JEANS" body_part 2 
087B: set_player PLAYER_CHAR clothes_texture "SNEAKERBINCBLK" model "SNEAKER" body_part 3 
087B: set_player PLAYER_CHAR clothes_texture "VEST" model "VEST" body_part 0 
070D: rebuild_player PLAYER_CHAR

if
8AAB: not  file_exists "data\clothes.ini"
then
:DO_A_NIGGER_ROLL
v$HEAD_MODEL = "head"
v$HEAD_TEXTURE = "player_face"
v$TORSO_MODEL = "coach"
v$TORSO_TEXTURE = "coach"
v$LEGS_MODEL = "chinosb"
v$LEGS_TEXTURE = "chinoskhaki"
v$SHOES_MODEL = "bask1"
v$SHOES_TEXTURE = "bask1eris"
v$NECKLACE_MODEL = ""
v$NECKLACE_TEXTURE = ""
v$WRISTWATCH_MODEL = ""
v$WRISTWATCH_TEXTURE = ""
v$GLASSES_MODEL = ""
v$GLASSES_TEXTURE = ""
v$HATS_MODEL = "skullycap"
v$HATS_TEXTURE = "skullyblk"
v$OUTFIT_MODEL = ""
v$OUTFIT_TEXTURE = ""
0AF5: write_string v$HEAD_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "HEAD_MODEL"
0AF5: write_string v$HEAD_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "HEAD_TEXTURE"
0AF5: write_string v$TORSO_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "TORSO_MODEL"
0AF5: write_string v$TORSO_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "TORSO_TEXTURE"
0AF5: write_string v$LEGS_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "LEGS_MODEL"
0AF5: write_string v$LEGS_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "LEGS_TEXTURE"
0AF5: write_string v$SHOES_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "SHOES_MODEL"
0AF5: write_string v$SHOES_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "SHOES_TEXTURE"
0AF5: write_string v$NECKLACE_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "NECKLACE_MODEL"
0AF5: write_string v$NECKLACE_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "NECKLACE_TEXTURE"
0AF5: write_string v$WRISTWATCH_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "WRISTWATCH_MODEL"
0AF5: write_string v$WRISTWATCH_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "WRISTWATCH_TEXTURE"
0AF5: write_string v$GLASSES_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "GLASSES_MODEL"
0AF5: write_string v$GLASSES_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "GLASSES_TEXTURE"
0AF5: write_string v$HATS_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "HATS_MODEL"
0AF5: write_string v$HATS_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "HATS_TEXTURE"
0AF5: write_string v$OUTFIT_MODEL to_ini_file "data\clothes.ini" section "CLOTHES" key "OUTFIT_MODEL"
0AF5: write_string v$OUTFIT_TEXTURE to_ini_file "data\clothes.ini" section "CLOTHES" key "OUTFIT_TEXTURE"
jump to @CLOTHES_FUCK2
else
:CLOTHES_FUCK2
0AF4: v$HEAD_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "HEAD_MODEL"
0AF4: v$HEAD_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "HEAD_TEXTURE"
0AF4: v$TORSO_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "TORSO_MODEL"
0AF4: v$TORSO_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "TORSO_TEXTURE"
0AF4: v$LEGS_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "LEGS_MODEL"
0AF4: v$LEGS_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "LEGS_TEXTURE"
0AF4: v$SHOES_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "SHOES_MODEL"
0AF4: v$SHOES_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "SHOES_TEXTURE"
0AF4: v$NECKLACE_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "NECKLACE_MODEL"
0AF4: v$NECKLACE_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "NECKLACE_TEXTURE"
0AF4: v$WRISTWATCH_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "WRISTWATCH_MODEL"
0AF4: v$WRISTWATCH_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "WRISTWATCH_TEXTURE"
0AF4: v$GLASSES_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "GLASSES_MODEL"
0AF4: v$GLASSES_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "GLASSES_TEXTURE"
0AF4: v$HATS_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "HATS_MODEL"
0AF4: v$HATS_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "HATS_TEXTURE"
0AF4: v$OUTFIT_MODEL = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "OUTFIT_MODEL"
0AF4: v$OUTFIT_TEXTURE = read_string_from_ini_file "data\clothes.ini" section "CLOTHES" key "OUTFIT_TEXTURE"

if and
0D49: 0@ = compare_strings v$HEAD_MODEL "head" // IF and SET 
0D49: 0@ = compare_strings v$HEAD_TEXTURE "player_face" // IF and SET 
0D49: 0@ = compare_strings v$TORSO_MODEL "vest" // IF and SET 
0D49: 0@ = compare_strings v$TORSO_TEXTURE "vest" // IF and SET 
0D49: 0@ = compare_strings v$LEGS_MODEL "jeans" // IF and SET 
0D49: 0@ = compare_strings v$LEGS_TEXTURE "jeansdenim" // IF and SET 
0D49: 0@ = compare_strings v$SHOES_MODEL "sneaker" // IF and SET 
0D49: 0@ = compare_strings v$SHOES_TEXTURE "sneakerbincblk" // IF and SET 
    then
    if or
    8846:   not string v$NECKLACE_MODEL empty // v$ 
    8846:   not string v$WRISTWATCH_MODEL empty // v$ 
    8846:   not string v$GLASSES_MODEL empty // v$ 
    8846:   not string v$HATS_MODEL empty // v$ 
    8846:   not string v$OUTFIT_MODEL empty // v$ 
        then
        //ass
        else
        jump to @DO_A_NIGGER_ROLL 
        end
    end

if
8846: not  string v$HEAD_MODEL empty // v$
then
087B: set_player PLAYER_CHAR clothes_texture v$HEAD_TEXTURE model v$HEAD_MODEL body_part 1
end

if
8846: not  string v$LEGS_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$LEGS_TEXTURE model v$LEGS_MODEL body_part 2
end

if
8846: not  string v$SHOES_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$SHOES_TEXTURE model v$SHOES_MODEL body_part 3
end

if
8846: not  string v$TORSO_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$TORSO_TEXTURE model v$TORSO_MODEL body_part 0
end

if
8846: not  string v$NECKLACE_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$NECKLACE_TEXTURE model v$NECKLACE_MODEL body_part 13
end

if
8846: not  string v$WRISTWATCH_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$WRISTWATCH_TEXTURE model v$WRISTWATCH_MODEL body_part 14
end

if
8846: not  string v$GLASSES_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$GLASSES_TEXTURE model v$GLASSES_MODEL body_part 15
end

if
8846: not  string v$HATS_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$HATS_TEXTURE model v$HATS_MODEL body_part 16
end

if
8846: not  string v$OUTFIT_MODEL empty // v$
then 
087B: set_player PLAYER_CHAR clothes_texture v$OUTFIT_TEXTURE model v$OUTFIT_MODEL body_part 17
end
 
0AF0: 1@ = get_int_from_ini_file "data\clothes.ini" section "CLOTHES" key "BODY_TYPE"

if
1@ < -1
then
0AF1: write_int 1 to_ini_file "data\clothes.ini" section "CLOTHES" key "BODY_TYPE"
1@ = 0
end

if 0039:   1@ == 0
then
  062A: change_float_stat 21 to 0.0
  062A: change_float_stat 23 to 0.0
  070D: rebuild_player PLAYER_CHAR  
end

if 0039:   1@ == 1
then
  062A: change_float_stat 21 to 250.0    
  062A: change_float_stat 23 to 500.0
  070D: rebuild_player PLAYER_CHAR
end

if 0039:   1@ == 2
then
  062A: change_float_stat 21 to 100.0
  062A: change_float_stat 23 to 1000.0
  070D: rebuild_player PLAYER_CHAR
end

if 0039:   1@ == 3
then
  062A: change_float_stat 23 to 0.0
  062A: change_float_stat 21 to 1000.0
  070D: rebuild_player PLAYER_CHAR
end

if 0039:   1@ == 4
then
  062A: change_float_stat 23 to 1000.0
  062A: change_float_stat 21 to 1000.0
  070D: rebuild_player PLAYER_CHAR
end   

end

gosub @SKINS_NABOR_RENDER_TEXT
wait 0
gosub @SKINS_NABOR_RENDER_TEXT

return

:RANDOM_SPEAK_FOR_VOICE_SAMPLE

random_int 1@ 0 29

if 
1@ == 0
    then
    2@ = 58
    end

if 
1@ == 1
    then
    2@ = 61
    end

if 
1@ == 2
    then
    2@ = 74
    end

if 
1@ == 3
    then
    2@ = 121
    end

if 
1@ == 4
    then
    2@ = 133
    end

if 
1@ == 5
    then
    2@ = 161
    end

if 
1@ == 6
    then
    2@ = 162
    end

if 
1@ == 7
    then
    2@ = 163
    end

if 
1@ == 8
    then
    2@ = 165
    end

if 
1@ == 9
    then
    2@ = 169
    end

if 
1@ == 10
    then
    2@ = 170
    end

if 
1@ == 11
    then
    2@ = 171
    end

if 
1@ == 12
    then
    2@ = 188
    end

if 
1@ == 13
    then
    2@ = 223
    end

if 
1@ == 14
    then
    2@ = 189
    end

if 
1@ == 15
    then
    2@ = 145
    end  
    
if 
1@ == 16
    then
    2@ = 118
    end  
    
if 
1@ == 17
    then
    2@ = 21
    end 
    
if 
1@ == 18
    then
    2@ = 22
    end   
    
if 
1@ == 19
    then
    2@ = 28
    end  
    
if 
1@ == 20
    then
    2@ = 48
    end   
    
if 
1@ == 21
    then
    2@ = 49
    end  
    
if 
1@ == 22
    then
    2@ = 52
    end  
    
if 
1@ == 23
    then
    2@ = 56
    end   
    
if 
1@ == 24
    then
    2@ = 57
    end  
    
if 
1@ == 25
    then
    2@ = 61
    end  
    
if 
1@ == 26
    then
    2@ = 74
    end 
    
if 
1@ == 27
    then
    2@ = 83
    end 
    
if 
1@ == 27
    then
    2@ = 86
    end         

if 
1@ == 28
    then
    2@ = 124
    end
    
if
056D:   actor $NAME_ACTOR defined
    then    
    05C1: AS_actor $NAME_ACTOR speak_from_audio_table 2@ 
    end 
    
return                        

:RETURN_INDEX_OF_ASS

//0AD1: show_formatted_text_highpriority "INDEX is %d" time 250 28@
//wait 250

if
27@ == 2
then
008B: 28@ = $TEMPVAR_CUST_CHAR // (int)
//0AD1: show_formatted_text_highpriority "RESTORING INDEX %d" time 250 $TEMPVAR_CUST_CHAR
//wait 250
//else
//0AD1: show_formatted_text_highpriority "not doing shit, 27@ is %d" time 2000 27@
end

return