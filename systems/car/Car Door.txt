:C_DOOR
thread 'C_DOOR'

create_thread @C_DOOR2

0662: printstring "----------Plane Explode Fix by Junior_Djjr----------"

32@ = 0
OPEN_PERK_MENU_PLEASE_FLAG = 0

:CAR_DOOR_CHECK_IDLE
wait 0

/////////////////////////////////////////////////////////////////////////////

if
$CHEAT_TYPE_FLAG == 1
then

if and
0ADC:   test_cheat "QUES15"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-2091.9617, -2415.8713, 30.625)
actor.Angle(PLAYER_ACTOR) = 141.7741
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[170] = 200
$CHECKPOINT[14] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUES13"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,2359.8552, 2774.5723, 10.8203)
actor.Angle(PLAYER_ACTOR) = 257.7289
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[166] = 200
$CHECKPOINT[10] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUES12"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,1092.3076, 2116.3303, 15.3504)
actor.Angle(PLAYER_ACTOR) = 275.1033
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[167] = 200
$CHECKPOINT[11] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUES10"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-312.9861, 2660.7122, 62.9189)
actor.Angle(PLAYER_ACTOR) = 180.0636
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[169] = 200
$CHECKPOINT[13] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST9"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-2197.9729, 990.0771, 80.0)
actor.Angle(PLAYER_ACTOR) = 126.2208
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[164] = 200
$CHECKPOINT[8] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST8"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-2691.3762, 237.25, 4.3359)
actor.Angle(PLAYER_ACTOR) = 2.509
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[162] = 200
$CHECKPOINT[6] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST6"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-1435.1821, -1541.6329, 101.7578)
actor.Angle(PLAYER_ACTOR) = 212.2457
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[161] = 200
$CHECKPOINT[5] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST5"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,152.3247, -180.7739, 1.5847)
actor.Angle(PLAYER_ACTOR) = 95.2995
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[160] = 200
$CHECKPOINT[4] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST4"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,1050.0287, -312.4359, 73.9931)
actor.Angle(PLAYER_ACTOR) = 190.3251
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[159] = 200
$CHECKPOINT[3] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST1"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,2040.9617, -1779.3621, 13.5533)
actor.Angle(PLAYER_ACTOR) = 263.2547
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[156] = 200
$CHECKPOINT[0] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUES14"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,2488.1499, 1151.8297, 22.0078)
actor.Angle(PLAYER_ACTOR) = 359.828
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[165] = 200
$CHECKPOINT[9] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUES11"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-731.5538, 1553.0626, 39.5899)
actor.Angle(PLAYER_ACTOR) = 53.0196
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[168] = 200
$CHECKPOINT[12] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST7"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,-2504.3118, -667.6315, 139.3203)
actor.Angle(PLAYER_ACTOR) = 161.3203
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[163] = 200
$CHECKPOINT[7] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST3"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,284.5223, -1516.559, 24.9289)
actor.Angle(PLAYER_ACTOR) = 90.7867
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[158] = 200
$CHECKPOINT[2] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1
end

if and
0ADC:   test_cheat "QUEST2"
$DEBUG_MENU_ON == 1
then
$CHEAT_CODE_ACTIVATED = 1
actor.PutAtNoOffset(PLAYER_ACTOR,2792.3015, -1429.8887, 36.0938)
actor.Angle(PLAYER_ACTOR) = 2.7473
create_thread @REFR_3D
$RNDM_HOUSE_BANKA[157] = 200
$CHECKPOINT[1] = 20160
$TALK_SIMULATE = 1
$PANEL_CL_ACTIVE_ROW = 2
$CAMP_SPOTTED_FLAG_SAVE = 1 
end

end

/////////////////////////////////////////////////////////////////////////////

if and
33@ > 45000
OPEN_PERK_MENU_PLEASE_FLAG == 1
not actor.Driving(PLAYER_ACTOR)
8A32: not actor PLAYER_ACTOR on_turret_of_car
$PLAYER_OUT_CAR_TIMER > 300
$HUD_REMOVE == 0
then
33@ = 0

if and
not USHER_STORY_FEATRUES_LOCKED == 1
8EB7: not is_on_scripted_cutscene
then
text.ShowTextBox('GAME571')
end

end

if and
002C:   $PLAYER_XP >= $PLAYER_XP_NEXT  // (int)
$FREEMODE == 1
$SAVESTATUS_TRUE == 0
$MODEL_LOADED_FLAG == 1
not $DELETE_SOUND == 1
$PLAYER_LEVEL < 38
then

008B: 1@ = $PLAYER_XP // (int)
0064: 1@ -= $PLAYER_XP_NEXT  // (int)

0089: 0@ = $PLAYER_XP_NEXT
if
$PLAYER_LEVEL < 15
then

if
$PLAYER_LEVEL < 8
then
0@ *= 0.425
else
0@ *= 0.20
end

else

if
$PLAYER_LEVEL < 25
then
0@ *= 0.10
else
0@ *= 0.05
end

end

005F: $PLAYER_XP_NEXT += 0@  // (float)
$PLAYER_LEVEL += 1
if
AUTOLEVELING_ON_FLAG == 1
then
///////////////////////////////////////////
PLAYER_EXTRDM_MULT += 0.025
PLAYER_RESIST_MULT += 0.01
///////////////////////////////////////////
008F: 0@ = integer $ZOMBIE_DAMAGE_MIN to_float 
0@ *= 0.015
0092: 0@ = float 0@ to_integer
005E: $ZOMBIE_DAMAGE_MIN += 0@  // (int)

008F: 0@ = integer $ZOMBIE_DAMAGE_MAX to_float
0@ *= 0.015
0092: 0@ = float 0@ to_integer
005E: $ZOMBIE_DAMAGE_MAX += 0@  // (int)

008F: 0@ = integer $TANK_DAMAGE to_float
0@ *= 0.015
0092: 0@ = float 0@ to_integer
005E: $TANK_DAMAGE += 0@  // (int)

008F: 0@ = integer $CHARGER_DAMAGE to_float
0@ *= 0.015
0092: 0@ = float 0@ to_integer
005E: $CHARGER_DAMAGE += 0@  // (int)

008F: 0@ = integer $HUNTER_DAMAGE to_float
0@ *= 0.015
0092: 0@ = float 0@ to_integer
005E: $HUNTER_DAMAGE += 0@  // (int)

008F: 0@ = integer $HUNTER_DAMAGE2 to_float
0@ *= 0.015
0092: 0@ = float 0@ to_integer
005E: $HUNTER_DAMAGE2 += 0@  // (int)

008F: 0@ = integer $ZOMBIE_HP_MIN to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $ZOMBIE_HP_MIN += 0@  // (int)

008F: 0@ = integer $ZOMBIE_HP_MAX to_float
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $ZOMBIE_HP_MAX += 0@  // (int)

008F: 0@ = integer $TANK_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $TANK_HEALTH += 0@  // (int)

008F: 0@ = integer $HUNTER_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $HUNTER_HEALTH += 0@  // (int)

008F: 0@ = integer $WITCH_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $WITCH_HEALTH += 0@  // (int)

008F: 0@ = integer $CHARGER_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $CHARGER_HEALTH += 0@  // (int)

008F: 0@ = integer $BANDITS_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $BANDITS_HEALTH += 0@  // (int)

008F: 0@ = integer $ARMY_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $ARMY_HEALTH += 0@  // (int)

008F: 0@ = integer $FERMER_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $FERMER_HEALTH += 0@  // (int)

008F: 0@ = integer $SWAT_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $SWAT_HEALTH += 0@  // (int)

008F: 0@ = integer $ZONE69_ARMY_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $ZONE69_ARMY_HEALTH += 0@  // (int)

008F: 0@ = integer $BANDITS_ZONE_HEALTH to_float 
0@ *= 0.005
0092: 0@ = float 0@ to_integer
005E: $BANDITS_ZONE_HEALTH += 0@  // (int)

///////////////////////////////////////////

008F: 0@ = integer $MISSION9_BANDITS_HP to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $MISSION9_BANDITS_HP += 0@  // (int)

008F: 0@ = integer $MISSION15_BANDITS_HP to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $MISSION15_BANDITS_HP += 0@  // (int)  

008F: 0@ = integer $MISSION19_BANDITS_HP to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $MISSION19_BANDITS_HP += 0@  // (int)

008F: 0@ = integer $DLC_M1_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M1_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC_M4_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M4_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC_M7_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M7_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC_M8_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M8_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $ADD_MSN_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $ADD_MSN_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC_M11_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M11_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC_M12_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M12_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC_M13_BANDIT_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC_M13_BANDIT_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC2_M1_ARMY_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC2_M1_ARMY_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC2_M2_ARMY_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC2_M2_ARMY_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC2_M3_ARMY_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC2_M3_ARMY_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC2_M4_ARMY_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC2_M4_ARMY_HEALTH += 0@  // (int)

008F: 0@ = integer $DLC2_M6_ARMY_HEALTH to_float 
0@ *= 0.025
0092: 0@ = float 0@ to_integer
005E: $DLC2_M6_ARMY_HEALTH += 0@  // (int)
 
///////////////////////////////////////////
end
$PLAYER_XP = 0

if
1@ > 0
then
005E: $PLAYER_XP += 1@  // (int)
end

if
$PLAYER_LEVEL < 10
then
$PLAYER_PERKS_POINTS += 3
else
$PLAYER_PERKS_POINTS += 5
end

if
$PLAYER_LEVEL >= 15
then
$PLAYER_PERKS_POINTS += 1
end
if
$PLAYER_LEVEL >= 20
then
$PLAYER_PERKS_POINTS += 2
end

if or
$PLAYER_LEVEL == 5
$PLAYER_LEVEL == 10
$PLAYER_LEVEL == 15
$PLAYER_LEVEL == 20
$PLAYER_LEVEL == 25
$PLAYER_LEVEL == 30
$PLAYER_LEVEL == 35
$PLAYER_LEVEL == 40
then
$PLAYER_PERKS_POINTS += 6
PLAYER_CRIT_CHANCE += 1
PLAYER_CRIT_COUNT += 0.5
end

if or
$PLAYER_LEVEL == 45
$PLAYER_LEVEL == 50
$PLAYER_LEVEL == 55
$PLAYER_LEVEL == 60
$PLAYER_LEVEL == 65
$PLAYER_LEVEL == 70
$PLAYER_LEVEL == 75
$PLAYER_LEVEL == 80
then
$PLAYER_PERKS_POINTS += 6
end

if or
$PLAYER_LEVEL == 85
$PLAYER_LEVEL == 90
$PLAYER_LEVEL == 95
$PLAYER_LEVEL == 100
then
$PLAYER_PERKS_POINTS += 6
end

if
$PLAYER_LEVEL == 38
then
$PLAYER_PERKS_POINTS += 3
end

if
not USHER_STORY_FEATRUES_LOCKED == 1
then

if
not $PERK_TOTAL_GOT == 50
then
text.ShowTextBox('GAME527')
else
text.ShowTextBox('AME527B')
end

end

Audiostream.Volume($MENU_MISC42_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_MISC42_SOUND, 0)
Audiostream.PerformAction($MENU_MISC42_SOUND, PLAY)
33@ = 0

if
not $PERK_TOTAL_GOT == 50
then
OPEN_PERK_MENU_PLEASE_FLAG = 1
end

end

///////////////////////////////////////

if
actor.DrivingVehicleType(PLAYER_ACTOR,#COMBINE)
    then    
    
    1@ = actor.CurrentCar(PLAYER_ACTOR)
    
    for 31@ = 0 to 149
    
    if and
    056D:   actor $CREATURE[31@] defined
    not $CREATURE[31@] == -69
    056E:   car 1@ defined
        then
        if and
        not actor.Dead($CREATURE[31@])
        not actor.Driving($CREATURE[31@])
            then
            0407: store_coords_to 4@ 5@ 6@ from_car 1@ with_offset -5.0 4.0 -2.5
            0407: store_coords_to 7@ 8@ 9@ from_car 1@ with_offset 5.0 8.5 0.0 
            02E3: 25@ = car 1@ speed
            if and
            00A4:   actor $CREATURE[31@] sphere 0 in_cube_cornerA 4@ 5@ 6@ cornerB 7@ 8@ 9@
            25@ >= 2.5
                then
                
                if and
                $INFECTED_SCORE > 0
                $FREEMODE == 1
                $ONMISSION == 1
                    then
                    089F: get_actor $CREATURE[31@] pedtype_to 4@
                    if
                    4@ == 23
                        then
                        $INFECTED_SCORE -= 1
                        09F1: play_audio_at_actor PLAYER_ACTOR event 1138
                        end
                    end                
                
                0A96: 25@ = actor $CREATURE[31@] struct
                25@ += 0x46D
                0A8D: 26@ = read_memory 25@ size 4 virtual_protect 0
                0A8C: write_memory 25@ size 4 value 0xA0 virtual_protect 0
                25@ -= 0x46D
                25@ += 0x754
                0A8D: 26@ = read_memory 25@ size 4 virtual_protect 0
                0A8C: write_memory 25@ size 4 value 0x02 virtual_protect 0
                0321: AS_actor $CREATURE[31@] die_headshotted
                
                0337: set_actor $CREATURE[31@] visibility 0
                0619: enable_actor $CREATURE[31@] collision_detection 0                                
                
                end 
            end
        end
    
    end    
    
    end

//////////////////////////////////////////////////////////////////////////////

if and
$GAMEMODE_STORYLINE == 1
$FREEMODE == 1
UNITED_MAP == 0
0E45: frame_mod 30
then
jump to @DO_KANISTRA_CHECKS_FOR_STORIES
end

if and
$GAMEMODE_SURVIVAL == 1
$GAMEMODE_WAR == 0
UNITED_MAP == 0
0E45: frame_mod 30
then

:DO_KANISTRA_CHECKS_FOR_STORIES
for 0@ = 0 to 85

if
09D1:   pickup $KANISTRA_PICKUP[0@] created
then

065B: store_pickup $KANISTRA_PICKUP[0@] position_to 8@ 9@ 10@ 
000F: 8@ -= 10.0
000F: 9@ -= 10.0
000F: 10@ -= 10.0
065B: store_pickup $KANISTRA_PICKUP[0@] position_to 5@ 6@ 7@ 
000F: 5@ -= -10.0
000F: 6@ -= -10.0
000F: 7@ -= -10.0

if            
0356:   explosion_type -1 in_cube_cornerA 8@ 9@ 10@ cornerB 5@ 6@ 7@
    then
    pickup.Destroy($KANISTRA_PICKUP[0@])
    $KANISTRA_PICKUP[0@] = 28
    end

end

end

end

//////////////////////////////////////////////////////////////////////////////

if
$ASS_FLAG == 1
then
actor.SetImmunities(PLAYER_ACTOR,1,1,1,1,1)
end

if
$ENTERED_CAR_FLAG == 0
    then
    $ENTERED_CAR_TIMER = 6
    if
    actor.Driving(PLAYER_ACTOR)
        then
        $ENTERED_CAR_FLAG = 1
        $ENTERED_CAR_TIMER = 0
        end
    else
    $ENTERED_CAR_TIMER += 1
    if
    not actor.Driving(PLAYER_ACTOR)
        then
        $ENTERED_CAR_FLAG = 0
        end
    end
    
//////////////////////////////////////////////////////////////////////////

if and
Actor.DrivingPlane(PLAYER_ACTOR)
not Actor.DrivingVehicleType(PLAYER_ACTOR, #VORTEX)
    then     
    0@ = Actor.CurrentCar(PLAYER_ACTOR)
    if
    056E:   car 0@ defined
        then
        if    
        Car.Wrecked(0@)
            then                                               
            099A: set_car 0@ collision_detection true
            0338: set_car 0@ visibility true
            0ABF: set_vehicle 0@ engine_state_to false
            end
        end
    end            

//////////////////////////////////////////////////////////////////////////

if and
actor.Driving(PLAYER_ACTOR)
$GAMEMODE_WAR == 1
    then
    if and
    84C8: not  actor PLAYER_ACTOR driving_flying_vehicle
    not actor.DrivingVehicleType(PLAYER_ACTOR,RHINO_MODEL_NUMBER)
    not $GAME_SPEED == 0.0
        then
        1@ = actor.CurrentCar(PLAYER_ACTOR)
        053F: set_car 1@ tires_vulnerability 0
        0@ = car.Health(1@)
        
        if and
        0@ < 625
        0@ > 249
        then
        0@ += 10
        car.Health(1@) = 0@
        end
        
        end
    end
    
if and
actor.Driving(PLAYER_ACTOR)
$WOLVERINE_FLAG == 1
    then
    if and
    84C8: not  actor PLAYER_ACTOR driving_flying_vehicle
    not actor.DrivingVehicleType(PLAYER_ACTOR,RHINO_MODEL_NUMBER)
    not $GAME_SPEED == 0.0
        then
        1@ = actor.CurrentCar(PLAYER_ACTOR)
        053F: set_car 1@ tires_vulnerability 0
        0@ = car.Health(1@)
        
        if
        0@ < 1000
        then
        0@ += 9
        car.Health(1@) = 0@
        end
        
        end
    end    

//////////////////////////////////////////////////////////////////////////

if or
actor.DrivingVehicleType(PLAYER_ACTOR,ARMY_HUNTER_MODEL_NUMBER)
actor.DrivingVehicleType(PLAYER_ACTOR,#HYDRA)
actor.DrivingVehicleType(PLAYER_ACTOR,SEASPAR_MODEL_NUMBER)
actor.DrivingVehicleType(PLAYER_ACTOR,#RUSTLER)
04C8:   actor PLAYER_ACTOR driving_flying_vehicle
    then
    1@ = actor.CurrentCar(PLAYER_ACTOR)
    if
    not car.Wrecked(1@)
        then
        0@ = car.Health(1@)
        2@ = 625
        
        if or
        actor.DrivingVehicleType(PLAYER_ACTOR,ARMY_HUNTER_MODEL_NUMBER)
        actor.DrivingVehicleType(PLAYER_ACTOR,#HYDRA)
        then
        2@ = 5125 
        end
        
        if or
        actor.DrivingVehicleType(PLAYER_ACTOR,SEASPAR_MODEL_NUMBER)
        actor.DrivingVehicleType(PLAYER_ACTOR,#RUSTLER)
        then
        2@ = 2625 
        end
        
        if and
        801D: not  0@ > 2@  // (int)
        not $GAME_SPEED == 0.0
            then
            
            if
            2@ == 625
            then
            0@ += 2
            else
            0@ += 3
            end
            
            car.Health(1@) = 0@
            end
        end
    end

if and
$MODEL_LOADED_FLAG == 1
$SAVESTATUS_TRUE == 0
$SAVING_DELAY == 0
then

//if or
//actor.DrivingVehicleType(PLAYER_ACTOR,ARMY_HUNTER_MODEL_NUMBER)
//actor.DrivingVehicleType(PLAYER_ACTOR,SEASPAR_MODEL_NUMBER)
//actor.DrivingVehicleType(PLAYER_ACTOR,PREDATOR_MODEL_NUMBER)
//actor.DrivingVehicleType(PLAYER_ACTOR,15574)
//actor.DrivingVehicleType(PLAYER_ACTOR,#RUSTLER)
//    then    
//    if and
//    00E1:   player 0 pressed_key 4
//    not $GAME_SPEED == 0.0
//        then        
//        0AB9: get_mp3 $MINIGUN_SOUND3 state_to 0@
//        
//        if
//        not 0@ == 1
//        then
//        audiostream.LinkToActor($MINIGUN_SOUND3,PLAYER_ACTOR)
//        audiostream.Loop($MINIGUN_SOUND3,1)
//        audiostream.Volume($MINIGUN_SOUND3) = $SOUNDS_VOLUME
//        audiostream.PerformAction($MINIGUN_SOUND3,PLAY)
//        end
//        
//        else
//        
//        0AB9: get_mp3 $MINIGUN_SOUND3 state_to 0@
//    
//        if
//        0@ == 1
//        then
//        audiostream.PerformAction($MINIGUN_SOUND3,STOP)
//        end
//        
//        end
//    else
//    
//    if and
//    $MODEL_LOADED_FLAG == 1
//    $SAVESTATUS_TRUE == 0
//    $SAVING_DELAY == 0
//    then
//    0AB9: get_mp3 $MINIGUN_SOUND3 state_to 0@
//    
//    if
//    0@ == 1
//    then
//    audiostream.PerformAction($MINIGUN_SOUND3,STOP)
//    end
//    
//    end
//    
//    end
    
if
actor.DrivingVehicleType(PLAYER_ACTOR,RHINO_MODEL_NUMBER)
    then
    if and
    00E1:  player 0 pressed_key 4
    not $GAME_SPEED == 0.0
    TANK_MINIGUN_TURRET_HEAT < 200
        then
        0AB9: get_mp3 $MINIGUN_SOUND4 state_to 0@
        
        if
        not 0@ == 1
        then
        audiostream.LinkToActor($MINIGUN_SOUND4,PLAYER_ACTOR)
        audiostream.Loop($MINIGUN_SOUND4,1)
        audiostream.Volume($MINIGUN_SOUND4) = $SOUNDS_VOLUME
        audiostream.PerformAction($MINIGUN_SOUND4,PLAY)
        end
        
        else
        
        0AB9: get_mp3 $MINIGUN_SOUND4 state_to 0@
    
        if
        0@ == 1
        then
        audiostream.PerformAction($MINIGUN_SOUND4,STOP)
        end
        
        end
    else
    
    if and
    $MODEL_LOADED_FLAG == 1
    $SAVESTATUS_TRUE == 0
    $SAVING_DELAY == 0
    then
    0AB9: get_mp3 $MINIGUN_SOUND4 state_to 0@
    
    if
    0@ == 1
    then
    audiostream.PerformAction($MINIGUN_SOUND4,STOP)
    end
    
    end
    
    end    
    
end

//////////////////////////////////////////////////////////////////////////

if and
$MODEL_LOADED_FLAG == 1
$SAVESTATUS_TRUE == 0
$SAVING_DELAY == 0
    then        
    if
    actor.DrivingVehicleType(PLAYER_ACTOR,ARMY_HUNTER_MODEL_NUMBER)    
        then        
        if and
        00E1:   player 0 pressed_key 17
        not $GAME_SPEED == 0.0
            then
            
            audiostream.LinkToActor($ROCKET_SOUND2,PLAYER_ACTOR)
            audiostream.Loop($ROCKET_SOUND2,0)
            audiostream.Volume($ROCKET_SOUND2) = $SOUNDS_VOLUME
            audiostream.PerformAction($ROCKET_SOUND2,PLAY)
            
            wait 500
            
            while 00E1:   player 0 pressed_key 17
            wait 0
            end
            
            end        
        end    
    end

//////////////////////////////////////////////////////////////////////////
    
if and
$MODEL_LOADED_FLAG == 1
$SAVESTATUS_TRUE == 0
$SAVING_DELAY == 0
    then    
    if
    actor.DrivingVehicleType(PLAYER_ACTOR,#HYDRA)    
        then        
        if and
        00E1:   player 0 pressed_key 17
        not $GAME_SPEED == 0.0
            then
            
            audiostream.LinkToActor($ROCKET_SOUND2,PLAYER_ACTOR)
            audiostream.Loop($ROCKET_SOUND2,0)
            audiostream.Volume($ROCKET_SOUND2) = $SOUNDS_VOLUME
            audiostream.PerformAction($ROCKET_SOUND2,PLAY)
            
            wait 500
            
            while 00E1:   player 0 pressed_key 4
            wait 0
            end
            
            end        
        end    
    end    

//////////////////////////////////////////////////////////////////////////    

if and
00E1:   player 0 pressed_key 15
not actor.Driving(PLAYER_ACTOR)
$CARS_WORK_FLAG == 0
$SALVATION_FLAG == 0  
    then
    0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@
    if 
    056E:   car 3@ defined   
        then    
        gosub @TEST_BIT5
        if
        88B7:   not test 12@ bit 2
            then
            28@ = 1
            gosub @CAR_DOOR_CHECK_LOCK
            if
            28@ == 1
                then
                jump to @CAR_DOOR_LOCK_RANDOM                 
                end
            end
        end    
    end

jump to @CAR_DOOR_CHECK_IDLE

:CAR_DOOR_LOCK_RANDOM
0209: 0@ = random_int_in_ranges $DOOR_MIN $DOOR_MAX

if 
0@ == 1
    then
    gosub @TEST_BIT5
    08BD: set 12@ bit 2
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    08C3: clear 12@ bit 2
    else
    gosub @TEST_BIT5
    08BD: set 12@ bit 2
    0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
    08C3: clear 12@ bit 2
    if
    not actor.InCar(PLAYER_ACTOR,3@)
        then
        020A: set_car 3@ door_status_to 2
        end
    end        
    
jump @CAR_DOOR_CHECK_IDLE

:CAR_DOOR_CHECK_LOCK

if
UNITED_MAP == 0
then

if or
Car.Id(3@) == #BANSHEE
Car.Id(3@) == #COMET
Car.Id(3@) == #MESA
Car.Id(3@) == #FELTZER
Car.Id(3@) == #BLADE
Car.Id(3@) == #SAVANNA
Car.Id(3@) == #BROADWAY
Car.Id(3@) == #STALLION
    then
    28@ = 0
    end

if or
Car.Id(3@) == RHINO_MODEL_NUMBER
Car.Id(3@) == ARMY_HUNTER_MODEL_NUMBER
Car.Id(3@) == #HYDRA
Car.Id(3@) == #STREAK
Car.Id(3@) == #STREAKC
Car.Id(3@) == #FREIGHT
Car.Id(3@) == #WINDSOR
Car.Id(3@) == #SUPERGT
    then
    28@ = 0
    end
    
if or
Car.Id(3@) == #PIZZABOY
Car.Id(3@) == #PCJ600
Car.Id(3@) == #FAGGIO
Car.Id(3@) == #FREEWAY
Car.Id(3@) == #RCBARON
Car.Id(3@) == #SANCHEZ
Car.Id(3@) == #COPBIKE
    then
    28@ = 0
    end
    
if or
Car.Id(3@) == #BMX
Car.Id(3@) == #MTBIKE
Car.Id(3@) == #MAVERICK
Car.Id(3@) == #VCNMAV   
Car.Id(3@) == #DINGHY
    then
    28@ = 0
    end
    
if 
Car.Id(3@) == #DODO
    then
    28@ = 0
    end
    
if or
Car.Id(3@) == #BMX
Car.Id(3@) == #MTBIKE
Car.Id(3@) == #QUAD
Car.Id(3@) == 15426
    then
    28@ = 0
    end
    
else    
    
if or
Car.Id(3@) == 15390
Car.Id(3@) == 15368
Car.Id(3@) == 15369
Car.Id(3@) == 15372
Car.Id(3@) == 15335
Car.Id(3@) == 15294
Car.Id(3@) == 15285
    then
    28@ = 0
    end
    
if or
Car.Id(3@) == 15439
Car.Id(3@) == 15419
Car.Id(3@) == 15536
Car.Id(3@) == 15508
Car.Id(3@) == 15503
Car.Id(3@) == 15349
Car.Id(3@) == 15407
Car.Id(3@) == 15558
    then
    28@ = 0
    end
    
end    
    
0A97: 25@ = car 3@ struct
0A8E: 26@ = 25@ + 0x590 
0A8D: 27@ = read_memory 26@ size 1 virtual_protect 1

if
27@ == 9
    then
    28@ = 0
    end                    

return

:TEST_BIT5
0A97: 11@ = car 3@ struct 
11@ += 18
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
return