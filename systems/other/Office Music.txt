const
MUSIC1_PLAYED = 10@
MUSIC2_PLAYED = 11@
MUSIC3_PLAYED = 12@
MUSIC4_PLAYED = 13@
MUSIC5_PLAYED = 14@
MUSIC6_PLAYED = 15@
MUSIC7_PLAYED = 16@
MUSIC8_PLAYED = 17@
MUSIC9_PLAYED = 18@
MUSIC10_PLAYED = 19@
MUSIC11_PLAYED = 20@
MUSIC12_PLAYED = 9@
MUSIC13_PLAYED = 8@
MUSIC14_PLAYED = 28@
MUSIC15_PLAYED = 29@
MUSIC16_PLAYED = 30@
CURRENT_PERSONAL_MUSIC = 27@
ZA_OFFICE_SPEAKER1 = $BOLIDE_B_FINS_F
ZA_OFFICE_SPEAKER2 = $CARMA_GLOB_RACE_STRGHT
ZA_OFFICE_SPEAKER3 = $CARMA_GLOB_TWO_CARRECS
ZA_OFFICE_SPEAKER4 = $CARMA_GLOB_TIME_MULT
ZA_OFFICE_SPEAKER5 = $CARMA_GLOB_FREEROAM_DR
end

:OFC_MUS
thread 'OFC_MUS'

ZA_OFFICE_SPEAKER1 = actor.Create(26,#MALE01,1811.06, -1292.98, 123.067)
actor.LockInCurrentPosition(ZA_OFFICE_SPEAKER1,true)
0619: enable_actor ZA_OFFICE_SPEAKER1 collision_detection 0
0337: set_actor ZA_OFFICE_SPEAKER1 visibility 0

ZA_OFFICE_SPEAKER2 = actor.Create(26,#MALE01,1816.28, -1279.86, 123.067)
actor.LockInCurrentPosition(ZA_OFFICE_SPEAKER2,true)
0619: enable_actor ZA_OFFICE_SPEAKER2 collision_detection 0
0337: set_actor ZA_OFFICE_SPEAKER2 visibility 0

ZA_OFFICE_SPEAKER3 = actor.Create(26,#MALE01,1829.25, -1279.48, 123.067)
actor.LockInCurrentPosition(ZA_OFFICE_SPEAKER3,true)
0619: enable_actor ZA_OFFICE_SPEAKER3 collision_detection 0
0337: set_actor ZA_OFFICE_SPEAKER3 visibility 0

ZA_OFFICE_SPEAKER4 = actor.Create(26,#MALE01,1828.89, -1295.01, 123.067)
actor.LockInCurrentPosition(ZA_OFFICE_SPEAKER4,true)
0619: enable_actor ZA_OFFICE_SPEAKER4 collision_detection 0
0337: set_actor ZA_OFFICE_SPEAKER4 visibility 0

ZA_OFFICE_SPEAKER5 = actor.Create(26,#MALE01,1829.26, -1314.28, 123.067)
actor.LockInCurrentPosition(ZA_OFFICE_SPEAKER5,true)
0619: enable_actor ZA_OFFICE_SPEAKER5 collision_detection 0
0337: set_actor ZA_OFFICE_SPEAKER5 visibility 0

repeat
wait 0
until $SAVING_DELAY == 0

0253: save_current_time
$TIME_LOCK_OFF = 69
//0A8C: write_memory 0xB7015C size 4 value 25 virtual_protect 0
WEATHER_SYS_IDLE_FLAG = 1
set_weather 0

if
$SAVING_DELAY == 0
then
0169: set_fade_color_RGB 255 255 255
$SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\OTHER\OFFICE\officein.mp3")
Audiostream.PerformAction($SHIT_FUCK, PLAY)
Audiostream.Loop($SHIT_FUCK, 0)
Audiostream.Volume($SHIT_FUCK) = 1.0
fade 0 100
wait 2000
fade 1 2000
wait 2000
audiostream.PerformAction($SHIT_FUCK,STOP)
audiostream.Release($SHIT_FUCK) 
0169: set_fade_color_RGB 0 0 0  
end

$CARMA_GLOB_RACE_LENGHT = 0

:OFFICE_MUSIC_START

gosub @RANDOM_OFFICE_MUSIC

Audiostream.Volume(21@) = 0.0
Audiostream.Loop(21@, 0)
Audiostream.PerformAction(21@, PLAY)

Audiostream.Volume(22@) = 0.0
Audiostream.Loop(22@, 0)
Audiostream.PerformAction(22@, PLAY)

Audiostream.Volume(23@) = 0.0
Audiostream.Loop(23@, 0)
Audiostream.PerformAction(23@, PLAY)

Audiostream.Volume(24@) = 0.0
Audiostream.Loop(24@, 0)
Audiostream.PerformAction(24@, PLAY)

Audiostream.Volume(25@) = 0.0
Audiostream.Loop(25@, 0)
Audiostream.PerformAction(25@, PLAY)

Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)

26@ = Audiostream.Load("AUDIO\SOUNDS\CasetteON.mp3")

CURRENT_PERSONAL_MUSIC = -1

/////////////////////Плавное нарастание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
create_thread @MUS_FAD

wait 1 

//////////////////////////////////////////////////////// 

:OFFICE_MUSIC_IDLE
wait 0  

//Skive
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1825.8539 -1293.2761 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 12
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1825.8539 -1293.2761 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907H' displayed
    then
    0512: show_permanent_text_box 'AME907H' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\andrey.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\andrey.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\andrey.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\andrey.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\andrey.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 12
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907H' displayed
    then
    text.RemoveTextBox() 
    end
    
    end 

//Semyon Persunov
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1782.4543 -1310.1174 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 11
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1782.4543 -1310.1174 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907G' displayed
    then
    0512: show_permanent_text_box 'AME907G' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\semen.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\semen.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\semen.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\semen.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\semen.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 11
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907G' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//DaneVogel
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1797.9756 -1296.7001 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 10
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1797.9756 -1296.7001 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907F' displayed
    then
    0512: show_permanent_text_box 'AME907F' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vogel.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vogel.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vogel.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vogel.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vogel.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 10
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907F' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Criterrus
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1774.8949 -1298.8691 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 9
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1774.8949 -1298.8691 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907E' displayed
    then
    0512: show_permanent_text_box 'AME907E' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\yar.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\yar.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\yar.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\yar.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\yar.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 9
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907E' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Baldinymus
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1772.9113 -1305.9141 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 8
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1772.9113 -1305.9141 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907D' displayed
    then
    0512: show_permanent_text_box 'AME907D' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\baldin.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\baldin.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\baldin.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\baldin.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\baldin.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 8
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907D' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Danil
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1808.9403 -1299.8546 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 7
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1808.9403 -1299.8546 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907C' displayed
    then
    0512: show_permanent_text_box 'AME907C' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\danil.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\danil.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\danil.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\danil.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\danil.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 7
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907C' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Artem
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1833.5648 -1275.1599 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 6
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1833.5648 -1275.1599 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'AME907B' displayed
    then
    0512: show_permanent_text_box 'AME907B' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\artem.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\artem.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\artem.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\artem.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\artem.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 6
        break                
        end        
    
    end
    
    if
    0A2A:   text_box 'AME907B' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Karim
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1825.8573 -1287.879 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 5
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1825.8573 -1287.879 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME907' displayed
    then
    0512: show_permanent_text_box 'GAME907' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\karim.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\karim.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\karim.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\karim.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\karim.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 5
        break                
        end
    
    end
    
    if
    0A2A:   text_box 'GAME907' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Adam
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1831.3478 -1272.1162 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 4
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1831.3478 -1272.1162 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME905' displayed
    then
    0512: show_permanent_text_box 'GAME905' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\adam.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\adam.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\adam.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\adam.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\adam.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 4
        break                
        end
    
    end
    
    if
    0A2A:   text_box 'GAME905' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Vlad
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1819.749 -1285.4518 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 3
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1819.749 -1285.4518 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME904' displayed
    then
    0512: show_permanent_text_box 'GAME904' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vlad.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vlad.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vlad.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vlad.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\vlad.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 3
        break                
        end
    
    end
    
    if
    0A2A:   text_box 'GAME904' displayed
    then
    text.RemoveTextBox() 
    end
    
    end
    
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1822.8588 -1285.4845 radius 1.0 1.0 stopped
CURRENT_PERSONAL_MUSIC == 2
0AB0:   key_pressed 81
    then
    jump to @MAKAROV_PRIKOL
    end   

//PTSDriver
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1822.8588 -1285.4845 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 2
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1822.8588 -1285.4845 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME903' displayed
    then
    0512: show_permanent_text_box 'GAME903' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\sergey.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\sergey.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\sergey.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\sergey.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\sergey.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 2
        break                
        end
        
    if
    0AB0:   key_pressed 81
        then
        :MAKAROV_PRIKOL               
        text.RemoveTextBox()
        
        06A9: AS_actor PLAYER_ACTOR look_at_point 1821.83 -1285.89 120.03 3000 ms
        
        player.CanMove(PLAYER_CHAR,false)
        fade 0 2000
        $HUD_REMOVE = 1
        wait 2000
        
        0@ = Audiostream.Load("audio\sounds\other\office\makarov_prikol_pre.mp3")
        1@ = Audiostream.Load("audio\sounds\other\office\makarov_prikol.mp3")
        
        Audiostream.Volume(0@) = $SOUNDS_VOLUME
        Audiostream.Loop(0@, 0)
        Audiostream.PerformAction(0@, PLAY)
        wait 10000
        Audiostream.Volume(1@) = $SOUNDS_VOLUME
        Audiostream.Loop(1@, 0)
        Audiostream.PerformAction(1@, PLAY)                            
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 100
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        ///////////////////////////////////////////////////////////
        
        0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT145_GOT"            
        if and
        0@ == 0
        $CHEATED_FLAG == 0
        then
        v$ACHIEVEMNT = "ACH145"
        $ACHIEVEMENT_GOT_FLAG = 1
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT145_GOT"
        end 
            
        while $ACHIEVEMENT_GOT_FLAG == 1
        wait 0
        end
        
        ///////////////////////////////////////////////////////////
        
        $ALLOW_HUNGER = 0
        $DELETE_SOUND = 1
        $SAVER_COMING = 0 
        $FPS_COUNTER_ENABLED = 0 
        $FPS_COUNTER_ENABLED2 = 0    
        $SATIETY_LEVEL = 600.0
        $FATIGUE_LEVEL = 0.0
        
        $STATS_SHOW_FLAG = 0
        $STATS_SHOW_GAMEMODE = 1
        create_thread @STS_SHW
        
        $STATS_CAN_BE_SKIPPED = 0                    

        $WEATHER_CYCLE_OFF = 1
        $SOUND_OFF_1 = 1
        $SAVESTATUS_TRUE = 1
        $WEATHER_LOCK_OFF_FLAG = 1
        $NIGHTMARE_FLAG = 1
        $INF_MODE_COLOR_A = 50
        $SPEED_09_FLAG = 1
        PLAYER_NO_ITEMS_FLAG = 1
        $DRUNK_MODE_FLAG = 1
        015D: set_gamespeed 0.9
        set_weather 61
        0555: remove_weapon 46 from_actor PLAYER_ACTOR
        06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
        0992: set_player PLAYER_CHAR weapons_scrollable 0
        0901: enable_player PLAYER_CHAR jump_key 0
        create_thread @TIME_00
        select_interior 666
        actor.PutAtNoOffset(PLAYER_ACTOR,0.0, 0.0, 999999999.0)
        actor.Angle(PLAYER_ACTOR) = 0.0
        
        {$I newopcodes/forallobjs}
        0750: set_object obj visibility 0 
        {$I newopcodes/for_end}        
        
        $MUSIC_ASSHOLE = Audiostream.Load("audio\sounds\other\office\makarov_afterprikol.mp3")
        Audiostream.PerformAction($MUSIC_ASSHOLE, PLAY)
        Audiostream.Loop($MUSIC_ASSHOLE, 1)
        Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
        
        /////////////////////Плавное нарастание/////////////////////
        
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
        0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 10000
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
        create_thread @MUS_FAD
        
        wait 1
        
        fade 1 10000
        
        repeat
        wait 0
        random_int 1@ 0x466C50 0x4836B8         
        0A8D: 2@ = read_memory 1@ size 4 virtual_protect 1
        random_float 3@ 0.0 640.0
        random_float 4@ 0.0 440.0
        03F0: enable_text_draw 1
        0340: set_text_draw_RGBA 255 255 255 200
        if
        DIRECTFONT_INSTALLED == 1
        then    
        0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 200
        end
        
        03E0: draw_text_behind_textures 1
        0349: set_text_draw_font 2
        03E3: set_texture_to_be_drawn_antialiased 1
        033F: set_text_draw_letter_size 0.4 1.15 
        081C: draw_text_outline 1 RGBA 0 0 0 255
        045A: draw_text_1number 3@ 4@ GXT 'DISP0' number 2@  // ALL RACES WON!~n~~w~$~1~                 
        until false                            
        
        end_thread                 
                        
        end        
    
    end
    
    if
    0A2A:   text_box 'GAME903' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Philips27
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1820.7635 -1272.1328 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 1
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1820.7635 -1272.1328 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME902' displayed
    then
    0512: show_permanent_text_box 'GAME902' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\philips.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\philips.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\philips.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\philips.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\philips.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 1
        break                
        end
    
    end
    
    if
    0A2A:   text_box 'GAME902' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//BloodTiger
if and
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1814.1378 -1275.9503 radius 1.0 1.0 stopped
not CURRENT_PERSONAL_MUSIC == 0
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1814.1378 -1275.9503 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME901' displayed
    then
    0512: show_permanent_text_box 'GAME901' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        21@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\tiger.ogg")
        22@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\tiger.ogg")
        23@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\tiger.ogg")
        24@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\tiger.ogg")
        25@ = Audiostream.Load3D("audio\sounds\other\office\music\personal\tiger.ogg")
        
        Audiostream.LinkToActor(21@,ZA_OFFICE_SPEAKER1)
        Audiostream.LinkToActor(22@,ZA_OFFICE_SPEAKER2)
        Audiostream.LinkToActor(23@,ZA_OFFICE_SPEAKER3)
        Audiostream.LinkToActor(24@,ZA_OFFICE_SPEAKER4)
        Audiostream.LinkToActor(25@,ZA_OFFICE_SPEAKER5)
        
        gosub @OFFICE_MUSIC_PERSONAL_SET
        
        CURRENT_PERSONAL_MUSIC = 0
        break                
        end
    
    end
    
    if
    0A2A:   text_box 'GAME901' displayed
    then
    text.RemoveTextBox() 
    end
    
    end

//Смена трека

if
00EF:   actor PLAYER_ACTOR sphere 0 near_point 1828.299 -1279.8617 radius 1.0 1.0 stopped
    then
    
    while 00EF:   actor PLAYER_ACTOR sphere 0 near_point 1828.299 -1279.8617 radius 1.0 1.0 stopped
    wait 0
    
    if
    8A2A: not  text_box 'GAME906' displayed
    then
    0512: show_permanent_text_box 'GAME906' 
    end
    
    if
    0AB0:   key_pressed $KEY_USE
        then
        
        Audiostream.PerformAction(26@, PLAY)
        Audiostream.Volume(26@) = $SOUNDS_VOLUME
        
        /////////////////////Плавное затухание/////////////////////
    
        $MUSIC_FADE_NUMBER += 1
        if
        $MUSIC_FADE_NUMBER > 4
            then
            $MUSIC_FADE_NUMBER = 0 
            end    
        
        008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
        008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
        008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
        008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
        008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
        $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
        $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
        $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
        $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
        create_thread @MUS_FAD
        
        wait 1
        
        while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
        wait 0
        end
        
        wait 100
        
        gosub @OFFICE_MUSIC_STREAMS_RELEASE2                
        jump to @OFFICE_MUSIC_START
        end
    
    end
    
    if
    0A2A:   text_box 'GAME906' displayed
    then
    text.RemoveTextBox() 
    end
    
    else
    
    if
    0A2A:   text_box 'GAME906' displayed
    then
    text.RemoveTextBox() 
    end
    
    end                   

if
$CARMA_GLOB_RACE_LENGHT == 69
    then
    
    /////////////////////Плавное затухание/////////////////////
    
    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
    
    008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
    008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
    008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
    008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
    008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 250
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
    create_thread @MUS_FAD    
    
    0169: set_fade_color_RGB 255 255 255
    $SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\OTHER\OFFICE\officeout.mp3")
    Audiostream.PerformAction($SHIT_FUCK, PLAY)
    Audiostream.Loop($SHIT_FUCK, 0)
    Audiostream.Volume($SHIT_FUCK) = 1.0
    fade 0 0
    wait 2000
    WEATHER_SYS_IDLE_FLAG = 0
    0254: restore_current_time
    $TIME_LOCK_OFF = 1
//    0A8C: write_memory 0xB7015C size 4 value 1000 virtual_protect 0    
    fade 1 2000
    wait 2000
    audiostream.PerformAction($SHIT_FUCK,STOP)
    audiostream.Release($SHIT_FUCK) 
    0169: set_fade_color_RGB 0 0 0                  
    
    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
    wait 0
    end
    
    PLAYER_IN_OFFICE_FLAG = 0    
    
    gosub @OFFICE_MUSIC_STREAMS_RELEASE2
    
    //////////////////////////////////////////////////////////        
        
    end_thread
    end
    
if
$CARMA_GLOB_RACE_LENGHT == 699
    then
    
    /////////////////////Плавное затухание/////////////////////
    
    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
    
    008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
    008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
    008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
    008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
    008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
    create_thread @MUS_FAD    
    
    0169: set_fade_color_RGB 255 255 255
    $SHIT_FUCK = Audiostream.Load("AUDIO\SOUNDS\OTHER\OFFICE\officeout.mp3")
    Audiostream.PerformAction($SHIT_FUCK, PLAY)
    Audiostream.Loop($SHIT_FUCK, 0)
    Audiostream.Volume($SHIT_FUCK) = 1.0
    fade 0 0
    wait 2000
    WEATHER_SYS_IDLE_FLAG = 0
    0254: restore_current_time
    $TIME_LOCK_OFF = 1
//    0A8C: write_memory 0xB7015C size 4 value 1000 virtual_protect 0    
    fade 1 2000
    wait 2000
    audiostream.PerformAction($SHIT_FUCK,STOP)
    audiostream.Release($SHIT_FUCK) 
    0169: set_fade_color_RGB 0 0 0                
    
    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
    wait 0
    end
    
    PLAYER_IN_OFFICE_FLAG = 0    
    
    gosub @OFFICE_MUSIC_STREAMS_RELEASE2
    
    //////////////////////////////////////////////////////////        
        
    end_thread
    end
    
if
$CARMA_GLOB_RACE_LENGHT == 6991
    then
    
    /////////////////////Плавное затухание/////////////////////
    
    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
    
    008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
    008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
    008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
    008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
    008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int)
    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 1000
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
    create_thread @MUS_FAD    
    
    wait 1
    
    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
    wait 0
    end
    
    PLAYER_IN_OFFICE_FLAG = 0
    WEATHER_SYS_IDLE_FLAG = 0
    0254: restore_current_time
    $TIME_LOCK_OFF = 1    
    
    gosub @OFFICE_MUSIC_STREAMS_RELEASE2
    
    //////////////////////////////////////////////////////////        
        
    end_thread
    end            

if
$MUTE_MUSIC_FLAG == 0
then
Audiostream.Volume(21@) = $MUSIC_VOLUME
else
Audiostream.Volume(21@) = 0.0
end   

0AB9: get_mp3 21@ state_to 11@
if 
11@ == -1 
    then
    :OFFICE_MUSIC_RESTART
    gosub @OFFICE_MUSIC_STREAMS_RELEASE
    jump to @OFFICE_MUSIC_START    
    end

jump to @OFFICE_MUSIC_IDLE

:RANDOM_OFFICE_MUSIC
random_int 1@ 0 16

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC1_PLAYED"
if
1@ == 0
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC1_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC1.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC1.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC1.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC1.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC1.ogg") 
    else 
    jump to @RANDOM_OFFICE_MUSIC
    end   

end   

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC2_PLAYED"
if
1@ == 1
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC2_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC2.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC2.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC2.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC2.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC2.ogg")  
    else
    jump to @RANDOM_OFFICE_MUSIC
    end   

end   

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC3_PLAYED"
if
1@ == 2
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC3_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC3.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC3.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC3.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC3.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC3.ogg")  
    else
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC4_PLAYED"
if
1@ == 3
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC4_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC4.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC4.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC4.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC4.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC4.ogg")  
    else
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC5_PLAYED"
if
1@ == 4
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC5_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC5.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC5.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC5.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC5.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC5.ogg")  
    else
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC6_PLAYED"
if
1@ == 5
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC6_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC6.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC6.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC6.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC6.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC6.ogg")  
    else
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC7_PLAYED"
if
1@ == 6
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC7_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC7.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC7.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC7.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC7.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC7.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC8_PLAYED"
if
1@ == 7
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC8_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC8.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC8.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC8.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC8.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC8.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC9_PLAYED"
if
1@ == 8
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC9_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC9.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC9.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC9.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC9.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC9.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC10_PLAYED"
if
1@ == 9
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC10_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC10.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC10.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC10.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC10.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC10.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC11_PLAYED"
if
1@ == 10
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC11_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC11.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC11.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC11.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC11.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC11.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC12_PLAYED"
if
1@ == 11
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC12_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC12.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC12.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC12.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC12.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC12.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC13_PLAYED"
if
1@ == 12
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC13_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC13.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC13.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC13.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC13.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC13.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC14_PLAYED"
if
1@ == 13
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC14_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC14.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC14.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC14.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC14.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC14.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC15_PLAYED"
if
1@ == 14
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC15_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC15.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC15.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC15.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC15.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC15.ogg")  
    else            
    jump to @RANDOM_OFFICE_MUSIC
    end   

end

0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC16_PLAYED"
if
1@ == 15
then

    if
    not 2@ == 1
    then        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC16_PLAYED"    
    21@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC16.ogg")
    22@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC16.ogg")
    23@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC16.ogg")
    24@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC16.ogg")
    25@ = Audiostream.Load3D("audio\sounds\other\office\music\OFFICE_MUSIC16.ogg")  
    else
    
    gosub @MUSIC_PLAYED_GET_OFFICE
    if and
    MUSIC1_PLAYED == 1
    MUSIC2_PLAYED == 1
    MUSIC3_PLAYED == 1
    MUSIC4_PLAYED == 1
    MUSIC5_PLAYED == 1
    MUSIC6_PLAYED == 1
    MUSIC7_PLAYED == 1
    MUSIC8_PLAYED == 1
        then
        if and
        MUSIC9_PLAYED == 1
        MUSIC10_PLAYED == 1
        MUSIC11_PLAYED == 1
        MUSIC12_PLAYED == 1
        MUSIC13_PLAYED == 1
        MUSIC14_PLAYED == 1
        MUSIC15_PLAYED == 1
        MUSIC16_PLAYED == 1
            then
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC1_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC2_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC3_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC4_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC5_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC6_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC7_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC8_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC9_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC10_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC11_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC12_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC13_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC14_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC15_PLAYED"
            0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC16_PLAYED"
            MUSIC1_PLAYED = 0
            MUSIC2_PLAYED = 0
            MUSIC3_PLAYED = 0
            MUSIC4_PLAYED = 0
            MUSIC5_PLAYED = 0
            MUSIC6_PLAYED = 0
            MUSIC7_PLAYED = 0
            MUSIC8_PLAYED = 0
            MUSIC9_PLAYED = 0
            MUSIC10_PLAYED = 0
            MUSIC11_PLAYED = 0
            MUSIC12_PLAYED = 0
            MUSIC13_PLAYED = 0
            MUSIC14_PLAYED = 0
            MUSIC15_PLAYED = 0
            MUSIC16_PLAYED = 0
            end
        end
                
    jump to @RANDOM_OFFICE_MUSIC
    end   

end  

return

:MUSIC_PLAYED_GET_OFFICE
0AF0: MUSIC1_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC1_PLAYED"
0AF0: MUSIC2_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC2_PLAYED"
0AF0: MUSIC3_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC3_PLAYED"
0AF0: MUSIC4_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC4_PLAYED"
0AF0: MUSIC5_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC5_PLAYED"
0AF0: MUSIC6_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC6_PLAYED"
0AF0: MUSIC7_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC7_PLAYED"
0AF0: MUSIC8_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC8_PLAYED"
0AF0: MUSIC9_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC9_PLAYED"
0AF0: MUSIC10_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC10_PLAYED"
0AF0: MUSIC11_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC11_PLAYED"
0AF0: MUSIC12_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC12_PLAYED"
0AF0: MUSIC13_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC13_PLAYED"
0AF0: MUSIC14_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC14_PLAYED"
0AF0: MUSIC15_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC15_PLAYED"
0AF0: MUSIC16_PLAYED = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "OFFICE_MUSIC16_PLAYED"
return

:OFFICE_MUSIC_STREAMS_RELEASE
audiostream.PerformAction(21@,STOP)          
audiostream.Release(21@)
audiostream.PerformAction(22@,STOP)          
audiostream.Release(22@)
audiostream.PerformAction(23@,STOP)          
audiostream.Release(23@)
audiostream.PerformAction(24@,STOP)          
audiostream.Release(24@)
audiostream.PerformAction(25@,STOP)          
audiostream.Release(25@)
audiostream.Release(26@)    
return

:OFFICE_MUSIC_STREAMS_RELEASE2
audiostream.Release(26@)    
return

:OFFICE_MUSIC_PERSONAL_SET
Audiostream.Volume(21@) = 0.0
Audiostream.Loop(21@, 1)
Audiostream.PerformAction(21@, PLAY)
Audiostream.Volume(22@) = 0.0
Audiostream.Loop(22@, 1)
Audiostream.PerformAction(22@, PLAY)
Audiostream.Volume(23@) = 0.0
Audiostream.Loop(23@, 1)
Audiostream.PerformAction(23@, PLAY)
Audiostream.Volume(24@) = 0.0
Audiostream.Loop(24@, 1)
Audiostream.PerformAction(24@, PLAY)
Audiostream.Volume(25@) = 0.0
Audiostream.Loop(25@, 1)
Audiostream.PerformAction(25@, PLAY)

/////////////////////Плавное нарастание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

008A: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = 21@ // (int)
008A: $MUSIC_FADE2[$MUSIC_FADE_NUMBER] = 22@ // (int)
008A: $MUSIC_FADE3[$MUSIC_FADE_NUMBER] = 23@ // (int)
008A: $MUSIC_FADE4[$MUSIC_FADE_NUMBER] = 24@ // (int)
008A: $MUSIC_FADE5[$MUSIC_FADE_NUMBER] = 25@ // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $MUSIC_VOLUME // (float) 

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 5 
create_thread @MUS_FAD

wait 1 

////////////////////////////////////////////////////////

return        