const
HOUSE_LOOT_LOOTED_COUNT = 29@
HOUSE_LOOT_SEED = 30@
HOUSE_PRIKOL_SPEC_SPAWNED = 28@
HOUSE_PRIKOL_HUMAN_SPAWNED = 31@
HOUSE_PRIKOL_HUMAN_HANDLE = 9@
HOUSE_PRIKOL_NUM = 14@
HOUSE_PRIKOL_WEP = 13@
HOUSE_PRIKOL_MODEL = 12@
HOUSE_PRIKOL_SPEC_TYPE = 11@
HOUSE_CORPSE_MODEL = 12@
HOUSE_CORPSE_HANDLE = 7@
BURG_PREV_WEP = $RNDM_HOUSE_BANKA[123]
BURG_TIME_TO_ENTER_OTMOROZOK = $THR_GMMDS_IN
BURG_TOTAL_LOOT_POINTS = 27@
BURG_FOOD_FOUND = $HAZMAT_SPAWN_X
BURG_BINT_FOUND = $HAZMAT_SPAWN_Y
BURG_HEAL_FOUND = $HAZMAT_SPAWN_Z
BURG_JIMMY_FOUND = $CLOWN_SPAWN_X
end

:HOUSE_L
thread 'HOUSE_L' 

if
0@ == 2
then
text.ShowTextBox('GME1402')
BURGLARY_PROCESSED = 1
end_thread
end

if
0@ == 1
then
text.ShowTextBox('GME1387')
BURGLARY_PROCESSED = 1
end_thread
else
0253: save_current_time
$TIME_LOCK_HOUR = 23
$TIME_LOCK_MINUTES = 23
create_thread @TIM_LCK
0085: HOUSE_LOOT_SEED = 1@ // (int)
1@ = 0
gosub @HOUSE_LOOT_CREATE_LOOT_POINTS

0AD3: 24@v = format "%d" HOUSE_LOOT_SEED

if
CURRENT_USHER_TUTORIAL_NUM == 2
then
jump to @HOUSE_PRIKOL_EMPTY_SET
end

if
CURRENT_USHER_TUTORIAL_NUM == 3
then
gosub @HOUSE_CREATE_CORPSE
jump to @HOUSE_PRIKOL_SPEC_SET
end

if
CURRENT_USHER_TUTORIAL_NUM == 4
then
jump to @HOUSE_PRIKOL_JUST_INFECTED_SET
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 49
then
0AF1: write_int 1 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 50
then
0AF1: write_int 2 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 51
then
0AF1: write_int 3 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 52
then
0AF1: write_int 4 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 53
then
0AF1: write_int 5 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
end

if and
$CHEATS_ON == 1
0AB0:   key_pressed 54
then
0AF1: write_int 1 to_ini_file "data\survival.set" section 24@v key "HOUSE_CORPSE"
end

if
0AF0: 0@ = get_int_from_ini_file "data\survival.set" section 24@v key "HOUSE_CORPSE"
then
gosub @HOUSE_CREATE_CORPSE
end

0AF0: 26@ = get_int_from_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
if
0AF0: 0@ = get_int_from_ini_file "data\survival.set" section 24@v key "HOUSE_HUMAN_WEP"
then
0AF0: HOUSE_PRIKOL_WEP = get_int_from_ini_file "data\survival.set" section 24@v key "HOUSE_HUMAN_WEP"
0AF0: HOUSE_PRIKOL_MODEL = get_int_from_ini_file "data\survival.set" section 24@v key "HOUSE_HUMAN_MODEL"
end

if
0AF0: 0@ = get_int_from_ini_file "data\survival.set" section 24@v key "SPEC_TYPE"
then
0AF0: HOUSE_PRIKOL_SPEC_TYPE = get_int_from_ini_file "data\survival.set" section 24@v key "SPEC_TYPE"
end

if
26@ == 1
then
jump to @HOUSE_PRIKOL_HUMAN_SET
end

if or
26@ == 2
26@ == 4
then
jump to @HOUSE_PRIKOL_SPEC_SET
end

if
26@ == 3
then
jump to @HOUSE_PRIKOL_EMPTY_SET
end

if
26@ == 5
then
jump to @HOUSE_PRIKOL_JUST_INFECTED_SET
end

if
$MONTHS_PASSED == 0
then
0@ = 30
end

if
$MONTHS_PASSED == 1
then
0@ = 20
end

if
$MONTHS_PASSED == 2
then
0@ = 10
end

if
$MONTHS_PASSED >= 3
then
0@ = 5
end

if and
0E4D: random_percent 0@
not $ALLOW_RANDOM_SURVIVERS == 0
then
:HOUSE_PRIKOL_HUMAN_SET
gosub @HOUSE_LOOT_CREATE_HUMAN_PRIKOL
HOUSE_PRIKOL_HUMAN_SPAWNED = 1
$ZOMBIE_REMOVE_FLAG = 1
ZOMBIES_NOTSPAWN = 1
094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
0AF1: write_int 1 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"

if
056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
then
0470: HOUSE_PRIKOL_WEP = actor HOUSE_PRIKOL_HUMAN_HANDLE current_weapon
0665: get_actor HOUSE_PRIKOL_HUMAN_HANDLE model_to HOUSE_PRIKOL_MODEL
end

0AF1: write_int HOUSE_PRIKOL_WEP to_ini_file "data\survival.set" section 24@v key "HOUSE_HUMAN_WEP"
0AF1: write_int HOUSE_PRIKOL_MODEL to_ini_file "data\survival.set" section 24@v key "HOUSE_HUMAN_MODEL"
HOUSE_AMBIENT_TYPE = 1
else
if
0E4D: random_percent 20
    then
    :HOUSE_PRIKOL_SPEC_SET
    gosub @HOUSE_LOOT_CREATE_SPEC_PRIKOL    
    0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
    0AF1: write_int 2 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
    if
    not 26@ == 2
        then    
        if or
        0E4D: random_percent 30
        26@ == 4
        CURRENT_USHER_TUTORIAL_NUM == 3
            then            
            $ZOMBIE_REMOVE_FLAG = 1
            ZOMBIES_NOTSPAWN = 1
            HOUSE_AMBIENT_TYPE = 1
            0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
            0AF1: write_int 4 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
            else
            
            if or
            ZOMBIES_NOTSPAWN == 1
            $ALLOW_ZOMBIES == 0
            ALLOW_ZOMB_ENTER_INT == 0
            then
            jump to @HOUSE_PRIKOL_EMPTY_SET
            end
            
            HOUSE_AMBIENT_TYPE = 2
            create_thread @BRG_INF
            end
        else
        
        if or
        ZOMBIES_NOTSPAWN == 1
        $ALLOW_ZOMBIES == 0
        ALLOW_ZOMB_ENTER_INT == 0
        then
        jump to @HOUSE_PRIKOL_EMPTY_SET
        end
        
        HOUSE_AMBIENT_TYPE = 2
        create_thread @BRG_INF
        end
    else
    
    if or
    ZOMBIES_NOTSPAWN == 1
    $ALLOW_ZOMBIES == 0
    ALLOW_ZOMB_ENTER_INT == 0
    then
    jump to @HOUSE_PRIKOL_EMPTY_SET
    end
        
    if or
    0E4D: random_percent 30
    26@ == 3
        then
        :HOUSE_PRIKOL_EMPTY_SET
        $ZOMBIE_REMOVE_FLAG = 1
        ZOMBIES_NOTSPAWN = 1
        HOUSE_AMBIENT_TYPE = 1
        0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
        0AF1: write_int 3 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
        else
        :HOUSE_PRIKOL_JUST_INFECTED_SET
        HOUSE_AMBIENT_TYPE = 2
        create_thread @BRG_INF
        0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
        0AF1: write_int 5 to_ini_file "data\survival.set" section 24@v key "HOUSE_TYPE"
        end
    end
end

if and
$CHEATS_ON == 1
$EXPE_FLAG == 1
    then
    gosub @HOUSE_LOOT_SHOW_PRIKOL_POINTS
    end
    
if
$MONTHS_PASSED == 0
then
0@ = 15
end

if
$MONTHS_PASSED == 1
then
0@ = 10
end

if
$MONTHS_PASSED >= 2
then
0@ = 5
end   
    
if and
0E4D: random_percent 0@
not $ALLOW_RANDOM_SURVIVERS == 0
then  
gosub @HOUSE_CREATE_CORPSE
0AF1: write_int 1 to_ini_file "data\survival.set" section 24@v key "HOUSE_CORPSE"
end    
    
end

BURGLARY_PROCESSED = 1

actor.StorePos(PLAYER_ACTOR,1@,2@,3@)
0395: clear_area 1 at 1@ 2@ 3@ radius 100.0
if and
HOUSE_PRIKOL_HUMAN_SPAWNED == 0
not CURRENT_USHER_TUTORIAL_NUM == 2
not CURRENT_USHER_TUTORIAL_NUM == 3
not CURRENT_USHER_TUTORIAL_NUM == 4
then
33@ = 0

if
0E4D: random_percent 50
then
random_int BURG_TIME_TO_ENTER_OTMOROZOK 30000 160000
else
random_int BURG_TIME_TO_ENTER_OTMOROZOK 60000 240000
end

//BURG_TIME_TO_ENTER_OTMOROZOK = 10000
else
BURG_TIME_TO_ENTER_OTMOROZOK = 99999999 
end

while 0867:   unknown_in_burglary_interior 0
wait 0

if or
CURRENT_USHER_TUTORIAL_NUM == 2
CURRENT_USHER_TUTORIAL_NUM == 3
CURRENT_USHER_TUTORIAL_NUM == 4
then 
if
HOUSE_LOOT_LOOTED_COUNT < 5
    then
    08E7: disable_entrance_markers 1
    else
    08E7: disable_entrance_markers 0
    
    if
    not CURRENT_USHER_TUTORIAL_NUM == 4
    then
    v$OBJECTIVE = "STRB26"
    else
    v$OBJECTIVE = "STRC26"
    end
    
    end
end

/////////////////////Функция атаки HUMAN PRIKOL союзниками/////////////////////
if and
HOUSE_PRIKOL_HUMAN_SPAWNED > 0
056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
then  
random_int 1@ 0 5
gosub @HUMAN_HOUSE_ATTACK_PEOPLE1
if and
actor.Dead(HOUSE_PRIKOL_HUMAN_HANDLE)
not HOUSE_PRIKOL_HUMAN_SPAWNED == 3
    then
    HOUSE_PRIKOL_HUMAN_SPAWNED = 3
    33@ = 0            
    
    if
    0E4D: random_percent 50
    then
    random_int BURG_TIME_TO_ENTER_OTMOROZOK 30000 120000
    else
    random_int BURG_TIME_TO_ENTER_OTMOROZOK 60000 220000
    end
    
    end
end

/////////////////////Заход нового отморозка/////////////////////
if
HOUSE_PRIKOL_HUMAN_SPAWNED == 0
    then   
    
//    0AD1: show_formatted_text_highpriority "%d/%d" time 2000 33@ BURG_TIME_TO_ENTER_OTMOROZOK    
    if and
    0E3D: is_key_just_pressed 187
    $CHEATS_ON == 1
    then
    005C: 33@ += BURG_TIME_TO_ENTER_OTMOROZOK // (int)
    end
    
    if
    002F:   33@ >= BURG_TIME_TO_ENTER_OTMOROZOK // (int)
        then
        HOUSE_PRIKOL_HUMAN_SPAWNED = 222
        gosub @HOUSE_LOOT_CREATE_HUMAN_PRIKOL
        HOUSE_PRIKOL_HUMAN_SPAWNED = 1
        actor.StorePos(HOUSE_PRIKOL_HUMAN_HANDLE,1@,2@,3@)
        create_thread @BRG_SND 0 1@ 2@ 3@             
        end
    else
    if and
    HOUSE_PRIKOL_HUMAN_SPAWNED > 0
    056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
        then
        
//        0AD1: show_formatted_text_highpriority "%d/%d" time 2000 33@ BURG_TIME_TO_ENTER_OTMOROZOK
        if and
        0E3D: is_key_just_pressed 187
        $CHEATS_ON == 1
        then
        005C: 33@ += BURG_TIME_TO_ENTER_OTMOROZOK // (int)
        end
        
        if and
        actor.Dead(HOUSE_PRIKOL_HUMAN_HANDLE)
        002F:   33@ >= BURG_TIME_TO_ENTER_OTMOROZOK // (int)
            then
            actor.RemoveReferences(HOUSE_PRIKOL_HUMAN_HANDLE)
            HOUSE_PRIKOL_HUMAN_SPAWNED = 222
            gosub @HOUSE_LOOT_CREATE_HUMAN_PRIKOL
            HOUSE_PRIKOL_HUMAN_SPAWNED = 1
            actor.StorePos(HOUSE_PRIKOL_HUMAN_HANDLE,1@,2@,3@)
            create_thread @BRG_SND 0 1@ 2@ 3@
            end
        end
    end 

if and
HOUSE_PRIKOL_HUMAN_SPAWNED == 1
056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
then

if
0E45: frame_mod 90
    then
    if
    0E4D: random_percent 5
        then
        jump to @HUMAN_HOUSE_AGRO_JUMP
        end
    end

if or
0364:   actor HOUSE_PRIKOL_HUMAN_HANDLE spotted_actor PLAYER_ACTOR
051A:   actor HOUSE_PRIKOL_HUMAN_HANDLE damaged_by_actor PLAYER_ACTOR
0457:   player 0 aiming_at_actor HOUSE_PRIKOL_HUMAN_HANDLE
    then
    :HUMAN_HOUSE_AGRO_JUMP
    0350: set_actor HOUSE_PRIKOL_HUMAN_HANDLE maintain_position_when_attacked 0
    0816: set_actor HOUSE_PRIKOL_HUMAN_HANDLE dont_chase_victim 0
    05E2: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE kill_actor PLAYER_ACTOR
    HOUSE_PRIKOL_HUMAN_SPAWNED = 2
    end
end

if
$EXPE_FLAG == 1
then

if
0E3D: is_key_just_pressed 45
    then
    
    for 0@ = 0 to 39
    if
    03CA:   object $BANDIT_MARKER_FLAG[0@] exists
        then
        object.Destroy($BANDIT_MARKER_FLAG[0@])
        end
    end
    
    gosub @HOUSE_LOOT_CREATE_LOOT_POINTS
    
    0AD1: show_formatted_text_highpriority "LOOT POINTS RECREATED" time 2000      
    
    end

if and
0E3D: is_key_just_pressed 69
$CHEATS_ON == 1
    then
    
    for 0@ = 0 to 39
    if
    83CA: not  object $BANDIT_MARKER_FLAG[0@] exists
        then
        break
        end
    end
    
    if
    0@ == 39
    then
    0AD1: show_formatted_text_highpriority "~r~TOO MANY POINTS!" time 2000
    jump to @HOUSE_SEARCH_CHECK_IDLE
    end
    
    094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    
    if
    8AF0: not 0@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_LOOT_POINTS"
        then
        0AF1: write_int -1 to_ini_file "data\houses.ini" section 24@v key "TOTAL_LOOT_POINTS"
        0@ = -1
        end
    
    actor.StorePos(PLAYER_ACTOR,1@,2@,3@)
    4@ = actor.Angle(PLAYER_ACTOR)
    gosub @CHECK_POINT_IS_VALID    
    if 
    8@ == 0
        then    
        0@ += 1
        0AF1: write_int 0@ to_ini_file "data\houses.ini" section 24@v key "TOTAL_LOOT_POINTS"
        0AD3: 20@v = format "PNTX_%d" 0@        
        0AF3: write_float 1@ to_ini_file "data\houses.ini" section 24@v key 20@v
        0AD3: 20@v = format "PNTY_%d" 0@        
        0AF3: write_float 2@ to_ini_file "data\houses.ini" section 24@v key 20@v
        0AD3: 20@v = format "PNTZ_%d" 0@        
        0AF3: write_float 3@ to_ini_file "data\houses.ini" section 24@v key 20@v
        4@ = actor.Angle(PLAYER_ACTOR)        
        0AD3: 20@v = format "PNTA_%d" 0@        
        0AF3: write_float 4@ to_ini_file "data\houses.ini" section 24@v key 20@v     
        
        0085: 5@ = 0@ // (int)
        
        for 0@ = 0 to 39
        if
        83CA: not  object $BANDIT_MARKER_FLAG[0@] exists
            then
            break
            end
        end
        
        if
        UNITED_MAP == 0
        then    
        $BANDIT_MARKER_FLAG[0@] = object.Init(9268,1@,2@,3@)
        else
        $BANDIT_MARKER_FLAG[0@] = object.Init(18159,1@,2@,3@)        
        end
        
        071F: set_object $BANDIT_MARKER_FLAG[0@] health_to 5@
        0566: link_object $BANDIT_MARKER_FLAG[0@] to_interior $ACTIVE_INTERIOR
        08D2: object $BANDIT_MARKER_FLAG[0@] scale_model 0.5
        wait 0
        0AD1: show_formatted_text_highpriority "CREATED HOUSE LOOT POINT INDEX %d AT X: %f Y: %f Z: %f" time 5000 5@ 1@ 2@ 3@  
        else
        
        if
        8@ == 1
        then
        0AD1: show_formatted_text_highpriority "~r~VPEREDI NI4EGO NET" time 2000
        end
        
        if
        8@ == 2
        then
        0AD1: show_formatted_text_highpriority "~r~POINT IS INSIDE OBJECT" time 2000
        end        
        
        if
        8@ == 3
        then
        0AD1: show_formatted_text_highpriority "~r~SLEVA HAS SOME HERNYA" time 2000
        end
        
        if
        8@ == 4
        then
        0AD1: show_formatted_text_highpriority "~r~SPRAVA HAS SOME HERNYA" time 2000
        end
        
        if
        8@ == 5
        then
        0AD1: show_formatted_text_highpriority "~r~TOO CLOSE TO OTHER LOOT POINT" time 2000
        end
        
        if
        8@ == 6
        then
        0AD1: show_formatted_text_highpriority "~r~SZADI 4TO TO EST" time 2000
        end
        
        end       
    end
    
if and
0E3D: is_key_just_pressed 8
$CHEATS_ON == 1
    then
    
    094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    
    if
    8AF0: not 0@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
        then
        0AF1: write_int -1 to_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
        0@ = -1
        end
    
    actor.StorePos(PLAYER_ACTOR,1@,2@,3@)
    4@ = actor.Angle(PLAYER_ACTOR)    
    0@ += 1
    0AF1: write_int 0@ to_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    0AD3: 20@v = format "PRKX_%d" 0@        
    0AF3: write_float 1@ to_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKY_%d" 0@        
    0AF3: write_float 2@ to_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKZ_%d" 0@        
    0AF3: write_float 3@ to_ini_file "data\houses.ini" section 24@v key 20@v        
    0AD3: 20@v = format "PRKA_%d" 0@        
    0AF3: write_float 4@ to_ini_file "data\houses.ini" section 24@v key 20@v
    
    0085: 5@ = 0@ // (int)    
    0@ = object.Init(18161,1@,2@,3@)
    071F: set_object 0@ health_to 5@
    0566: link_object 0@ to_interior $ACTIVE_INTERIOR
    08D2: object 0@ scale_model 0.5
    0453: set_object 0@ XY_rotation 90.0 0.0 angle 4@
    wait 0
    0AD1: show_formatted_text_highpriority "CREATED HOUSE PRIKOL POINT NUMBER %d AT X: %f Y: %f Z: %f" time 5000 0@ 1@ 2@ 3@         
    end
    
end        
    
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////    

:HOUSE_SEARCH_CHECK_IDLE

for 0@ = 0 to 39

if
03CA:   object $BANDIT_MARKER_FLAG[0@] exists
then

if
0EE6: locate_char_distance_to_object PLAYER_ACTOR object $BANDIT_MARKER_FLAG[0@] radius 2.0
then
LADDER_ON_MARKER_FLAG = 1
jump to @HOUSE_SEARCH_CHECK_IDLE2
else
LADDER_ON_MARKER_FLAG = 0
end

end

end

:HOUSE_SEARCH_CHECK_IDLE2
    
for 0@ = 0 to 39    

if
03CA:   object $BANDIT_MARKER_FLAG[0@] exists
    then
    
    if
    0E45: frame_mod 15
    then
    gosub @HOUSE_SEARCH_CHECK_FOR_DESTROY
    end
    
    if
    83CA: not  object $BANDIT_MARKER_FLAG[0@] exists
    then
    jump to @HOUSE_SEARCH_CHECK_IDLE3
    end
           
    if and
    0EE6: locate_char_distance_to_object PLAYER_ACTOR object $BANDIT_MARKER_FLAG[0@] radius 0.35
    02A0:   actor PLAYER_ACTOR stopped
    player.Controllable(PLAYER_CHAR)
    $BINOCULARS_USING_FLAG == 0
    09E7:   player PLAYER_CHAR not_frozen
        then        
        
        0512: show_permanent_text_box 'GME1388'
            
        while 0EE6: locate_char_distance_to_object PLAYER_ACTOR object $BANDIT_MARKER_FLAG[0@] radius 0.35
        wait 0
        
        /////////////////////Функция атаки HUMAN PRIKOL союзниками/////////////////////
        if and
        HOUSE_PRIKOL_HUMAN_SPAWNED > 0
        056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
        then
        random_int 1@ 0 5
        gosub @HUMAN_HOUSE_ATTACK_PEOPLE1
        if and
        actor.Dead(HOUSE_PRIKOL_HUMAN_HANDLE)
        not HOUSE_PRIKOL_HUMAN_SPAWNED == 3
            then
            HOUSE_PRIKOL_HUMAN_SPAWNED = 3
            33@ = 0
            
            if
            0E4D: random_percent 50
            then
            random_int BURG_TIME_TO_ENTER_OTMOROZOK 30000 120000
            else
            random_int BURG_TIME_TO_ENTER_OTMOROZOK 60000 220000
            end
            
            end
        end
        
        LADDER_ON_MARKER_FLAG = 1
        
        if or
        82A0: not  actor PLAYER_ACTOR stopped
        $PANEL_OPEN == 1
        not player.Controllable(PLAYER_CHAR)
        $BINOCULARS_USING_FLAG == 1
        89E7: not  player PLAYER_CHAR not_frozen
            then
            break
            end
        
        071E: get_object $BANDIT_MARKER_FLAG[0@] health_to 1@
        
        if and
        $CHEATS_ON == 1
        $EXPE_FLAG == 1
        then
        0AD1: show_formatted_text_highpriority "LOOT POINT INDEX %d, NUMBER %d\39, PRESS Q TO MOVE" time 5000 1@ 0@
        end
        
        if and
        0E3D: is_key_just_pressed 81
        $CHEATS_ON == 1
            then
            
            071E: get_object $BANDIT_MARKER_FLAG[0@] health_to QUEST2_DONE_RECENTLY            
            object.Destroy($BANDIT_MARKER_FLAG[0@])
            
            repeat
            wait 0
            0AD1: show_formatted_text_highpriority "CHOOSE NEW POSITION OF THAT LOOT POINT AND PRESS E KEY" time 5000
            
            if
            0E3D: is_key_just_pressed $KEY_USE
                then
                
                actor.StorePos(PLAYER_ACTOR,1@,2@,3@)
                4@ = actor.Angle(PLAYER_ACTOR)                
                gosub @CHECK_POINT_IS_VALID    
                if 
                8@ == 0
                    then
                                                           
                    0AD3: 20@v = format "PNTX_%d" QUEST2_DONE_RECENTLY        
                    0AF3: write_float 1@ to_ini_file "data\houses.ini" section 24@v key 20@v
                    0AD3: 20@v = format "PNTY_%d" QUEST2_DONE_RECENTLY        
                    0AF3: write_float 2@ to_ini_file "data\houses.ini" section 24@v key 20@v
                    0AD3: 20@v = format "PNTZ_%d" QUEST2_DONE_RECENTLY        
                    0AF3: write_float 3@ to_ini_file "data\houses.ini" section 24@v key 20@v        
                    0AD3: 20@v = format "PNTA_%d" QUEST2_DONE_RECENTLY
                    4@ = actor.Angle(PLAYER_ACTOR)        
                    0AF3: write_float 4@ to_ini_file "data\houses.ini" section 24@v key 20@v
                    
                    if
                    UNITED_MAP == 0
                    then    
                    $BANDIT_MARKER_FLAG[0@] = object.Init(9268,1@,2@,3@)
                    else
                    $BANDIT_MARKER_FLAG[0@] = object.Init(18159,1@,2@,3@)
                    end
                    
                    071F: set_object $BANDIT_MARKER_FLAG[0@] health_to QUEST2_DONE_RECENTLY
                    0566: link_object $BANDIT_MARKER_FLAG[0@] to_interior $ACTIVE_INTERIOR
                    08D2: object $BANDIT_MARKER_FLAG[0@] scale_model 0.5
                    wait 0
                    0AD1: show_formatted_text_highpriority "MOVED HOUSE LOOT POINT INDEX %d TO X: %f Y: %f Z: %f" time 5000 5@ 1@ 2@ 3@
                    LADDER_ON_MARKER_FLAG = 0     
                    jump to @HOUSE_SEARCH_CHECK_IDLE  
                    else
                    
                    if
                    8@ == 1
                    then
                    0AD1: show_formatted_text_highpriority "~r~VPEREDI NI4EGO NET" time 2000                    
                    end
                    
                    if
                    8@ == 2
                    then
                    0AD1: show_formatted_text_highpriority "~r~POINT IS INSIDE OBJECT" time 2000
                    end        
                    
                    if
                    8@ == 3
                    then
                    0AD1: show_formatted_text_highpriority "~r~SLEVA HAS SOME HERNYA" time 2000
                    end
                    
                    if
                    8@ == 4
                    then
                    0AD1: show_formatted_text_highpriority "~r~SPRAVA HAS SOME HERNYA" time 2000
                    end
                    
                    if
                    8@ == 5
                    then
                    0AD1: show_formatted_text_highpriority "~r~TOO CLOSE TO OTHER LOOT POINT" time 2000
                    end
                    
                    if
                    8@ == 6
                    then
                    0AD1: show_formatted_text_highpriority "~r~SZADI 4TO TO EST" time 2000
                    end
                    
                    wait 2000
                    
                    end                    
                end
            
            until false
            
            end    
            
        if
        0E3D: is_key_just_pressed $KEY_USE
            then
            
            text.RemoveTextBox()
            0750: set_object $BANDIT_MARKER_FLAG[0@] visibility 0
            
            $CAR_CHECKING_FLAG = 1
            6@ = Object.Angle($BANDIT_MARKER_FLAG[0@])
            0470: BURG_PREV_WEP = actor PLAYER_ACTOR current_weapon
            01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
            0992: set_player PLAYER_CHAR weapons_scrollable 0
            
            while not animation.Available("CAR_CHECKS")
            wait 0 
            animation.Load("CAR_CHECKS")
            end
            
            05D4: AS_actor PLAYER_ACTOR rotate_angle 6@
            
            0A96: 10@ = actor PLAYER_ACTOR struct
            0A96: 11@ = actor PLAYER_ACTOR struct
            0A8E: 10@ = 10@ + 0x558
            0A8E: 11@ = 11@ + 0x55C
            32@ = 0
            
            :HOUSE_SEACRH_CHECK
            wait 0
            
            /////////////////////Функция атаки HUMAN PRIKOL союзниками/////////////////////
            if and
            HOUSE_PRIKOL_HUMAN_SPAWNED > 0
            056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
            then
            random_int 1@ 0 5
            gosub @HUMAN_HOUSE_ATTACK_PEOPLE1
            if and
            actor.Dead(HOUSE_PRIKOL_HUMAN_HANDLE)
            not HOUSE_PRIKOL_HUMAN_SPAWNED == 3
                then
                HOUSE_PRIKOL_HUMAN_SPAWNED = 3
                33@ = 0
                
                if
                0E4D: random_percent 50
                then
                random_int BURG_TIME_TO_ENTER_OTMOROZOK 30000 120000
                else
                random_int BURG_TIME_TO_ENTER_OTMOROZOK 60000 220000
                end
                
                end
            end
            
            0A8D: 12@ = read_memory 10@ size 4 virtual_protect 0
            0A8D: 13@ = read_memory 11@ size 4 virtual_protect 0
            
            if
            32@ > 1500
                then
                $CAR_CHECKING_FLAG = 0
                32@ = 0
                06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
                0992: set_player PLAYER_CHAR weapons_scrollable 1
                0750: set_object $BANDIT_MARKER_FLAG[0@] visibility 1
                LADDER_ON_MARKER_FLAG = 0     
                jump to @HOUSE_SEARCH_CHECK_IDLE
                end
                
            if or
            0045:   12@ == 13@  // (float)
            $FP_ACTIVATED == 1
            jf @HOUSE_SEACRH_CHECK               
            
            while not animation.Available("CAR_CHECKS")
            wait 0 
            animation.Load("CAR_CHECKS")
            end
            
            0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time 2839 
            
            Audiostream.Volume($HOUSE_SEARCH_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($HOUSE_SEARCH_SOUND, 0)
            Audiostream.PerformAction($HOUSE_SEARCH_SOUND, PLAY)
            
            if and
            HOUSE_PRIKOL_HUMAN_SPAWNED == 1
            056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
            then
            0350: set_actor HOUSE_PRIKOL_HUMAN_HANDLE maintain_position_when_attacked 0
            0816: set_actor HOUSE_PRIKOL_HUMAN_HANDLE dont_chase_victim 0
            04EB: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE crouch 0
//            05E2: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE kill_actor PLAYER_ACTOR
            0634: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE attack_using_weapon_actor PLAYER_ACTOR flags 4 perform_actions_after_time 0 chance_of_action 100
            HOUSE_PRIKOL_HUMAN_SPAWNED = 2
            end
            
            32@ = 0 
            
            :HOUSE_SEACRH_CHECK_3
            wait 0
            
            /////////////////////Функция атаки HUMAN PRIKOL союзниками/////////////////////
            if and
            HOUSE_PRIKOL_HUMAN_SPAWNED > 0
            056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
            then
            random_int 1@ 0 5
            gosub @HUMAN_HOUSE_ATTACK_PEOPLE1
            if and
            actor.Dead(HOUSE_PRIKOL_HUMAN_HANDLE)
            not HOUSE_PRIKOL_HUMAN_SPAWNED == 3
                then
                HOUSE_PRIKOL_HUMAN_SPAWNED = 3
                33@ = 0
                
                if
                0E4D: random_percent 50
                then
                random_int BURG_TIME_TO_ENTER_OTMOROZOK 30000 120000
                else
                random_int BURG_TIME_TO_ENTER_OTMOROZOK 60000 220000
                end
                
                end
            end
            
            if
            0E3E: is_button_just_pressed 0 button 15
            then
            0687: clear_actor PLAYER_ACTOR task                
            end
            
            if and
            not actor.Animation(PLAYER_ACTOR) == "car_check"
            32@ > 50
                then
                $CAR_CHECKING_FLAG = 0
                32@ = 0
                06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0 
                01B9: set_actor PLAYER_ACTOR armed_weapon_to BURG_PREV_WEP  
                0992: set_player PLAYER_CHAR weapons_scrollable 1
                Audiostream.PerformAction($HOUSE_SEARCH_SOUND, STOP)
                0750: set_object $BANDIT_MARKER_FLAG[0@] visibility 1
                LADDER_ON_MARKER_FLAG = 0  
                jump to @HOUSE_SEARCH_CHECK_IDLE
                end                                
                
            if or
            32@ > 2839
            $CHEATS_ON == 1
            jf @HOUSE_SEACRH_CHECK_3
            
            if
            $CHEATS_ON == 1
            then
            0792: disembark_instantly_actor PLAYER_ACTOR
            end
            
            Audiostream.PerformAction($HOUSE_SEARCH_SOUND, STOP) 
            04EF: release_animation "CAR_CHECKS"
            
//            if or
//            not $QUEST_TYPE == 5
//            $RQUEST_TIMER_STOPPED_FLAG == 1
//            then
//            CAR_OBISKENO += 1
//            end
//            
//            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_CAR_OBISKENO"
//            
//            if
//            $CHEATED_FLAG == 0 
//            then    
//            0@ += 1
//            end    
//             
//            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_CAR_OBISKENO"
//            0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT41_GOT"
//                
//            if and
//            2@ == 0
//            0@ >= 300
//                then
//                v$ACHIEVEMNT = "ACH41"
//                $ACHIEVEMENT_GOT_FLAG = 1    
//                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT41_GOT"    
//                end

            $CAR_CHECKING_FLAG = 0  
            06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
            01B9: set_actor PLAYER_ACTOR armed_weapon_to BURG_PREV_WEP  
            0992: set_player PLAYER_CHAR weapons_scrollable 1
            wait 100
            32@ = 0
            
            object.Destroy($BANDIT_MARKER_FLAG[0@])
            HOUSE_LOOT_LOOTED_COUNT += 1
            gosub @HOUSE_LOOT_GIVE_RANDOM
            LADDER_ON_MARKER_FLAG = 0            
            jump to @HOUSE_SEARCH_CHECK_IDLE
            
            end    
        
        end
        
        LADDER_ON_MARKER_FLAG = 0
        text.RemoveTextBox()    
                    
        end
    end
    
end

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////        

:HOUSE_SEARCH_CHECK_IDLE3

end

$TIME_LOCK_OFF = 1
0254: restore_current_time

for 0@ = 0 to 39
if
03CA:   object $BANDIT_MARKER_FLAG[0@] exists
    then
    object.Destroy($BANDIT_MARKER_FLAG[0@])
    end
end

if and
HOUSE_PRIKOL_HUMAN_SPAWNED > 0
056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
then
actor.DestroyInstantly(HOUSE_PRIKOL_HUMAN_HANDLE)
end

if
056D:   actor HOUSE_CORPSE_HANDLE defined
then
actor.DestroyInstantly(HOUSE_CORPSE_HANDLE)
end

$ZOMBIE_REMOVE_FLAG = 0
ZOMBIES_NOTSPAWN = 0

if
HOUSE_PRIKOL_SPEC_SPAWNED > 0
then
if
HOUSE_PRIKOL_SPEC_SPAWNED == 2
    then
    $TANK_INTERIOR_SPAWN = 0
    $SPAWN_TANK_ON_COORD = 0 
    else
    $WITCH_INTERIOR_SPAWN = 0
    $SPAWN_WITCH_ON_COORD = 0
    WITCH_TEMP_SPAWN_ON_ROAD_FLAG = 0  
    end
end

if or
HOUSE_LOOT_LOOTED_COUNT == 0
$CHEATS_ON == 1
then
0AD3: 5@v = format "%d" HOUSE_LOOT_SEED
0AF1: write_int 0 to_ini_file "data\survival.set" section "HOUSES" key 5@v
0AD3: 5@v = format "%d" HOUSE_LOOT_SEED
0AF1: write_int 0 to_ini_file "data\survival.set" section "HOUSES2" key 5@v
end

if or
CURRENT_USHER_TUTORIAL_NUM == 2
CURRENT_USHER_TUTORIAL_NUM == 3
CURRENT_USHER_TUTORIAL_NUM == 4
then            
$SPECIAL_INFECTED_NOT_SPAWN_FLAG = 1
CURRENT_USHER_TUTORIAL_NUM += 1
$TIME_LOCK_HOUR += 1

if
CURRENT_USHER_TUTORIAL_NUM == 3
    then
    v$OBJECTIVE = "STRB24"
    wait 0
    $TIME_LOCK_HOUR = 17
    $TIME_LOCK_MINUTES = 12
    create_thread @TIM_LCK
    end
    
if
CURRENT_USHER_TUTORIAL_NUM == 4
    then
    v$OBJECTIVE = "STRB25"
    wait 0
    $TIME_LOCK_HOUR = 18
    $TIME_LOCK_MINUTES = 12
    create_thread @TIM_LCK
    end    

end

if
CURRENT_USHER_TUTORIAL_NUM == 5
then
CURRENT_USHER_TUTORIAL_NUM = -1
wait 0
$TIME_LOCK_HOUR = 20
$TIME_LOCK_MINUTES = 12
create_thread @TIM_LCK
end

if
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 1
then
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 0
end

HOUSE_AMBIENT_TYPE = 0
if and
QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
$QUEST_TYPE == 5
$ONMISSION == 1
then
//ass
else
if or
BURG_FOOD_FOUND > 0
BURG_BINT_FOUND > 0
BURG_HEAL_FOUND > 0
BURG_JIMMY_FOUND > 0 
    then
    text.Show4Number('INV392',BURG_FOOD_FOUND,BURG_BINT_FOUND,BURG_HEAL_FOUND,BURG_JIMMY_FOUND,7500,1)
    end
end

end_thread

:HOUSE_LOOT_GIVE_RANDOM
            
if
$MONTHS_PASSED > 0
    then
    008B: 0@ = $MONTHS_PASSED // (int)
    0@ *= 30
    
    if
    $MONTHS_PASSED > 0
    then
    0@ += 7
    end
    
    if
    $MONTHS_PASSED > 1
    then
    0@ += 8
    end
    
    if and
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    $QUEST_TYPE == 5
    $ONMISSION == 1
    then
    //ass
    
    if
    0@ > 65
    then
    0@ = 65
    end 
    
    else
    
    if
    0@ > 85
    then
    0@ = 85
    end
        
    end
    
    if
    PERK_FINDGOODS == 1
    then
    0@ -= 18
    end
    
    if
    PERK_FINDGOODS == 2
    then
    0@ -= 28
    end
    
    if
    0@ < 0
    then
    0@ = 10
    end            
            
    gosub @ADJUST_NO_FOUND_PERCENTAGE_FOR_LITTLE_LEFT             
    if
    0E4D: random_percent 0@
        then
        03E5: show_text_box 'INV110'
        return
        else
        
        if and
        0E4D: random_percent 5
        not $QUEST_TYPE == 5
        then
        
        :GIVE_AMMO_FOR_SOMETHING_PRE
        
        4@ = 0
        
        :GIVE_AMMO_FOR_SOMETHING
        
        if
        4@ >= 512
        then
//        0AD1: show_formatted_text_highpriority "GIVE_AMMO_FOR_SOMETHING_FAILED" time 2000
        jump to @GIVE_AMMO_FOR_SOMETHING_FAILED
        end
        
        random_int 3@ 0 8
        if
        3@ == 0
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 3 weapon 0@ ammo 2@ model 3@
        if   
        not 3@ == -1
            then
            random_int 3@ 7 14 
            01B2: give_actor PLAYER_ACTOR weapon 0@ ammo 3@ // Load the weapon model before using this
            03E5: show_text_box 'GME1481'
            return
            end
        end
        
        if
        3@ == 2
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 4 weapon 0@ ammo 2@ model 3@
        if   
        not 3@ == -1
            then
            random_int 3@ 4 8 
            01B2: give_actor PLAYER_ACTOR weapon 0@ ammo 3@ // Load the weapon model before using this
            03E5: show_text_box 'GME1482'
            return
            end
        end
        
        if
        3@ == 3
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 5 weapon 0@ ammo 2@ model 3@
        if   
        not 3@ == -1
            then
            random_int 3@ 15 30 
            01B2: give_actor PLAYER_ACTOR weapon 0@ ammo 3@ // Load the weapon model before using this
            03E5: show_text_box 'GME1483'
            return
            end 
        end
        
        if
        3@ == 4
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 6 weapon 0@ ammo 2@ model 3@
        if   
        not 3@ == -1
            then
            random_int 3@ 10 20 
            01B2: give_actor PLAYER_ACTOR weapon 0@ ammo 3@ // Load the weapon model before using this
            03E5: show_text_box 'GME1484'
            return
            end 
        end
        
        if
        3@ == 5
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 7 weapon 0@ ammo 2@ model 3@
        if and  
        not 3@ == -1
        not 0@ == 70
        not 0@ == 94
        not 0@ == 149
        not 0@ == 181
        not 0@ == 211
        not 0@ == 109
            then
            random_int 3@ 5 10 
            01B2: give_actor PLAYER_ACTOR weapon 0@ ammo 3@ // Load the weapon model before using this
            03E5: show_text_box 'GME1485'
            return
            end 
        end
        
        random_int 0@ 0 32
        if and
        3@ == 6
        0@ == 16
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 8 weapon 0@ ammo 2@ model 3@
        if or
        0@ == 18
        0@ == 118
        0@ == 134
        0@ == 179
        0@ == 209
            then            

            while not model.Available(3@)
            wait 0
            model.Load(3@)
            mload
            end
             
            Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 0@, 1)
            
            03E5: show_text_box 'GME1486'
            return                                    
            end
        end
        
        random_int 0@ 0 32
        if and
        3@ == 7
        0@ == 16
        then
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 9 weapon 0@ ammo 2@ model 3@
        if
        not 3@ == -1
            then            

            while not model.Available(3@)
            wait 0
            model.Load(3@)
            mload
            end
             
            Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 0@, 1)
            
            if or
            0@ == 16
            0@ == 115
            0@ == 132
            0@ == 177
            0@ == 207
            then
            03E5: show_text_box 'GME1487'
            else
            03E5: show_text_box 'GME1488'
            end
            
            return                                    
            end
        end    
        
        4@ += 1
        
        jump to @GIVE_AMMO_FOR_SOMETHING    
        end
        
        :GIVE_AMMO_FOR_SOMETHING_FAILED
        
        if and
        0E4D: random_percent 5
        not $QUEST_TYPE == 5
            then
            
            if
            PERK_FINDGOODS == 0
            then
            
            if
            $FREEMODE == 0
            then
            random_int 0@ 15 125
            else
            random_int 0@ 25 200
            end
            
            else
            
            if
            $FREEMODE == 0
            then
            random_int 0@ 65 175
            else
            random_int 0@ 125 300
            end
            
            end
            
            0@ /= 4
            
            0513: show_text_box_1number 'INV310' number 0@  // ~k~~VEHICLE_ENTER_EXIT~ Use Slot Machine $~1~
            MONEY_FOUND_TEXT_TIME = 85
            0109: player PLAYER_CHAR money += 0@
            018C: play_sound 1057 at 0.0 0.0 0.0
            return
            end
        end
    else
    
    0@ = 35
    
    if
    PERK_FINDGOODS == 1
    then
    0@ -= 9
    end
    
    if
    PERK_FINDGOODS == 2
    then
    0@ -= 14
    end      
    
    gosub @ADJUST_NO_FOUND_PERCENTAGE_FOR_LITTLE_LEFT
    if
    0E4D: random_percent 0@
    then
    03E5: show_text_box 'INV110'
    return
    end
    
    if and
    0E4D: random_percent 5
    not $QUEST_TYPE == 5
    then
    jump to @GIVE_AMMO_FOR_SOMETHING_PRE
    end
    
    if and
    0E4D: random_percent 5
    not $QUEST_TYPE == 5
        then
        
        if
        PERK_FINDGOODS == 0
        then
            
        if
        $FREEMODE == 0
        then
        random_int 0@ 15 125
        else
        random_int 0@ 25 200
        end
            
        else
            
        if
        $FREEMODE == 0
        then
        random_int 0@ 65 175
        else
        random_int 0@ 125 300
        end
            
        end
        
        0@ /= 4
        
        0513: show_text_box_1number 'INV310' number 0@  // ~k~~VEHICLE_ENTER_EXIT~ Use Slot Machine $~1~
        MONEY_FOUND_TEXT_TIME = 85
        0109: player PLAYER_CHAR money += 0@
        018C: play_sound 1057 at 0.0 0.0 0.0
        return
        end    
    end    

/////////////////////////////////////Еда/////////////////////////////////////

if
0E4D: random_percent 20
    then
    
    if
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    then
    jump to @NOT_FUCK_YOU_PIDOR
    end
    
    if and
    PLAYER_FOOD_ZAPAS >= 35
    8E4D: not random_percent 10
    then
    
    if and
    PERK_FINDGOODS == 1
    0E4D:  random_percent 8
        then
        jump to @NOT_FUCK_YOU_PIDOR
        end
    
    if and
    PERK_FINDGOODS == 2
    0E4D:  random_percent 13
        then
        jump to @NOT_FUCK_YOU_PIDOR
        end
    
    jump to @FUCK_YOU_PIDOR
    end
    
    :NOT_FUCK_YOU_PIDOR    
    
    if
    not CAR_SEARCH_DO_NOT_GIVE == 2
    then
    $BANKA_FIND += 1
    BURG_FOOD_FOUND += 1
    $TEMP_XP = BANKA_FIND_XP
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)    
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BANKA_FIND"    
    
    if
    $CHEATED_FLAG == 0 
    then    
    0@ += 1
    end        
     
    0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_BANKA_FIND"
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT83_GOT"
    0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BANKA_FIND"        
        
    if and
    0@ == 0
    2@ >= 100
    $CHEATED_FLAG == 0
        then
        v$ACHIEVEMNT = "ACH83"
        $ACHIEVEMENT_GOT_FLAG = 1            
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT83_GOT"            
        end    
         
    $BANKA += 1
    if and
    PERK_FINDGOODS == 1
    0E4D: random_percent 15
        then
        $BANKA += 1
        $BANKA_FIND += 1
        BURG_FOOD_FOUND += 1
        $TEMP_XP = BANKA_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int) 
        end
    if and
    PERK_FINDGOODS == 2
    0E4D: random_percent 30
        then
        $BANKA += 1
        $BANKA_FIND += 1
        BURG_FOOD_FOUND += 1
        $TEMP_XP = BANKA_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int) 
        end    
    end
    
    if and
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    $QUEST_TYPE == 5
    $ONMISSION == 1
    then
    
    if and
    $QUEST_TYPE == 5
    RQUEST_TIMER_STOPPED_FLAG == 0
        then
        
        if
        CAR_SEARCH_DO_NOT_GIVE == 2
        then
        03E5: show_text_box 'INV300'
        else
        03E5: show_text_box 'INV300A'
        end
        
        random_float 0@ 0.25 0.45
        HOUSESEARCH_QUEST_FINDED_COUNT += 1
        005F: EXTRA_WEIGHT += 0@  // (float)
            
        else 
        03E5: show_text_box 'INV109'
        end
    
    else
    03E5: show_text_box 'INV109'
    end
    
    return 
    end
    
/////////////////////////////////////Аптечка/////////////////////////////////////    
    
if and
0E4D: random_percent 10
PLAYER_HEAL_ZAPAS < 65
    then     
    
    if and
    PLAYER_HEAL_ZAPAS >= 20
    8E4D: not random_percent 5
    not QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    then
    jump to @FUCK_YOU_PIDOR
    end
    
    if
    not CAR_SEARCH_DO_NOT_GIVE == 2
    then
    $HEAL_FIND += 1
    BURG_HEAL_FOUND += 1
    $TEMP_XP = HEAL_FIND_XP
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)    
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_FIND"    
    
    if
    $CHEATED_FLAG == 0 
    then    
    0@ += 1
    end        
     
    0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_FIND"
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT84_GOT"
    0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_FIND"        
        
    if and
    0@ == 0
    2@ >= 50
    $CHEATED_FLAG == 0
        then
        v$ACHIEVEMNT = "ACH84"
        $ACHIEVEMENT_GOT_FLAG = 1            
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT84_GOT"            
        end    
        
    $HEAL += 1
    if and
    PERK_FINDGOODS == 1
    0E4D: random_percent 10
        then
        $HEAL += 1
        $HEAL_FIND += 1
        BURG_HEAL_FOUND += 1
        $TEMP_XP = HEAL_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int)
        end
    if and
    PERK_FINDGOODS == 2
    0E4D: random_percent 25
        then
        $HEAL += 1
        $HEAL_FIND += 1
        BURG_HEAL_FOUND += 1
        $TEMP_XP = HEAL_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int)
        end
    end
    
    if and
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    $QUEST_TYPE == 5
    $ONMISSION == 1
    then
    
    if and
    $QUEST_TYPE == 5
    RQUEST_TIMER_STOPPED_FLAG == 0
        then
        
        if
        CAR_SEARCH_DO_NOT_GIVE == 2
        then
        03E5: show_text_box 'INV300'
        else
        03E5: show_text_box 'INV300A'
        end
        
        random_float 0@ 0.25 0.45
        HOUSESEARCH_QUEST_FINDED_COUNT += 1
        005F: EXTRA_WEIGHT += 0@  // (float)
            
        else  
        03E5: show_text_box 'INV108'
        end
            
    else
    03E5: show_text_box 'INV108'
    end
     
    return
    end
    
/////////////////////////////////////Бинт/////////////////////////////////////        

if
0E4D: random_percent 30
    then
    
    if and
    PLAYER_BINT_ZAPAS >= 30
    8E4D: not random_percent 5
    not QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    then
    jump to @FUCK_YOU_PIDOR
    end
    
    if
    not CAR_SEARCH_DO_NOT_GIVE == 2
    then
    $BINT_FIND += 1
    BURG_BINT_FOUND += 1
    $TEMP_XP = BINT_FIND_XP
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)    
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_FIND"    
    
    if
    $CHEATED_FLAG == 0 
    then    
    0@ += 1
    end        
     
    0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_FIND"
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT85_GOT"
    0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_FIND"        
        
    if and
    0@ == 0
    2@ >= 80
    $CHEATED_FLAG == 0
        then
        v$ACHIEVEMNT = "ACH85"
        $ACHIEVEMENT_GOT_FLAG = 1            
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT85_GOT"            
        end    
        
    $BINT += 1
    if and
    PERK_FINDGOODS == 1
    0E4D: random_percent 15
        then
        $BINT += 1
        $BINT_FIND += 1
        BURG_BINT_FOUND += 1
        $TEMP_XP = BINT_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int) 
        end
    if and
    PERK_FINDGOODS == 2
    0E4D: random_percent 30
        then
        $BINT += 1
        $BINT_FIND += 1
        BURG_BINT_FOUND += 1
        $TEMP_XP = BINT_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int) 
        end
    end
    
    if and
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    $QUEST_TYPE == 5
    $ONMISSION == 1
    then
    
    if and
    $QUEST_TYPE == 5
    RQUEST_TIMER_STOPPED_FLAG == 0
        then
        
        if
        CAR_SEARCH_DO_NOT_GIVE == 2
        then
        03E5: show_text_box 'INV300'
        else
        03E5: show_text_box 'INV300A'
        end
        
        random_float 0@ 0.25 0.45
        HOUSESEARCH_QUEST_FINDED_COUNT += 1
        005F: EXTRA_WEIGHT += 0@  // (float)
            
        else  
        03E5: show_text_box 'INV16'
        end
    
    else
    03E5: show_text_box 'INV16'
    end
     
    return 
    end
    
/////////////////////////////////////Отмычка/////////////////////////////////////     

if
0E4D: random_percent 10
    then    
    
    if
    not CAR_SEARCH_DO_NOT_GIVE == 2
    then
    $JIMMY_FIND += 1
    BURG_JIMMY_FOUND += 1
    $TEMP_XP = JIMMY_FIND_XP
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)     
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_JIMMY_FIND"    
    
    if
    $CHEATED_FLAG == 0 
    then    
    0@ += 1
    end        
     
    0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_JIMMY_FIND"
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT87_GOT"
    0AF0: 2@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_JIMMY_FIND"
                
    if and
    0@ == 0
    2@ >= 100
    $CHEATED_FLAG == 0
        then
        v$ACHIEVEMNT = "ACH87"
        $ACHIEVEMENT_GOT_FLAG = 1            
        0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT87_GOT"            
        end    
        
    $JIMMY += 1
    if and
    PERK_FINDGOODS == 1
    0E4D: random_percent 15
        then
        $JIMMY += 1
        $JIMMY_FIND += 1
        BURG_JIMMY_FOUND += 1
        $TEMP_XP = JIMMY_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int)
        end
    if and
    PERK_FINDGOODS == 2
    0E4D: random_percent 30
        then
        $JIMMY += 1
        $JIMMY_FIND += 1
        BURG_JIMMY_FOUND += 1
        $TEMP_XP = JIMMY_FIND_XP
        008D: $TEMP_XP = integer $TEMP_XP to_float
        0069: $TEMP_XP *= $XP_COEFF // (float)
        008C: $TEMP_XP = float $TEMP_XP to_integer
        0058: $PLAYER_XP += $TEMP_XP // (int)
        end
    end
    
    if and
    QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
    $QUEST_TYPE == 5
    $ONMISSION == 1
    then
    
    if and
    $QUEST_TYPE == 5
    RQUEST_TIMER_STOPPED_FLAG == 0
        then
        
        if
        CAR_SEARCH_DO_NOT_GIVE == 2
        then
        03E5: show_text_box 'INV300'
        else
        03E5: show_text_box 'INV300A'
        end
        
        random_float 0@ 0.25 0.45
        HOUSESEARCH_QUEST_FINDED_COUNT += 1
        005F: EXTRA_WEIGHT += 0@  // (float)
            
        else  
        03E5: show_text_box 'INV91'
        end
    
    else
    03E5: show_text_box 'INV91'
    end
    
    return
    end
    
:FUCK_YOU_PIDOR              

03E5: show_text_box 'INV110'
return   

:HOUSE_LOOT_CREATE_LOOT_POINTS

094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
if
0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_LOOT_POINTS"
    then
    0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_LOOT_POINTS"
    
    if and
    $CHEATS_ON == 1
    $EXPE_FLAG == 1
    then
    HOUSE_PRIKOL_HUMAN_HANDLE = 0
    HOUSE_PRIKOL_HUMAN_HANDLE = File.Open("debug\house_points.txt", "wt+")
    end
    
    15@ = 0
    for 0@ = 0 to 16@
    
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    0AD3: 20@v = format "PNTX_%d" 0@        
    0AF2: 1@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PNTY_%d" 0@        
    0AF2: 2@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PNTZ_%d" 0@        
    0AF2: 3@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v 
    0AD3: 20@v = format "PNTA_%d" 0@        
    0AF2: 4@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    gosub @CHECK_POINT_IS_VALID
    if
    8@ == 0
    then
    
    if
    UNITED_MAP == 0
    then                           
    $BANDIT_MARKER_FLAG[15@] = object.Init(9268,1@,2@,3@)
    else
    $BANDIT_MARKER_FLAG[15@] = object.Init(18159,1@,2@,3@)
    end
        
    071F: set_object $BANDIT_MARKER_FLAG[15@] health_to 0@
    0AD3: 20@v = format "PNTA_%d" 0@        
    0AF2: 4@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    object.Angle($BANDIT_MARKER_FLAG[15@]) = 4@
    0566: link_object $BANDIT_MARKER_FLAG[15@] to_interior $ACTIVE_INTERIOR
    08D2: object $BANDIT_MARKER_FLAG[15@] scale_model 0.5
    else
    
    if
    8@ == 1
    then
    0AD9: write_formatted_text "POINT %f %f %f AT INDEX %d VPEREDI NI4EGO NET%c" in_file HOUSE_PRIKOL_HUMAN_HANDLE 1@ 2@ 3@ 0@ 0xA               
    end
    
    if
    8@ == 2
    then
    0AD9: write_formatted_text "POINT %f %f %f AT INDEX %d POINT IS INSIDE OBJECT%c" in_file HOUSE_PRIKOL_HUMAN_HANDLE 1@ 2@ 3@ 0@ 0xA  
    end        
    
    if
    8@ == 3
    then
    0AD9: write_formatted_text "POINT %f %f %f AT INDEX %d SLEVA HAS SOME HERNYA%c" in_file HOUSE_PRIKOL_HUMAN_HANDLE 1@ 2@ 3@ 0@ 0xA  
    end
    
    if
    8@ == 4
    then
    0AD9: write_formatted_text "POINT %f %f %f AT INDEX %d SPRAVA HAS SOME HERNYA%c" in_file HOUSE_PRIKOL_HUMAN_HANDLE 1@ 2@ 3@ 0@ 0xA  
    end
    
    if
    8@ == 5
    then
    0AD9: write_formatted_text "POINT %f %f %f AT INDEX %d TOO CLOSE TO OTHER LOOT POINT%c" in_file HOUSE_PRIKOL_HUMAN_HANDLE 1@ 2@ 3@ 0@ 0xA  
    end
    
    if
    8@ == 6
    then
    0AD9: write_formatted_text "POINT %f %f %f AT INDEX %d SZADI 4TO TO EST%c" in_file HOUSE_PRIKOL_HUMAN_HANDLE 1@ 2@ 3@ 0@ 0xA  
    end
    
    end
        
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    
                    
    end
    
    else
    return
    end
    
if and
$CHEATS_ON == 1
$EXPE_FLAG == 1
then
file.Close(HOUSE_PRIKOL_HUMAN_HANDLE)
HOUSE_PRIKOL_HUMAN_HANDLE = 0
end    

BURG_TOTAL_LOOT_POINTS = 0

for 0@ = 0 to 39    

if
03CA:   object $BANDIT_MARKER_FLAG[0@] exists
    then
    BURG_TOTAL_LOOT_POINTS += 1
    end
    
end

BURG_FOOD_FOUND = 0
BURG_BINT_FOUND = 0
BURG_HEAL_FOUND = 0
BURG_JIMMY_FOUND = 0

return

:HOUSE_LOOT_SHOW_PRIKOL_POINTS

094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
if
0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    then
    0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    
    for 0@ = 0 to 16@
    
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    0AD3: 20@v = format "PRKX_%d" 0@        
    0AF2: 1@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKY_%d" 0@        
    0AF2: 2@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKZ_%d" 0@        
    0AF2: 3@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v 
    0AD3: 20@v = format "PRKA_%d" 0@        
    0AF2: 4@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v  
    
    0085: 5@ = 0@ // (int)                     
    0@ = object.Init(18161,1@,2@,3@)
    071F: set_object 0@ health_to 5@
    object.Angle(0@) = 4@
    0566: link_object 0@ to_interior $ACTIVE_INTERIOR
    08D2: object 0@ scale_model 0.5
    0453: set_object 0@ XY_rotation 90.0 0.0 angle 4@
        
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    
                    
    end
    
    else
    return
    end

return

:HOUSE_LOOT_CREATE_SPEC_PRIKOL

094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
if
0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    then
    0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    
    16@ += 1
    random_int 0@ 0 16@
    
    if
    CURRENT_USHER_TUTORIAL_NUM == 3
    then    
    008B: 0@ = $TANK_MINIGUN_TURRET_HEAT // (int)
    end
    
    0AD3: 20@v = format "PRKX_%d" 0@        
    0AF2: 1@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKY_%d" 0@        
    0AF2: 2@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKZ_%d" 0@        
    0AF2: 3@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v                   
    
    else
    return
    end
    
if or
HOUSE_PRIKOL_SPEC_TYPE == 1
CURRENT_USHER_TUTORIAL_NUM == 3
then
jump to @HOUSE_PRIKOL_SPEC_WITCH
end    
    
if
HOUSE_PRIKOL_SPEC_TYPE == 2
then
jump to @HOUSE_PRIKOL_SPEC_TANK
end    

if
0E4D: random_percent 3
then
:HOUSE_PRIKOL_SPEC_TANK
$TANK_INTERIOR_SPAWN = 1
$SPAWN_TANK_FLAG = 1
$SPAWN_TANK_ON_COORD = 1
0088: $TANK_X = 1@ // (float)
0088: $TANK_Y = 2@ // (float)
0088: $TANK_Z = 3@ // (float)
HOUSE_PRIKOL_SPEC_SPAWNED = 2
0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
0AF1: write_int 2 to_ini_file "data\survival.set" section 24@v key "SPEC_TYPE"
else
:HOUSE_PRIKOL_SPEC_WITCH
$WITCH_INTERIOR_SPAWN = 1
$SPAWN_WITCH_FLAG = 1
$SPAWN_WITCH_ON_COORD = 1
SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG = 1
0088: $WITCH_X = 1@ // (float)
0088: $WITCH_Y = 2@ // (float)
0088: $WITCH_Z = 3@ // (float)
HOUSE_PRIKOL_SPEC_SPAWNED = 1
0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
0AF1: write_int 1 to_ini_file "data\survival.set" section 24@v key "SPEC_TYPE"
end

return

:HOUSE_CREATE_CORPSE

094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
if
0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    then
    
    0AD3: 24@v = format "%d" HOUSE_LOOT_SEED        
    if
    8AF0: not 0@ = get_int_from_ini_file "data\survival.set" section 24@v key "CORPSE_MODEL"
    then
    gosub @HOUSE_PRIKOL_HUMAN_CHECKING_MODEL
    0AF1: write_int 0@ to_ini_file "data\survival.set" section 24@v key "CORPSE_MODEL"
    else
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section 24@v key "CORPSE_MODEL"
    end
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    /////////////////////////////
    
    if
    8AF0: not 16@ = get_int_from_ini_file "data\survival.set" section 24@v key "CORPSE_PRIK_PNT_NUM"
    then
    
    094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"

    16@ += 1
    random_int 17@ 0 16@
    
    0AD3: 24@v = format "%d" HOUSE_LOOT_SEED
    0AF1: write_int 17@ to_ini_file "data\survival.set" section 24@v key "CORPSE_PRIK_PNT_NUM"
    
    094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    0AD3: 20@v = format "PRKX_%d" 17@        
    0AF2: 1@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKY_%d" 17@        
    0AF2: 2@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKZ_%d" 17@        
    0AF2: 3@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v 
    0AD3: 20@v = format "PRKA_%d" 17@        
    0AF2: 4@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v 
    
    else
    
    0AF0: 17@ = get_int_from_ini_file "data\houses.ini" section 24@v key "CORPSE_PRIK_PNT_NUM"
    
    094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    0AD3: 20@v = format "PRKX_%d" 17@        
    0AF2: 1@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKY_%d" 17@        
    0AF2: 2@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKZ_%d" 17@        
    0AF2: 3@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v 
    0AD3: 20@v = format "PRKA_%d" 17@        
    0AF2: 4@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    
    end
    
    if
    CURRENT_USHER_TUTORIAL_NUM == 3
    then    
    008A: $TANK_MINIGUN_TURRET_HEAT = 17@ // (int)
    end
    
    /////////////////////////////
    
    if
    CARMA_VERY_BAD_FLAG == 0
    then
    HOUSE_CORPSE_HANDLE = actor.Create(29,0@,1@,2@,3@) //protect my pipi
    else    
    HOUSE_CORPSE_HANDLE = actor.Create(26,0@,1@,2@,3@) //protect my pipi
    end
    
    0E32: set_char_coordinates_simple HOUSE_CORPSE_HANDLE coord 1@ 2@ 3@
    0D10: set_actor HOUSE_CORPSE_HANDLE alpha 255 // IF and SET 
    if
    0E4D: random_percent 50
    then
    4@ += 180.0
    end    
    actor.Angle(HOUSE_CORPSE_HANDLE) = 4@
    0860: link_actor HOUSE_CORPSE_HANDLE to_interior $ACTIVE_INTERIOR
    0489: set_actor HOUSE_CORPSE_HANDLE muted 1
    094E: set_actor HOUSE_CORPSE_HANDLE mute_pain_audio 1        
    
    if
    0E4D: random_percent 10
    then
    0321: AS_actor HOUSE_CORPSE_HANDLE die_headshotted       
    else
    05BE: AS_actor HOUSE_CORPSE_HANDLE die
    end
    
//    0@ = marker.CreateAboveActor(HOUSE_CORPSE_HANDLE)
    
    end

return

:HOUSE_LOOT_CREATE_HUMAN_PRIKOL

094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
if
0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    then
    0AF0: 16@ = get_int_from_ini_file "data\houses.ini" section 24@v key "TOTAL_PRIKOL_POINTS"
    
    16@ += 1
    random_int 17@ 0 16@
    
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////         
    
    if or
    HOUSE_PRIKOL_MODEL == 0
    HOUSE_PRIKOL_HUMAN_SPAWNED == 222
    then
    gosub @HOUSE_PRIKOL_HUMAN_CHECKING_MODEL
    else
    0085: 0@ = HOUSE_PRIKOL_MODEL // (int)
    end
    
    if
    HOUSE_PRIKOL_HUMAN_SPAWNED == 222
    then
    0089: 1@ = $ZOMBIE_X[0] // (float)
    0089: 2@ = $ZOMBIE_Y[0] // (float)
    0089: 3@ = $ZOMBIE_Z[0] // (float)
    3@ += 1.0
    0089: 4@ = $ZOMBIE_Z[1] // (float)
    else
    094B: 24@v = get_active_interior_name_from_actor PLAYER_ACTOR // 16-byte string
    0AD3: 20@v = format "PRKX_%d" 17@        
    0AF2: 1@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKY_%d" 17@        
    0AF2: 2@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    0AD3: 20@v = format "PRKZ_%d" 17@        
    0AF2: 3@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v 
    0AD3: 20@v = format "PRKA_%d" 17@        
    0AF2: 4@ = get_float_from_ini_file "data\houses.ini" section 24@v key 20@v
    end 
                        
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    if
    CARMA_VERY_BAD_FLAG == 0
    then
    HOUSE_PRIKOL_HUMAN_HANDLE = actor.Create(29,0@,1@,2@,3@) //protect my pipi
    else    
    HOUSE_PRIKOL_HUMAN_HANDLE = actor.Create(26,0@,1@,2@,3@) //protect my pipi
    end
    
    create_thread @ANT_PRE HOUSE_PRIKOL_HUMAN_HANDLE
    0E32: set_char_coordinates_simple HOUSE_PRIKOL_HUMAN_HANDLE coord 1@ 2@ 3@
    0D10: set_actor HOUSE_PRIKOL_HUMAN_HANDLE alpha 255 // IF and SET
    actor.Angle(HOUSE_PRIKOL_HUMAN_HANDLE) = 4@
    0860: link_actor HOUSE_PRIKOL_HUMAN_HANDLE to_interior $ACTIVE_INTERIOR
    if
    0E4D: random_percent 30
    then
    actor.Health(HOUSE_PRIKOL_HUMAN_HANDLE) = 2000
    else
    actor.Health(HOUSE_PRIKOL_HUMAN_HANDLE) = 1000  
    end  
    0D10: set_actor HOUSE_PRIKOL_HUMAN_HANDLE alpha 255 // IF and SET
    Actor.SetWalkStyle(HOUSE_PRIKOL_HUMAN_HANDLE, "GANG2")
    081A: set_actor HOUSE_PRIKOL_HUMAN_HANDLE weapon_skill_to 2
    Actor.WeaponAccuracy(HOUSE_PRIKOL_HUMAN_HANDLE) = 50
    060B: set_actor HOUSE_PRIKOL_HUMAN_HANDLE decision_maker_to $DEC_PEOPLE
    0446: set_actor HOUSE_PRIKOL_HUMAN_HANDLE dismemberment_possible 0   
    0946: set_actor HOUSE_PRIKOL_HUMAN_HANDLE actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE
    099F: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE ignore_weapon_range 1
    04D8: set_actor HOUSE_PRIKOL_HUMAN_HANDLE drowns_in_water 0
    0E24: fix_char HOUSE_PRIKOL_HUMAN_HANDLE ground 0 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
    0648: unknown_actor HOUSE_PRIKOL_HUMAN_HANDLE task_set 5.0 // float
    0350: set_actor HOUSE_PRIKOL_HUMAN_HANDLE maintain_position_when_attacked 1
    0816: set_actor HOUSE_PRIKOL_HUMAN_HANDLE dont_chase_victim 1
    0489: set_actor HOUSE_PRIKOL_HUMAN_HANDLE muted 1
    create_thread @PED_BKP HOUSE_PRIKOL_HUMAN_HANDLE 371
    if
    HOUSE_PRIKOL_HUMAN_SPAWNED == 222
    then
    0350: set_actor HOUSE_PRIKOL_HUMAN_HANDLE maintain_position_when_attacked 0
    0816: set_actor HOUSE_PRIKOL_HUMAN_HANDLE dont_chase_victim 0
    04EB: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE crouch 0
//    05E2: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE kill_actor PLAYER_ACTOR
    0634: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE attack_using_weapon_actor PLAYER_ACTOR flags 4 perform_actions_after_time 0 chance_of_action 100
    HOUSE_PRIKOL_WEP = 0
    else
    04EB: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE crouch 1
    0635: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE aim_at_actor PLAYER_ACTOR 999999 ms
    end
        
//    0@ = marker.CreateAboveActor(HOUSE_PRIKOL_HUMAN_HANDLE)        
    
    if or
    HOUSE_PRIKOL_WEP == 0
    HOUSE_PRIKOL_HUMAN_SPAWNED == 222
    then
    
    if
    UNITED_MAP == 0
        then
        
        random_int 0@ 0 8        
        if
        0@ == 0
        then
        1@ = 24
        end
        
        if
        0@ == 1
        then
        1@ = 25
        end
        
        if
        0@ == 2
        then
        1@ = 71
        end
        
        if
        0@ == 3
        then
        1@ = 73
        end
        
        if
        0@ == 4
        then
        1@ = 91
        end
        
        if
        0@ == 5
        then
        1@ = 28
        end
        
        if
        0@ == 6
        then
        1@ = 87
        end
        
        if
        0@ == 7
        then
        1@ = 23
        end
        
        else
        
        if
        STORIES_MAP == 0
        then
        
        //////////////////////////////////
        
        if
        $UNITED_III_SPAWN == 1
        then
        1@ = 113
        else
        
        random_int 0@ 0 2
        if
        0@ == 0
        then
        1@ = 138
        end
        
        if
        0@ == 1
        then
        1@ = 137
        end
        
        end
        
        //////////////////////////////////
        
        else
        
        //////////////////////////////////
        
        if
        $UNITED_III_SPAWN == 1
        then
        
        random_int 0@ 0 2
        if
        0@ == 0
        then
        1@ = 166
        end
        
        if
        0@ == 1
        then
        1@ = 172
        end
        
        else
        
        random_int 0@ 0 2
        if
        0@ == 0
        then
        1@ = 196
        end
        
        if
        0@ == 1
        then
        1@ = 202
        end
        
        end 
        
        //////////////////////////////////
        
        end 
        
        end
    
    else
    0085: 1@ = HOUSE_PRIKOL_WEP // (int)
    end
    
    0781: get_weapon_with_ID 1@ model_to 0@
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,1@,99999)
    
    if
    0E4D: random_percent 4
    then
    gosub @HOUSE_HUMAN_PRIKOL_MAKE_GRENADE_PRIKOL
    end
        
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////                    
    
    else
    return
    end

return

////////////////////////Рандомный прикол с гранатой////////////////////////

:HOUSE_HUMAN_PRIKOL_MAKE_GRENADE_PRIKOL
random_int 2@ 1 to 4
    
random_int 1@ 0 to 2                   
if 
1@ == 0   
then   

if
UNITED_MAP == 0
then

0781: get_weapon_with_ID 18 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end
  
actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,18,2@)
else

if
$UNITED_VC_FLAG == 1
then

if
STORIES_MAP == 0
then

0781: get_weapon_with_ID 134 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,134,2@)
else

0781: get_weapon_with_ID 209 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,209,2@)
end

else

if
STORIES_MAP == 0
then

0781: get_weapon_with_ID 118 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,118,2@)
else

0781: get_weapon_with_ID 179 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,179,2@)
end

end

end
    
else

if
UNITED_MAP == 0
then

0781: get_weapon_with_ID 16 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end
  
actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,16,2@)
else

if
$UNITED_VC_FLAG == 1
then

if
STORIES_MAP == 0
then

0781: get_weapon_with_ID 132 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,132,2@)
else

0781: get_weapon_with_ID 207 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,207,2@)
end

else

if
STORIES_MAP == 0
then

0781: get_weapon_with_ID 115 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,115,2@)
else

0781: get_weapon_with_ID 177 model_to 0@
    
while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

actor.GiveWeaponAndAmmo(HOUSE_PRIKOL_HUMAN_HANDLE,177,2@)
end

end

end
    
end  

return

////////////////////////Вычисление модели////////////////////////

:HOUSE_PRIKOL_HUMAN_CHECKING_MODEL

//////////////////////////////////////////////////
    
random_int 0@ = MIN_SKIN_GEN MAX_SKIN_GEN
if and
0@ == SKIN_GEN_SET
UNITED_MAP == 0
$GAMEMODE_WAR == 0
$GAMEMODE_CRAZY == 0
$SAME_PLAYER_CHEAT_SPAWN == 0
    then
    
    while true
    wait 0
    
    if
    0E4D: random_percent NEWSKINS2_GEN_PERCENT
    then
    random_int 0@ $MIN_SKIN2 $MAX_SKIN2
    else
    random_int 0@ $MIN_SKIN $MAX_SKIN
    end
    
    if
    not model.Available(0@)
    then
    model.Load(0@)
    end
    
    if or
    003C:   $RANDOM_MODE_MODEL == 0@  // (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[0] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[1] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[2] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[3] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[4] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[5] // @ == $ (int)
        then
        else   
        break
        end
    
    end
    
    return
    end
    
//////////////////////////////////////////////////    

if
UNITED_MAP == 0
then
0209: 0@ = random_int_in_ranges 7 285
else

if
$UNITED_VC_FLAG == 1
then

if
STORIES_MAP == 0
then
0209: 0@ = random_int_in_ranges MINID_VC_SKIN MAXID_VC_SKIN
else
0209: 0@ = random_int_in_ranges MINID_VCS_SKIN MAXID_VCS_SKIN
end

else

if
STORIES_MAP == 0
then
0209: 0@ = random_int_in_ranges MINID_III_SKIN MAXID_III_SKIN
else
0209: 0@ = random_int_in_ranges MINID_LCS_SKIN MAXID_LCS_SKIN
end

end

end

if
UNITED_MAP == 0
then


////////////////////////////////////////////////////////

2@ = 0

for 1@ = 0 to $CAMPS_COUNT2
        
if or
07D6:   0@ == $CAMP_MODEL1[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL2[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL3[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL4[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL5[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL6[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL7[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL8[1@] // @ == $ (int)
then
2@ = 1
end

if or
07D6:   0@ == $TRADER_MODEL[0] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[1] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[2] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[3] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[4] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[5] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[6] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[7] // @ == $ (int)
then
2@ = 1
end

if or
07D6:   0@ == $TRADER_MODEL[8] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[9] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[10] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[11] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[12] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[13] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[14] // @ == $ (int)
then
2@ = 1
end
            
if or
07D6:   0@ == $CAMP_MODEL9[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL10[1@] // @ == $ (int)
003C:   $RANDOM_MODE_MODEL == 0@  // (int)
then
2@ = 1
end   

end

////////////////////////////////////////////////////////

end

if or
07D6:   0@ == $RANDOM_PEOPLE_SKIN[0] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[1] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[2] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[3] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[4] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[5] // @ == $ (int)
003C:   $RANDOM_MODE_MODEL == 0@  // (int)
2@ == 1
jf @HOUSE_PRIKOL_HUMAN_CHECKING_MODEL2
jump @HOUSE_PRIKOL_HUMAN_CHECKING_MODEL

:HOUSE_PRIKOL_HUMAN_CHECKING_MODEL2
 
if
07DE:   model 0@ exists  // versionB
jf @HOUSE_PRIKOL_HUMAN_CHECKING_MODEL

0AD3: 24@v = format "%d" 0@
0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key 24@v
if
not 1@ == 1
jf @HOUSE_PRIKOL_HUMAN_CHECKING_MODEL 

while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

return

:CHECK_POINT_IS_VALID

if
83CA: not  object BURGLARY_INT_OBJ exists
then
:CREATE_BURGLARY_OBJECT

if
UNITED_MAP == 0
then
BURGLARY_INT_OBJ = object.Init(9268,1@,2@,3@)
else
BURGLARY_INT_OBJ = object.Init(18159,1@,2@,3@)
end

object.Angle(BURGLARY_INT_OBJ) = 4@
0566: link_object BURGLARY_INT_OBJ to_interior $ACTIVE_INTERIOR
0750: set_object BURGLARY_INT_OBJ visibility 0
else

if
UNITED_MAP == 0
then
if
89CC: not  object BURGLARY_INT_OBJ model_is 9268
    then
    jump to @CREATE_BURGLARY_OBJECT
    end
else
if
89CC: not  object BURGLARY_INT_OBJ model_is 18159
    then
    jump to @CREATE_BURGLARY_OBJECT
    end
end    
    
end

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset 0.0 0.45 -0.35 //СПЕРЕДИ НИЧЕГО НЕТ
if
06BD:   no_obstacles_between 1@ 2@ 6@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
    then
    object.Destroy(BURGLARY_INT_OBJ)
    8@ = 1
    return
    end
    
0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset 0.0 0.0 0.45 //ВНУТРИ ОБЪЕКТА
if
86BD: not  no_obstacles_between 1@ 2@ 3@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
    then
    object.Destroy(BURGLARY_INT_OBJ)
    8@ = 3
    return
    end    
    
0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset -0.35 0.0 -0.35 //СЛЕВА ЧТО-ТО ЕСТЬ
if
86BD: not   no_obstacles_between 1@ 2@ 6@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
    then
    0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset 0.35 0.0 -0.35 //И СПРАВА ЧТО-ТО ЕСТЬ
    if
    86BD: not   no_obstacles_between 1@ 2@ 6@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
        then
        //ass ignore
        else
        object.Destroy(BURGLARY_INT_OBJ)
        8@ = 3
        return
        end    
    end
    
0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset 0.35 0.0 -0.35 //СПРАВА ЧТО-ТО ЕСТЬ
if
86BD: not   no_obstacles_between 1@ 2@ 6@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
    then
    0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset -0.35 0.0 -0.35 //И СЛЕВА ЧТО-ТО ЕСТЬ
    if
    86BD: not   no_obstacles_between 1@ 2@ 6@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
        then
        //ass ignore
        else
        object.Destroy(BURGLARY_INT_OBJ)
        8@ = 4
        return
        end
    end        

0400: store_coords_to 4@ 5@ 6@ from_object BURGLARY_INT_OBJ with_offset 0.0 -1.0 -0.5 //СЗАДИ ЧТО-ТО ЕСТЬ
if
86BD: not   no_obstacles_between 1@ 2@ 6@ and 4@ 5@ 6@ solid 1 car 0 actor 0 object 0 particle 0
    then
    object.Destroy(BURGLARY_INT_OBJ)
    8@ = 6
    return
    end
    
for 18@ = 0 to 39
if
03CA:   object $BANDIT_MARKER_FLAG[18@] exists
    then
    if
    04E6:   object $BANDIT_MARKER_FLAG[18@] near_point 1@ 2@ 3@ radius 0.75 0.75 2.0 flag 0
        then
        object.Destroy(BURGLARY_INT_OBJ)
        8@ = 5
        return
        end
    end
end    

15@ += 1
                            
if
15@ > 39
then
return
end
                            
8@ = 0
                            
object.Destroy(BURGLARY_INT_OBJ)    

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

return

:CHECK_POINT_IS_VAILD_OLD
    
0087: 17@ = 3@ // (float)
17@ -= 0.35
0EF0: get_coord_from_angled_distance 1@ 2@ angle 4@ dist 0.45 store_to 5@ 6@ //ВПЕРЕДИ ЧТО-ТО ЕСТЬ
if
//86BD: not  no_obstacles_between 1@ 2@ 17@ and 5@ 6@ 17@ solid 1 car 0 actor 0 object 0 particle 0
0D3A: get_collision_between_points 1@ 2@ 3@ and 5@ 6@ 17@ flags 1 0 0 0 0 0 0 0 ignore_entity 0 store_point_to $TEMPVAR_FLOAT_1 $TEMPVAR_FLOAT_2 $TEMPVAR_FLOAT_3 entity_to 11@ colpoint_data_to 1 // IF and SET
    then            
    0087: 18@ = 3@ // (float)
    17@ -= 0.45
    0EF0: get_coord_from_angled_distance 1@ 2@ angle 4@ dist 0.25 store_to 5@ 6@ //НЕ ВНУТРИ ОБЪЕКТА
    if
    06BD:  no_obstacles_between 1@ 2@ 17@ and 5@ 6@ 18@ solid 1 car 0 actor 0 object 0 particle 0
        then
        4@ -= 90.0
        0EF0: get_coord_from_angled_distance 1@ 2@ angle 4@ dist 0.35 store_to 5@ 6@ //СЛЕВА НИЧЕГО НЕТ
        if
        06BD:  no_obstacles_between 1@ 2@ 17@ and 5@ 6@ 17@ solid 1 car 0 actor 0 object 0 particle 0
            then
            4@ += 180.0
            0EF0: get_coord_from_angled_distance 1@ 2@ angle 4@ dist 0.35 store_to 5@ 6@ //СПРАВА НИЧЕГО НЕТ
            if
            06BD:  no_obstacles_between 1@ 2@ 17@ and 5@ 6@ 17@ solid 1 car 0 actor 0 object 0 particle 0
                then
                4@ += 90.0
                0087: 17@ = 3@ // (float)
                17@ -= 0.85
                0EF0: get_coord_from_angled_distance 1@ 2@ angle 4@ dist 1.0 store_to 5@ 6@ //СЗАДИ НИЧЕГО НЕТ
                if
                06BD:  no_obstacles_between 1@ 2@ 17@ and 5@ 6@ 17@ solid 1 car 0 actor 0 object 0 particle 0
                    then
                        
                    19@ = 0
                    for 18@ = 0 to 19
                    if
                    03CA:   object $BANDIT_MARKER_FLAG[18@] exists
                        then
                        if
    //                    04E5:   object $BANDIT_MARKER_FLAG[18@] near_point 1@ 2@ radius 0.5 0.5 sphere 0 
                        04E6:   object $BANDIT_MARKER_FLAG[18@] near_point 1@ 2@ 3@ radius 0.75 0.75 1.0 flag 0
                            then
                            19@ = 1
                            end
                        end
                    end
                        
                    if
                    19@ == 0
                        then                    
                        15@ += 1
                            
                        if
                        15@ > 39
                        then
                        return
                        end
                            
                        8@ = 0
                        else
                        8@ = 5
                        end                                                
                    else
                    8@ = 6
                    end
                else
                8@ = 4
                end
            else
            8@ = 3
            end
        else
        8@ = 2
        end
    else
    8@ = 1
    end
    
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    
        
return

/////////////////////Союзники атакуют HUMAN PRIKOL который увидили///////////////

:HUMAN_HOUSE_ATTACK_PEOPLE1

if
HOUSE_PRIKOL_HUMAN_SPAWNED == 2
then
062E: get_actor HOUSE_PRIKOL_HUMAN_HANDLE task 1506 status_store_to 3@ // ret 7 if not found
062E: get_actor HOUSE_PRIKOL_HUMAN_HANDLE task 1588 status_store_to 4@ // ret 7 if not found
if and
3@ == 7
4@ == 7
    then

    if
    0597:   actor HOUSE_PRIKOL_HUMAN_HANDLE crouching
    then  
    04EB: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE crouch 0 
    wait 0
    end
     
    05E2: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE kill_actor PLAYER_ACTOR 
    wait 0
    end
end

if 
$SIMULATING_FLAG == 1
then
return
end

if
$GAMEMODE_VERSUS == 1
then
return
end

092B: 3@ = group PLAYER_GROUP member 1@

if
07D6:   3@ == COOP_ACTOR // @ == $ (int)
then
return
end

if
056D:  actor 3@ defined
jf @HUMAN_HOUSE_PEOPLE_BEGIN

if
056D:   actor HOUSE_PRIKOL_HUMAN_HANDLE defined
jf @HUMAN_HOUSE_PEOPLE_BEGIN

if
051A:   actor HOUSE_PRIKOL_HUMAN_HANDLE damaged_by_actor 3@
then
054E: clear_actor HOUSE_PRIKOL_HUMAN_HANDLE damage
05E2: AS_actor HOUSE_PRIKOL_HUMAN_HANDLE kill_actor 3@
HOUSE_PRIKOL_HUMAN_SPAWNED = 2
end

if
$MISSION14_ACTIVE == 1
    then
    if
    not actor.Model(3@) == 250
    jf @HUMAN_HOUSE_PEOPLE_BEGIN
    end
    
if
$QUEST_TYPE == 9
    then
    if
    87D6: not  3@ == $VERSUS_PEOPLE[1] // @ == $ (int)
    jf @HUMAN_HOUSE_PEOPLE_BEGIN
    end        

if
056D:   actor 3@ defined
jf @HUMAN_HOUSE_PEOPLE_BEGIN

if or
00DF:   actor 3@ driving
0449:   actor 3@ in_a_car
    then
    if
    $HUNTER_ON_PLAYER == 0
    //$PEOPLE_DONT_ATTACK == 0
    //$COMMAND_STAY_IN_CAR == 0
        then                     
        gosub @HUMAN_HOUSE_PEOPLE_IN_CAR
        end
    end 

if and 
not actor.Driving(PLAYER_ACTOR)
$RANDOM_CAR_FLAG == 0  
89DE:   actor 3@ entering_car  
80DF:   actor 3@ in_a_car
not actor.Dead(3@)
not actor.Dead(HOUSE_PRIKOL_HUMAN_HANDLE)
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if or
0364:   actor 3@ spotted_actor HOUSE_PRIKOL_HUMAN_HANDLE
0364:   actor HOUSE_PRIKOL_HUMAN_HANDLE spotted_actor 3@
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if
//00F2:   actor 3@ near_actor HOUSE_PRIKOL_HUMAN_HANDLE radius $ZMB_ATCK_RD_FR $ZMB_ATCK_RD_FR sphere 0
0EE4:  locate_char_distance_to_char 3@ char HOUSE_PRIKOL_HUMAN_HANDLE radius $ZMB_ATCK_RD_FR
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if and
$HUNTER_ON_PLAYER == 0
$PEOPLE_DONT_ATTACK == 0
$COMMAND_STAY_IN_CAR == 0
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if
not actor.Animation(3@) == "FLOOR_hit"
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if
$HUNTER_ON_GROUP == 0
jf @HUMAN_HOUSE_PEOPLE_BEGIN  
if
044B:   actor 3@ on_foot
jf @HUMAN_HOUSE_PEOPLE_BEGIN  
if
82E0: not actor 3@ firing_weapon
jf @HUMAN_HOUSE_PEOPLE_BEGIN
062E: get_actor 3@ task 1506 status_store_to 1@ // ret 7 if not found
if 
1@ == 7
jf @HUMAN_HOUSE_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "colt45_fire_2hands"
not actor.Animation(3@) == "python_fire" 
not actor.Animation(3@) == "shotgun_fire" 
not actor.Animation(3@) == "buddy_fire" 
not actor.Animation(3@) == "UZI_fire"
not actor.Animation(3@) == "RIFLE_fire" 
jf @HUMAN_HOUSE_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "FLAME_fire" 
not actor.Animation(3@) == "RocketFire" 
not actor.Animation(3@) == "WEAPON_sniper" 
not actor.Animation(3@) == "WEAPON_throw"
not actor.Animation(3@) == "BOM_PLANT"   
jf @HUMAN_HOUSE_PEOPLE_BEGIN       
if and
not actor.Animation(3@) == "colt45_crouchfire"
not actor.Animation(3@) == "python_crouchfire" 
not actor.Animation(3@) == "shotgun_crouchfire" 
not actor.Animation(3@) == "buddy_crouchfire" 
not actor.Animation(3@) == "UZI_crouchfire"
not actor.Animation(3@) == "RIFLE_crouchfire" 
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_reload"
not actor.Animation(3@) == "python_reload" 
not actor.Animation(3@) == "shotgun_reload" 
not actor.Animation(3@) == "buddy_reload" 
not actor.Animation(3@) == "UZI_reload"
not actor.Animation(3@) == "RIFLE_load" 
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_crouchreload"
not actor.Animation(3@) == "python_crouchreload" 
not actor.Animation(3@) == "shotgun_crouchreload" 
not actor.Animation(3@) == "buddy_crouchreload" 
not actor.Animation(3@) == "UZI_crouchreload"
not actor.Animation(3@) == "RIFLE_crouchload" 
jf @HUMAN_HOUSE_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "GunMove_BWD"
not actor.Animation(3@) == "GunMove_FWD"
not actor.Animation(3@) == "GunMove_L"
not actor.Animation(3@) == "GunMove_R"
not actor.Animation(3@) == "Gun_2_IDLE"
not actor.Animation(3@) == "GUN_BUTT"
not actor.Animation(3@) == "GUN_BUTT_crouch"
not actor.Animation(3@) == "Gun_stand" 
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "CLIMB_idle"
not actor.Animation(3@) == "CLIMB_jump"
not actor.Animation(3@) == "CLIMB_jump2fall"
not actor.Animation(3@) == "CLIMB_jump_B"
not actor.Animation(3@) == "CLIMB_Pull"
not actor.Animation(3@) == "CLIMB_Stand"
not actor.Animation(3@) == "CLIMB_Stand_finish" 
jf @HUMAN_HOUSE_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "Crouch_Roll_L"
not actor.Animation(3@) == "Crouch_Roll_R"
not actor.Animation(3@) == "gas_cwr"
not actor.Animation(3@) == "getup"
not actor.Animation(3@) == "getup_front"
not actor.Animation(3@) == "GunCrouchBwd"
not actor.Animation(3@) == "GunCrouchFwd"
jf @HUMAN_HOUSE_PEOPLE_BEGIN
05C1: AS_actor 3@ speak_from_audio_table $PEOPLE_ZOMBIE_ATTACK_AUDIO_TABLE
if
056D:   actor 3@ defined
jf @HUMAN_HOUSE_PEOPLE_BEGIN 
if and
not actor.Driving(PLAYER_ACTOR)
89DE:   actor PLAYER_ACTOR entering_car
80DF:   actor PLAYER_ACTOR in_a_car
80DF:   actor 3@ in_a_car 
not actor.Dead(3@)
jf @HUMAN_HOUSE_PEOPLE_BEGIN
//0647: AS_actor 3@ clear_look_task
//05B9: AS_actor 3@ stay_idle 50 ms 
wait 50
if
056D:   actor 3@ defined  
then
05E2: AS_actor 3@ kill_actor HOUSE_PRIKOL_HUMAN_HANDLE
end

jump @HUMAN_HOUSE_PEOPLE_BEGIN   
                                
:HUMAN_HOUSE_PEOPLE_IN_CAR   
if and
not actor.Animation(3@) == "Gang_DrivebyLHS"
not actor.Animation(3@) == "Gang_DrivebyLHS_Bwd"
not actor.Animation(3@) == "Gang_DrivebyLHS_Fwd"
not actor.Animation(3@) == "Gang_DrivebyRHS"
not actor.Animation(3@) == "Gang_DrivebyRHS_Bwd"
not actor.Animation(3@) == "Gang_DrivebyRHS_Fwd" 
jf @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN 
if and
not actor.Animation(3@) == "Gang_DrivebyTop_LHS"
not actor.Animation(3@) == "Gang_DrivebyTop_RHS" 
jf @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN 
if 
//00F2:   actor 3@ near_actor HOUSE_PRIKOL_HUMAN_HANDLE radius $ZMB_ATCK_RD_FR $ZMB_ATCK_RD_FR sphere 0
0EE4:  locate_char_distance_to_char 3@ char HOUSE_PRIKOL_HUMAN_HANDLE radius $ZMB_ATCK_RD_FR
jf @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
if or
0364:   actor 3@ spotted_actor HOUSE_PRIKOL_HUMAN_HANDLE
0364:   actor HOUSE_PRIKOL_HUMAN_HANDLE spotted_actor 3@
jf @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN

///////////////////////////////////////////////////////////////////////////
if and
0@ == 0
TEAMMATE1_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 1
TEAMMATE2_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 2
TEAMMATE3_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 3
TEAMMATE4_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 4
TEAMMATE5_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
    end
///////////////////////////////////////////////////////////////////////////

if and
8E42: not is_char_doing_task_id 3@ 243
not $COMMAND_STAY_IN_CAR == 1
then
06C9: remove_actor 3@ from_group
0631: put_actor 3@ in_group PLAYER_GROUP
end          
0713: actor 3@ driveby_actor HOUSE_PRIKOL_HUMAN_HANDLE car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 100

///////////////////////////////////////////////////////////////////////////
if
0@ == 0
    then
    TEAMMATE1_ATTACK_TIMER = 0
    end
if
0@ == 1
    then
    TEAMMATE2_ATTACK_TIMER = 0
    end
if
0@ == 2
    then
    TEAMMATE3_ATTACK_TIMER = 0
    end
if
0@ == 3
    then
    TEAMMATE4_ATTACK_TIMER = 0
    end
if
0@ == 4
    then
    TEAMMATE5_ATTACK_TIMER = 0
    end
///////////////////////////////////////////////////////////////////////////
 
return       

:HUMAN_HOUSE_PEOPLE_IN_CAR_RETURN
return

:HUMAN_HOUSE_PEOPLE_BEGIN
return

:HOUSE_SEARCH_CHECK_FOR_DESTROY 

object.StorePos($BANDIT_MARKER_FLAG[0@],1@,2@,3@)
06C3: get_number_of_fires_within_sphere_at 1@ 2@ 3@ radius 3.0 store_to 1@
if
1@ > 0
then
object.Destroy($BANDIT_MARKER_FLAG[0@])
return
end
 
000F: 1@ -= 5.0
000F: 2@ -= 5.0
000F: 3@ -= 1.0
object.StorePos($BANDIT_MARKER_FLAG[0@],4@,5@,6@) 
000F: 4@ -= -5.0
000F: 5@ -= -5.0
000F: 6@ -= -1.0

if
0356:   explosion_type -1 in_cube_cornerA 1@ 2@ 3@ cornerB 4@ 5@ 6@
then
object.Destroy($BANDIT_MARKER_FLAG[0@])
return
end

return

:BRG_SND
thread 'BRG_SND'

gosub @BRG_SND_RANDOM_GET

Audiostream.SetPosition(10@, 3@, 1@, 2@) //ZXY
Audiostream.PerformAction(10@, PLAY)
0089: 11@ = $SOUNDS_VOLUME // (float)
11@ *= 2.0
Audiostream.Volume(10@) = 11@

repeat
wait 0

0089: 11@ = $SOUNDS_VOLUME // (float)
11@ *= 2.0
Audiostream.Volume(10@) = 11@
0AB9: get_mp3 10@ state_to 0@

until 0@ == -1

audiostream.Release(10@)

end_thread

:BRG_SND_RANDOM_GET

///////////////////////////////////FARTS///////////////////////////////////
if
0E4D: random_percent 1
then

random_int 0@ 0 2
if
0@ == 0
    then
    10@ = Audiostream.Load3D("audio\sounds\features\fart1.mp3")
    end 

if
0@ == 1
    then
    10@ = Audiostream.Load3D("audio\sounds\features\fart2.mp3")
    end 

return
end

///////////////////////////////////DOOR RUCHKA///////////////////////////////////
if
0E4D: random_percent 40
then

random_int 0@ 0 3
if
0@ == 0
    then
    10@ = Audiostream.Load3D("audio\sounds\features\door1.mp3")
    end 

if
0@ == 1
    then
    10@ = Audiostream.Load3D("audio\sounds\features\door2.mp3")
    end 

if
0@ == 2
    then
    10@ = Audiostream.Load3D("audio\sounds\features\door3.mp3")
    end 

return
end 

///////////////////////////////////POL SKRIP///////////////////////////////////

random_int 0@ 0 5
if
0@ == 0
then
10@ = Audiostream.Load3D("audio\sounds\features\skrip1.mp3")
end 

if
0@ == 1
then
10@ = Audiostream.Load3D("audio\sounds\features\skrip2.mp3")
end 

if
0@ == 2
then
10@ = Audiostream.Load3D("audio\sounds\features\skrip3.mp3")
end

if
0@ == 3
then
10@ = Audiostream.Load3D("audio\sounds\features\skrip4.mp3")
end

if
0@ == 4
then
10@ = Audiostream.Load3D("audio\sounds\features\skrip5.mp3")
end

return   

:ADJUST_NO_FOUND_PERCENTAGE_FOR_LITTLE_LEFT

////////////////////////////////////////////////////////////
    
1@ = 0

for 2@ = 0 to 39    
    
if
03CA:   object $BANDIT_MARKER_FLAG[2@] exists
    then
    1@ += 1
    end
        
end
    
////////////////////////////////////////////////////////////
    
0085: 20@ = BURG_TOTAL_LOOT_POINTS // (int)
0062: 20@ -= 1@  // (int)
0093: 20@ = integer 20@ to_float        
0085: 24@ = BURG_TOTAL_LOOT_POINTS // (int)
0093: 24@ = integer 24@ to_float                                        
24@ /= 100.0                     
0073: 20@ /= 24@ // (float)
0092: 20@ = float 20@ to_integer
if
20@ >= 80
then
0093: 0@ = integer 0@ to_float
0@ *= 0.65
0092: 0@ = float 0@ to_integer
end

if
QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
then
0093: 0@ = integer 0@ to_float
0@ *= 0.9
0092: 0@ = float 0@ to_integer
end

if and
0@ < 20
$QUEST_TYPE == 5
$ONMISSION == 1
QUEST_CARSEARCH_HOUSESEARCH_MODE == 1
then
0@ = 20
end

if
$CHEATS_ON == 1
then
0AD1: show_formatted_text_highpriority "PERCENTAGE LOOTED %d, LEFT POINTS %d/%d, NO FOUND PERCENTAGE %d" time 2000 20@ 1@ BURG_TOTAL_LOOT_POINTS 0@
end
    
////////////////////////////////////////////////////////////     
    
return     

:BRG_INF
thread 'BRG_INF'

gosub @INFECTED_ZONE_EFFECT_ON

while HOUSE_AMBIENT_TYPE == 2
wait 0
03F0: enable_text_draw 1
038E: draw_box_position 320.0 224.0 size 640.0 448.0 RGBA $NEST_EFF_C_R $NEST_EFF_C_G $NEST_EFF_C_B 55

////////////////////////////////////////////////

if
BLACK_MENU_OPENED_FLAG == 1
then
    
gosub @INFECTED_ZONE_EFFECT_OFF2
    
while BLACK_MENU_OPENED_FLAG == 1
wait 0
end
    
gosub @INFECTED_ZONE_EFFECT_ON
    
end
    
////////////////////////////////////////////////

end

gosub @INFECTED_ZONE_EFFECT_OFF

end_thread