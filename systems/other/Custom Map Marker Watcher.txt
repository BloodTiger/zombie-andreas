:CM_MRKW
thread 'CM_MRKW'

if
0@ == 1
    then
    jump to @FUNNY_BUNNY_EBANNY
    end
    
if
0@ == 2
    then
    jump to @FUNNY_BUNNY_EBANNY2
    end
    
if
0@ == 3
    then
    jump to @FUNNY_BUNNY_EBANNY3
    end    
    
if
0@ == 4
    then
    jump to @FUNNY_BUNNY_EBANNY4
    end           

for 0@ = 0 to 7
if
1@(0@,8i) < 1
    then
    1@(0@,8i) = 0
    end
end

repeat
wait 1000
until SURVIVAL_STARTED_FULLY_FLAG == 1

while true
wait 1000

if and
$PARK_CAR_ID[1@] < 1
$PARK_CAR_ID[2@] < 1
$PARK_CAR_ID[3@] < 1
$PARK_CAR_ID[4@] < 1
$PARK_CAR_ID[5@] < 1
$PARK_CAR_ID[6@] < 1
$PARK_CAR_ID[7@] < 1
$PARK_CAR_ID[8@] < 1
    then
    
    if
    9@ < 50
    then
    marker.Disable($WEAPON_MAX_AM[9@])
    else
    9@ += 49
    marker.Disable($PACKAGE_PICKED_UP_FLAG[9@])
    end
    
    end_thread
    end

end

:FUNNY_BUNNY_EBANNY

for 0@ = 0 to 7
if
1@(0@,8i) < 1
    then
    1@(0@,8i) = -1
    end
end

repeat
wait 1000
until SURVIVAL_STARTED_FULLY_FLAG == 1

while true
wait 1000

if and
89D1: not  pickup $KANISTRA_PICKUP[1@] created
89D1: not  pickup $KANISTRA_PICKUP[2@] created
89D1: not  pickup $KANISTRA_PICKUP[3@] created
89D1: not  pickup $KANISTRA_PICKUP[4@] created
//89D1: not  pickup $KANISTRA_PICKUP[5@] created
89D1: not  pickup $KANISTRA_PICKUP[6@] created
89D1: not  pickup $KANISTRA_PICKUP[7@] created
89D1: not  pickup $KANISTRA_PICKUP[8@] created   
    then
    
    if
    9@ < 50
    then
    marker.Disable($WEAPON_MAX_AM[9@])
    else
    9@ += 49
    marker.Disable($PACKAGE_PICKED_UP_FLAG[9@])
    end
    
    end_thread
    end

end

:FUNNY_BUNNY_EBANNY2

repeat
wait 1000
until SURVIVAL_STARTED_FULLY_FLAG == 1

while true
wait 2000

if
0D49: 0@ = compare_strings v$ACTIVE_INTERIOR_NAME 1@s // IF and SET
    then
    
    repeat
    wait 0
    until $ACTIVE_INTERIOR == 0
    
    if
    9@ < 50
    then
    marker.Disable($WEAPON_MAX_AM[9@])
    else
    9@ += 49
    marker.Disable($PACKAGE_PICKED_UP_FLAG[9@])
    end
    
    end_thread
    end

end

end_thread

:FUNNY_BUNNY_EBANNY3

repeat
wait 1000
until SURVIVAL_STARTED_FULLY_FLAG == 1

if
$CHEATS_ON == 0
then
random_int 0@ 0 4
gosub @SIMULATE_AUTOLOOT_AT_START_CUSTOM_MARK_WATCH
end

:FUNNY_BUNNY_CHERTY_EBANNY

while true
wait 1000

gosub @CHECK_FOR_AUTOLOOT_CUSTOM_MARK_WATCH
if
31@ == 1
then
jump to @FUNNY_BUNNY_CHERTY_EBANNY_LOOTED_BY_OTHER
end

if and
0D49: 0@ = compare_strings v$ACTIVE_INTERIOR_NAME 1@s // IF and SET
$ACTIVE_INTERIOR > 0
    then
    
    repeat
    wait 0
    until $ACTIVE_INTERIOR == 0
    
    :FUNNY_BUNNY_CHERTY_EBANNY_LOOTED_BY_OTHER
//    0AD1: show_formatted_text_highpriority "FUNNY_BUNNY_CHERTY_EBANNY_LOOTED_BY_OTHER" time 20000
    
    31@ = 0
    
    if
    9@ < 50
    then
    marker.Disable($WEAPON_MAX_AM[9@])
    else
    9@ += 49
    marker.Disable($PACKAGE_PICKED_UP_FLAG[9@])
    9@ -= 49
    end
    
    0@ = marker.CreateIconWithoutSphere(37,3@,4@,5@)
    32@ = 0
    
    repeat
    wait 0
    07FB: set_interior 1@s access 0
    
    if
    $CHEAT_TYPE_FLAG == 1    
    then   
    if
    0ADC:   test_cheat "TIMETOWOK"
        then           
        $CHEAT_CODE_ACTIVATED = 1 
        break  
        end
    end
    
    until 32@ >= 720000
    
    marker.Disable(0@)
    07FB: set_interior 1@s access 1
    
    if
    9@ < 50
    then
    $WEAPON_MAX_AM[9@] = marker.CreateIconWithoutSphere(6@,3@,4@,5@)
    else
    9@ += 49
    $PACKAGE_PICKED_UP_FLAG[9@] = marker.CreateIconWithoutSphere(6@,3@,4@,5@)
    9@ -= 49
    end
    
    jump to @FUNNY_BUNNY_CHERTY_EBANNY
    
    end_thread
    end

end

end_thread

:FUNNY_BUNNY_EBANNY4

repeat
wait 1000
until SURVIVAL_STARTED_FULLY_FLAG == 1

repeat
wait 5000
until 0EEA: locate_char_distance_to_coordinates PLAYER_ACTOR pos 3@ 4@ 5@ radius 10.0

if
9@ < 50
then
marker.Disable($WEAPON_MAX_AM[9@])
else
9@ += 49
marker.Disable($PACKAGE_PICKED_UP_FLAG[9@])
end
    
end_thread

:CHECK_FOR_AUTOLOOT_CUSTOM_MARK_WATCH

if or
0A2A:   text_box 'GME1539' displayed
0A2A:   text_box 'GME1540' displayed
0A2A:   text_box 'GME1542' displayed
    then        
        
    random_int 0@ 0 4
    gosub @INT_OFF_KARMA_CHECK_CUSTOM_MARK_WATCH
    :SIMULATE_AUTOLOOT_AT_START_CUSTOM_MARK_WATCH
    if
    not 0@ == 2    
    then
    return
    end       
    
    31@ = 1        
        
    end

return

:INT_OFF_KARMA_CHECK_CUSTOM_MARK_WATCH

if and
KARMA_SYS_ON_FLAG == 1
CARMA_BAD_POINTS > 0
CARMA_VERY_BAD_FLAG == 0
    then    
    if
    0E4D: random_percent CARMA_BAD_POINTS
        then
        0@ = 2
        end    
    end
    
if and
KARMA_SYS_ON_FLAG == 1
CARMA_GOOD_POINTS > 0
CARMA_VERY_BAD_FLAG == 0
    then    
    if
    0E4D: random_percent CARMA_GOOD_POINTS
        then
        0@ = 0
        end    
    end    

return