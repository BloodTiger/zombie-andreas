//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGERS_SETTINGS    
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE469'
08D4: $PANEL = create_panel_with_title 'SE431' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1

if
8A4B: not  controls_set_to_joystick
then 
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE432' 'SE433' 'SE434' 'SE435' 'SE436' 'SE437' 'SE454' 'SE455' 'SE517' 'SE535' 'SE536' 'DUMMY' //'SE600'
else
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE432' 'SE433' 'SE434' 'SE435' 'SE436' 'SE437' 'SE454' 'SE455' 'SE517' 'SE535' 'SE536' 'DUMMY' //'SE600'
end

//08D9: set_panel $PANEL row 11 enable 0
 
wait 100   

:TRIGGERS_SETTINGS_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @TRIGGERS_SETTINGS_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @ZAME_MAIN_MENU  

:TRIGGERS_SETTINGS_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @TRIGGERS_SETTINGS_CLOSE_CHECK

08D7: ZAME_TEMP_TRIGGER_TYPE = panel $PANEL active_row 
ZAME_TEMP_TRIGGER_TYPE += 1
ZAME_TEMP_TRIGGER_ZONE_TYPE = 0
08DA: remove_panel $PANEL 
Text.RemoveTextBox

if
8A4B: not  controls_set_to_joystick
then
0871: init_jump_table ZAME_TEMP_TRIGGER_TYPE total_jumps 13 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @ZAME_OPEN_CHECK 1 @ZAME_TIGGER_3D_SOUND 2 @ZAME_TIGGER_FAIL_TIMER 3 @ZAME_TIGGER_LADDER 4 @ZAME_TRIGGER_TEXT 5 @ZAME_TRIGGER_DAMAGEZONE 6 @ZAME_TRIGGER_TXDZAPISKA 
0872: jump_table_jumps 7 @ZAME_TRIGGER_EXPLOSION 8 @ZAME_TRIGGER_FIRE 9 @ZAME_TRIGGER_GAMEZONE 10 @ZAME_TRIGGER_DUMMYPED 11 @ZAME_TRIGGER_DUMMYCAR 12 @ZAME_POSTFX_SELECT 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
else
0871: init_jump_table ZAME_TEMP_TRIGGER_TYPE total_jumps 13 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @ZAME_OPEN_CHECK 1 @ZAME_OPEN_CHECK 2 @ZAME_OPEN_CHECK 3 @ZAME_OPEN_CHECK 4 @ZAME_OPEN_CHECK 5 @ZAME_OPEN_CHECK 6 @ZAME_OPEN_CHECK 
0872: jump_table_jumps 7 @ZAME_OPEN_CHECK 8 @ZAME_OPEN_CHECK 9 @ZAME_OPEN_CHECK 10 @ZAME_OPEN_CHECK 11 @ZAME_OPEN_CHECK 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_TRIGGER_SET_PARAMS

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT

if or
ZAME_TEMP_TRIGGER_TYPE == 10
ZAME_TEMP_TRIGGER_TYPE == 11
then
jump to @ZAME_TRIGGER_SETTINGS_END_JUMP
end

if
not ZAME_TEMP_TRIGGER_ZONE_TYPE == -69
then
                          
///////////////Выбор типа активации триггера///////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0

text.ShowH('SE439A',10,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then    
    ZAME_TEMP_TRIGGER_ZONE_TYPE = 1
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_ZONE"
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    ZAME_TEMP_TRIGGER_ZONE_TYPE = 0
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_ZONE"
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    ZAME_TEMP_FUCKEEE45 = 1
    return
    end    
    
end

end

///////////////Выбор единоразовости триггера///////////////////

gosub @TRIGGER_TIME_TO_REPEAT_SELECT
if
ZAME_TEMP_FUCKEEE45 == 2
then
text.ClearAll()
ZAME_TEMP_FUCKEEE45 = 1
return
end

if
not ZAME_TEMP_TRIGGER_ZONE_TYPE == -69
then

text.ClearAll()
text.RemoveTextBox()

while true
wait 0

text.ShowH('SE452',10,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_ONCE"
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_ONCE"    
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    ZAME_TEMP_FUCKEEE45 = 1
    return
    end    
    
end

end

if
not ZAME_TEMP_TRIGGER_ZONE_TYPE == -69
then

if
ZAME_TEMP_TRIGGER_ZONE_TYPE == 1
then

///////////////Выбор позиции сферы///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE443'

while true
wait 0

if
8A2A: not  text_box 'SE443' displayed
then
0512: show_permanent_text_box 'SE443'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    actor.StorePos(PLAYER_ACTOR,0@,1@,2@)
    0AF3: write_float 0@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_X"
    0AF3: write_float 1@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_Y"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_Z"    
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    gosub @TRIGGER_SPHERE_RADIUS_SELECT
    if
    ZAME_TEMP_FUCKEEE45 == 2
    then
    text.ClearAll()
    ZAME_TEMP_FUCKEEE45 = 1
    return
    end 
       
    0AF2: get_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_RADIUS"
    ZAME_OBJECT_HANLDE = Object.Init(ZAME_TRIGGER_SPHERE_OBJECT_ID, 0@, 1@, 2@)    
    008A: ZAME_TEMP_OBJ_VAR1 = ZAME_OBJECT_HANLDE // (int)
    0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
    08D2: object ZAME_OBJECT_HANLDE scale_model 4@
    0D11: set_object ZAME_OBJECT_HANLDE alpha 50 // IF and SET
    jump to @ZAME_TRIGGER_SETTINGS_END_JUMP
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    ZAME_TEMP_FUCKEEE45 = 1
    return
    end
    
end    
    
else

///////////////Выбор левой нижней позиции куба///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE441'

while true
wait 0

if
8A2A: not  text_box 'SE441' displayed
then
0512: show_permanent_text_box 'SE441'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_X1"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_Y1"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_Z1"
    ZAME_OBJECT_HANLDE = Object.Init(ZAME_TRIGGER_CUBE_EDGE_OBJECT_ID, 2@, 3@, 4@)
    008A: ZAME_TEMP_OBJ_VAR1 = ZAME_OBJECT_HANLDE // (int)
    0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    ZAME_TEMP_FUCKEEE45 = 1
    return
    end
    
end                        

///////////////Выбор правой верхней позиции куба///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE442'

while true
wait 0

if
8A2A: not  text_box 'SE442' displayed
then
0512: show_permanent_text_box 'SE442'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    actor.StorePos(PLAYER_ACTOR,6@,7@,8@)
    
    if
    0045:   8@ == 4@  // (float)
    then      
    8@ += 0.25
    4@ -= 0.25
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_Z1"
    end
    
    0AF3: write_float 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_X2"
    0AF3: write_float 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_Y2"
    0AF3: write_float 8@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CUBE_Z2"
    ZAME_OBJECT_HANLDE = Object.Init(ZAME_TRIGGER_CUBE_EDGE_OBJECT_ID, 6@, 7@, 8@)
    008A: ZAME_TEMP_OBJ_VAR2 = ZAME_OBJECT_HANLDE // (int)
    0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    
    if
    80A4: not  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2@ 3@ 4@ cornerB 6@ 7@ 8@
    then
    
    ///////////////Подтверждение корректности зоны куба///////////////////
    
    text.ClearAll()
    text.RemoveTextBox()
    player.CanMove(PLAYER_CHAR,true)
    
    0512: show_permanent_text_box 'SE478'
    
    while 80A4: not  actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2@ 3@ 4@ cornerB 6@ 7@ 8@
    wait 0
    
    if
    8A2A: not  text_box 'SE478' displayed
    then
    0512: show_permanent_text_box 'SE478'
    end
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        ZAME_TEMP_FUCKEEE45 = 1
        return
        end
        
    end
    
    end
    
    gosub @CUBE_CREATE_GRANI
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    ZAME_TEMP_FUCKEEE45 = 1
    return
    end
    
end
                            
//////////////////////////

end

end

:ZAME_TRIGGER_SETTINGS_END_JUMP

if
not ZAME_TEMP_TRIGGER_ZONE_TYPE == -69
then

gosub @TRIGGER_ACTIVATE_FROM_TARGET_NUM_SELECT
if
ZAME_TEMP_FUCKEEE45 == 2
then
text.ClearAll()
ZAME_TEMP_FUCKEEE45 = 1
return
end

gosub @TRIGGER_DEACTIVATE_FROM_TARGET_NUM_SELECT
if
ZAME_TEMP_FUCKEEE45 == 2
then
text.ClearAll()
ZAME_TEMP_FUCKEEE45 = 1
return
end

else                                    
0AF1: write_int -9999 to_ini_file "me\temp.dat" section v$RACE_FILE key "ACTIVATE_FROM_OBJ"
0AF1: write_int 9999 to_ini_file "me\temp.dat" section v$RACE_FILE key "DEACTIVATE_FROM_OBJ"
end

return

:TRIGGER_TIME_TO_REPEAT_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE446'

while true
wait 0  

if
8A2A: not  text_box 'SE446' displayed
    then
    0512: show_permanent_text_box 'SE446'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE451" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE451" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS     
    ZAME_TEMP_FUCKEEE45 = 2
    return    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "UNTIL_REPEAT_WAIT_TIME"    
    return
    
    end

end

:TRIGGER_SPHERE_RADIUS_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE438'

while true
wait 0

if
8A2A: not  text_box 'SE438' displayed
    then
    0512: show_permanent_text_box 'SE438'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE444" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE444" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS     
    ZAME_TEMP_FUCKEEE45 = 2
    return   
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_RADIUS"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_ACTIVATE_FROM_TARGET_NUM_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE448'

while true
wait 0

if
8A2A: not  text_box 'SE440' displayed
    then
    0512: show_permanent_text_box 'SE440'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE448" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE448" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS     
    ZAME_TEMP_FUCKEEE45 = 2
    return   
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "0"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ACTIVATE_FROM_OBJ"    
    return
    
    end

end

:TRIGGER_DEACTIVATE_FROM_TARGET_NUM_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE440B'

while true
wait 0

if
8A2A: not  text_box 'SE440B' displayed
    then
    0512: show_permanent_text_box 'SE440B'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE449" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE449" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS     
    ZAME_TEMP_FUCKEEE45 = 2
    return    
    end

if 
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "99999"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "DEACTIVATE_FROM_OBJ"    
    return
    
    end

end

:AUDIO_GAIN_LEVEL_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE450B'

while true
wait 0

if
8A2A: not  text_box 'SE450B' displayed
    then
    0512: show_permanent_text_box 'SE450B'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE450" string "F_NAME" time 99999999 1 
0089: 0@ = $SOUNDS_VOLUME // (float)
0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "GAIN_LEVEL" 
0AF2: 1@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "GAIN_LEVEL" 
1@ /= 100.0
005B: 0@ += 1@  // (float)
audiostream.Volume(ZAME_TEMP_FUCKEEE45) = 0@
else
0384: show_text_1string GXT "SE450" string v$NAME3 time 99999999 1
Audiostream.Volume(ZAME_TEMP_FUCKEEE45) = $SOUNDS_VOLUME
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS     
    ZAME_TEMP_FUCKEEE45 = 2
    return   
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "GAIN_LEVEL"    
    return
    
    end

end

:ZAME_TIGGER_3D_SOUND

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT
ZAME_TEMP_TRIGGER_ZONE_TYPE = 0

///////////////Безусловное воспроизведение на точке или при входе в зону///////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0

text.ShowH('SE445',10,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then    
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "PLAY_ALWAYS"
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "PLAY_ALWAYS"
    ZAME_TEMP_TRIGGER_ZONE_TYPE = -69
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
    
end

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 1
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE230'

while true
wait 0

if
8A2A: not  text_box 'SE230' displayed
then
0512: show_permanent_text_box 'SE230'
end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE200" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE200" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS     
    jump @TRIGGERS_SETTINGS    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    0AD3: v$NOTES_FILE = format "me\%d\%s" ZAME_MISSION_LOAD_NUMBER v$SNAME3
    if
    0AAB:   file_exists v$NOTES_FILE
        then                  
    
        text.ClearAll()
        text.RemoveTextBox()
        
        0@ = 0
        $OTKZ_NGRDA_FLG = 0
        
        create_thread @ZAM_MUS
        
        while true
        wait 0
        text.ShowH('SE240',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0@ = 1        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 15
            then
            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
            text.ClearAll()
            jump to @TRIGGERS_SETTINGS
            end    
            
        end
        
        repeat    
        wait 0
        $OTKZ_NGRDA_FLG = 1        
        0AAA: 1@ = thread 'ZAM_MUS' pointer
        until 1@ == 0
        
        if
        0@ == 0
        then
        jump to @DO_FUCKING_AUDNAME_SETTING_AGAIN
        end
        
        0AF5: write_string v$NOTES_FILE to_ini_file "me\temp.dat" section v$RACE_FILE key "AUD_NAME"
        ZAME_TEMP_FUCKEEE45 = Audiostream.Load(v$NOTES_FILE)
        Audiostream.Volume(ZAME_TEMP_FUCKEEE45) = $SOUNDS_VOLUME 
        Audiostream.Loop(ZAME_TEMP_FUCKEEE45, 1)
        Audiostream.PerformAction(ZAME_TEMP_FUCKEEE45, PLAY)
        
        :DO_FUCKING_GAIN_SETTING_AGAIN
        gosub @AUDIO_GAIN_LEVEL_SELECT
        if
        ZAME_TEMP_FUCKEEE45 == 2
        then
        text.ClearAll()
        ZAME_TEMP_FUCKEEE45 = 1
        return
        end
        
        0@ = 0
        
        while true
        wait 0
        text.ShowH('SE450C',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0@ = 1        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 15
            then
            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
            text.ClearAll()
            jump to @TRIGGERS_SETTINGS
            end    
            
        end    
        
        if
        0@ == 0
        then
        jump to @DO_FUCKING_GAIN_SETTING_AGAIN
        end   
        
        audiostream.Release(ZAME_TEMP_FUCKEEE45)         
            
        //////////////////////////
        
        if
        0@ == 1
            then
            
            ///////////////Зациклить ли звук///////////////////

            text.ClearAll()
            text.RemoveTextBox()
            
            while true
            wait 0
            
            text.ShowH('SE447',10,1)
                
            if
            0E3E: is_button_just_pressed 0 button 11
                then    
                0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_LOOP"
                text.ClearAll()
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_LOOP"
                text.ClearAll()
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 15
                then
                gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                text.ClearAll()
                jump to @TRIGGERS_SETTINGS
                end    
                
            end    
        
            0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT            
            
            0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
            0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"                                    
            
            ///////////////Выбор позиции для звука///////////////////

            text.ClearAll()
            text.RemoveTextBox()
            player.CanMove(PLAYER_CHAR,true)
            
            0512: show_permanent_text_box 'SE460'
            
            while true
            wait 0
            
            if
            8A2A: not  text_box 'SE460' displayed
            then
            0512: show_permanent_text_box 'SE460'
            end
                
            if
            0E3E: is_button_just_pressed 0 button 15
                then
                player.CanMove(PLAYER_CHAR,false)
                text.ClearAll()
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 11
                then
                gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                text.ClearAll()
                jump to @TRIGGERS_SETTINGS
                end
                
            end    
                
            Player.CanMove(PLAYER_CHAR) = true
            actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
            0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_X"
            0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_Y"
            0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_Z"
            
            if
            ZAME_TEMP_TRIGGER_ZONE_TYPE == -69
            then
            0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_ONCE"
            0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_ZONE"      
            0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_X"
            0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_Y"
            0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SOUND_Z"
            0AF3: write_float -1.0 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPHERE_RADIUS"                  
            end
            
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
            gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP                        
            
            0@ = 0
            0@ = Marker.CreateIconAndSphere2(ZAME_3DAUDIO_TRIGGER_ICON_ID, 2@,3@,4@)
            1@ = Object.Init(ZAME_3DAUDIO_OBJECT_ID, 2@, 3@, 4@)
            0566: link_object 1@ to_interior $ACTIVE_INTERIOR
            0581: enable_radar 1 
            03E6: remove_text_box
            
            0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
            gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION            
            ZAME_TRIGGERS_COUNT += 1            
            
            wait 100
            
            if
            ZAME_RECREATE_TRIGGER_FLAG == 0
            then
            00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
            gosub @zame_created_trigger_sound
            else
            00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
            gosub @zame_recreated_trigger_sound
            gosub @MISSION_SAVE_INITIALIZATION
            end
            
            ZAME_NAME_AUD_TYPING_FLAG = 0            
             
            jump @TRIGGERS_SETTINGS
            
            else
            :DO_FUCKING_AUDNAME_SETTING_AGAIN
            0512: show_permanent_text_box 'SE230'
            end        
        else
        text.ShowH('SE235',1000,1)
        wait 1000
        0512: show_permanent_text_box 'SE230'
        end
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_TIGGER_FAIL_TIMER

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

0581: enable_radar 1 
0512: show_permanent_text_box 'se82' 
5@ = 1
wait 100 

:ZAME_TIGGER_FAIL_TIMER_27238
wait 0 
01E5: show_text_1number_highpriority GXT 'se78' number 5@ time 300 flag 1 
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up 
jf @ZAME_TIGGER_FAIL_TIMER_27519 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down 
jf @ZAME_TIGGER_FAIL_TIMER_27555 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_TIGGER_FAIL_TIMER_27482
 
0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TIMER_SECONDS"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"

0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION             
ZAME_TRIGGERS_COUNT += 1 
                         
gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
0@ = 0
0@ = marker.CreateIconAndSphere2(ZAME_FAILTIMER_TRIGGER_ICON_ID, 2@,3@,4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_FAILTIMER_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

jump @TARGETS_SETTINGS 

:ZAME_TIGGER_FAIL_TIMER_27482
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_TIGGER_FAIL_TIMER_27238 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS 

:ZAME_TIGGER_FAIL_TIMER_27519

if
80E1:   not player 0 pressed_key 14
then 
5@ += 1
else
5@ += 10
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @ZAME_TIGGER_FAIL_TIMER_27238 

:ZAME_TIGGER_FAIL_TIMER_27555

if
80E1:   not player 0 pressed_key 14
then 
5@ -= 1
else
5@ -= 10
end
 
if 
5@ < 1 
then
5@ = 1
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @ZAME_TIGGER_FAIL_TIMER_27238 

:ZAME_TIGGER_LADDER

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT

///////////////Выбор позиции входа для телепорта///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE461'

while true
wait 0

if
8A2A: not  text_box 'SE461' displayed
then
0512: show_permanent_text_box 'SE461'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    actor.StorePos(PLAYER_ACTOR,0@,1@,2@)
    3@ = actor.Angle(PLAYER_ACTOR)
    0AF3: write_float 0@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_X1"
    0AF3: write_float 1@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_Y1"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_Z1"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_A1"
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
end                        

///////////////Выбор позиции выхода для телепорта///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE462'

while true
wait 0

if
8A2A: not  text_box 'SE462' displayed
then
0512: show_permanent_text_box 'SE462'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    actor.StorePos(PLAYER_ACTOR,0@,1@,2@)
    3@ = actor.Angle(PLAYER_ACTOR)
    0AF3: write_float 0@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_X2"
    0AF3: write_float 1@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_Y2"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_Z2"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_A2"
    0AF3: write_float 0@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
    0AF3: write_float 1@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
end
                            
//////////////////////////

gosub @TRIGGER_ACTIVATE_FROM_TARGET_NUM_SELECT
if
ZAME_TEMP_FUCKEEE45 == 2
then
gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
text.ClearAll()
jump to @TRIGGERS_SETTINGS
end

gosub @TRIGGER_DEACTIVATE_FROM_TARGET_NUM_SELECT
if
ZAME_TEMP_FUCKEEE45 == 2
then
gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
text.ClearAll()
jump to @TRIGGERS_SETTINGS
end

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT            
            
0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"  

0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP                        

0AF2: get_float 0@ from_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_X1"
0AF2: get_float 1@ from_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_Y1"
0AF2: get_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "LADDER_Z1"            
5@ = 0
5@ = Marker.CreateIconAndSphere2(ZAME_LADDER_TRIGGER_ICON_ID,0@,1@,2@)
5@ = Object.Init(ZAME_LADDER_OBJECT_ID, 0@,1@,2@)
0566: link_object 5@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION
ZAME_TRIGGERS_COUNT += 1

wait 100

if
ZAME_RECREATE_TRIGGER_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

ZAME_NAME_AUD_TYPING_FLAG = 0
 
jump @TRIGGERS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_TRIGGER_TEXT

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

if
0A4B:   controls_set_to_joystick
then
0512: show_permanent_text_box 'SE80B'
ACTIVATE_KBRD_PANEL = 1
KBRD_PANEL_CHRTC = 1
CAPSLOCK_ON_FLAG = 1
$PANEL_OPEN2 = 1
else
0512: show_permanent_text_box 'SE80'
end

while true
wait 0

if
8A2A: not  text_box 'SE80' displayed
then
0512: show_permanent_text_box 'SE80'
end

015D: set_gamespeed 1.0
CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "GAME898" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "GAME898" string v$NAME3 time 99999999 1
end

if
0A4B:   controls_set_to_joystick
then
if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    jump to @FXT_VVOD_EXIT_JOY_JUMP2
    end
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    :FXT_VVOD_EXIT_JOY_JUMP2
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    0581: enable_radar 1 
    03E6: remove_text_box
    
    if
    ACTIVATE_KBRD_PANEL == 1
    then
    ACTIVATE_KBRD_PANEL = 0
    $PANEL_OPEN2 = 0
    end
    
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
if
8846: not  string v$SNAME3 empty // v$
    then
    09FD: get_gxt_string v$SNAME3 width_to 0@  // ~k~~PED_SPRINT~ Select
    if and
    0@ > 0
    0@ <= 2670
        then
        
        03F0: enable_text_draw 1 
        03E0: draw_text_behind_textures 1
        03E3: set_texture_to_be_drawn_antialiased 1 
        0342: set_text_draw_centered 1
        0344: set_text_draw_linewidth 640.0 for_centered_text
        033F: set_text_draw_letter_size 0.2 1.1 
        081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
        0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
            
        if
        UNITED_MAP == 1
        then    
        0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
        end
        
        033E: set_draw_text_position 320.0 15.0 GXT v$SNAME3  // Push
        else
        if
        0@ >= 2670
            then
                        
            03F0: enable_text_draw 1 
            03E0: draw_text_behind_textures 1
            03E3: set_texture_to_be_drawn_antialiased 1 
            0342: set_text_draw_centered 1
            0344: set_text_draw_linewidth 300.0 for_centered_text
            033F: set_text_draw_letter_size 0.2 1.1 
            081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
            0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
                
            if
            UNITED_MAP == 1
            then    
            0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
            end
            
            033E: set_draw_text_position 320.0 15.0 GXT 'SE665'  // Push
            
            end
        end
    end    

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    09FD: get_gxt_string v$SNAME3 width_to 0@  // ~k~~PED_SPRINT~ Select
    if and
    0@ > 0
    0@ <= 2670
        then
        
        if
        ACTIVATE_KBRD_PANEL == 1
        then
        ACTIVATE_KBRD_PANEL = 0
        $PANEL_OPEN2 = 0
        end    
        
        0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
        Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"                
        
        //////////////////////////////

        text.ClearAll()
        text.RemoveTextBox()
                
        while true
        wait 0
        text.ShowH('SE282',100,1)
                    
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()                    
            break
            end
                    
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SHOW_AS_TEXTBOX"
            text.ClearAll()        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 15
            then
            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
            text.ClearAll()
            jump to @TRIGGERS_SETTINGS
            end    
                    
        end                                    
        
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FXT_ID"    
        Player.CanMove(PLAYER_CHAR) = true        
        gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
        0@ = 0
        0@ = Marker.CreateIconAndSphere2(ZAME_TEXT_TRIGGER_ICON_ID, 2@,3@,4@)
        1@ = Object.Init(ZAME_TEXT_OBJECT_ID, 2@, 3@, 4@)
        0566: link_object 1@ to_interior $ACTIVE_INTERIOR
        0581: enable_radar 1 
        03E6: remove_text_box
        
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
        gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP
        
        0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
        gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION             
        ZAME_TRIGGERS_COUNT += 1
        
        wait 100
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
        gosub @zame_created_trigger_sound
        else
        00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
        gosub @zame_recreated_trigger_sound
        gosub @MISSION_SAVE_INITIALIZATION
        end
                
        jump @TRIGGERS_SETTINGS
        
        else
        text.ShowH('SE236',1000,1)
        wait 1000
        0512: show_permanent_text_box 'SE80'        
        end
        
        end

end

:ZAME_TRIGGER_DAMAGEZONE

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE453'

while true
wait 0

if
8A2A: not  text_box 'SE453' displayed
then
0512: show_permanent_text_box 'SE453'
end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE456" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE456" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS                
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS  
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    
    0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
    Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"  
        
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "DAMAGE_COUNT"        
    
    text.RemoveTextBox()
    text.ClearAll()            
            
    gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
    0@ = 0
    0@ = Marker.CreateIconAndSphere2(ZAME_DAMAGEZONE_TRIGGER_ICON_ID, 2@,3@,4@)
    1@ = Object.Init(ZAME_DAMAGEZONE_OBJECT_ID, 2@, 3@, 4@)
    0566: link_object 1@ to_interior $ACTIVE_INTERIOR
    0581: enable_radar 1 
    03E6: remove_text_box
    Player.CanMove(PLAYER_CHAR) = true
        
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
    gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP
    
    0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
    gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION            
    ZAME_TRIGGERS_COUNT += 1
        
    wait 100
        
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
    gosub @zame_created_trigger_sound
    else
    00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
    gosub @zame_recreated_trigger_sound
    gosub @MISSION_SAVE_INITIALIZATION
    end
        
    ZAME_NAME_AUD_TYPING_FLAG = 0    
         
    jump @TRIGGERS_SETTINGS       
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_TRIGGER_TXDZAPISKA

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

///////////////В стиле записки, которую нужно подобрать?///////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0

text.ShowH('SE464',10,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "ZAPISKA_STYLE"
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "ZAPISKA_STYLE"
    text.ClearAll()      
    jump to @SKIP_ZAPISKA_COORD
    end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
    
end    

///////////////Выбор позиции для записки///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE463'

while true
wait 0

if
8A2A: not  text_box 'SE463' displayed
then
0512: show_permanent_text_box 'SE463'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
end    

:SKIP_ZAPISKA_COORD
    
Player.CanMove(PLAYER_CHAR) = true
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ZAPISKA_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ZAPISKA_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ZAPISKA_Z"

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE246'

while true
wait 0

if
8A2A: not  text_box 'SE246' displayed
then
0512: show_permanent_text_box 'SE246'
end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE247" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE247" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS                
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()    
        
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0    
    gosub @ZAME_OBJC_PICTURES_CHECK        
    wait 5
    if
    ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
        then            
        
        0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT
        
        0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "TEXTURE_NAME"  
        Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"                   
        
        text.RemoveTextBox()
        text.ClearAll()                            
                                               
        gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
        0@ = 0
        0@ = Marker.CreateIconAndSphere2(ZAME_ZAPISKA_TRIGGER_ICON_ID, 2@,3@,4@)
        1@ = Object.Init(ZAME_ZAPISKA_OBJECT_ID, 2@, 3@, 4@)
        0566: link_object 1@ to_interior $ACTIVE_INTERIOR
        0581: enable_radar 1 
        03E6: remove_text_box
        Player.CanMove(PLAYER_CHAR) = true
        
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
        gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP
        
        0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
        gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION            
        ZAME_TRIGGERS_COUNT += 1
        
        wait 100
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
        gosub @zame_created_trigger_sound
        else
        00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
        gosub @zame_recreated_trigger_sound
        gosub @MISSION_SAVE_INITIALIZATION
        end
        
        ZAME_NAME_AUD_TYPING_FLAG = 0        
         
        jump @TRIGGERS_SETTINGS
        
        else
        text.ShowH('SE238',1000,1)
        wait 1000
        end
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_TRIGGER_EXPLOSION

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end 

///////////////Выбор позиции для взрыва///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE465'

while true
wait 0

if
8A2A: not  text_box 'SE465' displayed
then
0512: show_permanent_text_box 'SE465'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
end    
    
Player.CanMove(PLAYER_CHAR) = true
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "EXPLOSION_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "EXPLOSION_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "EXPLOSION_Z"

:ZAME_TRIGGER_EXPLOSION_27207
0581: enable_radar 1 
0512: show_permanent_text_box 'SE224' 
5@ = 0
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
actor.SetImmunities(PLAYER_ACTOR,1,1,1,1,1)
wait 0
020C: create_explosion_with_radius 5@ at 2@ 3@ 4@
wait 100 

:ZAME_TRIGGER_EXPLOSION_27238
wait 0 

if
8A2A: not  text_box 'SE224' displayed
then
0512: show_permanent_text_box 'SE224'
end

01E5: show_text_1number_highpriority GXT 'SE225' number 5@ time 300 flag 1 
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up 
jf @ZAME_TRIGGER_EXPLOSION_27519 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down  
jf @ZAME_TRIGGER_EXPLOSION_27555 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_TRIGGER_EXPLOSION_27482 

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT
        
0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "EXPLOSION_TYPE"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"                   
        
text.RemoveTextBox()
text.ClearAll()                            
                                         
gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_EXPLOSION_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_EXPLOSION_TRIGGER_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true
        
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION            
ZAME_TRIGGERS_COUNT += 1

031A: remove_all_fires
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'se459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se459b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TRIGGERS_SETTINGS

:ZAME_TRIGGER_EXPLOSION_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @ZAME_TRIGGER_EXPLOSION_25435 
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:ZAME_TRIGGER_EXPLOSION_25435
return 

:ZAME_TRIGGER_EXPLOSION_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @ZAME_TRIGGER_EXPLOSION_25521 
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:ZAME_TRIGGER_EXPLOSION_25521
return

:ZAME_TRIGGER_EXPLOSION_27482
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_TRIGGER_EXPLOSION_27238
031A: remove_all_fires 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS2

:ZAME_TRIGGER_EXPLOSION_27519
5@ += 1

if
5@ < 13 
then
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
031A: remove_all_fires
020C: create_explosion_with_radius 5@ at 2@ 3@ 4@
else
wait 100
jump to @ZAME_TRIGGER_EXPLOSION_27609
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @ZAME_TRIGGER_EXPLOSION_27238 

:ZAME_TRIGGER_EXPLOSION_27555 
5@ -= 1

if
5@ > 0 
then 
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
031A: remove_all_fires
020C: create_explosion_with_radius 5@ at 2@ 3@ 4@
else
wait 100
jump to @ZAME_TRIGGER_EXPLOSIONb_27609
end

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end

jump @ZAME_TRIGGER_EXPLOSION_27238 

:ZAME_TRIGGER_EXPLOSION_27609
5@ = 0 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @ZAME_TRIGGER_EXPLOSION_27238

:ZAME_TRIGGER_EXPLOSIONb_27609
5@ = 12 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @ZAME_TRIGGER_EXPLOSION_27238

:ZAME_TRIGGER_FIRE

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

///////////////Выбор позиции для огня///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,true)

0512: show_permanent_text_box 'SE466'

while true
wait 0

if
8A2A: not  text_box 'SE466' displayed
then
0512: show_permanent_text_box 'SE466'
end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    player.CanMove(PLAYER_CHAR,false)
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
end    

///////////////Cмepтeльнo oпaceн?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE573',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DEADLY"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end
    
Player.CanMove(PLAYER_CHAR) = true
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "FIRE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "FIRE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "FIRE_Z"

gosub @TRIGGER_FIRE_SIZE_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end

gosub @TRIGGER_FIRE_PROPAGATION_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT
        
0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"                   
        
text.RemoveTextBox()
text.ClearAll()                            
                                       
gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_FIRE_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_FIRE_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true
        
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT" 
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION           
ZAME_TRIGGERS_COUNT += 1

031A: remove_all_fires
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'se459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se459b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TRIGGERS_SETTINGS

:TRIGGER_FIRE_SIZE_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE457'

while true
wait 0

if
8A2A: not  text_box 'SE457' displayed
    then
    0512: show_permanent_text_box 'SE457'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE467" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE467" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FIRE_SIZE"    
    return
    
    end

end

:TRIGGER_FIRE_PROPAGATION_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE457B'

while true
wait 0

if
8A2A: not  text_box 'SE457B' displayed
    then
    0512: show_permanent_text_box 'SE457B'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE468" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE468" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FIRE_PROPOGATION"    
    return
    
    end

end

:ZAME_TRIGGER_GAMEZONE

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end

text.RemoveTextBox()
text.ClearAll()

0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"  

text.RemoveTextBox()
text.ClearAll()

gosub @CALCULATE_CENTER_OF_CUBE_ZONE2
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_GAMEZONE_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_GAMEZONE_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true

0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION
ZAME_TRIGGERS_COUNT += 1

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

ZAME_NAME_AUD_TYPING_FLAG = 0
 
jump @TRIGGERS_SETTINGS   

:ZAME_TRIGGER_DUMMYPED

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end 

ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM = 7
jump to @ZAME_MENU_PLAYER_SETTINGS_18973

:ZAME_TRIGGER_DUMMYPED_RETURNED

text.RemoveTextBox()
text.ClearAll()

0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT

0AF1: write_int 0@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_MODEL"
0AF1: write_int 270@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_WEP_ID"

0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
Actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
5@ = Actor.Angle(PLAYER_ACTOR)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_Z"
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_A"

///////////////Имя переменной педа.///////////////////
gosub @TRIGGER_DUMMYPED_IDNAME_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
then
ZAME_NAME_AUD_TYPING_FLAG = 0
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
text.ClearAll()
jump to @TRIGGERS_SETTINGS
end    

///////////////Педтайп педа.///////////////////

text.ClearAll()
text.RemoveTextBox()
player.CanMove(PLAYER_CHAR,false)

0512: show_permanent_text_box 'SE584'

while true
wait 0

if
8A2A: not  text_box 'SE584' displayed
then
0512: show_permanent_text_box 'SE584'
end
    
if
0E3D: is_key_just_pressed 49
    then 
    0AF1: write_int 26 to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_PEDTYPE"   
    break
    end
    
if
0E3D: is_key_just_pressed 50
    then 
    0AF1: write_int 25 to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_PEDTYPE"   
    break
    end
    
if
0E3D: is_key_just_pressed 51
    then 
    0AF1: write_int 29 to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_PEDTYPE"   
    break
    end
    
if
0E3D: is_key_just_pressed 52
    then 
    0AF1: write_int 27 to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_PEDTYPE"   
    break
    end            
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
end

///////////////Неуязвимость?///////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0

text.ShowH('SE538',10,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "PARAM4"
    text.ClearAll()
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    
    gosub @TRIGGER_DUMMYPED_HP_SELECT
    if
    ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
    
    ///////////////Отсутствие анимаций урона?///////////////////

    text.ClearAll()
    text.RemoveTextBox()
                
    while true
    wait 0
                
    text.ShowH('SE538B',10,1)
                    
    if
    0E3E: is_button_just_pressed 0 button 11
        then    
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_DAMAGE_ANIMS"        
        text.ClearAll()
        break
        end
                    
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        
        ///////////////Отсутствие стана от попадания тяжелого оружия?///////////////////

        text.ClearAll()
        text.RemoveTextBox()
            
        while true
        wait 0
            
        text.ShowH('SE538C',10,1)
                
        if
        0E3E: is_button_just_pressed 0 button 11
            then    
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "CANT_STUN_BY_WEPS"
            text.ClearAll()
            break
            end
                
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()
            break
            end
                
        if
        0E3E: is_button_just_pressed 0 button 15
            then
            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
            text.ClearAll()
            jump to @TRIGGERS_SETTINGS
            end    
                
        end
        
        text.ClearAll()
        break
        end
                    
    if
    0E3E: is_button_just_pressed 0 button 15
        then
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        jump to @TRIGGERS_SETTINGS
        end    
                    
    end
    
    ///////////////Провал при смерти педа?///////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    while true
    wait 0
    
    text.ShowH('SE541',10,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then    
        0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "PARAM4"
        text.ClearAll()
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()
        
        ///////////////Провал при убийстве игроком?///////////////////

        text.ClearAll()
        text.RemoveTextBox()
        
        while true
        wait 0
        
        text.ShowH('SE540',10,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then    
            0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "PARAM4"
            text.ClearAll()
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()
            
            ///////////////Провал при попадании игроком педу на глаза?///////////////////

            text.ClearAll()
            text.RemoveTextBox()
            
            while true
            wait 0
            
            text.ShowH('SE541B',10,1)
                
            if
            0E3E: is_button_just_pressed 0 button 11
                then    
                0AF1: write_int 4 to_ini_file "me\temp.dat" section v$RACE_FILE key "PARAM4"
                text.ClearAll()
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                text.ClearAll()
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 15
                then
                gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                text.ClearAll()
                jump to @TRIGGERS_SETTINGS
                end    
                
            end
            
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 15
            then
            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
            text.ClearAll()
            jump to @TRIGGERS_SETTINGS
            end    
            
        end
        
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 15
        then
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        jump to @TRIGGERS_SETTINGS
        end    
        
    end
    
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
    
end

ZAME_TEMP_FUCKEEE = 0
if
270@ < 16
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 106
270@ == 108
270@ == 110
270@ == 115
270@ == 118
270@ == 44
270@ == 45
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 121
270@ == 122
270@ == 123
270@ == 124
270@ == 125
270@ == 126
270@ == 127
270@ == 128
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 129
270@ == 130
270@ == 131
270@ == 132
270@ == 133
270@ == 134
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 154
270@ == 155
270@ == 156
270@ == 157
270@ == 158
270@ == 159
270@ == 160
270@ == 161
    then  
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 162
270@ == 163
270@ == 164
270@ == 92
270@ == 107
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 184
270@ == 185
270@ == 186
270@ == 187
270@ == 188
270@ == 189
270@ == 190
270@ == 191
    then  
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 192
270@ == 193
270@ == 194
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 175
270@ == 176
270@ == 183
270@ == 205
270@ == 206
270@ == 213
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 177
270@ == 178
270@ == 179
270@ == 207
270@ == 208
270@ == 209
    then
    ZAME_TEMP_FUCKEEE = 1
    end

//if
//ZAME_TEMP_FUCKEEE == 0
//then
gosub @TRIGGER_DUMMYPED_ACCURACY_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end

gosub @TRIGGER_DUMMYPED_FIRERATE_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end

//else
gosub @TRIGGER_DUMMYPED_MELEE_ACCURACY_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end

//end

///////////////Патрульный пед?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE582',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then    
    
    ///////////////Выбор позиции для патрулирования///////////////////

    5@ = 0

    text.ClearAll()
    text.RemoveTextBox()
    player.CanMove(PLAYER_CHAR,true)
    
    0512: show_permanent_text_box 'SE583'
    
    while true
    wait 0
    
    if
    8A2A: not  text_box 'SE583' displayed
    then
    0512: show_permanent_text_box 'SE583'
    end
        
    if
    0E3E: is_button_just_pressed 0 button 16
        then
        if
        5@ < 5
            then
            actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
            0@ = object.Init(2914,2@,3@,4@)
            object.SetImmunities(0@,1,1,1,1,1)
            object.Indestructibility(0@,true)
            0AD3: v$NOTES_FILE = format "PATROL_X%d" 5@                
            0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$NOTES_FILE
            0AD3: v$NOTES_FILE = format "PATROL_Y%d" 5@
            0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$NOTES_FILE
            0AD3: v$NOTES_FILE = format "PATROL_Z%d" 5@
            0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$NOTES_FILE
            5@ += 1
            0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PARTOL_POINTS_COUNT"
            else
            player.CanMove(PLAYER_CHAR,false)
            text.ClearAll()
            text.ShowH('SE583B',2000,1)
            wait 2000
            player.CanMove(PLAYER_CHAR,true)
            end
        end
        
    if and
    0E3E: is_button_just_pressed 0 button 11
    5@ > 0
        then
        text.ClearAll()
        break
        end    
        
    if
    0E3E: is_button_just_pressed 0 button 15
        then
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        jump to @TRIGGERS_SETTINGS
        end
        
    end    
    
    text.ClearAll()
    break
    end
                
if 
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Применять анимаци?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE545',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then    
    jump @TRIGGER_IFP_NAME_SELECT            
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Не сходит с места найдя цель атаки?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE585',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "MAINTAIN_POSITION"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Cпaвн в пpиcяди?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE644',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPAWN_CROUCHED"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Нe дpoпaeт opyжиe?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE645',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then  
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_DROP"                  
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then    
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Создать маркер над педом?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE647',10,1)

if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end 
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "CREATE_FRIENDLY_MARK"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 16
    then
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "CREATE_ENEMY_MARK"
    text.ClearAll()
    break
    end
                    
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

:DUMMY_PED_RETURN_FROM_ANIM_SELECT

    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    if
    0AE2: 0@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 5.0 find_next 0 pass_wrecked 0
        then                              
        
        0441: 2@ = car 0@ model
        if
        081F:  model 2@ plane
        then
        text.ClearAll()
        text.ShowH('SE666',2000,1)
        wait 2000
        jump to @ZAME_SKIP_DUMMYPED_IN_TRANSPORT
        end  
        
        ///////////////Засунуть в близжайший транспорт?///////////////////

        text.ClearAll()
        text.RemoveTextBox()
        018C: play_sound 1057 at 0.0 0.0 0.0
                    
        while true
        wait 0
                    
        text.ShowH('SE625',10,1)
                        
        if
        0E3E: is_button_just_pressed 0 button 11
            then 
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "PUT_IN_CLOSEST_VEHICLE"
            1@ = car.Model(0@)
            0AF1: write_int 1@ to_ini_file "me\temp.dat" section v$RACE_FILE key "VEHICLE_MODEL"               
            text.ClearAll()
            
            :DRIVER_OR_PASSENGER_ZAME_AGAIN
            
            ///////////////Водитель или пассажир?///////////////////

            text.ClearAll()
            text.RemoveTextBox()
                        
            while true
            wait 0
                        
            text.ShowH('SE626',10,1)
                            
            if
            0E3E: is_button_just_pressed 0 button 11
                then 
                
                046C: 1@ = car 0@ driver
                if
                056D:   actor 1@ defined
                then
                text.ClearAll()
                text.RemoveTextBox()
                text.ShowH('SE646',1000,1)
                jump to @DRIVER_OR_PASSENGER_ZAME_AGAIN
                end
                
                0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "PED_IS_DRIVER"             
                text.ClearAll()
                
                0441: 2@ = car 0@ model
                if or
                081F:  model 2@ plane
                0820:  model 2@ heli
                081E:  model 2@ boat
                then
                text.ClearAll()
                jump to @ZAME_SKIP_DUMMYPED_IN_TRANSPORT
                end  
                
                ///////////////Тип поведения водителя///////////////////

                text.ClearAll()
                text.RemoveTextBox()
                            
                while true
                wait 0
                            
                text.ShowH('SE627',10,1)
                                
                if
                0E3D: is_key_just_pressed 49
                    then 
                    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_MISSION"   
                    break
                    end
                    
                if
                0E3D: is_key_just_pressed 50
                    then 
                    0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_MISSION"  
                    
                    ///////////////Нaчинaeт гнaтьcя тoльko koгдa игpok pядoм?///////////////////

                    text.ClearAll()
                    text.RemoveTextBox()
                                
                    while true
                    wait 0
                                
                    text.ShowH('SE636',10,1)
                                    
                    if
                    0E3E: is_button_just_pressed 0 button 11
                        then                             
                                                
                        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHASE_AFTER_NEAR_COME"
                        gosub @TRIGGER_DUMMYCAR_NEARCOME_RADIUS_SELECT
                        if
                        ZAME_NAME_AUD_TYPING_FLAG == -669966
                        then
                        ZAME_NAME_AUD_TYPING_FLAG = 0
                        Player.CanMove(PLAYER_CHAR) = False
                        0581: enable_radar 0 
                        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                        text.ClearAll()
                        jump to @TRIGGERS_SETTINGS
                        end  
                        
                        ///////////////Мгнoвeнный paзгoн?///////////////////

                        text.ClearAll()
                        text.RemoveTextBox()
                                    
                        while true
                        wait 0
                                    
                        text.ShowH('SE641',10,1)
                                        
                        if
                        0E3E: is_button_just_pressed 0 button 11
                            then
                            text.ClearAll()                                 
                            gosub @TRIGGER_DUMMYCAR_INSTSPEED_SELECT
                            if
                            ZAME_NAME_AUD_TYPING_FLAG == -669966
                            then
                            ZAME_NAME_AUD_TYPING_FLAG = 0
                            Player.CanMove(PLAYER_CHAR) = False
                            0581: enable_radar 0 
                            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                            text.ClearAll()
                            jump to @TRIGGERS_SETTINGS
                            end
                                                                       
                            break
                            end
                                        
                        if
                        0E3E: is_button_just_pressed 0 button 10
                            then
                            text.ClearAll()
                            break
                            end
                                        
                        if
                        0E3E: is_button_just_pressed 0 button 15
                            then
                            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                            text.ClearAll()
                            jump to @TRIGGERS_SETTINGS
                            end    
                                        
                        end
                                     
                        text.ClearAll()
                        break
                        end
                                    
                    if
                    0E3E: is_button_just_pressed 0 button 10
                        then
                        text.ClearAll()
                        break
                        end
                                    
                    if
                    0E3E: is_button_just_pressed 0 button 15
                        then
                        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                        text.ClearAll()
                        jump to @TRIGGERS_SETTINGS
                        end    
                                    
                    end
                     
                    break
                    end
                    
                if
                0E3D: is_key_just_pressed 51
                    then 
                    
                    0581: enable_radar 1 
                    Player.CanMove(PLAYER_CHAR) = True
                    0512: show_permanent_text_box 'SE628' 
                    
                    repeat
                    wait 0  
                    
                    if
                    8A2A: not  text_box 'SE628' displayed
                    then
                    0512: show_permanent_text_box 'SE628'
                    end
                    
                    if
                    0E3E: is_button_just_pressed 0 button 15
                        then
                        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                        text.ClearAll()
                        jump to @TRIGGERS_SETTINGS
                    end 
                                        
                    until 00E1:   player 0 pressed_key 11
                    03E6: remove_text_box  
                    
                    Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
                    0AF3: write_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_GOTO_X"
                    0AF3: write_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_GOTO_Y"
                    0AF3: write_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_GOTO_Z"                    
                    0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_MISSION"   
                    break
                    end
                    
                if
                0E3D: is_key_just_pressed 52
                    then 
                    0AF1: write_int 4 to_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_MISSION"   
                    break
                    end  
                    
                if
                0E3D: is_key_just_pressed 53
                    then 
                    
                    0581: enable_radar 1 
                    Player.CanMove(PLAYER_CHAR) = True
                    0512: show_permanent_text_box 'SE629' 
                    
                    repeat
                    wait 0  
                    
                    if
                    8A2A: not  text_box 'SE629' displayed
                    then
                    0512: show_permanent_text_box 'SE629'
                    end
                    
                    if
                    0E3E: is_button_just_pressed 0 button 15
                        then
                        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                        text.ClearAll()
                        jump to @TRIGGERS_SETTINGS
                    end 
                    
                    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
                    if and
                    00E1:   player 0 pressed_key 11
                    0AE2: 0@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 10.0 find_next 0 pass_wrecked 0
                        then
                        car.StorePos(0@,2@,3@,4@)
                        1@ = car.Model(0@)
                        0AF3: write_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_FOLLOW_CAR_X"
                        0AF3: write_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_FOLLOW_CAR_Y"
                        0AF3: write_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_FOLLOW_CAR_Z"
                        0AF1: write_int 1@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_FOLLOW_CAR_MODEL"
                        break
                        end
                                        
                    until false
                    03E6: remove_text_box                      
                    
                    0AF1: write_int 5 to_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_MISSION"   
                    break
                    end         
                                
                if
                0E3E: is_button_just_pressed 0 button 15
                    then
                    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                    text.ClearAll()
                    jump to @TRIGGERS_SETTINGS
                    end    
                                
                end
                
                break
                end
                            
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "PED_IS_PASSENGER"
                text.ClearAll()
                break
                end
                            
            if
            0E3E: is_button_just_pressed 0 button 15
                then
                gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
                text.ClearAll()
                jump to @TRIGGERS_SETTINGS
                end    
                            
            end
            
            break
            end
                        
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()
            break
            end
                        
        if
        0E3E: is_button_just_pressed 0 button 15
            then
            gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
            text.ClearAll()
            jump to @TRIGGERS_SETTINGS
            end    
                        
        end
        
        end
        
:ZAME_SKIP_DUMMYPED_IN_TRANSPORT        
                                    
while not model.Available(ZAME_START_PLAYER_MODEL)
wait 0
model.Load(ZAME_START_PLAYER_MODEL)
mload
end

09C7: change_player PLAYER_CHAR model_to ZAME_START_PLAYER_MODEL

0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP                        

//0AF2: 2@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
//0AF2: 3@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
//0AF2: 4@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"
//5@ = 0
//5@ = Marker.CreateIconAndSphere2(ZAME_LADDER_TRIGGER_ICON_ID,2@,3@,4@)
//5@ = Object.Init(ZAME_LADDER_OBJECT_ID, 2@,3@,4@)
//0566: link_object 5@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION
ZAME_TRIGGERS_COUNT += 1

wait 100

if
ZAME_RECREATE_TRIGGER_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

ZAME_NAME_AUD_TYPING_FLAG = 0
 
jump @TRIGGERS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_IFP_NAME_SELECT

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
    
while true
wait 0
text.ShowH('SE653',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    ZAME_SETTING_UP_TRIIGER = 1
    gosub @ANIM_ID_SELECT  
    ZAME_SETTING_UP_TRIIGER = 0
    if
    5@ == -1
        then
        33@ = 0
        text.RemoveTextBox()
        text.ClearAll()
        wait 5
        ZAME_NAME_AUD_TYPING_FLAG = 0                
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        jump to @TRIGGERS_SETTINGS 
        end   
        
    0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT
    
    0AF5: write_string v$TEAM1_NAME to_ini_file "me\temp.dat" section v$RACE_FILE key "IFP_NAME"
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ANIM_NAME"    
                                             
    jump to @SKIP_TYPING_IFP2
    end
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
        
end
        
//////////////////////////////

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE76'

while true
wait 0

if
8A2A: not  text_box 'SE76' displayed
then
0512: show_permanent_text_box 'SE76'
end

:IFP_INCORRECT2B

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE208" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE208" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0                
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then    
    text.RemoveTextBox()
    text.ClearAll()    
    
    gosub @CHECK_FOR_IFP_EXISTING    
    if
    12@ == 0
    then
    text.ShowH('SE237',1000,1)
    wait 1000
    jump to @IFP_INCORRECT2B    
    end
    
    while not animation.Available(v$SNAME3)
    wait 0
    animation.Load(v$SNAME3)
    if
    33@ > 1000
        then
        break
        0@ = 1
        end
    end
    
    33@ = 0
    0@ = 0
    
    wait 5
    if
    0@ == 0
        then
        
        098B: v$TEAM1_NAME = v$SNAME3 + v$TEAM2_NAME // all string variables
        gosub @TRIGGER_ANIM_NAME_SELECT
        if
        ZAME_TEMP_FUCKEEE == 12345
        then
        ZAME_TEMP_FUCKEEE = 0
        33@ = 0
        text.RemoveTextBox()
        text.ClearAll()
        wait 5
        ZAME_NAME_AUD_TYPING_FLAG = 0                
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        jump to @TRIGGERS_SETTINGS
        end    
        
        if or
        0D49: 12@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "climb" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "jump" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "die_headshooted" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "die" // IF and SET
        then
        jump to @SHIT_SKIP_TRYRTYRTYR
        end        
        
        :SKIP_TYPING_IFP2
                                
        0AF5: write_string v$TEAM1_NAME to_ini_file "me\temp.dat" section v$RACE_FILE key "IFP_NAME"                
        
        //////////////////////////////
    
        while true
        wait 0
        text.ShowH('SE210',100,1)
        
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            ZAME_NAME_AUD_TYPING_FLAG = 3
            gosub @ANIM_TIME_SELECT
            ZAME_NAME_AUD_TYPING_FLAG = 2
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "LOOP_FLAG"
            break
            end
        
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
        
        end
        
        //////////////////////////////
        
        :SHIT_SKIP_TRYRTYRTYR
        
        gosub @IFP_CHECK_FOR_ADDITIONAL_PARAMS
                         
        jump @DUMMY_PED_RETURN_FROM_ANIM_SELECT
        
        else
        text.ShowH('SE235',1000,1)
        wait 1000
        end
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_ANIM_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE125'

while true
wait 0

if
8A2A: not  text_box 'SE125' displayed
then
0512: show_permanent_text_box 'SE125'
end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE209" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE209" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_TEMP_FUCKEEE = 12345                
    return    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    
    ///////////////////////
    
    while not animation.Available(v$TEAM1_NAME)
    wait 0
    animation.Load(v$TEAM1_NAME)
    end
    
    //////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    0@ = 0
    
    while true
    wait 0
    text.ShowH('SE239',100,1)
    0812: AS_actor PLAYER_ACTOR perform_animation v$SNAME3 IFP v$TEAM1_NAME framedelta 4.0 loopA 1 lockX 0 lockY 0 lockF 0 time 100  // versionB
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()
        0@ = 1        
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()        
        break
        end
        
    end
        
    //////////////////////////////
    
    if
    0@ == 1
        then 
        
        0AD3: v$RACE_FILE = format "TRG%d" ZAME_TRIGGERS_COUNT
                   
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ANIM_NAME"    
        return
        else
        0512: show_permanent_text_box 'SE125'        
        end    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    

:ZAME_TRIGGER_DUMMYCAR

gosub @ZAME_TRIGGER_SET_PARAMS
if
ZAME_TEMP_FUCKEEE45 == 1
then
ZAME_TEMP_FUCKEEE45 = 0
jump to @TRIGGERS_SETTINGS
end 

///////////////Имя переменной транспорта.///////////////////
gosub @TRIGGER_DUMMYCAR_IDNAME_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
then
ZAME_NAME_AUD_TYPING_FLAG = 0
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
text.ClearAll()
jump to @TRIGGERS_SETTINGS
end

ZAME_CREATE_CAR_ADVETNURE_OBJ = 2

gosub @CARSPAWN_SELECT_ALT_NABOR_CHECK
        
//    gosub @CARSPAWN_CHEATCODE    
ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL = 1    
repeat
wait 0    
    
if
ZAME_CREATE_CAR_ADVETNURE_OBJ == 0
then
jump to @TRIGGERS_SETTINGS
end
    
until 056E:   car ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL defined
008B: 25@ = ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL // (int)
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

////////////////////////////////////////////////////////////////////

0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE624'
018C: play_sound 1057 at 0.0 0.0 0.0 
wait 100 
    
repeat
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0 

if
8A2A: not  text_box 'SE624' displayed
then
0512: show_permanent_text_box 'SE624'
end
    
if 
00E1:   player 0 pressed_key 11 
then
03E6: remove_text_box 
0581: enable_radar 0
0407: store_coords_to 1@ 2@ 3@ from_car 25@ with_offset 0.0 0.0 1.0
0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
wait 0
car.Destroy(25@) 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
jump to @TRIGGERS_SETTINGS
end 

if 
00E1:   player 0 pressed_key 4
    then
    car.StorePos(25@,2@,3@,4@)
    if and
    0AE2: 0@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 5.0 find_next 1 pass_wrecked 0
    803B: not  0@ == 25@  // (int)
        then
        car.StorePos(0@,2@,3@,4@)                 
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
        128@ = car.Angle(0@)        
        0441: 7@ = car 0@ model
        0AF1: write_int 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_MODEL"
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_X"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_Y"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_Z"
        0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_A"    
        03F3: get_car 0@ primary_color_to 5@ secondary_color_to 6@
        0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1"
        0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2"
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_INT"
        0407: store_coords_to 1@ 2@ 3@ from_car 0@ with_offset 0.0 0.0 1.0
        0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
        wait 0
        car.Destroy(25@)
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1             
        break
        end
    end
    
if 
00E1:   player 0 pressed_key 10
    then
            
    car.StorePos(25@,2@,3@,4@) 
                
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
    128@ = car.Angle(25@)    
    0441: 7@ = car 25@ model
    0AF1: write_int 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_MODEL"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_Z"
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYCAR_A"    
    03F3: get_car 25@ primary_color_to 5@ secondary_color_to 6@
    0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1"
    0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_INT"
    0407: store_coords_to 1@ 2@ 3@ from_car 25@ with_offset 0.0 0.0 1.0
    0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
    wait 0
    car.Destroy(25@)
    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1             
    break
    end 
        
until false

///////////////Неуязвимость?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE538',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "IMMUNE"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then         
    text.ClearAll()
    
    gosub @TRIGGER_DUMMYCAR_HP_SELECT
    if
    ZAME_NAME_AUD_TYPING_FLAG == -669966
    then
    ZAME_NAME_AUD_TYPING_FLAG = 0
    Player.CanMove(PLAYER_CHAR) = False
    0581: enable_radar 0 
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end
    
    ///////////////Пpoвaл пpи yничтoжeнии тpaнcпopтa?///////////////////

    text.ClearAll()
    text.RemoveTextBox()
                
    while true
    wait 0
                
    text.ShowH('SE539',10,1)
                    
    if
    0E3E: is_button_just_pressed 0 button 11
        then 
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "FAIL_AFTER_DESTROY"               
        text.ClearAll()
        break
        end
                    
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()
        break
        end
                    
    if
    0E3E: is_button_just_pressed 0 button 15
        then
        gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
        text.ClearAll()
        jump to @TRIGGERS_SETTINGS
        end    
                    
    end
    
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Блokиpoвka нa мecтe?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE542',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "LOCKED"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Oтkpыт бaгaжниk?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE543',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "OPEN_TRUNK"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

///////////////Oтkpыт капот?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE544',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "OPEN_HOOD"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 15
    then
    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
    text.ClearAll()
    jump to @TRIGGERS_SETTINGS
    end    
                
end

0AF1: write_int ZAME_TEMP_TRIGGER_TYPE to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_INT"
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_IS_FINISHED"
gosub @ZAME_SBROS_FULLY_CREATED_TRIGGER_OBJECTS_TEMP                        

//0AF2: 2@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_X"
//0AF2: 3@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Y"
//0AF2: 4@ = get_float_from_ini_file "me\temp.dat" section v$RACE_FILE key "TRIGGER_Z"
//5@ = 0
//5@ = Marker.CreateIconAndSphere2(ZAME_LADDER_TRIGGER_ICON_ID,2@,3@,4@)
//5@ = Object.Init(ZAME_LADDER_OBJECT_ID, 2@,3@,4@)
//0566: link_object 5@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box

0AF1: write_int ZAME_TRIGGERS_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TRIGGERS_COUNT"
gosub @ZAME_CREATE_TRIGGER_THREAD_AFTER_CREATION
ZAME_TRIGGERS_COUNT += 1

wait 100

if
ZAME_RECREATE_TRIGGER_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE459' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE459B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

ZAME_NAME_AUD_TYPING_FLAG = 0
 
jump @TRIGGERS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYPED_ACCURACY_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE632'

while true
wait 0      

if
8A2A: not  text_box 'SE632' displayed
    then
    0512: show_permanent_text_box 'SE632'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE633" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE633" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "50"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ACCURACY"    
    return
    
    end

end
                                       
:TRIGGER_DUMMYPED_FIRERATE_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE634'

while true
wait 0

if
8A2A: not  text_box 'SE634' displayed
    then
    0512: show_permanent_text_box 'SE634'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE635" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE635" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "50"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FIRE_RATE"    
    return
    
    end

end

:TRIGGER_DUMMYPED_MELEE_ACCURACY_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE632B'

while true
wait 0

if
8A2A: not  text_box 'SE632B' displayed
    then
    0512: show_permanent_text_box 'SE632B'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE633B" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE633B" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "15"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SENSE_RANGE"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYPED_HP_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE630'

while true
wait 0

if
8A2A: not  text_box 'SE630' displayed
    then
    0512: show_permanent_text_box 'SE630'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE631" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE631" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "1000"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "HEALTH"    
    return
    
    end

end            

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYPED_IDNAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE668'

while true
wait 0

if
8A2A: not  text_box 'SE668' displayed
    then
    0512: show_permanent_text_box 'SE668'
    end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE669" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE669" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
        
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    if
    8846: not string v$SNAME3 empty // v$
    then 
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "IDNAME"
    end  
      
    return
    
    end

end     

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYPED_IDNAME_GET

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE668'

while true
wait 0

if
8A2A: not  text_box 'SE668' displayed
    then
    0512: show_permanent_text_box 'SE668'
    end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE669" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE669" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    //////////////////////////////////////////////////
        
    {$INCLUDE newopcodes\forallpeds_cleoplus}
                
    if and
    056D:   actor ped defined
    87D6: not  ped == PLAYER_ACTOR // @ == $ (int)
        then
//        0AC7: 5@ = var 6@ offset 
        0AC6: ZAME_TEMPVAR_STRING3 = label @SUNUDKS_POSITIONS_ARRAY offset          
        if  
        0E16: get_extended_char_var ped id "IDNAME" var 1 to ZAME_TEMPVAR_STRING3
            then
//            0D4D: copy_string ZAME_TEMPVAR_STRING3 to ZAME_TEMPVAR_STRING2
//            0D4D: copy_string "yes" to 0@
            0AD3: ZAME_TEMPVAR_STRING2 = format "%s" ZAME_TEMPVAR_STRING3
            if
            0D49: 12@ = compare_strings ZAME_TEMPVAR_STRING2 v$SNAME3 // IF and SET
                then
                0085: ZAME_ANIM_PED_HANDLE = ped // (int)
//                0944: manipulate_weapon_camera ped
//                wait 2000
//                camera.Restore_WithJumpCut()
                jump to @SUCC_FINDED_IDNAME_PED 
                end
            end               
        end
                
    {$INCLUDE newopcodes\end}
    
    text.ClearAll()
    text.ShowH('SE670',2000,1)
    wait 2000
    jump to @TRIGGER_DUMMYPED_IDNAME_GET
            
    //////////////////////////////////////////////////
    
    :SUCC_FINDED_IDNAME_PED    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0              
    return
    
    end

end                   

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYCAR_IDNAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE672'

while true
wait 0

if
8A2A: not  text_box 'SE672' displayed
    then
    0512: show_permanent_text_box 'SE672'
    end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE673" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE673" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
        
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    if
    8846: not string v$SNAME3 empty // v$
    then 
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "IDNAME2"
    end  
      
    return
    
    end

end     

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYCAR_IDNAME_GET

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE672'

while true
wait 0

if
8A2A: not  text_box 'SE672' displayed
    then
    0512: show_permanent_text_box 'SE672'
    end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE673" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE673" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    //////////////////////////////////////////////////
        
//    {$INCLUDE newopcodes\forallcars}
    {$INCLUDE newopcodes\forallcars_cleoplus}
                
    if
    056E:   car veh defined
        then
//        0AC7: 5@ = var 6@ offset 
        0AC6: ZAME_TEMPVAR_STRING3 = label @SUNUDKS_POSITIONS_ARRAY offset          
        if  
        0E19: get_extended_car_var veh id "IDNAME2" var 1 to ZAME_TEMPVAR_STRING3
            then
//            0D4D: copy_string ZAME_TEMPVAR_STRING3 to ZAME_TEMPVAR_STRING2
//            0D4D: copy_string "yes" to 0@
            0AD3: ZAME_TEMPVAR_STRING2 = format "%s" ZAME_TEMPVAR_STRING3
            if
            0D49: 12@ = compare_strings ZAME_TEMPVAR_STRING2 v$SNAME3 // IF and SET
                then
                0085: 1@ = veh // (int)
//                0944: manipulate_weapon_camera ped
//                wait 2000
//                camera.Restore_WithJumpCut()
                jump to @SUCC_FINDED_IDNAME_CAR 
                end
            end               
        end
                
    {$INCLUDE newopcodes\end}
    
    text.ClearAll()
    text.ShowH('SE675',2000,1)
    wait 2000
    jump to @TRIGGER_DUMMYCAR_IDNAME_GET
            
    //////////////////////////////////////////////////
    
    :SUCC_FINDED_IDNAME_CAR    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0              
    return
    
    end

end                   

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYCAR_HP_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE637'

while true
wait 0

if
8A2A: not  text_box 'SE637' displayed
    then
    0512: show_permanent_text_box 'SE637'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE638" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE638" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    
    if
    0846:  string v$SNAME3 empty // v$
    then
    v$SNAME3 = "1000"
    end
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "HEALTH"    
    return
    
    end

end                   

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYCAR_NEARCOME_RADIUS_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE639'

while true
wait 0

if
8A2A: not  text_box 'SE639' displayed
    then
    0512: show_permanent_text_box 'SE639'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE640" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE640" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "NEAR_COME_RADIUS"    
    return
    
    end

end           

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TRIGGER_DUMMYCAR_INSTSPEED_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE642'

while true
wait 0

if
8A2A: not  text_box 'SE642' displayed
    then
    0512: show_permanent_text_box 'SE642'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE643" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE643" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPEED_INSTANTLY"    
    return
    
    end

end                                                 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_POSTFX_SELECT

0512: show_permanent_text_box 'SE223'
08D4: $PANEL = create_panel_with_title 'SE600' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE602' 'SE603' 'SE604' 'SE605' 'SE606' 'SE607' 'SE622' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100

repeat
wait 0

if 
00E1:   player 0 pressed_key 15 
then
08DA: remove_panel $PANEL
Text.RemoveTextBox
jump to @TRIGGERS_SETTINGS
end

until 00E1:   player 0 pressed_key 16 

08D7: 24@ = panel $PANEL active_row 
08DA: remove_panel $PANEL
Text.RemoveTextBox      

jump to @TRIGGERS_SETTINGS