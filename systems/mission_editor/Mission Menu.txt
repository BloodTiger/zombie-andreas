:MISSION_MENU    

Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE2'
08D4: $PANEL = create_panel_with_title 'SE7' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE13' 'SE14' 'SE15' 'SE92' 'SE472' 'SE472B' 'SE472C' 'SE49' 'dummy' 'dummy' 'dummy' 'dummy'

if and
8AAB:   not file_exists "me\ms1.dat"
8AAB:   not file_exists "me\ms2.dat"
8AAB:   not file_exists "me\ms3.dat"
8AAB:   not file_exists "me\ms4.dat"
8AAB:   not file_exists "me\ms5.dat"
8AAB:   not file_exists "me\ms6.dat"
8AAB:   not file_exists "me\ms7.dat"
8AAB:   not file_exists "me\ms8.dat"
then
08D9: set_panel $PANEL row 0 enable 0
090E: set_panel $PANEL active_row 1
end

if
not ZAME_MIS_LOADED_FLAG == 1
then
08D9: set_panel $PANEL row 4 enable 0
08D9: set_panel $PANEL row 5 enable 0
08D9: set_panel $PANEL row 6 enable 0 
end
 
wait 100 

:MISSION_MENU_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @MISSION_MENU_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @ZAME_MAIN_MENU

:MISSION_MENU_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @MISSION_MENU_CLOSE_CHECK

08D7: 0@ = panel $PANEL active_row 

08DA: remove_panel $PANEL 
Text.RemoveTextBox

if
0@ == 0
then
jump to @ZAME_MISSION_LOAD_815
end

if
0@ == 1
then
jump to @ZAME_MISSION_SAVE_1218
end

if
0@ == 2
then

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE226',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
//    text.ClearAll()
//    wait 0
//    $SOUND_OFF_1 = 1
//    fade 0 250
//    wait 250
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
    0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"
    0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
    wait 9999
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    jump to @ZAME_MAIN_MENU
    end
    
end
    
//////////////////////////////

end

if
0@ == 3
then
0512: show_permanent_text_box 'se91' 
08D4: $PANEL = create_panel_with_title 'SE116' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
gosub @ZAME_MIS_NAMES_CHECK 
08DB: set_panel $PANEL column 0 header 'SE112' data 'ZAMEM1' 'ZAMEM2' 'ZAMEM3' 'ZAMEM4' 'ZAMEM5' 'ZAMEM6' 'ZAMEM7' 'ZAMEM8' 'dummy' 'dummy' 'dummy' 'dummy'
32@ = 9999  
wait 100
jump to @ZAME_MISSION_DELETE_1013
end

if
0@ == 4
then
ZAME_START_FROM_OBJ_FLAG = 1
0AF1: write_int 0 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_FROM_OBJ_NO_SIM_MODE"
jump to @ZAME_OBJS_TP
end

if
0@ == 5
then
ZAME_START_FROM_OBJ_FLAG = 1
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_FROM_OBJ_NO_SIM_MODE"
jump to @ZAME_OBJS_TP
end

if
0@ == 6
then
ZAME_START_FROM_OBJ_FLAG = 1
0AF1: write_int 2 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_FROM_OBJ_NO_SIM_MODE"
jump to @ZAME_OBJS_TP
end

if
0@ == 7
then

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE233',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
//    text.ClearAll()
//    wait 0
//    $SOUND_OFF_1 = 1
//    fade 0 250
//    wait 250
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
    0AF1: write_int ZAME_MISSION_LOAD_NUMBER to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
    0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"
    0AF1: write_int 0 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_FROM_OBJ"
    0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "EDITOR_LAUNCH_MISSION"
    0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
    wait 9999
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    jump to @ZAME_MAIN_MENU
    end
    
end
    
//////////////////////////////

end

jump to @ZAME_MAIN_MENU

//////////////////////////////////////////////////////////////////

:ZAME_MISSION_LOAD_815
0512: show_permanent_text_box 'se91' 
08D4: $PANEL = create_panel_with_title 'SE116' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
gosub @ZAME_MIS_NAMES_CHECK 
08DB: set_panel $PANEL column 0 header 'SE112' data 'ZAMEM1' 'ZAMEM2' 'ZAMEM3' 'ZAMEM4' 'ZAMEM5' 'ZAMEM6' 'ZAMEM7' 'ZAMEM8' 'dummy' 'dummy' 'dummy' 'dummy'
$HUD_REMOVE = 1
$HUD_OFF_INST = 1 
gosub @ZAME_MISSION_LOAD_2862
32@ = 9999 
wait 100 

:ZAME_MISSION_LOAD_1013
wait 0

gosub @ZAME_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @ZAME_GET_MIS_DATE                               
    end
 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_MISSION_LOAD_1185 
08D7: 0@ = panel $PANEL active_row  
08DA: remove_panel $PANEL 
03E6: remove_text_box 
0871: init_jump_table 0@ total_jumps 8 default_jump 0 @ZAME_MISSION_LOAD_38485 jumps 0 @ZAME_MISSION_LOAD_1607 1 @ZAME_MISSION_LOAD_1693 2 @ZAME_MISSION_LOAD_1779 3 @ZAME_MISSION_LOAD_1865 4 @ZAME_MISSION_LOAD_1951 5 @ZAME_MISSION_LOAD_2037 6 @ZAME_MISSION_LOAD_2123 
0872: jump_table_jumps 7 @ZAME_MISSION_LOAD_2209 8 @ZAME_MISSION_LOAD_38485 9 @ZAME_MISSION_LOAD_38485 10 @ZAME_MISSION_LOAD_38485 11 @ZAME_MISSION_LOAD_38485 12 @ZAME_MISSION_LOAD_38485 13 @ZAME_MISSION_LOAD_38485 14 @ZAME_MISSION_LOAD_38485 15 @ZAME_MISSION_LOAD_38485 

:ZAME_MISSION_LOAD_1185
wait 0

gosub @ZAME_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @ZAME_GET_MIS_DATE                               
    end
     
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_MISSION_LOAD_1013 
08DA: remove_panel $PANEL
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

//////////////////////////////////////////////////////////////////

:ZAME_MISSION_SAVE_1218

if
0AF4: 0@v = read_string_from_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
then
0085: 0@ = ZAME_MISSION_LOAD_NUMBER // (int)
0@ -= 1
1@ = 287567398
jump to @ZAME_MISSION_SAVE_SLOT_JUMP
end

0512: show_permanent_text_box 'se91' 
08D4: $PANEL = create_panel_with_title 'SE116' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
gosub @ZAME_MIS_NAMES_CHECK 
08DB: set_panel $PANEL column 0 header 'SE112' data 'ZAMEM1' 'ZAMEM2' 'ZAMEM3' 'ZAMEM4' 'ZAMEM5' 'ZAMEM6' 'ZAMEM7' 'ZAMEM8' 'dummy' 'dummy' 'dummy' 'dummy'
32@ = 9999  

////////////////////////////////////

06D2: 0@v = "me\ms1.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms1.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 0 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 1
    end 
end

06D2: 0@v = "me\ms2.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms2.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 1 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 2
    end 
end

06D2: 0@v = "me\ms3.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms3.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 2 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 3
    end 
end

06D2: 0@v = "me\ms4.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms4.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 3 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 4
    end 
end

06D2: 0@v = "me\ms5.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms5.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 4 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 5
    end 
end

06D2: 0@v = "me\ms6.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms6.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 5 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 6
    end 
end                

06D2: 0@v = "me\ms7.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms7.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 6 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 7
    end 
end

06D2: 0@v = "me\ms8.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AAB:   file_exists "me\ms8.dat"
1@ == 0 
then
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 7 enable 0
if
0@ == 0
    then
    090E: set_panel $PANEL active_row 8
    end 
end

////////////////////////////////////

wait 100 

:ZAME_MISSION_SAVE_1402
wait 0

gosub @ZAME_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @ZAME_GET_MIS_DATE                               
    end
 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_MISSION_SAVE_1574 
08D7: 0@ = panel $PANEL active_row  
08DA: remove_panel $PANEL
:ZAME_MISSION_SAVE_SLOT_JUMP 
03E6: remove_text_box 
0871: init_jump_table 0@ total_jumps 9 default_jump 0 @ZAME_MISSION_SAVE_38485 jumps 0 @ZAME_MISSION_SAVE_2295 1 @ZAME_MISSION_SAVE_2363 2 @ZAME_MISSION_SAVE_2431 3 @ZAME_MISSION_SAVE_2499 4 @ZAME_MISSION_SAVE_2567 5 @ZAME_MISSION_SAVE_2635 6 @ZAME_MISSION_SAVE_2703 
0872: jump_table_jumps 7 @ZAME_MISSION_SAVE_2771 8 @ZAME_MISSION_SAVE_COMMUNITY 9 @ZAME_MISSION_SAVE_38485 10 @ZAME_MISSION_SAVE_38485 11 @ZAME_MISSION_SAVE_38485 12 @ZAME_MISSION_SAVE_38485 13 @ZAME_MISSION_SAVE_38485 14 @ZAME_MISSION_SAVE_38485 15 @ZAME_MISSION_SAVE_38485 

:ZAME_MISSION_SAVE_1574
wait 0

gosub @ZAME_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @ZAME_GET_MIS_DATE                               
    end
 
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_MISSION_SAVE_1402 
08DA: remove_panel $PANEL 
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:MISSION_NEW

if
not ZAME_SURV_LAUNCH_FLAG == 1
then
renderer ZAME_START_POINT_X ZAME_START_POINT_Y               
03CB: set_rendering_origin_at ZAME_START_POINT_X ZAME_START_POINT_Y ZAME_START_POINT_Z     
actor.PutAtNoOffset(PLAYER_ACTOR,ZAME_START_POINT_X, ZAME_START_POINT_Y, ZAME_START_POINT_Z)
actor.Angle(PLAYER_ACTOR) = ZAME_START_POINT_ANGLE    
camera.Restore_WithJumpCut()
create_thread @REFR_3D
end

while not model.Available(ZAME_START_PLAYER_MODEL)
wait 0
model.Load(ZAME_START_PLAYER_MODEL)
mload
end

ZAME_PLAYER_DUMMY = Actor.Create(CivMale, ZAME_START_PLAYER_MODEL, ZAME_START_POINT_X, ZAME_START_POINT_Y, ZAME_START_POINT_Z)
0860: link_actor ZAME_PLAYER_DUMMY to_interior ZAME_START_POINT_INTERIOR
Actor.PutAtNoOffset(ZAME_PLAYER_DUMMY, ZAME_START_POINT_X, ZAME_START_POINT_Y, ZAME_START_POINT_Z)
Actor.Angle(ZAME_PLAYER_DUMMY) = ZAME_START_POINT_ANGLE
0575: set_actor ZAME_PLAYER_DUMMY keep_position 1 
Actor.SetImmunities(ZAME_PLAYER_DUMMY, 1, 1, 1, 1, 1)
0619: enable_actor ZAME_PLAYER_DUMMY collision_detection 0 
ZAME_PLAYER_DUMMY_MARKER = Marker.CreateAboveActor(ZAME_PLAYER_DUMMY)
Marker.SetColor(ZAME_PLAYER_DUMMY_MARKER, 2)  

if
not ZAME_SURV_LAUNCH_FLAG == 1
then
048F: actor PLAYER_ACTOR remove_weapons
end

if
not ZAME_SURV_LAUNCH_FLAG == 1
then
09C7: change_player PLAYER_CHAR model_to ZAME_START_PLAYER_MODEL
end

Player.CanMove(PLAYER_CHAR) = true 
camera.Restore_WithJumpCut()
Cinema.Radar(1) 

if
not ZAME_SURV_LAUNCH_FLAG == 1
then
00C0: set_current_time 8 0
if
UNITED_MAP == 0
    then
    0915: sync_weather_with_time_and_location_instantly
    $WEATHER_SYNC_FLAG = 1
    $SKYBOX_CHANGE_INST_FLAG = 1   
    end     
end

0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ZAME_GET_BACK2"
if
1@ == 1
then

while true
wait 0

if
$CHEATS_ON == 1
    then
    0AD1: show_formatted_text_highpriority "WAITING INF CUZ ZAME_GET_BACK2" time 2000
    end

end

end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
if
0@ > 0
then

while not model.Available(#RCCAM)
wait 100
model.Load(#RCCAM)
end

0AF0: ZAME_MISSION_LOAD_NUMBER = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"       
0@ -= 1
//0AD1: show_formatted_text_highpriority "SLOT IS %d is" time 2000 0@
//wait 2000
0871: init_jump_table 0@ total_jumps 9 default_jump 0 @ZAME_MISSION_LOAD_38485 jumps 0 @ZAME_MISSION_LOAD_1607 1 @ZAME_MISSION_LOAD_1693 2 @ZAME_MISSION_LOAD_1779 3 @ZAME_MISSION_LOAD_1865 4 @ZAME_MISSION_LOAD_1951 5 @ZAME_MISSION_LOAD_2037 6 @ZAME_MISSION_LOAD_2123 
0872: jump_table_jumps 7 @ZAME_MISSION_LOAD_2209 8 @ZAME_MISSION_LOAD_CUSTOM_MISSION 9 @ZAME_MISSION_LOAD_38485 10 @ZAME_MISSION_LOAD_38485 11 @ZAME_MISSION_LOAD_38485 12 @ZAME_MISSION_LOAD_38485 13 @ZAME_MISSION_LOAD_38485 14 @ZAME_MISSION_LOAD_38485 15 @ZAME_MISSION_LOAD_38485 
end

player.CanMove(PLAYER_CHAR) = true
fade 1 500
$HUD_REMOVE = 0
wait 500        
    
jump to @ZAME_OPEN_CHECK

//////////////////////////////////////////////////////////////////

:ZAME_MISSION_LOAD_1607

0AF0: get_int 0@ from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end    

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 1 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME  
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 1
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms1.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 1 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 1 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 1 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 1 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_1693

0AF0: get_int 0@ from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end  

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 2 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 2 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 2
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms2.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 2 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 2 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 2 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 2 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_1779

0AF0: get_int 0@ from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end 

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 3 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 3 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 3
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms3.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 3 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 3 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 3 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 3 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_1865

0AF0: get_int 0@ from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end 

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 4 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 4 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 4
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms4.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 4 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 4 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 4 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 4 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_1951

0AF0: get_int 0@ from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end 

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 5 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 5 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 5
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms5.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 5 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 5 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 5 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 5 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_2037

0AF0: get_int 0@ from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end 

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 6 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 6 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 6
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms6.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 6 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 6 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 6 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 6 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_2123

0AF0: get_int 0@ from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end 

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 7 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 7 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 7
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms7.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 7 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 7 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 7 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 7 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION 

:ZAME_MISSION_LOAD_2209

0AF0: get_int 0@ from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
0@ = 0
end 

if or
ZAME_MIS_LOADED_FLAG == 1
0@ == 1
then        
$SOUND_OFF_1 = 1
fade 0 250
wait 250
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_START"
0AF1: write_int 8 to_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "NO_INIT_TEXT_FLAG"

if
ZAME_MIS_LOADED_FLAG == 1
then
gosub @UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
0AF0: get_int 0@ from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "AUTOSTART_AFTERLOAD"
end

if
0@ == 1
then
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 8 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
end

0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
else
create_thread @PIC_GRB
end

ZAME_MISSION_LOAD_NUMBER = 8
0B00: delete_file "me\temp.dat"  // IF and SET
0B04: copy_file "me\ms8.dat" to "me\temp.dat" //IF and SET

gosub @ZAME_ADJUST_SNIPERS

if
8AAB:   not file_exists "modloader\ZAME MISSION 8 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 8 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 8 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 8 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE
 
jump @MISSION_LOAD_INITIALIZATION

:ZAME_MISSION_LOAD_CUSTOM_MISSION
ZAME_MISSION_LOAD_NUMBER = 9

if
8AAB: not  file_exists "me\penismonkey.dat"
then
0B00: delete_file "me\temp.dat"  // IF and SET
end

if
8AE4: not  directory_exists "modloader\ZAME MISSION 9 FILES FOLDER"
then
0AE5: create_directory "modloader\ZAME MISSION 9 FILES FOLDER" //IF and SET
end

if
8AAB: not  file_exists "me\penismonkey.dat"
then
gosub @ZAME_MISSION_LOAD_COMMUNITY_MODE 
else
0B00: delete_file "me\penismonkey.dat"  // IF and SET
end

if
not ZAME_SURV_LAUNCH_FLAG == 1
then
gosub @ZAME_ADJUST_SNIPERS
else
ZAME_SURV_LAUNCH_FLAG = 1
MAIN_QUEST_MUSIC_FLAG = 1
//ENEX_OFF = 1 //наху€
//$INT_ZMB_NOT = 1 //не наху€, но можно умнее (сделалъ умнее)
//INT_ZOMBIE_OFF_FADING_AND_SHIT_FLAG = 1 //не наху€, но можно умнее (сделалъ умнее)
0459: end_thread_named 'RND_HRD'
end                       

if
8AAB:   not file_exists "modloader\ZAME MISSION 9 FILES FOLDER\1_DONT_DELETE\tempfile.fxt"
then
0AE5: create_directory "modloader\ZAME MISSION 9 FILES FOLDER\1_DONT_DELETE" //IF and SET
0B04: copy_file "za\tempfile.fxt" to "modloader\ZAME MISSION 9 FILES FOLDER\1_DONT_DELETE\tempfile.fxt" //IF and SET
end

09FD: get_gxt_string 'ZGATMFE' width_to 1@
if
1@ > 0
then
//do nothing, files are loaded
else
//load modloader folder, restart in 3 mode, enter again
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 9 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 9 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 9 FILES FOLDER" 
gosub @ZAME_WAIT_FOR_MODLOADER_UPDATE

0AF0: get_int 0@ from_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "TWICE_RESTART"

//if need twice restart - do it
if
0@ == 1
then
0AF1: write_int 3 to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_FLAG"
0AF1: write_int COMMUNITY_MISSION_NUM to_ini_file "saves/ZACM.set" section "SCR" key "COMMUN_MISS_NUM2"
0A8C: write_memory 0xBA67A5 size 4 value 1 virtual_protect 0 // RESTART GAME
wait 9999999
end

end

jump @MISSION_LOAD_INITIALIZATION

:ZAME_WAIT_FOR_MODLOADER_UPDATE

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "EDITOR_LOAD_MIS_NUM"
if
0@ > 0
then
//ass 
else
fade 0 250
wait 250
end

repeat
wait 0

if
ZAME_SURV_LAUNCH_FLAG == 1
then
break
end

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25      
0343: set_text_draw_linewidth 480.0
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 480.0 for_centered_text
033E: set_draw_text_position 320.0 200.0 GXT 'SE483'  // Push

09FD: get_gxt_string 'ZGATMFE' width_to 1@
until 1@ > 0

32@ = 0

repeat
wait 0

if
ZAME_SURV_LAUNCH_FLAG == 1
then
break
end

03F0: enable_text_draw 1
0349: set_text_draw_font 2
0340: set_text_draw_RGBA 180 180 180 255
if
DIRECTFONT_INSTALLED == 1
then    
0340: set_text_draw_RGBA DIRECTFONT_FONT2_R DIRECTFONT_FONT2_G DIRECTFONT_FONT2_B 255
end
 
033F: set_text_draw_letter_size 0.5 1.25      
0343: set_text_draw_linewidth 480.0
0342: set_text_draw_centered 1
0344: set_text_draw_linewidth 480.0 for_centered_text
033E: set_draw_text_position 320.0 200.0 GXT 'SE483'  // Push

until 32@ > 1000

return

{$INCLUDE ZAME Custom Missions Load Routine.txt}

////////////////////////////////////////////////////////////////// 

:ZAME_MISSION_SAVE_2295
if or
8AAB: not file_exists "me\ms1.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 1
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 1 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2363
if or
8AAB: not file_exists "me\ms2.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 2
ZAME_MIS_LOADED_FLAG = 1 
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 2 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2431
if or
8AAB: not file_exists "me\ms3.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 3
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 3 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end 
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2499
if or
8AAB: not file_exists "me\ms4.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 4
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 4 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2567
if or
8AAB: not file_exists "me\ms5.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 5
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 5 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2635
if or
8AAB: not file_exists "me\ms6.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 6
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 6 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2703
if or
8AAB: not file_exists "me\ms7.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 7
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 7 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_2771
if or
8AAB: not file_exists "me\ms8.txd"
1@ == 287567398
then
ZAME_MISSION_LOAD_NUMBER = 8
ZAME_MIS_LOADED_FLAG = 1
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 8 FILES FOLDER"
else
text.ShowH('SE272',2000,1)
wait 2000
jump to @ZAME_MISSION_SAVE_1218
end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_SAVE_COMMUNITY
//if
//1@ == 287567398
//then
//ZAME_MISSION_LOAD_NUMBER = 9
//ZAME_MIS_LOADED_FLAG = 1
//0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 9 FILES FOLDER"
//0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 9 FILES FOLDER"
//0AF1: write_int 100 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 9 FILES FOLDER"
//else
//text.ShowH('SE272',2000,1)
//wait 2000
//jump to @ZAME_MISSION_SAVE_1218
//end
jump @MISSION_SAVE_INITIALIZATION 

:ZAME_MISSION_LOAD_2839
00BB: show_text_lowpriority GXT 'se124' time 1000 flag 1 
jump @ZAME_MISSION_LOAD_815 

:ZAME_MISSION_LOAD_2862
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms1.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms1.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_2919
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 0 enable 0
if
0@ == 0
then
090E: set_panel $PANEL active_row 1
end 

:ZAME_MISSION_LOAD_2919
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms2.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms2.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_2976
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 1 enable 0
if
0@ == 1
then
090E: set_panel $PANEL active_row 2
end 

:ZAME_MISSION_LOAD_2976
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms3.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms3.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_3033
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 2 enable 0
if
0@ == 2
then
090E: set_panel $PANEL active_row 3
end 

:ZAME_MISSION_LOAD_3033
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms4.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms4.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_3090
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 3 enable 0
if
0@ == 3
then
090E: set_panel $PANEL active_row 4
end 

:ZAME_MISSION_LOAD_3090
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms5.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms5.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_3147
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 4 enable 0
if
0@ == 4
then
090E: set_panel $PANEL active_row 5
end 

:ZAME_MISSION_LOAD_3147
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms6.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms6.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_3204
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 5 enable 0
if
0@ == 5
then
090E: set_panel $PANEL active_row 6
end 

:ZAME_MISSION_LOAD_3204
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms7.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms7.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_3261
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 6 enable 0
if
0@ == 6
then
090E: set_panel $PANEL active_row 7
end 

:ZAME_MISSION_LOAD_3261
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
06D2: 0@v = "me\ms8.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if or
8AAB:   not file_exists "me\ms8.dat"
1@ == 0 
jf @ZAME_MISSION_LOAD_3320
08D7: 0@ = panel $PANEL active_row 
08D9: set_panel $PANEL row 7 enable 0
if
0@ == 7
then
090E: set_panel $PANEL active_row 8
end 
return 

:ZAME_MISSION_LOAD_3320
return

:ZAME_MISSION_LOAD_38485
08DA: remove_panel $PANEL 
03E6: remove_text_box 
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
wait 100  
jump @ZAME_OPEN_CHECK

:ZAME_MISSION_SAVE_38485
08DA: remove_panel $PANEL 
03E6: remove_text_box 
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
wait 100  
jump @ZAME_OPEN_CHECK

:ZAME_MISSION_DELETE_1013
wait 0

gosub @ZAME_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @ZAME_GET_MIS_DATE                               
    end
 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_MISSION_DELETE_1185 
08D7: 0@ = panel $PANEL active_row  
08DA: remove_panel $PANEL 
03E6: remove_text_box 
0871: init_jump_table 0@ total_jumps 8 default_jump 0 @ZAME_MISSION_SAVE_38485 jumps 0 @ZAME_MISSION_DELETE_1607 1 @ZAME_MISSION_DELETE_1693 2 @ZAME_MISSION_DELETE_1779 3 @ZAME_MISSION_DELETE_1865 4 @ZAME_MISSION_DELETE_1951 5 @ZAME_MISSION_DELETE_2037 6 @ZAME_MISSION_DELETE_2123 
0872: jump_table_jumps 7 @ZAME_MISSION_DELETE_2209 8 @ZAME_MISSION_SAVE_38485 9 @ZAME_MISSION_SAVE_38485 10 @ZAME_MISSION_SAVE_38485 11 @ZAME_MISSION_SAVE_38485 12 @ZAME_MISSION_SAVE_38485 13 @ZAME_MISSION_SAVE_38485 14 @ZAME_MISSION_SAVE_38485 15 @ZAME_MISSION_SAVE_38485 

:ZAME_MISSION_DELETE_1185
wait 0

gosub @ZAME_DATE_RENDER
if
32@ > 500
    then
    32@ = 0        
    gosub @ZAME_GET_MIS_DATE                               
    end
     
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_MISSION_DELETE_1013 
08DA: remove_panel $PANEL 
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

//////////////////////////////////////////////////////////////////

:ZAME_MISSION_DELETE_1607
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms1.dat"  // IF and SET
0B00: delete_file "me\ms1.txd"  // IF and SET
0B00: delete_file "me\ms1.ini"  // IF and SET
0B00: delete_file "me\ms1.png"  // IF and SET
0B01: delete_directory "me\1" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 1 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\1" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 1 FILES FOLDER" //IF and SET
end 
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_1693
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms2.dat"  // IF and SET
0B00: delete_file "me\ms2.txd"  // IF and SET
0B00: delete_file "me\ms2.ini"  // IF and SET
0B00: delete_file "me\ms2.png"  // IF and SET
0B01: delete_directory "me\2" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 2 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\2" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 2 FILES FOLDER" //IF and SET
end
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_1779
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms3.dat"  // IF and SET
0B00: delete_file "me\ms3.txd"  // IF and SET
0B00: delete_file "me\ms3.ini"  // IF and SET
0B00: delete_file "me\ms3.png"  // IF and SET
0B01: delete_directory "me\3" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 3 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\3" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 3 FILES FOLDER" //IF and SET
end
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_1865
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms4.dat"  // IF and SET
0B00: delete_file "me\ms4.txd"  // IF and SET
0B00: delete_file "me\ms4.ini"  // IF and SET
0B00: delete_file "me\ms4.png"  // IF and SET
0B01: delete_directory "me\4" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 4 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\4" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 4 FILES FOLDER" //IF and SET
end 
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_1951
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms5.dat"  // IF and SET
0B00: delete_file "me\ms5.txd"  // IF and SET
0B00: delete_file "me\ms5.ini"  // IF and SET
0B00: delete_file "me\ms5.png"  // IF and SET
0B01: delete_directory "me\5" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 5 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\5" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 5 FILES FOLDER" //IF and SET
end
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_2037
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms6.dat"  // IF and SET
0B00: delete_file "me\ms6.txd"  // IF and SET
0B00: delete_file "me\ms6.ini"  // IF and SET
0B00: delete_file "me\ms6.png"  // IF and SET
0B01: delete_directory "me\6" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 6 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\6" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 6 FILES FOLDER" //IF and SET
end
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_2123
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms7.dat"  // IF and SET
0B00: delete_file "me\ms7.txd"  // IF and SET
0B00: delete_file "me\ms7.ini"  // IF and SET
0B00: delete_file "me\ms7.png"  // IF and SET
0B01: delete_directory "me\7" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 7 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\7" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 7 FILES FOLDER" //IF and SET
end
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU 

:ZAME_MISSION_DELETE_2209
gosub @ZAME_DELETE_MISSION_CONFIRM
if
0@ == 1
then
0B00: delete_file "me\ms8.dat"  // IF and SET
0B00: delete_file "me\ms8.txd"  // IF and SET
0B00: delete_file "me\ms8.ini"  // IF and SET
0B00: delete_file "me\ms8.png"  // IF and SET
0B01: delete_directory "me\8" include_subdirs 1
0B01: delete_directory "modloader\ZAME MISSION 8 FILES FOLDER" include_subdirs 1
0AE5: create_directory "me\8" //IF and SET
0AE5: create_directory "modloader\ZAME MISSION 8 FILES FOLDER" //IF and SET
end 
$HUD_REMOVE = 0
$HUD_ON_INST = 1 
jump @MISSION_MENU

:ZAME_ADJUST_SNIPERS

if
HYBRID_CONTORLS == 1
then
0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\hybrid.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\hybrid.txt" //IF and SET
end

if
SNIPER_OTHER_AIM == 1
then
SNIPER_GAYMPAD_FLAG = 1
0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\joy_snipers.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt" //IF and SET
else

if and
0A4B:   controls_set_to_joystick
COOP_ACTIVE_FLAG == 0
then
SNIPER_GAYMPAD_FLAG = 1
0B04: copy_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\joy_snipers.coop" to "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt" //IF and SET
end

if and
8A4B: not  controls_set_to_joystick
0AAB:   file_exists "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"
then
0B00: delete_file "modloader\MODLOADER GLOBAL FILES\ZA Some Files\ZA New Weapon\coop_snipers.txt"  // IF and SET
end

end

return

:ZAME_DELETE_MISSION_CONFIRM

text.ClearAll()
text.RemoveTextBox()
    
0@ = 0
    
while true
wait 0
text.ShowH('SE242',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0@ = 1        
    break
    end
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
        
end
    
return    

//////////////////////////////////////////////////////////////////

{$INCLUDE Save Mission.txt}
{$INCLUDE Load Mission.txt}

//////////////////////////////////////////////////////////////////

:ZAME_DATE_RENDER

if
0E3E: is_button_just_pressed 0 button 1
then
wait 0
gosub @ZAME_MISSION_PREVIEW_PICTURES_CHECK
end

if
0@ < 2021
then
return
end

if
ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
then
0E1E: draw_texture_plus ZAME_MISSION_PNG_PREVIEW_TEXTURE event 2 pos 450.0 250.0 size 426.0 240.0 angle 0.0 depth 0.0 fix_aspect_ratio 1 maskTrisCount 0 maskTrisArray 0 rgba 255 255 255 255  
end

03F0: enable_text_draw 1  
0349: set_text_draw_font 1 
0342: set_text_draw_centered 1
03E0: draw_text_behind_textures 1
03E3: set_texture_to_be_drawn_antialiased 1 
033F: set_text_draw_letter_size 0.22 1.1            
081C: draw_text_outline 1 RGBA 0 0 0 255
0340: set_text_draw_RGBA 200 200 200 255

if
UNITED_MAP == 1
then    
0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
end
      
if and
2@ > 9
1@ > 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG131' numbers 2@ 1@  
end

if and
2@ <= 9
1@ > 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG128' numbers 2@ 1@   
end

if and
2@ <= 9
1@ <= 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG129' numbers 2@ 1@
end

if and
2@ > 9
1@ <= 9
then      
045B: draw_text_2numbers 330.0 400.0 GXT 'DBG130' numbers 2@ 1@
end  

03F0: enable_text_draw 1  
0349: set_text_draw_font 1 
0342: set_text_draw_centered 1
03E0: draw_text_behind_textures 1
03E3: set_texture_to_be_drawn_antialiased 1 
033F: set_text_draw_letter_size 0.22 1.1
            
081C: draw_text_outline 1 RGBA 0 0 0 255
0340: set_text_draw_RGBA 200 200 200 255

if
UNITED_MAP == 1
then    
0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
end 

if and
3@ > 9
4@ > 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG23' numbers 3@ 4@  
end

if and
3@ <= 9
4@ > 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG20' numbers 3@ 4@   
end

if and
3@ <= 9
4@ <= 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG21' numbers 3@ 4@
end

if and
3@ > 9
4@ <= 9
then      
045B: draw_text_2numbers 330.0 410.0 GXT 'DBG22' numbers 3@ 4@
end

return

:ZAME_GET_MIS_DATE

    08D7: 5@ = panel $PANEL active_row    
    if and
    5@ == 0
    0AAB:   file_exists "me\ms1.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 1
    0AAB:   file_exists "me\ms2.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 2
    0AAB:   file_exists "me\ms3.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 3
    0AAB:   file_exists "me\ms4.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 4
    0AAB:   file_exists "me\ms5.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 5
    0AAB:   file_exists "me\ms6.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 6
    0AAB:   file_exists "me\ms7.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
    if and
    5@ == 7
    0AAB:   file_exists "me\ms8.dat"
        then
        0AF0: 0@ = get_int_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "DATE_YEAR"
        0AF0: 1@ = get_int_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "DATE_MONTH"
        0AF0: 2@ = get_int_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "DATE_DAY"
        0AF0: 3@ = get_int_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "DATE_HOUR"
        0AF0: 4@ = get_int_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "DATE_MINUTE"
        end
        
return                 

//////////////////////////////////////////////////////////////////

:MISSION_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE231'

while true
wait 0

gosub @ZAME_LAYOUT_CHANGE
gosub @MISSION_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE163" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE163" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_TEMP_FUCKEEE = 999888    
    return    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"    
    return    
    end

end

:MISSION_SELECT_KEYS_CHECK

if
0E3D:   key_pressed 8 
    then
    KEYS_TYPED_NUM = -1
    06D1: v$SNAME3 = "" // v$ // Sunday
    06D1: v$SNAME2 = "" // v$ // Sunday
    gosub @MISSION_SELECT_KEY_ADD
    end
    
if
0E3D:   key_pressed 189 
    then
    06D1: v$SNAME2 = "_" // v$ // Sunday
    gosub @MISSION_SELECT_KEY_ADD
    end    

if
0E3D:   key_pressed 48
    then        
    06D1: v$SNAME2 = "0" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 49
    then        
    06D1: v$SNAME2 = "1" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 50
    then        
    06D1: v$SNAME2 = "2" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 51
    then        
    06D1: v$SNAME2 = "3" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 52
    then        
    06D1: v$SNAME2 = "4" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 53
    then        
    06D1: v$SNAME2 = "5" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 54
    then        
    06D1: v$SNAME2 = "6" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 55
    then        
    06D1: v$SNAME2 = "7" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 56
    then        
    06D1: v$SNAME2 = "8" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 57
    then        
    06D1: v$SNAME2 = "9" // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 190
    then        
    06D1: v$SNAME2 = "." // v$ // Sunday        
    gosub @MISSION_SELECT_KEY_ADD    
    end                                         
    
if
0E3D:   key_pressed 65
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ш" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Б" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 66
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ь" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Е" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "b" // v$ // Sunday
    else
    06D1: v$SNAME2 = "B" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end 
    
if
0E3D:   key_pressed 67
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 68
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ґ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Л" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "d" // v$ // Sunday
    else
    06D1: v$SNAME2 = "D" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed $KEY_USE
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 70
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "f" // v$ // Sunday
    else
    06D1: v$SNAME2 = "F" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 71
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "£" // v$ // Sunday
    else
    06D1: v$SNAME2 = "М" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "g" // v$ // Sunday
    else
    06D1: v$SNAME2 = "G" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 72
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "h" // v$ // Sunday
    else
    06D1: v$SNAME2 = "H" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 73
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "•" // v$ // Sunday
    else
    06D1: v$SNAME2 = "О" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "i" // v$ // Sunday
    else
    06D1: v$SNAME2 = "I" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 74
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "j" // v$ // Sunday
    else
    06D1: v$SNAME2 = "J" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 75
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ю" // v$ // Sunday
    else
    06D1: v$SNAME2 = "З" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 76
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ъ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Г" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "l" // v$ // Sunday
    else
    06D1: v$SNAME2 = "L" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 77
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "©" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Т" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "m" // v$ // Sunday
    else
    06D1: v$SNAME2 = "M" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "¶" // v$ // Sunday
    else
    06D1: v$SNAME2 = "П" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "n" // v$ // Sunday
    else
    06D1: v$SNAME2 = "N" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 79
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "°" // v$ // Sunday
    else
    06D1: v$SNAME2 = "К" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 80
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Я" // v$ // Sunday
    else
    06D1: v$SNAME2 = "И" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 81
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Э" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ж" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "q" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Q" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 82
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "r" // v$ // Sunday
    else
    06D1: v$SNAME2 = "R" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 83
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "®" // v$ // Sunday
    else
    06D1: v$SNAME2 = "С" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "s" // v$ // Sunday
    else
    06D1: v$SNAME2 = "S" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 84
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "t" // v$ // Sunday
    else
    06D1: v$SNAME2 = "T" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 85
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Щ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "В" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "u" // v$ // Sunday
    else
    06D1: v$SNAME2 = "U" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 86
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ѓ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ц" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "v" // v$ // Sunday
    else
    06D1: v$SNAME2 = "V" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 87
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "†" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Й" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "w" // v$ // Sunday
    else
    06D1: v$SNAME2 = "W" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 88
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "§" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Н" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ѓ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "≠" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 90
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ђ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Х" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "z" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Z" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 219
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 221
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "І" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Р" // v$ // Sunday
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 186
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ы" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Д" // v$ // Sunday
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 222
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "™" // v$ // Sunday
    else
    06D1: v$SNAME2 = "У" // v$ // Sunday
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 188
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ч" // v$ // Sunday
    else
    06D1: v$SNAME2 = "А" // v$ // Sunday
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 190
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ђ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ф" // v$ // Sunday
    end
    
    gosub @MISSION_SELECT_KEY_ADD
    
    end                                                                                                                                           

return

:MISSION_SELECT_KEY_ADD

KEYS_TYPED_NUM += 1

if
KEYS_TYPED_NUM >= 16
then
Audiostream.Volume($MENU_INVALID_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_INVALID_SOUND, 0)
Audiostream.PerformAction($MENU_INVALID_SOUND, PLAY)
return
end

Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)

29@ = 1

098B: v$SNAME3 = v$SNAME3 + v$SNAME2 // all string variables
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE163" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE163" string v$NAME3 time 99999999 1
end

return

:MISSION_AUTHOR_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE232'

while true
wait 0

gosub @ZAME_LAYOUT_CHANGE
gosub @MISSION_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE162" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE162" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_TEMP_FUCKEEE = 999888    
    return    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "MISSION_AUTHOR_NAME"    
    return    
    end

end

:MISSION_AUTHOR_KEYS_CHECK

if
0E3D:   key_pressed 8 
    then
    KEYS_TYPED_NUM = -1
    06D1: v$SNAME3 = "" // v$ // Sunday
    06D1: v$SNAME2 = "" // v$ // Sunday
    gosub @MISSION_AUTHOR_KEY_ADD
    end

if
0E3D:   key_pressed 48
    then        
    06D1: v$SNAME2 = "0" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 49
    then        
    06D1: v$SNAME2 = "1" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 50
    then        
    06D1: v$SNAME2 = "2" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 51
    then        
    06D1: v$SNAME2 = "3" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 52
    then        
    06D1: v$SNAME2 = "4" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 53
    then        
    06D1: v$SNAME2 = "5" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 54
    then        
    06D1: v$SNAME2 = "6" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 55
    then        
    06D1: v$SNAME2 = "7" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 56
    then        
    06D1: v$SNAME2 = "8" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end
    
if
0E3D:   key_pressed 57
    then        
    06D1: v$SNAME2 = "9" // v$ // Sunday        
    gosub @MISSION_AUTHOR_KEY_ADD    
    end                                    
    
if
0E3D:   key_pressed 65
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ш" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Б" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 66
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ь" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Е" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "b" // v$ // Sunday
    else
    06D1: v$SNAME2 = "B" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end 
    
if
0E3D:   key_pressed 67
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 68
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ґ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Л" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "d" // v$ // Sunday
    else
    06D1: v$SNAME2 = "D" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed $KEY_USE
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 70
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "f" // v$ // Sunday
    else
    06D1: v$SNAME2 = "F" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 71
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "£" // v$ // Sunday
    else
    06D1: v$SNAME2 = "М" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "g" // v$ // Sunday
    else
    06D1: v$SNAME2 = "G" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 72
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "h" // v$ // Sunday
    else
    06D1: v$SNAME2 = "H" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 73
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "•" // v$ // Sunday
    else
    06D1: v$SNAME2 = "О" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "i" // v$ // Sunday
    else
    06D1: v$SNAME2 = "I" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 74
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "j" // v$ // Sunday
    else
    06D1: v$SNAME2 = "J" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 75
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ю" // v$ // Sunday
    else
    06D1: v$SNAME2 = "З" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 76
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ъ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Г" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "l" // v$ // Sunday
    else
    06D1: v$SNAME2 = "L" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 77
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "©" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Т" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "m" // v$ // Sunday
    else
    06D1: v$SNAME2 = "M" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "¶" // v$ // Sunday
    else
    06D1: v$SNAME2 = "П" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "n" // v$ // Sunday
    else
    06D1: v$SNAME2 = "N" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 79
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "°" // v$ // Sunday
    else
    06D1: v$SNAME2 = "К" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 80
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Я" // v$ // Sunday
    else
    06D1: v$SNAME2 = "И" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 81
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Э" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ж" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "q" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Q" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 82
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "r" // v$ // Sunday
    else
    06D1: v$SNAME2 = "R" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 83
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "®" // v$ // Sunday
    else
    06D1: v$SNAME2 = "С" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "s" // v$ // Sunday
    else
    06D1: v$SNAME2 = "S" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 84
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "t" // v$ // Sunday
    else
    06D1: v$SNAME2 = "T" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 85
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Щ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "В" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "u" // v$ // Sunday
    else
    06D1: v$SNAME2 = "U" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 86
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ѓ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ц" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "v" // v$ // Sunday
    else
    06D1: v$SNAME2 = "V" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 87
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "†" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Й" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "w" // v$ // Sunday
    else
    06D1: v$SNAME2 = "W" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 88
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "§" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Н" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ѓ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "≠" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 90
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ђ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Х" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "z" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Z" // v$ // Sunday
    end
    
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 219
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 221
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "І" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Р" // v$ // Sunday
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 186
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ы" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Д" // v$ // Sunday
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 222
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "™" // v$ // Sunday
    else
    06D1: v$SNAME2 = "У" // v$ // Sunday
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 188
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ч" // v$ // Sunday
    else
    06D1: v$SNAME2 = "А" // v$ // Sunday
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 190
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ђ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ф" // v$ // Sunday
    end
    
    gosub @MISSION_AUTHOR_KEY_ADD
    
    end                                                                                                                                           

return

:MISSION_AUTHOR_KEY_ADD

KEYS_TYPED_NUM += 1

if
KEYS_TYPED_NUM >= 16
then
Audiostream.Volume($MENU_INVALID_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_INVALID_SOUND, 0)
Audiostream.PerformAction($MENU_INVALID_SOUND, PLAY)
return
end

Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)

29@ = 1

098B: v$SNAME3 = v$SNAME3 + v$SNAME2 // all string variables
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE162" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE162" string v$NAME3 time 99999999 1
end

return

:ZAME_LAYOUT_CHANGE

if
CURRENT_LAYOUT == 0
then

if
CAPSLOCK_ON_FLAG == 0
then
0512: show_permanent_text_box 'GAME772'
else
0512: show_permanent_text_box 'AME772B'
end

if and
00E1:   player 0 pressed_key 14
0AB0:   key_pressed 18
33@ > 500
    then        
    CURRENT_LAYOUT = 1
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 0
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 1
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 1
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 0
    33@ = 0
    end        

else

if
CAPSLOCK_ON_FLAG == 0
then
0512: show_permanent_text_box 'GAME771'
else
0512: show_permanent_text_box 'AME771B'
end

if and
00E1:   player 0 pressed_key 14
0AB0:   key_pressed 18
33@ > 500
    then    
    CURRENT_LAYOUT = 0
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 0
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 1
    33@ = 0
    end
    
if and
CAPSLOCK_ON_FLAG == 1
0AB0:   key_pressed 20
33@ > 500
    then
    CAPSLOCK_ON_FLAG = 0
    33@ = 0
    end    

end

return

:ZAME_MIS_NAMES_CHECK

0AE0: remove_dynamic_GXT_entry "ZAMEM1"
0ADF: add_dynamic_GXT_entry "ZAMEM1" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM2"
0ADF: add_dynamic_GXT_entry "ZAMEM2" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM3"
0ADF: add_dynamic_GXT_entry "ZAMEM3" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM4"
0ADF: add_dynamic_GXT_entry "ZAMEM4" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM5"
0ADF: add_dynamic_GXT_entry "ZAMEM5" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM6"
0ADF: add_dynamic_GXT_entry "ZAMEM6" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM7"
0ADF: add_dynamic_GXT_entry "ZAMEM7" text "-"

0AE0: remove_dynamic_GXT_entry "ZAMEM8"
0ADF: add_dynamic_GXT_entry "ZAMEM8" text "-"

06D2: 0@v = "me\ms1.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS1_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms1.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM1"
    0ADF: add_dynamic_GXT_entry "ZAMEM1" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms1.dat"
    then
    jump to @MIS1_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM1"
    0ADF: add_dynamic_GXT_entry "ZAMEM1" text 0@
    else
    
    if and
    0AAB:   file_exists "me\ms1.dat"
    1@ == 1
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM1"
    0ADF: add_dynamic_GXT_entry "ZAMEM1" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms2.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS2_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms2.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM2"
    0ADF: add_dynamic_GXT_entry "ZAMEM2" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms2.dat"
    then
    jump to @MIS2_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM2"
    0ADF: add_dynamic_GXT_entry "ZAMEM2" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms2.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM2"
    0ADF: add_dynamic_GXT_entry "ZAMEM2" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms3.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS3_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms3.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM3"
    0ADF: add_dynamic_GXT_entry "ZAMEM3" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms3.dat"
    then
    jump to @MIS3_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM3"
    0ADF: add_dynamic_GXT_entry "ZAMEM3" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms3.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM3"
    0ADF: add_dynamic_GXT_entry "ZAMEM3" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms4.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS4_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms4.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM4"
    0ADF: add_dynamic_GXT_entry "ZAMEM4" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms4.dat"
    then
    jump to @MIS4_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM4"
    0ADF: add_dynamic_GXT_entry "ZAMEM4" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms4.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM4"
    0ADF: add_dynamic_GXT_entry "ZAMEM4" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms5.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS5_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms5.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM5"
    0ADF: add_dynamic_GXT_entry "ZAMEM5" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms5.dat"
    then
    jump to @MIS5_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM5"
    0ADF: add_dynamic_GXT_entry "ZAMEM5" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms5.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM5"
    0ADF: add_dynamic_GXT_entry "ZAMEM5" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms6.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS6_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms6.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM6"
    0ADF: add_dynamic_GXT_entry "ZAMEM6" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms6.dat"
    then
    jump to @MIS6_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM6"
    0ADF: add_dynamic_GXT_entry "ZAMEM6" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms6.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM6"
    0ADF: add_dynamic_GXT_entry "ZAMEM6" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms7.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS7_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms7.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM7"
    0ADF: add_dynamic_GXT_entry "ZAMEM7" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms7.dat"
    then
    jump to @MIS7_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM7"
    0ADF: add_dynamic_GXT_entry "ZAMEM7" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms7.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM7"
    0ADF: add_dynamic_GXT_entry "ZAMEM7" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end

06D2: 0@v = "me\ms8.dat" // @v = string
gosub @ZAME_MISSION_MAP_CHECK    
if and
0AF4: v$SNAME3 = read_string_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
1@ == 1
    then
    :MIS8_DO_NAME_ZAEBALO
    0AF4: v$SNAME3 = read_string_from_ini_file "me\ms8.dat" section "MISSION_PARAMETERS" key "MISSION_NAME"
    0AE0: remove_dynamic_GXT_entry "ZAMEM8"
    0ADF: add_dynamic_GXT_entry "ZAMEM8" text v$SNAME3
    else
    
    if and
    1@ == 0
    0AAB:   file_exists "me\ms8.dat"
    then
    jump to @MIS8_DO_NAME_ZAEBALO
    0ADE: 0@ = text_by_GXT_entry "GME1113"
    0AE0: remove_dynamic_GXT_entry "ZAMEM8"
    0ADF: add_dynamic_GXT_entry "ZAMEM8" text 0@
    else
    
    if
    0AAB:   file_exists "me\ms8.dat"
    then
    0AE0: remove_dynamic_GXT_entry "ZAMEM8"
    0ADF: add_dynamic_GXT_entry "ZAMEM8" text "UNKNOWN MISSION NAME"
    end
    
    end        
    
    end                             

return

:ZAME_MISSION_MAP_CHECK

if
UNITED_MAP == 0
then 
0AF0: 4@ = get_int_from_ini_file 0@v section "MISSION_PARAMETERS" key "MAP_NUM"
if
4@ == 28
    then
    1@ = 1
    else
    1@ = 0
    end    
else
0AF0: 4@ = get_int_from_ini_file 0@v section "MISSION_PARAMETERS" key "MAP_NUM"
if
07D6:   4@ == LCVC_MAP_NUM2 // @ == $ (int)
    then
    1@ = 1    
    else   
    1@ = 0 
    end
end

return

:ZAME_MISSION_PREVIEW_PICTURES_CHECK

08D7: 0@ = panel $PANEL active_row

///////////////////////////////1 слот///////////////////////////////
if
0@ == 0
    then
    
    if
    0AAB:   file_exists "ME\MS1.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS1.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS1.TXD"
        then
        0D43: 0@ = txd "HuEt1" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT1_ALREADY_LOADED
        end
            
        if
        0D42: load_txd "HuEt1" from "ME\\MS1.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt1" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt1"
            :SKIP_LOADING_TXD_SLOT1_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET 
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////2 слот///////////////////////////////
if
0@ == 1
    then
    
    if
    0AAB:   file_exists "ME\MS2.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS2.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS2.TXD"
        then   
        0D43: 0@ = txd "HuEt2" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT2_ALREADY_LOADED
        end
         
        if
        0D42: load_txd "HuEt2" from "ME\\MS2.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt2" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt2"
            :SKIP_LOADING_TXD_SLOT2_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0 
            end
        end    
    end
    
///////////////////////////////3 слот///////////////////////////////
if
0@ == 2
    then
    
    if
    0AAB:   file_exists "ME\MS3.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS3.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS3.TXD"
        then    
        0D43: 0@ = txd "HuEt3" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT3_ALREADY_LOADED
        end
        
        if
        0D42: load_txd "HuEt3" from "ME\\MS3.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt3" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt3"
            :SKIP_LOADING_TXD_SLOT3_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////4 слот///////////////////////////////
if
0@ == 3
    then
    
    if
    0AAB:   file_exists "ME\MS4.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS4.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS4.TXD"
        then    
        0D43: 0@ = txd "HuEt4" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT4_ALREADY_LOADED
        end
        
        if
        0D42: load_txd "HuEt4" from "ME\\MS4.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt4" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt4"
            :SKIP_LOADING_TXD_SLOT4_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0 
            end
        end    
    end
    
///////////////////////////////5 слот///////////////////////////////
if
0@ == 4
    then
    
    if
    0AAB:   file_exists "ME\MS5.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS5.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS5.TXD"
        then    
        0D43: 0@ = txd "HuEt5" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT5_ALREADY_LOADED
        end
        
        if
        0D42: load_txd "HuEt5" from "ME\\MS5.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt5" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt5"
            :SKIP_LOADING_TXD_SLOT5_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0  
            end
        end    
    end
    
///////////////////////////////6 слот///////////////////////////////
if
0@ == 5
    then
    
    if
    0AAB:   file_exists "ME\MS6.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS6.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS6.TXD"
        then
        0D43: 0@ = txd "HuEt6" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT6_ALREADY_LOADED
        end
                
        if
        0D42: load_txd "HuEt6" from "ME\\MS6.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt6" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt6"
            :SKIP_LOADING_TXD_SLOT6_ALREADY_LOADED            
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////7 слот///////////////////////////////
if
0@ == 6
    then
    
    if
    0AAB:   file_exists "ME\MS7.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS7.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS7.TXD"
        then
        0D43: 0@ = txd "HuEt7" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT7_ALREADY_LOADED
        end
            
        if
        0D42: load_txd "HuEt7" from "ME\\MS7.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt7" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt7"
            :SKIP_LOADING_TXD_SLOT7_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0 
            end
        end    
    end
    
///////////////////////////////8 слот///////////////////////////////
if
0@ == 7
    then
    
    if
    0AAB:   file_exists "ME\MS8.PNG"
        then
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from "ME\\MS8.png" // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1  
            return 
            end
        end
    
    if
    0AAB:   file_exists "ME\MS8.TXD"
        then
        0D43: 0@ = txd "HuEt8" id
        if
        not 0@ == -1
        then
        jump to @SKIP_LOADING_TXD_SLOT8_ALREADY_LOADED
        end
            
        if
        0D42: load_txd "HuEt8" from "ME\\MS8.TXD" // IF and SET 
            then
            0D43: 0@ = txd "HuEt8" id
            0AF1: write_int 0@ to_ini_file "debug\zameTXD.ini" section "IDS" key "HuEt8"
            :SKIP_LOADING_TXD_SLOT8_ALREADY_LOADED
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture "preview" in_dictionary 0@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0   
            end
        end    
    end                            

return 

:UNLOAD_MISSION_FILES_BEFORE_LOADING_OTHER_SHIT

if
ZAME_MISSION_LOAD_NUMBER == 1
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 1 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 1 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 2
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 2 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 2 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 3
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 3 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 3 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 4
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 4 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 4 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 5
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 5 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 5 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 6
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 6 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 6 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 7
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 7 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 7 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

if
ZAME_MISSION_LOAD_NUMBER == 8
then
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Default.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.Stories.Priority" key "ZAME MISSION 8 FILES FOLDER"
0AF1: write_int 0 to_ini_file "modloader\modloader.ini" section "Profiles.United.Priority" key "ZAME MISSION 8 FILES FOLDER"
gosub @ZAME_WAIT_FOR_MODLOADER_UNUPDATE
end

return

:ZAME_WAIT_FOR_MODLOADER_UNUPDATE

32@ = 0

repeat
wait 0
fade 0 0
09FD: get_gxt_string 'ZGATMFE' width_to 1@ 

if
32@ > 5000
    then
    return
    end

until 1@ < 1

return