////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TARGETS_SETTINGS
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE117'
08D4: $PANEL = create_panel_with_title 'SE10' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1

if
8A4B: not  controls_set_to_joystick
then 
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE21' 'SE25' 'SE22' 'SE26' 'SE27' 'SE28' 'SE29' 'SE23' 'SE24' 'SE33' 'SE44' 'GAME164'
else
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE21' 'SE25' 'SE22' 'SE26' 'SE27' 'SE28' 'SE29' 'SE23' 'SE33' 'SE44' 'GAME164' 'dummy'
end

//'GAME164'

if
not ZAME_OBJECTS_COUNT > 0
then
08D9: set_panel $PANEL row 7 enable 0
end
 
wait 100
ZAME_RECREATE_OBJECTIVE_FLAG = 0     

:TARGETS_SETTINGS_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @TARGETS_SETTINGS_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100

if
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
jump @zame_menu_37888
end
 
jump @ZAME_MAIN_MENU

:TARGETS_SETTINGS_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @TARGETS_SETTINGS_CLOSE_CHECK

08D7: 0@ = panel $PANEL active_row 
08DA: remove_panel $PANEL 
Text.RemoveTextBox

if
8A4B: not  controls_set_to_joystick
then
0871: init_jump_table 0@ total_jumps 12 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_menu_25139 1 @zame_menu_teleport_25139 2 @ZAME_SPEC_INF_CREATE_MENU 3 @ZAME_ZSPAWN_CORD_CREATE_MENU 4 @zame_menu_26769 5 @zame_menu_27207 6 @zame_menu_27645 
0872: jump_table_jumps 7 @zame_menu_object_move 8 @FXT_NAME_SELECT 9 @ZAME_CAMERA_ACTION 10 @ZAME_PICKUP_OBJECTIVE_PRE 11 @TARGETS_SETTINGS2 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
else
0871: init_jump_table 0@ total_jumps 12 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_menu_25139 1 @zame_menu_teleport_25139 2 @ZAME_SPEC_INF_CREATE_MENU 3 @ZAME_ZSPAWN_CORD_CREATE_MENU 4 @zame_menu_26769 5 @zame_menu_27207 6 @zame_menu_27645 
0872: jump_table_jumps 7 @zame_menu_object_move 8 @ZAME_CAMERA_ACTION 9 @ZAME_PICKUP_OBJECTIVE_PRE 10 @TARGETS_SETTINGS2 11 @TARGETS_SETTINGS2 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TARGETS_SETTINGS2
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE117'
08D4: $PANEL = create_panel_with_title 'SE10' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
if
8A4B: not  controls_set_to_joystick
then
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE51' 'SE53' 'SE55' 'SE197' 'SE198' 'SE199' 'SE243' 'SE300' 'SE303' 'SE316' 'SE319' 'GAME164'  
else 
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE51' 'SE53' 'SE55' 'SE300' 'SE303' 'SE316' 'SE333' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy'
end

if
not ZAME_OBJECTS_COUNT > 0
then
08D9: set_panel $PANEL row 1 enable 0
end

if
not ZAME_OBJECTIVES_COUNT > 0
then
08D9: set_panel $PANEL row 10 enable 0
end
 
wait 100
ZAME_RECREATE_OBJECTIVE_FLAG = 0     

:TARGETS_SETTINGS2_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @TARGETS_SETTINGS2_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS

:TARGETS_SETTINGS2_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @TARGETS_SETTINGS2_CLOSE_CHECK

08D7: 0@ = panel $PANEL active_row 
08DA: remove_panel $PANEL 
Text.RemoveTextBox
if
8A4B: not  controls_set_to_joystick
then
0871: init_jump_table 0@ total_jumps 12 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_menu_explode_trigger_27207 1 @zame_menu_object_destroy 2 @zame_menu_weather_change_21732 3 @AUD_NAME_SELECT 4 @MUS_NAME_SELECT 5 @IFP_NAME_SELECT 6 @TXD_NAME_SELECT 
0872: jump_table_jumps 7 @FADE_IN_OUT_SELECT 8 @SAVESTATUS_ON_OFF_SELECT 9 @BOMBARDING_SELECT 10 @OBJECTIVE_GOTO_SELECT 11 @TARGETS_SETTINGS3 12 @ZAME_MENU_PLAYER_SETTINGS_18973 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
else
0871: init_jump_table 0@ total_jumps 11 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_menu_explode_trigger_27207 1 @zame_menu_object_destroy 2 @zame_menu_weather_change_21732 3 @FADE_IN_OUT_SELECT 4 @SAVESTATUS_ON_OFF_SELECT 5 @BOMBARDING_SELECT 6 @ZAME_HUMAN_ENEMY_CREATE_MENU 
0872: jump_table_jumps 7 @ZAME_OPEN_CHECK 8 @ZAME_OPEN_CHECK 9 @ZAME_OPEN_CHECK 10 @ZAME_OPEN_CHECK 11 @ZAME_OPEN_CHECK 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TARGETS_SETTINGS3
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE117'
08D4: $PANEL = create_panel_with_title 'SE10' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
if
8A4B: not  controls_set_to_joystick
then
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE333' 'SE408' 'SE411' 'SE412' 'SE513' 'SE524' 'SE547' 'SE548' 'SE549' 'SE550' 'SE551' 'GAME164' 
else 
//08DB: set_panel $PANEL column 0 header 'dummy' data 'SE51' 'dummy' 'dummy' 'SE300' 'SE303' 'SE316' 'SE333' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy'
end

if
not ZAME_OBJECTS_COUNT > 0
then
08D9: set_panel $PANEL row 8 enable 0
end

//if
//not ZAME_OBJECTS_COUNT > 0
//then
//08D9: set_panel $PANEL row 1 enable 0
//end
//
//if
//not ZAME_OBJECTIVES_COUNT > 0
//then
//08D9: set_panel $PANEL row 10 enable 0
//end
 
wait 100
ZAME_RECREATE_OBJECTIVE_FLAG = 0     

:TARGETS_SETTINGS3_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @TARGETS_SETTINGS3_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS2

:TARGETS_SETTINGS3_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @TARGETS_SETTINGS3_CLOSE_CHECK

08D7: 0@ = panel $PANEL active_row 
08DA: remove_panel $PANEL 
Text.RemoveTextBox
if
8A4B: not  controls_set_to_joystick
then
0871: init_jump_table 0@ total_jumps 12 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @ZAME_HUMAN_ENEMY_CREATE_MENU 1 @zame_ally_jump_pre 2 @ZAME_CAR_ADVENTRUE_JUMP_PRE 3 @CAM_SHAKE_SELECT 4 @KONTROL_TO4KA_CREATE 5 @CHANGE_TIME_OBJECTIVE_21408 6 @ZAME_CODENUMBER_OBJECTIVE 
0872: jump_table_jumps 7 @ZAME_REMOVE_WEPS_OBJECTIVE 8 @zame_menu_object_grab 9 @zame_menu_lookphoto_point 10 @zame_menu_protect_teammate 11 @TARGETS_SETTINGS4 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
else
//0871: init_jump_table 0@ total_jumps 11 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_menu_explode_trigger_27207 1 @zame_menu_object_destroy 2 @zame_menu_weather_change_21732 3 @FADE_IN_OUT_SELECT 4 @SAVESTATUS_ON_OFF_SELECT 5 @BOMBARDING_SELECT 6 @ZAME_HUMAN_ENEMY_CREATE_MENU 
//0872: jump_table_jumps 7 @ZAME_OPEN_CHECK 8 @ZAME_OPEN_CHECK 9 @ZAME_OPEN_CHECK 10 @ZAME_OPEN_CHECK 11 @ZAME_OPEN_CHECK 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    

:ZAME_CAR_ADVENTRUE_JUMP_PRE
ZAME_CREATE_CAR_ADVETNURE_OBJ = 1
008B: ZAME_ADVENTURE_CAR_UKAZATEL = ZAME_CAR_ADVENTURE_CAR // (int)
008B: ZAME_ADVENTURE_CAR_UKAZATEL2 = ZAME_CAR_ADVENTURE_CAR // (int)
if
056E:   car ZAME_CAR_ADVENTURE_CAR defined
then

///////////////////////////////////////////////////

while true
wait 0
text.ShowH('SE427',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then   
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end   
    
    car.StorePos(ZAME_CAR_ADVENTURE_CAR,ZAME_CAR_ADVENTURE_USE_PREV_CAR_X,ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y,ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z)
    ZAME_CAR_ADVENTURE_USE_PREV_CAR_A = car.Angle(ZAME_CAR_ADVENTURE_CAR)
    03F3: get_car ZAME_CAR_ADVENTURE_CAR primary_color_to ZAME_CAR_ADVENTURE_USE_PREV_CAR_C1 secondary_color_to ZAME_CAR_ADVENTURE_USE_PREV_CAR_C2    
    0441: ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID = car ZAME_CAR_ADVENTURE_CAR model
    
    0085: 25@ = ZAME_CAR_ADVENTURE_CAR // (int)
    car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,false)
    099A: set_car ZAME_CAR_ADVENTURE_CAR collision_detection 1
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    car.PutAt(ZAME_CAR_ADVENTURE_CAR,2@,3@,4@)
    036A: put_actor PLAYER_ACTOR in_car ZAME_CAR_ADVENTURE_CAR  
    ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG = 1 
    0581: enable_radar 1 
    Player.CanMove(PLAYER_CHAR) = True
    018C: play_sound 1057 at 0.0 0.0 0.0 
    text.ClearAll()
    text.RemoveTextBox()
    wait 100      
    jump to @CAR_ADVENTURE_DO_PREV_CAR 
    end  
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    gosub @CARSPAWN_SELECT_ALT_NABOR_CHECK
        
//    gosub @CARSPAWN_CHEATCODE    
    ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL = 1    
    repeat
    wait 0    
    
    if
    ZAME_CREATE_CAR_ADVETNURE_OBJ == 0
    then
    jump to @TARGETS_SETTINGS3
    end
    
    until 056E:   car ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL defined
    008B: 25@ = ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL // (int)
      
    break
    end      
        
end  

///////////////////////////////////////////////////

else
gosub @CARSPAWN_SELECT_ALT_NABOR_CHECK
//gosub @CARSPAWN_CHEATCODE
ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL = 1    
repeat
wait 0

if
ZAME_CREATE_CAR_ADVETNURE_OBJ == 0
then
jump to @TARGETS_SETTINGS3
end

until 056E:   car ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL defined
008B: 25@ = ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL // (int)

end

if
ZAME_CREATE_CAR_ADVETNURE_OBJ == 0
then
jump to @TARGETS_SETTINGS3
end

0085: ZAME_CAR_ADVENTURE_CAR = 25@ // (int)

////////////////////////////////////////////////////////////////////

0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE415'
018C: play_sound 1057 at 0.0 0.0 0.0 
wait 100 
    
repeat
wait 0 

if
8A2A: not  text_box 'SE415' displayed
then
0512: show_permanent_text_box 'SE415'
end
    
if 
00E1:   player 0 pressed_key 11 
then
03E6: remove_text_box 
0581: enable_radar 0
0407: store_coords_to 1@ 2@ 3@ from_car ZAME_CAR_ADVENTURE_CAR with_offset 0.0 0.0 1.0
0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
car.Destroy(ZAME_CAR_ADVENTURE_CAR)

if
ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG == 1
    then
    0085: 25@ = ZAME_CAR_ADVENTURE_CAR // (int)
    gosub @CREATE_PREV_ADVENTURE_CAR
    0085: ZAME_CAR_ADVENTURE_CAR = 25@ // (int)
    end
 
jump to @TARGETS_SETTINGS3
end 
    
if 
00E1:   player 0 pressed_key 10
    then
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    car.StorePos(ZAME_CAR_ADVENTURE_CAR,2@,3@,4@) 
    
    0@ = 0
    0@ = Marker.CreateIconAndSphere2(ZAME_CAR_ADVENTURE_TRIGGER_ICON_ID, 2@, 3@, 4@)
    
    ZAME_OBJECT_HANLDE = Object.Init(ZAME_CAR_ADVENTURE_OBJECT_ID, 2@, 3@, 4@)
    0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
    0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
    
    0AF1: write_int 24 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
    128@ = car.Angle(ZAME_CAR_ADVENTURE_CAR)
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
    
    0441: 7@ = car ZAME_CAR_ADVENTURE_CAR model
    0AF1: write_int 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_ID"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Z"
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_A"    
    03F3: get_car ZAME_CAR_ADVENTURE_CAR primary_color_to 5@ secondary_color_to 6@
    0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1"
    0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_INT"            
    break
    end 
        
until false

:CAR_ADVENTURE_DO_PREV_CAR

01EC: make_car ZAME_CAR_ADVENTURE_CAR very_heavy 0

//0AD1: show_formatted_text_highpriority "OBJ STRING FOR POINTS PARAMS %s" time 2000 v$RACE_FILE
//wait 2000

////////////////////////////////////////////////////////////////////

ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL = -1

///////////////Скриптовая поездка?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE589',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then
    
    0AF0: get_int 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CARREC_NUM"
    if
    2@ > 83
    then
    text.RemoveTextBox()
    text.ClearAll()
    text.ShowH('SE623',5000,1)
    wait 5000
    jump to @CAR_ADVENTURE_ADD_DEST
    end                     
    
    car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,true)
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SCRIPTED_ON_RAILS_DRIVE"
    0AF1: write_int 5000 to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_HEALTH"        
    gosub @SCRIPTED_DRIVE_ID_ALLY_FOR_DRIVER_NUMBER_SELECT
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    gosub @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT
    0687: clear_actor PLAYER_ACTOR task
    camera.Restore_WithJumpCut()
    ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL = 0
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    gosub @ZAME_CARREC_RECORD           
    text.ClearAll()
    jump to @CAR_ADVENTURE_END_DEST2
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then    
    gosub @SCRIPTED_CHASE_SELECT    
    text.ClearAll()
    break
    end
                                
end

:CAR_ADVENTURE_ADD_DEST
0512: show_permanent_text_box 'SE418'
018C: play_sound 1057 at 0.0 0.0 0.0 
wait 100 
    
repeat
wait 0 

if
8A2A: not  text_box 'SE418' displayed
then
0512: show_permanent_text_box 'SE418'
end
        
if 
00E1:   player 0 pressed_key 11
    then         
    
    car.StorePos(ZAME_CAR_ADVENTURE_CAR,2@,3@,4@)
    5@ = car.Angle(ZAME_CAR_ADVENTURE_CAR)
    
    /////////////////////////////////////////////////////////////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    while true
    wait 0
    text.ShowH('SE419',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then  
        ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL += 1      
        0AD3: v$RACE_FILE2 = format "DEST_X%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
        0AD3: v$RACE_FILE2 = format "DEST_Y%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
        0AD3: v$RACE_FILE2 = format "DEST_Z%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
        0AD3: v$RACE_FILE2 = format "DEST_A%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2          
        ZAME_OBJECT_HANLDE = Object.Init(ZAME_CAR_ADVENTURE_POINT2_ID, 2@, 3@, 4@)
        0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
        0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR 
        0@ = 0
        018A: 0@ = create_checkpoint_at 2@ 3@ 4@
        marker.SetIconSize(0@,2)  
        text.ClearAll()
        
        if
        not ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG == 1
        then
        0085: ZAME_CAR_ADVENTURE_USE_PREV_END_X = 2@ // (int)
        0085: ZAME_CAR_ADVENTURE_USE_PREV_END_Y = 3@ // (int)
        0085: ZAME_CAR_ADVENTURE_USE_PREV_END_Z = 4@ // (int)
        0085: ZAME_CAR_ADVENTURE_USE_PREV_END_A = 5@ // (int) 
        end
           
        jump to @CAR_ADVENTURE_END_DEST 
        end  
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then  
        ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL += 1            
        0AD3: v$RACE_FILE2 = format "DEST_X%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
        0AD3: v$RACE_FILE2 = format "DEST_Y%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
        0AD3: v$RACE_FILE2 = format "DEST_Z%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
        0AD3: v$RACE_FILE2 = format "DEST_A%d" ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL
        0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2         
        ZAME_OBJECT_HANLDE = Object.Init(ZAME_CAR_ADVENTURE_POINT_ID, 2@, 3@, 4@)
        0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
        0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR 
        0@ = 0
        018A: 0@ = create_checkpoint_at 2@ 3@ 4@
        marker.SetIconSize(0@,2)         
        jump to @CAR_ADVENTURE_ADD_DEST     
        end      
        
    end  
    
    ///////////////////////////////////////////////////////////////////////////////////// 
                 
    end 
        
until false

:CAR_ADVENTURE_END_DEST

//0AD1: show_formatted_text_highpriority "OBJ STRING FOR TRIGGER PARAMS %s" time 2000 v$RACE_FILE
//wait 2000   

///////////////Не выходить в конце поездки чтобы продолжить её после других триггеров?///////////////////

text.ClearAll()
text.RemoveTextBox()
            
while true
wait 0
            
text.ShowH('SE588',10,1)
                
if
0E3E: is_button_just_pressed 0 button 11
    then 
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DONT_EXIT_AFTER_DRIVE"               
    text.ClearAll()
    break
    end
                
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    break
    end
                                
end

:CAR_ADVENTURE_END_DEST2

0AF1: write_int ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL to_ini_file "me\temp.dat" section v$RACE_FILE key "DESTS_COUNT"
0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX" 

0407: store_coords_to 1@ 2@ 3@ from_car ZAME_CAR_ADVENTURE_CAR with_offset 0.0 0.0 1.0
0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
//car.Destroy(ZAME_CAR_ADVENTURE_CAR)
if
ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG == 1
then
0085: 2@ = ZAME_CAR_ADVENTURE_USE_PREV_END_X // (int)
0085: 3@ = ZAME_CAR_ADVENTURE_USE_PREV_END_Y // (int)
0085: 4@ = ZAME_CAR_ADVENTURE_USE_PREV_END_Z // (int)
0085: 5@ = ZAME_CAR_ADVENTURE_USE_PREV_END_A // (int)
else
0AF2: get_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_X"
0AF2: get_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Y"
0AF2: get_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Z"
0AF2: get_float 5@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_A"
end

0EB4: set_car_coordinates_simple ZAME_CAR_ADVENTURE_CAR position 2@ 3@ 4@
car.Angle(ZAME_CAR_ADVENTURE_CAR) = 5@
099A: set_car ZAME_CAR_ADVENTURE_CAR collision_detection 0
car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,true)
car.SetImmunities(ZAME_CAR_ADVENTURE_CAR,1,1,1,1,1)

if
ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG == 1
    then
    ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG = 0
    0085: 25@ = ZAME_CAR_ADVENTURE_CAR // (int)
    gosub @CREATE_PREV_ADVENTURE_CAR
    0085: ZAME_CAR_ADVENTURE_CAR = 25@ // (int)
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "USE_ALREADY_CREATED_CAR"
    0@ = 0    
    0@ = Marker.CreateIconAndSphere2(ZAME_CAR_ADVENTURE_TRIGGER_ICON_ID, ZAME_CAR_ADVENTURE_USE_PREV_CAR_X, ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y, ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z)    
    ZAME_OBJECT_HANLDE = Object.Init(ZAME_CAR_ADVENTURE_OBJECT_ID, ZAME_CAR_ADVENTURE_USE_PREV_CAR_X, ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y, ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z)
    0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
    0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR    
    0AF1: write_int 24 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_CAR_X to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_CAR_A to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"    
    0AF1: write_int ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_ID"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_END_X to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_X"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_END_Y to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Y"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_END_Z to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Z"
    0AF3: write_float ZAME_CAR_ADVENTURE_USE_PREV_END_A to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_A"
    0EB4: set_car_coordinates_simple ZAME_CAR_ADVENTURE_CAR position 2@ 3@ 4@
    car.Angle(ZAME_CAR_ADVENTURE_CAR) = 5@
    099A: set_car ZAME_CAR_ADVENTURE_CAR collision_detection 0
    car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,true)
    car.SetImmunities(ZAME_CAR_ADVENTURE_CAR,1,1,1,1,1)    
    0AF1: write_int ZAME_CAR_ADVENTURE_USE_PREV_CAR_C1 to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1"
    0AF1: write_int ZAME_CAR_ADVENTURE_USE_PREV_CAR_C2 to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_INT"           
    end
    
0AF0: get_int 6@ from_ini_file "me\temp.dat" section v$RACE_FILE key "SCRIPTED_ON_RAILS_DRIVE"
if
6@ >= 1
    then                            
    0AF0: get_int 6@ from_ini_file "me\temp.dat" section v$RACE_FILE key "SCRIPTED_ON_RAILS_DRIVE"
    if
    6@ == 2
        then
        
        end            
    end    

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end
    
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351
    
if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'se425' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE425B' time 2000 flag 1
gosub @zame_recreated_trigger_sound        
gosub @MISSION_SAVE_INITIALIZATION
end
     
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3

:SCRIPTED_CHASE_SELECT

///////////////Скриптовая поездка за кем-то?///////////////////

text.ClearAll()
text.RemoveTextBox()
                
while true
wait 0
                
text.ShowH('SE608',10,1)
                    
if
0E3E: is_button_just_pressed 0 button 11
    then 
    text.ClearAll()
    text.RemoveTextBox()
    car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,true)
    0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "SCRIPTED_ON_RAILS_DRIVE"
    gosub @SCRIPTED_CHASE_SELECT2
    jump to @CAR_ADVENTURE_END_DEST2
    end
if
0E3E: is_button_just_pressed 0 button 10
    then 
    text.ClearAll()
    text.RemoveTextBox()
    return
    end    
    
    
end
    
return    

:SCRIPTED_CHASE_SELECT2

/////////////////////////////////////////////////////////////////////////////////
                          
if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end
        
if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

gosub @CHASER_ID_SELECT

/////////////////////////////////////////////////////////////////////////////////

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

ZAME_CAR_ADVENTURE_DEST_POINTS_TOTAL = 0

gosub @ZAME_CARREC_RECORD   
text.ClearAll()

0AF0: get_int 6@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_ID"

while not model.Available(6@)
wait 0
model.Load(6@)
end

actor.CreateAsDriver(0@,26,6@,ZAME_CAR_ADVENTURE_CAR)
actor.Health(0@) = 9999
actor.SetImmunities(0@,1,1,1,1,1)

/////////////////////////////////////////////////////////////////////////////////
       
0AF2: get_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_X"
0AF2: get_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Y"
0AF2: get_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Z"
0AF2: get_float 5@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_A"
actor.PutAtNoOffset(PLAYER_ACTOR,2@,3@,4@)
actor.Angle(PLAYER_ACTOR) = 5@
camera.Restore_WithJumpCut()
create_thread @3D_REFR     

/////////////////////////////////////////////////////////////////////////////////////
    
if
056E:   car ZAME_ADVENTURE_CAR_UKAZATEL defined
then

///////////////////////////////////////////////////

while true
wait 0
text.ShowH('SE621',100,1)

if
0E3E: is_button_just_pressed 0 button 11
    then   
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end   
    
    car.StorePos(ZAME_ADVENTURE_CAR_UKAZATEL,ZAME_CAR_ADVENTURE_USE_PREV_CAR_X,ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y,ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z)
    ZAME_CAR_ADVENTURE_USE_PREV_CAR_A = car.Angle(ZAME_ADVENTURE_CAR_UKAZATEL)
    03F3: get_car ZAME_ADVENTURE_CAR_UKAZATEL primary_color_to ZAME_CAR_ADVENTURE_USE_PREV_CAR_C1 secondary_color_to ZAME_CAR_ADVENTURE_USE_PREV_CAR_C2    
    0441: ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID = car ZAME_ADVENTURE_CAR_UKAZATEL model
    
    0085: 25@ = ZAME_ADVENTURE_CAR_UKAZATEL // (int)
    car.LockInCurrentPosition(ZAME_ADVENTURE_CAR_UKAZATEL,false)
    099A: set_car ZAME_ADVENTURE_CAR_UKAZATEL collision_detection 1
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    car.PutAt(ZAME_ADVENTURE_CAR_UKAZATEL,2@,3@,4@)
    036A: put_actor PLAYER_ACTOR in_car ZAME_ADVENTURE_CAR_UKAZATEL  
    ZAME_CAR_ADVENTURE_USE_PREV_CAR_FLAG = 1 
    0581: enable_radar 1 
    Player.CanMove(PLAYER_CHAR) = True
    018C: play_sound 1057 at 0.0 0.0 0.0 
    text.ClearAll()
    text.RemoveTextBox()
    wait 100      
    jump to @CAR_ADVENTURE_DO_PREV_CAR222 
    end  

if
0E3E: is_button_just_pressed 0 button 10
    then
    :CREATE_NEW_CAR_FOR_CHASE
    gosub @CARSPAWN_SELECT_ALT_NABOR_CHECK

//    gosub @CARSPAWN_CHEATCODE    
    ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL = 1    
    repeat
    wait 0    
    
    if
    ZAME_CREATE_CAR_ADVETNURE_OBJ == 0
    then
    jump to @TARGETS_SETTINGS3
    end
    
    until 056E:   car ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL defined
    008B: 25@ = ZAME_CREATE_CAR_ADVETNURE_OBJ_CALL // (int)
      
    jump to @CAR_ADVENTURE_DO_PREV_CAR222
    end      

end  
else
jump to @CREATE_NEW_CAR_FOR_CHASE
end

///////////////////////////////////////////////////

:CAR_ADVENTURE_DO_PREV_CAR222

0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE619'
018C: play_sound 1057 at 0.0 0.0 0.0 
wait 100 

////////////////////////////////////////////////////////////////////
    
repeat
wait 0 

if
8A2A: not  text_box 'SE619' displayed
then
0512: show_permanent_text_box 'SE619'
end
    
if 
00E1:   player 0 pressed_key 11 
then
03E6: remove_text_box 
0581: enable_radar 0
0407: store_coords_to 1@ 2@ 3@ from_car 25@ with_offset 0.0 0.0 1.0
0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
wait 0
car.Destroy(25@) 
jump to @TRIGGERS_SETTINGS
end 
            
if 
00E1:   player 0 pressed_key 10
    then
            
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
            
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
            
    car.StorePos(25@,2@,3@,4@)    
    099A: set_car 25@ collision_detection 0
    car.LockInCurrentPosition(25@,true)
    car.SetImmunities(25@,1,1,1,1,1)  
            
    0@ = 0
    0@ = Marker.CreateIconAndSphere2(ZAME_CAR_ADVENTURE_TRIGGER_ICON_ID, 2@, 3@, 4@)
            
    ZAME_OBJECT_HANLDE = Object.Init(ZAME_CAR_ADVENTURE_OBJECT_ID, 2@, 3@, 4@)
    0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
    0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
                
    0441: 7@ = car 25@ model
    0AF1: write_int 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_ID_2"
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_X_2"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Y_2"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Z_2"
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_A_2"    
    03F3: get_car 25@ primary_color_to 5@ secondary_color_to 6@
    0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1_2"
    0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2_2"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_INT_2" 
            
    0AF2: get_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_X_2"
    0AF2: get_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Y_2"
    0AF2: get_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_Z_2"
    0AF2: get_float 5@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_A_2" 
    0AF0: get_int 6@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_ID_2"  
    0AF0: get_int 7@ from_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1_2" 
    0AF0: get_int 8@ from_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2_2"
    0407: store_coords_to 1@ 2@ 3@ from_car 25@ with_offset 0.0 0.0 1.0
    0362: remove_actor PLAYER_ACTOR from_car_and_place_at 1@ 2@ 3@
    wait 0
    car.Destroy(25@) 
    gosub @CAR_CREATE_ZAME_KUKLA2                                   
    return
    end                        
                                        
until false
        
////////////////////////////////////////////////////////////////////
        
return

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CHASER_ID_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE609'

while true
wait 0

if
8A2A: not  text_box 'SE609' displayed
    then
    0512: show_permanent_text_box 'SE609'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE620" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE620" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "DRIVER_ID"    
    return
    
    end

end

:zame_ally_jump_pre

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE509',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    jump to @zame_ally_jump_pre_delete
    end
    
end
    
//////////////////////////////

ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM = 4
jump to @ZAME_MENU_PLAYER_SETTINGS_18973

:zame_menu_25139
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'se39' 

:zame_menu_25161
wait 0 

if
8A2A: not  text_box 'SE39' displayed
then
0512: show_permanent_text_box 'SE39'
end

if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_25523 
03E6: remove_text_box  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CHECKPOINT_TRIGGER_ICON_ID, 2@, 3@, 4@)

ZAME_OBJECT_HANLDE = Object.Init(ZAME_CHECKPOINT_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CHECKPOINT_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CHECKPOINT_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CHECKPOINT_Z"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

if or
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_RECREATE_OBJECTIVE_FLAG == 0   
then

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE531',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "HIDDEN_FLAG"
    
    //////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    while true
    wait 0
    text.ShowH('SE531B',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()    
        0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "HIDDEN_FLAG"
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()        
        break
        end
        
    end
        
    //////////////////////////////
    
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
    
end
    
//////////////////////////////

end

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'se45' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE45B' time 2000 flag 1
gosub @zame_recreated_trigger_sound        
gosub @MISSION_SAVE_INITIALIZATION
end 
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS

:zame_ally_jump_pre_delete

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

gosub @ALLY_DELETE_ID_NUMBER_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
then
ZAME_NAME_AUD_TYPING_FLAG = 0
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3
end

Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = Marker.CreateIconAndSphere2(ZAME_ALLY_TRIGGER_ICON_ID, 2@, 3@, 4@)

ZAME_OBJECT_HANLDE = Object.Init(ZAME_DEALLY_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

0AF1: write_int 23 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DELETE_TEAMMATE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE409A' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE409B2' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end 
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3

:zame_created_trigger_sound
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
gosub @ZAME_OBJ_ORDER_CONSTRUCT
ZAME_MIS_LOADED_FLAG = 1
return

:zame_recreated_trigger_sound
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
return

:zame_created_object_sound
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
ZAME_MIS_LOADED_FLAG = 1
return

:zame_recreated_object_sound
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
return

:zame_created_pickup_sound
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
ZAME_MIS_LOADED_FLAG = 1
return

:zame_recreated_pickup_sound
Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
return

:zame_menu_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_25435
0@ = 0 
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_25435
return 

:zame_menu_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_25521
0@ = 0 
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_25521
return 

:zame_menu_25523
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_teleport_25139
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE32' 

:zame_menu_teleport_25161
wait 0 

if
8A2A: not  text_box 'SE32' displayed
then
0512: show_permanent_text_box 'SE32'
end

if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_teleport_25523 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_TELEPORT_TRIGGER_ICON_ID, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_TELEPORT_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
077E: get_active_interior_to 6@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TELEPORT_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TELEPORT_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TELEPORT_Z"
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TELEPORT_A"
0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TELEPORT_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
    
while true
wait 0
text.ShowH('SE533',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_TP_TEAMMATES"
    break
    end
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_TP_TEAMMATES"        
    break
    end
        
end
        
//////////////////////////////

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_teleport_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE57' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE57B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end    
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS

:zame_menu_teleport_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_teleport_25435 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_teleport_25435
return 

:zame_menu_teleport_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_teleport_25521
0@ = 0 
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_teleport_25521
return 

:zame_menu_teleport_25523
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_teleport_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_SPEC_INF_CREATE_MENU
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE221'
08D4: $PANEL = create_panel_with_title 'SE52' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'SE58' data 'SE139' 'SE140' 'SE141' 'SE142' 'SE142H' 'SE142C' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100     

:ZAME_SPEC_INF_CREATE_MENU_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_SPEC_INF_CREATE_MENU_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS

:ZAME_SPEC_INF_CREATE_MENU_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_SPEC_INF_CREATE_MENU_CLOSE_CHECK

08D7: 24@ = panel $PANEL active_row 
08DA: remove_panel $PANEL

if and
not 24@ == 4
not 24@ == 5
then
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE222'
08D4: $PANEL = create_panel_with_title 'SE52' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'SE50' data 'SE154' 'SE155' 'SE156' 'SE157' 'SE158' 'SE159' 'SE160' 'SE161' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100     
else
25@ = 0     
jump to @ZAME_SPEC_INF_CREATE_HAZMAT_JUMP
end

:ZAME_SPEC_INF_CREATE_MENU2_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_SPEC_INF_CREATE_MENU2_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS

:ZAME_SPEC_INF_CREATE_MENU2_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_SPEC_INF_CREATE_MENU2_CLOSE_CHECK

08D7: 25@ = panel $PANEL active_row 
08DA: remove_panel $PANEL

:ZAME_SPEC_INF_CREATE_HAZMAT_JUMP

Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE223'
08D4: $PANEL = create_panel_with_title 'SE52' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'SE46' data 'SE48' 'SE47' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100     

:ZAME_SPEC_INF_CREATE_MENU3_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_SPEC_INF_CREATE_MENU3_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS

:ZAME_SPEC_INF_CREATE_MENU3_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_SPEC_INF_CREATE_MENU3_CLOSE_CHECK

08D7: 26@ = panel $PANEL active_row 
08DA: remove_panel $PANEL  
 
Text.RemoveTextBox
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE67' 

:zame_menu_specinf_25161
wait 0 

if
8A2A: not  text_box 'SE67' displayed
then
0512: show_permanent_text_box 'SE67'
end

if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_specinf_25523 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_SPECINF_TRIGGER_ICON_ID, 2@, 3@, 4@)
077E: get_active_interior_to 6@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end
 
0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_Z"
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_A"
0AF1: write_int 24@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_TYPE"

0AF1: write_int 25@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_COUNT"
0AF1: write_int 26@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_NEED_TO_KILL"
0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

if and
24@ == 2
ZAME_RECREATE_OBJECTIVE_FLAG == 0   
then

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE214',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "WITCH_LYING_FLAG"
    ZAME_TEMP_FUCKEEE = 1
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    
    //////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    while true
    wait 0
    text.ShowH('SE214B',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()    
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "WITCH_AGRED_FLAG"
        ZAME_TEMP_FUCKEEE = 1
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()        
        break
        end
        
    end
        
//////////////////////////////
    
    text.ClearAll()        
    break
    end
    
end
    
//////////////////////////////

end

//////////////////////////////

if and
8A4B: not  controls_set_to_joystick
not 24@ == 4
not 24@ == 5
then

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE290',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    gosub @SPECINF_HP_SELECT       
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
    
end    
    
end
    
//////////////////////////////

if
24@ == 0
then
ZAME_OBJECT_HANLDE = Object.Init(ZAME_TANK_OBJECT_ID, 2@, 3@, 4@)  
end
    
if
24@ == 1
then
ZAME_OBJECT_HANLDE = Object.Init(ZAME_HUNTER_OBJECT_ID, 2@, 3@, 4@)    
end
    
if
24@ == 2
then
ZAME_OBJECT_HANLDE = Object.Init(ZAME_WITCH_OBJECT_ID, 2@, 3@, 4@)    
end
    
if
24@ == 3
then
ZAME_OBJECT_HANLDE = Object.Init(ZAME_CHARGER_OBJECT_ID, 2@, 3@, 4@)  
end

if
24@ == 4
then
ZAME_OBJECT_HANLDE = Object.Init(ZAME_HAZMAT_OBJECT_ID, 2@, 3@, 4@)  
end

if
24@ == 5
then
ZAME_OBJECT_HANLDE = Object.Init(ZAME_CLOWN_OBJECT_ID, 2@, 3@, 4@)  
end
    
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR 

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_specinf_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE68' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE68B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS

:zame_menu_specinf_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_specinf_25435 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_specinf_25435
return 

:zame_menu_specinf_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_specinf_25521 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_specinf_25521
return 

:zame_menu_specinf_25523
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_specinf_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @ZAME_SPEC_INF_CREATE_MENU

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_ZSPAWN_CORD_CREATE_MENU
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE2'
08D4: $PANEL = create_panel_with_title 'SE52' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'SE26' data 'SE3' 'SE4' 'SE5' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100     

:ZAME_ZSPAWN_CORD_CREATE_MENU_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_ZSPAWN_CORD_CREATE_MENU_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS

:ZAME_ZSPAWN_CORD_CREATE_MENU_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_ZSPAWN_CORD_CREATE_MENU_CLOSE_CHECK

08D7: 24@ = panel $PANEL active_row 
08DA: remove_panel $PANEL

if
24@ == 2
then
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_INFCOORD_TRIGGER_ICON_ID, 2@, 3@, 4@)

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "INF_SPAWN_ON_CORD_OFF"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_infcord_25351 

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE93' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE93B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS
end

if
24@ == 1
then
jump to @zame_menu_infcord_mult
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_infcord_single
 
Text.RemoveTextBox
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE74' 

:zame_menu_infcord_25161
wait 0 

if
8A2A: not  text_box 'SE74' displayed
then
0512: show_permanent_text_box 'SE74'
end

if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_infcord_25523 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_INFCOORD_TRIGGER_ICON_ID, 2@, 3@, 4@)
if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "INFCORD_MULT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "INF_SPAWN_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "INF_SPAWN_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "INF_SPAWN_Z"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

ZAME_OBJECT_HANLDE = Object.Init(ZAME_ZOMBIE_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
        
while true
wait 0
text.ShowH('SE650',100,1)
            
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_CHANGE"        
    break
    end
            
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()  
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_CHANGE"      
    break
    end
            
end
            
//////////////////////////////

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_infcord_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE93' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE93B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS

/////////////////////////////////////////////////////////////////

:zame_menu_infcord_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_infcord_25435 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_infcord_25435
return 

:zame_menu_infcord_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_infcord_25521 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_infcord_25521
return 

:zame_menu_infcord_25523
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_infcord_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @ZAME_ZSPAWN_CORD_CREATE_MENU

/////////////////////////////////////////////////////////////////

:zame_menu_infcord_mult
 
Text.RemoveTextBox
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE75B'
28@ = 0 

:zame_menu_infcord_mult_25161
wait 0

if
8A2A: not  text_box 'SE75B' displayed
then
0512: show_permanent_text_box 'SE75B' 
end

if or
28@ > 19
0E3E: is_button_just_pressed 0 button 4
then
jump to @zame_menu_infcord_mult_end
end

if 
00E1:   player 0 pressed_key 11 
then
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @ZAME_ZSPAWN_CORD_CREATE_MENU 
end
 
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_infcord_mult_25161
 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "INFCORD_MULT"
0AF1: write_int 28@ to_ini_file "me\temp.dat" section v$RACE_FILE key "INFCORD_COUNT"

0AD3: v$RACE_FILE2 = format "INF_X%d" 28@
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
0AD3: v$RACE_FILE2 = format "INF_Y%d" 28@
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
0AD3: v$RACE_FILE2 = format "INF_Z%d" 28@
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2

ZAME_OBJECT_HANLDE = Object.Init(ZAME_ZOMBIE_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

28@ += 1
text.Show1Number('SE94',28@,2000,1)
018C: play_sound 1138 at 0.0 0.0 0.0
wait 100
text.RemoveTextBox()
0512: show_permanent_text_box 'SE75'
jump to @zame_menu_infcord_multb_25161

:zame_menu_infcord_multb_25161
wait 0

if
8A2A: not  text_box 'SE75' displayed
then
0512: show_permanent_text_box 'SE75' 
end

if or
28@ > 19
0E3E: is_button_just_pressed 0 button 4
then
jump to @zame_menu_infcord_mult_end
end
 
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_infcord_multb_25161
 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "INFCORD_MULT"
0AF1: write_int 28@ to_ini_file "me\temp.dat" section v$RACE_FILE key "INFCORD_COUNT"

0AD3: v$RACE_FILE2 = format "INF_X%d" 28@
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
0AD3: v$RACE_FILE2 = format "INF_Y%d" 28@
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2
0AD3: v$RACE_FILE2 = format "INF_Z%d" 28@
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key v$RACE_FILE2

ZAME_OBJECT_HANLDE = Object.Init(ZAME_ZOMBIE_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

text.Show1Number('SE94',28@, 2000,1)

28@ += 1
018C: play_sound 1138 at 0.0 0.0 0.0
wait 100
jump to @zame_menu_infcord_multb_25161

:zame_menu_infcord_mult_end

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
        
while true
wait 0
text.ShowH('SE650',100,1)
            
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_CHANGE"        
    break
    end
            
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll() 
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_CHANGE"       
    break
    end
            
end
            
//////////////////////////////

gosub @zame_menu_infcord_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE93' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE93B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_26769
0581: enable_radar 1 
0512: show_permanent_text_box 'se77'
4@ = 10  
wait 100 

:zame_menu_26800
wait 0

if
8A2A: not  text_box 'SE77' displayed
then
0512: show_permanent_text_box 'SE77'
end

if
4@ == 0
then
text.ShowH('SE534',300,1)
else
01E5: show_text_1number_highpriority GXT 'se78' number 4@ time 300 flag 1
end
    
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up  
jf @zame_menu_27081 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down  
jf @zame_menu_27117 
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_27044

if 
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end
 
0AF1: write_int 4 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "HORDE_SECONDS"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
                                 
0@ = 0                                 
0@ = marker.CreateIconAndSphere2(ZAME_HORDE_TRIGGER_ICON_ID, 2@,3@,4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_HORDE_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
gosub @zame_menu_25351

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'se79' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se79b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

jump @TARGETS_SETTINGS 

:zame_menu_27044
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_26800 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS 

:zame_menu_27081

if
80E1:   not player 0 pressed_key 14
then
4@ += 1
else
4@ += 10
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_26800 

:zame_menu_27117

if
80E1:   not player 0 pressed_key 14
then 
4@ -= 1
else
4@ -= 10
end 
 
if 
4@ < 1
then
4@ = 0
end 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_26800 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_27207
0581: enable_radar 1 
0512: show_permanent_text_box 'se82' 
5@ = 1
wait 100 

:zame_menu_27238
wait 0 

if
8A2A: not  text_box 'SE82' displayed
then
0512: show_permanent_text_box 'SE82'
end

01E5: show_text_1number_highpriority GXT 'se78' number 5@ time 300 flag 1  
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up 
jf @zame_menu_27519 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down 
jf @zame_menu_27555 
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_27482

if 
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE227',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "HIDDEN_TIMER_FLAG"        
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
    
end
    
//////////////////////////////
 
0AF1: write_int 5 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TIMER_SECONDS"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)                                                     
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

0@ = 0
0@ = marker.CreateIconAndSphere2(ZAME_TIMER_TRIGGER_ICON_ID, 2@,3@,4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_TIMER_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
gosub @zame_menu_25351

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'se79' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se79b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS 

:zame_menu_27482
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_27238 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS 

:zame_menu_27519

if
80E1:   not player 0 pressed_key 14
then 
5@ += 1
else
5@ += 10
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_27238 

:zame_menu_27555

if
80E1:   not player 0 pressed_key 14
then 
5@ -= 1
else
5@ -= 10
end
 
if 
5@ < 1 
then
5@ = 1
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_27238 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_27645
0512: show_permanent_text_box 'SE296' 
08D4: $PANEL = create_panel_with_title 'SE52' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'se97' data 'se98' 'se99' 'se100' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100  

:zame_menu_27826
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_27859 
08DA: remove_panel $PANEL 
jump @TARGETS_SETTINGS 

:zame_menu_27859
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_27826 
08D7: 24@ = panel $PANEL active_row 
08DA: remove_panel $PANEL 
03E6: remove_text_box
07A7: put_jetpack_on_actor PLAYER_ACTOR 

:zame_menu_28061
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'se96' 
wait 100 

:zame_menu_28087
wait 0 

if
8A2A: not  text_box 'SE96' displayed
then
0512: show_permanent_text_box 'SE96'
end

if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_28137 
03E6: remove_text_box 
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
ZAME_TEMP_FUCKEEE = Actor.Angle(PLAYER_ACTOR)
jump @zame_menu_28174 

:zame_menu_28137
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_28087 
Player.CanMove(PLAYER_CHAR) = False
0792: disembark_instantly_actor PLAYER_ACTOR
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS 

:zame_menu_28174
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'se102'
018C: play_sound 1057 at 0.0 0.0 0.0 
wait 100 

:zame_menu_28200
wait 0 

if
8A2A: not  text_box 'SE102' displayed
then
0512: show_permanent_text_box 'SE102'
end

if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_28307 
03E6: remove_text_box

0792: disembark_instantly_actor PLAYER_ACTOR

if 
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_SALVATION_TRIGGER_ICON_ID1, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_SALVATION_OBJECT_ID1, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
0AF1: write_int 6 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 24@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_TRANSPORT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_Z"
0AF3: write_float ZAME_TEMP_FUCKEEE to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_A"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
Actor.StorePos(PLAYER_ACTOR, 5@, 6@, 7@)
ZAME_TEMP_FUCKEEE = Actor.Angle(PLAYER_ACTOR)
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_TARGET_X"
0AF3: write_float 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_TARGET_Y"
0AF3: write_float 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_TARGET_Z"
0AF3: write_float ZAME_TEMP_FUCKEEE to_ini_file "me\temp.dat" section v$RACE_FILE key "SAVIOR_TARGET_A"
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_SALVATION_TRIGGER_ICON_ID2, 5@, 6@, 7@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_SALVATION_OBJECT_ID2, 5@, 6@, 7@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'se103' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se103b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS 

:zame_menu_28307
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_28200 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_object_move
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE60'
wait 100 

:zame_menu_object_move_25161
wait 0

if
8A2A: not  text_box 'SE60' displayed
then
0512: show_permanent_text_box 'SE60'
end

actor.StorePos(PLAYER_ACTOR,0@,1@,2@) 
if
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_move_255232
0AE3: ZAME_OBJECT_HANLDE = random_object_near_point 0@ 1@ 2@ in_radius 5.0 find_next 1 //IF and SET
if
03CA:   object ZAME_OBJECT_HANLDE exists
jf @zame_menu_object_move_255232

0984: 1@ = object ZAME_OBJECT_HANLDE model
if and
not 1@ == #GUN_PARA
not 1@ == 18161
jf @zame_menu_object_move_255232
071E: get_object ZAME_OBJECT_HANLDE health_to 1@
if
1@ > 10000
jf @zame_menu_object_move_255232
object.StorePos(ZAME_OBJECT_HANLDE,25@,26@,27@)
0984: 1@ = object ZAME_OBJECT_HANLDE model

Player.CanMove(PLAYER_CHAR) = false
08D2: object ZAME_OBJECT_HANLDE scale_model 1.25

while true
wait 0

0AD1: show_formatted_text_highpriority "object id %d, pos %f %f %f, ~n~~r~MOVE?~n~~w~Y - YES, N - NO!" time 10 1@ 25@ 26@ 27@
if
00E1:   player 0 pressed_key 11 
    then 
    08D2: object ZAME_OBJECT_HANLDE scale_model 0.99
    break
    end
if
00E1:   player 0 pressed_key 10 
    then   
    08D2: object ZAME_OBJECT_HANLDE scale_model 0.99
    jump to @zame_menu_object_move
    end    
    
end

object.StorePos(ZAME_OBJECT_HANLDE,25@,26@,27@)
object.StorePos(ZAME_OBJECT_HANLDE,$X,$Y,$Z)
ZAME_TEMP_FUCKEEE9 = object.Angle(ZAME_OBJECT_HANLDE)
ZAME_TEMP_FUCKEEE10 = object.Angle(ZAME_OBJECT_HANLDE)
04C4: store_coords_to $X2 $Y2 $Z2 from_actor PLAYER_ACTOR with_offset 1.0 -2.0 0.0
Camera.SetPosition($X2, $Y2, $Z2, 0.0, 0.0, 0.0)
Camera.PointAt($X, $Y, $Z, 2) 
03E6: remove_text_box
0581: enable_radar 1
0E68: set_player_control_pad 0 1 
0E69: set_player_control_pad_movement 0 1 
Player.CanMove(PLAYER_CHAR) = False
if
0A4B:   controls_set_to_joystick
then
0512: show_permanent_text_box 'SE143B'
else
0512: show_permanent_text_box 'SE143'
end

if
ZAME_LATEST_OBJECT_CAM_MODE == 1
then
0930: (unknown) 1
0936: set_camera 1@ 2@ 3@ position_to 1@ 2@ 3@ GENERAL_FP_CAM_TIMER ms 1
Player.CanMove(PLAYER_CHAR) = true
0E68: set_player_control_pad 0 1 
0E69: set_player_control_pad_movement 0 0
Actor.LockInCurrentPosition(PLAYER_ACTOR) = True
0619: enable_actor PLAYER_ACTOR collision_detection 0
///////////////////////////////////////////////////
068D: get_camera_position_to 1@ 2@ 3@
0AF3: write_float 1@ to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_X"
0AF3: write_float 2@ to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_Y"
0AF3: write_float 3@ to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_Z"
0AF3: write_float $X to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_AT_X"
0AF3: write_float $Y to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_AT_Y"
0AF3: write_float $Z to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_AT_Z"
0E27: get_angle_from_two_coords 1@ 2@ and $X $Y to 7@
0AF3: write_float 7@ to_ini_file "moonloader\Spectate Camera.ini" section "SCR" key "FREE_CAM_ANGLE"
ZAME_SPEC_MOD_FREE_CAM = 1
0930: (unknown) 0
///////////////////////////////////////////////////
0337: set_actor PLAYER_ACTOR visibility 0
actor.StorePos(PLAYER_ACTOR,ZAME_TEMP_X,ZAME_TEMP_Y,ZAME_TEMP_Z)
ZAME_TEMP_A = actor.Angle(PLAYER_ACTOR)
actor.PutAtNoOffset(PLAYER_ACTOR,1@,2@,3@)
actor.Angle(PLAYER_ACTOR) = 7@
///////////////////////////////////////////////////
camera.Restore_WithJumpCut()
0E68: set_player_control_pad 0 1 
0E69: set_player_control_pad_movement 0 1
actor.LockInCurrentPosition(PLAYER_ACTOR,true)
0627: update_integer_stat 271 to 1
0AF1: write_int 1 to_ini_file "saves\ZACM.set" section "SCR" key "CARMA_FREE_CAM_TURNED_FLAG"    
//0AD1: show_formatted_text_highpriority "Free cam ON." time 2000
//gosub @ZAME_FREECAMS_CHECK
end

wait 100

:zame_menu_object_move_idle
object.StorePos(ZAME_OBJECT_HANLDE,2@,3@,4@)
0AD1: show_formatted_text_highpriority "pos1 %f %f %f, A: %f~n~pos2 %f %f %f, A: %f" time 500 25@ 26@ 27@ ZAME_TEMP_FUCKEEE9 2@ 3@ 4@ ZAME_TEMP_FUCKEEE10
wait 0

if
0A4B:   controls_set_to_joystick
then
if
8A2A: not  text_box 'SE143B' displayed
    then
    0512: show_permanent_text_box 'SE143B'
    end
else
if
8A2A: not  text_box 'SE143B' displayed
    then
    0512: show_permanent_text_box 'SE143'
    end
end

if
8A4B: not  controls_set_to_joystick
then

if and
0AB0:   key_pressed 69
32@ > 500
    then  
    32@ = 0
    
    if
    ZAME_SPEC_MOD_FREE_CAM == 0
    then
    ZAME_LATEST_OBJECT_CAM_MODE = 1
    else
    ZAME_LATEST_OBJECT_CAM_MODE = 0
    end
    
    gosub @ZAME_FREECAMS_CHECK    
    end
end    

if
0A4B:   controls_set_to_joystick
then

00E2: get_player 0 key 1 state_to 0@
if
0@ > 0
    then
    jump to @zame_menu_object_move_37163_JOY //FORWARD
    end
if
0@ < 0
    then
    jump to @zame_menu_object_move_37226_JOY //BACKWARD
    end
    
00E2: get_player 0 key 0 state_to 0@
if
0@ > 0
    then
    jump to @zame_menu_object_move_37289_JOY //LEFT
    end
if
0@ < 0
    then
    jump to @zame_menu_object_move_37352_JOY //RIGHT
    end
    
if
00E1:  player 0 pressed_key 5
    then
    jump to @zame_menu_object_move_37415_JOY //UP
    end
if
00E1:  player 0 pressed_key 7
    then
    jump to @zame_menu_object_move_37463_JOY //DOWN
    end

else

if 
8AB0:   not key_pressed 87 
jf @zame_menu_object_move_37163 
if 
8AB0:   not key_pressed 83 
jf @zame_menu_object_move_37226 
if 
8AB0:   not key_pressed 65 
jf @zame_menu_object_move_37289 
if 
8AB0:   not key_pressed 68 
jf @zame_menu_object_move_37352

end
 
if 
00E1:    player 0 pressed_key 16 
jf @zame_menu_object_move_25523
 
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end
            
//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

0512: show_permanent_text_box 'SE271'

ZAME_TEMP_FUCKEEE = 0.1
        
while true
wait 0

if
8A2A: not  text_box 'SE271' displayed
then
0512: show_permanent_text_box 'SE271'
end

0AD1: show_formatted_text_highpriority "move speed: %f" time 2000 ZAME_TEMP_FUCKEEE

if
8A4B: not  controls_set_to_joystick
then
            
if
0E10: is_mouse_wheel_up
    then
    
    if
    80E1:   not player 0 pressed_key 14
    then
    ZAME_TEMP_FUCKEEE += 0.1
    else
    ZAME_TEMP_FUCKEEE += 0.025
    end
    
    end
            
if
0E11: is_mouse_wheel_down
    then
    
    if
    80E1:   not player 0 pressed_key 14
    then
    ZAME_TEMP_FUCKEEE -= 0.1
    else
    ZAME_TEMP_FUCKEEE -= 0.025
    end
    
    if
    ZAME_TEMP_FUCKEEE < 0.0
    then
    ZAME_TEMP_FUCKEEE = 0.025
    end
    
    end
    
else

if and
00E1:   player 0 pressed_key 5
32@ > 250
    then
    32@ = 0
    
    if
    80E1:   not player 0 pressed_key 14
    then
    ZAME_TEMP_FUCKEEE += 0.1
    else
    ZAME_TEMP_FUCKEEE += 0.025
    end
    
    end
            
if and
00E1:   player 0 pressed_key 7
32@ > 250
    then
    32@ = 0
    
    if
    80E1:   not player 0 pressed_key 14
    then
    ZAME_TEMP_FUCKEEE -= 0.1
    else
    ZAME_TEMP_FUCKEEE -= 0.025
    end
    
    if
    ZAME_TEMP_FUCKEEE < 0.0
    then
    ZAME_TEMP_FUCKEEE = 0.025
    end
    
    end

end    
    
if
0E3E: is_button_just_pressed 0 button 16
    then
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 15
    then
    object.PutAt(ZAME_OBJECT_HANLDE,25@,26@,27@)
    object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE9
    0E68: set_player_control_pad 1 1 
    0E69: set_player_control_pad_movement 0 1 
    Player.CanMove(PLAYER_CHAR) = False
    Actor.LockInCurrentPosition(PLAYER_ACTOR) = False
    0619: enable_actor PLAYER_ACTOR collision_detection 1
    if
    ZAME_SPEC_MOD_FREE_CAM == 1 
    then
    gosub @ZAME_FREECAMS_CHECK
    end
    0930: (unknown) 0 
    Camera.SetBehindPlayer
    Camera.Restore_WithJumpCut
    0581: enable_radar 0 
    03E6: remove_text_box
    0E68: set_player_control_pad 1 1 
    0E69: set_player_control_pad_movement 0 1
    jump @TARGETS_SETTINGS
    end        
            
end

//////////////////////////////
    
text.ClearAll()
text.RemoveTextBox()
        
while true
wait 0
text.ShowH('SE269',100,1)
            
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_WAIT_FOR_NEXT_OBJECTIVE"        
    break
    end
            
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
            
end
            
//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
        
while true
wait 0
text.ShowH('SE270',100,1)
            
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "LOOP_OBJECT_MOVE"        
    break
    end
            
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
            
end
            
//////////////////////////////

0AF1: write_int 7 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 25@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_X"
0AF3: write_float 26@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_Y"
0AF3: write_float 27@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_Z"
object.StorePos(ZAME_OBJECT_HANLDE,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_Z"
0AF3: write_float ZAME_TEMP_FUCKEEE10 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_A"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
0AF3: write_float ZAME_TEMP_FUCKEEE to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_SPEED"
0984: 45@ = object ZAME_OBJECT_HANLDE model
0AF1: write_int 45@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_MODEL"
object.PutAt(ZAME_OBJECT_HANLDE,25@,26@,27@)
object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE9
1@ = Object.Init(45@, 2@, 3@, 4@)
object.Angle(1@) = ZAME_TEMP_FUCKEEE10
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
object.SetImmunities(1@,1,1,1,1,1)
object.Indestructibility(1@,1)
071F: set_object 1@ health_to 28000

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if
ZAME_SPEC_MOD_FREE_CAM == 1 
then
gosub @ZAME_FREECAMS_CHECK
end
0930: (unknown) 0
Camera.SetBehindPlayer
Camera.Restore_WithJumpCut
Player.CanMove(PLAYER_CHAR) = true
Actor.LockInCurrentPosition(PLAYER_ACTOR) = false
0E68: set_player_control_pad 1 1 
0E69: set_player_control_pad_movement 0 1
0581: enable_radar 1 
03E6: remove_text_box

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE145' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE145B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS

:zame_menu_object_move_25523
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_move_idle
object.PutAt(ZAME_OBJECT_HANLDE,25@,26@,27@)
object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE9
0E68: set_player_control_pad 1 1 
0E69: set_player_control_pad_movement 0 1 
Player.CanMove(PLAYER_CHAR) = False
Actor.LockInCurrentPosition(PLAYER_ACTOR) = False
0619: enable_actor PLAYER_ACTOR collision_detection 1
if
ZAME_SPEC_MOD_FREE_CAM == 1 
then
gosub @ZAME_FREECAMS_CHECK
end
0930: (unknown) 0 
Camera.SetBehindPlayer
Camera.Restore_WithJumpCut
0581: enable_radar 0 
03E6: remove_text_box
0E68: set_player_control_pad 1 1 
0E69: set_player_control_pad_movement 0 1
jump @TARGETS_SETTINGS

:zame_menu_object_move_255232
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_object_move_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS

:zame_menu_object_move_37163
if 
8AB0:   not key_pressed 16 
jf @zame_menu_object_move_37415
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0.05 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)
if
not ZAME_LATEST_OBJECT_CAM_MODE == 1
then
Camera.PointAt($X, $Y, $Z, 2)
end
wait 10 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37226
if 
8AB0:   not key_pressed 16 
jf @zame_menu_object_move_37463
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 -0.05 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)
if
not ZAME_LATEST_OBJECT_CAM_MODE == 1
then
Camera.PointAt($X, $Y, $Z, 2)
end
wait 10 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37289
if 
8AB0:   not key_pressed 16 
then
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.05 0.0 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)
if
not ZAME_LATEST_OBJECT_CAM_MODE == 1
then
Camera.PointAt($X, $Y, $Z, 2)
end
wait 10
else
ZAME_TEMP_FUCKEEE10 += 1.0
if
ZAME_TEMP_FUCKEEE10 > 360.0
then
ZAME_TEMP_FUCKEEE10 = 0.0
end

object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE10
wait 10
end 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37352
if 
8AB0:   not key_pressed 16 
then
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset -0.05 0.0 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)
if
not ZAME_LATEST_OBJECT_CAM_MODE == 1
then
Camera.PointAt($X, $Y, $Z, 2)
end
wait 10
else
ZAME_TEMP_FUCKEEE10 -= 1.0
if
ZAME_TEMP_FUCKEEE10 < 0.0
then
ZAME_TEMP_FUCKEEE10 = 360.0
end

object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE10
wait 10
end 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37415
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0.0 0.05 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)
if
not ZAME_LATEST_OBJECT_CAM_MODE == 1
then
Camera.PointAt($X, $Y, $Z, 2)
end
wait 10 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37463
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0.0 -0.05 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)
if
not ZAME_LATEST_OBJECT_CAM_MODE == 1
then
Camera.PointAt($X, $Y, $Z, 2)
end
wait 10 
jump @zame_menu_object_move_idle

:zame_menu_object_move_37163_joy
0@ = -0.05
00E2: get_player 0 key 1 state_to 1@
0095: make 1@ absolute_integer
0093: 1@ = integer 1@ to_float 
1@ *= 0.05
006B: 0@ *= 1@  // (float)
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0@ 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)  
Camera.PointAt($X, $Y, $Z, 2)      
wait 10 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37226_joy
0@ = 0.05
00E2: get_player 0 key 1 state_to 1@
0095: make 1@ absolute_integer
0093: 1@ = integer 1@ to_float 
1@ *= 0.05
006B: 0@ *= 1@  // (float)
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0@ 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z) 
Camera.PointAt($X, $Y, $Z, 2)    
wait 10 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37289_joy
0@ = 0.05
00E2: get_player 0 key 0 state_to 1@
0095: make 1@ absolute_integer
0093: 1@ = integer 1@ to_float 
1@ *= 0.05
006B: 0@ *= 1@  // (float)
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0@ 0.0 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)   
Camera.PointAt($X, $Y, $Z, 2)     
wait 10
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37352_joy
0@ = -0.05
00E2: get_player 0 key 0 state_to 1@
0095: make 1@ absolute_integer
0093: 1@ = integer 1@ to_float 
1@ *= 0.05
006B: 0@ *= 1@  // (float)
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0@ 0.0 0.0 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)     
Camera.PointAt($X, $Y, $Z, 2)    
wait 10
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37415_joy
if 
80E1: not  player 0 pressed_key 14
then
0@ = 0.05
00E2: get_player 0 key 5 state_to 1@
0095: make 1@ absolute_integer
0093: 1@ = integer 1@ to_float 
1@ *= 0.05
006B: 0@ *= 1@  // (float)
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0.0 0@ 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)   
Camera.PointAt($X, $Y, $Z, 2)  
else
ZAME_TEMP_FUCKEEE10 += 1.0
if
ZAME_TEMP_FUCKEEE10 > 360.0
then
ZAME_TEMP_FUCKEEE10 = 0.0
end

object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE10
end
wait 10 
jump @zame_menu_object_move_idle 

:zame_menu_object_move_37463_joy
if 
80E1: not  player 0 pressed_key 14
then
0@ = -0.05
00E2: get_player 0 key 7 state_to 1@
0095: make 1@ absolute_integer
0093: 1@ = integer 1@ to_float 
1@ *= 0.05
006B: 0@ *= 1@  // (float)
0400: store_coords_to $X $Y $Z from_object ZAME_OBJECT_HANLDE with_offset 0.0 0.0 0@ 
Object.PutAt(ZAME_OBJECT_HANLDE, $X, $Y, $Z)   
Camera.PointAt($X, $Y, $Z, 2)   
else
ZAME_TEMP_FUCKEEE10 -= 1.0
if
ZAME_TEMP_FUCKEEE10 < 0.0
then
ZAME_TEMP_FUCKEEE10 = 360.0
end

object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE10
wait 10
end
wait 10 
jump @zame_menu_object_move_idle

:zame_menu_object_move_37099
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_move_idle
if
03CA:   object ZAME_OBJECT_HANLDE exists
then 
gosub @zame_menu_object_move_37829
end 
Actor.LockInCurrentPosition(PLAYER_ACTOR) = False
0619: enable_actor PLAYER_ACTOR collision_detection 1

0930: (unknown) 0 
Camera.SetBehindPlayer
Camera.Restore_WithJumpCut
0581: enable_radar 0 
03E6: remove_text_box 
08DA: remove_panel $PANEL 
jump @TARGETS_SETTINGS

:zame_menu_object_move_37829
object.PutAt(ZAME_OBJECT_HANLDE,25@,26@,27@)
object.Angle(ZAME_OBJECT_HANLDE) = ZAME_TEMP_FUCKEEE9
return

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_explode_trigger_27207
0581: enable_radar 1 
0512: show_permanent_text_box 'SE224' 
5@ = 0
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
actor.SetImmunities(PLAYER_ACTOR,1,1,1,1,1)
wait 0
020C: create_explosion_with_radius 5@ at 2@ 3@ 4@
031A: remove_all_fires
wait 100 

:zame_menu_explode_trigger_27238
wait 0

if
8A2A: not  text_box 'SE224' displayed
then
0512: show_permanent_text_box 'SE224'
end

0980: extinguish_all_fires_at 2@ 3@ 4@ radius 20.0 
0395: clear_area 1 at 2@ 3@ 4@ radius 20.0          
01E5: show_text_1number_highpriority GXT 'SE225' number 5@ time 300 flag 1 
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up 
jf @zame_menu_explode_trigger_27519 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down  
jf @zame_menu_explode_trigger_27555 
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_explode_trigger_27482

if 
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end
 
0AF1: write_int 11 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "EXPLODE_TYPE"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)                                                     
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
0@ = 0
0@ = marker.CreateIconAndSphere2(ZAME_EXPLOSION_TRIGGER_ICON_ID, 2@,3@,4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_EXPLOSION_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
gosub @zame_menu_explode_trigger_25351

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

031A: remove_all_fires

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'se79' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se79b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS2

:zame_menu_explode_trigger_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_explode_trigger_25435 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_explode_trigger_25435
return 

:zame_menu_explode_trigger_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_explode_trigger_25521
0@ = 0 
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_explode_trigger_25521
return

:zame_menu_explode_trigger_27482
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_explode_trigger_27238
031A: remove_all_fires 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS2

:zame_menu_explode_trigger_27519
5@ += 1

if
5@ < 13 
then
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
031A: remove_all_fires
020C: create_explosion_with_radius 5@ at 2@ 3@ 4@
else
wait 100
jump to @zame_menu_explode_trigger_27609
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_explode_trigger_27238 

:zame_menu_explode_trigger_27555 
5@ -= 1

if
5@ > 0 
then 
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
031A: remove_all_fires
020C: create_explosion_with_radius 5@ at 2@ 3@ 4@
else
wait 100
jump to @zame_menu_explode_triggerb_27609
end

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end

jump @zame_menu_explode_trigger_27238 

:zame_menu_explode_trigger_27609
5@ = 0 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_explode_trigger_27238

:zame_menu_explode_triggerb_27609
5@ = 12 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_explode_trigger_27238

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_object_destroy
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE60'
wait 100 

:zame_menu_object_destroy_25161
wait 0

if
8A2A: not  text_box 'SE60' displayed
then
0512: show_permanent_text_box 'SE60'
end

actor.StorePos(PLAYER_ACTOR,0@,1@,2@) 
if
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_destroy_255232
0AE3: ZAME_OBJECT_HANLDE = random_object_near_point 0@ 1@ 2@ in_radius 5.0 find_next 1 //IF and SET
if
03CA:   object ZAME_OBJECT_HANLDE exists
jf @zame_menu_object_destroy_255232

0984: 1@ = object ZAME_OBJECT_HANLDE model
if and
not 1@ == #GUN_PARA
not 1@ == 18161
jf @zame_menu_object_destroy_255232
071E: get_object ZAME_OBJECT_HANLDE health_to 1@
if
1@ > 10000
jf @zame_menu_object_destroy_255232
object.StorePos(ZAME_OBJECT_HANLDE,25@,26@,27@)
0984: 1@ = object ZAME_OBJECT_HANLDE model

Player.CanMove(PLAYER_CHAR) = false
08D2: object ZAME_OBJECT_HANLDE scale_model 1.25

while true
wait 0

0AD1: show_formatted_text_highpriority "object id %d, pos %f %f %f, ~n~~r~DELETE?~n~~w~Y - YES, N - NO!" time 10 1@ 25@ 26@ 27@
if
00E1:   player 0 pressed_key 11 
    then 
    08D2: object ZAME_OBJECT_HANLDE scale_model 0.99
    break
    end
if
00E1:   player 0 pressed_key 10 
    then   
    08D2: object ZAME_OBJECT_HANLDE scale_model 0.99
    jump to @zame_menu_object_destroy
    end    
    
end

object.StorePos(ZAME_OBJECT_HANLDE,$X,$Y,$Z)
04C4: store_coords_to $X2 $Y2 $Z2 from_actor PLAYER_ACTOR with_offset 1.0 -2.0 0.0
Camera.SetPosition($X2, $Y2, $Z2, 0.0, 0.0, 0.0)
Camera.PointAt($X, $Y, $Z, 2) 
03E6: remove_text_box
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = False

//////////////////////////////

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE215',100,1)

if
0E3E: is_button_just_pressed 0 button 4
    then
    text.ClearAll()        
    
    if 
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    gosub @OBJ_DEFENSE_TIME_SELECT
      
    0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "DESTORY_AUTOMATIC_FLAG"
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()
    
    if 
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
      
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DESTORY_AUTOMATIC_FLAG"
    jump to @zame_menu_object_destory_automatic_destroy_jump
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()        
    break
    end
    
end

end
    
//////////////////////////////

0512: show_permanent_text_box 'SE194'
wait 100
5@ = 100

:zame_menu_object_destroy_sec_27238
wait 0 

if
8A2A: not  text_box 'SE194' displayed
then
0512: show_permanent_text_box 'SE194'
end

01E5: show_text_1number_highpriority GXT 'SE195' number 5@ time 300 flag 1 
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up 
jf @zame_menu_object_destroy_sec_27519 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down 
jf @zame_menu_object_destroy_sec_27555 
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_object_destroy_sec_27482

:zame_menu_object_destory_automatic_destroy_jump

if 
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end
 
0AF1: write_int 12 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECT_HP"
Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)                                                     
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

object.StorePos(ZAME_OBJECT_HANLDE,25@,26@,27@)
0AF3: write_float 25@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_X"
0AF3: write_float 26@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_Y"
0AF3: write_float 27@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_Z"
0984: 45@ = object ZAME_OBJECT_HANLDE model
0AF1: write_int 45@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_MODEL"

Actor.StorePos(PLAYER_ACTOR, 2@,3@,4@)
//0@ = marker.CreateIconAndSphere2(5, 2@,3@,4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_OBJDEST_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
gosub @zame_menu_object_destroy_sec_25351

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

camera.Restore_WithJumpCut() 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'se79' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se79b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS2

:zame_menu_object_destroy_sec_25351
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_object_destroy_sec_25435 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_object_destroy_sec_25435
return 

:zame_menu_object_destroy_sec_25437
077E: get_active_interior_to 19@ 
if 
  4@ > 900.0 
jf @zame_menu_object_destroy_sec_25521 
0@ = 0
0167: 0@ = create_marker_at 2@ 3@ 4@ color 2 flag 2 
Marker.SetIconSize(0@, 3)
return 

:zame_menu_object_destroy_sec_25521
return

:zame_menu_object_destroy_sec_27482
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_destroy_sec_27238 
Player.CanMove(PLAYER_CHAR) = False
camera.Restore_WithJumpCut()
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS2

:zame_menu_object_destroy_sec_27519
if 
  5@ > 99 
jf @zame_menu_object_destroy_sec_27627
if
80E1:   not player 0 pressed_key 14
then 
5@ += 100
else
5@ += 1000
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end 

jump @zame_menu_object_destroy_sec_27238 

:zame_menu_object_destroy_sec_27555
if 
  5@ > 99 
jf @zame_menu_object_destroy_sec_27238

if
80E1:   not player 0 pressed_key 14
then 
5@ -= 100
else
5@ -= 1000
end
 
if 
  5@ >= 100 
jf @zame_menu_object_destroy_sec_27609 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end

jump @zame_menu_object_destroy_sec_27238 

:zame_menu_object_destroy_sec_27609

5@ = 100 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end

jump @zame_menu_object_destroy_sec_27238 

:zame_menu_object_destroy_sec_27627
5@ = 100 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end

jump @zame_menu_object_destroy_sec_27238

:zame_menu_object_destroy_255232
if 
00E1:   player 0 pressed_key 11 
jf @zame_menu_object_destroy_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS2

//////////////////////////////////////////////////////////////////

:zame_menu_weather_change_21732
0512: show_permanent_text_box 'se36'
wait 100 

if
ZAME_RECREATE_OBJECTIVE_FLAG == 1
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
0AF0: 0@ = get_int_from_ini_file "me\temp.dat" section v$RACE_FILE key "WEATHER_NUM"
end

:zame_menu_weather_change_21743
wait 0 

if
8A2A: not  text_box 'SE36' displayed
then
0512: show_permanent_text_box 'SE36'
end

01E5: show_text_1number_highpriority GXT 'se37' number 0@ time 100 flag 1 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down 
jf @zame_menu_weather_change_21850 
if and
80E1:   not player 0 pressed_key 11 
8E10: not is_mouse_wheel_up
jf @zame_menu_weather_change_21915 
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_weather_change_22018 
03E6: remove_text_box

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = 0
5@ = Marker.CreateIconAndSphere2(ZAME_WEATHER_CHANGE_TRIGGER_ICON_ID, 2@, 3@, 4@)
0AF1: write_int 13 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 0@ to_ini_file "me\temp.dat" section v$RACE_FILE key "WEATHER_NUM"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
ZAME_OBJECT_HANLDE = Object.Init(ZAME_WEATHER_CHANGE_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
 
if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'se79' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se79b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @MISSION_SETTINGS 

:zame_menu_weather_change_21850
0@ -= 1 
if 
  0@ >= 0 
jf @zame_menu_weather_change_21999
if
UNITED_MAP == 1
then
1@ = -1
gosub @ZAME_PROHIBITED_WEATHERS_ON_UNITED_MAP_CHECK2
end
 
set_weather 0@ 
01B5: force_weather 0@ 
01E5: show_text_1number_highpriority GXT 'se37' number 0@ time 200 flag 1 

if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_weather_change_21743 

:zame_menu_weather_change_21915
0@ += 1 
if 
   not 0@ > 22 
jf @zame_menu_weather_change_21980
if
UNITED_MAP == 1
then
1@ = 1
gosub @ZAME_PROHIBITED_WEATHERS_ON_UNITED_MAP_CHECK2
end
 
set_weather 0@ 
01B5: force_weather 0@ 
01E5: show_text_1number_highpriority GXT 'se37' number 0@ time 200 flag 1
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end

jump @zame_menu_weather_change_21743 

:zame_menu_weather_change_21980
0@ = 0 
set_weather 0@ 
jump @zame_menu_weather_change_21743 

:zame_menu_weather_change_21999
0@ = 22 
set_weather 0@ 
jump @zame_menu_weather_change_21743 

:zame_menu_weather_change_22018
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_weather_change_21743 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS2       

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_HUMAN_ENEMY_CREATE_MENU        
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE394'
08D4: $PANEL = create_panel_with_title 'SE395' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel $PANEL column 0 header 'SE396' data 'SE334' 'SE335' 'SE336' 'SE337' 'SE338' 'SE389' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
wait 100     

:ZAME_HUMAN_ENEMY_CREATE_MENU_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @ZAME_HUMAN_ENEMY_CREATE_MENU_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS3

:ZAME_HUMAN_ENEMY_CREATE_MENU_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_HUMAN_ENEMY_CREATE_MENU_CLOSE_CHECK

08D7: 9@ = panel $PANEL active_row 
08DA: remove_panel $PANEL

if and
$ACTIVE_INTERIOR > 0
not 9@ == 2
then
text.ClearAll()
text.RemoveTextBox()
text.ShowH('SE390B',2000,1)
wait 2000 
jump @ZAME_HUMAN_ENEMY_CREATE_MENU
end

0871: init_jump_table 9@ total_jumps 6 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @ZAME_SPAWN_ARMY_JUMP 1 @ZAME_SPAWN_BANDIT_JUMP 2 @ZAME_SPAWN_USUAL_ENEMY_JUMP 3 @ZAME_SPAWN_ENEMY_AVATION_JUMP 4 @ZAME_SPAWN_ENEMY_AVATION_JUMP 5 @ZAME_SPAWN_USUAL_ENEMY_JUMP 6 @ZAME_OPEN_CHECK 
0872: jump_table_jumps 7 @ZAME_OPEN_CHECK 8 @ZAME_OPEN_CHECK 9 @ZAME_OPEN_CHECK 10 @ZAME_OPEN_CHECK 11 @ZAME_OPEN_CHECK 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_SPAWN_MARODER_JUMP

gosub @ZAME_HUMAN_ENEMY_SELECT_POS

if
0@ == 69
    then
    jump to @TARGETS_SETTINGS3
    end
    
jump to @ENEMY_HUMAN_END_CREATION_JUMP 

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_SPAWN_ENEMY_AVATION_JUMP
actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
5@ = actor.Angle(PLAYER_ACTOR)  
actor.StorePos(PLAYER_ACTOR,6@,7@,8@)      
jump to @ENEMY_HUMAN_END_CREATION_JUMP 

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_SPAWN_USUAL_ENEMY_JUMP

gosub @ZAME_HUMAN_ENEMY_SELECT_POS

if
0@ == 69
    then
    jump to @TARGETS_SETTINGS3
    end
    
jump to @ENEMY_HUMAN_END_CREATION_JUMP 

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_SPAWN_BANDIT_JUMP

gosub @ZAME_HUMAN_ENEMY_SELECT_CAR_POS

if
0@ == 69
    then
    jump to @TARGETS_SETTINGS3
    end
    
jump to @ENEMY_HUMAN_END_CREATION_JUMP   

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_SPAWN_ARMY_JUMP

gosub @ZAME_HUMAN_ENEMY_SELECT_CAR_POS

if
0@ == 69
    then
    jump to @TARGETS_SETTINGS3
    end
    
jump to @ENEMY_HUMAN_END_CREATION_JUMP    

//////////////////////////////////////////////////////////////////////////////////////////
    
:ENEMY_HUMAN_END_CREATION_JUMP 

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end
    
0AF1: write_int 22 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int 9@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_Z"
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_A" 
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
0AF3: write_float 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_AT_X"
0AF3: write_float 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_AT_Y"
0AF3: write_float 8@ to_ini_file "me\temp.dat" section v$RACE_FILE key "ENEMY_POS_AT_Z"

Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0

if or
9@ == 0
9@ == 1
9@ == 5
then
gosub @ZAME_ENEMY_PATH_ABADON_DISTANCE_SELECT
end

/////////////////////////////////////////////////////////////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE399',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NEED_TO_DESTROY"
    
    /////////////////////////////////////////////////////////////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    while true
    wait 0
    text.ShowH('SE652',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()    
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "HIDE_MARKER"
        break
        end  
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()     
        break
        end      
        
    end  
    
    /////////////////////////////////////////////////////////////////////////////////////
    
    break
    end  
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()     
    break
    end      
    
end  

/////////////////////////////////////////////////////////////////////////////////////

if
9@ == 2
then

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE503',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM = 5
    jump to @ZAME_MENU_PLAYER_SETTINGS_18973
    :CUM_BACK_FROM_MARODER_SKINWEP_SELECT
    break
    end  
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()     
    break
    end      
    
end

end  

/////////////////////////////////////////////////////////////////////////////////////

if or
9@ == 0
9@ == 1
then

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
        
while true
wait 0
text.ShowH('SE651',100,1)
            
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "ONFOOT_SPAWN"        
    break
    end
            
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()  
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "ONFOOT_SPAWN"      
    break
    end
            
end
            
//////////////////////////////

end

ZAME_OBJECT_HANLDE = 0        
ZAME_OBJECT_HANLDE = marker.CreateIconAndSphere2(ZAME_HUENEMY_TRIGGER_ICON_ID, 2@, 3@, 4@) 
 
ZAME_OBJECT_HANLDE = Object.Init(ZAME_HUENEMY_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR  

ZAME_OBJECT_HANLDE = Object.Init(ZAME_HUENEMY_OBJECT_ID2, 6@, 7@, 8@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR  
    
0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE397' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE397B' time 2000 flag 1
gosub @zame_recreated_trigger_sound        
gosub @MISSION_SAVE_INITIALIZATION
end     

jump @TARGETS_SETTINGS3

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_HUMAN_ENEMY_SELECT_POS 

0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE393'
wait 100 

repeat
wait 0

if
8A2A: not  text_box 'SE393' displayed
then
0512: show_permanent_text_box 'SE393'
end

if 
00E1:   player 0 pressed_key 11 
then
wait 100
0@ = 69 
return
end
 
until 0E3E:   player 0 pressed_key 15

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
5@ = actor.Angle(PLAYER_ACTOR)
0512: show_permanent_text_box 'SE393B'
018C: play_sound 1057 at 0.0 0.0 0.0

wait 100 

repeat
wait 0

if
8A2A: not  text_box 'SE393B' displayed
then
0512: show_permanent_text_box 'SE393B'
end

if 
00E1:   player 0 pressed_key 11 
then
wait 100
0@ = 69 
return
end
 
until 0E3E:   player 0 pressed_key 15

actor.StorePos(PLAYER_ACTOR,6@,7@,8@)

return

//////////////////////////////////////////////////////////////////////////////////////////

:ZAME_HUMAN_ENEMY_SELECT_CAR_POS
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE391'
wait 100 

repeat
wait 0

if
8A2A: not  text_box 'SE391' displayed
then
0512: show_permanent_text_box 'SE391'
end

if 
00E1:   player 0 pressed_key 11 
then
wait 100
0@ = 69 
return
end
 
until 0E3E:   player 0 pressed_key 15

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
5@ = actor.Angle(PLAYER_ACTOR)
0512: show_permanent_text_box 'SE392'
018C: play_sound 1057 at 0.0 0.0 0.0

wait 100 

repeat
wait 0

if
8A2A: not  text_box 'SE392' displayed
then
0512: show_permanent_text_box 'SE392'
end

if 
00E1:   player 0 pressed_key 11 
then
wait 100
0@ = 69 
return
end
 
until 0E3E:   player 0 pressed_key 15

actor.StorePos(PLAYER_ACTOR,6@,7@,8@)

return

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:FXT_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

if
0A4B:   controls_set_to_joystick
then
0512: show_permanent_text_box 'SE80B'
ACTIVATE_KBRD_PANEL = 1
KBRD_PANEL_CHRTC = 1
CAPSLOCK_ON_FLAG = 1
$PANEL_OPEN2 = 1
else
0512: show_permanent_text_box 'SE80'
end

while true
wait 0

if
8A2A: not  text_box 'SE80' displayed
then
0512: show_permanent_text_box 'SE80'
end

015D: set_gamespeed 1.0
CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "GAME898" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "GAME898" string v$NAME3 time 99999999 1
end

if
0A4B:   controls_set_to_joystick
then
if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    jump to @FXT_VVOD_EXIT_JOY_JUMP
    end
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    :FXT_VVOD_EXIT_JOY_JUMP
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    0581: enable_radar 1 
    03E6: remove_text_box
    
    if
    ACTIVATE_KBRD_PANEL == 1
    then
    ACTIVATE_KBRD_PANEL = 0
    $PANEL_OPEN2 = 0
    end
    
    jump @TARGETS_SETTINGS
    end
    
if
8846: not  string v$SNAME3 empty // v$
    then
    09FD: get_gxt_string v$SNAME3 width_to 0@  // ~k~~PED_SPRINT~ Select    
    if and
    0@ > 0
    0@ <= 2670
        then
        
        03F0: enable_text_draw 1 
        03E0: draw_text_behind_textures 1
        03E3: set_texture_to_be_drawn_antialiased 1 
        0342: set_text_draw_centered 1
        0344: set_text_draw_linewidth 300.0 for_centered_text
        033F: set_text_draw_letter_size 0.2 1.1 
        081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
        0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
            
        if
        UNITED_MAP == 1
        then    
        0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
        end
        
        033E: set_draw_text_position 320.0 15.0 GXT v$SNAME3  // Push
        else
        if
        0@ >= 2670
            then
                        
            03F0: enable_text_draw 1 
            03E0: draw_text_behind_textures 1
            03E3: set_texture_to_be_drawn_antialiased 1 
            0342: set_text_draw_centered 1
            0344: set_text_draw_linewidth 300.0 for_centered_text
            033F: set_text_draw_letter_size 0.2 1.1 
            081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
            0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
                
            if
            UNITED_MAP == 1
            then    
            0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
            end
            
            033E: set_draw_text_position 320.0 15.0 GXT 'SE665'  // Push
            
            end
        end
    end    

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    09FD: get_gxt_string v$SNAME3 width_to 0@  // ~k~~PED_SPRINT~ Select
    if and
    0@ > 0
    0@ <= 2670
        then
        
        if
        ACTIVATE_KBRD_PANEL == 1
        then
        ACTIVATE_KBRD_PANEL = 0
        $PANEL_OPEN2 = 0
        end    
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
        else
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
        end
        
        if or
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        ZAME_RECREATE_OBJECTIVE_FLAG == 2
        then
        0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
        end
        
        0AF1: write_int 8 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
        
        //////////////////////////////

        text.ClearAll()
        text.RemoveTextBox()
                
        while true
        wait 0
        text.ShowH('SE282',100,1)
                    
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()                    
            break
            end
                    
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SHOW_AS_TEXTBOX"
            text.ClearAll()        
            break
            end
                    
        end                    
        
        //////////////////////////////
    
        while true
        wait 0
        text.ShowH('GAME975',100,1)
        
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_WAIT_FOR_NEXT_OBJECTIVE"
            break
            end
        
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
        
        end
        
        //////////////////////////////
        
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FXT_ID"    
        Player.CanMove(PLAYER_CHAR) = true
        actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
        128@ = actor.Angle(PLAYER_ACTOR)
        0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
        0@ = 0
        0@ = Marker.CreateIconAndSphere2(ZAME_FXT_SHOW_TRIGGER_ICON_ID, 2@,3@,4@)
        1@ = Object.Init(ZAME_FXT_SHOW_OBJECT_ID, 2@, 3@, 4@)
        0566: link_object 1@ to_interior $ACTIVE_INTERIOR
        0581: enable_radar 1 
        03E6: remove_text_box
        
        0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
        0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
        
        if and
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        then
        ZAME_CURRENT_OBJECTIVE_INDEX += 1 
        ZAME_OBJECTIVES_COUNT += 1
        end
        
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
        
        wait 100
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        00BC: show_text_highpriority GXT 'SE144' time 2000 flag 1
        gosub @zame_created_trigger_sound
        else
        00BC: show_text_highpriority GXT 'SE144B' time 2000 flag 1
        gosub @zame_recreated_trigger_sound
        gosub @MISSION_SAVE_INITIALIZATION
        end
         
        jump @TARGETS_SETTINGS
        
        else
        text.ShowH('SE236',1000,1)
        wait 1000
        0512: show_permanent_text_box 'SE80'        
        end
        
        end

end

:FXT_NAME_SELECT_KEYS_CHECK

if
0A4B:   controls_set_to_joystick
then

if
00E1:   player 0 pressed_key 14 
    then
    KEYS_TYPED_NUM = -1
    06D1: v$SNAME3 = "" // v$ // Sunday
    06D1: v$SNAME2 = "" // v$ // Sunday
    gosub @FXT_NAME_SELECT_KEY_ADD
    end

else

if
0E3D:   key_pressed 8 
    then
    KEYS_TYPED_NUM = -1
    06D1: v$SNAME3 = "" // v$ // Sunday
    06D1: v$SNAME2 = "" // v$ // Sunday
    gosub @FXT_NAME_SELECT_KEY_ADD
    end
    
end               

if
0E3D:   key_pressed 48
    then        
    06D1: v$SNAME2 = "0" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 49
    then        
    06D1: v$SNAME2 = "1" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 50
    then        
    06D1: v$SNAME2 = "2" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 51
    then        
    06D1: v$SNAME2 = "3" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 52
    then        
    06D1: v$SNAME2 = "4" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 53
    then        
    06D1: v$SNAME2 = "5" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 54
    then        
    06D1: v$SNAME2 = "6" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 55
    then        
    06D1: v$SNAME2 = "7" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 56
    then        
    06D1: v$SNAME2 = "8" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 57
    then        
    06D1: v$SNAME2 = "9" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 190
    then        
    06D1: v$SNAME2 = "." // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
0E3D:   key_pressed 189
    then        
    06D1: v$SNAME2 = "_" // v$ // Sunday        
    gosub @FXT_NAME_SELECT_KEY_ADD    
    end
    
if
ZAME_NAME_AUD_TYPING_FLAG == 3
then
return
end                                            
    
if
0E3D:   key_pressed 65
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ѓ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 66
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "њ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "…" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "b" // v$ // Sunday
    else
    06D1: v$SNAME2 = "B" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end 
    
if
0E3D:   key_pressed 67
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "c" // v$ // Sunday
    else
    06D1: v$SNAME2 = "C" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 68
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ў" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‹" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "d" // v$ // Sunday
    else
    06D1: v$SNAME2 = "D" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 69
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 70
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "a" // v$ // Sunday
    else
    06D1: v$SNAME2 = "A" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "f" // v$ // Sunday
    else
    06D1: v$SNAME2 = "F" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 71
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ј" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Њ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "g" // v$ // Sunday
    else
    06D1: v$SNAME2 = "G" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 72
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "h" // v$ // Sunday
    else
    06D1: v$SNAME2 = "H" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 73
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ґ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ћ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "i" // v$ // Sunday
    else
    06D1: v$SNAME2 = "I" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 74
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "j" // v$ // Sunday
    else
    06D1: v$SNAME2 = "J" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 75
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ћ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‡" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 76
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "љ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "ѓ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "l" // v$ // Sunday
    else
    06D1: v$SNAME2 = "L" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 77
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "©" // v$ // Sunday
    else
    06D1: v$SNAME2 = "’" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "m" // v$ // Sunday
    else
    06D1: v$SNAME2 = "M" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 78
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "¦" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Џ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "n" // v$ // Sunday
    else
    06D1: v$SNAME2 = "N" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 79
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ў" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Љ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "o" // v$ // Sunday
    else
    06D1: v$SNAME2 = "O" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 80
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "џ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "€" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "p" // v$ // Sunday
    else
    06D1: v$SNAME2 = "P" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 81
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "ќ" // v$ // Sunday
    else
    06D1: v$SNAME2 = "†" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "q" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Q" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 82
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "k" // v$ // Sunday
    else
    06D1: v$SNAME2 = "K" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "r" // v$ // Sunday
    else
    06D1: v$SNAME2 = "R" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 83
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ё" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‘" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "s" // v$ // Sunday
    else
    06D1: v$SNAME2 = "S" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 84
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "e" // v$ // Sunday
    else
    06D1: v$SNAME2 = "E" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "t" // v$ // Sunday
    else
    06D1: v$SNAME2 = "T" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 85
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "™" // v$ // Sunday
    else
    06D1: v$SNAME2 = "‚" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "u" // v$ // Sunday
    else
    06D1: v$SNAME2 = "U" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 86
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Ї" // v$ // Sunday
    else
    06D1: v$SNAME2 = "–" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "v" // v$ // Sunday
    else
    06D1: v$SNAME2 = "V" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 87
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = " " // v$ // Sunday
    else
    06D1: v$SNAME2 = "‰" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "w" // v$ // Sunday
    else
    06D1: v$SNAME2 = "W" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 88
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "¤" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ќ" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 89
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "®" // v$ // Sunday
    else
    06D1: v$SNAME2 = "­" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "y" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Y" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if
0E3D:   key_pressed 90
    then
    
    if
    CURRENT_LAYOUT == 0
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "¬" // v$ // Sunday
    else
    06D1: v$SNAME2 = "•" // v$ // Sunday
    end
    
    else
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "z" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Z" // v$ // Sunday
    end
    
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 219
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "x" // v$ // Sunday
    else
    06D1: v$SNAME2 = "X" // v$ // Sunday
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 221
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "§" // v$ // Sunday
    else
    06D1: v$SNAME2 = "ђ" // v$ // Sunday
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 186
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "›" // v$ // Sunday
    else
    06D1: v$SNAME2 = "„" // v$ // Sunday
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 222
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "Є" // v$ // Sunday
    else
    06D1: v$SNAME2 = "“" // v$ // Sunday
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 188
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "—" // v$ // Sunday
    else
    06D1: v$SNAME2 = "Ђ" // v$ // Sunday
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end
    
if and
CURRENT_LAYOUT == 0
0E3D:   key_pressed 190
    then
    
    if and
    CAPSLOCK_ON_FLAG == 0
    8AB0: not  key_pressed 16
    then
    06D1: v$SNAME2 = "«" // v$ // Sunday
    else
    06D1: v$SNAME2 = "”" // v$ // Sunday
    end
    
    gosub @FXT_NAME_SELECT_KEY_ADD
    
    end                                                                                                                                           

return

:FXT_NAME_SELECT_KEY_ADD

KEYS_TYPED_NUM += 1

if
ZAME_NAME_AUD_TYPING_FLAG >= 1
then

if and
KEYS_TYPED_NUM >= 11
ZAME_NAME_AUD_TYPING_FLAG == 1
then
Audiostream.Volume($MENU_INVALID_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_INVALID_SOUND, 0)
Audiostream.PerformAction($MENU_INVALID_SOUND, PLAY)
return
end

if and
KEYS_TYPED_NUM >= 16
ZAME_NAME_AUD_TYPING_FLAG == 2
then
Audiostream.Volume($MENU_INVALID_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_INVALID_SOUND, 0)
Audiostream.PerformAction($MENU_INVALID_SOUND, PLAY)
return
end

else

if
KEYS_TYPED_NUM >= 8
then
Audiostream.Volume($MENU_INVALID_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_INVALID_SOUND, 0)
Audiostream.PerformAction($MENU_INVALID_SOUND, PLAY)
return
end

end

Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)

29@ = 1

098B: v$SNAME3 = v$SNAME3 + v$SNAME2 // all string variables
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text v$SNAME3

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "GAME751" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "GAME751" string v$NAME3 time 99999999 1
end

return

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_CAMERA_ACTION
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE6'
wait 100 

repeat
wait 0

if
8A2A: not  text_box 'SE6' displayed
then
0512: show_permanent_text_box 'SE6'
end

if 
00E1:   player 0 pressed_key 11 
then
wait 100 
jump @TARGETS_SETTINGS 
end
 
until 0E3E:   player 0 pressed_key 15

068D: get_camera_position_to 2@ 3@ 4@
068E: get_camera_target_point_to 5@ 6@ 7@ 
0512: show_permanent_text_box 'SE9'

repeat
wait 0 

if
8A2A: not  text_box 'SE9' displayed
then
0512: show_permanent_text_box 'SE9'
end

until 0E3E:   player 0 pressed_key 15

068D: get_camera_position_to 20@ 30@ 40@
068E: get_camera_target_point_to 50@ 60@ 70@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

if
0A4B:   controls_set_to_joystick
then
0AF1: write_int 10000 to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_MOV_TIME"
else
gosub @CAM_TIME_SELECT
end

0AF1: write_int 9 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POS_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POS_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POS_Z"
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POINT_AT_X"
0AF3: write_float 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POINT_AT_Y"
0AF3: write_float 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POINT_AT_Z"

0AF3: write_float 20@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POS_X2"
0AF3: write_float 30@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POS_Y2"
0AF3: write_float 40@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POS_Z2"
0AF3: write_float 50@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POINT_AT_X2"
0AF3: write_float 60@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POINT_AT_Y2"
0AF3: write_float 70@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_POINT_AT_Z2"

0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CAM_ACT_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_CAM_ACT_OBJECT_ID, 2@, 3@, 4@)
0382: set_object 1@ collision_detection 0
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CAM_ACT_TRIGGER_ICON_ID, 5@,6@,7@)
1@ = Object.Init(ZAME_CAM_ACT_OBJECT_ID, 5@, 6@, 7@)
0382: set_object 1@ collision_detection 0
0566: link_object 1@ to_interior $ACTIVE_INTERIOR

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CAM_ACT_TRIGGER_ICON_ID, 20@,30@,40@)
1@ = Object.Init(ZAME_CAM_ACT_OBJECT_ID, 20@, 30@, 40@)
0382: set_object 1@ collision_detection 0
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CAM_ACT_TRIGGER_ICON_ID, 50@,60@,70@)
1@ = Object.Init(ZAME_CAM_ACT_OBJECT_ID, 50@, 60@, 70@)
0382: set_object 1@ collision_detection 0
0566: link_object 1@ to_interior $ACTIVE_INTERIOR

0581: enable_radar 1 
03E6: remove_text_box

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE104' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE104B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

wait 100 
jump @TARGETS_SETTINGS

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_PICKUP_OBJECTIVE_PRE

if
0A4B:   controls_set_to_joystick
then
gosub @PICKUP_ID_SELECT
if
5@ == -1
    then
    0581: enable_radar 1 
    03E6: remove_text_box
    jump @TARGETS_SETTINGS2
    end        
jump to @ZAME_PICKUP_OBJECTIVE
end

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
    
while true
wait 0
text.ShowH('SE314',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    gosub @PICKUP_ID_SELECT
    if
    5@ == -1
        then
        0581: enable_radar 1 
        03E6: remove_text_box
        jump @TARGETS_SETTINGS2
        end        
    jump to @ZAME_PICKUP_OBJECTIVE
    end
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
        
end
        
//////////////////////////////

ZAME_TEMP_FUCKEEE = 1271
gosub @OBJECT_ID_SELECT
if
ZAME_TEMP_FUCKEEE == 699
then
ZAME_TEMP_FUCKEEE = 0
jump to @TARGETS_SETTINGS
end
//0AF0: 5@ = get_int_from_ini_file "me\temp2b.dat" section v$RACE_FILE key "FXT_ID"
//0B00: delete_file "me\temp2b.dat"  // IF and SET
0085: 5@ = 29@ // (int)
jump to @ZAME_PICKUP_OBJECTIVE

:ZAME_PICKUP_OBJECTIVE
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE146'
wait 100 

repeat
wait 0

if
8A2A: not  text_box 'SE146' displayed
then
0512: show_permanent_text_box 'SE146'
end

if
0E3E:   player 0 pressed_key 14
    then
    0581: enable_radar 1 
    03E6: remove_text_box
    jump @TARGETS_SETTINGS2
    end
 
until 0E3E:   player 0 pressed_key 15

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 10 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PICKUP_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PICKUP_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PICKUP_Z"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PICKUP_ID"

0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

while not model.Available(5@)
wait 0
model.Load(5@)
mload
end
    
28@ = Pickup.Create(5@, 3, 2@, 3@, 4@)
1@ = 0
03DC: 1@ = create_marker_above_pickup 28@

0581: enable_radar 1 
03E6: remove_text_box

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0   
then

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE532',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "HIDDEN_FLAG"            
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
    
end
    
//////////////////////////////

end

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE147' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE147B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end

wait 100 
jump @TARGETS_SETTINGS2

:PICKUP_ID_SELECT

271@ = 1
gosub @zame_pickup_get_id_by_category
actor.StorePos(PLAYER_ACTOR,$X,$Y,$Z) 
ZAME_TEMP_FUCKEEE11 = Pickup.Create(29@, 1, $X, $Y, $Z)
0D10: set_actor PLAYER_ACTOR alpha 0 // IF and SET
PLAYER_NO_ITEMS_FLAG = 1 
0512: show_permanent_text_box 'SE315'
wait 100

while true
wait 0

if
8A2A: not  text_box 'SE315' displayed
then
0512: show_permanent_text_box 'SE315'
end

01E5: show_text_1number_highpriority GXT 'se37' number 271@ time 300 flag 1

if
00E1:    player 0 pressed_key 15 
    then
    
    if
    09D1:   pickup ZAME_TEMP_FUCKEEE11 created
    then
    pickup.Destroy(ZAME_TEMP_FUCKEEE11)
    end
    
    text.ClearAll()
    text.RemoveTextBox()
    0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
    PLAYER_NO_ITEMS_FLAG = 0
    5@ = -1
    return
    end
    
if
00E1:    player 0 pressed_key 16 
    then
    
    if
    09D1:   pickup ZAME_TEMP_FUCKEEE11 created
    then
    pickup.Destroy(ZAME_TEMP_FUCKEEE11)
    end
    
    text.ClearAll()
    text.RemoveTextBox()
    0D10: set_actor PLAYER_ACTOR alpha 255 // IF and SET
    PLAYER_NO_ITEMS_FLAG = 0
    0085: 5@ = 29@ // (int)
    return
    end    

if or
00E1:    player 0 pressed_key 11
0E10:  is_mouse_wheel_up 
    then
    271@ += 1 
    01E5: show_text_1number_highpriority GXT 'se37' number 271@ time 300 flag 1
    gosub @zame_pickup_get_id_by_category
    actor.StorePos(PLAYER_ACTOR,$X,$Y,$Z) 
    ZAME_TEMP_FUCKEEE11 = Pickup.Create(29@, 1, $X, $Y, $Z)
    
    if and
    8E10: not is_mouse_wheel_up
    8E11: not is_mouse_wheel_down
    then 
    wait 100
    end
    
    end
    
if or
00E1:    player 0 pressed_key 10 
0E11:   is_mouse_wheel_down
    then
    271@ -= 1 
    01E5: show_text_1number_highpriority GXT 'se37' number 271@ time 300 flag 1
    gosub @zame_pickup_get_id_by_category
    actor.StorePos(PLAYER_ACTOR,$X,$Y,$Z) 
    ZAME_TEMP_FUCKEEE11 = Pickup.Create(29@, 1, $X, $Y, $Z)
    
    if and
    8E10: not is_mouse_wheel_up
    8E11: not is_mouse_wheel_down
    then 
    wait 100
    end
    
    end

end

return

:zame_pickup_get_id_by_category

if
09D1:   pickup ZAME_TEMP_FUCKEEE11 created
then
pickup.Destroy(ZAME_TEMP_FUCKEEE11)
end

gosub @zame_pickup_id_get

return

:zame_pickup_id_get

0AF0: 0@ = get_int_from_ini_file "me\dat\pickups.ini" section "PICKS" key "MAX"
if
001D:   271@ > 0@  // (int)
then
271@ = 1
end

if
271@ < 1
then
0085: 271@ = 0@ // (int)
end

0085: 0@ = 271@ // (int)
0AD3: v$RACE_FILE = format "%d" 0@
0AF0: 29@ = get_int_from_ini_file "me\dat\pickups.ini" section "PICKS" key v$RACE_FILE

return

:ZAME_ZOMBIE_MODEL_SET 

if
UNITED_MAP == 0
then
0209: 1@ = random_int_in_ranges #ZMB1 ZOMBIE_LAST_MODEL   
else

if
$UNITED_VC_FLAG == 1
then

if
STORIES_MAP == 0
then
0209: 1@ = random_int_in_ranges 18865 ZOMBIE_VC_LAST_MODEL
else
0209: 1@ = random_int_in_ranges 19138 ZOMBIE_VCS_LAST_MODEL
end

if
1@ == 18977
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 18978
        else
        1@ = 18977
        end    
    end
    
if
1@ == 19176
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 19176
        else
        1@ = 19177
        end    
    end    

else

if
STORIES_MAP == 0
then
0209: 1@ = random_int_in_ranges 18993 ZOMBIE_III_LAST_MODEL
else
0209: 1@ = random_int_in_ranges 19067 ZOMBIE_LCS_LAST_MODEL
end

if
1@ == 19112
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 19113
        else
        1@ = 19112
        end    
    end

if
1@ == 19065
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 19066
        else
        1@ = 19065
        end    
    end
    
if
1@ == 19044
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 19043
        else
        1@ = 19045
        end    
    end
    
if
1@ == 19015
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 19016
        else
        1@ = 19013
        end    
    end
    
if
1@ == 19014
    then    
    random_int 0@ 0 to 2
    if
    0@ == 0
        then
        1@ = 19016
        else
        1@ = 19013
        end    
    end            

end

end

/////////////////////////////////////////

if and
1@ == #ZMB5
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB5
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB5
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end
    
if and
1@ == #ZMB126
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB126
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB126
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end    

if and
1@ == #ZMB136
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB136
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB136
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end
    
if and
1@ == #ZMB187
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB187
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB187
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end        
    
if and
1@ == #ZMB235
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB235
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB235
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end    
    
if and
1@ == #ZMB236
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB236
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB236
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end    
    
if and
1@ == #ZMB237
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB237
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB237
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end    
    
if and
1@ == #ZMB238
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB238
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB238
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end    
    
if and
1@ == #ZMB239
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB239
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then
        1@ = #ZMB239
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end    
    
if and
1@ == #ZMB240
$GAMEMODE_STORYLINE == 1
    then    
    jump to @ZAME_ZOMBIE_MODEL_SET    
    end
    
if and
1@ == #ZMB240
$GAMEMODE_STORYLINE == 0
    then    
    random_int 0@ 0 to 10
    if
    0@ == 4
        then        
        random_int 0@ 0 to 2
        if
        0@ == 0
            then
            1@ = #ZMB240
            else
            1@ = #ZMB241
            end        
        else
        jump to @ZAME_ZOMBIE_MODEL_SET
        end    
    end                                                            
    
/////////////////////////////////////////            

if
07DE:   model 1@ exists  // versionB
jf @ZAME_ZOMBIE_MODEL_SET

return

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:AUD_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 1
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE230'

while true
wait 0

if
8A2A: not  text_box 'SE230' displayed
then
0512: show_permanent_text_box 'SE230'
end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE200" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE200" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                    
    ZAME_NAME_AUD_TYPING_FLAG = 0     
    jump @TARGETS_SETTINGS2    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    0AD3: v$NOTES_FILE = format "me\%d\%s" ZAME_MISSION_LOAD_NUMBER v$SNAME3
    if
    0AAB:   file_exists v$NOTES_FILE
        then                  
    
        text.ClearAll()
        text.RemoveTextBox()
        
        0@ = 0
        $OTKZ_NGRDA_FLG = 0
        
        create_thread @ZAM_MUS
        
        while true
        wait 0
        text.ShowH('SE240',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0@ = 1        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        end                
        
        repeat    
        wait 0
        $OTKZ_NGRDA_FLG = 1        
        0AAA: 1@ = thread 'ZAM_MUS' pointer
        until 1@ == 0
            
        //////////////////////////////
        
        if
        0@ == 1
            then    
        
            if
            ZAME_RECREATE_OBJECTIVE_FLAG == 0
            then
            0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
            else
            0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
            end
            
            if or
            ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
            ZAME_RECREATE_OBJECTIVE_FLAG == 2
            then
            0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
            end
            
            0AF1: write_int 14 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
            0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
            
            //////////////////////////////
        
            while true
            wait 0
            text.ShowH('SE201',100,1)
            
            if
            0E3E: is_button_just_pressed 0 button 11
                then
                text.ClearAll()
                0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_WAIT_FOR_NEXT_OBJECTIVE"
                break
                end
            
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                text.ClearAll()        
                break
                end
            
            end
            
            //////////////////////////////
            
            0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "AUD_NAME"    
            Player.CanMove(PLAYER_CHAR) = true
            actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
            0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
            0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
            0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
            128@ = actor.Angle(PLAYER_ACTOR)
            0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
            0@ = 0
            0@ = Marker.CreateIconAndSphere2(ZAME_SOUND_PLAY_TRIGGER_ICON_ID, 2@,3@,4@)
            1@ = Object.Init(ZAME_SOUND_PLAY_OBJECT_ID, 2@, 3@, 4@)
            0566: link_object 1@ to_interior $ACTIVE_INTERIOR
            0581: enable_radar 1 
            03E6: remove_text_box
            
            0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
            0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
            
            if and
            ZAME_RECREATE_OBJECTIVE_FLAG == 0
            not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
            then
            ZAME_CURRENT_OBJECTIVE_INDEX += 1 
            ZAME_OBJECTIVES_COUNT += 1
            end
            
            ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
            
            wait 100
            
            if
            ZAME_RECREATE_OBJECTIVE_FLAG == 0
            then
            00BC: show_text_highpriority GXT 'SE202' time 2000 flag 1
            gosub @zame_created_trigger_sound
            else
            00BC: show_text_highpriority GXT 'SE202B' time 2000 flag 1
            gosub @zame_recreated_trigger_sound
            gosub @MISSION_SAVE_INITIALIZATION
            end
            
            ZAME_NAME_AUD_TYPING_FLAG = 0
             
            jump @TARGETS_SETTINGS2
            
            else
            0512: show_permanent_text_box 'SE230'
            end        
        else
        text.ShowH('SE235',1000,1)
        wait 1000
        0512: show_permanent_text_box 'SE230'
        end
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:MUS_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 1
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE230'

while true
wait 0

if
8A2A: not  text_box 'SE230' displayed
then
0512: show_permanent_text_box 'SE230'
end

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE204" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE204" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5                
    ZAME_NAME_AUD_TYPING_FLAG = 0     
    jump @TARGETS_SETTINGS2    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    0AD3: v$NOTES_FILE = format "me\%d\%s" ZAME_MISSION_LOAD_NUMBER v$SNAME3
    if
    0AAB:   file_exists v$NOTES_FILE
        then
        text.ClearAll()
        text.RemoveTextBox()
        
        0@ = 0
        $OTKZ_NGRDA_FLG = 0
                
        create_thread @ZAM_MUS
        
        while true
        wait 0
        text.ShowH('SE240',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0@ = 1        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        end                
        
        repeat    
        wait 0
        $OTKZ_NGRDA_FLG = 1        
        0AAA: 1@ = thread 'ZAM_MUS' pointer
        until 1@ == 0
            
        //////////////////////////////
        
        if
        0@ == 1
            then    
    
            if
            ZAME_RECREATE_OBJECTIVE_FLAG == 0
            then
            0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
            else
            0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
            end
            
            if or
            ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
            ZAME_RECREATE_OBJECTIVE_FLAG == 2
            then
            0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
            end                        
            
            0AF1: write_int 15 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
            0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"    
            
            0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "MUS_NAME"
            
            text.ClearAll()
            
            //////////////////////////////    
    
            while true
            wait 0
            text.ShowH('SE488',100,1)
                
            if
            0E3E: is_button_just_pressed 0 button 11
                then  
                0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_IN_FLAG"  
                gosub @MUSIC_FADE_IN_TIME_SELECT
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_IN_FLAG"
                break
                end
                
            end
            
            text.ClearAll()
                
            //////////////////////////////
            
            while true
            wait 0
            text.ShowH('SE489',100,1)
                
            if
            0E3E: is_button_just_pressed 0 button 11
                then    
                0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_OUT_FLAG"
                gosub @MUSIC_FADE_OUT_TIME_SELECT
                break
                end
                
            if
            0E3E: is_button_just_pressed 0 button 10
                then
                0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_OUT_FLAG"
                break
                end
                
            end
                
            //////////////////////////////
                
            Player.CanMove(PLAYER_CHAR) = true
            actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
            0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
            0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
            0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
            128@ = actor.Angle(PLAYER_ACTOR)
            0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
            0@ = 0
            0@ = Marker.CreateIconAndSphere2(ZAME_MUSIC_PLAY_TRIGGER_ICON_ID, 2@,3@,4@)
            1@ = Object.Init(ZAME_MUSIC_PLAY_OBJECT_ID, 2@, 3@, 4@)
            0566: link_object 1@ to_interior $ACTIVE_INTERIOR
            0581: enable_radar 1 
            03E6: remove_text_box
            
            0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
            0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
            
            if and
            ZAME_RECREATE_OBJECTIVE_FLAG == 0
            not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
            then
            ZAME_CURRENT_OBJECTIVE_INDEX += 1 
            ZAME_OBJECTIVES_COUNT += 1
            end
            
            ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
            
            wait 100
            
            if
            ZAME_RECREATE_OBJECTIVE_FLAG == 0
            then
            00BC: show_text_highpriority GXT 'SE203' time 2000 flag 1
            gosub @zame_created_trigger_sound
            else
            00BC: show_text_highpriority GXT 'SE203B' time 2000 flag 1
            gosub @zame_recreated_trigger_sound
            gosub @MISSION_SAVE_INITIALIZATION
            end
            
            ZAME_NAME_AUD_TYPING_FLAG = 0
             
            jump @TARGETS_SETTINGS2
            
            else
            0512: show_permanent_text_box 'SE230'
            end
        
        else
        text.ShowH('SE235',1000,1)
        wait 1000
        0512: show_permanent_text_box 'SE230'
        end
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:anim_ID_SELECT

5@ = -1
//271@ = 1
if
ZAME_LATEST_ANIM_SELECTED < 1
then
ZAME_LATEST_ANIM_SELECTED = 1
end
0085: 271@ = ZAME_LATEST_ANIM_SELECTED // (int)
gosub @zame_anim_id_get

0512: show_permanent_text_box 'SE654'
wait 100

while true
wait 0

if
8A2A: not  text_box 'SE654' displayed
then
0512: show_permanent_text_box 'SE654'
end

if
271@ > 90
then

if
ZAME_SETTING_UP_TRIIGER == 1
then

if or
0D49: 2@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
0D49: 2@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
0D49: 2@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
0D49: 2@ = compare_strings v$SNAME3 "climb" // IF and SET
0D49: 2@ = compare_strings v$SNAME3 "jump" // IF and SET
0D49: 2@ = compare_strings v$SNAME3 "die_headshooted" // IF and SET
0D49: 2@ = compare_strings v$SNAME3 "die" // IF and SET
    then
    0AD1: show_formatted_text_highpriority "%d (~p~ACTION~w~) ~n~~r~%s~w~ ~n~~y~%s~w~" time 200 271@ v$TEAM1_NAME v$SNAME3
    else
    0AD1: show_formatted_text_highpriority "%d (~r~CANT APPLY ~y~%s~r~ ACTION FROM PED SPAWN!~w~)" time 200 271@ v$SNAME3
    end

else
0AD1: show_formatted_text_highpriority "%d (~p~ACTION~w~) ~n~~r~%s~w~ ~n~~y~%s~w~" time 200 271@ v$TEAM1_NAME v$SNAME3
end

else
0AD1: show_formatted_text_highpriority "%d (~b~ANIMATION~w~) ~n~~r~%s~w~ ~n~~y~%s~w~" time 200 271@ v$TEAM1_NAME v$SNAME3
end
0085: ZAME_LATEST_ANIM_SELECTED = 271@ // (int)

gosub @zame_anim_id_get

while not animation.Available(v$TEAM1_NAME)
wait 0
animation.Load(v$TEAM1_NAME)
end

0812: AS_actor PLAYER_ACTOR perform_animation v$SNAME3 IFP v$TEAM1_NAME framedelta 4.0 loopA 1 lockX 0 lockY 0 lockF 0 time 100  // versionB
0085: 271@ = ZAME_LATEST_ANIM_SELECTED // (int)

if or
00E1:   player 0 pressed_key 10
0E11:  is_mouse_wheel_down 
    then
    271@ -= 1 
    gosub @zame_anim_id_get
    0792: disembark_instantly_actor PLAYER_ACTOR
    wait 0
    if
    00E1:   player 0 pressed_key 10
        then
        wait 100
        end
    end

if or
00E1:   player 0 pressed_key 11
0E10:   is_mouse_wheel_up 
    then
    271@ += 1  
    gosub @zame_anim_id_get
    0792: disembark_instantly_actor PLAYER_ACTOR
    wait 0
    if
    00E1:   player 0 pressed_key 11
        then
        wait 100
        end
    end

if
0E3E: is_button_just_pressed 0 button 15
    then
    5@ = -1
    text.ClearAll()        
    return
    end

if
0E3E: is_button_just_pressed 0 button 16
    then
    if
    ZAME_SETTING_UP_TRIIGER == 1
        then
        if or
        0D49: 2@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
        0D49: 2@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
        0D49: 2@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
        0D49: 2@ = compare_strings v$SNAME3 "climb" // IF and SET
        0D49: 2@ = compare_strings v$SNAME3 "jump" // IF and SET
        0D49: 2@ = compare_strings v$SNAME3 "die_headshooted" // IF and SET
        0D49: 2@ = compare_strings v$SNAME3 "die" // IF and SET
        271@ < 90
            then
            5@ = 1            
            text.ClearAll()        
            return
            end
        else
        5@ = 1            
        text.ClearAll()        
        return
        end
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_anim_id_get

0AF0: 1@ = get_int_from_ini_file "data\animslist.ini" section "ANIMLIST2" key "MAX"
if
001D:   271@ > 1@  // (int)
then
271@ = 1
end

if
271@ < 1
then
0085: 271@ = 1@ // (int)
end

0085: 1@ = 271@ // (int)
0AD3: v$RACE_FILE = format "%d_IFP" 1@
0AF4: v$TEAM1_NAME = read_string_from_ini_file "data\animslist.ini" section "ANIMLIST2" key v$RACE_FILE
0AD3: v$RACE_FILE = format "%d_ANIM" 1@
0AF4: v$SNAME3 = read_string_from_ini_file "data\animslist.ini" section "ANIMLIST2" key v$RACE_FILE

return

:IFP_NAME_SELECT

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end
        
if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

text.ClearAll()

//////////////////////////////
    
while true
wait 0
text.ShowH('SE656',100,1)

if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "FOR_PED"
    break
    end

if
0E3E: is_button_just_pressed 0 button 10
    then
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "FOR_PED"
    
    text.ClearAll()
    0581: enable_radar 1 
    Player.CanMove(PLAYER_CHAR) = True
    0E68: set_player_control_pad 0 1 
    0E69: set_player_control_pad_movement 0 1
    0512: show_permanent_text_box 'SE657' 
    
    repeat
    wait 0  
    
    if
    8A2A: not  text_box 'SE657' displayed
    then
    0512: show_permanent_text_box 'SE657'
    end
    
    if
    0E3E: is_button_just_pressed 0 button 11
    then
  
    //////////////////////////////////////////////////
    
    {$INCLUDE newopcodes\forallpeds_cleoplus}
    
    if and
    056D:   actor ped defined
    87D6: not  ped == PLAYER_ACTOR // @ == $ (int)
    then
    Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
    if
    0EEA: locate_char_distance_to_coordinates ped pos 2@ 3@ 4@ radius 1.0
        then
        0085: 1@ = ped // (int)
        jump to @FUCKEEEEERS_FUCKS
        end       
    end
    
    {$INCLUDE newopcodes\end}

    //////////////////////////////////////////////////
    
    end
    
//    if
//    00E1:   player 0 pressed_key 11
    //then
    //Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
    //0AE1: 1@ = random_actor_near_point 2@ 3@ 4@ in_radius 1.0 find_next 1 pass_deads 0
    //if and
    //056D:   actor 1@ defined 
    //87D6: not  1@ == PLAYER_ACTOR // @ == $ (int)  
    //    then
    //    break
    //    end
    //end

    until false
    :FUCKEEEEERS_FUCKS
    03E6: remove_text_box  
    
    Actor.StorePos(1@, 2@, 3@, 4@)
    0665: get_actor 1@ model_to 5@
    0AF3: write_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "PED_X"
    0AF3: write_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "PED_Y"
    0AF3: write_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "PED_Z"    
    0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PED_MODEL"   
    
    text.ClearAll()
    break
    end

end

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()
    
while true
wait 0
text.ShowH('SE653',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    gosub @ANIM_ID_SELECT 
    if
    5@ == -1
        then
        33@ = 0
        text.RemoveTextBox()
        text.ClearAll()
        wait 5
        ZAME_NAME_AUD_TYPING_FLAG = 0                
        jump @TARGETS_SETTINGS2
        end             
        
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
        
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    0AF5: write_string v$TEAM1_NAME to_ini_file "me\temp.dat" section v$RACE_FILE key "IFP_NAME"
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ANIM_NAME"    
                                   
    jump to @SKIP_TYPING_IFP
    end
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
        
end
        
//////////////////////////////

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE76'

while true
wait 0

if
8A2A: not  text_box 'SE76' displayed
then
0512: show_permanent_text_box 'SE76'
end

:IFP_INCORRECT2

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE208" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE208" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0                
    jump @TARGETS_SETTINGS2    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then    
    text.RemoveTextBox()
    text.ClearAll()    
    
    gosub @CHECK_FOR_IFP_EXISTING    
    if
    12@ == 0
    then
    text.ShowH('SE237',1000,1)
    wait 1000
    jump to @IFP_INCORRECT2    
    end
    
    33@ = 0
    0@ = 0
    
    while not animation.Available(v$SNAME3)
    wait 0
    animation.Load(v$SNAME3)
    if
    33@ > 1000
        then
        break
        0@ = 1
        end
    end
    
    wait 5
    if
    0@ == 0
        then
        
        098B: v$TEAM1_NAME = v$SNAME3 + v$TEAM2_NAME // all string variables
        gosub @ANIM_NAME_SELECT
        if
        ZAME_TEMP_FUCKEEE == 12345
        then
        ZAME_TEMP_FUCKEEE = 0
        33@ = 0
        text.RemoveTextBox()
        text.ClearAll()
        wait 5
        ZAME_NAME_AUD_TYPING_FLAG = 0                
        jump @TARGETS_SETTINGS2
        end    
        
        :SKIP_TYPING_IFP  
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
        else
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
        end
        
        if or
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        ZAME_RECREATE_OBJECTIVE_FLAG == 2
        then
        0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
        end        
                
        //////////////////////////////
        
        if or
        0D49: 12@ = compare_strings v$SNAME3 "look_at_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "aim_at_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "rotate_to_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "climb" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "jump" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "die_headshooted" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "die" // IF and SET
        then
        jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF_PRE_AFTER
        else
        if or 
        0D49: 12@ = compare_strings v$SNAME3 "shoot_at_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "look_at_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "aim_at_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "hands_up" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "clear_task" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "crouch" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "drive_to" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "give_weapon" // IF and SET
            then
            jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF_PRE_AFTER
            else
            jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF_PRE
            end
        end
                        
        //////////////////////////////
    
        text.ClearAll()
        text.RemoveTextBox()
        
        while true
        wait 0
        text.ShowH('SE229',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_WAIT_FOR_NEXT_OBJECTIVE"        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        end
        
        :SKIP_SHIT_EEROIEJRMEWMRPOWEF_PRE
        
        //////////////////////////////
    
        text.ClearAll()
        text.RemoveTextBox()
        
        while true
        wait 0
        text.ShowH('SE661',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_WAIT_FOR_NEXT_OBJECTIVE"        
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        end
        
        :SKIP_SHIT_EEROIEJRMEWMRPOWEF_PRE_AFTER
            
        //////////////////////////////        
        
        0AF1: write_int 16 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"    
        
        0AF5: write_string v$TEAM1_NAME to_ini_file "me\temp.dat" section v$RACE_FILE key "IFP_NAME"        
        actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
        128@ = actor.Angle(PLAYER_ACTOR)
        0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"    
        
        if or
        0D49: 12@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "jump" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "climb" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "aim_at_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "aim_at_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "shoot_at_point" // IF and SET
        then
        jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF
        end
        
        if or
        0D49: 12@ = compare_strings v$SNAME3 "look_at_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "look_at_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "rotate_to_point" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "rotate_to_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "attack_ped" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "attack_car" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "crouch" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "die" // IF and SET
        then
        jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF
        end
        
        if or
        0D49: 12@ = compare_strings v$SNAME3 "die_headshooted" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "sit_car_driver" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "sit_car_passeng" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "hands_up" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "exit_car" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "say_text" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "clear_task" // IF and SET
        0D49: 12@ = compare_strings v$SNAME3 "drive_to" // IF and SET
        then
        jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF
        end
        
        if
        0D49: 12@ = compare_strings v$SNAME3 "give_weapon" // IF and SET
        then
        jump to @SKIP_SHIT_EEROIEJRMEWMRPOWEF
        end
        
        //////////////////////////////
    
        while true
        wait 0
        text.ShowH('SE210',100,1)
        
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            ZAME_NAME_AUD_TYPING_FLAG = 3
            gosub @ANIM_TIME_SELECT
            ZAME_NAME_AUD_TYPING_FLAG = 2
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "LOOP_FLAG"
            break
            end
        
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
        
        end
        
        :SKIP_SHIT_EEROIEJRMEWMRPOWEF
                        
        gosub @IFP_CHECK_FOR_ADDITIONAL_PARAMS
        
        0@ = 0
        0@ = Marker.CreateIconAndSphere2(ZAME_ANIM_FOR_PLAYER_TRIGGER_ICON_ID, 2@,3@,4@)
        1@ = Object.Init(ZAME_ANIM_FOR_PLAYER_OBJECT_ID, 2@, 3@, 4@)
        0566: link_object 1@ to_interior $ACTIVE_INTERIOR
        0581: enable_radar 1 
        03E6: remove_text_box
        Player.CanMove(PLAYER_CHAR) = true
        
        0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
        0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
        
        if and
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        then
        ZAME_CURRENT_OBJECTIVE_INDEX += 1 
        ZAME_OBJECTIVES_COUNT += 1
        end
        
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
        
        wait 100
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        00BC: show_text_highpriority GXT 'SE207' time 2000 flag 1
        gosub @zame_created_trigger_sound
        else
        00BC: show_text_highpriority GXT 'SE207B' time 2000 flag 1
        gosub @zame_recreated_trigger_sound
        gosub @MISSION_SAVE_INITIALIZATION
        end
        
        ZAME_NAME_AUD_TYPING_FLAG = 0
         
        jump @TARGETS_SETTINGS2
        
        else
        :IFP_INCORRECT
        text.ShowH('SE235',1000,1)
        wait 1000
        end
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CHECK_FOR_IFP_EXISTING

12@ = 0
0AF0: get_int 11@ from_ini_file "data\animslist.ini" section "INFO" key "MAX"

for 10@ = 0 to 11@
0AD3: v$FUCK_CHRI = format "%d" 10@
if
0AF4: 0@v = read_string_from_ini_file "data\animslist.ini" section "ANIMLIST" key v$FUCK_CHRI
    then
    if
    0D49: 9@ = compare_strings v$SNAME3 0@v // IF and SET
        then
        12@ = 1
        return
        end
    end
end

return

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ANIM_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE125'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE209" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE209" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_TEMP_FUCKEEE = 12345                
    return    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    
    ///////////////////////
    
    while not animation.Available(v$TEAM1_NAME)
    wait 0
    animation.Load(v$TEAM1_NAME)
    end
    
    //////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    0@ = 0
    
    while true
    wait 0
    text.ShowH('SE239',100,1)
    0812: AS_actor PLAYER_ACTOR perform_animation v$SNAME3 IFP v$TEAM1_NAME framedelta 4.0 loopA 1 lockX 0 lockY 0 lockF 0 time 100  // versionB
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()
        0@ = 1        
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()        
        break
        end
        
    end
        
    //////////////////////////////
    
    if
    0@ == 1
        then 
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
        else
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
        end
        
        if or
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        ZAME_RECREATE_OBJECTIVE_FLAG == 2
        then
        0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
        end
                   
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ANIM_NAME"    
        return
        else
        0512: show_permanent_text_box 'SE125'        
        end    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ANIM_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE127'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE211" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE211" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5        
            
    return
    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "ANIM_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TXD_NAME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE246'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE247" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE247" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0                
    jump @TARGETS_SETTINGS2    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end
    
    ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0    
    gosub @ZAME_OBJC_PICTURES_CHECK        
    wait 5
    if
    ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
        then            
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
        else
        0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
        end
        
        if or
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        ZAME_RECREATE_OBJECTIVE_FLAG == 2
        then
        0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
        end                
        
        0AF1: write_int 17 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
        0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"    
        
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "TEXTURE_NAME"
        
        //////////////////////////////
    
        text.ClearAll()
        text.RemoveTextBox()
        
        while true
        wait 0
        text.ShowH('SE244',100,1)
            
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            text.ClearAll()
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_WAIT_FOR_NEXT_OBJECTIVE"            
            ZAME_NAME_AUD_TYPING_FLAG = 3
            gosub @TXD_TIME_SELECT
            ZAME_NAME_AUD_TYPING_FLAG = 2                                            
            break
            end
            
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            text.ClearAll()        
            break
            end
            
        end
            
        //////////////////////////////
                
        actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
        128@ = actor.Angle(PLAYER_ACTOR)
        0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"            
        
        0@ = 0
        0@ = Marker.CreateIconAndSphere2(ZAME_TXD_SHOW_TRIGGER_ICON_ID, 2@,3@,4@)
        1@ = Object.Init(ZAME_TXD_SHOW_OBJECT_ID, 2@, 3@, 4@)
        0566: link_object 1@ to_interior $ACTIVE_INTERIOR
        0581: enable_radar 1 
        03E6: remove_text_box
        Player.CanMove(PLAYER_CHAR) = true
        
        0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
        0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
        
        if and
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
        then
        ZAME_CURRENT_OBJECTIVE_INDEX += 1 
        ZAME_OBJECTIVES_COUNT += 1
        end
        
        ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
        
        wait 100
        
        if
        ZAME_RECREATE_OBJECTIVE_FLAG == 0
        then
        00BC: show_text_highpriority GXT 'SE249' time 2000 flag 1
        gosub @zame_created_trigger_sound
        else
        00BC: show_text_highpriority GXT 'SE249B' time 2000 flag 1
        gosub @zame_recreated_trigger_sound
        gosub @MISSION_SAVE_INITIALIZATION
        end
        
        ZAME_NAME_AUD_TYPING_FLAG = 0
         
        jump @TARGETS_SETTINGS2
        
        else
        text.ShowH('SE238',1000,1)
        wait 1000
        end
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TXD_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE248'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE245" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE245" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5        
            
    return
    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "TXD_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:SPECINF_HP_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE292'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE291" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE291" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5        
    ZAME_NAME_AUD_TYPING_FLAG = 0
            
    return
    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SPECINF_HP"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:FADE_IN_OUT_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2

if
0A4B:   controls_set_to_joystick
then
v$SNAME3 = "1000"
jump to @GAMEPAD_SELECT_FADE_IN_OUT_JUMP
end
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE304'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE302" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE302" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0                
    jump @TARGETS_SETTINGS2    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    :GAMEPAD_SELECT_FADE_IN_OUT_JUMP
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end                    
        
    0AF1: write_int 18 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"    
        
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_TIME"        
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
    128@ = actor.Angle(PLAYER_ACTOR)
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
    
    //////////////////////////////
    
    while true
    wait 0
    text.ShowH('SE301',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_TYPE"
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_TYPE"
        break
        end
        
    end
        
    //////////////////////////////
    
    text.RemoveTextBox()
    text.ClearAll()            
    
    0@ = 0    
    0@ = Marker.CreateIconAndSphere2(ZAME_FADEINOUT_TRIGGER_ICON_ID, 2@,3@,4@)
    1@ = Object.Init(ZAME_FADEINOUT_OBJECT_ID, 2@, 3@, 4@)
    0566: link_object 1@ to_interior $ACTIVE_INTERIOR
    0581: enable_radar 1 
    03E6: remove_text_box
    Player.CanMove(PLAYER_CHAR) = true
        
    0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
    0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
        
    if and
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    then
    ZAME_CURRENT_OBJECTIVE_INDEX += 1 
    ZAME_OBJECTIVES_COUNT += 1
    end
        
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
        
    wait 100
        
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    00BC: show_text_highpriority GXT 'SE305' time 2000 flag 1
    gosub @zame_created_trigger_sound
    else
    00BC: show_text_highpriority GXT 'SE305B' time 2000 flag 1
    gosub @zame_recreated_trigger_sound
    gosub @MISSION_SAVE_INITIALIZATION
    end
        
    ZAME_NAME_AUD_TYPING_FLAG = 0
         
    jump @TARGETS_SETTINGS2        
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:SAVESTATUS_ON_OFF_SELECT

text.RemoveTextBox()
text.ClearAll()

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 19 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_SAVESTATUS_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_SAVESTATUS_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE306' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE306B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS2

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:BOMBARDING_SELECT

text.RemoveTextBox()
text.ClearAll()

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 20 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

//////////////////////////////
    
while true
wait 0
text.ShowH('SE487',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_TIMER"
    break
    end
        
if
0E3E: is_button_just_pressed 0 button 10
    then
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "NO_TIMER"
    break
    end
        
end
        
//////////////////////////////
    
text.RemoveTextBox()
text.ClearAll()            

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_BOMBARDING_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_BOMBARDING_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE317' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE317B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS2

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:OBJECTIVE_GOTO_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE322'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE323" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE323" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0                
    jump @TARGETS_SETTINGS2    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end                    
        
    0AF1: write_int 21 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"    
        
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_GOTO_NUM"        
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
    128@ = actor.Angle(PLAYER_ACTOR)
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
    
    //////////////////////////////
    
    while true
    wait 0
    text.ShowH('SE324',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DONT_ASK"
        
        text.ClearAll()
        text.RemoveTextBox()
        
        //////////////////////////////
    
        while true
        wait 0
        text.ShowH('SE649',100,1)
                
        if
        0E3E: is_button_just_pressed 0 button 11
            then
            0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "RANDOM"
            break
            end
                
        if
        0E3E: is_button_just_pressed 0 button 10
            then
            break
            end
                
        end
                
        //////////////////////////////
        
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "DONT_ASK"
        
        //////////////////////////////
        
        0AF0: 0@ = get_int_from_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_GOTO_NUM"
        0AD3: v$SNAME3 = format "zgto%d" 0@
        09FD: get_gxt_string v$SNAME3 width_to 1@
        if
        1@ < 1
        then
        0AD3: v$SNAME3 = format "zgt%d" 0@
        end       
        
        while true
        wait 0
        
        text.ShowH('SE325',100,1)
        
//        0AD1: show_formatted_text_highpriority "STRING - %s LENGHT - %d" time 2000 v$SNAME3 0@   
            
        09FD: get_gxt_string v$SNAME3 width_to 0@
        if and
        0@ > 0
        0@ <= 2670
            then
            03F0: enable_text_draw 1 
            03E0: draw_text_behind_textures 1
            03E3: set_texture_to_be_drawn_antialiased 1 
            0342: set_text_draw_centered 1
            0344: set_text_draw_linewidth 640.0 for_centered_text
            033F: set_text_draw_letter_size 0.2 1.1 
            081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
            0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
                
            if
            UNITED_MAP == 1
            then    
            0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
            end
            
            033E: set_draw_text_position 320.0 15.0 GXT v$SNAME3  // Push
            
            if
            00E1:   player 0 pressed_key 16
            then
            break
            end
                        
            else
            if
            0@ >= 2670
                then
                            
                03F0: enable_text_draw 1 
                03E0: draw_text_behind_textures 1
                03E3: set_texture_to_be_drawn_antialiased 1 
                0342: set_text_draw_centered 1
                0344: set_text_draw_linewidth 300.0 for_centered_text
                033F: set_text_draw_letter_size 0.2 1.1 
                081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
                0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
                    
                if
                UNITED_MAP == 1
                then    
                0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
                end
                
                033E: set_draw_text_position 320.0 15.0 GXT 'SE665'  // Push
                
                end
            end
            
        end
        
        //////////////////////////////
        
        break
        end
        
    end
        
    //////////////////////////////                
    
    text.RemoveTextBox()
    text.ClearAll()            
    
    0@ = 0    
    0@ = Marker.CreateIconAndSphere2(ZAME_GOTO_TRIGGER_ICON_ID, 2@,3@,4@)
    1@ = Object.Init(ZAME_GOTO_OBJECT_ID, 2@, 3@, 4@)
    0566: link_object 1@ to_interior $ACTIVE_INTERIOR
    0581: enable_radar 1 
    03E6: remove_text_box
    Player.CanMove(PLAYER_CHAR) = true
        
    0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
    0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
        
    if and
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    then
    ZAME_CURRENT_OBJECTIVE_INDEX += 1 
    ZAME_OBJECTIVES_COUNT += 1
    end
        
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
        
    wait 100
        
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    00BC: show_text_highpriority GXT 'SE320' time 2000 flag 1
    gosub @zame_created_trigger_sound
    else
    00BC: show_text_highpriority GXT 'SE320B' time 2000 flag 1
    gosub @zame_recreated_trigger_sound
    gosub @MISSION_SAVE_INITIALIZATION
    end
        
    ZAME_NAME_AUD_TYPING_FLAG = 0
         
    jump @TARGETS_SETTINGS2        
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CAM_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE313'

while true
wait 0

if
8A2A: not  text_box 'SE313' displayed
    then
    0512: show_permanent_text_box 'SE313'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE302" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE302" string v$NAME3 time 99999999 1
end

if and
0E3D: is_key_just_pressed 17
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    0AF1: write_int 10000 to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_MOV_TIME"        
    ZAME_NAME_AUD_TYPING_FLAG = 0
            
    return
    
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "CAM_MOV_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:OBJ_DEFENSE_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE327'

while true
wait 0

if
8A2A: not  text_box 'SE327' displayed
    then
    0512: show_permanent_text_box 'SE327'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE326" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE326" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_DEFEND_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CAM_SHAKE_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2

if
0A4B:   controls_set_to_joystick
then
v$SNAME3 = "1000"
jump to @GAMEPAD_SELECT_CAM_SHAKE_JUMP
end
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE428'

while true
wait 0

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK 

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE416" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE416" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0                
    jump @TARGETS_SETTINGS3    
    end

if
0E45: frame_mod 15
then    
if
8846: not  string v$SNAME3 empty // v$
    then
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section "VERY_TEMP_SUCTION" key "SHAKE_INTENSITY"
    0AF0: get_int 1@ from_ini_file "me\temp.dat" section "VERY_TEMP_SUCTION" key "SHAKE_INTENSITY"
    if
    1@ > 0
        then
        camera.Shake(1@)
        end
    end 
end   

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    :GAMEPAD_SELECT_CAM_SHAKE_JUMP
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
    else
    0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
    end
    
    if or
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    ZAME_RECREATE_OBJECTIVE_FLAG == 2
    then
    0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
    end                    
        
    0AF1: write_int 25 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
    0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"    
        
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SHAKE_INTENSITY"        
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
    0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
    0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
    128@ = actor.Angle(PLAYER_ACTOR)
    0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
    
    //////////////////////////////
    
    while true
    wait 0
    text.ShowH('SE417',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then    
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "DO_SHAKE_UNTIL_NEXT_OBJ"
        jump to @FINISH_CAM_SHAKE
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.RemoveTextBox()
        text.ClearAll()  
        break
        end
        
    end
    
    wait 0
        
    //////////////////////////////    
    
    while true
    wait 0
    text.ShowH('SE423',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then    
        gosub @CAM_SHAKE_TIME_SELECT
        jump to @FINISH_CAM_SHAKE
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        break
        end
        
    end
        
    //////////////////////////////
    
    :FINISH_CAM_SHAKE
    
    text.RemoveTextBox()
    text.ClearAll()            
    
    0@ = 0    
    0@ = Marker.CreateIconAndSphere2(ZAME_CAM_SHAKE_TRIGGER_ICON_ID, 2@,3@,4@)
    1@ = Object.Init(ZAME_CAM_SHAKE_OBJECT_ID, 2@, 3@, 4@)
    0566: link_object 1@ to_interior $ACTIVE_INTERIOR
    0581: enable_radar 1 
    03E6: remove_text_box
    Player.CanMove(PLAYER_CHAR) = true
        
    0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
    0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"
        
    if and
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
    then
    ZAME_CURRENT_OBJECTIVE_INDEX += 1 
    ZAME_OBJECTIVES_COUNT += 1
    end
        
    ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0
        
    wait 100
        
    if
    ZAME_RECREATE_OBJECTIVE_FLAG == 0
    then
    00BC: show_text_highpriority GXT 'SE426' time 2000 flag 1
    gosub @zame_created_trigger_sound
    else
    00BC: show_text_highpriority GXT 'SE426B' time 2000 flag 1
    gosub @zame_recreated_trigger_sound
    gosub @MISSION_SAVE_INITIALIZATION
    end
        
    ZAME_NAME_AUD_TYPING_FLAG = 0
         
    jump @TARGETS_SETTINGS3        
    
    end        

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:KONTROL_TO4KA_CREATE

text.RemoveTextBox()
text.ClearAll()

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 26 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_KONTROLT4K_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_KONTROLT4K_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE515' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE515B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS3 

////////////////////////////////////////////////////////////////// 
   
:CHANGE_TIME_OBJECTIVE_21408
Player.CanMove(PLAYER_CHAR) = False
0E6A: make_nop 0x052CF53 size 6 //Выключаем обновление часов
0512: show_permanent_text_box 'se40'
wait 100  
00BF: 20@ = current_time_hours, 21@ = current_time_minutes 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 

:CHANGE_TIME_OBJECTIVE_21443
wait 0
00E2: get_player 0 key 1 state_to 0@ 
if
not 0@ > 0
jf @CHANGE_TIME_OBJECTIVE_21547 
if
not 0@ < 0
jf @CHANGE_TIME_OBJECTIVE_21591
00E2: get_player 0 key 0 state_to 0@ 
if
not 0@ < 0
jf @CHANGE_TIME_OBJECTIVE_21547_MINUTES 
if
not 0@ > 0
jf @CHANGE_TIME_OBJECTIVE_21591_MINUTES 
if 
00E1:   player 0 pressed_key 16 
jf @CHANGE_TIME_OBJECTIVE_21687 
03E6: remove_text_box

text.ClearAll()
text.RemoveTextBox()

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

while true
wait 0
00C0: set_current_time_hours_to 20@ minutes_to 21@
text.ShowH('SE525',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "SMOOTH_CHANGE"
    text.ClearAll() 
    
    while true
    wait 0
    00C0: set_current_time_hours_to 20@ minutes_to 21@
    text.ShowH('SE526',100,1)
        
    if
    0E3D: is_key_just_pressed 49
        then
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHANGE_SPEED"
        text.ClearAll()         
        break
        end
        
    if
    0E3D: is_key_just_pressed 50
        then
        0AF1: write_int 2 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHANGE_SPEED"
        text.ClearAll()        
        break
        end
        
    if
    0E3D: is_key_just_pressed 51
        then
        0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHANGE_SPEED"
        text.ClearAll()        
        break
        end 
        
    if
    0E3D: is_key_just_pressed 52
        then
        0AF1: write_int 3 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHANGE_SPEED"
        text.ClearAll()        
        break
        end  
        
    if
    0E3D: is_key_just_pressed 53
        then
        0AF1: write_int 4 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHANGE_SPEED"
        text.ClearAll()        
        break
        end
        
    if
    0E3D: is_key_just_pressed 54
        then
        0AF1: write_int 5 to_ini_file "me\temp.dat" section v$RACE_FILE key "CHANGE_SPEED"
        text.ClearAll()        
        break
        end             
        
    end   
            
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "SMOOTH_CHANGE"
    text.ClearAll()        
    break
    end
    
end   

03E6: remove_text_box  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_TIMECHANGE_TRIGGER_ICON_ID, 2@, 3@, 4@)

ZAME_OBJECT_HANLDE = Object.Init(ZAME_TIMECHANGE_OBJECT_ID, 2@, 3@, 4@)
0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR

0AF1: write_int 27 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF1: write_int 20@ to_ini_file "me\temp.dat" section v$RACE_FILE key "HOUR"
0AF1: write_int 21@ to_ini_file "me\temp.dat" section v$RACE_FILE key "MINUTE"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CHECKPOINT_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CHECKPOINT_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CHECKPOINT_Z"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351 
 
if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'se79' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'se79b' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3

:CHANGE_TIME_OBJECTIVE_21547
20@ -= 1 
if 
  20@ >= 0 
jf @CHANGE_TIME_OBJECTIVE_21661 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443 

:CHANGE_TIME_OBJECTIVE_21591
20@ += 1 
if 
   not 20@ > 23 
jf @CHANGE_TIME_OBJECTIVE_21635 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443 

:CHANGE_TIME_OBJECTIVE_21635
20@ = 0 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443 

:CHANGE_TIME_OBJECTIVE_21661
20@ = 23 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443

:CHANGE_TIME_OBJECTIVE_21547_MINUTES
21@ -= 1 
if 
  21@ >= 0 
jf @CHANGE_TIME_OBJECTIVE_21661_MINUTES 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443 

:CHANGE_TIME_OBJECTIVE_21591_MINUTES
21@ += 1 
if 
   not 21@ > 59 
jf @CHANGE_TIME_OBJECTIVE_21635_MINUTES 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443 

:CHANGE_TIME_OBJECTIVE_21635_MINUTES
21@ = 0 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443 

:CHANGE_TIME_OBJECTIVE_21661_MINUTES
21@ = 59 
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
wait 100 
jump @CHANGE_TIME_OBJECTIVE_21443  

:CHANGE_TIME_OBJECTIVE_21687
if 
00E1:   player 0 pressed_key 15 
jf @CHANGE_TIME_OBJECTIVE_21443
0AF0: 0@ = get_int_from_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "FREZEE_TIME"
if
0@ == 1
then
0E6A: make_nop 0x052CF53 size 6 //Выключаем обновление часов
else
//Возвращаем обновление часов
0A8C: write_memory 0x052CF53 size 2 value 1534 virtual_protect 1
0A8C: write_memory 0x052CF55 size 2 value 338 virtual_protect 1
0A8C: write_memory 0x052CF57 size 2 value 183 virtual_protect 1
end
00C0: set_current_time_hours_to 20@ minutes_to 21@ 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS3 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_CODENUMBER_OBJECTIVE
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE559' 

:ZAME_CODENUMBER_OBJECTIVE_25161
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @ZAME_CODENUMBER_OBJECTIVE_25523 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CODENUMBER_TRIGGER_ICON_ID, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_CODENUMBER_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
077E: get_active_interior_to 6@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

Player.CanMove(PLAYER_CHAR) = false
gosub @CODENUMBER_NUMBER_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
then
ZAME_NAME_AUD_TYPING_FLAG = 0
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3
end

0AF1: write_int 28 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CODEPANEL_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CODEPANEL_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CODEPANEL_Z"
0AF1: write_int 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TELEPORT_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE560' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE561' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end    
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3

:ZAME_CODENUMBER_OBJECTIVE_25523
if 
00E1:   player 0 pressed_key 11 
jf @ZAME_CODENUMBER_OBJECTIVE_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS3

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_REMOVE_WEPS_OBJECTIVE

text.RemoveTextBox()
text.ClearAll()

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 29 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"

actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_REMOVEWEPS_TRIGGER_ICON_ID, 2@,3@,4@)
1@ = Object.Init(ZAME_REMOVEWEPS_OBJECT_ID, 2@, 3@, 4@)
0566: link_object 1@ to_interior $ACTIVE_INTERIOR
0581: enable_radar 1 
03E6: remove_text_box
Player.CanMove(PLAYER_CHAR) = true

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE568' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE569' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS3 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_object_grab
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE555'
wait 100 

:zame_menu_object_grab_25161
wait 0
actor.StorePos(PLAYER_ACTOR,0@,1@,2@) 
if
0E3E:   player 0 pressed_key 16 
jf @zame_menu_object_grab_255232
0AE3: ZAME_OBJECT_HANLDE = random_object_near_point 0@ 1@ 2@ in_radius 5.0 find_next 1 //IF and SET
if
03CA:   object ZAME_OBJECT_HANLDE exists
jf @zame_menu_object_grab_255232

0984: 1@ = object ZAME_OBJECT_HANLDE model
if and
not 1@ == #GUN_PARA
not 1@ == 18161
jf @zame_menu_object_grab_255232
071E: get_object ZAME_OBJECT_HANLDE health_to 1@
if
1@ > 10000
jf @zame_menu_object_grab_255232
object.StorePos(ZAME_OBJECT_HANLDE,25@,26@,27@)
0984: 1@ = object ZAME_OBJECT_HANLDE model

Player.CanMove(PLAYER_CHAR) = false
08D2: object ZAME_OBJECT_HANLDE scale_model 1.25

while true
wait 0

0AD1: show_formatted_text_highpriority "object id %d, pos %f %f %f, ~n~~r~GRAB?~n~~w~Y - YES, N - NO!" time 10 1@ 25@ 26@ 27@
if
00E1:   player 0 pressed_key 11 
    then 
    08D2: object ZAME_OBJECT_HANLDE scale_model 0.99
    break
    end
if
00E1:   player 0 pressed_key 10 
    then   
    08D2: object ZAME_OBJECT_HANLDE scale_model 0.99
    jump to @zame_menu_object_grab
    end    
    
end

object.StorePos(ZAME_OBJECT_HANLDE,$X,$Y,$Z)
04C4: store_coords_to $X2 $Y2 $Z2 from_actor PLAYER_ACTOR with_offset 1.0 -2.0 0.0
0984: 45@ = object ZAME_OBJECT_HANLDE model

//////////////////////////////

0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE556' 

:zame_menu_object_grab_25161B
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @zame_menu_object_grab_25523B 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_OBJECTGRAB_TRIGGER_ICON_ID, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_OBJECTGRAB_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
077E: get_active_interior_to 6@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

Player.CanMove(PLAYER_CHAR) = false

0AF1: write_int 30 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 25@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_X"
0AF3: write_float 26@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_Y"
0AF3: write_float 27@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_Z"
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_Z"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
0AF1: write_int 45@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJ_MOV_MODEL"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if
ZAME_SPEC_MOD_FREE_CAM == 1 
then
gosub @ZAME_FREECAMS_CHECK
end
0930: (unknown) 0
Camera.SetBehindPlayer
Camera.Restore_WithJumpCut
Player.CanMove(PLAYER_CHAR) = true
Actor.LockInCurrentPosition(PLAYER_ACTOR) = false
0E68: set_player_control_pad 1 1 
0E69: set_player_control_pad_movement 0 1
0581: enable_radar 1 
03E6: remove_text_box

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

wait 100

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
00BC: show_text_highpriority GXT 'SE572' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE572B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end
 
jump @TARGETS_SETTINGS

:zame_menu_object_grab_255232
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_grab_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS3

:zame_menu_object_grab_25523B
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_object_grab_25161B 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS3

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_lookphoto_point
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE553B' 

:zame_menu_lookphoto_point_25161
wait 0 
if 
0E3E:   player 0 pressed_key 16 
jf @zame_menu_lookphoto_point_25523 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_LOOKONPOINT_TRIGGER_ICON_ID, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_LOOKONPOINT_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
077E: get_active_interior_to 6@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

Player.CanMove(PLAYER_CHAR) = false
//gosub @CODENUMBER_NUMBER_SELECT

0AF1: write_int 31 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE553',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()    
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "PHOTO_FLAG"            
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll() 
    
    //////////////////////////////

    text.ClearAll()
    text.RemoveTextBox()
    
    while true
    wait 0
    text.ShowH('SE554',100,1)
        
    if
    0E3E: is_button_just_pressed 0 button 11
        then
        text.ClearAll()    
        0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "BINO_FLAG"
        break
        end
        
    if
    0E3E: is_button_just_pressed 0 button 10
        then
        text.ClearAll()        
        break
        end
        
    end
        
    //////////////////////////////
           
    break
    end
    
end
    
//////////////////////////////

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE574' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE574B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end    
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3

:zame_menu_lookphoto_point_25523
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_lookphoto_point_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS3

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_menu_protect_teammate
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE546' 

:zame_menu_protect_teammate_25161
wait 0 
if 
0E3E:   player 0 pressed_key 16 
jf @zame_menu_protect_teammate_25523 
03E6: remove_text_box
  
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_TEAMMATEPROTECT_TRIGGER_ICON_ID, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_TEAMMATEPROTECT_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
077E: get_active_interior_to 6@

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

Player.CanMove(PLAYER_CHAR) = false
gosub @ALLY_PROTECT_ID_NUMBER_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
then
ZAME_NAME_AUD_TYPING_FLAG = 0
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3
end

:zame_menu_protect_teammate_time_select_27207
0581: enable_radar 1 
0512: show_permanent_text_box 'SE577' 
5@ = 1
wait 100 

:zame_menu_protect_teammate_time_select_27238
wait 0 
01E5: show_text_1number_highpriority GXT 'se78' number 5@ time 300 flag 1  
if and
80E1:   not player 0 pressed_key 11
8E10: not is_mouse_wheel_up 
jf @zame_menu_protect_teammate_time_select_27519 
if and
80E1:   not player 0 pressed_key 10
8E11: not is_mouse_wheel_down 
jf @zame_menu_protect_teammate_time_select_27555 
if 
0E3E:   player 0 pressed_key 16 
jf @zame_menu_protect_teammate_time_select_27238

//////////////////////////////

text.ClearAll()
text.RemoveTextBox()

while true
wait 0
text.ShowH('SE227',100,1)
    
if
0E3E: is_button_just_pressed 0 button 11
    then
    text.ClearAll()
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "HIDDEN_TIMER_FLAG"        
    break
    end
    
if
0E3E: is_button_just_pressed 0 button 10
    then
    text.ClearAll()        
    break
    end
    
end
    
//////////////////////////////

0AF1: write_int 32 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PROTECT_GOTO_POINT_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PROTECT_GOTO_POINT_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PROTECT_GOTO_POINT_Z"
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TIMER_SECONDS"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "PROTECT_GOTO_POINT_A"
//0AF5: write_string "BOMBER" to_ini_file "me\temp.dat" section v$RACE_FILE key "IFP"
//0AF5: write_string "BOM_Plant_Loop" to_ini_file "me\temp.dat" section v$RACE_FILE key "ANIM_NAME"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE576' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE576B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end    
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS3

:zame_menu_protect_teammate_25523
if 
00E1:   player 0 pressed_key 15 
jf @zame_menu_protect_teammate_25161 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
03E6: remove_text_box 
jump @TARGETS_SETTINGS3

:zame_menu_protect_teammate_time_select_27519

if
80E1:   not player 0 pressed_key 14
then 
5@ += 1
else
5@ += 10
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_protect_teammate_time_select_27238 

:zame_menu_protect_teammate_time_select_27555

if
80E1:   not player 0 pressed_key 14
then 
5@ -= 1
else
5@ -= 10
end
 
if 
5@ < 1 
then
5@ = 1
end
 
if and
8E10: not is_mouse_wheel_up
8E11: not is_mouse_wheel_down
then 
wait 100
end
 
jump @zame_menu_protect_teammate_time_select_27238 

:zame_change_skin_weapon
ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM = 6
jump to @ZAME_MENU_PLAYER_SETTINGS_18973  

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:TARGETS_SETTINGS4
    
Player.CanMove(PLAYER_CHAR) = False
Cinema.Radar(0)
0512: show_permanent_text_box 'SE117'
08D4: $PANEL = create_panel_with_title 'SE10' position 72.0 160.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
if
8A4B: not  controls_set_to_joystick
then
08DB: set_panel $PANEL column 0 header 'dummy' data 'SE552' 'SE596' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 
else 
//08DB: set_panel $PANEL column 0 header 'dummy' data 'SE51' 'dummy' 'dummy' 'SE300' 'SE303' 'SE316' 'SE333' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy' 'dummy'
end

if
not ZAME_OBJECTS_COUNT > 0
then
08D9: set_panel $PANEL row 8 enable 0
end

//if
//not ZAME_OBJECTS_COUNT > 0
//then
//08D9: set_panel $PANEL row 1 enable 0
//end
//
//if
//not ZAME_OBJECTIVES_COUNT > 0
//then
//08D9: set_panel $PANEL row 10 enable 0
//end
 
wait 100
ZAME_RECREATE_OBJECTIVE_FLAG = 0     

:TARGETS_SETTINGS4_CLOSE_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 15 
jf @TARGETS_SETTINGS4_SELECTED_CHECK    
08DA: remove_panel $PANEL 
Text.RemoveTextBox
wait 100 
jump @TARGETS_SETTINGS3

:TARGETS_SETTINGS4_SELECTED_CHECK
wait 0 
if 
00E1:   player 0 pressed_key 16 
jf @TARGETS_SETTINGS4_CLOSE_CHECK

08D7: 0@ = panel $PANEL active_row 
08DA: remove_panel $PANEL 
Text.RemoveTextBox
if
8A4B: not  controls_set_to_joystick
then
0871: init_jump_table 0@ total_jumps 12 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_change_skin_weapon 1 @zame_car_search_objective 2 @ZAME_OPEN_CHECK 3 @ZAME_OPEN_CHECK 4 @ZAME_OPEN_CHECK 5 @ZAME_OPEN_CHECK 6 @ZAME_OPEN_CHECK 
0872: jump_table_jumps 7 @ZAME_OPEN_CHECK 8 @ZAME_OPEN_CHECK 9 @ZAME_OPEN_CHECK 10 @ZAME_OPEN_CHECK 11 @ZAME_OPEN_CHECK 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
else
//0871: init_jump_table 0@ total_jumps 11 default_jump 0 @ZAME_OPEN_CHECK jumps 0 @zame_menu_explode_trigger_27207 1 @zame_menu_object_destroy 2 @zame_menu_weather_change_21732 3 @FADE_IN_OUT_SELECT 4 @SAVESTATUS_ON_OFF_SELECT 5 @BOMBARDING_SELECT 6 @ZAME_HUMAN_ENEMY_CREATE_MENU 
//0872: jump_table_jumps 7 @ZAME_OPEN_CHECK 8 @ZAME_OPEN_CHECK 9 @ZAME_OPEN_CHECK 10 @ZAME_OPEN_CHECK 11 @ZAME_OPEN_CHECK 12 @ZAME_OPEN_CHECK 13 @ZAME_OPEN_CHECK 14 @ZAME_OPEN_CHECK 15 @ZAME_OPEN_CHECK
end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:zame_car_search_objective
0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE597' 
  
if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end

if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end            

Player.CanMove(PLAYER_CHAR) = false
gosub @ALLY_CARSEARCH_NUMBER_SELECT
if
ZAME_NAME_AUD_TYPING_FLAG == -669966
then
ZAME_NAME_AUD_TYPING_FLAG = 0
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS4
end

Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
0@ = 0
0@ = Marker.CreateIconAndSphere2(ZAME_CARSEARCH_TRIGGER_ICON_ID, 2@, 3@, 4@)
ZAME_OBJECT_HANLDE = Object.Init(ZAME_CARSEARCH_OBJECT_ID, 2@, 3@, 4@)
0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR
077E: get_active_interior_to 6@

//////////////////////////////

0AF1: write_int 34 to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_TYPE"
0AF1: write_int $ACTIVE_INTERIOR to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_INT"
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_Z"
128@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 128@ to_ini_file "me\temp.dat" section v$RACE_FILE key "OBJECTIVE_A"

0AF1: write_int ZAME_OBJECTIVES_COUNT to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVES_COUNT"
0AF1: write_int ZAME_CURRENT_OBJECTIVE_INDEX to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "OBJECTIVE_INDEX"

if and
ZAME_RECREATE_OBJECTIVE_FLAG == 0
not ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
then
ZAME_CURRENT_OBJECTIVE_INDEX += 1 
ZAME_OBJECTIVES_COUNT += 1
end

ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG = 0

gosub @zame_menu_25351

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then 
00BC: show_text_highpriority GXT 'SE599' time 2000 flag 1
gosub @zame_created_trigger_sound
else
00BC: show_text_highpriority GXT 'SE599B' time 2000 flag 1
gosub @zame_recreated_trigger_sound
gosub @MISSION_SAVE_INITIALIZATION
end    
 
Player.CanMove(PLAYER_CHAR) = False
0581: enable_radar 0 
jump @TARGETS_SETTINGS4

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CAM_SHAKE_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE429'

while true
wait 0

if
8A2A: not  text_box 'SE429' displayed
    then
    0512: show_permanent_text_box 'SE429'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE424" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE424" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "REPEAT_SHAKE_FOR_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ZAME_ENEMY_PATH_ABADON_DISTANCE_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE429'

while true
wait 0

if
8A2A: not  text_box 'SE485' displayed
    then
    0512: show_permanent_text_box 'SE485'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE484" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE484" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "PATH_ABADON_DISTANCE"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:MUSIC_FADE_IN_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE490'

while true
wait 0

if
8A2A: not  text_box 'SE490' displayed
    then
    0512: show_permanent_text_box 'SE490'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE492" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE492" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
        
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
     
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_IN_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:MUSIC_FADE_OUT_TIME_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE491'

while true
wait 0

if
8A2A: not  text_box 'SE491' displayed
    then
    0512: show_permanent_text_box 'SE491'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE493" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE493" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FADE_OUT_TIME"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ALLY_DELETE_ID_NUMBER_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE510'

while true
wait 0

if
8A2A: not  text_box 'SE510' displayed
    then
    0512: show_permanent_text_box 'SE510'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE511" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE511" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SKIN_TO_DELETE"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CODENUMBER_NUMBER_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE557'

while true
wait 0

if
8A2A: not  text_box 'SE557' displayed
    then
    0512: show_permanent_text_box 'SE557'
    end

CURRENT_LAYOUT = 1
ZAME_TEMP_FUCKEEE = 9996669991
gosub @OBJECT_ID_SELECT_KEYS_CHECK
ZAME_TEMP_FUCKEEE = 0

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE558" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE558" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "CODE"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ALLY_PROTECT_ID_NUMBER_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE510'

while true
wait 0

if
8A2A: not  text_box 'SE510' displayed
    then
    0512: show_permanent_text_box 'SE510'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE511" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE511" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SKIN_TO_PROTECT"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:SCRIPTED_DRIVE_ID_ALLY_FOR_DRIVER_NUMBER_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE593'

while true
wait 0

if
8A2A: not  text_box 'SE593' displayed
    then
    0512: show_permanent_text_box 'SE593'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE511" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE511" string v$NAME3 time 99999999 1
end        

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "SKIN_FOR_DRIVER"    
    return
    
    end

end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:ALLY_CARSEARCH_NUMBER_SELECT

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0

ZAME_NAME_AUD_TYPING_FLAG = 2
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

0512: show_permanent_text_box 'SE597'

while true
wait 0

if
8A2A: not  text_box 'SE597' displayed
    then
    0512: show_permanent_text_box 'SE597'
    end

CURRENT_LAYOUT = 1
gosub @OBJECT_ID_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "SE598" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "SE598" string v$NAME3 time 99999999 1
end

if and
0E3E: is_button_just_pressed 0 button 15
33@ > 500
    then
    3@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = -669966 
    return
    end

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    ZAME_NAME_AUD_TYPING_FLAG = 0        
    
    0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "COUNT_TO_SEARCH"    
    return
    
    end

end

:ZAME_DRIVEBY_SCRIPTED_WEP_SELECT
0581: enable_radar 1 
0512: show_permanent_text_box 'SE592'
018C: play_sound 1057 at 0.0 0.0 0.0 
wait 100 
0089: 1@ = ZAME_PLAYER_START_WEAPON_ID // (float) 
gosub @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20350 

0713: actor PLAYER_ACTOR driveby_actor -1 car -1 point 0.0 0.0 0.0 radius 3000.0 4 0 firing_rate 100

:ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20037
wait 0 

//0A96: 3@ = actor PLAYER_ACTOR struct
//0AA6: call_method 0x5E6280 struct 3@ params 1 pop 0 ZAME_PLAYER_START_WEAPON_ID

/////////////////////FUCK, GET BACK!!!/////////////////////
//if and
//00E1:   player 0 pressed_key 15  
//not ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM == 5
//then
//Player.CanMove(PLAYER_CHAR) = False
//048F: actor PLAYER_ACTOR remove_weapons
//03E6: remove_text_box 
//0581: enable_radar 0 
//ZAME_PLAYER_DUMMY_MARKER = Marker.CreateAboveActor(ZAME_PLAYER_DUMMY)
//Marker.SetColor(ZAME_PLAYER_DUMMY_MARKER, 2)
//0337: set_actor ZAME_PLAYER_DUMMY visibility 1 
//
//while not model.Available(ZAME_START_PLAYER_MODEL)
//wait 0
//model.Load(ZAME_START_PLAYER_MODEL)
//mload
//end
//
//09C7: change_player PLAYER_CHAR model_to ZAME_START_PLAYER_MODEL
//
//if or
//ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM == 4
//ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM == 6
//ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM == 7
//then                   
//jump @TARGETS_SETTINGS3   
//else 
//jump @MISSION_SETTINGS 
//end
//
//end
/////////////////////FUCK, GET BACK!!!/////////////////////

if and
8E3E: not is_button_just_pressed 0 button 11
8E10: not is_mouse_wheel_up 
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20190 
if and
8E3E: not is_button_just_pressed 0 button 10 
8E11: not is_mouse_wheel_down
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20552 

ZAME_TEMP_FUCKEEE = 0
if
270@ < 16
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 106
270@ == 108
270@ == 110
270@ == 115
270@ == 118
270@ == 44
270@ == 45
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 121
270@ == 122
270@ == 123
270@ == 124
270@ == 125
270@ == 126
270@ == 127
270@ == 128
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 129
270@ == 130
270@ == 131
270@ == 132
270@ == 133
270@ == 134
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 154
270@ == 155
270@ == 156
270@ == 157
270@ == 158
270@ == 159
270@ == 160
270@ == 161
    then  
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 162
270@ == 163
270@ == 164
270@ == 92
270@ == 107
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or
270@ == 184
270@ == 185
270@ == 186
270@ == 187
270@ == 188
270@ == 189
270@ == 190
270@ == 191
    then  
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 192
270@ == 193
270@ == 194
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 175
270@ == 176
270@ == 183
270@ == 205
270@ == 206
270@ == 213
    then
    ZAME_TEMP_FUCKEEE = 1
    end
    
if or    
270@ == 177
270@ == 178
270@ == 179
270@ == 207
270@ == 208
270@ == 209
    then
    ZAME_TEMP_FUCKEEE = 1
    end

if and
//00E1:   player 0 pressed_key 16
not ZAME_TEMP_FUCKEEE == 1
0E3E: is_button_just_pressed 0 button 16 
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20116 
03E6: remove_text_box
    
if
ZAME_TEMP_FUCKEEE == 1
then
ZAME_TEMP_FUCKEEE = 0
end
 
048F: actor PLAYER_ACTOR remove_weapons

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end
    
if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end

0AF1: write_int 270@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TURRET_WEP_ID" 
return

:ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20116
if 
//00E1:   player 0 pressed_key 16
0E3E: is_button_just_pressed 0 button 16 
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20037 
048F: actor PLAYER_ACTOR remove_weapons 
03E6: remove_text_box 
0581: enable_radar 0 
return  

:ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20190

if
80E1:   not player 0 pressed_key 14
then
1@ += 1
else
1@ += 10
end
 
gosub @zame_weap_id_get2 
0781: get_weapon_with_ID 270@ model_to 10@ 
if 
07DE:   model 10@ exists // versionB 
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20190 
Model.Load(10@)
038B: load_requested_models 
if 
   Model.Available(10@)
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20190 
11@ = 99999 
Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 270@, 11@) 
0A96: 3@ = actor PLAYER_ACTOR struct
0AA6: call_method 0x5E6280 struct 3@ params 1 pop 0 270@
jump @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20037 

:ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20350
0781: get_weapon_with_ID ZAME_PLAYER_START_WEAPON_ID model_to 10@ 
if 
07DE:   model 10@ exists // versionB 
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20350 
Model.Load(10@)
038B: load_requested_models 
if 
   Model.Available(10@)
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20350 
11@ = 99999  
Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, ZAME_PLAYER_START_WEAPON_ID, 11@)
01B9: set_actor PLAYER_ACTOR armed_weapon_to ZAME_PLAYER_START_WEAPON_ID 
return 

:ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20552

if
80E1:   not player 0 pressed_key 14
then
1@ -= 1
else
1@ -= 10
end
 
gosub @zame_weap_id_get2 
0781: get_weapon_with_ID 270@ model_to 10@ 
if 
07DE:   model 10@ exists // versionB 
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20552 
Model.Load(10@)
038B: load_requested_models 
if 
   Model.Available(10@)
jf @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20552 
11@ = 99999  
Actor.GiveWeaponAndAmmo(PLAYER_ACTOR, 270@, 11@) 
0A96: 3@ = actor PLAYER_ACTOR struct
0AA6: call_method 0x5E6280 struct 3@ params 1 pop 0 270@
jump @ZAME_DRIVEBY_SCRIPTED_WEP_SELECT_20037

:ZAME_CARREC_RECORD

car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,true)
car.StorePos(ZAME_CAR_ADVENTURE_CAR,2@,3@,4@)
5@ = car.Angle(ZAME_CAR_ADVENTURE_CAR)
    
/////////////////////////////////////////////////////////////////////////////////////

text.ClearAll()
text.RemoveTextBox()
    
while true
wait 0
text.ShowH('SE590',100,1)
        
if
0E3E: is_button_just_pressed 0 button 11
    then
    
    CLASSIC_MUSIC = 0
    car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,false)
    :DO_SHIT_AGAIN_PLEASE
    if
    0AF0: 5@ = get_int_from_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "CARREC_NUM"
    then
    5@ += 1
    0AF1: write_int 5@ to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "CARREC_NUM"
    0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "CARREC_NUM"
    //ass
    else
    5@ = 73
    0AF1: write_int 73 to_ini_file "me\temp.dat" section "MISSION_PARAMETERS" key "CARREC_NUM" 
    0AF1: write_int 73 to_ini_file "me\temp.dat" section v$RACE_FILE key "CARREC_NUM"   
    jump to @DO_SHIT_AGAIN_PLEASE
    end
    create_thread @ZAM_REC 0 0 0 0 0 0 0 0 PLAYER_ACTOR 5@ 0 0 0 0 ZAME_MISSION_LOAD_NUMBER
    
    while true
    wait 0
    text.ShowH('SE591',100,1)
    
    if
    0E3E: is_button_just_pressed 0 button 18
        then
        CLASSIC_MUSIC = 2  
        car.StorePos(ZAME_CAR_ADVENTURE_CAR,2@,3@,4@)
        5@ = car.Angle(ZAME_CAR_ADVENTURE_CAR)    
        0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_X0"
        0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_Y0"
        0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_Z0"
        0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_A0"          
        ZAME_OBJECT_HANLDE = Object.Init(ZAME_CAR_ADVENTURE_POINT2_ID, 2@, 3@, 4@)
        0E0D: mark_object_as_needed ZAME_OBJECT_HANLDE
        0566: link_object ZAME_OBJECT_HANLDE to_interior $ACTIVE_INTERIOR 
        0@ = 0
        018A: 0@ = create_checkpoint_at 2@ 3@ 4@
        marker.SetIconSize(0@,2)  
        text.ClearAll()        
        0AF2: get_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_X0"
        0AF2: get_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_Y0"
        0AF2: get_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_Z0"
        0AF2: get_float 5@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DEST_A0" 
        0AF0: get_int 6@ from_ini_file "me\temp.dat" section v$RACE_FILE key "CAR_ID"  
        0AF0: get_int 7@ from_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR1" 
        0AF0: get_int 8@ from_ini_file "me\temp.dat" section v$RACE_FILE key "COLOR2"
        gosub @CAR_CREATE_ZAME_KUKLA3                                
        return
        end
    
    end
    
    break  
    end
        
end     

return 

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:CREATE_PREV_ADVENTURE_CAR
if
model.Available(ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID)
then

if
ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID == 15338
then
0506: set_car_model 15338 next_variation 0 0 // first param is useless
end

ZAME_CAR_ADVENTURE_CAR = car.Create(ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID,ZAME_CAR_ADVENTURE_USE_PREV_CAR_X,ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y,ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z)
0EB4: set_car_coordinates_simple ZAME_CAR_ADVENTURE_CAR position ZAME_CAR_ADVENTURE_USE_PREV_CAR_X ZAME_CAR_ADVENTURE_USE_PREV_CAR_Y ZAME_CAR_ADVENTURE_USE_PREV_CAR_Z
car.Angle(ZAME_CAR_ADVENTURE_CAR) = ZAME_CAR_ADVENTURE_USE_PREV_CAR_A

else
model.Load(ZAME_CAR_ADVENTURE_USE_PREV_CAR_ID)
mload
wait 0
jump to @CREATE_PREV_ADVENTURE_CAR
end

099A: set_car ZAME_CAR_ADVENTURE_CAR collision_detection 0
car.LockInCurrentPosition(ZAME_CAR_ADVENTURE_CAR,true)
car.SetImmunities(ZAME_CAR_ADVENTURE_CAR,1,1,1,1,1)
0229: set_car ZAME_CAR_ADVENTURE_CAR primary_color_to ZAME_CAR_ADVENTURE_USE_PREV_CAR_C1 secondary_color_to ZAME_CAR_ADVENTURE_USE_PREV_CAR_C2

return

:CARSPAWN_SELECT_ALT_NABOR_CHECK

if or
80E1: not  player 0 pressed_key 4
UNITED_MAP == 1
then

//////////////////////////////////////////////////

if
UNITED_MAP == 0
then

if
$CAR_SP_NUM >= 15400 
    then
    $CAR_SP_NUM = 400
    end

else

if
STORIES_MAP == 0
then

if
$UNITED_VC_FLAG == 0
then
$CAR_SP_NUM = 15347
else
$CAR_SP_NUM = 15265
end

else

if
$UNITED_VC_FLAG == 0
then
$CAR_SP_NUM = 15405
else
$CAR_SP_NUM = 15490
end

end

end

//////////////////////////////////////////////////

else

//////////////////////////////////////////////////

$CAR_SP_NUM = 15400

//////////////////////////////////////////////////

end

return

:ZAME_PROHIBITED_WEATHERS_ON_UNITED_MAP_CHECK

if
UNITED_MAP == 1
then

if
$UNITED_III_SPAWN == 0
then

//////////////////////////////////////////////////////////////////

if or
//VC
ZAME_MISSION_STARTING_WEATHER == 0 
ZAME_MISSION_STARTING_WEATHER == 1
ZAME_MISSION_STARTING_WEATHER == 4
ZAME_MISSION_STARTING_WEATHER == 8
ZAME_MISSION_STARTING_WEATHER == 9
    then
    return
    else
    
    repeat
//    wait 0
    005A: ZAME_MISSION_STARTING_WEATHER += 0@
//    0AD1: show_formatted_text_highpriority "ZAME_MISSION_STARTING_WEATHER %d" time 2000 ZAME_MISSION_STARTING_WEATHER    
    if
    ZAME_MISSION_STARTING_WEATHER > 9      
    then
    ZAME_MISSION_STARTING_WEATHER = 0
    end
    
//    if
//    ZAME_MISSION_STARTING_WEATHER < 0
//    then
//    ZAME_MISSION_STARTING_WEATHER = 9
//    end
    
    if or
    //VC
    ZAME_MISSION_STARTING_WEATHER == 0
    ZAME_MISSION_STARTING_WEATHER == 1 
    ZAME_MISSION_STARTING_WEATHER == 4
    ZAME_MISSION_STARTING_WEATHER == 8
    ZAME_MISSION_STARTING_WEATHER == 9
        then
        break
        end
    
    until false
    
    end

//////////////////////////////////////////////////////////////////

else

//III
if or
ZAME_MISSION_STARTING_WEATHER == 5
ZAME_MISSION_STARTING_WEATHER == 7
ZAME_MISSION_STARTING_WEATHER == 9
ZAME_MISSION_STARTING_WEATHER == 16
    then
    return
    else
    
    repeat
//    wait 0
    005A: ZAME_MISSION_STARTING_WEATHER += 0@
//    0AD1: show_formatted_text_highpriority "ZAME_MISSION_STARTING_WEATHER %d" time 2000 ZAME_MISSION_STARTING_WEATHER
    if
    ZAME_MISSION_STARTING_WEATHER > 16
    then
    ZAME_MISSION_STARTING_WEATHER = 0
    end
    
    if
    ZAME_MISSION_STARTING_WEATHER < 0
    then
    ZAME_MISSION_STARTING_WEATHER = 16
    end
    
    if or
    ZAME_MISSION_STARTING_WEATHER == 5
    ZAME_MISSION_STARTING_WEATHER == 7
    ZAME_MISSION_STARTING_WEATHER == 9
    ZAME_MISSION_STARTING_WEATHER == 16
        then
        break
        end
    
    until false
    
    end

end

end

return

:ZAME_PROHIBITED_WEATHERS_ON_UNITED_MAP_CHECK2

if
UNITED_MAP == 1
then

if
$UNITED_III_SPAWN == 0
then

//////////////////////////////////////////////////////////////////

if or
//VC
0@ == 0 
0@ == 1
0@ == 4
0@ == 8
0@ == 9
    then
    //ass
    else
    
    repeat
//    wait 0
    005A: 0@ += 1@
//    0AD1: show_formatted_text_highpriority "0@ %d" time 2000 0@    
    if
    0@ > 9
    then
    0@ = 0
    end
    
//    if
//    0@ < 0
//    then
//    0@ = 9
//    end
    
    if or
    //VC
    0@ == 0
    0@ == 1 
    0@ == 4
    0@ == 8
    0@ == 9
        then
        break
        end
    
    until false
    
    end

//////////////////////////////////////////////////////////////////

else

//III
if or
0@ == 5
0@ == 7
0@ == 9
0@ == 16
    then
    //ass
    else
    
    repeat
//    wait 0
    005A: 0@ += 1@
//    0AD1: show_formatted_text_highpriority "0@ %d" time 2000 0@
    if
    0@ > 16
    then
    0@ = 0
    end
    
    if
    0@ < 0
    then
    0@ = 16
    end
    
    if or
    0@ == 5
    0@ == 7
    0@ == 9
    0@ == 16
        then
        break
        end
    
    until false
    
    end

end

end

return     

:ZAME_OBJC_PICTURES_CHECK

0085: 1@ = ZAME_MISSION_LOAD_NUMBER // (int)
1@ -= 1

///////////////////////////////1 слот///////////////////////////////
if
1@ == 0
    then
    
    0AD3: 24@v = format "ME\1\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\1\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS1.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS1.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////2 слот///////////////////////////////
if
1@ == 1
    then
    
    0AD3: 24@v = format "ME\2\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\2\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS2.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS2.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////3 слот///////////////////////////////
if
1@ == 2
    then
    
    0AD3: 24@v = format "ME\3\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\3\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS3.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS3.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////4 слот///////////////////////////////
if
1@ == 3
    then
    
    0AD3: 24@v = format "ME\4\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\4\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS4.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS4.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////5 слот///////////////////////////////
if
1@ == 4
    then
    
    0AD3: 24@v = format "ME\5\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\5\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS5.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS5.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////6 слот///////////////////////////////
if
1@ == 5
    then
    
    0AD3: 24@v = format "ME\6\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\6\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS6.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS6.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////7 слот///////////////////////////////
if
1@ == 6
    then
    
    0AD3: 24@v = format "ME\7\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\7\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS7.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS7.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end
    
///////////////////////////////8 слот///////////////////////////////
if
1@ == 7
    then
    
    0AD3: 24@v = format "ME\8\%s.png" v$SNAME3 
    if
    0AAB:   file_exists 24@v
        then
        0AD3: 24@v = format "ME\\8\\%s.png" v$SNAME3
        if
        0D64: ZAME_MISSION_PNG_PREVIEW_TEXTURE = load_texture_png_from 24@v // IF and SET            
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
            return
            end
        end
    
    if
    0AAB:   file_exists "ME\MS8.TXD"
        then    
        if
        0D42: load_txd "PiZdA" from "ME\\MS8.TXD" // IF and SET 
            then
            0D43: 1@ = txd "PiZdA" id
            if
            0D46: ZAME_MISSION_PNG_PREVIEW_TEXTURE = find_texture v$SNAME3 in_dictionary 1@ // IF and SET
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 1 
                end
            else
            if
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
                then
                ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
                end
            end
        else
        if
        ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG == 1
            then
            ZAME_MISSION_PNG_PREVIEW_DRAW_FLAG = 0
            end
        end    
    end                            

return               

:IFP_CHECK_FOR_ADDITIONAL_PARAMS

//0AD1: show_formatted_text_highpriority "compare '%s' to 'shoot_at_point'" time 2000 v$SNAME3
wait 0

if or
0D49: 12@ = compare_strings v$SNAME3 "look_at_ped" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "attack_ped" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "aim_at_ped" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "rotate_to_ped" // IF and SET
then

//////////////////////////////

repeat
wait 0  
        
if
8A2A: not  text_box 'SE659' displayed
then
0512: show_permanent_text_box 'SE659'
end

if
0E3E: is_button_just_pressed 0 button 10
    then                
    008B: 1@ = PLAYER_ACTOR // (int)
    0AF1: write_int 1 to_ini_file "me\temp.dat" section v$RACE_FILE key "ITS_PLAYER"
    jump to @FUCKEEEEERS_FUCKS2BBB
    end

if
0E3E: is_button_just_pressed 0 button 11
    then
    
    //////////////////////////////////////////////////
        
    {$INCLUDE newopcodes\forallpeds_cleoplus}
            
    if and
    056D:   actor ped defined
    87D6: not  ped == PLAYER_ACTOR // @ == $ (int)
        then
        Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
        if
        0EEA: locate_char_distance_to_coordinates ped pos 2@ 3@ 4@ radius 1.0
            then
            0085: 1@ = ped // (int)
            0AF1: write_int 0 to_ini_file "me\temp.dat" section v$RACE_FILE key "ITS_PLAYER"
            jump to @FUCKEEEEERS_FUCKS2BBB
            end   
        end
            
    {$INCLUDE newopcodes\end}
    
    end
    
//////////////////////////////////////////////////
    
until false
:FUCKEEEEERS_FUCKS2BBB
03E6: remove_text_box  

Actor.StorePos(1@, 2@, 3@, 4@)
0665: get_actor 1@ model_to 5@
0AF3: write_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_PED_X"
0AF3: write_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_PED_Y"
0AF3: write_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_PED_Z"                    
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_PED_MODEL"   

end

if or
0D49: 12@ = compare_strings v$SNAME3 "jump" // IF and SET  
0D49: 12@ = compare_strings v$SNAME3 "exit_car" // IF and SET  
then
jump to @IFP_CHECK_FOR_ADDITIONAL_PARAMS_SET_POINT
end

if or
0D49: 12@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "shoot_at_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "look_at_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "aim_at_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "rotate_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "climb" // IF and SET
then

:IFP_CHECK_FOR_ADDITIONAL_PARAMS_SET_POINT

0581: enable_radar 1 
Player.CanMove(PLAYER_CHAR) = True
0512: show_permanent_text_box 'SE658' 

repeat
wait 0  

if
8A2A: not  text_box 'SE658' displayed
then
0512: show_permanent_text_box 'SE658'
end

//if
//0E3E: is_button_just_pressed 0 button 15
//    then
//    gosub @ZAME_DESTROY_NOT_FULLY_CREATED_TRIGGER_OBJECTS
//    text.ClearAll()
//    jump to @TRIGGERS_SETTINGS
//end 

until 0E3E:   player 0 pressed_key 11
03E6: remove_text_box  

:PENIS_MUSIC_JUMP
if
0D49: 12@ = compare_strings v$SNAME3 "sit_car_driver" // IF and SET
then
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)
036A: put_actor PLAYER_ACTOR in_car ZAME_TARGET_CAR_HANDLE
wait 0
Actor.StorePos(PLAYER_ACTOR, 5@, 6@, 7@)
8@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_X"
0AF3: write_float 6@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_Y"
0AF3: write_float 7@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_Z"  
0AF3: write_float 8@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_A"    
0362: remove_actor PLAYER_ACTOR from_car_and_place_at 2@ 3@ 4@
else
Actor.StorePos(PLAYER_ACTOR, 2@, 3@, 4@)
5@ = actor.Angle(PLAYER_ACTOR)
0AF3: write_float 2@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_X"
0AF3: write_float 3@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_Y"
0AF3: write_float 4@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_Z"  
0AF3: write_float 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_A"
end

if or
0D49: 12@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "climb" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "jump" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "sit_car_driver" // IF and SET
    then 
    0AF0: get_int 6@ from_ini_file "me\temp.dat" section v$RACE_FILE key "DUMMYPED_MODEL"
            
    while not model.Available(6@)
    wait 0
    model.Load(6@)
    mload
    end 
            
    5@ = Actor.Create(26, 6@, 2@,3@,4@)
    0860: link_actor 5@ to_interior $ACTIVE_INTERIOR
    Actor.PutAtNoOffset(5@, 2@,3@,4@)
    6@ = actor.Angle(PLAYER_ACTOR)
    Actor.Angle(5@) = 6@    
    Actor.SetImmunities(5@, 1, 1, 1, 1, 1)
    
    if
    0D49: 12@ = compare_strings v$SNAME3 "walk_to_point" // IF and SET
    then
    0605: actor 5@ perform_animation "WALK_civi" IFP "PED" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time -1
    end
    
    if
    0D49: 12@ = compare_strings v$SNAME3 "run_to_point" // IF and SET
    then
    0605: actor 5@ perform_animation "RUN_civi" IFP "PED" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time -1
    end
    
    if
    0D49: 12@ = compare_strings v$SNAME3 "sprint_to_point" // IF and SET
    then
    0605: actor 5@ perform_animation "SPRINT_civi" IFP "PED" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time -1
    end
    
    if
    0D49: 12@ = compare_strings v$SNAME3 "jump" // IF and SET
    then
    0605: actor 5@ perform_animation "JUMP_glide" IFP "PED" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time -1
    end
    
    if
    0D49: 12@ = compare_strings v$SNAME3 "climb" // IF and SET
    then
    0605: actor 5@ perform_animation "CLIMB_Pull" IFP "PED" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time -1
    end
    
    if
    0D49: 12@ = compare_strings v$SNAME3 "sit_car_driver" // IF and SET
    then
    0605: actor 5@ perform_animation "CAR_sit" IFP "PED" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time -1    
    end
    
    wait 0
    0619: enable_actor 5@ collision_detection 0
    return
    
    end
return
end

if
0D49: 12@ = compare_strings v$SNAME3 "say_text" // IF and SET
then
gosub @FXT_NAME_SELECT_DIALOGE    
end

if
0D49: 12@ = compare_strings v$SNAME3 "give_weapon" // IF and SET
then
ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM = 8
gosub @ZAME_MENU_PLAYER_SETTINGS_20003
ZAME_MISSION_PLAYER_TEAMMATE_SET_NUM = 0

if
ZAME_RECREATE_OBJECTIVE_FLAG == 0
then
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_CURRENT_OBJECTIVE_INDEX
else
0AD3: v$RACE_FILE = format "OBJ%d" ZAME_RECREATE_INDEX
end
        
if or
ZAME_CREATE_OBJ_BETWEEN_OBJS_FLAG == 1
ZAME_RECREATE_OBJECTIVE_FLAG == 2
then
0AD3: v$RACE_FILE = format "%s" v$RACB_FILE
end       

0AF1: write_int 270@ to_ini_file "me\temp.dat" section v$RACE_FILE key "WEP_ID"
0AF1: write_int 9@ to_ini_file "me\temp.dat" section v$RACE_FILE key "WEP_AMMO"

end

if or
0D49: 12@ = compare_strings v$SNAME3 "sit_car_driver" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "sit_car_passeng" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "attack_car" // IF and SET
0D49: 12@ = compare_strings v$SNAME3 "drive_to" // IF and SET 
then

//////////////////////////////

repeat
wait 0  
        
if
8A2A: not  text_box 'SE660' displayed
then
0512: show_permanent_text_box 'SE660'
end

if
0E3E: is_button_just_pressed 0 button 11
    then    
    actor.StorePos(PLAYER_ACTOR,2@,3@,4@)
    if
    0AE2: 1@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 5.0 find_next 0 pass_wrecked 0
        then
        jump to @FUCKEEEEERS_FUCKS2BBBC
        end 
    end
    
//////////////////////////////////////////////////
    
until false
:FUCKEEEEERS_FUCKS2BBBC
03E6: remove_text_box  

Car.StorePos(1@, 2@, 3@, 4@)
5@ = car.Model(1@)
0AF3: write_float 2@ from_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_CAR_X"
0AF3: write_float 3@ from_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_CAR_Y"
0AF3: write_float 4@ from_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_CAR_Z"                    
0AF1: write_int 5@ to_ini_file "me\temp.dat" section v$RACE_FILE key "TARGET_CAR_MODEL"  

if
0D49: 12@ = compare_strings v$SNAME3 "sit_car_driver" // IF and SET
    then
    0085: ZAME_TARGET_CAR_HANDLE = 1@ // (int)
    jump to @PENIS_MUSIC_JUMP
    end

if
0D49: 12@ = compare_strings v$SNAME3 "drive_to" // IF and SET
    then
    wait 0
    0085: ZAME_TARGET_CAR_HANDLE = 1@ // (int)
    jump to @IFP_CHECK_FOR_ADDITIONAL_PARAMS_SET_POINT
    end 

end

return     

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

:FXT_NAME_SELECT_DIALOGE

06D1: v$SNAME3 = "" // v$ // Sunday
06D1: v$SNAME2 = "" // v$ // Sunday

29@ = 0
33@ = 0
KEYS_TYPED_NUM = 0
    
0AE0: remove_dynamic_GXT_entry "F_NAME"
0ADF: add_dynamic_GXT_entry "F_NAME" text ""

if
0A4B:   controls_set_to_joystick
then
0512: show_permanent_text_box 'SE80B'
ACTIVATE_KBRD_PANEL = 1
KBRD_PANEL_CHRTC = 1
CAPSLOCK_ON_FLAG = 1
$PANEL_OPEN2 = 1
else
0512: show_permanent_text_box 'SE80'
end

while true
wait 0

if
8A2A: not  text_box 'SE80' displayed
then
0512: show_permanent_text_box 'SE80'
end

015D: set_gamespeed 1.0
CURRENT_LAYOUT = 1
gosub @FXT_NAME_SELECT_KEYS_CHECK

if
8846: not  string v$SNAME3 empty // v$
then
0384: show_text_1string GXT "GAME898" string "F_NAME" time 99999999 1
else
0384: show_text_1string GXT "GAME898" string v$NAME3 time 99999999 1
end

//if
//0A4B:   controls_set_to_joystick
//then
//if and
//0E3E: is_button_just_pressed 0 button 15
//33@ > 500
//    then
//    jump to @FXT_VVOD_EXIT_JOY_JUMP
//    end
//end

//if and
//0E3D: is_key_just_pressed 17
//33@ > 500
//    then
//    :FXT_VVOD_EXIT_JOY_JUMP
//    33@ = 0
//    text.RemoveTextBox()
//    text.ClearAll()
//    0581: enable_radar 1 
//    03E6: remove_text_box
//    
//    if
//    ACTIVATE_KBRD_PANEL == 1
//    then
//    ACTIVATE_KBRD_PANEL = 0
//    $PANEL_OPEN2 = 0
//    end
//    
//    jump @TARGETS_SETTINGS
//    end
    
if
8846: not  string v$SNAME3 empty // v$
    then
    09FD: get_gxt_string v$SNAME3 width_to 0@  // ~k~~PED_SPRINT~ Select
    if and
    0@ > 0
    0@ <= 2670
        then
        
        03F0: enable_text_draw 1 
        03E0: draw_text_behind_textures 1
        03E3: set_texture_to_be_drawn_antialiased 1 
        0342: set_text_draw_centered 1
        0344: set_text_draw_linewidth 300.0 for_centered_text
        033F: set_text_draw_letter_size 0.2 1.1 
        081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
        0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
            
        if
        UNITED_MAP == 1
        then    
        0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
        end
        
        033E: set_draw_text_position 320.0 15.0 GXT v$SNAME3  // Push
        else
        if
        0@ >= 2670
            then
                        
            03F0: enable_text_draw 1 
            03E0: draw_text_behind_textures 1
            03E3: set_texture_to_be_drawn_antialiased 1 
            0342: set_text_draw_centered 1
            0344: set_text_draw_linewidth 300.0 for_centered_text
            033F: set_text_draw_letter_size 0.2 1.1 
            081C: draw_text_outline 1 RGBA 0 0 0 $HUD_ALPHA 
            0340: set_text_draw_RGBA 255 255 255 $HUD_ALPHA   
                
            if
            UNITED_MAP == 1
            then    
            0349: set_text_draw_font UNITED_HUD_FONT_NUMBER
            end
            
            033E: set_draw_text_position 320.0 15.0 GXT 'SE665'  // Push
            
            end
        end
    end    

if and
0E3E: is_button_just_pressed 0 button 16
33@ > 500
8846: not  string v$SNAME3 empty // v$
    then
    33@ = 0
    text.RemoveTextBox()
    text.ClearAll()
    wait 5
    09FD: get_gxt_string v$SNAME3 width_to 0@  // ~k~~PED_SPRINT~ Select
    if and
    0@ > 0
    0@ <= 2670
        then  
        0AF5: write_string v$SNAME3 to_ini_file "me\temp.dat" section v$RACE_FILE key "FXT_ID"      
        return        
        else
        text.ShowH('SE236',1000,1)
        wait 1000
        0512: show_permanent_text_box 'SE80'        
        end
        
        end

end