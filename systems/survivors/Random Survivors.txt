const         
SURVIVOR_IN_PLAYER_TEAM = $SURVIVOR_IN_PLAYER_TEAM[18@]
SURVIVOR_ATTACKED_BY_PLAYER_FLAG = $SURVIVOR_ATTACKED_BY_PLAYER_FLAG[18@]
SURVIVOR_MEET_FLAG = $SURVIVOR_MEET_FLAG[18@]
SURVIVOR_BLEEDING_FLAG = $SURVIVOR_BLEEDING_FLAG[18@]
SURVIVOR_BANKA_COUNT = $SURVIVOR_BANKA_COUNT[18@] 
SURVIVOR_HEAL_COUNT = $SURVIVOR_HEAL_COUNT[18@]
SURVIVOR_BINT_COUNT = $SURVIVOR_BINT_COUNT[18@]
SURVIVOR_KANISTRA_COUNT = $SURVIVOR_KANISTRA_COUNT[18@]
SURVIVOR_RADIO_COUNT = $SURVIVOR_RADIO_COUNT[18@]
SURVIVOR_JIMMY_COUNT = $SURVIVOR_JIMMY_COUNT[18@]
SURVIVOR_REPAIR_COUNT = $SURVIVOR_REPAIR_COUNT[18@] 
SURVIVOR_SATIETY = $SURVIVOR_SATIETY[18@]  
SURVIVOR_BACKPACK_WEIGHT = $SURVIVOR_BACKPACK_WEIGHT[18@]  
SURVIVOR_SAVED_FLAG = $SURVIVOR_SAVED_FLAG[18@]    
SURVIVOR_PAIN_TIMER = $SURVIVOR_PAIN_TIMER[18@] 
SURVIVOR_PAIN_TIMER2 = $SURVIVOR_PAIN_TIMER2[18@]  
SURVIVOR_ATTACK_TIMER = $SURVIVOR_ATTACK_TIMER[18@] 
SURVIVOR_ATTACK_TIMER2 = $SURVIVOR_ATTACK_TIMER2[18@] 
SURVIVOR_HUNTER_TIMER = $SURVIVOR_HUNTER_TIMER[18@] 
SURVIVOR_HUNTER_TIMER2 = $SURVIVOR_HUNTER_TIMER2[18@]  
SURVIVOR_TANK_TIMER = $SURVIVOR_TANK_TIMER[18@] 
SURVIVOR_TANK_TIMER2 = $SURVIVOR_TANK_TIMER2[18@] 
SURVIVOR_HUNTER2_TIMER = $SURVIVOR_HUNTER2_TIMER[18@] 
SURVIVOR_HUNTER2_TIMER2 = $SURVIVOR_HUNTER2_TIMER2[18@] 
SURVIVOR_WITCH_TIMER = $SURVIVOR_WITCH_TIMER[18@] 
SURVIVOR_WITCH_TIMER2 = $SURVIVOR_WITCH_TIMER2[18@]   
SURVIVOR_CHARGER_TIMER = $SURVIVOR_CHARGER_TIMER[18@] 
SURVIVOR_CHARGER_TIMER2 = $SURVIVOR_CHARGER_TIMER2[18@] 
SURVIVOR_PLAYER_DAMAGE_COUNT = $SURVIVOR_PLAYER_DAMAGE_COUNT[18@] 
SURVIVOR_TEAMFIRE_LEAVE = $SURVIVOR_TEAMFIRE_LEAVE[18@] 
SURVIVOR_BETRAY_CAN = $SURVIVOR_BETRAY_CAN[18@] 
SURVIVOR_BETRAY_TIMER = $SURVIVOR_BETRAY_TIMER[18@] 
SURVIVOR_BETRAY_TIMER2 = $SURVIVOR_BETRAY_TIMER2[18@] 
SURVIVOR_NAME_KNEW = $SURVIVOR_NAME_KNEW[18@]
SURVIVOR_SAW_SHIT = $SURVIVOR_SAW_SHIT[18@]
SURVIVOR_STAY_MARK = $SURVIVOR_STAY_MARK[18@]
SURVIVOR_HUNGER_COUNTER = $SURVIVOR_HUNGER_COUNTER[18@]
SURVIVOR_WEP_AMMO = $SURVIVOR_WEP_AMMO[18@]
SURVIVOR_MELEE_ID = $SURVIVOR_MELEE_ID[18@] 
SURVIVOR_WEP_ID = $SURVIVOR_WEP_ID[18@] 
SURVIVOR_MEL_TRG = $SURVIVOR_MEL_TRG[18@]
SURVIVER = $SURVIVER[18@]
SURVIVOR_NUMBER = 18@
SURVIVOR_THROW_MOLOTOV_TIMER = 7@
SURVIVOR_THROW_MOLOTOV_TIMER2 = 8@
SURVIVOR_THROW_MOLOTOV_FLAG = 6@
SURVIVOR_THROW_PREV_WEAP = 4@
SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID = 19@
SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 20@ 
SURVIVOR_MARODER_FLAG = 5@ 
SURVIVOR_FRIEND_HIMSELF = 29@ 
SURVIVOR_ASKING_HELP_MARKER = 29@  
SURVIVOR_HINT_FLAG = 25@
SURVIVOR_2P_FLAG_WEP = 21@
SURVIVOR_CLIMB_TIMER = 10@
SURV_IN_PANEL_VAR = $PANEL
end

const
SURVIVOR_PAIN_TIMER_MIN = 30
SURVIVOR_PAIN_TIMER_MAX = 80
SURVIVOR_ATTACK_TIMER_MIN = 60
SURVIVOR_ATTACK_TIMER_MAX = 100
SURVIVOR_HUNTER_TIMER_MIN = 200  
SURVIVOR_HUNTER_TIMER_MAX = 400
SURVIVOR_TANK_TIMER_MIN = 700  
SURVIVOR_TANK_TIMER_MAX = 1000
SURVIVOR_HUNTER2_TIMER_MIN = 700  
SURVIVOR_HUNTER2_TIMER_MAX = 1000
SURVIVOR_WITCH_TIMER_MIN = 700  
SURVIVOR_WITCH_TIMER_MAX = 1000
SURVIVOR_CHARGER_TIMER_MIN = 700  
SURVIVOR_CHARGER_TIMER_MAX = 1000
AI_FIND_RADIUS = 110.0
end

:SURVVER

if
0@ == 1
then
$FREND_NUMBER = 0
end

if
0@ == 2
then
$FREND_NUMBER = 1
end

if
0@ == 3
then
$FREND_NUMBER = 2
end

if
0@ == 4
then
$FREND_NUMBER = 3
end

if
0@ == 5
then
$FREND_NUMBER = 4
end

if
$FREND_NUMBER == 0
then
thread 'SURVVER'
else
gosub @SURVV_NUM_GET
end

008B: SURVIVOR_NUMBER = $FREND_NUMBER // (int)

if and
$ALLOW_RANDOM_SURVIVERS == 0
not ZAME_HUENEMY_FLAG == 1
not 0@ > 0
    then
    end_thread
    end
    
if
0@ > 0
then
SURVIVOR_SAVED_FLAG = 1

0085: 23@ = 1@ // (int)
if
7@ == 0
then
24@ = 1000
else
0087: 24@ = 7@ // (float)
end
0087: 15@ = 2@ // (float)
0087: 16@ = 3@ // (float)
0087: 17@ = 4@ // (float)
0087: 29@ = 5@ // (float)
0087: 22@ = 6@ // (float)

if
8@ > 0
then
0087: 25@ = 8@ // (float)
end

4@ = 0
5@ = 0
6@ = 0
7@ = 0
8@ = 0 

26@ = 99999 

if
ZAME_HUENEMY_FLAG == 1
then
SURVIVOR_IN_PLAYER_TEAM = 0
SURVIVOR_NAME_KNEW = 0
SURVIVOR_MEET_FLAG = 0
SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0
gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP    
SURVIVOR_TEAMFIRE_LEAVE = 0    
SURVIVOR_PLAYER_DAMAGE_COUNT = 0    
else
SURVIVOR_IN_PLAYER_TEAM = 1
SURVIVOR_NAME_KNEW = 1
SURVIVOR_MEET_FLAG = 1
SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0
gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP    
SURVIVOR_TEAMFIRE_LEAVE = 0    
SURVIVOR_PLAYER_DAMAGE_COUNT = 0    
SURVIVOR_SAW_SHIT = 0
end     

if
PERK_CHARISMA == 0
then
if
0E4D: random_percent 50
then
1@ = 2
end
else
if
0E4D: random_percent 35
then
1@ = 2
end
end

if and
1@ == 2
$GAMEMODE_HOLD == 0
$DEFENSE_CHALLENGE_FLAG == 0
$GAMEMODE_WAR == 0
not $MUTATION_ACTIVE == 0
not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
not $GAMEMODE_STORYLINE == 1
$ALLOW_SURVIVER_BETRAY == 1
then
SURVIVOR_BETRAY_CAN = 1  
end

if
$FREEMODE == 1
then
random_int SURVIVOR_BETRAY_TIMER2 11000 95000
else
random_int SURVIVOR_BETRAY_TIMER2 5500 10000
end

random_int SURVIVOR_TEAMFIRE_LEAVE 5 20

if
$FREEMODE == 0
then
0209: SURVIVOR_BANKA_COUNT = random_int_in_ranges 0 3
else
0209: SURVIVOR_BANKA_COUNT = random_int_in_ranges 0 2
end 

if
$ALLOW_MEDS == 1
then
0209: SURVIVOR_HEAL_COUNT = random_int_in_ranges 0 2
0209: SURVIVOR_BINT_COUNT = random_int_in_ranges 0 2
end

0209: SURVIVOR_SATIETY = random_int_in_ranges 200 400

if
$FREEMODE == 0
then 
0209: SURVIVOR_JIMMY_COUNT = random_int_in_ranges 0 3
else
0209: SURVIVOR_JIMMY_COUNT = random_int_in_ranges 0 2
end

SURVIVOR_REPAIR_COUNT = 0

random_int 0@ 0 to 5
if
0@ == 3
then
0209: SURVIVOR_REPAIR_COUNT = random_int_in_ranges 1 2   
end

random_int 0@ 0 10
if
0@ == 8
    then
    SURVIVOR_RADIO_COUNT = 1
    end
    
random_int 0@ 0 5
if
0@ == 2
    then
    SURVIVOR_KANISTRA_COUNT = 1
    end

if
18@ == 0
then    
$SURV1_TEAM_TIME = 13200
$SURV1_TEAM_TIME += 2
06D1: v$SURVIVOR_PROLOUGE[0] = "SN1_0B" // v$ = string 
end

if
18@ == 1
then
$SURV2_TEAM_TIME = 13200
$SURV2_TEAM_TIME += 2
06D1: v$SURVIVOR_PROLOUGE[1] = "SN1_0B" // v$ = string
end

if
18@ == 2
then
$SURV3_TEAM_TIME = 13200
$SURV3_TEAM_TIME += 2
06D1: v$SURVIVOR_PROLOUGE[2] = "SN1_0B" // v$ = string
end

if
18@ == 3
then
$SURV4_TEAM_TIME = 13200
$SURV4_TEAM_TIME += 2
06D1: v$SURVIVOR_PROLOUGE[3] = "SN1_0B" // v$ = string
end

if
18@ == 4
then
$SURV5_TEAM_TIME = 13200
$SURV5_TEAM_TIME += 2
06D1: v$SURVIVOR_PROLOUGE[4] = "SN1_0B" // v$ = string
end           

jump to @SURVIVER_SPAWN_START
end    

:SURVIVER_SYSTEM_SPAWN_TIMER_START  
$RANDOM_PEOPLE_SKIN[SURVIVOR_NUMBER] = -1   
0209: 0@ = random_int_in_ranges $SURVIVERS_SPAWN_MIN $SURVIVERS_SPAWN_MAX  
32@ = 0         

/////////////////////Проверка спавна выжившего/////////////////////

:SURVIVER_SPAWN_CHECK
wait 0 

//////////////////////////////////////////////////////////////////////////////

if
18@ == 0
then
008B: 2@ = GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR1 // (int)
end
    
if
18@ == 1
then
008B: 2@ = GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR2 // (int)
end
    
if
18@ == 2
then
008B: 2@ = GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR3 // (int)
end
    
if
18@ == 3
then
008B: 2@ = GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR4 // (int)
end
    
if
18@ == 4
then
008B: 2@ = GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR5 // (int)
end

if
2@ == 1
then

repeat
wait 0
0209: 0@ = random_int_in_ranges $SURVIVERS_SPAWN_MIN $SURVIVERS_SPAWN_MAX
0209: 30@ = random_int_in_ranges $SURVIVERS_SPAWN_MIN $SURVIVERS_SPAWN_MAX

if
$FREEMODE == 0
then
0209: 1@ = random_int_in_ranges TIMER_RESET_LONG_ADD_MIN TIMER_RESET_LONG_ADD_MAX
else
0209: 1@ = random_int_in_ranges TIMER_RESET_LONG_ADD2_MIN TIMER_RESET_LONG_ADD2_MAX
end

0062: 30@ -= 1@  // (int)
until 801D: not  30@ > 0@  // (int) 

0085: 2@ = 0@ // (int)
2@ /= 2

if
001D:   30@ > 2@  // (int)
then
0085: 30@ = 2@ // (int)
end

0085: 32@ = 30@ // (int)

if
18@ == 0
then
0AF1: write_int 30@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR1_NEW_TIMER_AFTER_SAVE"
0AF1: write_int 0@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR1_SPAWN_TIMER"
end

if
18@ == 1
then
0AF1: write_int 30@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR2_NEW_TIMER_AFTER_SAVE"
0AF1: write_int 0@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR2_SPAWN_TIMER"
end

if
18@ == 2
then
0AF1: write_int 30@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR3_NEW_TIMER_AFTER_SAVE"
0AF1: write_int 0@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR3_SPAWN_TIMER"
end

if
18@ == 3
then
0AF1: write_int 30@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR4_NEW_TIMER_AFTER_SAVE"
0AF1: write_int 0@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR4_SPAWN_TIMER"
end

if
18@ == 4
then
0AF1: write_int 30@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR5_NEW_TIMER_AFTER_SAVE"
0AF1: write_int 0@ to_ini_file "saves\ZACM.set" section "SCR" key "SURVIVOR5_SPAWN_TIMER"
end

if
18@ == 0
then
GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR1 = 0
end

if
18@ == 1
then
GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR2 = 0
end

if
18@ == 2
then
GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR3 = 0
end

if
18@ == 3
then
GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR4 = 0
end

if
18@ == 4
then
GLOBAL_SPAWN_TIMER_RANDOM_RESET_SURVIVOR5 = 0
end

end

//////////////////////////////////////////////////////////////////////////////

if and
SWEET_SPAWN_FLAG == 1
not $DELETE_TEAMMATES == 1
$CARL_STORY == 1
then
jump to @SURVIVER_SPAWN_START 
end

if and
MIKE_SPAWN_FLAG == 1
not $DELETE_TEAMMATES == 1
$CARL_STORY == 1
then
jump to @SURVIVER_SPAWN_START 
end

if and
CARL_SPAWN_FLAG == 1
not $DELETE_TEAMMATES == 1
$CARL_STORY == 1
then
jump to @SURVIVER_SPAWN_START 
end

if and
MIKE_SPAWN_FLAG == 1
not $DELETE_TEAMMATES == 1
$MIKE_STORY == 1
then
jump to @SURVIVER_SPAWN_START 
end

if and
MIKE_SPAWN_FLAG == 2
not $DELETE_TEAMMATES == 1
USHER_STORY_FLAG == 1
then
jump to @SURVIVER_SPAWN_START 
end

if or
$GAMEMODE_EDITOR == 1
$CANALS_CHALLENGE_FLAG == 1
then
if and
$SAVESTATUS == 0
$SAVESTATUS_TRUE == 0
$SURVIVORS_DONT_SPAWN_FLAG == 0
$SAVING_PLACE_FLAG == 0
$DELETE_TEAMMATES == 0
$SURVIVOR_ALLOW_SPAWN[SURVIVOR_NUMBER] == 1                  
    then 
    if or
    001D:   32@ > 0@  // (int)
    $RANDOM_PEOPLE_SPAWN_FLAG == 1
        then            
        jump to @SURVIVER_SPAWN_START 
        else
        jump to @SURVIVER_SPAWN_CHECK
        end
    end
end

if and
$SAVESTATUS == 0
$SAVESTATUS_TRUE == 0
$SURVIVORS_DONT_SPAWN_FLAG == 0
$SAVING_PLACE_FLAG == 0
$DELETE_TEAMMATES == 0
$SURVIVOR_ALLOW_SPAWN[SURVIVOR_NUMBER] == 1
$ACTIVE_INTERIOR == 0                  
    then 
    if or
    001D:   32@ > 0@  // (int)
    $RANDOM_PEOPLE_SPAWN_FLAG == 1
        then
        jump to @SURVIVER_SPAWN_START 
        else
        jump to @SURVIVER_SPAWN_CHECK
        end              
    
    else
    
    0085: 30@ = 32@ // (int)
    
    :SURVIVER_TIMER_PAUSE
    wait 0
    
    if and
    $PEOPLE_SPAWN_ON_COORD == 1
    $GAMEMODE_EDITOR == 1
    then
    jump to @SURVIVER_SPAWN_CHECK
    end
                 
    if and
    $SAVESTATUS == 0
    $SAVESTATUS_TRUE == 0
    $SURVIVORS_DONT_SPAWN_FLAG == 0
    $SAVING_PLACE_FLAG == 0 
    $DELETE_TEAMMATES == 0 
    $SURVIVOR_ALLOW_SPAWN[SURVIVOR_NUMBER] == 1
    $ACTIVE_INTERIOR == 0
        then
        0085: 32@ = 30@ // (int)
        jump to @SURVIVER_SPAWN_CHECK
        else
        jump to @SURVIVER_TIMER_PAUSE
        end
    end
    
:SURVIVER_SPAWN_START

0209: 0@ = random_int_in_ranges 50 100
wait 0@

if
SURVIVOR_SAVED_FLAG == 0
then
SURVIVOR_BETRAY_CAN = 0

if
18@ == 0
then
$SURV1_TEAM_TIME = 0
if
TEAM1_SKIN > 0
    then
    $SURV1_TEAM_TIME = 6600
    end
end
    
if
18@ == 1
then
$SURV2_TEAM_TIME = 0
if
TEAM2_SKIN > 0
    then
    $SURV2_TEAM_TIME = 6600
    end
end
    
if
18@ == 2
then
$SURV3_TEAM_TIME = 0
if
TEAM3_SKIN > 0
    then
    $SURV3_TEAM_TIME = 6600   
    end
end
    
if
18@ == 3
then
$SURV4_TEAM_TIME = 0
end
    
if
18@ == 4
then
$SURV5_TEAM_TIME = 0
end

end

if
SURVIVOR_SAVED_FLAG == 0
    then
    gosub @RANDOM_COORD
    gosub @RANDOM_PEOPLE1_CHECKING_MODEL
    008A: $RANDOM_PEOPLE_SKIN[SURVIVOR_NUMBER] = 0@ // (int)
    
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0
    gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP
    
    SURVIVOR_TEAMFIRE_LEAVE = 0
    
    SURVIVOR_PLAYER_DAMAGE_COUNT = 0
    
    SURVIVOR_NAME_KNEW = 0
    SURVIVOR_SAW_SHIT = 0
    
    if
    PERK_CHARISMA == 0
    then
    if
    0E4D: random_percent 50
        then
        1@ = 2
        end    
    else
    if
    0E4D: random_percent 35
        then
        1@ = 2
        end    
    end
    
    if
    803A: not  SURVIVER == COOP_ACTOR // (int)
    then
    
    if and
    1@ == 2
    $GAMEMODE_HOLD == 0
    $DEFENSE_CHALLENGE_FLAG == 0
    $GAMEMODE_WAR == 0
    not $MUTATION_ACTIVE == 0
    not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
    not $GAMEMODE_STORYLINE == 1
    $ALLOW_SURVIVER_BETRAY == 1
    then
    SURVIVOR_BETRAY_CAN = 1  
    end
    
    end
    
    if
    SURV_GVAR_DEBUG == 1
    then
    
    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\$FREEMODE == 1\390"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\$FREEMODE == 1\390"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\$FREEMODE == 1\390"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\$FREEMODE == 1\390"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\$FREEMODE == 1\390"
    end
    
    end   
    
    if
    $FREEMODE == 1
    then
    random_int SURVIVOR_BETRAY_TIMER2 11000 95000
    else
    random_int SURVIVOR_BETRAY_TIMER2 5500 10000
    end
    
    random_int SURVIVOR_TEAMFIRE_LEAVE 5 20
    
    end

if
SURVIVOR_SAVED_FLAG == 0
    then   
    
    if
    $PEOPLE_SPAWN_ON_COORD == 0
    then
    17@ = -100.0
    end
    
    random_int 1@ 0 6
    
    if
    SURV_GVAR_DEBUG == 1
    then
    
    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\AIRDROP_PLAYER_AT_POINT_FLAG == 1\444"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\AIRDROP_PLAYER_AT_POINT_FLAG == 1\444"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\AIRDROP_PLAYER_AT_POINT_FLAG == 1\444"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\AIRDROP_PLAYER_AT_POINT_FLAG == 1\444"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\AIRDROP_PLAYER_AT_POINT_FLAG == 1\444"
    end
    
    end
    
    if or
    AIRDROP_PLAYER_AT_POINT_FLAG == 1
    $QUEST_TYPE == 8
    then
    
    if
    CARMA_VERY_BAD_FLAG == 0
    then
    1@ = 3
    else
    1@ = 4
    end
    
    end
    
    if and
    CARMA_VERY_BAD_FLAG == 0
    KARMA_SYS_ON_FLAG == 1
    CARMA_BAD_POINTS > 0
    then    
    if
    0E4D: random_percent CARMA_BAD_POINTS
        then
        1@ = 3    
        end                              
    end
    
    ////////////////////////////////////////////////////
    
    if
    $MONTHS_PASSED > 0
        then
        008B: 2@ = $MONTHS_PASSED // (int)
        2@ *= 20
        
        if
        $MONTHS_PASSED < 1
        then
        2@ = 10
        end
        
        if
        $MONTHS_PASSED == 1
        then
        2@ += 5
        end
        
        if
        2@ > 80
        then
        2@ = 80
        end
        
        wait 1    
        if
        0E4D: random_percent 2@
            then
            1@ = 3
            end
                
        end
        
    ////////////////////////////////////////////////////    
    
    if and
    $HELP_INST_FLAG == 1
    CARMA_VERY_BAD_FLAG == 1
    then
    1@ = 3
    end
    
    if and
    $HELP_INST_FLAG == 1
    CARMA_VERY_BAD_FLAG == 0
    then
    1@ = 4
    end             

    if and
    1@ == 3    
    $ALLOW_MARODERS == 1
    then

    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end

    SURVIVER = actor.Create(29,0@,15@,16@,17@)
    
    if and
    not 0@ == #SPECIAL03
    not 0@ == #SPECIAL09
    not 0@ == #SPECIAL08
    not 0@ == #SPECIAL07
    then
    
    if
    model.Available(0@)
    then
    //model.Destroy(0@)
    end
    
    end
    
    if
    0@ == #SPECIAL03
    then
    0296: unload_special_actor 3
    end
    
    if
    0@ == #SPECIAL09
    then
    0296: unload_special_actor 9
    end
    
    if
    0@ == #SPECIAL08
    then
    0296: unload_special_actor 8
    end
    
    if
    0@ == #SPECIAL07
    then
    0296: unload_special_actor 7
    end
       
    SURVIVOR_MARODER_FLAG = 1
    
    0D10: set_actor SURVIVER alpha 255 // IF and SET
    0E24: fix_char SURVIVER ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
    if
    CAN_AIM_AT_SURVIVORS == 0
    then
    0568: set_actor SURVIVER untargetable 1
    end
    
    create_thread @PED_BKP SURVIVER 371
    
    if
    18@ == 0
    then
    $TEAM1_GAS_COUNT = 0.0
    end
    
    if
    18@ == 1
    then
    $TEAM2_GAS_COUNT = 0.0
    end
    
    if
    18@ == 2
    then
    $TEAM3_GAS_COUNT = 0.0
    end
    
    if
    18@ == 3
    then
    $TEAM4_GAS_COUNT = 0.0
    end
    
    if
    18@ == 4
    then
    $TEAM5_GAS_COUNT = 0.0
    end
             
    else
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    SURVIVER = actor.Create($TEAMMATES_PED_TYPE,0@,15@,16@,17@)
    
    if and
    not 0@ == #SPECIAL03
    not 0@ == #SPECIAL09
    not 0@ == #SPECIAL08
    not 0@ == #SPECIAL07
    then
    
    if
    model.Available(0@)
    then
    //model.Destroy(0@)
    end
    
    end
    
    if
    0@ == #SPECIAL03
    then
    0296: unload_special_actor 3
    end
    
    if
    0@ == #SPECIAL09
    then
    0296: unload_special_actor 9
    end
    
    if
    0@ == #SPECIAL08
    then
    0296: unload_special_actor 8
    end
    
    if
    0@ == #SPECIAL07
    then
    0296: unload_special_actor 7
    end
               
    SURVIVOR_MARODER_FLAG = 0
    
    0D10: set_actor SURVIVER alpha 255 // IF and SET
    0E24: fix_char SURVIVER ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
    if and
    CAN_AIM_AT_SURVIVORS == 0
    not $GAMEMODE_HOLD == 1
    not $DEFENSE_CHALLENGE_FLAG == 1
    then
    0568: set_actor SURVIVER untargetable 1
    end
    
    create_thread @PED_BKP SURVIVER 371
    
    if
    18@ == 0
    then
    $TEAM1_GAS_COUNT = 0.0
    end
    
    if
    18@ == 1
    then
    $TEAM2_GAS_COUNT = 0.0
    end
    
    if
    18@ == 2
    then
    $TEAM3_GAS_COUNT = 0.0
    end
    
    if
    18@ == 3
    then
    $TEAM4_GAS_COUNT = 0.0
    end
    
    if
    18@ == 4
    then
    $TEAM5_GAS_COUNT = 0.0
    end
     
    end            
           
    gosub @RANDOM_PEOPLE1_WEAPON_CREATE  
    SURVIVOR_BETRAY_TIMER = 0 
else

if and
not 23@ == #SPECIAL03
not 23@ == #SPECIAL09
not 23@ == #SPECIAL08
not 23@ == #SPECIAL07
then
     
while not model.Available(23@)
wait 0
model.Load(23@)
mload
end

else

if
23@ == #SPECIAL03
    then
    
    repeat
    wait 0
    023C: load_special_actor 'SWEET' as 3 // models 290-299
    until 023D:   special_actor 3 loaded
    
    end
    
if
23@ == #SPECIAL09
    then
    
    repeat
    wait 0
    023C: load_special_actor TEAM1_STSK as 9 // models 290-299
    until 023D:   special_actor 9 loaded
    
    end
    
if
23@ == #SPECIAL08
    then
    
    repeat
    wait 0
    023C: load_special_actor TEAM2_STSK as 8 // models 290-299
    until 023D:   special_actor 8 loaded
    
    end
    
if
23@ == #SPECIAL07
    then
    
    repeat
    wait 0
    023C: load_special_actor TEAM3_STSK as 7 // models 290-299
    until 023D:   special_actor 7 loaded
    
    end            

end

if or
CARMA_VERY_BAD_FLAG == 1
ZAME_HUENEMY_FLAG == 1
then
jump to @SURV_SAVED_AS_PSIX
end

if
803A: not  SURVIVER == COOP_ACTOR // (int)
then
if and
056D:   actor SURVIVER defined
not actor.Dead(PLAYER_ACTOR)
not $SAVEPLACE_ON == 1
not CAMP_RAID_FLAG == 1
not $SOUND_EFFECT1_FLAG == 1
not $NEAR_SALV_POINT == 1
not SURV_SECOND_WAVE_EVACUATION_STARTED == 1
not $CAMP_SPOTTED_FLAG == 1
    then       
    if and
    SURVIVOR_IN_PLAYER_TEAM == 1
    SURVIVOR_BETRAY_CAN == 1
    $SALVATION_FLAG == 0
    $RADIO_HELP_FLAG == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    not actor.Driving(PLAYER_ACTOR)
    84AD: not  actor PLAYER_ACTOR in_water
        then                   
        if and
//        00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0
//        80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 10.0 10.0 sphere 0
//        8364: not  actor PLAYER_ACTOR spotted_actor SURVIVER
        82CB: not  actor SURVIVER bounding_sphere_visible
        not $SAVESTATUS == 1
        not $SAVESTATUS_TRUE == 1
        not $SAVING_DELAY == 1
        not $INT_ENTERING_FLAG == 1
        not $CAMP_SPOTTED_FLAG_SAVE == 1
        not $ACTIVE_INTERIOR > 0        
            then
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
                    
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
                    
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
                    
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
                    
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
             
            if and
            002C:   SURVIVOR_BETRAY_TIMER >= SURVIVOR_BETRAY_TIMER2  // (int)
            $PLAYER_OUT_CAR_TIMER > 140
            SURVIVOR_BLEEDING_FLAG == 0
            2@ == 0
            $ENTERED_CAMP_NUMBER == -1
            $ENTERED_BCAMP_NUMBER == -1
                then
                jump to @SURV_SAVED_AS_PSIX
                end
            end
        end
    end
end
    
jump to @SURV_SAVED_AS_NORMAL          

if and
002C:   SURVIVOR_BETRAY_TIMER >= SURVIVOR_BETRAY_TIMER2  // (int)
SURVIVOR_BETRAY_CAN == 2
then

:SURV_SAVED_AS_PSIX    
SURVIVER = actor.Create(29,23@,15@,16@,17@)

if and
not 23@ == #SPECIAL03
not 23@ == #SPECIAL09
not 23@ == #SPECIAL08
not 23@ == #SPECIAL07
then

if
model.Available(23@)
then
//model.Destroy(23@)
end

end

if
23@ == #SPECIAL03
then
0296: unload_special_actor 3
end

else
:SURV_SAVED_AS_NORMAL

SURVIVER = actor.Create($TEAMMATES_PED_TYPE,23@,15@,16@,17@)

if and
not 23@ == #SPECIAL03
not 23@ == #SPECIAL09
not 23@ == #SPECIAL08
not 23@ == #SPECIAL07
then

if
model.Available(23@)
then
//model.Destroy(23@)
end

end

if
23@ == #SPECIAL03
then
0296: unload_special_actor 3
end

end

actor.PutAtNoOffset(SURVIVER,15@,16@,17@) 
actor.Angle(SURVIVER) = 29@
$RANDOM_PEOPLE_SPAWN_FLAG = 0      

0D10: set_actor SURVIVER alpha 255 // IF and SET
0E24: fix_char SURVIVER ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
if
CAN_AIM_AT_SURVIVORS == 0
then
0568: set_actor SURVIVER untargetable 1
end
0E32: set_char_coordinates_simple SURVIVER coord 15@ 16@ 17@
                                                           
create_thread @PED_BKP SURVIVER 371

09F4: set_actor SURVIVER ignore_height_difference_following_nodes $Z_IGNORE_HEIGHT

if
not COOP_2P_WEAPONS_SAVED_FLAG == 1
then

if and
COOP_ACTIVE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
//ass
else

if
SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 0
then

if
SURVIVOR_MELEE_ID > 0
    then
    
    0781: get_weapon_with_ID SURVIVOR_MELEE_ID model_to 0@
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    Actor.GiveWeaponAndAmmo(SURVIVER, SURVIVOR_MELEE_ID, 99999)
    07FE: set_actor SURVIVER fighting_style_to 15 moves 6
    
    end   

if
87D6: not  22@ == SURVIVOR_MELEE_ID // @ == $ (int)
    then
    
    0781: get_weapon_with_ID 22@ model_to 0@
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    Actor.GiveWeaponAndAmmo(SURVIVER, 22@, 26@)
    
    end

else

if
SURVIVOR_MELEE_ID > 0
    then
    
    0781: get_weapon_with_ID SURVIVOR_MELEE_ID model_to 0@
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    Actor.GiveWeaponAndAmmo(SURVIVER, SURVIVOR_MELEE_ID, 99999)
    07FE: set_actor SURVIVER fighting_style_to 15 moves 6
    
    end       

if
87D6: not  22@ == SURVIVOR_MELEE_ID // @ == $ (int)
    then
    
    0781: get_weapon_with_ID 22@ model_to 0@
    
    while not model.Available(0@)
    wait 0
    model.Load(0@)
    mload
    end
    
    Actor.GiveWeaponAndAmmo(SURVIVER, 22@, 26@)
    
    end

end

end

end

$RANDOM_PEOPLE_SPAWN_FLAG = 0
08AF: set_actor SURVIVER max_health_to $SURVIVER_MAX_HEALTH
if
ZAME_HUENEMY_FLAG == 1
then
008B: 2@ = $SURV_ACCURACY2 // (int)
08AF: set_actor SURVIVER max_health_to 24@
else
0209: 2@ = random_int_in_ranges 90 100
end
Actor.WeaponAccuracy(SURVIVER) = 2@

if and
ZAME_HUENEMY_FLAG == 1
25@ > 0
then
Actor.WeaponAccuracy(SURVIVER) = 25@
end
Actor.Health(SURVIVER) = 24@     
Actor.SetWalkStyle(SURVIVER, "SURV1")
0446: set_actor SURVIVER dismemberment_possible 0
060B: set_actor SURVIVER decision_maker_to $DEC_PEOPLE
07DD: set_actor SURVIVER attack_rate 100 // previously known as temper_to  
060F: set_actor SURVIVER melee_accuracy_to 150.0

0648: unknown_actor SURVIVER task_set 100.0 // float

09B5: set_actor SURVIVER signal_after_kill 0

081A: set_actor SURVIVER weapon_skill_to FRA_WEAP_SKILL
0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE

if
UNITED_MAP == 0
then
04D8: set_actor SURVIVER drowns_in_water 0
0A28: set_actor SURVIVER swimming_speed_to 2.3 
end
  
0A96: 0@ = actor SURVIVER struct
0A8E: 0@ = 0@ + 1376
0A8C: write_memory 0@ size 4 value $SURVIVORS_ROTATE_SPEED virtual_protect 1     
jump to @SHIT_SKIP  
end

////////////////////////////////////////////////////////////////////////////////////////

$RANDOM_PEOPLE_SPAWN_FLAG = 0    
08AF: set_actor SURVIVER max_health_to $SURVIVER_MAX_HEALTH

    if
    SURV_GVAR_DEBUG == 1
    then

    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\$GAMEMODE_WAR == 1\670"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\$GAMEMODE_WAR == 1\670"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\$GAMEMODE_WAR == 1\670"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\$GAMEMODE_WAR == 1\670"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\$GAMEMODE_WAR == 1\670"
    end
    
    end

if
$GAMEMODE_WAR == 1
    then
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 23 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
    end   

if
SURVIVOR_MARODER_FLAG == 0
then

gosub @SURVIVOR_ACCURACY_SNIPER_CHECK
if
0@ == 0
then    
Actor.WeaponAccuracy(SURVIVER) = $SURV_ACCURACY
else
Actor.WeaponAccuracy(SURVIVER) = 50
end

else

gosub @SURVIVOR_ACCURACY_SNIPER_CHECK
if
0@ == 0
then    
Actor.WeaponAccuracy(SURVIVER) = $SURV_ACCURACY2
else
Actor.WeaponAccuracy(SURVIVER) = 50
end

end

0209: 0@ = random_int_in_ranges $SURVIVER_MIN_HEALTH $SURVIVER_MAX_HEALTH
    
if
$PLAYER_SURVIVOR_SIDE == 0
    then
    0@ = 2000
    end    

if and
$GAMEMODE_HOLD == 0
$DEFENSE_CHALLENGE_FLAG == 0
$GAMEMODE_WAR == 0
$GAMEMODE_CRAZY == 0
$GAMEMODE_EDITOR == 0  
then

random_int 1@ 0 to 10
if
1@ == 6   
then
random_int 2@ 500 to 1000
005A: 0@ += 2@  // (int)
08AF: set_actor SURVIVER max_health_to 1000   
end

end

if
$GAMEMODE_EDITOR == 1
then
0@ = 1000
end    
Actor.Health(SURVIVER) = 0@

Actor.SetWalkStyle(SURVIVER, "surv5")
0446: set_actor SURVIVER dismemberment_possible 0
060B: set_actor SURVIVER decision_maker_to $DEC_PEOPLE
07DD: set_actor SURVIVER attack_rate 100 // previously known as temper_to
081A: set_actor SURVIVER weapon_skill_to 2
0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire ACT_UTIRPD_WEP_FIRE

0648: unknown_actor SURVIVER task_set 100.0 // float

09B5: set_actor SURVIVER signal_after_kill 0

if
UNITED_MAP == 0
then
04D8: set_actor SURVIVER drowns_in_water 0  
end 

if
$FREEMODE == 0
then
0209: SURVIVOR_BANKA_COUNT = random_int_in_ranges 0 3
else
0209: SURVIVOR_BANKA_COUNT = random_int_in_ranges 0 2
end 
    
random_int 0@ 0 6

if or
0@ == 3
SURVIVAL_CUSTOM_WEAPON_NABOR == 10
    then
    SURVIVOR_FRIEND_HIMSELF = 1
    else
    SURVIVOR_FRIEND_HIMSELF = 0
    end
    
    if
    SURV_GVAR_DEBUG == 1
    then
    
    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\$ALLOW_MEDS == 1\785"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\$ALLOW_MEDS == 1\785"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\$ALLOW_MEDS == 1\785"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\$ALLOW_MEDS == 1\785"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\$ALLOW_MEDS == 1\785"
    end
    
    end        

if
$ALLOW_MEDS == 1
then
0209: SURVIVOR_HEAL_COUNT = random_int_in_ranges 0 2
0209: SURVIVOR_BINT_COUNT = random_int_in_ranges 0 2
end
    
0A96: 0@ = actor SURVIVER struct
0A8E: 0@ = 0@ + 1376
0A8C: write_memory 0@ size 4 value $SURVIVORS_ROTATE_SPEED virtual_protect 1

0209: SURVIVOR_SATIETY = random_int_in_ranges 200 400

if
$FREEMODE == 0
then 
0209: SURVIVOR_JIMMY_COUNT = random_int_in_ranges 0 3
else
0209: SURVIVOR_JIMMY_COUNT = random_int_in_ranges 0 2
end

SURVIVOR_REPAIR_COUNT = 0

random_int 0@ 0 to 5
if
0@ == 3
then
0209: SURVIVOR_REPAIR_COUNT = random_int_in_ranges 1 2   
end

if and
$EXPE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
SURVIVOR_BANKA_COUNT = 3
SURVIVOR_HEAL_COUNT = 2
SURVIVOR_BINT_COUNT = 3
SURVIVOR_RADIO_COUNT = 1
SURVIVOR_KANISTRA_COUNT = 1
SURVIVOR_JIMMY_COUNT = 5
SURVIVOR_REPAIR_COUNT = 1
end   

0860: link_actor SURVIVER to_interior $ACTIVE_INTERIOR

0209: 0@ = random_int_in_ranges $PEOPLE_MIN_MONEY $PEOPLE_MAX_MONEY

    if
    SURV_GVAR_DEBUG == 1
    then

    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\$GAMEMODE_SURVIVAL == 1\854"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\$GAMEMODE_SURVIVAL == 1\854"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\$GAMEMODE_SURVIVAL == 1\854"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\$GAMEMODE_SURVIVAL == 1\854"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\$GAMEMODE_SURVIVAL == 1\854"
    end
    
    end   

if
$GAMEMODE_SURVIVAL == 1
then      
03FE: set_actor SURVIVER money 0@  
else
03FE: set_actor SURVIVER money 0
end    

random_int 0@ 0 10
if
0@ == 8
    then
    SURVIVOR_RADIO_COUNT = 1
    end
    
random_int 0@ 0 5
if
0@ == 2
    then
    SURVIVOR_KANISTRA_COUNT = 1
    end
    
32@ = 0
33@ = 0

SURVIVOR_IN_PLAYER_TEAM = 0
SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
SURVIVOR_MEET_FLAG = 0
SURVIVOR_BLEEDING_FLAG = 0  

$VAGINA6_FLAG[18@] = 0
$VAGINA6_TIME[18@] = 0   

:SHIT_SKIP

    if
    SURV_GVAR_DEBUG == 1
    then

    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\924"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\924"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\924"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\924"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\924"
    end
    
    end  

if
SURVIVOR_IN_PLAYER_TEAM == 1
    then
    Actor.SetWalkStyle(SURVIVER, "SURV1")
    
    if
    $ALLY_EVER_DIED == -1
    then
    $ALLY_EVER_DIED = 0
    end  
    
    0687: clear_actor SURVIVER task
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
    
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
    
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
    
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
    
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if
    2@ == 0
    then
    0631: put_actor SURVIVER in_group PLAYER_GROUP
    
    if and
    COOP_ACTIVE_FLAG == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    then
    0687: clear_actor SURVIVER task
    0EA0: set_actor_second_player SURVIVER enable_camera 1 separate_cars 0
    0084: COOP_ACTOR = SURVIVER // (int)
    
    if
    not SURVIVOR_2P_FLAG_WEP == 1
    then
    SURVIVOR_2P_FLAG_WEP = 1
    048F: actor SURVIVER remove_weapons
    09F8: give_player2_weapons_of_player1
    end                
        
    end
    
    081A: set_actor SURVIVER weapon_skill_to 2
    0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
    Actor.WeaponAccuracy(SURVIVER) = 100
    else
    SURVIVOR_STAY_MARK = marker.CreateAboveActor(SURVIVER)
    07E0: set_marker SURVIVOR_STAY_MARK type_to 1
    0165: set_marker SURVIVOR_STAY_MARK color_to 1
    marker.SetIconSize(SURVIVOR_STAY_MARK,2)
    018B: set_marker SURVIVOR_STAY_MARK radar_mode 2
    
    if
    SURVIVOR_ATTACK_TIMER == -1
    then
    actor.LockInCurrentPosition(SURVIVER,true)
    end
    
    if and
    COOP_ACTIVE_FLAG == 1
    MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
    $GAMEMODE_STORYLINE == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        018B: set_marker SURVIVOR_STAY_MARK radar_mode 0
        end
    end
    
    087F: set_actor SURVIVER never_leave_group 1
    Actor.WeaponAccuracy(SURVIVER) = 100
    
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype $ZOMBIE_SET_PEDTYPE // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 4 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 5 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 29 // see ped.dat
    
    if and
    COOP_ACTIVE_FLAG == 1
    MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
    $GAMEMODE_STORYLINE == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        0337: set_actor SURVIVER visibility 0
        0568: set_actor SURVIVER untargetable 1
        actor.SetImmunities(SURVIVER,1,1,1,1,1)
        actor.Health(SURVIVER) = 9999
        0619: enable_actor SURVIVER collision_detection 0
        end
        
    end
    
    if
    SURV_GVAR_DEBUG == 1
    then
    
    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\$HELP_INST_FLAG == 1\1023"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\$HELP_INST_FLAG == 1\1023"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\$HELP_INST_FLAG == 1\1023"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\$HELP_INST_FLAG == 1\1023"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\$HELP_INST_FLAG == 1\1023"
    end
    
    end             
    
if
$HELP_INST_FLAG == 1
    then
    SURVIVOR_IN_PLAYER_TEAM = 1
    SURVIVOR_NAME_KNEW = 1
    SURVIVOR_MEET_FLAG = 1
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
    Actor.SetWalkStyle(SURVIVER, "SURV1")
    
    if
    $ALLY_EVER_DIED == -1
    then
    $ALLY_EVER_DIED = 0
    end
    
    0687: clear_actor SURVIVER task
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
    
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
    
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
    
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
    
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if
    2@ == 0
    then
    0631: put_actor SURVIVER in_group PLAYER_GROUP           
    
    if and
    COOP_ACTIVE_FLAG == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    then
    0687: clear_actor SURVIVER task
    0EA0: set_actor_second_player SURVIVER enable_camera 1 separate_cars 0
    0084: COOP_ACTOR = SURVIVER // (int)
    wait 0
    2@ = actor.Health(COOP_ACTOR)
    2@ += 176
    actor.Health(COOP_ACTOR) = 2@
    
    if
    not SURVIVOR_2P_FLAG_WEP == 1
    then
    SURVIVOR_2P_FLAG_WEP = 1
    048F: actor SURVIVER remove_weapons
    09F8: give_player2_weapons_of_player1
    end            
    
    end
    
    end
    
    081A: set_actor SURVIVER weapon_skill_to 2
    0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
    Actor.WeaponAccuracy(SURVIVER) = 100
    
    if and
    CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
    87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    then
    gosub @TEAMMATE_DO_NOT_INFINITE_AMMO    
    end  
    
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype $ZOMBIE_SET_PEDTYPE // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 4 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 5 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 29 // see ped.dat    
    
    087F: set_actor SURVIVER never_leave_group 1
    0209: 2@ = random_int_in_ranges 95 100
    Actor.WeaponAccuracy(SURVIVER) = 2@
    
    if
    18@ == 0
    then
    06D1: v$SURVIVOR_PROLOUGE[0] = "SN1_0" // v$ = string
    end
                
    if
    18@ == 1
    then
    06D1: v$SURVIVOR_PROLOUGE[1] = "SN1_0" // v$ = string
    end
                
    if
    18@ == 2
    then
    06D1: v$SURVIVOR_PROLOUGE[2] = "SN1_0" // v$ = string
    end
                
    if
    18@ == 3
    then
    06D1: v$SURVIVOR_PROLOUGE[3] = "SN1_0" // v$ = string
    end
                
    if
    18@ == 4
    then
    06D1: v$SURVIVOR_PROLOUGE[4] = "SN1_0" // v$ = string
    end
    
    end
    
SURVIVOR_SAVED_FLAG = 0
    
SURVIVOR_THROW_MOLOTOV_TIMER = 0            
SURVIVOR_THROW_MOLOTOV_FLAG = 0
SURVIVOR_THROW_PREV_WEAP = 0   
SURVIVOR_CLIMB_TIMER = 0

SURVIVOR_PAIN_TIMER = 0
random_int SURVIVOR_PAIN_TIMER2 SURVIVOR_PAIN_TIMER_MIN SURVIVOR_PAIN_TIMER_MAX

if
not SURVIVOR_ATTACK_TIMER == -1
then
SURVIVOR_ATTACK_TIMER = 0
end

random_int SURVIVOR_ATTACK_TIMER2 SURVIVOR_ATTACK_TIMER_MIN SURVIVOR_ATTACK_TIMER_MAX
SURVIVOR_HUNTER_TIMER = 0
random_int SURVIVOR_HUNTER_TIMER2 SURVIVOR_HUNTER_TIMER_MIN SURVIVOR_HUNTER_TIMER_MAX

SURVIVOR_TANK_TIMER = 0
random_int SURVIVOR_TANK_TIMER2 SURVIVOR_TANK_TIMER_MIN SURVIVOR_TANK_TIMER_MAX
SURVIVOR_HUNTER2_TIMER = 0
random_int SURVIVOR_HUNTER2_TIMER2 SURVIVOR_HUNTER2_TIMER_MIN SURVIVOR_HUNTER2_TIMER_MAX
SURVIVOR_WITCH_TIMER = 0
random_int SURVIVOR_WITCH_TIMER2 SURVIVOR_WITCH_TIMER_MIN SURVIVOR_WITCH_TIMER_MAX
SURVIVOR_CHARGER_TIMER = 0
random_int SURVIVOR_CHARGER_TIMER2 SURVIVOR_CHARGER_TIMER_MIN SURVIVOR_CHARGER_TIMER_MAX

008B: SURVIVOR_THROW_MOLOTOV_TIMER2 = $SURVIVOR_THROW_TIME // (int)
008D: SURVIVOR_THROW_MOLOTOV_TIMER2 = integer SURVIVOR_THROW_MOLOTOV_TIMER2 to_float
random_int 0@ $SURVIVOR_THROW_TIME_MIN $SURVIVOR_THROW_TIME_MAX
006B: SURVIVOR_THROW_MOLOTOV_TIMER2 *= 0@  // (float)
008C: SURVIVOR_THROW_MOLOTOV_TIMER2 = float SURVIVOR_THROW_MOLOTOV_TIMER2 to_integer

if
18@ == 0
then
random_int $SURV1_ASS_HEAL2 100 5000
end
    
if
18@ == 1
then
random_int $SURV2_ASS_HEAL2 100 5000
end
    
if
18@ == 2
then
random_int $SURV3_ASS_HEAL2 100 5000
end
    
if
18@ == 3
then
random_int $SURV4_ASS_HEAL2 100 5000
end
    
if
18@ == 4
then
random_int $SURV5_ASS_HEAL2 100 5000
end

if
18@ == 0
then
$HATIKO_TIMER1 = 0
end
    
if
18@ == 1
then
$HATIKO_TIMER2 = 0
end
    
if
18@ == 2
then
$HATIKO_TIMER3 = 0
end
    
if
18@ == 3
then
$HATIKO_TIMER4 = 0
end
    
if
18@ == 4
then
$HATIKO_TIMER5 = 0
end

if and
SURVIVOR_IN_PLAYER_TEAM == 0
SURVIVOR_SAVED_FLAG == 0
then

if
18@ == 0
then
$SURV1_STAY_FLAG = 0
end
    
if
18@ == 1
then
$SURV2_STAY_FLAG = 0
end
    
if
18@ == 2
then
$SURV3_STAY_FLAG = 0
end
    
if
18@ == 3
then
$SURV4_STAY_FLAG = 0
end
    
if
18@ == 4
then
$SURV5_STAY_FLAG = 0
end

end  

gosub @RANDOM_PEOPLE1_GROUP_CREATE   

$VAGINA6_ACCQ_FLAG[18@] = 0   

if
18@ == 0
then
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_SPAWNED"
end

if
18@ == 1
then
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_SPAWNED"
end

if
18@ == 2
then
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_SPAWNED"
end

if
18@ == 3
then
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_SPAWNED"
end

if
18@ == 4
then
0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_SPAWNED"
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "FS3"
if
0@ == 0
then
SURVIVOR_HINT_FLAG = 1 
end

if
$GAMEMODE_CRAZY == 1
then
actor.SetImmunities(SURVIVER,1,0,0,0,0)
end

if
$GAMEMODE_EDITOR == 1
then
087E: set_actor SURVIVER weapon_droppable 0
end  

:RANDOM_PEOPLE1_CHECK_IDLE
wait 0

if
$GAMEMODE_EDITOR == 1
then

if
$SURVIVOR_BANKA_COUNT[SURVIVOR_NUMBER] == -999
    then                 
    0470: SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID = actor SURVIVER current_weapon        
    
    if
    18@ == 0
    then
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR1_WEP_GIVEN_ID"
    0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR1_WEP_GIVEN_AMMO"
    end
        
    if
    18@ == 1
    then
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR2_WEP_GIVEN_ID"
    0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR2_WEP_GIVEN_AMMO"
    end
        
    if
    18@ == 2
    then
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR3_WEP_GIVEN_ID"
    0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR3_WEP_GIVEN_AMMO"
    end
        
    if
    18@ == 3
    then
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR4_WEP_GIVEN_ID"
    0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR4_WEP_GIVEN_AMMO"
    end
        
    if
    18@ == 4
    then
    0AF0: 0@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR5_WEP_GIVEN_ID"
    0AF0: 2@ = get_int_from_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR5_WEP_GIVEN_AMMO"
    end 
    
    0781: get_weapon_with_ID 0@ model_to 1@

    while not model.Available(1@)
    wait 0
    model.Load(1@)
    mload
    end
            
    actor.GiveWeaponAndAmmo(SURVIVER,0@,2@) 
    
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 1
    $SURVIVOR_BANKA_COUNT[SURVIVOR_NUMBER] = 0   
    
//    marker.CreateAboveActor(0@,SURVIVER)         
    
    end
    
end

if and
CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 0
SURVIVOR_IN_PLAYER_TEAM == 1
not SURVIVOR_WEP_AMMO == -1
    then   
    041A: SURVIVOR_WEP_AMMO = actor SURVIVER weapon SURVIVOR_WEP_ID ammo
    if
    SURVIVOR_WEP_AMMO == 0
        then
        SURVIVOR_WEP_AMMO = -1
        
        gosub @RANDOM_DIALOG_MAIN_WEP_AMMO_ENDED

        09FD: get_gxt_string v$BPHRASE3 width_to 9@
        0093: 9@ = integer 9@ to_float
        9@ *= 8.0
        0092: 9@ = float 9@ to_integer
        
        32@ = 0                                  
                            
        $PHRASES_OFF_FLAG = 1
        text.ShowTextBox('GME1479')                
                            
        repeat
        wait 0 
                                            
        gosub @SURV_NAME_CHECK 
                        
        if
        00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 5.0 5.0 0
        then    
        0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
        else
        break
        end
                            
        if or
        actor.Dead(SURVIVER)
        $SAVESTATUS_TRUE == 1
        $SAVESTATUS == 1
        $PANEL_OPEN == 1
            then
            $PHRASES_OFF_FLAG = 0
            break
            end
                            
        until 002D:   32@ >= 9@  // (int)
                            
        $PHRASES_OFF_FLAG = 0
        
        end            
    end   

gosub @TEAMMATE_BUFF_CHECK     

if 
SURVIVOR_IN_PLAYER_TEAM == 1
then
if
0E42: is_char_doing_task_id SURVIVER 727
    then
    0687: clear_actor SURVIVER task
    0AD1: show_formatted_text_highpriority "poshel nahui souiznik!!!" time 2000
    if
    actor.Driving(PLAYER_ACTOR)
        then
        0@ = actor.CurrentCar(PLAYER_ACTOR)
        05CA: AS_actor SURVIVER enter_car 0@ passenger_seat -1 time 99999
        end
    end
end

if and
SURVIVOR_IN_PLAYER_TEAM == 1
FRIENDLY_FIRE_ON == 0
    then
    if
    0EA4: is_char_on_fire SURVIVER
        then
        0A96: 0@ = actor SURVIVER struct
        0A8E: 0@ = 0@ + 0x730 //CFire       
        0A8D: 1@ = read_memory 0@ size 4 virtual_protect 0
        0A8E: 2@ = 1@ + 0x14 //m_pEntityCreator
        0A8D: 2@ = read_memory 2@ size 4 virtual_protect 0 
        0A96: 3@ = actor PLAYER_ACTOR struct       
        if
        07D6:   2@ == 3@ // @ == $ (int)
            then
            0A8E: 4@ = 1@ + 0x18 //m_nTimeToBurn
            0A8C: write_memory 4@ size 4 value 0 virtual_protect 0
            0A8E: 4@ = 1@ + 0x20 //m_nNumGenerationsAllowed
            0A8C: write_memory 4@ size 1 value 0 virtual_protect 0
            end
        end
    end
    
if
803A: not  SURVIVER == COOP_ACTOR // (int)
then    

//Рукопашные атаки
if
SURVIVOR_MELEE_ID < 0
    then        
    SURVIVOR_MELEE_ID += 1
//    0AD1: show_formatted_text_highpriority "SURV IS DOING MELEE ATTACK, TIMER %d, PREV WEP ID: %d" time 2000 SURVIVOR_MELEE_ID SURVIVOR_WEP_ID
    
//    if
//    SURVIVOR_MELEE_ID >= 0
//    then
//    0AD1: show_formatted_text_highpriority "MELEE TIME EXPRIED" time 2000
//    end
    
    if    
    056D:   actor SURVIVOR_MEL_TRG defined
    then
    if
    actor.Dead(SURVIVOR_MEL_TRG)
        then
        SURVIVOR_MELEE_ID = 0
//        0AD1: show_formatted_text_highpriority "SURV MELEE TARGET IS DEAD" time 2000
        end
    else
    SURVIVOR_MELEE_ID = 0
//    0AD1: show_formatted_text_highpriority "SURV MELEE TARGET IS NOT DEFINED" time 2000
    end
    
    if or
    $HUNTER_ON_PLAYER == 1
    $COMMAND_STAY_IN_CAR == 1
    $PEOPLE_DONT_ATTACK == 1
    then
    SURVIVOR_MELEE_ID = 0
    end
    
    if
    SURVIVOR_MELEE_ID >= 0
        then
        
        if and
        not $GAMEMODE_HOLD == 1
        not $SALVATION_FLAG == 1
        then       
        02AB: set_actor SURVIVER immunities BP 0 FP 0 EP 0 CP 0 MP 0
        end
        
        0ED9: set_char_ignore_damage_anims SURVIVER 0
        0470: SURVIVOR_MELEE_ID = actor SURVIVER current_weapon
        01B9: set_actor SURVIVER armed_weapon_to SURVIVOR_WEP_ID
        
        0470: 1@ = actor SURVIVER current_weapon
        if or
        07D6:   1@ == SURVIVOR_MELEE_ID // @ == $ (int)
        SURVIVOR_MELEE_ID == 0
            then
            :GO_FIND_MELEE_PLEASE            
            04B8: get_weapon_data_from_actor SURVIVER slot 2 weapon SURVIVOR_MELEE_ID ammo 1@ model 2@
//            0AD1: show_formatted_text_highpriority "FUCK YOU GAY SHIT MELEE SURV BUG! (1) ~n~%d" time 2000 SURVIVOR_MELEE_ID
            end
        
        end
    else
    
    if
    SURVIVOR_MELEE_ID == 0
    then
    jump to @GO_FIND_MELEE_PLEASE
    end
    
    if
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 0
    then
    0470: 1@ = actor SURVIVER current_weapon
    if or
    07D6:   1@ == SURVIVOR_MELEE_ID // @ == $ (int)
    003A:   SURVIVOR_WEP_ID == SURVIVOR_MELEE_ID // (int)    
    SURVIVOR_WEP_ID == 0
    1@ == 0    
        then
        
        ////////////////////////////////////////////////////////////////////////////////////        
        
        for 0@ = 3 to 7

        04B8: get_weapon_data_from_actor SURVIVER slot 0@ weapon 2@ ammo 1@ model 3@
        if and
        1@ > 0
        not 3@ == -1
        then
        01B9: set_actor SURVIVER armed_weapon_to 2@
        008A: SURVIVOR_WEP_ID = 2@ // (int)
//        0AD1: show_formatted_text_highpriority "FUCK YOU GAY SHIT MELEE SURV BUG! (2) ~n~%d" time 2000 2@
        end
                
        end
        
        ////////////////////////////////////////////////////////////////////////////////////
        
        end
    else 
    0470: 1@ = actor SURVIVER current_weapon
    if or
    003B:   1@ == SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID  // (int)
    07D6:   1@ == SURVIVOR_MELEE_ID // @ == $ (int)
    1@ == 0    
        then
        
        ////////////////////////////////////////////////////////////////////////////////////        
        
        for 0@ = 3 to 7

        04B8: get_weapon_data_from_actor SURVIVER slot 0@ weapon 2@ ammo 1@ model 3@
        if and
        1@ > 0
        not 3@ == -1
        803B: not  2@ == SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID  // (int)
        then
        01B9: set_actor SURVIVER armed_weapon_to 2@
        008A: SURVIVOR_WEP_ID = 2@ // (int)
//        0AD1: show_formatted_text_highpriority "FUCK YOU GAY SHIT MELEE SURV BUG! (3) ~n~%d" time 2000 2@
        end
                
        end
        
        ////////////////////////////////////////////////////////////////////////////////////
        
        end
    end
                           
    end
    
end    

random_int 0@ 0 5                                       
gosub @RANDOM_PEOPLE1_ATTACK_PEOPLE1

if
18@ == 0
then
008B: 2@ = $SURV1_STAY_FLAG // (int)
end
    
if
18@ == 1
then
008B: 2@ = $SURV2_STAY_FLAG // (int)
end
    
if
18@ == 2
then
008B: 2@ = $SURV3_STAY_FLAG // (int)
end
    
if
18@ == 3
then
008B: 2@ = $SURV4_STAY_FLAG // (int)
end
    
if
18@ == 4
then
008B: 2@ = $SURV5_STAY_FLAG // (int)
end    

if and
86EE: not  actor SURVIVER in_group PLAYER_GROUP
803A: not  SURVIVER == COOP_ACTOR // (int)
2@ == 0
then
gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
end

if and
06EE:  actor SURVIVER in_group PLAYER_GROUP
803A: not  SURVIVER == COOP_ACTOR // (int)
then



end

if
856D: not  actor SURVIVER defined
    then                 
    jump to @SURVIVER_SYSTEM_SPAWN_TIMER_START
    end
    
if
056D:   actor SURVIVER defined
    then
    
    if and
    $CHEATS_ON == 1
    $CHEAT_TYPE_FLAG == 1
    then
    if
    0ADC:   test_cheat "BETRAYME"
        then
        $CHEAT_CODE_ACTIVATED = 1
        SURVIVOR_BETRAY_CAN = 1
        0084: SURVIVOR_BETRAY_TIMER = SURVIVOR_BETRAY_TIMER2 // (int)
        end
    end
                
    if and
    0AB0:   key_pressed 48
    0457:   player PLAYER_CHAR aiming_at_actor SURVIVER 
    $CHEATS_ON == 1
        then
        
        if
        18@ == 0
        then
        008B: 3@ = $HATIKO_TIMER1 // (int)
        end
            
        if
        18@ == 1
        then
        008B: 3@ = $HATIKO_TIMER2 // (int)
        end
            
        if
        18@ == 2
        then
        008B: 3@ = $HATIKO_TIMER3 // (int)
        end
            
        if
        18@ == 3
        then
        008B: 3@ = $HATIKO_TIMER4 // (int)
        end
            
        if
        18@ == 4
        then
        008B: 3@ = $HATIKO_TIMER5 // (int)
        end
        
        if
        18@ == 0
        then
        008B: 2@ = $SURV1_TEAM_TIME // (int)
        end
            
        if
        18@ == 1
        then
        008B: 2@ = $SURV2_TEAM_TIME // (int)
        end
            
        if
        18@ == 2
        then
        008B: 2@ = $SURV3_TEAM_TIME // (int)
        end
            
        if
        18@ == 3
        then
        008B: 2@ = $SURV4_TEAM_TIME // (int)
        end
            
        if
        18@ == 4
        then
        008B: 2@ = $SURV5_TEAM_TIME // (int)
        end
        
        if
        18@ == 0
        then
        0AD3: v$RACE_FILE = format "%s" v$SURVIVOR_PROLOUGE[0]
        end
            
        if
        18@ == 1
        then
        0AD3: v$RACE_FILE = format "%s" v$SURVIVOR_PROLOUGE[1]
        end
            
        if
        18@ == 2
        then
        0AD3: v$RACE_FILE = format "%s" v$SURVIVOR_PROLOUGE[2]
        end
            
        if
        18@ == 3
        then
        0AD3: v$RACE_FILE = format "%s" v$SURVIVOR_PROLOUGE[3]
        end
            
        if
        18@ == 4
        then
        0AD3: v$RACE_FILE = format "%s" v$SURVIVOR_PROLOUGE[4]
        end
        
        0470: 0@ = actor SURVIVER current_weapon
        041A: 1@ = actor SURVIVER weapon 0@ ammo
        0085: 0@ = 18@ // (int)
        0@ += 1
        
        0AD1: show_formatted_text_highpriority "Tech Num: %d, Surv Num: %d, Can Betray: %d, Betray Timer: %d\%d, Hatiko Timer: %d\40320, Camp Number: %d, Weap Ammo: %d" time 100 18@ 0@ SURVIVOR_BETRAY_CAN SURVIVOR_BETRAY_TIMER SURVIVOR_BETRAY_TIMER2 3@ 8@ 1@
        //Team Time: %d\44000, Role String: %s, 2@ v$RACE_FILE
        end 
        
    if and
    0AB0:   key_pressed 49
    0457:   player PLAYER_CHAR aiming_at_actor SURVIVER 
    $CHEATS_ON == 1
        then
        0470: 0@ = actor SURVIVER current_weapon
        0AD1: show_formatted_text_highpriority "SURV IS MAYBE DOING MELEE ATTACK, TIMER %d, PREV WEP ID: %d, CURRENT WEP: %d, MOLOTOV THROW FLAG: %d" time 2000 SURVIVOR_MELEE_ID SURVIVOR_WEP_ID 0@ SURVIVOR_THROW_MOLOTOV_FLAG
        end       
               
    end                 

if
not $GAME_SPEED == 0.0
then

if
803A: not  SURVIVER == COOP_ACTOR // (int)
then
SURVIVOR_THROW_MOLOTOV_TIMER += 1   
SURVIVOR_PAIN_TIMER += 1

if
not SURVIVOR_ATTACK_TIMER == -1
then 
SURVIVOR_ATTACK_TIMER += 1
end

SURVIVOR_HUNTER_TIMER += 1   
SURVIVOR_TANK_TIMER += 1  
SURVIVOR_HUNTER2_TIMER += 1  
SURVIVOR_WITCH_TIMER += 1

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
SURVIVOR_WITCH_TIMER += 50
end
  
SURVIVOR_CHARGER_TIMER += 1 
SURVIVOR_CLIMB_TIMER += 1

end

end                      

if and
SURVIVOR_BETRAY_CAN == 1
SURVIVOR_IN_PLAYER_TEAM == 1
803A: not  SURVIVER == COOP_ACTOR // (int)
then

if
18@ == 0
then
008B: 2@ = $SURV1_STAY_FLAG // (int)
end
        
if
18@ == 1
then
008B: 2@ = $SURV2_STAY_FLAG // (int)
end
        
if
18@ == 2
then
008B: 2@ = $SURV3_STAY_FLAG // (int)
end
        
if
18@ == 3
then
008B: 2@ = $SURV4_STAY_FLAG // (int)
end
        
if
18@ == 4
then
008B: 2@ = $SURV5_STAY_FLAG // (int)
end

if and
2@ == 0
not $SAVEPLACE_ON == 1
not CAMP_RAID_FLAG == 1
not $SOUND_EFFECT1_FLAG == 1
not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
then
SURVIVOR_BETRAY_TIMER += 1
end
 
end

    if
    SURV_GVAR_DEBUG == 1
    then

    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\1381"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\1381"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\1381"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\1381"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\1381"
    end
    
    end   

if
SURVIVOR_IN_PLAYER_TEAM == 1
then
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype $ZOMBIE_SET_PEDTYPE // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 0 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 1 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 2 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 3 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 4 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 5 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 29 // see ped.dat 
end  

gosub @RANDOM_PEOPLE1_WEIGHT_CHECK_START 

////////////////////////////////////////////////Голос получения урона от союзников////////////////////////////////////////////////

if
001C:   SURVIVOR_PAIN_TIMER > SURVIVOR_PAIN_TIMER2 // (int)
then
if and
056D:   actor SURVIVER defined
803A: not  SURVIVER == COOP_ACTOR // (int)
FRIENDLY_FIRE_ON == 1
    then   
    if and    
    not actor.Dead(SURVIVER)
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0 
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    $PHRASES_OFF_FLAG == 0
//    06EE:   actor SURVIVER in_group PLAYER_GROUP  
    SURVIVOR_IN_PLAYER_TEAM == 1
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR 
        then
        
        if
        031D:   actor SURVIVER hit_by_weapon 108
        then
        jump to @ASSWOOPIN
        end            
        
        3@ = 0
        2@ = 0
        1@ = 0
        
        04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 2 weapon 26@ ammo 27@ model 28@        

        if or
        031D:   actor SURVIVER hit_by_weapon 0
        031D:   actor SURVIVER hit_by_weapon 46
        031D:   actor SURVIVER hit_by_weapon 26@
        PLAYER_USING_MELEE_FLAG == 1
        then
        0467: clear_actor SURVIVER last_weapon_damage
        054E: clear_actor SURVIVER damage
        2@ = 1
        1@ = 1
        else
        0467: clear_actor SURVIVER last_weapon_damage
        054E: clear_actor SURVIVER damage
        2@ = 1
        1@ = 0
        end
        
        if
        actor.Driving(PLAYER_ACTOR)
        then
        0467: clear_actor SURVIVER last_weapon_damage
        054E: clear_actor SURVIVER damage
        3@ = 1            
        end        
        
        if
        2@ == 1
            then
            
            SURVIVOR_PAIN_TIMER = 0
            random_int SURVIVOR_PAIN_TIMER2 SURVIVOR_PAIN_TIMER_MIN SURVIVOR_PAIN_TIMER_MAX
            
            if and
            $GAMEMODE_HOLD == 0
            $DEFENSE_CHALLENGE_FLAG == 0
            then
            
            if
            3@ == 0
            then
            
            if
            1@ == 0
            then
            gosub @RANDOM_DIALOG_DAMAGED_BY_WEAPON_SURV_FRIENDLY  
            SURVIVOR_PLAYER_DAMAGE_COUNT += 1
            else
            gosub @RANDOM_DIALOG_DAMAGED_BY_ZOMBIES_SURV_FRIENDLY
            SURVIVOR_PLAYER_DAMAGE_COUNT += 1  
            end
            
            else
            gosub @RANDOM_DIALOG_DAMAGED_BY_CAR_SURV_FRIENDLY
            SURVIVOR_PLAYER_DAMAGE_COUNT += 1
            end 
            
            end
        
            gosub @SURV_NAME_CHECK           
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1 
            
            //gosub @SHOW_FUCKING_VOICE
                 
            end            
        end
    else
    if and
    056D:   actor SURVIVER defined
    803A: not  SURVIVER == COOP_ACTOR // (int)
    FRIENDLY_FIRE_ON == 0
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
        then
        054E: clear_actor SURVIVER damage
        end
    end
end       

////////////////////////////////////////////////Голос получения урона от врагов////////////////////////////////////////////////

if
001C:   SURVIVOR_PAIN_TIMER > SURVIVOR_PAIN_TIMER2 // (int)
then
if
056D:   actor SURVIVER defined
    then   
    if and    
    not actor.Dead(SURVIVER)
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0   
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    $PHRASES_OFF_FLAG == 0   
        then       
        
        if
        06EE:   actor SURVIVER in_group PLAYER_GROUP
        then
        
        if
        051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR 
        then
        jump to @ASSWOOPIN
        end
        
        end   
        
        2@ = 0
        1@ = 0
        
        ///////////////////////
        
        for 0@ = 22 to 34
        
        if
        031D:   actor SURVIVER hit_by_weapon 0@
        then
        2@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        end
        
        ///////////////////////
        
        for 0@ = 70 to MAX_WEAPON_NUM_NORMAL
        
        if
        031D:   actor SURVIVER hit_by_weapon 0@
        then
        2@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        end
        
        ///////////////////////
        
        for 0@ = 111 to 121
        
        if
        031D:   actor SURVIVER hit_by_weapon 0@
        then
        2@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        end
        
        ///////////////////////
        
        for 0@ = 136 to 151
        
        if
        031D:   actor SURVIVER hit_by_weapon 0@
        then
        2@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        end
        
        ///////////////////////
        
        for 0@ = 165 to 183
        
        if
        031D:   actor SURVIVER hit_by_weapon 0@
        then
        2@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        end
        
        ///////////////////////
        
        for 0@ = 195 to 213
        
        if
        031D:   actor SURVIVER hit_by_weapon 0@
        then
        2@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        end
        
        ///////////////////////        
        
        if and 
        031D:   actor SURVIVER hit_by_weapon 0
        851A: not  actor SURVIVER damaged_by_actor PLAYER_ACTOR
        then
        
        2@ = 1
        1@ = 1
        0467: clear_actor SURVIVER last_weapon_damage
        end
        
        if
        2@ == 1
            then
            
            SURVIVOR_PAIN_TIMER = 0
            random_int SURVIVOR_PAIN_TIMER2 SURVIVOR_PAIN_TIMER_MIN SURVIVOR_PAIN_TIMER_MAX
            
            if
            1@ == 0
            then
            gosub @RANDOM_DIALOG_DAMAGED_BY_WEAPON_SURV  
            else
            gosub @RANDOM_DIALOG_DAMAGED_BY_ZOMBIES_SURV  
            end 
        
            gosub @SURV_NAME_CHECK          
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1      
            
            //gosub @SHOW_FUCKING_VOICE
            
            end            
        end
    end
end 
    
:ASSWOOPIN      

////////////////////////////////////////////////Голос атаки////////////////////////////////////////////////

if
001C:   SURVIVOR_ATTACK_TIMER > SURVIVOR_ATTACK_TIMER2 // (int)
then    
if 
056D:   actor SURVIVER defined
    then
    if and    
    not actor.Dead(SURVIVER)
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0 
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    $PHRASES_OFF_FLAG == 0
    02E0:   actor SURVIVER firing_weapon  
        then
        
        SURVIVOR_ATTACK_TIMER = 0
        random_int random_int SURVIVOR_ATTACK_TIMER2 SURVIVOR_ATTACK_TIMER_MIN SURVIVOR_ATTACK_TIMER_MAX
                
        gosub @RANDOM_DIALOG_ATTACK_SURV           
        gosub @SURV_NAME_CHECK           
                    
        09FD: get_gxt_string v$PHRASE3 width_to 3@
        0093: 3@ = integer 3@ to_float
        3@ *= 8.0
        0092: 3@ = float 3@ to_integer  
                    
        0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1   
        
        //gosub @SHOW_FUCKING_VOICE
        
        end            
    end
end
    
////////////////////////////////////////////////Голос про охотника////////////////////////////////////////////////      

if
001C:   SURVIVOR_HUNTER_TIMER > SURVIVOR_HUNTER_TIMER2 // (int)
then
if 
056D:   actor SURVIVER defined
    then
    04DD: 0@ = actor SURVIVER armour
    if and    
    not actor.Dead(SURVIVER)
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0  
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    $PHRASES_OFF_FLAG == 0
    0@ == 1
        then
        
        SURVIVOR_HUNTER_TIMER = 0
        random_int random_int SURVIVOR_HUNTER_TIMER2 150 350
                
        gosub @RANDOM_DIALOG_HUNTER_SURV           
        gosub @SURV_NAME_CHECK
                    
        09FD: get_gxt_string v$PHRASE3 width_to 3@
        0093: 3@ = integer 3@ to_float
        3@ *= 8.0
        0092: 3@ = float 3@ to_integer  
                    
        0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1   
        
        //gosub @SHOW_FUCKING_VOICE
        
        end            
    end
end  
    
////////////////////////////////////////////////Голос про танка////////////////////////////////////////////////      

if
001C:   SURVIVOR_TANK_TIMER > SURVIVOR_TANK_TIMER2 // (int)
then
if and
056D:   actor SURVIVER defined  
056D:   actor $TANK[$SPECLS_NUM] defined
$PHRASES_OFF_FLAG == 0  
    then
    if and    
    not actor.Dead(SURVIVER)
    not actor.Dead($TANK[$SPECLS_NUM])
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0  
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    0104:   actor $TANK[$SPECLS_NUM] near_actor SURVIVER radius 100.0 100.0 100.0 0      
    06EE:   actor SURVIVER in_group PLAYER_GROUP
        then
        if or
        0364:   actor SURVIVER spotted_actor $TANK[$SPECLS_NUM]   
        0364:   actor $TANK[$SPECLS_NUM] spotted_actor SURVIVER
            then
        
            SURVIVOR_TANK_TIMER = 0
            random_int random_int SURVIVOR_TANK_TIMER2 SURVIVOR_PAIN_TIMER_MIN SURVIVOR_TANK_TIMER_MAX
                    
            gosub @RANDOM_DIALOG_TANK_NEAR_SURV               
            gosub @SURV_NAME_CHECK
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1   
            
            //gosub @SHOW_FUCKING_VOICE
            
            end        
         end    
     end
end   
     
////////////////////////////////////////////////Голос про охотника////////////////////////////////////////////////      

if
001C:   SURVIVOR_HUNTER2_TIMER > SURVIVOR_HUNTER2_TIMER2 // (int)
then
if and
056D:   actor SURVIVER defined  
056D:   actor $HUNTER[$SPECLS_NUM] defined
$PHRASES_OFF_FLAG == 0  
    then
    if and    
    not actor.Dead(SURVIVER)
    not actor.Dead($HUNTER[$SPECLS_NUM])
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0  
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    0104:   actor $HUNTER[$SPECLS_NUM] near_actor SURVIVER radius 100.0 100.0 100.0 0  
    06EE:   actor SURVIVER in_group PLAYER_GROUP    
        then
        if or
        0364:   actor SURVIVER spotted_actor $HUNTER[$SPECLS_NUM]   
        0364:   actor $HUNTER[$SPECLS_NUM] spotted_actor SURVIVER
            then
        
            SURVIVOR_HUNTER2_TIMER = 0
            random_int random_int SURVIVOR_HUNTER_TIMER2 SURVIVOR_HUNTER2_TIMER_MIN SURVIVOR_HUNTER2_TIMER_MAX
                    
            gosub @RANDOM_DIALOG_HUNTER_NEAR_SURV               
            gosub @SURV_NAME_CHECK
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
            
            //gosub @SHOW_FUCKING_VOICE
               
            end        
         end    
     end
end      
     
////////////////////////////////////////////////Голос про ведьму////////////////////////////////////////////////      

if
001C:   SURVIVOR_WITCH_TIMER > SURVIVOR_WITCH_TIMER2 // (int)
then
if and
056D:   actor SURVIVER defined  
056D:   actor $WITCH[$SPECLS_NUM] defined
$PHRASES_OFF_FLAG == 0  
    then
    if and    
    not actor.Dead(SURVIVER)
    not actor.Dead($WITCH[$SPECLS_NUM])
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0  
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    0104:   actor $WITCH[$SPECLS_NUM] near_actor SURVIVER radius 100.0 100.0 100.0 0   
    06EE:   actor SURVIVER in_group PLAYER_GROUP   
        then
        if or
        0364:   actor SURVIVER spotted_actor $WITCH[$SPECLS_NUM]   
        0364:   actor $WITCH[$SPECLS_NUM] spotted_actor SURVIVER
            then
        
            SURVIVOR_WITCH_TIMER = 0
            random_int random_int SURVIVOR_WITCH_TIMER2 SURVIVOR_WITCH_TIMER_MIN SURVIVOR_WITCH_TIMER_MAX
                    
            gosub @RANDOM_DIALOG_WITCH_NEAR_SURV               
            gosub @SURV_NAME_CHECK
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1   
            
            //gosub @SHOW_FUCKING_VOICE
            
            end        
         end    
     end
end     
     
////////////////////////////////////////////////Голос про громилу////////////////////////////////////////////////      

if
001C:   SURVIVOR_CHARGER_TIMER > SURVIVOR_CHARGER_TIMER2 // (int)
then
if and
056D:   actor SURVIVER defined  
056D:   actor $CHARGER[$SPECLS_NUM] defined
$PHRASES_OFF_FLAG == 0  
    then
    if and    
    not actor.Dead(SURVIVER)
    not actor.Dead($CHARGER[$SPECLS_NUM])
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0  
    $SPECTATING_FLAG == 0
    $SCREWHUD_FLAG == 0
    0104:   actor $CHARGER[$SPECLS_NUM] near_actor SURVIVER radius 100.0 100.0 100.0 0  
    06EE:   actor SURVIVER in_group PLAYER_GROUP    
        then
        if or
        0364:   actor SURVIVER spotted_actor $CHARGER[$SPECLS_NUM]   
        0364:   actor $CHARGER[$SPECLS_NUM] spotted_actor SURVIVER
            then
        
            SURVIVOR_CHARGER_TIMER = 0
            random_int random_int SURVIVOR_CHARGER_TIMER2 SURVIVOR_CHARGER_TIMER_MIN SURVIVOR_CHARGER_TIMER_MAX
                    
            gosub @RANDOM_DIALOG_CHARGER_NEAR_SURV               
            gosub @SURV_NAME_CHECK
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1   
            
            //gosub @SHOW_FUCKING_VOICE
            
            end        
         end    
     end
end

////////////////////////////////////////////////Голос про хазмата////////////////////////////////////////////////      

if
not HAZMAT_HANDLE == -69
then
0209: 0@ = random_int_in_ranges HAZMAT_PHRASE_MIN HAZMAT_PHRASE_MAX
if
0@ == HAZMAT_PHRASE_SET
    then
    random_int 3@ 1 5
    if and
    056D:   actor SURVIVER defined  
    056D:   actor HAZMAT_HANDLE defined  
        then
        if and
        not actor.Dead(SURVIVER)
        not actor.Dead(HAZMAT_HANDLE)
        0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0  
        $SPECTATING_FLAG == 0
        $SCREWHUD_FLAG == 0
        $PHRASES_OFF_FLAG == 0
        0104:   actor HAZMAT_HANDLE near_actor SURVIVER radius 100.0 100.0 100.0 0      
            then
            if or
            0364:   actor SURVIVER spotted_actor HAZMAT_HANDLE   
            0364:   actor HAZMAT_HANDLE spotted_actor SURVIVER
                then
                               
                gosub @RANDOM_DIALOG_SURV_HAZMAT
                gosub @SURV_NAME_CHECK       
                                            
                09FD: get_gxt_string v$PHRASE3 width_to 3@  // ~k~~PED_SPRINT~ Select
                0093: 3@ = integer 3@ to_float
                3@ *= 8.0
                0092: 3@ = float 3@ to_integer  
                            
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
                
                //gosub @SHOW_FUCKING_VOICE
                
                end        
             end    
         end
    end
end                                   
     
////////////////////////////////////////////////Проверка на то, что выживший умер////////////////////////////////////////////////                                                    

if
056D:   actor SURVIVER defined
    then
    if or
    actor.Dead(SURVIVER)
    8184:   actor SURVIVER health < 1
        then
        
        if 
        actor.Animation(SURVIVER) == "BOM_PLANT"
        then
        0ED9: set_char_ignore_damage_anims SURVIVER 0
        0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 0
        0687: clear_actor SURVIVER task
        wait 1
        0792: disembark_instantly_actor SURVIVER
        05BE: AS_actor SURVIVER die    
        end
        
        create_thread @ANTKUKL SURVIVER
    
        if
        SURV_GVAR_DEBUG == 1
        then
            
        if
        18@ == 0
        then
        0B00: delete_file "surv0-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\1905"
        end
        
        if
        18@ == 1
        then
        0B00: delete_file "surv1-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\1905"
        end
        
        if
        18@ == 2
        then
        0B00: delete_file "surv2-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\1905"
        end
        
        if
        18@ == 3
        then
        0B00: delete_file "surv3-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\1905"
        end
        
        if
        18@ == 4
        then
        0B00: delete_file "surv4-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\1905"
        end
        
        end
    
        if
        SURVIVOR_IN_PLAYER_TEAM == 1
        then
        
        if
        075C:   marker $FREND_MARKER[SURVIVOR_NUMBER] enabled
        then
        marker.Disable($FREND_MARKER[SURVIVOR_NUMBER])
        $FREND_MARKER[SURVIVOR_NUMBER] = 0
        end
        
        if
        18@ == 0
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE1_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 1
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE2_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 2
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE3_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 3
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE4_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 4
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE5_CURRENT_BUFF = 0    
        end
        
        if
        075C:   marker SURVIVOR_STAY_MARK enabled
        then
        marker.Disable(SURVIVOR_STAY_MARK)
        end
        
        if and
        0800:   in_two_players_mode
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        003A:   SURVIVER == COOP_ACTOR // (int)
        not PVP_MODE_ON == 1
        then            
        0EA1: disable_second_player_restore_camera 1
        COOP_ACTOR = -69
        
        if and
        $GAMEMODE_CRAZY == 0
        $GAMEMODE_WAR == 0
        then
        COOP_ACTIVE_FLAG = 0
        COOP_2P_DIED_FLAG = 1
        end
                
        end
               
        06C9: remove_actor SURVIVER from_group  
        end
        
        if
        $QUEST_TYPE == 8
        then
        
        if
        075C:   marker SURVIVOR_STAY_MARK enabled
        then
        marker.Disable(SURVIVOR_STAY_MARK)
        end
        
        end                       
        
        gosub @LOOT_DROP
        
        0A96: 0@ = actor SURVIVER struct
        0@ += 0x754
        0A8D: 1@ = read_memory 0@ size 4 virtual_protect 0
        2@ = 0    
        0ECE: get_time_char_is_dead SURVIVER store_to 2@
        
        if and
        0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0
        89A8: not  actor SURVIVER headshoted 
        $SPECTATING_FLAG == 0
        $SCREWHUD_FLAG == 0
        $PHRASES_OFF_FLAG == 0
        not 1@ == 0x02
        2@ > 500
        then    
        gosub @RANDOM_DIALOG_DEAD_SURV           
        gosub @SURV_NAME_CHECK                    
        09FD: get_gxt_string v$PHRASE3 width_to 3@
        0093: 3@ = integer 3@ to_float
        3@ *= 8.0
        0092: 3@ = float 3@ to_integer                      
        0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1        
        
        //gosub @SHOW_FUCKING_VOICE
            
        end
        
        0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                    
        if and
        0@ == 1
        SURVIVOR_BLEEDING_FLAG == 1
        SURVIVOR_IN_PLAYER_TEAM == 1
        then
        audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
        end        
        
        0AB9: get_mp3 $LEFTFORDEATHHIT_SOUND state_to 0@
        
        if and
        not 0@ == 1
        SURVIVOR_IN_PLAYER_TEAM == 1
        $GAMEMODE_WAR == 0
        $GAMEMODE_CRAZY == 0
        not PVP_MODE_ON == 1
        then
        audiostream.Loop($LEFTFORDEATHHIT_SOUND,0)
        audiostream.Volume($LEFTFORDEATHHIT_SOUND) = $SOUNDS_VOLUME
        audiostream.PerformAction($LEFTFORDEATHHIT_SOUND,PLAY)
        end        
          
        $RANDOM_PEOPLE_SKIN[SURVIVOR_NUMBER] = -1
        $SURVIVOR_BANKA_COUNT[SURVIVOR_NUMBER] = -666
        
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////      
        
        0A96: 0@ = actor SURVIVER struct
        0A8E: 0@ = 0@ + 0x764
        0A8D: 1@ = read_memory 0@ size 2 virtual_protect 1
        0A8D: 2@ = read_memory 0xB6F5F0 size 2 virtual_protect 1
        
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        if and
        actor.Driving(PLAYER_ACTOR)
        803A: not  SURVIVER == COOP_ACTOR // (int)
        then
        3@ = actor.CurrentCar(PLAYER_ACTOR)
        if
        056E:   car 3@ defined
            then
            if or
            051B:   actor SURVIVER damaged_by_car 3@
            0547:   actor SURVIVER colliding_with_car 3@ 
                then
                0085: 1@ = 2@ // (int)
                end            
            end
        else
        if
        056E:   car PLAYER_LAST_DEFINED_CAR defined
            then
            if or
            051B:   actor SURVIVER damaged_by_car PLAYER_LAST_DEFINED_CAR
            0547:   actor SURVIVER colliding_with_car PLAYER_LAST_DEFINED_CAR
                then
                0085: 1@ = 2@ // (int)
                end
            end
        end
        
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////                    
        
        if
        0800:   in_two_players_mode
        then
        0A8D: 0@ = read_memory 0xB7CF28 size 2 virtual_protect 1
        else
        0@ = -69
        end
            
        if or
        003B:   1@ == 2@  // (int)
        003B:   1@ == 0@  // (int)
            then
                    
            089F: get_actor SURVIVER pedtype_to 1@        
            if
            1@ == 26
                then          
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURVIVORS_KILLED"    
                
                if
                $CHEATED_FLAG == 0 
                then                  
                0@ += 1   
                end                    
                 
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURVIVORS_KILLED"                  
                $SURVIVORS_KILLED += 1
                $TEMP_XP = USUAL_SURVIVOR_XP_PLUS
                008D: $TEMP_XP = integer $TEMP_XP to_float
                0069: $TEMP_XP *= $XP_COEFF // (float)
                008C: $TEMP_XP = float $TEMP_XP to_integer
                0058: $PLAYER_XP += $TEMP_XP // (int)
                
                if
                KARMA_SYS_ON_FLAG == 1
                then
                
                if
                CARMA_VERY_BAD_FLAG == 0
                then
                CARMA_BAD_POINTS += 10
                Audiostream.Loop($KARMA_BAD,0)
                Audiostream.PerformAction($KARMA_BAD, PLAY)
                Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
                CARMA_GOOD_POINTS -= 3
                
                gosub @ANY_SURV_SAW_THAT_SHIT
                
                else
                CARMA_BAD_POINTS += 3
                Audiostream.Loop($KARMA_THUG,0)
                Audiostream.PerformAction($KARMA_THUG, PLAY)
                Audiostream.Volume($KARMA_THUG) = $SOUNDS_VOLUME
                CARMA_GOOD_POINTS -= 5
                end
                
                end
                            
                end
                
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////            
            
            if
            1@ == 29
                then          
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_MARODERS_KILLED"    
                
                if
                $CHEATED_FLAG == 0 
                then                  
                0@ += 1   
                end
                
                $MARODERS_KILLED += 1
                $TEMP_XP = MARODERS_XP_PLUS
                008D: $TEMP_XP = integer $TEMP_XP to_float
                0069: $TEMP_XP *= $XP_COEFF // (float)
                008C: $TEMP_XP = float $TEMP_XP to_integer
                0058: $PLAYER_XP += $TEMP_XP // (int)                
                
                if
                KARMA_SYS_ON_FLAG == 1
                then
                CARMA_BAD_POINTS -= 1
                CARMA_GOOD_POINTS += 1
                
                if
                CARMA_VERY_BAD_FLAG == 0
                then
                Audiostream.Loop($KARMA_GOOD,0)
                Audiostream.PerformAction($KARMA_GOOD, PLAY)
                Audiostream.Volume($KARMA_GOOD) = $SOUNDS_VOLUME
                else
                Audiostream.Loop($KARMA_THUG,0)
                Audiostream.PerformAction($KARMA_THUG, PLAY)
                Audiostream.Volume($KARMA_THUG) = $SOUNDS_VOLUME
                end
                
                end                    
                 
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_MARODERS_KILLED"          
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_MARODERS_KILLED"
                0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT50_GOT"    
                
                if and
                1@ == 0
                0@ >= 100
                    then
                    v$ACHIEVEMNT = "ACH50"
                    $ACHIEVEMENT_GOT_FLAG = 1        
                    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT50_GOT"        
                    end                                
                end
                            
            end
        
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        if
        SURV_GVAR_DEBUG == 1
        then
        
        if
        18@ == 0
        then
        0B00: delete_file "surv0-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\2071"
        end
        
        if
        18@ == 1
        then
        0B00: delete_file "surv1-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\2071"
        end
        
        if
        18@ == 2
        then
        0B00: delete_file "surv2-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\2071"
        end
        
        if
        18@ == 3
        then
        0B00: delete_file "surv3-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\2071"
        end
        
        if
        18@ == 4
        then
        0B00: delete_file "surv4-debug.ini"  // IF and SET
        0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\2071"
        end
        
        end
        
        if
        SURVIVOR_IN_PLAYER_TEAM == 1
            then
            
            $ALLY_DEAD_FLAG = 1
            if
            not PVP_MODE_ON == 1
            then
            $ALLY_EVER_DIED = 1
            end
            
            SURVIVOR_IN_PLAYER_TEAM = 0        
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_KILLED"    
                
            if
            $CHEATED_FLAG == 0 
            then                  
            0@ += 1   
            end                        
             
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_KILLED"      
                
            $TEAMMATES_KILLED += 1
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT66_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_KILLED"    
            
            if and
            0@ == 0
            1@ >= 150
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH66"
                $ACHIEVEMENT_GOT_FLAG = 1        
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT66_GOT"        
                end    
                
            end
            
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////    
        
        if or
        $FREEMODE == 1
        $GAMEMODE_WAR == 1
        then
        
        if
        $GAMEMODE_WAR == 0
        then
        $SURV_PROCENT -= USUAL_SURVIVOR_MINUS
        else
        
        if
        $PLAYER_ARMY_SIDE == 1
        then            
        $ARMY_PROCENT -= 0.4
        $ARMY_KILLED += 1    
        end
        
        if
        $PLAYER_BANDIT_SIDE == 1
        then            
        $BANDITS_PROCENT -= 0.4
        $BANDITS_KILLED += 1    
        end
        
        if
        $PLAYER_FERMERS_SIDE == 1
        then                    
        $SURV_PROCENT -= 0.4
        $FERMERS_KILLED += 1    
        end
        
        if
        $PLAYER_SWAT_SIDE == 1
        then            
        $SURV_PROCENT -= 0.4
        $SWAT_KILLED += 1
        end
        
        end
        
        end
        
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        wait 1000  
        actor.RemoveReferences(SURVIVER)
        SURVIVER = -69
        SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0                
        
        if
        18@ == 0
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_SPAWNED"
        end
        
        if
        18@ == 1
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_SPAWNED"
        end
        
        if
        18@ == 2
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_SPAWNED"
        end
        
        if
        18@ == 3
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_SPAWNED"
        end
        
        if
        18@ == 4
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_SPAWNED"
        end
        
        if and
        18@ == 0
        TEAM1_SKIN > 0
        then
        TEAM1_SKIN = 0
        end
        
        if and
        18@ == 1
        TEAM2_SKIN > 0
        then
        TEAM2_SKIN = 0
        end
        
        if and
        18@ == 2
        TEAM3_SKIN > 0
        then
        TEAM3_SKIN = 0
        end
        
        if and
        ZAME_HUENEMY_FLAG == 1
        ZAME_HUENEMY_TYPE == 2
        then
        ZAME_HUENEMY_FLAG = 2
        marker.Disable(MISSION_MARKER)
        end_thread
        end  
            
        jump to @SURVIVER_SYSTEM_SPAWN_TIMER_START
        end        
    end

////////////////////////////////////////////////Удаление выжившего////////////////////////////////////////////////

if and
$DELETE_TEAMMATES == 1
$CARL_STORY == 1
SURVIVOR_IN_PLAYER_TEAM == 1
    then            
    jump to @DELETE_TEAMMATE
    end
    
if and
$DELETE_TEAMMATES == 1
$MIKE_STORY == 1
SURVIVOR_IN_PLAYER_TEAM == 1
    then  
    jump to @DELETE_TEAMMATE
    end
    
if and
$DELETE_TEAMMATES == 1
$GAMEMODE_CRAZY == 1
SURVIVOR_IN_PLAYER_TEAM == 1
    then             
    jump to @DELETE_TEAMMATE
    end
    
if and
$DELETE_TEAMMATES == 1
PLAYER_IN_CANALS_FLAG == 1
SURVIVOR_IN_PLAYER_TEAM == 1
    then                 
    jump to @DELETE_TEAMMATE
    end
    
if and
$DELETE_TEAMMATES == 1
$QUEST_TYPE == 9991
SURVIVOR_IN_PLAYER_TEAM == 1
    then                 
    jump to @DELETE_TEAMMATE
    end    
    
if and
$DELETE_TEAMMATES == 1
$GAMEMODE_EDITOR == 1
SURVIVOR_IN_PLAYER_TEAM == 1
    then               
    jump to @DELETE_TEAMMATE
    end
    
if
$SURVIVOR_BANKA_COUNT[SURVIVOR_NUMBER] == -666
    then                 
    jump to @DELETE_TEAMMATE2
    end                             

if and
SURVIVOR_IN_PLAYER_TEAM == 1
not $MUTATION_ACTIVE == 0
not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
not $GAMEMODE_STORYLINE == 1
not COOP_ACTIVE_FLAG == 1
not $CARL_STORY == 1
    then
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
        
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
        
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
        
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
        
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end    
    
    if
    2@ == 0
        then
    
        actor.StorePos(PLAYER_ACTOR,1@,2@,3@)    
        if and
        $STORY_FLAG == 0
        $INT_ENTERING_FLAG == 0
        $ACTIVE_INTERIOR == 0
        not 3@ > 900.0                
            then
            
            if
            not actor.Driving(SURVIVER)
            then
            008B: 1@ = $DESPAWN_RADIUS_RANDOM_PEOPLE // (int)
            else
            1@ = 180.0
            end
            
            if and
            SURVIVOR_IN_PLAYER_TEAM == 1
            $GAMEMODE_WAR == 0
            80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 1@ 1@ 0
            not actor.Driving(SURVIVER)
            then 
            gosub @SURVIVOR_CAMP_CHECK_ZONE           
            if
            0@ == 1            
                then
                
                if
                0A4B:   controls_set_to_joystick
                then
                text.RemoveTextBox()
                text.ShowTextBox('GME1271')
                else
                text.RemoveTextBox()
                text.ShowTextBox('GME1270')
                end
                
                jump to @SURV_STAY_AUTOMATIC
                end            
            end
             
            if or  
            80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 1@ 1@ 0 
            $DELETE_TEAMMATES == 1
                then
                
                :DELETE_TEAMMATE
                
                if and
                80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 1@ 1@ 0                
                not $DELETE_TEAMMATES == 1
                not $GAMEMODE_WAR == 1 
                then
                
                /////////////////////////////////////////////////////////////////////
                
                32@ = 0
                
                repeat
                wait 0                                
                
                2@ = 16000
                0085: 0@ = 32@ // (int)
                0062: 2@ -= 0@  // (int)
                2@ /= 1000
                
//                text.Show1Number('GME1413',2@,100,1)
                gosub @SURV_NAME_CHECK
                0ADE: v$BPHRASE3 = text_by_GXT_entry v$2NAME3
                if
                ENGLISH_TRANSLATE == 0
                then
                
                if
                2@ > 1
                then
                0AD1: show_formatted_text_highpriority "‹EP­…ЏEC’ K ~b~%s~w~, њ®a¤e Є¦o¦ co«џ®њk Јokњ®e¦ koЇa®љy ¤epeџ ~b~%d~w~ ceky®љ(Ё)!" time 100 v$BPHRASE3 2@
                else
                0AD1: show_formatted_text_highpriority "‹EP­…ЏEC’ K ~b~%s~w~, њ®a¤e Є¦o¦ co«џ®њk Јokњ®e¦ koЇa®љy ¤epeџ ~b~1~w~ ceky®љ(Ё)!" time 100 v$BPHRASE3
                end
                
                else
                
                if
                2@ > 1
                then
                0AD1: show_formatted_text_highpriority "RETURN TO ~b~%s~w~, or this teammate will leave in ~b~%d~w~ second(s)!" time 100 v$BPHRASE3 2@
                else
                0AD1: show_formatted_text_highpriority "RETURN TO ~b~%s~w~, or this teammate will leave in ~b~1~w~ second(s)!" time 100 v$BPHRASE3
                end
                
                end
                
                if
                32@ > 15000
                then 
                text.ClearAll() 
                break
                end
                
                if
                00F2:  actor SURVIVER near_actor PLAYER_ACTOR radius 1@ 1@ 0
                then
                text.ClearAll()
                jump to @SKIP_FUCKING_BETRAY
                end
                
                until false
                
                /////////////////////////////////////////////////////////////////////                                
                
                if and
                KARMA_SYS_ON_FLAG == 1
                CARMA_VERY_BAD_FLAG == 0
                then
                CARMA_BAD_POINTS += 5
                Audiostream.Loop($KARMA_BAD,0)
                Audiostream.PerformAction($KARMA_BAD, PLAY)
                Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
                end
                
                /////////////////////////////////////////////////////////////////////
                
                end
                
                :DELETE_TEAMMATE2
                
                if
                075C:   marker $FREND_MARKER[SURVIVOR_NUMBER] enabled
                then
                marker.Disable($FREND_MARKER[SURVIVOR_NUMBER])
                $FREND_MARKER[SURVIVOR_NUMBER] = 0
                end
                
                if
                18@ == 0
                then
                gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
                TEAMMATE1_CURRENT_BUFF = 0    
                end
                    
                if
                18@ == 1
                then
                gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
                TEAMMATE2_CURRENT_BUFF = 0    
                end
                    
                if
                18@ == 2
                then
                gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
                TEAMMATE3_CURRENT_BUFF = 0    
                end
                    
                if
                18@ == 3
                then
                gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
                TEAMMATE4_CURRENT_BUFF = 0    
                end
                    
                if
                18@ == 4
                then
                gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
                TEAMMATE5_CURRENT_BUFF = 0    
                end
                            
                0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                    
                if and
                0@ == 1
                SURVIVOR_BLEEDING_FLAG == 1
                SURVIVOR_IN_PLAYER_TEAM == 1
                then
                audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
                end
                
                if and
                COOP_ACTIVE_FLAG == 1
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                003A:   SURVIVER == COOP_ACTOR // (int)
                then
                0EA1: disable_second_player_restore_camera 1
                
                if and
                $GAMEMODE_CRAZY == 0
                $GAMEMODE_WAR == 0
                $DELETE_TEAMMATES == 0
                then
                COOP_ACTIVE_FLAG = 0
                end
                
                actor.DestroyWithFade(SURVIVER)
                COOP_ACTOR = -69
                else
                actor.DestroyWithFade(SURVIVER)
                end
                
                if and
                $GAMEMODE_HOLD == 0
                not $DELETE_TEAMMATES == 1
                not $SURVIVOR_BANKA_COUNT[SURVIVOR_NUMBER] == -666
                then
                $ALLY_EVER_DIED = 1
                end
                
                SURVIVER = -69
                SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
                
                if
                18@ == 0
                then
                0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_SPAWNED"
                end
                
                if
                18@ == 1
                then
                0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_SPAWNED"
                end
                
                if
                18@ == 2
                then
                0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_SPAWNED"
                end
                
                if
                18@ == 3
                then
                0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_SPAWNED"
                end
                
                if
                18@ == 4
                then
                0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_SPAWNED"
                end
                
                if and
                18@ == 0
                TEAM1_SKIN > 0
                then
                TEAM1_SKIN = 0
                end
                
                if and
                18@ == 1
                TEAM2_SKIN > 0
                then
                TEAM2_SKIN = 0
                end
                
                if and
                18@ == 2
                TEAM3_SKIN > 0
                then
                TEAM3_SKIN = 0
                end
                   
                $RANDOM_PEOPLE_SKIN[SURVIVOR_NUMBER] = -1            
                
                jump to @SURVIVER_SYSTEM_SPAWN_TIMER_START
                end
            end 
        end
    end
    
:SKIP_FUCKING_BETRAY    
    
////////////////////////////////////////////////Катапултирование выжившего из горящего авто////////////////////////////////////////////////            

    if
    SURV_GVAR_DEBUG == 1
    then

    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\2359"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\2359"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\2359"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\2359"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\2359"
    end
    
    end
    
if
SURVIVOR_IN_PLAYER_TEAM == 1
    then    
    if and
    actor.Driving(SURVIVER)
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then
        0@ = actor.CurrentCar(SURVIVER)
        if
        056E:   car 0@ defined
            then
            if and
            8185: not  car 0@ health > 250
            not actor.Driving(PLAYER_ACTOR)
                then
                04C4: store_coords_to 26@ 27@ 28@ from_actor SURVIVER with_offset 0.0 0.0 2.0 
                0362: remove_actor SURVIVER from_car_and_place_at 26@ 27@ 28@
                end
            end
        end    
    end
    
////////////////////////////////////////////////Убийство выжившего в "Удержании" при попадении в воду////////////////////////////////////////////////    
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
$DELETE_SOUND == 0
04AD:   actor SURVIVER in_water
    then
    if and
    $GAMEMODE_HOLD == 1
    UNITED_MAP == 0
        then
        0792: disembark_instantly_actor SURVIVER
//        05BE: AS_actor SURVIVER die
        0829: actor SURVIVER perform_animation "DROWN" IFP_file "PED" rate 4.0 time 0 and_dies
        end
    end
    
////////////////////////////////////////////////Заставляем выжившего выходить из левого авто////////////////////////////////////////////////    
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
$DELETE_SOUND == 0
$COMMAND_STAY_IN_CAR == 0
    then
    if and
    actor.Driving(SURVIVER)
    actor.Driving(PLAYER_ACTOR)
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then
        26@ = actor.CurrentCar(PLAYER_ACTOR)
        27@ = actor.CurrentCar(SURVIVER)
        if
        803B: not  26@ == 27@  // (int)
            then            
            if and
            056E:   car 26@ defined
            056E:   car 27@ defined
                then
                
                if
                $EXPE_FLAG == 1
                then
                car.SetMaxSpeed(27@,100.0)  
                00AE: set_car 27@ traffic_behaviour_to 2  
                03AB: set_car 27@ strong 1 
                0E09: mark_car_as_needed 27@
                
                if
                18@ == 0
                then
                05F1: set_car 27@ follow_car 26@ keep_9o_clock
                end
                
                if
                18@ == 1
                then
                05F2: set_car 27@ follow_car 26@ keep_3o_clock
                end
                
                if
                18@ == 2
                then
                05F1: set_car 27@ follow_car 26@ keep_9o_clock
                end
                
                if
                18@ == 3
                then
                05F2: set_car 27@ follow_car 26@ keep_3o_clock
                end
                
                if
                18@ == 4
                then
                05F2: set_car 27@ follow_car 26@ keep_3o_clock
                end
                
                else                                        
                actor.StorePos(PLAYER_ACTOR,1@,2@,3@)
                05CF: AS_actor SURVIVER exit_car 27@ in_direction 1@ 2@ 3@
                end
                                                                            
                end            
            end
        end
    end        
    
////////////////////////////////////////////////Удаление выжившего (2)////////////////////////////////////////////////                                   
     
if and
SURVIVOR_IN_PLAYER_TEAM == 0
not $MUTATION_ACTIVE == 0
not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
not $GAMEMODE_STORYLINE == 1
not ZAME_HUENEMY_FLAG == 1
    then
    
    if
    not actor.Driving(SURVIVER)
    then
    008B: 1@ = $DESPAWN_RADIUS_RANDOM_PEOPLE // (int)
    else
    1@ = 180.0
    end    
      
    if and  
    80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 1@ 1@ 0
    803A: not  SURVIVER == COOP_ACTOR // (int)
    $ACTIVE_INTERIOR == 0
    $INT_ENTERING_FLAG == 0 
        then        
        
        if
        075C:   marker $FREND_MARKER[SURVIVOR_NUMBER] enabled
        then
        marker.Disable($FREND_MARKER[SURVIVOR_NUMBER])
        $FREND_MARKER[SURVIVOR_NUMBER] = 0
        end
        
        if
        18@ == 0
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE1_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 1
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE2_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 2
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE3_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 3
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE4_CURRENT_BUFF = 0    
        end
            
        if
        18@ == 4
        then
        gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
        TEAMMATE5_CURRENT_BUFF = 0    
        end
        
        0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                
        if and
        0@ == 1
        SURVIVOR_BLEEDING_FLAG == 1
        SURVIVOR_IN_PLAYER_TEAM == 1
        then
        audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
        end
        
        if and
        COOP_ACTIVE_FLAG == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        003A:   SURVIVER == COOP_ACTOR // (int)
        then
        0EA1: disable_second_player_restore_camera 1
        actor.DestroyWithFade(SURVIVER)
        COOP_ACTOR = -69
        else
        actor.DestroyWithFade(SURVIVER)   
        end
        
        SURVIVER = -69
        SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
        
        if
        18@ == 0
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_SPAWNED"
        end
        
        if
        18@ == 1
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_SPAWNED"
        end
        
        if
        18@ == 2
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_SPAWNED"
        end
        
        if
        18@ == 3
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_SPAWNED"
        end
        
        if
        18@ == 4
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_SPAWNED"
        end
        
        if and
        18@ == 0
        TEAM1_SKIN > 0
        then
        TEAM1_SKIN = 0
        end
        
        if and
        18@ == 1
        TEAM2_SKIN > 0
        then
        TEAM2_SKIN = 0
        end
        
        if and
        18@ == 2
        TEAM3_SKIN > 0
        then
        TEAM3_SKIN = 0
        end
        
        $RANDOM_PEOPLE_SKIN[SURVIVOR_NUMBER] = -1        
        
        jump to @SURVIVER_SYSTEM_SPAWN_TIMER_START
        end 
     end    
      
////////////////////////////////////////////////Показ подсказки управления с выжившим////////////////////////////////////////////////         

if and
056D:   actor SURVIVER defined
$GAMEMODE_WAR == 0
    then                   
    if and
    SURVIVOR_IN_PLAYER_TEAM == 1 
    SURVIVOR_HINT_FLAG == 0
    $GAMEMODE_HOLD == 0
    $DEFENSE_CHALLENGE_FLAG == 0    
    $GAMEMODE_EDITOR == 0
    0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.5 1.5 1.5 sphere 0    
    not actor.Driving(SURVIVER)
    not $SIMULATING_FLAG == 1
        then
        if and
        8A4B: not  controls_set_to_joystick
        not COOP_ACTIVE_FLAG == 1
        0E45: frame_mod 60
            then
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "FS3"
            if
            0@ > 0
                then 
                0@ -= 1      
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "FS3"                         
                SURVIVOR_HINT_FLAG = 1
                0512: show_permanent_text_box 'GAME135'
                end
            end
        end    
    end
    
////////////////////////////////////////////////Показ подсказки управления с выжившим (2)////////////////////////////////////////////////              

if
056D:   actor SURVIVER defined
    then    
    if and
    SURVIVOR_IN_PLAYER_TEAM == 1 
    SURVIVOR_HINT_FLAG == 1
    8104: not  actor PLAYER_ACTOR near_actor SURVIVER radius 3.0 3.0 3.0 sphere 0
        then
        SURVIVOR_HINT_FLAG = 0
        text.RemoveTextBox()
        end
    end
    
////////////////////////////////////////////////Установка иммунитетов выжившему в "Удержании"////////////////////////////////////////////////                 

if
056D:   actor SURVIVER defined
    then      
    if or
    $GAMEMODE_HOLD == 1
    $SALVATION_FLAG == 1
        then
        if
        SURVIVOR_MELEE_ID < 0
            then
            actor.SetImmunities(SURVIVER,0,1,1,0,1) 
            else
            actor.SetImmunities(SURVIVER,0,1,1,0,0) 
            end 
        end
    end

////////////////////////////////////////////////Когда кончаются патроны у выданной игроком пушки////////////////////////////////////////////////     
    
:FUCKKK     

if
056D:   actor SURVIVER defined
    then    
    04DD: 0@ = actor SURVIVER armour    
    if and
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 1
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0
    0@ == 0
        then     
        0470: 0@ = actor SURVIVER current_weapon
        041A: 1@ = actor SURVIVER weapon 0@ ammo
        if 
        1@ <= 0
            then      
            0781: get_weapon_with_ID SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID model_to 3@          
    
            while not model.Available(3@)
            wait 0
            model.Load(3@)
            mload
            end
            
            if
            not CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
            then
            actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,99999) 
            else
            actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,SURVIVOR_WEP_AMMO)
            end
                     
            SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0
            gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP                        
            
            if
            CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
            then           
            gosub @RANDOM_DIALOG_GIVED_WEP_AMMO_ENDED
            else
            gosub @RANDOM_DIALOG_GIVED_WEP_AMMO_ENDED2
            end
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
                    
            32@ = 0                                  
                                        
            $PHRASES_OFF_FLAG = 1
            if
            CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
            then
            text.ShowTextBox('GME1479') 
            end               
                                        
            repeat
            wait 0 
                                                        
            gosub @SURV_NAME_CHECK 
                                    
            if
            00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 5.0 5.0 0
            then    
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
            else
            break
            end
                                        
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                                        
            until 002D:   32@ >= 9@  // (int)
                                        
            $PHRASES_OFF_FLAG = 0                        
            
            end
        end
    end
    
////////////////////////////////////////////////Блокирование на месте союзника во время команды "оставаться в лагере"////////////////////////////////////////////////

if
18@ == 0
then
008B: 2@ = $SURV1_STAY_FLAG // (int)
end
        
if
18@ == 1
then
008B: 2@ = $SURV2_STAY_FLAG // (int)
end
        
if
18@ == 2
then
008B: 2@ = $SURV3_STAY_FLAG // (int)
end
        
if
18@ == 3
then
008B: 2@ = $SURV4_STAY_FLAG // (int)
end
        
if
18@ == 4
then
008B: 2@ = $SURV5_STAY_FLAG // (int)
end

if and
2@ == 1
056D:   actor SURVIVER defined
then

if
8E92: not is_char_really_in_air SURVIVER
then
actor.StorePos(SURVIVER,26@,27@,28@)
actor.PutAtNoOffset(SURVIVER,26@,27@,28@)
end

if or
actor.Animation(SURVIVER) == "run_civi"
actor.Animation(SURVIVER) == "sprint_civi"
then
0687: clear_actor SURVIVER task
end

end            
    
////////////////////////////////////////////////Блокирование союзника в пространстве во время загрузки выживания////////////////////////////////////////////////       

    if
    SURV_GVAR_DEBUG == 1
    then

    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\2812"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\2812"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\2812"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\2812"
    end                                                                                                    
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\2812"
    end
    
    end
    
if
SURVIVOR_IN_PLAYER_TEAM == 1
    then
    
    if
    SURV_GVAR_DEBUG == 1
    then
    
    if
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\$SIMULATING_FLAG == 1\2851"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\$SIMULATING_FLAG == 1\2851"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\$SIMULATING_FLAG == 1\2851"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\$SIMULATING_FLAG == 1\2851"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\$SIMULATING_FLAG == 1\2851"
    end
    
    end
    
    if
    $SIMULATING_FLAG == 1  
        then
        actor.LockInCurrentPosition(SURVIVER) = true
        actor.SetImmunities(SURVIVER,1,1,1,1,1)  
        04D7: set_actor SURVIVER locked 1
        0619: enable_actor SURVIVER collision_detection 0      
        while $SIMULATING_FLAG == 1
        wait 0              
        
        if
        $SURVIVOR_BANKA_COUNT[SURVIVOR_NUMBER] == -666
        then                 
        jump to @DELETE_TEAMMATE2
        end
                  
        end                                
        actor.LockInCurrentPosition(SURVIVER) = false
        actor.SetImmunities(SURVIVER,0,0,0,0,0)        
        04D7: set_actor SURVIVER locked 0
        0619: enable_actor SURVIVER collision_detection 1                                           
        end
    end
    
////////////////////////////////////////////////Удаление выжившего (3)////////////////////////////////////////////////    
    
if or
$SAVESTATUS == 1
DELETE_RAN_RUVS == 1
$SAVING_PLACE_FLAG == 1
    then
    
    if and
    OOS_MARK == 667
    $QUEST_TYPE == 9991
    then
    jump to @SURV_SKIP_DEL_FOR_BAD_OOS_END
    end
    
    if and
    SURVIVOR_IN_PLAYER_TEAM == 0    
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then
        
        0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                
        if and
        0@ == 1
        SURVIVOR_BLEEDING_FLAG == 1
        SURVIVOR_IN_PLAYER_TEAM == 1
        then
        audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
        end
        
        if and
        COOP_ACTIVE_FLAG == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        003A:   SURVIVER == COOP_ACTOR // (int)
        then
        0EA1: disable_second_player_restore_camera 1
        actor.DestroyWithFade(SURVIVER)
        COOP_ACTOR = -69
        else   
        actor.DestroyWithFade(SURVIVER) 
        end
        
        SURVIVER = -69
        SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
        
        if
        18@ == 0
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_SPAWNED"
        end
        
        if
        18@ == 1
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_SPAWNED"
        end
        
        if
        18@ == 2
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_SPAWNED"
        end
        
        if
        18@ == 3
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_SPAWNED"
        end
        
        if
        18@ == 4
        then
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_SPAWNED"
        end
        
        if and
        18@ == 0
        TEAM1_SKIN > 0
        then
        TEAM1_SKIN = 0
        end
        
        if and
        18@ == 1
        TEAM2_SKIN > 0
        then
        TEAM2_SKIN = 0
        end
        
        if and
        18@ == 2
        TEAM3_SKIN > 0
        then
        TEAM3_SKIN = 0
        end
         
        $RANDOM_PEOPLE_SKIN[SURVIVOR_NUMBER] = -1        
        
        jump to @SURVIVER_SYSTEM_SPAWN_TIMER_START
        end
    end
    
:SURV_SKIP_DEL_FOR_BAD_OOS_END    
    
////////////////////////////////////////////////Удаление выжившего (4)////////////////////////////////////////////////    
    
if
18@ == 0
then
008B: 2@ = $SURV1_STAY_FLAG // (int)
end
    
if
18@ == 1
then
008B: 2@ = $SURV2_STAY_FLAG // (int)
end
    
if
18@ == 2
then
008B: 2@ = $SURV3_STAY_FLAG // (int)
end
    
if
18@ == 3
then
008B: 2@ = $SURV4_STAY_FLAG // (int)
end
    
if
18@ == 4
then
008B: 2@ = $SURV5_STAY_FLAG // (int)
end

if
2@ == 1
then

if
not SURVIVAL_CUSTOM_WEAPON_NABOR == 10
then

if
18@ == 0
    then
    $HATIKO_TIMER1 += 1
    008B: 3@ = $HATIKO_TIMER1 // (int)
    end
        
if
18@ == 1
    then
    $HATIKO_TIMER2 += 1
    008B: 3@ = $HATIKO_TIMER2 // (int)
    end
        
if
18@ == 2
    then
    $HATIKO_TIMER3 += 1
    008B: 3@ = $HATIKO_TIMER3 // (int)
    end
        
if
18@ == 3
    then
    $HATIKO_TIMER4 += 1
    008B: 3@ = $HATIKO_TIMER4 // (int)
    end
        
if
18@ == 4
    then
    $HATIKO_TIMER5 += 1
    008B: 3@ = $HATIKO_TIMER5 // (int)
    end
    
end    

if and
3@ > 40320
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
not $GAMEMODE_STORYLINE == 1
    then
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_TEAM_TIME // (int)
    end
        
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_TEAM_TIME // (int)
    end
        
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_TEAM_TIME // (int)
    end
        
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_TEAM_TIME // (int)
    end
        
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_TEAM_TIME // (int)
    end
    
    if
    2@ >= 44000
        then
        if
        3@ > 120960
            then
            jump to @HATIKO_BETRAY_JUMP
            end
        else
    
        :HATIKO_BETRAY_JUMP
    
        if
        075C:   marker SURVIVOR_STAY_MARK enabled
        then
        marker.Disable(SURVIVOR_STAY_MARK)    
        end
        
        gosub @HATIKO_BETRAY_MOMENT
        
        end
    
    end    

else

if
18@ == 0
then
if
$HATIKO_TIMER1 > 0
    then
    $HATIKO_TIMER1 -= 1
    end
end

if
18@ == 1
then
if
$HATIKO_TIMER2 > 0
    then
    $HATIKO_TIMER2 -= 1
    end
end

if
18@ == 2
then
if
$HATIKO_TIMER3 > 0
    then
    $HATIKO_TIMER3 -= 1
    end
end

if
18@ == 3
then
if
$HATIKO_TIMER4 > 0
    then
    $HATIKO_TIMER4 -= 1
    end
end

if
18@ == 4
then
if
$HATIKO_TIMER5 > 0
    then
    $HATIKO_TIMER5 -= 1
    end
end

end

if
056D:   actor SURVIVER defined
    then    
    if and
    2@ == 1
    80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 180.0 180.0 0
        then
        jump to @TEAMMATE_DEL
        end    
    end

////////////////////////////////////////////////Удаление выжившего (5)////////////////////////////////////////////////        
    
if and
$SAVESTATUS_TRUE == 1
SURVIVOR_IN_PLAYER_TEAM == 1
056D:   actor SURVIVER defined
    then
    :TEAMMATE_DEL
    
    if
    actor.Driving(SURVIVER)
    then
    04C4: store_coords_to 26@ 27@ 28@ from_actor SURVIVER with_offset 0.0 0.0 2.0 
    0362: remove_actor SURVIVER from_car_and_place_at 26@ 27@ 28@
    end          
    
    SURVIVOR_SAVED_FLAG = 1
    
    0665: get_actor SURVIVER model_to 23@
    24@ = Actor.Health(SURVIVER)
    
    if and
    COOP_ACTIVE_FLAG == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    then
    //ass
    COOP_2P_WEAPONS_SAVED_FLAG = 0
    create_thread @SAV_WEP SURVIVER
    
    repeat
    wait 0
    until COOP_2P_WEAPONS_SAVED_FLAG == 1
    
    else    
    0470: 22@ = actor SURVIVER current_weapon    
    end
     
    041A: 26@ = actor SURVIVER weapon 22@ ammo
    29@ = actor.Angle(SURVIVER)
    Actor.StorePos(SURVIVER, 15@, 16@, 17@)
    
    0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                
    if and
    0@ == 1
    SURVIVOR_BLEEDING_FLAG == 1
    SURVIVOR_IN_PLAYER_TEAM == 1
    then
    audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
    end
    
    actor.StorePos(SURVIVER,12@,13@,14@)
    
    if and
    COOP_ACTIVE_FLAG == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    003A:   SURVIVER == COOP_ACTOR // (int)
    then
    0EA1: disable_second_player_restore_camera 1
    actor.DestroyWithFade(SURVIVER)
    COOP_ACTOR = -69
    else 
    actor.DestroyWithFade(SURVIVER)
    end
    
    SURVIVER = -69
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 0
    
    if
    18@ == 0
    then
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_SPAWNED"
    end
    
    if
    18@ == 1
    then
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_SPAWNED"
    end
    
    if
    18@ == 2
    then
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_SPAWNED"
    end
    
    if
    18@ == 3
    then
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_SPAWNED"
    end
    
    if
    18@ == 4
    then
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_SPAWNED"
    end
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
        
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
        
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
        
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
        
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if
    2@ == 1
    then
    
    if
    075C:   marker SURVIVOR_STAY_MARK enabled
    then
    marker.Disable(SURVIVOR_STAY_MARK)
    end
    
    if and
    COOP_ACTIVE_FLAG == 1
    MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
    $GAMEMODE_STORYLINE == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        //ass
        else
        marker.CreateIconAndSphere2(0@,60,12@,13@,14@)
        end
                
    end         
    
    :SURVIVER_SAVING_CHECK
    wait 0
    
    2@ = 0        
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
        
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
        
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
        
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
        
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if
    2@ == 1        
    then
    
    if and
    MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 0
    not SURVIVAL_CUSTOM_WEAPON_NABOR == 10
    then
    
    if
    18@ == 0
    then
    $HATIKO_TIMER1 += 1
    008B: 3@ = $HATIKO_TIMER1 // (int)
    end
        
    if
    18@ == 1
    then
    $HATIKO_TIMER2 += 1
    008B: 3@ = $HATIKO_TIMER2 // (int)
    end
        
    if
    18@ == 2
    then
    $HATIKO_TIMER3 += 1
    008B: 3@ = $HATIKO_TIMER3 // (int)
    end
        
    if
    18@ == 3
    then
    $HATIKO_TIMER4 += 1
    008B: 3@ = $HATIKO_TIMER4 // (int)
    end
        
    if
    18@ == 4
    then
    $HATIKO_TIMER5 += 1
    008B: 3@ = $HATIKO_TIMER5 // (int)
    end
    
    end
    
    2@ = 0
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_TEAM_TIME // (int)
    end
        
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_TEAM_TIME // (int)
    end
        
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_TEAM_TIME // (int)
    end
        
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_TEAM_TIME // (int)
    end
        
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_TEAM_TIME // (int)
    end            
       
    if and
    8@ > -1
    8@ < 15
    then
    if and
    $CAMP_DEAD_FLAG[8@] == 1
    SURVIVOR_MARODER_FLAG == 0
    not $GAMEMODE_STORYLINE == 1
        then
        jump to @HATIKO_BETRAY_JUMP2
        end
    end
    
    if and
    CARMA_VERY_BAD_FLAG == 1
    SURVIVOR_MARODER_FLAG == 0
    not $GAMEMODE_STORYLINE == 1
        then
        jump to @HATIKO_BETRAY_JUMP2
        end
    
    if and
    2@ >= 44000
    not $GAMEMODE_STORYLINE == 1
    then
    
    if and
    3@ > 120960
    not $GAMEMODE_STORYLINE == 1
        then
        jump to @HATIKO_BETRAY_JUMP2
        end
    
    else    
    
    if and
    3@ > 40320
    not $GAMEMODE_STORYLINE == 1
        then                        
        
        :HATIKO_BETRAY_JUMP2
        
        SURVIVOR_SAVED_FLAG = 0
        
        if
        075C:   marker 0@ enabled
        then
        marker.Disable(0@)    
        end        
        
        jump to @SURVIVER_SYSTEM_SPAWN_TIMER_START
        
        end
    
    end        
    
    if and
    MCS_FLAG == 1
    COOP_ACTIVE_FLAG == 1    
        then
        
        if
        COOP_TP_TEAMMATES_FLAG == 1
            then
            04C4: store_coords_to 12@ 13@ 14@ from_actor PLAYER_ACTOR with_offset 0.0 -1.5 0.0
            04C4: store_coords_to 15@ 16@ 17@ from_actor PLAYER_ACTOR with_offset 0.0 -1.5 0.0
            29@ = actor.Angle(PLAYER_ACTOR)
            end
        
        if or
        $MCS_2P_TP_TIM_FLAG == 1
        $MCS_2P_TP_TIM_FLAG == 2
            then
            
            if
            075C:   marker 0@ enabled
            then
            marker.Disable(0@)    
            end
            
            if
            $MCS_2P_TP_TIM_FLAG == 1
                then        
                $MCS_2P_TP_TIM_FLAG = 0
                12@ = -1642.5698
                13@ = -2263.7183
                14@ = 32.973                      
                15@ = -1642.5698
                16@ = -2263.7183
                17@ = 32.973
                29@ = 111.7047
                end
            end        
        end
        
    if and
    $CARL_STORY == 1
    COOP_ACTIVE_FLAG == 1    
        then
            
        if or
        JS_DLC_2P_TP_NORWOOD_FLAG == 1
        JS_DLC_2P_TP_NORWOOD_FLAG == 2
            then
                
            if
            075C:   marker 0@ enabled
            then
            marker.Disable(0@)    
            end
                
            if
            JS_DLC_2P_TP_NORWOOD_FLAG == 1
                then        
                JS_DLC_2P_TP_NORWOOD_FLAG = 0                  
                12@ = 1095.8165
                13@ = -293.266
                14@ = 73.9922                                        
                15@ = 1095.8165
                16@ = -293.266
                17@ = 73.9922
                29@ = 45.7525
                end
            end
            
        if or
        JS_DLC_2P_TP_HELENA_FLAG == 1
        JS_DLC_2P_TP_HELENA_FLAG == 2
            then
                
            if
            075C:   marker 0@ enabled
            then
            marker.Disable(0@)    
            end
                
            if
            JS_DLC_2P_TP_HELENA_FLAG == 1
                then        
                JS_DLC_2P_TP_HELENA_FLAG = 0                                    
                12@ = 2376.3345
                13@ = -668.3731
                14@ = 128.5058                                                          
                15@ = 2376.3345
                16@ = -668.3731
                17@ = 128.5058
                29@ = 220.0474
                end
            end    
                                    
        end
        
    if
    00EC:   actor PLAYER_ACTOR sphere 0 near_point 12@ 13@ radius 180.0 180.0
    jf @SURVIVER_SAVING_CHECK
    end        
    
    if  
    $SAVESTATUS_TRUE == 0
    jf @SURVIVER_SAVING_CHECK        
    
    while $MODEL_LOADED_FLAG == 0
    wait 0
    end
    
    if
    075C:   marker 0@ enabled
    then
    marker.Disable(0@)    
    end             
    
    jump to @SURVIVER_SPAWN_START    
    end
    
////////////////////////////////////////////////Установка стиля передвижения////////////////////////////////////////////////              
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
803A: not  SURVIVER == COOP_ACTOR // (int)
not actor.Driving(PLAYER_ACTOR)
    then
    gosub @RANDOM_SURV_RUN_IN_CAR_CHECK        
    if and
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius 6.0 6.0 6.0 sphere 0
    0@ == 0
        then 
        Actor.SetWalkStyle(SURVIVER, "SURV1")
        0A96: 0@ = actor SURVIVER struct
        0A8E: 0@ = 0@ + 1376
        0A8C: write_memory 0@ size 4 value 45.0 virtual_protect 1
        else                                     
        end                
    end

if
SURV_GVAR_DEBUG == 1
then

if    
18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_IN_PLAYER_TEAM == 1\3196"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_IN_PLAYER_TEAM == 1\3196"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_IN_PLAYER_TEAM == 1\3196"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_IN_PLAYER_TEAM == 1\3196"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_IN_PLAYER_TEAM == 1\3196"
    end 
    
end        
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
803A: not  SURVIVER == COOP_ACTOR // (int)
    then
    if or
    actor.Driving(PLAYER_ACTOR)
    09DE:   actor PLAYER_ACTOR entering_car
        then        
        if and
        0104:   actor SURVIVER near_actor PLAYER_ACTOR radius 1.0 1.0 1.0 sphere 0
        0@ == 0    
            then 
            Actor.SetWalkStyle(SURVIVER, "SURV4")
            else
            Actor.SetWalkStyle(SURVIVER, "SURV5")
            0A96: 0@ = actor SURVIVER struct
            0A8E: 0@ = 0@ + 1376
            0A8C: write_memory 0@ size 4 value 1024.0 virtual_protect 1                                  
            end                
        end
    end
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
803A: not  SURVIVER == COOP_ACTOR // (int)
not actor.Driving(PLAYER_ACTOR)
    then        
    if
    0@ == 1
        then            
        if 
        0104:   actor SURVIVER near_actor PLAYER_ACTOR radius 10.0 10.0 10.0 sphere 0    
            then 
            Actor.SetWalkStyle(SURVIVER, "SURV5")
            0A96: 0@ = actor SURVIVER struct
            0A8E: 0@ = 0@ + 1376
            0A8C: write_memory 0@ size 4 value 1024.0 virtual_protect 1
            else 
            Actor.SetWalkStyle(SURVIVER, "SURV5")
            0A96: 0@ = actor SURVIVER struct
            0A8E: 0@ = 0@ + 1376
            0A8C: write_memory 0@ size 4 value 1024.0 virtual_protect 1
            end              
        end              
    end
    
////////////////////////////////////////////////Бросание гранат////////////////////////////////////////////////                                       

if
056D:   actor SURVIVER defined
    then    
    04DD: 0@ = actor SURVIVER armour         
    if and
    001D:   SURVIVOR_THROW_MOLOTOV_TIMER > SURVIVOR_THROW_MOLOTOV_TIMER2  // (int)
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0
    803A: not  SURVIVER == COOP_ACTOR // (int)
    0@ == 0
    0E45: frame_mod 20
        then
        
        if and
        SURVIVOR_IN_PLAYER_TEAM == 0
        SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 1                        
            then
            if or
            003A:   $VAGINA6[18@] == PLAYER_ACTOR // (int)
            003A:   $VAGINA6[18@] == COOP_ACTOR // (int)            
                then
                if
                actor.Driving(PLAYER_ACTOR)
                    then
                    
                    ///////////////////////////////////////////////////////////////////
                    
                    if or
                    actor.DrivingVehicleType(PLAYER_ACTOR,RHINO_MODEL_NUMBER)
                    actor.DrivingVehicleType(PLAYER_ACTOR,#SWATVAN)
                    actor.DrivingVehicleType(PLAYER_ACTOR,#FBITRUCK)
                    actor.DrivingVehicleType(PLAYER_ACTOR,#SECURICA)
                    actor.DrivingVehicleType(PLAYER_ACTOR,15386)
                    actor.DrivingVehicleType(PLAYER_ACTOR,15331)
                    actor.DrivingVehicleType(PLAYER_ACTOR,15436)
                    actor.DrivingVehicleType(PLAYER_ACTOR,15534)
                        then
                        jump to @SURV_DO_THROW_GOVNO
                        end
                        
                    if
                    actor.DrivingVehicleType(PLAYER_ACTOR,15435)
                        then
                        jump to @SURV_DO_THROW_GOVNO
                        end
                        
                    ///////////////////////////////////////////////////////////////////      
                          
                    end
                end
            end
             
        if or
        $GAMEMODE_HOLD == 1
        $SALVATION_FLAG == 1
            then                            
            if or
            $GAMEMODE_HOLD == 1 
            $SALVATION_FLAG == 1
            $ONMISSION == 1   
            SURVIVOR_MEET_FLAG == 0
            SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 1
            SURVIVOR_MARODER_FLAG == 1
                then
                :SURV_DO_THROW_GOVNO
                0470: 0@ = actor SURVIVER current_weapon
                if and
                not actor.Dead(SURVIVER)
                87D6: not  0@ == SURVIVOR_MELEE_ID // @ == $ (int)                
                    then
                    SURVIVOR_MEL_TRG = -69    
                    0470: SURVIVOR_THROW_PREV_WEAP = actor SURVIVER current_weapon
                    
                    random_int 3@ 0 to 2          
         
                    if 
                    3@ == 0   
                    then   
                    
                    if
                    UNITED_MAP == 0
                    then
                    
                    0781: get_weapon_with_ID 18 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                      
                    actor.GiveWeaponAndAmmo(SURVIVER,18,1)
                    else
                    
                    if
                    $UNITED_VC_FLAG == 1
                    then
                    
                    if
                    STORIES_MAP == 0
                    then
                    
                    0781: get_weapon_with_ID 134 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,134,1)
                    else
                    
                    0781: get_weapon_with_ID 209 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,209,1)
                    end
                    
                    else
                    
                    if
                    STORIES_MAP == 0
                    then
                    
                    0781: get_weapon_with_ID 118 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,118,1)
                    else
                    
                    0781: get_weapon_with_ID 179 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,179,1)
                    end
                    
                    end
                    
                    end
    
                    else
                    
                    if
                    UNITED_MAP == 0
                    then
                    
                    0781: get_weapon_with_ID 16 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                      
                    actor.GiveWeaponAndAmmo(SURVIVER,16,1)
                    else
                    
                    if
                    $UNITED_VC_FLAG == 1
                    then
                    
                    if
                    STORIES_MAP == 0
                    then
                    
                    0781: get_weapon_with_ID 132 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,132,1)
                    else
                    
                    0781: get_weapon_with_ID 207 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,207,1)
                    end
                    
                    else
                    
                    if
                    STORIES_MAP == 0
                    then
                    
                    0781: get_weapon_with_ID 115 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,115,1)
                    else
                    
                    0781: get_weapon_with_ID 177 model_to 0@
    
                    while not model.Available(0@)
                    wait 0
                    model.Load(0@)
                    mload
                    end
                    
                    actor.GiveWeaponAndAmmo(SURVIVER,177,1)
                    end
                    
                    end
                    
                    end
    
                    end  
                    
                    :SURVIVER_SELECT_MOLOTOV_SKIP      
                    
                    SURVIVOR_THROW_MOLOTOV_FLAG = 1                    
                    end
                end
            end 
        end
    end
  
:FUCKMEINMYBIGVAGINA   

////////////////////////////////////////////////Бросание гранат (2)////////////////////////////////////////////////

if
056D:   actor SURVIVER defined
    then
    04DD: 0@ = actor SURVIVER armour
    
    if
    SURV_GVAR_DEBUG == 1
    then
    
    if    
    18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\SURVIVOR_THROW_MOLOTOV_FLAG == 1\3487"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\SURVIVOR_THROW_MOLOTOV_FLAG == 1\3487"
    end
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\SURVIVOR_THROW_MOLOTOV_FLAG == 1\3487"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\SURVIVOR_THROW_MOLOTOV_FLAG == 1\3487"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\SURVIVOR_THROW_MOLOTOV_FLAG == 1\3487"
    end
    
    end
          
    if
    SURVIVOR_THROW_MOLOTOV_FLAG == 1
        then
        if and
        not actor.Dead(SURVIVER)
        80DF: not  actor SURVIVER in_a_car
        0@ == 0
            then
            if
            actor.Animation(SURVIVER) == "WEAPON_throw"   
                then                                                                                         
                
                SURVIVOR_THROW_MOLOTOV_TIMER = 0            
                SURVIVOR_THROW_MOLOTOV_FLAG = 0            
                008B: SURVIVOR_THROW_MOLOTOV_TIMER2 = $SURVIVOR_THROW_TIME // (int)
                008D: SURVIVOR_THROW_MOLOTOV_TIMER2 = integer SURVIVOR_THROW_MOLOTOV_TIMER2 to_float
                random_int 0@ $SURVIVOR_THROW_TIME_MIN $SURVIVOR_THROW_TIME_MAX
                006B: SURVIVOR_THROW_MOLOTOV_TIMER2 *= 0@  // (float)
                008C: SURVIVOR_THROW_MOLOTOV_TIMER2 = float SURVIVOR_THROW_MOLOTOV_TIMER2 to_integer
                
                if and
                0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0 
                $SPECTATING_FLAG == 0
                $SCREWHUD_FLAG == 0
                $PHRASES_OFF_FLAG == 0
                then
                
                gosub @RANDOM_DIALOG_GRENADE_SURV             
                gosub @SURV_NAME_CHECK
                
                09FD: get_gxt_string v$PHRASE3 width_to 3@
                0093: 3@ = integer 3@ to_float
                3@ *= 8.0
                0092: 3@ = float 3@ to_integer
                text.ClearAll()  
                    
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
                
                //gosub @SHOW_FUCKING_VOICE                  
                
                end    
                
                :FUCK111
                wait 0
                
                if
                86EE: not  actor SURVIVER in_group PLAYER_GROUP
                then
                gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
                end              
                
                if or
                not actor.Animation(SURVIVER) == "WEAPON_throw" 
                09DE:   actor SURVIVER entering_car
                jf @FUCK111                             
                
                01B9: set_actor SURVIVER armed_weapon_to SURVIVOR_THROW_PREV_WEAP
                SURVIVOR_MEL_TRG = 0 
                
                32@ = 0
                
                while 32@ < 1999
                wait 0
                
                if
                86EE: not  actor SURVIVER in_group PLAYER_GROUP
                then
                gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
                end  
                
                end
                                       
                end
            else        
            01B9: set_actor SURVIVER armed_weapon_to SURVIVOR_THROW_PREV_WEAP
            SURVIVOR_MEL_TRG = 0        
            SURVIVOR_THROW_MOLOTOV_TIMER = 0            
            SURVIVOR_THROW_MOLOTOV_FLAG = 0        
            008B: SURVIVOR_THROW_MOLOTOV_TIMER2 = $SURVIVOR_THROW_TIME // (int)
            008D: SURVIVOR_THROW_MOLOTOV_TIMER2 = integer SURVIVOR_THROW_MOLOTOV_TIMER2 to_float
            random_int 0@ $SURVIVOR_THROW_TIME_MIN $SURVIVOR_THROW_TIME_MAX
            006B: SURVIVOR_THROW_MOLOTOV_TIMER2 *= 0@  // (float)
            008C: SURVIVOR_THROW_MOLOTOV_TIMER2 = float SURVIVOR_THROW_MOLOTOV_TIMER2 to_integer
            end
        end
    end
    
////////////////////////////////////////////////Агр выжившего на игрока////////////////////////////////////////////////        
    
if and
SURVIVOR_IN_PLAYER_TEAM == 0
SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
$PLAYER_SURVIVOR_SIDE == 1
056D:   actor SURVIVER defined
803A: not  SURVIVER == COOP_ACTOR // (int)
    then
    
    if or
    SURVIVOR_SAW_SHIT == 1
    ZAME_HUENEMY_FLAG == 1
    then
    jump to @RANDOM_SURV_AGRO_SET2
    end
    
    /////////////////////////////////////////////////////////////////////////////////
    
    0@ = 0
    2@ = 1
    
    if and
    CARMA_VERY_BAD_FLAG == 0
    KARMA_SYS_ON_FLAG == 1
    then        
    if
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 80.0 80.0 0 
        then        
        if
        0364:   actor SURVIVER spotted_actor PLAYER_ACTOR
            then        
            if
            CARMA_BAD_POINTS >= 30
                then
                random_int 0@ 0 2000
                2@ = 1000
                else    
                if
                CARMA_BAD_POINTS >= 60
                    then
                    random_int 0@ 0 1000
                    2@ = 500
                    end    
                end                    
            end        
        end        
    end
    
    /////////////////////////////////////////////////////////////////////////////////
    
    if and
    003B:   0@ == 2@  // (int)
    $PEOPLE_ATTACK_PLAYER_FLAG == 0
    then
    jump to @SURV_SKIP_AGRO28
    end        
    
    if or
    SURVIVOR_NAME_KNEW == 1
    SURVIVOR_MARODER_FLAG == 1
    $QUEST_TYPE == 9991
    8364: not  actor SURVIVER spotted_actor PLAYER_ACTOR    
    then
    if or
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
    $QUEST_TYPE == 9991
        then
        jump to @RANDOM_SURV_AGRO_SET2
        else
        jump to @RANDOM_SURV_SKIP_AGRO
        end
    end
    
    if and
    056D:   actor COOP_ACTOR defined
    not COOP_ACTOR == -69
        then
        if
        051A:   actor SURVIVER damaged_by_actor COOP_ACTOR
            then
            jump to @RANDOM_SURV_AGRO_SET2
            end
        end
    
    :SURV_SKIP_AGRO28
    
    if or
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
    $PEOPLE_ATTACK_PLAYER_FLAG == 1
    003B:   0@ == 2@  // (int)
    SURVIVOR_SAW_SHIT == 1
        then
        
        if
        003B:   0@ == 2@  // (int)
        then        
        if and
        SURV_SUSP_TIMES > 5
        not SURVIVOR_MEET_FLAG == 1
            then
            SURV_SUSP_TIMES = 0
            random_int SURV_SUSP_TIMES2 6 14
            text.ShowTextBox('GAME783')
            else
            text.ShowTextBox('GAME788')
            SURV_SUSP_TIMES += 1
            05BF: AS_actor SURVIVER look_at_actor PLAYER_ACTOR 5000 ms
            
            gosub @RANDOM_DIALOG_SURV_SUSP           
            gosub @SURV_NAME_CHECK
            gosub @RAND_SURV_PHRASES_TIMERS_MINUS_SET
                        
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                        
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
            
            //gosub @SHOW_FUCKING_VOICE
            
            jump to @RANDOM_SURV_SKIP_AGRO
            end
        end
        
        :RANDOM_SURV_AGRO_SET2
        0467: clear_actor SURVIVER last_weapon_damage
        077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
        wait 1
        if
        not actor.Dead(SURVIVER)
            then
            SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
            
            if and
            0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0
            not $QUEST_TYPE == 9991
            then
            
            if
            SURVIVOR_SAW_SHIT == 0
            then
            gosub @RANDOM_DIALOG_KILL1_PEOPLE
            else
            gosub @RANDOM_DIALOG_SAW_SHIT
            end
            
            text.ClearAll()
            
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer                                                                      
            
            gosub @SURV_NAME_CHECK                        

            if
            $GAMEMODE_EDITOR == 0
            then
            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
            end 
            
            //gosub @SHOW_FUCKING_VOICE
                                                                            
            end
            
            $SWATS1_DAMAGE_FLAG = 1
            $FERMERS1_DAMAGE_FLAG = 1
            
            0467: clear_actor SURVIVER last_weapon_damage                                 
            077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
            
            /////////////////////////////// 
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"            
            
            $STATS_SURV_AGRED += 1        
                    
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end                
                 
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT70_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"                
                
            if and
            0@ == 0
            1@ >= 200
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH70"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT70_GOT"                    
                end    
                
            ///////////////////////////////   
            
            for 0@ = 0 to 5
            092B: 1@ = group PLAYER_GROUP member 0@
            
            if and
            056D:   actor 1@ defined
            87D6: not  1@ == COOP_ACTOR // @ == $ (int)
            then
            
            if and
            not actor.Driving(1@)
            not actor.Animation(1@) == "CAR_sitpLO"
            044B:   actor 1@ on_foot
            then    
            05E2: AS_actor 1@ kill_actor SURVIVER
            else
            0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
            end
            
            end
                
            end
            
            ///////////////////////////////            
            
            0687: clear_actor SURVIVER task
            wait 10
            05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
            0568: set_actor SURVIVER untargetable 0
            008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
            $VAGINA6_FLAG[18@] = 1
            $VAGINA6_TIME[18@] = 0            
            
            05C1: AS_actor SURVIVER speak_from_audio_table 89
            end
        end
    end
    
:RANDOM_SURV_SKIP_AGRO    
    
////////////////////////////////////////////////Агр выжившего на игрока (2)////////////////////////////////////////////////      

if and
SURVIVOR_IN_PLAYER_TEAM == 0
SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
$PLAYER_SURVIVOR_SIDE == 1
SURVIVOR_MARODER_FLAG == 1
not actor.Dead(PLAYER_ACTOR)
$SPECTATING_FLAG == 0
$SIMULATING_FLAG == 0
$IGNOREALL_FLAG == 0
    then
    
    if
    CARMA_VERY_BAD_FLAG == 1
    then
    if
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
        then
        else
        jump to @RAND_SURV_MARODER_AGR_SKIP
        end
    end
                
    if
    SURVIVOR_IN_PLAYER_TEAM == 0    
        then
        if or
        0364:   actor SURVIVER spotted_actor PLAYER_ACTOR
        $PEOPLE_ATTACK_PLAYER_FLAG == 1
            then
            0467: clear_actor SURVIVER last_weapon_damage
            wait 1
            if
            not actor.Dead(SURVIVER)
                then
                
                $RANDOM_ACTORS_SEE += 1
                
                SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
                gosub @RANDOM_DIALOG_KILL2_PEOPLE
                text.ClearAll()          
                
                09FD: get_gxt_string v$PHRASE3 width_to 3@
                0093: 3@ = integer 3@ to_float
                3@ *= 8.0
                0092: 3@ = float 3@ to_integer  
                
                gosub @SURV_NAME_CHECK
                
                if
                $GAMEMODE_EDITOR == 0
                then
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
                end
                
                //gosub @SHOW_FUCKING_VOICE
                
                0467: clear_actor SURVIVER last_weapon_damage                                 
                077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
                
                /////////////////////////////// 
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"            
                
                $STATS_SURV_AGRED += 1        
                        
                if
                $CHEATED_FLAG == 0 
                then   
                0@ += 1
                end                
                     
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT70_GOT"
                0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"                
                    
                if and
                0@ == 0
                1@ >= 200
                $CHEATED_FLAG == 0
                    then
                    v$ACHIEVEMNT = "ACH70"
                    $ACHIEVEMENT_GOT_FLAG = 1                    
                    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT70_GOT"                    
                    end    
                    
                ///////////////////////////////   
                
                for 0@ = 0 to 5
                092B: 1@ = group PLAYER_GROUP member 0@
                
                if and
                056D:   actor 1@ defined
                87D6: not  1@ == COOP_ACTOR // @ == $ (int)
                then
                
                if and
                not actor.Driving(1@)
                not actor.Animation(1@) == "CAR_sitpLO"
                044B:   actor 1@ on_foot
                then    
                05E2: AS_actor 1@ kill_actor SURVIVER
                else
                0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
                end
                
                end
                    
                end
                
                ///////////////////////////////            
                
                0687: clear_actor SURVIVER task
                wait 10
                05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
                0568: set_actor SURVIVER untargetable 0
                008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
                $VAGINA6_FLAG[18@] = 1
                $VAGINA6_TIME[18@] = 0
                
                05C1: AS_actor SURVIVER speak_from_audio_table 89
                end
            end
        end
    end
    
:RAND_SURV_MARODER_AGR_SKIP

////////////////////////////////////////////////Выдача оружия выжившему от игрока////////////////////////////////////////////////      

if and
056D:   actor SURVIVER defined
not $CHEAT_TYPE_FLAG == 1
    then    
    04DD: 0@ = actor SURVIVER armour           
    if and                      
    SURVIVOR_IN_PLAYER_TEAM == 1
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 0  
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0    
    0E3D: is_key_just_pressed $KEY_GIVE_WEAPON    
    0@ == 0
        then
        if and
        803A: not  SURVIVER == COOP_ACTOR // (int)
        0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
        044B:   actor SURVIVER on_foot
        044B:   actor PLAYER_ACTOR on_foot
            then
            0470: 0@ = actor PLAYER_ACTOR current_weapon
            0470: 1@ = actor SURVIVER current_weapon            
            3@ = 0            
            gosub @RANDOM_SURV_WEAPON_GIVE_CHECK
            if and            
            3@ == 1
            803B: not  0@ == 1@  // (int)
                then                     
                        
//                017B: set_actor SURVIVER weapon 1@ ammo_to 10                                   
                0470: SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID = actor SURVIVER current_weapon
                
                if
                87D6: not  1@ == SURVIVOR_MELEE_ID // @ == $ (int)
                then
                
                if  
                CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1            
                then
                041A: SURVIVOR_WEP_AMMO = actor SURVIVER weapon SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID ammo        
                end
                
                0555: remove_weapon 1@ from_actor SURVIVER
                end                                 
                
                0470: 0@ = actor PLAYER_ACTOR current_weapon
                041A: 1@ = actor PLAYER_ACTOR weapon 0@ ammo
                        
                if and
                $GAMEMODE_HOLD == 0
                $DEFENSE_CHALLENGE_FLAG == 0
                not CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
                then                
                1@ *= 20
                else
                1@ *= 10
                end
                        
                0781: get_weapon_with_ID 0@ model_to 3@                   
        
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                 
                actor.GiveWeaponAndAmmo(SURVIVER,0@,1@)                
                0555: remove_weapon 0@ from_actor PLAYER_ACTOR                
                SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 1                
                gosub @SURV_WRITE_SET_INFO_ABOUT_GIVEN_WEP
                
                text.ShowTextBox('INV156')
                gosub @PLAY_DROP_SOUND2
                wait 0
                end            
            end
        end    
    end
    
////////////////////////////////////////////////Забирание выданного оружия игроком////////////////////////////////////////////////    

if and
056D:   actor SURVIVER defined
not $CHEAT_TYPE_FLAG == 1
    then    
    04DD: 0@ = actor SURVIVER armour        
    if and
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 1  
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0  
    0E3D: is_key_just_pressed $KEY_GIVE_WEAPON  
    0@ == 0
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then
        if and
        0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
        044B:   actor SURVIVER on_foot
        044B:   actor PLAYER_ACTOR on_foot
        then 
    //        gosub @RAND_SURV_CHECK_WEAPONSLOT_SHIT
            if or
            2@ == 0
            not 2@ == 0
                then
                0470: 0@ = actor SURVIVER current_weapon
                041A: 1@ = actor SURVIVER weapon 0@ ammo
                        
                if and
                $GAMEMODE_HOLD == 0
                $DEFENSE_CHALLENGE_FLAG == 0
                then
                1@ /= 20
                else
                1@ /= 10
                end
                           
                0781: get_weapon_with_ID 0@ model_to 3@         
                
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                
                actor.GiveWeaponAndAmmo(PLAYER_ACTOR,0@,1@)            
                0555: remove_weapon 0@ from_actor SURVIVER        
                0781: get_weapon_with_ID SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID model_to 3@          
                
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                
                if
                not CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
                then
                actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,99999)
                else
                actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,SURVIVOR_WEP_AMMO)
                end
                          
                SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0                
                gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP
                
                text.ShowTextBox('INV157')
                gosub @PLAY_PICKUP_SOUND2
                wait 0      
                end
            end
        end
    end
    
if and
0A4B:   controls_set_to_joystick
$GAMEMODE_HOLD == 1
then

////////////////////////////////////////////////Выдача оружия выжившему от игрока (удержание с геймпада)////////////////////////////////////////////////      

if and
056D:   actor SURVIVER defined
not $CHEAT_TYPE_FLAG == 1
    then    
    04DD: 0@ = actor PLAYER_ACTOR armour           
    if and                      
    SURVIVOR_IN_PLAYER_TEAM == 1
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 0  
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0    
    0E3E: is_button_just_pressed 0 button 15    
    0@ == 0
        then
        if and
        803A: not  SURVIVER == COOP_ACTOR // (int)
        0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
        044B:   actor SURVIVER on_foot
        044B:   actor PLAYER_ACTOR on_foot
            then
            0470: 0@ = actor PLAYER_ACTOR current_weapon
            0470: 1@ = actor SURVIVER current_weapon            
            3@ = 0            
            gosub @RANDOM_SURV_WEAPON_GIVE_CHECK
            if and            
            3@ == 1
            803B: not  0@ == 1@  // (int)
                then                     
                        
//                017B: set_actor SURVIVER weapon 1@ ammo_to 10                                   
                0470: SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID = actor SURVIVER current_weapon
                
                if
                87D6: not  1@ == SURVIVOR_MELEE_ID // @ == $ (int)
                then
                0555: remove_weapon 1@ from_actor SURVIVER
                end
                
                if  
                CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1            
                then
                041A: SURVIVOR_WEP_AMMO = actor SURVIVER weapon SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID ammo
                end
                
                0470: 0@ = actor PLAYER_ACTOR current_weapon
                041A: 1@ = actor PLAYER_ACTOR weapon 0@ ammo
                        
                if and
                $GAMEMODE_HOLD == 0
                $DEFENSE_CHALLENGE_FLAG == 0
                not CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
                then                
                1@ *= 20
                else
                1@ *= 10
                end
                        
                0781: get_weapon_with_ID 0@ model_to 3@                   
        
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                 
                actor.GiveWeaponAndAmmo(SURVIVER,0@,1@)                
                0555: remove_weapon 0@ from_actor PLAYER_ACTOR                
                SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 1                
                gosub @SURV_WRITE_SET_INFO_ABOUT_GIVEN_WEP
                
                text.ShowTextBox('INV156')
                gosub @PLAY_DROP_SOUND2
                wait 0
                end            
            end
        end    
    end
    
////////////////////////////////////////////////Забирание выданного оружия игроком (удержание с геймпада)////////////////////////////////////////////////    

if and
056D:   actor SURVIVER defined
not $CHEAT_TYPE_FLAG == 1
    then    
    04DD: 0@ = actor SURVIVER armour        
    if and
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 1  
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0  
    0E3E: is_button_just_pressed 0 button 15  
    0@ == 0
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then
        if and
        0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
        044B:   actor SURVIVER on_foot
        044B:   actor PLAYER_ACTOR on_foot
        then 
    //        gosub @RAND_SURV_CHECK_WEAPONSLOT_SHIT
            if or
            2@ == 0
            not 2@ == 0
                then
                0470: 0@ = actor SURVIVER current_weapon
                041A: 1@ = actor SURVIVER weapon 0@ ammo
                        
                if and
                $GAMEMODE_HOLD == 0
                $DEFENSE_CHALLENGE_FLAG == 0
                then
                1@ /= 20
                else
                1@ /= 10
                end
                           
                0781: get_weapon_with_ID 0@ model_to 3@         
                
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                
                actor.GiveWeaponAndAmmo(PLAYER_ACTOR,0@,1@)            
                0555: remove_weapon 0@ from_actor SURVIVER        
                0781: get_weapon_with_ID SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID model_to 3@          
                
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                
                actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,99999)          
                SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0                
                gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP
                
                text.ShowTextBox('INV157')
                gosub @PLAY_PICKUP_SOUND2
                wait 0      
                end
            end
        end
    end
    
end            

////////////////////////////////////////////////Выдача выжившему армора от игрока////////////////////////////////////////////////             

if and
056D:   actor SURVIVER defined
not $CHEAT_TYPE_FLAG == 1
not $PANEL_OPEN == 1
    then    
    04DD: 0@ = actor SURVIVER armour        
    if and
    06EE:   actor SURVIVER in_group PLAYER_GROUP
    $GAMEMODE_WAR == 0
    $GAMEMODE_CRAZY == 0
    $GAMEMODE_EDITOR == 0  
    0E3D: is_key_just_pressed $KEY_GIVE_ARMOR     
    0@ == 0     
        then
        04DD: 0@ = actor PLAYER_ACTOR armour     
        2@ = actor.Health(SURVIVER)             
        if and    
        0@ > 5
        2@ <= 1000
        0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
        not actor.Driving(PLAYER_ACTOR)
            then
            
            if
            803A: not  SURVIVER == COOP_ACTOR // (int)
            then    
            04DD: 0@ = actor PLAYER_ACTOR armour
            0@ *= 5            
            04DD: 1@ = actor PLAYER_ACTOR armour
            1@ -= 1000
            actor.AddArmour(PLAYER_ACTOR,1@)             
            2@ = actor.Health(SURVIVER)            
            005A: 2@ += 0@  // (int)              
            actor.Health(SURVIVER) = 2@
            else
            04DD: 1@ = actor PLAYER_ACTOR armour
            035F: actor SURVIVER armour += 1@
            1@ -= 1000
            actor.AddArmour(PLAYER_ACTOR,1@)
            end
            
            text.ShowTextBox('INV158')
            gosub @PLAY_DROP_SOUND2                             
            end         
        end
    end

////////////////////////////////////////////////Предание союзника игроком////////////////////////////////////////////////                
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
056D:   actor SURVIVER defined
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    then
    if and
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0
    not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
    $GAMEMODE_CRAZY == 0
        then 
        if and 
        0457:   player PLAYER_CHAR aiming_at_actor SURVIVER
        0E3D: is_key_just_pressed $KEY_BETRAY         
        not $MUTATION_ACTIVE == 0
        not $GAMEMODE_STORYLINE == 1
        $GAMEMODE_WAR == 0
        $GAMEMODE_EDITOR == 0
        $GAMEMODE_HOLD == 0
        $DEFENSE_CHALLENGE_FLAG == 0
            then
            
            if
            075C:   marker SURVIVOR_STAY_MARK enabled
            then
            marker.Disable(SURVIVOR_STAY_MARK)
            end
            
            if
            18@ == 0
            then
            $SURV1_STAY_FLAG = 0
            end
                        
            if
            18@ == 1
            then
            $SURV2_STAY_FLAG = 0
            end
                        
            if
            18@ == 2
            then
            $SURV3_STAY_FLAG = 0
            end
                        
            if
            18@ == 3
            then
            $SURV4_STAY_FLAG = 0
            end
                        
            if
            18@ == 4
            then
            $SURV5_STAY_FLAG = 0
            end
            
            if
            SURVIVOR_ATTACK_TIMER == -1
            then
            SURVIVOR_ATTACK_TIMER = 0
            actor.LockInCurrentPosition(SURVIVER,false)
            end
            
            if and
            KARMA_SYS_ON_FLAG == 1
            CARMA_VERY_BAD_FLAG == 0
            then
            CARMA_BAD_POINTS += 10
            Audiostream.Loop($KARMA_BAD,0)
            Audiostream.PerformAction($KARMA_BAD, PLAY)
            Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
            end
                          
            gosub @RANDOM_DIALOG_LET_GO_PEOPLE           
            text.ClearAll()         
            
            /////////////////////////////// 
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"            
            
            $STATS_TEAMMATE_BETRAYS_TO += 1        
                    
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end                
                 
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"                
                
            if and
            0@ == 0
            1@ >= 5
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH69"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"                    
                end
                
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT75_GOT"                
                
            if and
            0@ == 0
            $MINUTES_PLAYED >= 50
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH75"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT75_GOT"                    
                end             
                
            ///////////////////////////////   
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0  
            
            v$NAME1 = "N_ME"
            0665: get_actor PLAYER_ACTOR model_to 1@ 
            if
            1@ > 10000
            then
            v$NAME1 = "N_"
            end
            0AD3: v$NAME2 = format "%d" 1@
            098B: v$NAME3 = v$NAME1 + v$NAME2
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end 
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0                                       
            
            SURVIVOR_IN_PLAYER_TEAM = 0
            
            if and
            0800:   in_two_players_mode
            07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            003A:   SURVIVER == COOP_ACTOR // (int)
            then            
            0EA1: disable_second_player_restore_camera 1
            end
            
            06C9: remove_actor SURVIVER from_group
            
            0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
            
            if
            0@ == 1
            then
            audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
            end
            
            if
            UNITED_MAP == 0
            then
            04D8: set_actor SURVIVER drowns_in_water 0
            end
            
            Actor.SetWalkStyle(SURVIVER, "surv5")
            
            gosub @RANDOM_PEOPLE1_GROUP_CREATE
            
            random_int 0@ 0 to 2
            
            if
            PERK_CHARISMA > 1
            then
            0@ = 1
            end
            
            if
            0@ == 0
            then
            
            SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
            gosub @RANDOM_DIALOG_LET_GO_ANGER_PEOPLE
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0              
            
            0467: clear_actor SURVIVER last_weapon_damage                                 
            077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
            
            ///////////////////////////////
            
            for 0@ = 0 to 5
            092B: 1@ = group PLAYER_GROUP member 0@
            
            if
            056D:   actor 1@ defined
            then
            
            if and
            not actor.Driving(1@)
            not actor.Animation(1@) == "CAR_sitpLO"
            044B:   actor 1@ on_foot
            then    
            05E2: AS_actor 1@ kill_actor SURVIVER
            else
            0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
            end
                       
            end
            
            ///////////////////////////////
                
            end                                    
            
            0687: clear_actor SURVIVER task
            wait 10
            05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
            0568: set_actor SURVIVER untargetable 0
            008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
            $VAGINA6_FLAG[18@] = 1
            $VAGINA6_TIME[18@] = 0
            
            05C1: AS_actor SURVIVER speak_from_audio_table 89
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0
            
            else  
                                                
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161                            
            
            0687: clear_actor SURVIVER task
            wait 10    
            05B9: AS_actor SURVIVER stay_idle 100 ms
            wait 100
            
            gosub @RANDOM_DIALOG_BETRAY_FROM_OTVET
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0            
               
            end                                                                                                                                                    
              
            end
        end
    end    
    
////////////////////////////////////////////////Предание союзником игрока////////////////////////////////////////////////                 

if
803A: not  SURVIVER == COOP_ACTOR // (int)
then
if and
056D:   actor SURVIVER defined
not actor.Dead(PLAYER_ACTOR)
not $SAVEPLACE_ON == 1
not CAMP_RAID_FLAG == 1
not $SOUND_EFFECT1_FLAG == 1
not $NEAR_SALV_POINT == 1
not SURV_SECOND_WAVE_EVACUATION_STARTED == 1
not $CAMP_SPOTTED_FLAG == 1
    then       
    if and
    SURVIVOR_IN_PLAYER_TEAM == 1
    SURVIVOR_BETRAY_CAN == 1
    $SALVATION_FLAG == 0
    $RADIO_HELP_FLAG == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    not actor.Driving(PLAYER_ACTOR)
    84AD: not  actor PLAYER_ACTOR in_water
        then                   
        if and
//        00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 100.0 100.0 sphere 0
//        80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 10.0 10.0 sphere 0
//        8364: not  actor PLAYER_ACTOR spotted_actor SURVIVER
        82CB: not  actor SURVIVER bounding_sphere_visible
        not $SAVESTATUS == 1
        not $SAVESTATUS_TRUE == 1
        not $SAVING_DELAY == 1
        not $INT_ENTERING_FLAG == 1
        not $CAMP_SPOTTED_FLAG_SAVE == 1        
            then
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
                    
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
                    
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
                    
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
                    
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
            
            gosub @SURVIVOR_CAMP_CHECK_ZONE 
            if and
            002C:   SURVIVOR_BETRAY_TIMER >= SURVIVOR_BETRAY_TIMER2  // (int)
            $PLAYER_OUT_CAR_TIMER > 140
            SURVIVOR_BLEEDING_FLAG == 0
            2@ == 0
            $ENTERED_CAMP_NUMBER == -1
            $ENTERED_BCAMP_NUMBER == -1
            not 0@ == 1
            06EE:   actor SURVIVER in_group PLAYER_GROUP
                then
                
                random_int 9@ 0 to 2
                
                if
                9@ == 0
                then
                jump to @TEAMMATE_DEL
                end
                
                :SURVIVOR_BETRAY_ANGRY                                              
                
                SURVIVOR_IN_PLAYER_TEAM = 0
                
                if and
                0800:   in_two_players_mode
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                003A:   SURVIVER == COOP_ACTOR // (int)
                then            
                0EA1: disable_second_player_restore_camera 1
                end
                
                06C9: remove_actor SURVIVER from_group  
                
                if
                UNITED_MAP == 0
                then 
                04D8: set_actor SURVIVER drowns_in_water 0
                end
                
                Actor.SetWalkStyle(SURVIVER, "surv5")  
                
                /////////////////////////////// 
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_FROM"            
                
                $STATS_TEAMMATE_BETRAYS_FROM += 1        
                        
                if
                $CHEATED_FLAG == 0 
                then   
                0@ += 1
                end                
                     
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_FROM"    
                    
                ///////////////////////////////   
                
                0AF0: 3@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT55_GOT"
                
                if and
                3@ == 0
                0@ >= 25
                $CHEATED_FLAG == 0
                    then
                    v$ACHIEVEMNT = "ACH55"
                    $ACHIEVEMENT_GOT_FLAG = 1
                                            
                    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT55_GOT"
                    end     
                
                gosub @RANDOM_PEOPLE1_GROUP_CREATE                   
                                
                if
                9@ == 0
                    then                                        
                                    
                    gosub @RANDOM_DIALOG_BETRAY_TO_PLAYER
                    text.ClearAll()
                    
                    gosub @SURV_NAME_CHECK
                    
                    09FD: get_gxt_string v$BPHRASE3 width_to 9@
                    0093: 9@ = integer 9@ to_float
                    9@ *= 8.0
                    0092: 9@ = float 9@ to_integer                                  
                    
                    32@ = 0                                                
                    
                    0467: clear_actor SURVIVER last_weapon_damage                                 
                    077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat 
                    
                    for 0@ = 0 to 5
                    092B: 1@ = group PLAYER_GROUP member 0@
                    
                    if
                    056D:   actor 1@ defined
                    then
                    
                    if and
                    not actor.Driving(1@)
                    not actor.Animation(1@) == "CAR_sitpLO"
                    044B:   actor 1@ on_foot
                    then    
                    05E2: AS_actor 1@ kill_actor SURVIVER
                    else
                    0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
                    end
                    
                    end
                        
                    end                
                    
                    0687: clear_actor SURVIVER task
                    wait 10
                    05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
                    0568: set_actor SURVIVER untargetable 0
                    008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
                    $VAGINA6_FLAG[18@] = 1
                    $VAGINA6_TIME[18@] = 0
                    
                    05C1: AS_actor SURVIVER speak_from_audio_table 89
                    SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
                    
                    0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                    
                    if
                    0@ == 1
                    then
                    audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
                    end
                    
                    $PHRASES_OFF_FLAG = 1                               
                    
                    repeat
                    wait 0  
                    
                    if
                    86EE: not  actor SURVIVER in_group PLAYER_GROUP
                    then
                    gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
                    end
                    
                    gosub @SURV_NAME_CHECK
                    
                    0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                    
                    if or
                    actor.Dead(SURVIVER)
                    $SAVESTATUS_TRUE == 1
                    $SAVESTATUS == 1
                    $PANEL_OPEN == 1
                        then
                        $PHRASES_OFF_FLAG = 0
                        break
                        end
                    
                    until 002D:   32@ >= 9@  // (int)
                    
                    $PHRASES_OFF_FLAG = 0
                    
                    else
                    
                    054E: clear_actor SURVIVER damage
                    
                    gosub @RANDOM_DIALOG_BETRAY_TO_PLAYER2
                    text.ClearAll()
                    
                    gosub @SURV_NAME_CHECK
                    
                    09FD: get_gxt_string v$BPHRASE3 width_to 9@
                    0093: 9@ = integer 9@ to_float
                    9@ *= 8.0
                    0092: 9@ = float 9@ to_integer
                    
                    32@ = 0                  
                    
                    0687: clear_actor SURVIVER task
                    wait 10
                    05B9: AS_actor SURVIVER stay_idle 100 ms
                    wait 100
                    
                    if or
                    0449:   actor SURVIVER in_a_car
                    actor.Driving(SURVIVER)
                    actor.Animation(SURVIVER) == "CAR_sitpLO"
                    then
                    05DE: AS_actor SURVIVER walk_around_ped_path                                                      
//                    0633: AS_actor SURVIVER exit_car
                    end
                    
                    0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                    
                    if
                    0@ == 1
                    then
                    audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
                    end
                    
                    $PHRASES_OFF_FLAG = 1                
                    
                    repeat
                    wait 0 
                    
                    if
                    86EE: not  actor SURVIVER in_group PLAYER_GROUP
                    then
                    gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
                    end
                    
                    gosub @SURV_NAME_CHECK 
                    
                    0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                    
                    if or
                    actor.Dead(SURVIVER)
                    $SAVESTATUS_TRUE == 1
                    $SAVESTATUS == 1
                    $PANEL_OPEN == 1
                        then
                        $PHRASES_OFF_FLAG = 0
                        break
                        end
                    
                    until 002D:   32@ >= 9@  // (int)
                    
                    $PHRASES_OFF_FLAG = 0                                            
                    
                    end                                                                                                                                                             
                end
            end
        end
    end
end       

////////////////////////////////////////////////Команда союзнику "оставаться в лагере"////////////////////////////////////////////////

if
SURV_GVAR_DEBUG == 1
then

if    
18@ == 0
    then
    0B00: delete_file "surv0-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv0-debug.ini" section "SCR" key "0\MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1\4108"
    end
    
    if
    18@ == 1
    then
    0B00: delete_file "surv1-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv1-debug.ini" section "SCR" key "1\MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1\4108"
    end                                                                                                             
    
    if
    18@ == 2
    then
    0B00: delete_file "surv2-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv2-debug.ini" section "SCR" key "2\MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1\4108"
    end
    
    if
    18@ == 3
    then
    0B00: delete_file "surv3-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv3-debug.ini" section "SCR" key "3\MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1\4108"
    end
    
    if
    18@ == 4
    then
    0B00: delete_file "surv4-debug.ini"  // IF and SET
    0AF1: write_int 28 to_ini_file "surv4-debug.ini" section "SCR" key "4\MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1\4108"
    end
    
end

if
MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
    then
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
            
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
            
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
            
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
            
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if and
    2@ == 0
    SURVIVOR_IN_PLAYER_TEAM == 1
        then
        
        if
        0449:   actor SURVIVER in_a_car
        then        
        
        if
        06EE:   actor SURVIVER in_group PLAYER_GROUP
        then
        
        if and
        0800:   in_two_players_mode
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        003A:   SURVIVER == COOP_ACTOR // (int)
        then            
        0EA1: disable_second_player_restore_camera 1        
        if and
        COOP_ACTIVE_FLAG == 1
        MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
        $GAMEMODE_STORYLINE == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            then
            0337: set_actor SURVIVER visibility 0
            0568: set_actor SURVIVER untargetable 1
            actor.SetImmunities(SURVIVER,1,1,1,1,1)
            actor.Health(SURVIVER) = 9999
            0619: enable_actor SURVIVER collision_detection 0
            end        
        end
        
        06C9: remove_actor SURVIVER from_group        
        end
        
        wait 0
        
        0633: AS_actor SURVIVER exit_car
        
        repeat
        wait 0
        
        if and
        0E45: frame_mod 15
        8E4A: not is_char_exiting_any_car SURVIVER
            then
            0633: AS_actor SURVIVER exit_car
            end
        
        until 8449: not  actor SURVIVER in_a_car
        
        end
        
        if
        044B:   actor SURVIVER on_foot
        then
        0687: clear_actor SURVIVER task
        end
        
        wait 10
        05B9: AS_actor SURVIVER stay_idle 100 ms
        wait 100
        if
        06EE:   actor SURVIVER in_group PLAYER_GROUP
        then
        
        if and
        0800:   in_two_players_mode
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        003A:   SURVIVER == COOP_ACTOR // (int)
        then            
        0EA1: disable_second_player_restore_camera 1
        if and
        COOP_ACTIVE_FLAG == 1
        MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
        $GAMEMODE_STORYLINE == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            then
            0337: set_actor SURVIVER visibility 0
            0568: set_actor SURVIVER untargetable 1
            actor.SetImmunities(SURVIVER,1,1,1,1,1)
            actor.Health(SURVIVER) = 9999
            0619: enable_actor SURVIVER collision_detection 0
            end 
        end
        
        06C9: remove_actor SURVIVER from_group
        end
                
        if
        18@ == 0
        then
        $SURV1_STAY_FLAG = 1
        end
                    
        if
        18@ == 1
        then
        $SURV2_STAY_FLAG = 1
        end
                    
        if
        18@ == 2
        then
        $SURV3_STAY_FLAG = 1
        end
                    
        if
        18@ == 3
        then
        $SURV4_STAY_FLAG = 1
        end
                    
        if
        18@ == 4
        then
        $SURV5_STAY_FLAG = 1
        end
        
        if
        not $ENTERED_CAMP_NUMBER == -1
        then
        008B: 8@ = $ENTERED_CAMP_NUMBER // (int)
        else
        8@ = 69
        end
        
        SURVIVOR_STAY_MARK = marker.CreateAboveActor(SURVIVER)
        07E0: set_marker SURVIVOR_STAY_MARK type_to 1
        0165: set_marker SURVIVOR_STAY_MARK color_to 1
        marker.SetIconSize(SURVIVOR_STAY_MARK,2)
        018B: set_marker SURVIVOR_STAY_MARK radar_mode 2
        
        if
        SURVIVOR_ATTACK_TIMER == -1
        then
        actor.LockInCurrentPosition(SURVIVER,true)
        end
        
        if and
        COOP_ACTIVE_FLAG == 1
        MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
        $GAMEMODE_STORYLINE == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            then
            018B: set_marker SURVIVOR_STAY_MARK radar_mode 0
            end
        
        end
    end
    
////////////////////////////////////////////////Обратно возвращаем союзника в группу игрока после квеста////////////////////////////////////////////////

if and
MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 2
SURVIVOR_IN_PLAYER_TEAM == 1
    then
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
            
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
            
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
            
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
            
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if and
    2@ == 1    
    86EE: not  actor SURVIVER in_group PLAYER_GROUP
        then
        
        0631: put_actor SURVIVER in_group PLAYER_GROUP
        
        if and
        COOP_ACTIVE_FLAG == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        0687: clear_actor SURVIVER task
        0EA0: set_actor_second_player SURVIVER enable_camera 1 separate_cars 0
        0084: COOP_ACTOR = SURVIVER // (int)
        
        if
        not SURVIVOR_2P_FLAG_WEP == 1
        then
        SURVIVOR_2P_FLAG_WEP = 1
        048F: actor SURVIVER remove_weapons
        09F8: give_player2_weapons_of_player1
        end
        
        if and
        COOP_ACTIVE_FLAG == 1
        $GAMEMODE_STORYLINE == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            then
            0337: set_actor SURVIVER visibility 1
            0568: set_actor SURVIVER untargetable 0
            actor.SetImmunities(SURVIVER,0,0,0,0,0)
            0619: enable_actor SURVIVER collision_detection 1
            end                
        
        end
        
        081A: set_actor SURVIVER weapon_skill_to 2
        0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
        Actor.WeaponAccuracy(SURVIVER) = 100
        
        if
        075C:   marker SURVIVOR_STAY_MARK enabled
        then
        marker.Disable(SURVIVOR_STAY_MARK)
        end
                
        if
        18@ == 0
        then
        $SURV1_STAY_FLAG = 0
        end
                    
        if
        18@ == 1
        then
        $SURV2_STAY_FLAG = 0
        end
                    
        if
        18@ == 2
        then
        $SURV3_STAY_FLAG = 0
        end
                    
        if
        18@ == 3
        then
        $SURV4_STAY_FLAG = 0
        end
                    
        if
        18@ == 4
        then
        $SURV5_STAY_FLAG = 0
        end
        
        if
        SURVIVOR_ATTACK_TIMER == -1
        then
        SURVIVOR_ATTACK_TIMER = 0
        actor.LockInCurrentPosition(SURVIVER,false)
        end
        
        end
    end        

if and
056D:   actor SURVIVER defined
SURVIVOR_IN_PLAYER_TEAM == 1
not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
not $ENEMY_ZONE_IN == 1
not $MUTATION_ACTIVE == 0
    then    
    if and
    $SALVATION_FLAG == 0
    $RADIO_HELP_FLAG == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    not actor.Driving(PLAYER_ACTOR)
    not actor.Driving(SURVIVER)
    84AD: not  actor PLAYER_ACTOR in_water
        then
        if and
        00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0        
        0457:   player PLAYER_CHAR aiming_at_actor SURVIVER
        0AB0:   key_pressed 20
        SURVIVOR_BLEEDING_FLAG == 0
        89DE: not  actor SURVIVER entering_car
        8449: not  actor SURVIVER in_a_car
            then
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
            
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
            
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
            
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
            
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
            
            if and
            not $SAVEPLACE_ON == 1
            2@ == 0
            then
            jump to @SKIP_EOPRWEOPR2
            end
            
            :SURV_STAY_AUTOMATIC
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
            
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
            
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
            
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
            
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
             
            if        
            2@ == 0
                then
                
                /////////////////////////////////////////////////////////////////////////////////                                                                              
                
                0687: clear_actor SURVIVER task
                wait 10
                05B9: AS_actor SURVIVER stay_idle 100 ms
                wait 100
                
                if and
                0800:   in_two_players_mode
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                003A:   SURVIVER == COOP_ACTOR // (int)
                then            
                0EA1: disable_second_player_restore_camera 1
                end
                
                06C9: remove_actor SURVIVER from_group
                
                if
                18@ == 0
                then
                $SURV1_STAY_FLAG = 1
                end
                    
                if
                18@ == 1
                then
                $SURV2_STAY_FLAG = 1
                end
                    
                if
                18@ == 2
                then
                $SURV3_STAY_FLAG = 1
                end
                    
                if
                18@ == 3
                then
                $SURV4_STAY_FLAG = 1
                end
                    
                if
                18@ == 4
                then
                $SURV5_STAY_FLAG = 1
                end
                
                if
                not $ENTERED_CAMP_NUMBER == -1
                then
                008B: 8@ = $ENTERED_CAMP_NUMBER // (int)
                else
                8@ = 69
                end
                
                SURVIVOR_STAY_MARK = marker.CreateAboveActor(SURVIVER)
                07E0: set_marker SURVIVOR_STAY_MARK type_to 1
                0165: set_marker SURVIVOR_STAY_MARK color_to 1
                marker.SetIconSize(SURVIVOR_STAY_MARK,2)
                018B: set_marker SURVIVOR_STAY_MARK radar_mode 2
                
                if
                $ACTIVE_INTERIOR > 0
                then
                0792: disembark_instantly_actor SURVIVER
                actor.LockInCurrentPosition(SURVIVER,true)
                SURVIVOR_ATTACK_TIMER = -1
                end
                
                /////////////////////////////////////////////////////////////////////////////////
                
                gosub @RANDOM_DIALOG_STAY_HERE_MISSION
                text.ClearAll()
                    
                gosub @SURV_NAME_CHECK
                    
                09FD: get_gxt_string v$BPHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer
                    
                32@ = 0                                  
                    
                $PHRASES_OFF_FLAG = 1                
                    
                repeat
                wait 0 
                                    
                gosub @SURV_NAME_CHECK 
                
                if
                00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 175.0 175.0 0
                then    
                0384: show_text_1string GXT v$BPHRASE3 string v$NAME3 time 9@ 1
                else
                break
                end
                    
                if or
                actor.Dead(SURVIVER)
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                $PANEL_OPEN == 1
                    then
                    $PHRASES_OFF_FLAG = 0
                    break
                    end
                    
                until 002D:   32@ >= 9@  // (int)
                    
                $PHRASES_OFF_FLAG = 0
                
                /////////////////////////////////////////////////////////////////////////////////
                
                else
                
                /////////////////////////////////////////////////////////////////////////////////                               
                
                0631: put_actor SURVIVER in_group PLAYER_GROUP
                
                if and
                COOP_ACTIVE_FLAG == 1
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                then
                0687: clear_actor SURVIVER task
                0EA0: set_actor_second_player SURVIVER enable_camera 1 separate_cars 0
                0084: COOP_ACTOR = SURVIVER // (int)
                
                if
                not SURVIVOR_2P_FLAG_WEP == 1
                then
                SURVIVOR_2P_FLAG_WEP = 1
                048F: actor SURVIVER remove_weapons
                09F8: give_player2_weapons_of_player1
                end                                
                
                end
                
                081A: set_actor SURVIVER weapon_skill_to 2
                0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
                Actor.WeaponAccuracy(SURVIVER) = 100
                
                if
                075C:   marker SURVIVOR_STAY_MARK enabled
                then
                marker.Disable(SURVIVOR_STAY_MARK)
                end
                
                if
                18@ == 0
                then
                $SURV1_STAY_FLAG = 0
                end
                    
                if
                18@ == 1
                then
                $SURV2_STAY_FLAG = 0
                end
                    
                if
                18@ == 2
                then
                $SURV3_STAY_FLAG = 0
                end
                    
                if
                18@ == 3
                then
                $SURV4_STAY_FLAG = 0
                end
                    
                if
                18@ == 4
                then
                $SURV5_STAY_FLAG = 0
                end
                
                if
                SURVIVOR_ATTACK_TIMER == -1
                then
                SURVIVOR_ATTACK_TIMER = 0
                actor.LockInCurrentPosition(SURVIVER,false)
                end
                
                /////////////////////////////////////////////////////////////////////////////////
                
                gosub @RANDOM_DIALOG_UNSTAY_HERE_MISSION
                text.ClearAll()
                    
                gosub @SURV_NAME_CHECK
                    
                09FD: get_gxt_string v$BPHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer
                    
                32@ = 0                                              
                    
                $PHRASES_OFF_FLAG = 1                
                    
                repeat
                wait 0 
                                    
                gosub @SURV_NAME_CHECK 
                    
                0384: show_text_1string GXT v$BPHRASE3 string v$NAME3 time 9@ 1
                    
                if or
                actor.Dead(SURVIVER)
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                $PANEL_OPEN == 1
                    then
                    $PHRASES_OFF_FLAG = 0
                    break
                    end
                    
                until 002D:   32@ >= 9@  // (int)
                    
                $PHRASES_OFF_FLAG = 0
                
                /////////////////////////////////////////////////////////////////////////////////
                                                                                                                                                                                                                        
                end
            end
        end
    end
    
:SKIP_EOPRWEOPR2    
    
////////////////////////////////////////////////Агр союзника на игрока вследствии friendly fire////////////////////////////////////////////////                            
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
056D:   actor SURVIVER defined
803A: not  SURVIVER == COOP_ACTOR // (int)
    then
    if and
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0
    not $MUTATION_ACTIVE == 0
    not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
    not $GAMEMODE_STORYLINE == 1
    $SALVATION_FLAG == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_CRAZY == 0
    $GAMEMODE_EDITOR == 0
        then 
        if 
        002C:   SURVIVOR_PLAYER_DAMAGE_COUNT >= SURVIVOR_TEAMFIRE_LEAVE  // (int)
            then
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
                    
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
                    
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
                    
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
                    
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
            
            if
            2@ == 1
            then
            
            if
            075C:   marker SURVIVOR_STAY_MARK enabled
            then
            marker.Disable(SURVIVOR_STAY_MARK)
            end
            
            if
            18@ == 0
            then
            $SURV1_STAY_FLAG = 0
            end
                        
            if
            18@ == 1
            then
            $SURV2_STAY_FLAG = 0
            end
                        
            if
            18@ == 2
            then
            $SURV3_STAY_FLAG = 0
            end
                        
            if
            18@ == 3
            then
            $SURV4_STAY_FLAG = 0
            end
                        
            if
            18@ == 4
            then
            $SURV5_STAY_FLAG = 0
            end
            
            if
            SURVIVOR_ATTACK_TIMER == -1
            then
            SURVIVOR_ATTACK_TIMER = 0
            actor.LockInCurrentPosition(SURVIVER,false)
            end
            
            end
            
            if and
            KARMA_SYS_ON_FLAG == 1
            CARMA_VERY_BAD_FLAG == 0
            then
            CARMA_BAD_POINTS += 5
            Audiostream.Loop($KARMA_BAD,0)
            Audiostream.PerformAction($KARMA_BAD, PLAY)
            Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
            end
            
            if
            075C:   marker SURVIVOR_STAY_MARK enabled
            then
            marker.Disable(SURVIVOR_STAY_MARK)
            end                                              
            
            SURVIVOR_IN_PLAYER_TEAM = 0
            
            if and
            0800:   in_two_players_mode
            07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            003A:   SURVIVER == COOP_ACTOR // (int)
            then            
            0EA1: disable_second_player_restore_camera 1
            end
            
            06C9: remove_actor SURVIVER from_group  
            
            if
            UNITED_MAP == 0
            then
            04D8: set_actor SURVIVER drowns_in_water 0
            end
            
            Actor.SetWalkStyle(SURVIVER, "surv5")
            
            gosub @RANDOM_PEOPLE1_GROUP_CREATE          

            SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
            gosub @RANDOM_DIALOG_BETRAY_FROM_PLAYER
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0  
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0            
            
            0467: clear_actor SURVIVER last_weapon_damage                                 
            077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat   
            
            /////////////////////////////// 
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"        
        
            $STATS_TEAMMATE_BETRAYS_TO += 1        
                
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end            
             
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"                
                
            if and
            0@ == 0
            1@ >= 5
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH69"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"                    
                end                                                           
            
            ///////////////////////////////                                                                                                                                        
              
            end
        end
    end
    
////////////////////////////////////////////////Предание союзника игроком (игрок стал бандитом)////////////////////////////////////////////////                
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
SURVIVOR_MARODER_FLAG == 0
056D:   actor SURVIVER defined
    then
    if and
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0
    not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then 
        if and 
        CARMA_VERY_BAD_FLAG == 1  
        not $MUTATION_ACTIVE == 0
        not $GAMEMODE_STORYLINE == 1
        $GAMEMODE_WAR == 0
        $GAMEMODE_EDITOR == 0
        $GAMEMODE_HOLD == 0
        $DEFENSE_CHALLENGE_FLAG == 0
            then                                               
            
            /////////////////////////////// 
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            
            $STATS_TEAMMATE_BETRAYS_TO += 1        
                    
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end                
                 
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"                
                
            if and
            0@ == 0
            1@ >= 5
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH69"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"                    
                end                             
                
            ///////////////////////////////                                                                  
            
            SURVIVOR_IN_PLAYER_TEAM = 0
            
            if and
            0800:   in_two_players_mode
            07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            003A:   SURVIVER == COOP_ACTOR // (int)
            then            
            0EA1: disable_second_player_restore_camera 1
            end
            
            06C9: remove_actor SURVIVER from_group
            
            0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
            
            if
            0@ == 1
            then
            audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
            end
            
            if
            UNITED_MAP == 0
            then
            04D8: set_actor SURVIVER drowns_in_water 0
            end
            
            Actor.SetWalkStyle(SURVIVER, "surv5")
            
            gosub @RANDOM_PEOPLE1_GROUP_CREATE
            
            random_int 0@ 0 to 2
            
            if
            PERK_CHARISMA > 1
            then
            0@ = 1
            end
            
            if
            0@ == 0
            then
            
            SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
            gosub @RANDOM_DIALOG_PLAYER_BECOME_BANDIT_ANGER_PEOPLE
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0              
            
            0467: clear_actor SURVIVER last_weapon_damage                                 
            077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
            
            ///////////////////////////////
            
            for 0@ = 0 to 5
            092B: 1@ = group PLAYER_GROUP member 0@
            
            if
            056D:   actor 1@ defined
            then
            
            if and
            not actor.Driving(1@)
            not actor.Animation(1@) == "CAR_sitpLO"
            044B:   actor 1@ on_foot
            then    
            05E2: AS_actor 1@ kill_actor SURVIVER
            else
            0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
            end
                       
            end
            
            ///////////////////////////////
                
            end                                    
            
            0687: clear_actor SURVIVER task
            wait 10
            05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
            0568: set_actor SURVIVER untargetable 0
            008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
            $VAGINA6_FLAG[18@] = 1
            $VAGINA6_TIME[18@] = 0
            
            05C1: AS_actor SURVIVER speak_from_audio_table 89
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0
            
            else  
                                                
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161                            
            
            054E: clear_actor SURVIVER damage
            
            0687: clear_actor SURVIVER task
            wait 10    
            05B9: AS_actor SURVIVER stay_idle 100 ms
            wait 100
            
            gosub @RANDOM_DIALOG_PLAYER_BECOME_BANDIT_PEOPLE
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0            
               
            end                                                                                                                                                    
              
            end
        end
    end
    
////////////////////////////////////////////////Предание союзника игроком (игрок творит хуйню)////////////////////////////////////////////////                
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
SURVIVOR_MARODER_FLAG == 0
056D:   actor SURVIVER defined
    then
    if and
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0
    not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
    803A: not  SURVIVER == COOP_ACTOR // (int)
    not COOP_ACTIVE_FLAG == 1
        then
        if and 
        SURVIVOR_SAW_SHIT == 1  
        not $MUTATION_ACTIVE == 0
        not $GAMEMODE_STORYLINE == 1
        $GAMEMODE_WAR == 0
        $GAMEMODE_EDITOR == 0
        $GAMEMODE_HOLD == 0
        $DEFENSE_CHALLENGE_FLAG == 0
            then                                               
            
            /////////////////////////////// 
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            
            $STATS_TEAMMATE_BETRAYS_TO += 1        
                    
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end                
                 
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"                
                
            if and
            0@ == 0
            1@ >= 5
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH69"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"                    
                end                             
                
            ///////////////////////////////                                                                  
            
            SURVIVOR_IN_PLAYER_TEAM = 0
            
            if and
            0800:   in_two_players_mode
            07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            003A:   SURVIVER == COOP_ACTOR // (int)
            then            
            0EA1: disable_second_player_restore_camera 1
            end
            
            06C9: remove_actor SURVIVER from_group
            
            0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
            
            if
            0@ == 1
            then
            audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
            end
            
            if
            UNITED_MAP == 0
            then
            04D8: set_actor SURVIVER drowns_in_water 0
            end
            
            Actor.SetWalkStyle(SURVIVER, "surv5")
            
            gosub @RANDOM_PEOPLE1_GROUP_CREATE
            
            random_int 0@ 0 to 2
            
            if
            PERK_CHARISMA > 1
            then
            0@ = 1
            end
            
            if
            0@ == 0
            then
            
            SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
            gosub @RANDOM_DIALOG_SAW_SHIT
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0              
            
            0467: clear_actor SURVIVER last_weapon_damage                                 
            077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
            
            ///////////////////////////////
            
            for 0@ = 0 to 5
            092B: 1@ = group PLAYER_GROUP member 0@
            
            if
            056D:   actor 1@ defined
            then
            
            if and
            not actor.Driving(1@)
            not actor.Animation(1@) == "CAR_sitpLO"
            044B:   actor 1@ on_foot
            then    
            05E2: AS_actor 1@ kill_actor SURVIVER
            else
            0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
            end
                       
            end
            
            ///////////////////////////////
                
            end                                    
            
            0687: clear_actor SURVIVER task
            wait 10
            05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
            0568: set_actor SURVIVER untargetable 0
            008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
            $VAGINA6_FLAG[18@] = 1
            $VAGINA6_TIME[18@] = 0
            
            05C1: AS_actor SURVIVER speak_from_audio_table 89
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0
            
            else  
                                                
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161                            
            
            054E: clear_actor SURVIVER damage
            
            0687: clear_actor SURVIVER task
            wait 10    
            05B9: AS_actor SURVIVER stay_idle 100 ms
            wait 100
            
            gosub @RANDOM_DIALOG_SAW_SHIT_FRIENDLY
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0            
               
            end                                                                                                                                                    
              
            end
        end
    end        
    
////////////////////////////////////////////////Просьба выжившего взять его к себе в друзья////////////////////////////////////////////////

if and
CARMA_VERY_BAD_FLAG == 0
SURVIVOR_MARODER_FLAG == 1
then
jump to @FRIEND_SURV_HIMSELF_SKIP
end

if and
CARMA_VERY_BAD_FLAG == 1
SURVIVOR_MARODER_FLAG == 0
then
jump to @FRIEND_SURV_HIMSELF_SKIP2
end        
    
if and
$HELP_INST_FLAG == 0
not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
056D:   actor SURVIVER defined
8800: not  in_two_players_mode
    then
    046D: 1@ = actor PLAYER_ACTOR members_in_group
    
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    005A: 1@ += 2@  // (int)
            
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    005A: 1@ += 2@  // (int)
            
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    005A: 1@ += 2@  // (int)
            
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    005A: 1@ += 2@  // (int)
            
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    005A: 1@ += 2@  // (int)
    
    if
    COOP_ACTIVE_FLAG == 1
    then
    1@ = 69
    end
    
    if and
    SURVIVOR_FRIEND_HIMSELF == 1  
    $GAMEMODE_STORYLINE == 0
    not actor.Dead(PLAYER_ACTOR) 
    $SPECTATING_FLAG == 0
    $ALLOW_SURVIVER_HELP == 1
    $PANEL_OPEN == 0
    $SIMULATING_FLAG == 0
    1@ == 0
        then
        if and
        $ASKING_HELP_FLAG == 0
        SURVIVOR_IN_PLAYER_TEAM == 0
        SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
        SURVIVOR_MEET_FLAG == 0
        0364:   actor SURVIVER spotted_actor PLAYER_ACTOR
        0104:   actor SURVIVER near_actor PLAYER_ACTOR radius 100.0 100.0 30.0 sphere 0
            then
            
            ///////////////////////////////
            
            if
            SURVIVOR_THROW_MOLOTOV_FLAG == 1
            then
            
            01B9: set_actor SURVIVER armed_weapon_to SURVIVOR_THROW_PREV_WEAP
                    
            SURVIVOR_THROW_MOLOTOV_TIMER = 0            
            SURVIVOR_THROW_MOLOTOV_FLAG = 0
                    
            008B: SURVIVOR_THROW_MOLOTOV_TIMER2 = $SURVIVOR_THROW_TIME // (int)
            008D: SURVIVOR_THROW_MOLOTOV_TIMER2 = integer SURVIVOR_THROW_MOLOTOV_TIMER2 to_float
            random_int 0@ $SURVIVOR_THROW_TIME_MIN $SURVIVOR_THROW_TIME_MAX
            006B: SURVIVOR_THROW_MOLOTOV_TIMER2 *= 0@  // (float)
            008C: SURVIVOR_THROW_MOLOTOV_TIMER2 = float SURVIVOR_THROW_MOLOTOV_TIMER2 to_integer
            
            if and
            $GAMEMODE_HOLD == 0
            $DEFENSE_CHALLENGE_FLAG == 0
            then
            actor.SetImmunities(PLAYER_ACTOR,0,0,0,0,0) 
            end     
            
            end
            
            ///////////////////////////////
            
            $RANDOM_ACTORS_SEE += 1
            
            SURVIVOR_ASKING_HELP_MARKER = marker.CreateAboveActor(SURVIVER)
            marker.SetIconSize(SURVIVOR_ASKING_HELP_MARKER,2)
            07E0: set_marker SURVIVOR_ASKING_HELP_MARKER type_to 1
            
            018B: set_marker SURVIVOR_ASKING_HELP_MARKER radar_mode 0
            018B: set_marker SURVIVOR_ASKING_HELP_MARKER radar_mode 2
            
            $ASKING_HELP_FLAG = 1                                                                                 
            
            05C1: AS_actor SURVIVER speak_from_audio_table 89
            0850: AS_actor SURVIVER follow_actor PLAYER_ACTOR
            
            ///////////////////////////////
            
            $PHRASES_OFF_FLAG = 1  
            gosub @RANDOM_DIALOG_HELP_HIMSELF_PEOPLE
            text.ClearAll()                                                        
            09FD: get_gxt_string v$PHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer                                                                
            gosub @SURVIVER_PHRASE_LOCK_UNLOCK_WITH_HUNTER_AND_DAMAGE
            
            ///////////////////////////////
                        
            32@ = 0                                                
            
            repeat
            wait 0
            
            if
            32@ > 500
            then
            0850: AS_actor SURVIVER follow_actor PLAYER_ACTOR
            end               
            
            if
            8A2A: not  text_box 'GAME174' displayed
                then
                0512: show_permanent_text_box 'GAME174'
                end          
            
            if
            051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
                then
                
                $PHRASES_OFF_FLAG = 1
                text.RemoveTextBox()    
                0467: clear_actor SURVIVER last_weapon_damage
                wait 1
                SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1                
                
                0467: clear_actor SURVIVER last_weapon_damage                                 
                077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
                
                /////////////////////////////// 
            
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"                
                
                $STATS_SURV_AGRED += 1        
                        
                if
                $CHEATED_FLAG == 0 
                then   
                0@ += 1
                end                    
                     
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"
                
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT70_GOT"
                0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_SURV_AGRED"                
                    
                if and
                0@ == 0
                1@ >= 200
                $CHEATED_FLAG == 0
                    then
                    v$ACHIEVEMNT = "ACH70"
                    $ACHIEVEMENT_GOT_FLAG = 1                    
                    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT70_GOT"                    
                    end    
                    
                ///////////////////////////////   
                
                for 0@ = 0 to 5
                092B: 1@ = group PLAYER_GROUP member 0@
                
                if
                056D:   actor 1@ defined
                then
                
                if and
                not actor.Driving(1@)
                not actor.Animation(1@) == "CAR_sitpLO"
                044B:   actor 1@ on_foot
                then    
                05E2: AS_actor 1@ kill_actor SURVIVER
                else
                0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
                end
                
                end
                    
                end
                
                ///////////////////////////////                   
                
                0687: clear_actor SURVIVER task
                wait 10
                05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
                0568: set_actor SURVIVER untargetable 0
                008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
                $VAGINA6_FLAG[18@] = 1
                $VAGINA6_TIME[18@] = 0                
                
                05C1: AS_actor SURVIVER speak_from_audio_table 89
                
                ///////////////////////////////
                
                if
                not actor.Dead(SURVIVER)
                then
                $PHRASES_OFF_FLAG = 1
                gosub @RANDOM_DIALOG_KILL1_PEOPLE
                text.ClearAll()                
                09FD: get_gxt_string v$PHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer                                  
                gosub @SURVIVER_PHRASE_LOCK_UNLOCK_USUAL                
                end
                
                ///////////////////////////////
                
                jump to @BREAK1  
                
                end
            
            if or
            0E3E: is_button_just_pressed 0 button 11
            $HUNTER_ON_PLAYER == 1
                then
                
                SURVIVOR_IN_PLAYER_TEAM = 1
                SURVIVOR_NAME_KNEW = 1
                Actor.SetWalkStyle(SURVIVER, "SURV1")                  
                
                if
                $ALLY_EVER_DIED == -1
                then
                $ALLY_EVER_DIED = 0
                end
                
                if
                18@ == 0
                then
                06D1: v$SURVIVOR_PROLOUGE[0] = "SN1_0" // v$ = string
                end
                
                if
                18@ == 1
                then
                06D1: v$SURVIVOR_PROLOUGE[1] = "SN1_0" // v$ = string
                end
                
                if
                18@ == 2
                then
                06D1: v$SURVIVOR_PROLOUGE[2] = "SN1_0" // v$ = string
                end
                
                if
                18@ == 3
                then
                06D1: v$SURVIVOR_PROLOUGE[3] = "SN1_0" // v$ = string
                end
                
                if
                18@ == 4
                then
                06D1: v$SURVIVOR_PROLOUGE[4] = "SN1_0" // v$ = string
                end
                
                0687: clear_actor SURVIVER task
                0631: put_actor SURVIVER in_group PLAYER_GROUP
                081A: set_actor SURVIVER weapon_skill_to 2
                0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
                Actor.WeaponAccuracy(SURVIVER) = 100
                
                if
                CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
                then
                gosub @TEAMMATE_DO_NOT_INFINITE_AMMO    
                end
                
                $TEMP_XP = SURVIVOR_FOUND_XP
                008D: $TEMP_XP = integer $TEMP_XP to_float
                0069: $TEMP_XP *= $XP_COEFF // (float)
                008C: $TEMP_XP = float $TEMP_XP to_integer
                0058: $PLAYER_XP += $TEMP_XP // (int)
                
                /////////////////////////////// 
            
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_GOT"                        
                        
                $STATS_TEAMMATES_GOT += 1        
                                
                if
                $CHEATED_FLAG == 0 
                then   
                0@ += 1
                end                            
                             
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_GOT"                    
                0AF0: 3@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT60_GOT"
            
                if and
                3@ == 0
                0@ >= 200
                $CHEATED_FLAG == 0
                    then
                    v$ACHIEVEMNT = "ACH60"
                    $ACHIEVEMENT_GOT_FLAG = 1                                                
                    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT60_GOT"
                    end    
                            
                /////////////////////////////// 
                
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype $ZOMBIE_SET_PEDTYPE // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 4 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 5 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 29 // see ped.dat    
                
                087F: set_actor SURVIVER never_leave_group 1 
                
                0209: 2@ = random_int_in_ranges 95 100
                Actor.WeaponAccuracy(SURVIVER) = 2@                
                
                if
                056D:   actor $VOICE_ACTOR defined
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 162
                end 
                wait 5  
                if
                056D:   actor $VOICE_ACTOR defined
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 162
                end 
                wait 5 
                if
                056D:   actor $VOICE_ACTOR defined
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 162
                end 
                wait 5
                
                ///////////////////////////////
                
                if
                $HUNTER_ON_PLAYER == 0
                then
                $PHRASES_OFF_FLAG = 1
                text.RemoveTextBox()
                gosub @RANDOM_DIALOG_INVITE_YES_PEOPLE                 
                text.ClearAll()                                            
                09FD: get_gxt_string v$PHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer                                                   
                gosub @SURVIVER_PHRASE_LOCK_WITH_PLAYER_NAME_UNLOCK_USUAL                
                end
                
                $PHRASES_OFF_FLAG = 0
                
                ///////////////////////////////                                                           
                
                jump to @BREAK1                
                end
                
             046D: 1@ = actor PLAYER_ACTOR members_in_group
             
             008B: 2@ = $SURV1_STAY_FLAG // (int)
             005A: 1@ += 2@  // (int)
            
             008B: 2@ = $SURV2_STAY_FLAG // (int)
             005A: 1@ += 2@  // (int)
            
             008B: 2@ = $SURV3_STAY_FLAG // (int)
             005A: 1@ += 2@  // (int)
            
             008B: 2@ = $SURV4_STAY_FLAG // (int)
             005A: 1@ += 2@  // (int)
            
             008B: 2@ = $SURV5_STAY_FLAG // (int)
             005A: 1@ += 2@  // (int)
             
             if
             COOP_ACTIVE_FLAG == 1
             then
             1@ = 69
             end                            
                
             if or
             0E3E: is_button_just_pressed 0 button 10
             1@ > 2
             80F2: not  actor SURVIVER near_actor PLAYER_ACTOR radius 180.0 180.0 sphere 0
                then
                
                $PHRASES_OFF_FLAG = 1                
                text.RemoveTextBox()                
                gosub @RANDOM_DIALOG_INVITE_NO_PEOPLE                             
                text.ClearAll()    
                
                09FD: get_gxt_string v$PHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer  
                
                v$NAME1 = "N_ME"
                0665: get_actor PLAYER_ACTOR model_to 1@ 
                if
                1@ > 10000
                then
                v$NAME1 = "N_"
                end
                0AD3: v$NAME2 = format "%d" 1@
                098B: v$NAME3 = v$NAME1 + v$NAME2
                
                if
                FREEMODE_CUSTOM_NAME == 1 
                then
                06D1: v$NAME3 = "F_NAME" // v$ = string
                end 
                
                $PHRASES_OFF_FLAG = 1
                32@ = 0                               
                    
                repeat
                wait 0  
                    
                if
                86EE: not  actor SURVIVER in_group PLAYER_GROUP
                then
                gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
                end
                    
                gosub @SURV_NAME_CHECK
                    
                0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 9@ 1
                
                //gosub @SHOW_FUCKING_VOICE
                    
                if or
                actor.Dead(SURVIVER)
                051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                DELETE_RAN_RUVS == 1
                $PANEL_OPEN == 1
                    then
                    $PHRASES_OFF_FLAG = 0
                    break
                    end
                    
                until 002D:   32@ >= 9@  // (int)
                    
                $PHRASES_OFF_FLAG = 0
                
                if
                CARMA_VERY_BAD_FLAG == 1
                then
                random_int 0@ 0 to 5
                else
                0@ = 3
                end
                
                if
                0@ == 2
                then
                
                SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1                                                                                                
                
                0467: clear_actor SURVIVER last_weapon_damage                                 
                077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
                
                ///////////////////////////////
                
                for 0@ = 0 to 5
                092B: 1@ = group PLAYER_GROUP member 0@
                
                if
                056D:   actor 1@ defined
                then
                
                if and
                not actor.Driving(1@)
                not actor.Animation(1@) == "CAR_sitpLO"
                044B:   actor 1@ on_foot
                then    
                05E2: AS_actor 1@ kill_actor SURVIVER
                else
                0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
                end
                
                end
                    
                end
                
                ///////////////////////////////
                                   
                0687: clear_actor SURVIVER task
                wait 10
                05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
                0568: set_actor SURVIVER untargetable 0
                008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
                $VAGINA6_FLAG[18@] = 1
                $VAGINA6_TIME[18@] = 0
                  
                05C1: AS_actor SURVIVER speak_from_audio_table 89
                else                                                 
            
                wait 100
                    
                if
                056D:   actor $VOICE_ACTOR defined
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 161
                end 
                wait 5   
                if
                056D:   actor $VOICE_ACTOR defined
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 161
                end 
                wait 5   
                if
                056D:   actor $VOICE_ACTOR defined
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 161
                end 
                wait 5                         
                
                0687: clear_actor SURVIVER task
                wait 10
                05B9: AS_actor SURVIVER stay_idle 100 ms
                wait 100                    
                  
                end                                                                                                       
                                                            
                jump to @BREAK1                
                end   
                
            if or
            actor.Dead(SURVIVER) 
            actor.Dead(PLAYER_ACTOR)  
            $SAVESTATUS == 1
            DELETE_RAN_RUVS == 1 
                then
                text.RemoveTextBox()
                jump to @BREAK1
                end              
            
            until false
            
            :BREAK1 
            
            wait 100
            
            $ASKING_HELP_FLAG = 0 
            
            if
            075C:   marker SURVIVOR_ASKING_HELP_MARKER enabled
            then
            marker.Disable(SURVIVOR_ASKING_HELP_MARKER)
            end                                 
            
            end        
        end    
    end
    
:FRIEND_SURV_HIMSELF_SKIP            
    
////////////////////////////////////////////////Просьба к выжившему присоединиться к игроку в команду////////////////////////////////////////////////

if and
CARMA_VERY_BAD_FLAG == 0
SURVIVOR_MARODER_FLAG == 1
then
jump to @FRIEND_SURV_HIMSELF_SKIP2
end

if and
CARMA_VERY_BAD_FLAG == 1
SURVIVOR_MARODER_FLAG == 0
then
jump to @FRIEND_SURV_HIMSELF_SKIP2
end                            

if and
056D:   actor SURVIVER defined
SURVIVOR_NAME_KNEW == 0
8800: not  in_two_players_mode
    then
    
    if
    CAN_AIM_AT_SURVIVORS == 0
    then    
    if and    
    00E1:   player 0 pressed_key 6
    00E1:   player 0 pressed_key 11
        then
        0568: set_actor SURVIVER untargetable 0
        else
        0568: set_actor SURVIVER untargetable 1
        end
    end
        
    if and
    $ASKING_HELP_FLAG == 0
    SURVIVOR_IN_PLAYER_TEAM == 0
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
    SURVIVOR_MEET_FLAG == 0    
    0457:   player PLAYER_CHAR aiming_at_actor SURVIVER
    0E3D:   just_key_pressed 69 
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 100.0 100.0 sphere 0 
        then
        046D: 1@ = actor PLAYER_ACTOR members_in_group
        
        008B: 2@ = $SURV1_STAY_FLAG // (int)
        005A: 1@ += 2@  // (int)
                
        008B: 2@ = $SURV2_STAY_FLAG // (int)
        005A: 1@ += 2@  // (int)
                
        008B: 2@ = $SURV3_STAY_FLAG // (int)
        005A: 1@ += 2@  // (int)
                
        008B: 2@ = $SURV4_STAY_FLAG // (int)
        005A: 1@ += 2@  // (int)
                
        008B: 2@ = $SURV5_STAY_FLAG // (int)
        005A: 1@ += 2@  // (int)                
        
        if
        1@ < 3
            then        
                
            if
            SURVIVOR_THROW_MOLOTOV_FLAG == 1
            then
                    
            01B9: set_actor SURVIVER armed_weapon_to SURVIVOR_THROW_PREV_WEAP
                            
            SURVIVOR_THROW_MOLOTOV_TIMER = 0            
            SURVIVOR_THROW_MOLOTOV_FLAG = 0
                            
            008B: SURVIVOR_THROW_MOLOTOV_TIMER2 = $SURVIVOR_THROW_TIME // (int)
            008D: SURVIVOR_THROW_MOLOTOV_TIMER2 = integer SURVIVOR_THROW_MOLOTOV_TIMER2 to_float
            random_int 0@ $SURVIVOR_THROW_TIME_MIN $SURVIVOR_THROW_TIME_MAX
            006B: SURVIVOR_THROW_MOLOTOV_TIMER2 *= 0@  // (float)
            008C: SURVIVOR_THROW_MOLOTOV_TIMER2 = float SURVIVOR_THROW_MOLOTOV_TIMER2 to_integer
                    
            if and
            $GAMEMODE_HOLD == 0
            $DEFENSE_CHALLENGE_FLAG == 0
            then
            actor.SetImmunities(PLAYER_ACTOR,0,0,0,0,0) 
            end     
                    
            end
                    
            $ASKING_HELP_FLAG = 1
            $RANDOM_ACTORS_SEE += 1
            SURVIVOR_MEET_FLAG = 1 
            gosub @RANDOM_DIALOG_INVITE_PEOPLE
            text.ClearAll()             
                    
            09FD: get_gxt_string v$PHRASE3 width_to 3@
            0093: 3@ = integer 3@ to_float
            3@ *= 8.0
            0092: 3@ = float 3@ to_integer  
                    
            v$NAME1 = "N_ME"
            0665: get_actor PLAYER_ACTOR model_to 1@ 
            if
            1@ > 10000
            then
            v$NAME1 = "N_"
            end
            0AD3: v$NAME2 = format "%d" 1@
            098B: v$NAME3 = v$NAME1 + v$NAME2
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end 
                    
            0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 3@ 1       \
            
            //gosub @SHOW_FUCKING_VOICE
                                
            if
            056D:   actor $VOICE_ACTOR defined
            then
            05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 89
            end        
                    
            wait 3@
                       
            random_int 0@ 0 5
            
            if and
            CARMA_BAD_POINTS >= 30
            CARMA_VERY_BAD_FLAG == 0
            then
            0@ = 3
            end
                    
            if 
            not 0@ == 3  
                then
                         
                gosub @RANDOM_DIALOG_INVITE_YES_PEOPLE
                SURVIVOR_IN_PLAYER_TEAM = 1
                SURVIVOR_NAME_KNEW = 1
                Actor.SetWalkStyle(SURVIVER, "SURV1")                  
                        
                if
                $ALLY_EVER_DIED == -1
                then
                $ALLY_EVER_DIED = 0
                end
                        
                if
                18@ == 0
                then
                06D1: v$SURVIVOR_PROLOUGE[0] = "SN1_0" // v$ = string
                end
                        
                if
                18@ == 1
                then
                06D1: v$SURVIVOR_PROLOUGE[1] = "SN1_0" // v$ = string
                end
                        
                if
                18@ == 2
                then
                06D1: v$SURVIVOR_PROLOUGE[2] = "SN1_0" // v$ = string
                end
                
                if
                18@ == 3
                then
                06D1: v$SURVIVOR_PROLOUGE[3] = "SN1_0" // v$ = string
                end
                
                if
                18@ == 4
                then
                06D1: v$SURVIVOR_PROLOUGE[4] = "SN1_0" // v$ = string
                end
                        
                0687: clear_actor SURVIVER task
                0631: put_actor SURVIVER in_group PLAYER_GROUP
                081A: set_actor SURVIVER weapon_skill_to 2
                0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
                Actor.WeaponAccuracy(SURVIVER) = 100
                
                if and
                CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
                87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                then
                gosub @TEAMMATE_DO_NOT_INFINITE_AMMO    
                end
                
                $TEMP_XP = SURVIVOR_FOUND_XP
                008D: $TEMP_XP = integer $TEMP_XP to_float
                0069: $TEMP_XP *= $XP_COEFF // (float)
                008C: $TEMP_XP = float $TEMP_XP to_integer
                0058: $PLAYER_XP += $TEMP_XP // (int)
                        
                /////////////////////////////// 
                    
                0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_GOT"                        
                                
                $STATS_TEAMMATES_GOT += 1        
                                        
                if
                $CHEATED_FLAG == 0 
                then   
                0@ += 1
                end                            
                                     
                0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATES_GOT"                           
                0AF0: 3@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT60_GOT"
                    
                if and
                3@ == 0
                0@ >= 200
                $CHEATED_FLAG == 0
                    then
                    v$ACHIEVEMNT = "ACH60"
                    $ACHIEVEMENT_GOT_FLAG = 1                                                
                    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT60_GOT"
                    end    
                                    
                /////////////////////////////// 
                        
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype $ZOMBIE_SET_PEDTYPE // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 4 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 5 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
                077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 29 // see ped.dat    
                        
                087F: set_actor SURVIVER never_leave_group 1 
                        
                0209: 2@ = random_int_in_ranges 95 100
                Actor.WeaponAccuracy(SURVIVER) = 2@
                         
                text.ClearAll()
                        
                gosub @SURV_NAME_CHECK
                        
                09FD: get_gxt_string v$PHRASE3 width_to 3@
                0093: 3@ = integer 3@ to_float
                3@ *= 8.0
                0092: 3@ = float 3@ to_integer  
                        
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
                
                //gosub @SHOW_FUCKING_VOICE
                        
                $ASKING_HELP_FLAG = 0
                05C1: AS_actor SURVIVER speak_from_audio_table 162
                wait 5
                05C1: AS_actor SURVIVER speak_from_audio_table 162
                wait 5
                05C1: AS_actor SURVIVER speak_from_audio_table 162
                else
                        
                random_int 0@ 0 to 2
                if
                0@ == 5
                then
                                    
                SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
                gosub @RANDOM_DIALOG_LET_GO_ANGER_PEOPLE
                text.ClearAll()
                        
                09FD: get_gxt_string v$PHRASE3 width_to 3@
                0093: 3@ = integer 3@ to_float
                3@ *= 8.0
                0092: 3@ = float 3@ to_integer  
                        
                gosub @SURV_NAME_CHECK
            
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
                
                //gosub @SHOW_FUCKING_VOICE
                        
                0467: clear_actor SURVIVER last_weapon_damage                                 
                077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
                        
                ///////////////////////////////
                        
                for 0@ = 0 to 5
                092B: 1@ = group PLAYER_GROUP member 0@
                        
                if
                056D:   actor 1@ defined
                then
                
                if and
                not actor.Driving(1@)
                not actor.Animation(1@) == "CAR_sitpLO"
                044B:   actor 1@ on_foot
                then    
                05E2: AS_actor 1@ kill_actor SURVIVER
                else
                0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
                end
                
                end
                            
                end
                        
                ///////////////////////////////                   
                        
                0687: clear_actor SURVIVER task
                wait 10
                05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
                0568: set_actor SURVIVER untargetable 0
                008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
                $VAGINA6_FLAG[18@] = 1
                $VAGINA6_TIME[18@] = 0
                        
                05C1: AS_actor SURVIVER speak_from_audio_table 89            
                else              
                gosub @RANDOM_DIALOG_INVITE_NO_PEOPLE
                text.ClearAll()
                        
                v$2NAME3 = "GAME500"
                                                                
                09FD: get_gxt_string v$PHRASE3 width_to 3@
                0093: 3@ = integer 3@ to_float
                3@ *= 8.0
                0092: 3@ = float 3@ to_integer  
                        
                0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1
                
                //gosub @SHOW_FUCKING_VOICE
                        
                $ASKING_HELP_FLAG = 0
                05C1: AS_actor SURVIVER speak_from_audio_table 161
                wait 5
                05C1: AS_actor SURVIVER speak_from_audio_table 161
                wait 5
                05C1: AS_actor SURVIVER speak_from_audio_table 161                    
                end            
                                                     
                end
            end
        end
    end
    
:FRIEND_SURV_HIMSELF_SKIP2    
    
////////////////////////////////////////////////Убирание союзника из команды во время активации режима наблюдения    

if
056D:   actor SURVIVER defined
    then
    if and
    SURVIVOR_IN_PLAYER_TEAM == 1  
    06EE:   actor SURVIVER in_group PLAYER_GROUP
    actor.Dead(PLAYER_ACTOR)    
    $SPECTATING_FLAG == 1 
        then    
        07B3: set_group PLAYER_GROUP give_command 1    
        SURVIVOR_IN_PLAYER_TEAM = 0
        SURVIVOR_MEET_FLAG = 0
        06C9: remove_actor SURVIVER from_group         
        0084: $SPEC_ACTOR = SURVIVER // (int)    
        end
    end
    
////////////////////////////////////////////////Мгновенное добавление выжившего в команду игроку////////////////////////////////////////////////     
        
if and
SURVIVOR_IN_PLAYER_TEAM == 0
$HELP_INST_FLAG == 1
SURVIVOR_MARODER_FLAG == 0
SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
056D:   actor SURVIVER defined  
    then
    
    Actor.SetWalkStyle(SURVIVER, "SURV1")              
            
    if
    $ALLY_EVER_DIED == -1
    then
    $ALLY_EVER_DIED = 0
    end
    
    0687: clear_actor SURVIVER task
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
    
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
    
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
    
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
    
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if
    2@ == 0
    then        
    0631: put_actor SURVIVER in_group PLAYER_GROUP
    end
    
    081A: set_actor SURVIVER weapon_skill_to 2
    0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
    Actor.WeaponAccuracy(SURVIVER) = 100
            
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype $ZOMBIE_SET_PEDTYPE // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 4 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 5 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 25 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 26 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 27 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 28 // see ped.dat
    077A: set_actor SURVIVER acquaintance 0 to_actors_pedtype 29 // see ped.dat    
            
    087F: set_actor SURVIVER never_leave_group 1
            
    0209: 2@ = random_int_in_ranges 95 100
    Actor.WeaponAccuracy(SURVIVER) = 2@
            
    SURVIVOR_IN_PLAYER_TEAM = 1 
    SURVIVOR_NAME_KNEW = 1
    SURVIVOR_MEET_FLAG = 1
    
    v$2NAME1 = "N_ME"
    0665: get_actor SURVIVER model_to 0@
    if
    0@ > 10000
    then
    v$2NAME1 = "N_"
    end
    0AD3: v$2NAME2 = format "%d" 0@
    098B: v$2NAME3 = v$2NAME1 + v$2NAME2
    
    end
    
////////////////////////////////////////////////Открытие инвентаря выжившего////////////////////////////////////////////////                    

if and
056D:   actor SURVIVER defined
$DEFENSE_CHALLENGE_FLAG == 0
$CANALS_CHALLENGE_FLAG == 0
$GAMEMODE_CRAZY == 0
not LADDER_ON_MARKER_FLAG == 1
$JIMMY_USING == 0
$KANISTRA_USING == 0
    then
    
    if and
    not $ENTERED_CAMP_NUMBER == -1
    $ENTERED_CAMP_NUMBER >= 0
    $ENTERED_CAMP_NUMBER < 14
        then
        if
        00FE:   actor PLAYER_ACTOR sphere 0 in_sphere $CAMP_SAVE_X[$ENTERED_CAMP_NUMBER] $CAMP_SAVE_Y[$ENTERED_CAMP_NUMBER] $CAMP_SAVE_Z[$ENTERED_CAMP_NUMBER] radius 3.0 3.0 3.0
            then
            jump to @SURV_SKIP_OPEN_INV
            end
        end
        
    if and
    COOP_2P_OPEN_INV == 1
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    not $PANEL_OPEN == 1
        then
        jump to @INV_COOP_OPEN_COOP
        end               
        
    if and
    $GAMEMODE_HOLD == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    SURVIVOR_IN_PLAYER_TEAM == 1
    $CAR_CHECKING_FLAG == 0 
    $PANEL_OPEN == 0
    0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
    0AB0:   key_pressed 69        
        then
        if and
        not JUST_2P_PRESSED_E_KEY == 1
        not actor.Animation(SURVIVER) == "BOM_PLANT"
            then
            :INV_COOP_OPEN            
            
            if and
            18@ == 1
            8E45: frame_mod 2
            then
            jump to @SURV_SKIP_OPEN_INV 
            end
            
            if and
            18@ == 2
            8E45: frame_mod 3
            then
            jump to @SURV_SKIP_OPEN_INV
            end
            
            if and
            18@ == 3
            8E45: frame_mod 4
            then
            jump to @SURV_SKIP_OPEN_INV
            end
            
            if and
            18@ == 4
            8E45: frame_mod 5
            then
            jump to @SURV_SKIP_OPEN_INV
            end                             
            
            if and
            not Actor.Dead(PLAYER_ACTOR)         
            044B:   actor SURVIVER on_foot 
            044B:   actor PLAYER_ACTOR on_foot 
            09E7:   player PLAYER_CHAR not_frozen    
            8597:   actor PLAYER_ACTOR crouching 
                then
                if
                player.Controllable(PLAYER_CHAR)
                    then
                    :INV_COOP_OPEN_COOP
                    if and
                    not Actor.Animation(SURVIVER) == "getup"
                    not Actor.Animation(SURVIVER) == "FLOOR_hit"
                    not Actor.Animation(SURVIVER) == "KO_skid_front"
                    not actor.Animation(SURVIVER) == "EAT_BURGER"
                    not actor.Animation(SURVIVER) == "CAR_sitpLO"
                        then
                        if and
                        $JIMMY_USING == 0
                        $KANISTRA_USING == 0
                            then
                            text.ClearAll()
                            gosub @RANDOM_PEOPLE1_INV_SHOW_START
                            
                            if
                            07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                            then
                            COOP_2P_OPEN_INV = 0
                            07CC: set_player 1 can_enter_exit_vehicles 0
                            wait 100
                            07CC: set_player 1 can_enter_exit_vehicles 1
                            0E68: set_player_control_pad 1 1 
                            0E69: set_player_control_pad_movement 1 1
                            end
                                
                            end
                        end
                    end
                end
            end
        end
    end
    
:SURV_SKIP_OPEN_INV    
    
////////////////////////////////////////////////Скажем "нет" минусовому уровню голода!////////////////////////////////////////////////      
    
if
SURVIVOR_SATIETY <= 0
    then
    SURVIVOR_SATIETY = 0
    if and
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    0800:   in_two_players_mode
    not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
        then
        06AF: set_player 1 sprint_mode 1
        end
    end
    
////////////////////////////////////////////////Голод выжившего////////////////////////////////////////////////     

if
$FREEMODE == 0
then
    
if and
$GAMEMODE_HOLD == 0
$GAMEMODE_WAR == 0
$GAMEMODE_CRAZY == 0
$GAMEMODE_EDITOR == 0
$DEFENSE_CHALLENGE_FLAG == 0
$ALLOW_HUNGER == 1
    then
    
    if or
    EXTRA_HUNGER_RESIST == 0
    SURVIVOR_IN_PLAYER_TEAM == 0
    then    
    0@ = 1800
    else
    
    if
    EXTRA_HUNGER_RESIST == 1
        then
        0@ = 1250
        end
    
    if
    EXTRA_HUNGER_RESIST == 2
        then
        0@ = 1000
        end
    
    if
    EXTRA_HUNGER_RESIST == 3
        then
        0@ = 750
        end
    
    end
    
    if
    18@ == 0
    then
    008B: 2@ = $SURV1_STAY_FLAG // (int)
    end
            
    if
    18@ == 1
    then
    008B: 2@ = $SURV2_STAY_FLAG // (int)
    end
            
    if
    18@ == 2
    then
    008B: 2@ = $SURV3_STAY_FLAG // (int)
    end
            
    if
    18@ == 3
    then
    008B: 2@ = $SURV4_STAY_FLAG // (int)
    end
            
    if
    18@ == 4
    then
    008B: 2@ = $SURV5_STAY_FLAG // (int)
    end
    
    if and
    001D:   32@ > 0@  // (int)
    2@ == 0
        then
        32@ = 0
        if
        not SURVIVOR_SATIETY == 0
            then
            SURVIVOR_SATIETY -= 1                                                   
            end 
        end
    end
    
else

if
803A: not  SURVIVER == COOP_ACTOR // (int)
    then        
    
    if and
    $GAMEMODE_HOLD == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_CRAZY == 0
    $GAMEMODE_EDITOR == 0
    $DEFENSE_CHALLENGE_FLAG == 0
    $ALLOW_HUNGER == 1    
        then
        
        1@ = 2100 
        
        for 0@ = 0 to 4
        
        if and
        $SURVIVOR_IN_PLAYER_TEAM[0@] == 1
        803B: not  0@ == 18@  // (int)
        then
        1@ += 315
        end
        
        end                                        
        
        if
        18@ == 0
        then
        008B: 2@ = $SURV1_STAY_FLAG // (int)
        end
                
        if
        18@ == 1
        then
        008B: 2@ = $SURV2_STAY_FLAG // (int)
        end
                
        if
        18@ == 2
        then
        008B: 2@ = $SURV3_STAY_FLAG // (int)
        end
                
        if
        18@ == 3
        then
        008B: 2@ = $SURV4_STAY_FLAG // (int)
        end
                
        if
        18@ == 4
        then
        008B: 2@ = $SURV5_STAY_FLAG // (int)
        end
        
        if and
        001D:   32@ > 1@  // (int)
        2@ == 0
            then
            32@ = 0
            if
            not SURVIVOR_SATIETY == 0
                then
                SURVIVOR_SATIETY -= 1                                                   
                end 
            end
        else
        SURVIVOR_SATIETY = 999
        end
        
    else        
    
    if
    PERK_HUNGER == 0
    then        
    0@ = 2100
    end
        
    if
    PERK_HUNGER == 1
    then        
    0@ = 2310
    end
        
    if
    PERK_HUNGER == 2
    then        
    0@ = 2464
    end
        
    if
    PERK_HUNGER == 3
    then        
    0@ = 2587
    end        
    
    if and
    $GAMEMODE_HOLD == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_CRAZY == 0
    $GAMEMODE_EDITOR == 0
    $DEFENSE_CHALLENGE_FLAG == 0
    $ALLOW_HUNGER == 1        
        then
        
        if
        18@ == 0
        then
        008B: 2@ = $SURV1_STAY_FLAG // (int)
        end
                
        if
        18@ == 1
        then
        008B: 2@ = $SURV2_STAY_FLAG // (int)
        end
                
        if
        18@ == 2
        then
        008B: 2@ = $SURV3_STAY_FLAG // (int)
        end
                
        if
        18@ == 3
        then
        008B: 2@ = $SURV4_STAY_FLAG // (int)
        end
                
        if
        18@ == 4
        then
        008B: 2@ = $SURV5_STAY_FLAG // (int)
        end
        
        if and
        001D:   32@ > 0@  // (int)
        2@ == 0
        not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
            then
            32@ = 0
            if
            not SURVIVOR_SATIETY == 0
                then
                SURVIVOR_SATIETY -= 1                                                   
                end 
            end
        else
        SURVIVOR_SATIETY = 999
        end
    
    end    

end

////////////////////////////////////////////////Заставляем выжившего постоянно перелазить через дерьмо////////////////////////////////////////////////    
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
0AB0:   key_pressed $KEY_TEAM_CLIMB
    then
    SURVIVOR_CLIMB_TIMER = 201
    end
    
////////////////////////////////////////////////Заставляем выжившего тонуть в воде при необходимости////////////////////////////////////////////////    
    
if
056D:   actor SURVIVER defined
    then
    if and
    UNITED_MAP == 1
    $SAVER_GET_IN_START == 0
    $GODMODE_FLAG == 0
    04AD:   actor SURVIVER in_water
    not actor.Dead(SURVIVER)
        then        
        if or
        actor.Animation(SURVIVER) == "Swim_Tread"
        actor.Animation(SURVIVER) == "Swim_Breast"
        actor.Animation(SURVIVER) == "SWIM_crawl"
        actor.Animation(SURVIVER) == "Swim_Dive_Under"
        actor.Animation(SURVIVER) == "Swim_Glide"
        actor.Animation(SURVIVER) == "Swim_jumpout"
        actor.Animation(SURVIVER) == "Swim_Under"
            then
            0851: set_actor SURVIVER decrease_health_by 5 affect_armour 0
            0812: AS_actor SURVIVER perform_animation "Drown" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
            end        
        end    
    end    
    
////////////////////////////////////////////////Перелезание выжившего через дерьмо////////////////////////////////////////////////        

if and
056D:   actor SURVIVER defined
803A: not  SURVIVER == COOP_ACTOR // (int)
    then    
    
    if
    DEBUG_OPPCODE_FLAG == 1
    then
    
    DEBUG_STRING_NUMBER += 1
    0AD3: v$DEBUG_FILE3 = format "SR%d" DEBUG_STRING_NUMBER
    if
    DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
    then
    0B00: delete_file "debug\debug.ini"  // IF and SET
    DEBUG_STRING_NUMBER = 0
    end
    0AF1: write_int SURVIVER to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE3
    
    end
    
    if
    06EE:   actor SURVIVER in_group PLAYER_GROUP
    then
    ///////////////////////////////////////////////////////////////////////////
    if and
    18@ == 0
    TEAMMATE1_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
        then
        jump to @SURV_CLIMB_SKIP
        end
    if and
    18@ == 1
    TEAMMATE2_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
        then
        jump to @SURV_CLIMB_SKIP
        end
    if and
    18@ == 2
    TEAMMATE3_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
        then
        jump to @SURV_CLIMB_SKIP
        end
    if and
    18@ == 3
    TEAMMATE4_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
        then
        jump to @SURV_CLIMB_SKIP
        end
    if and
    18@ == 4
    TEAMMATE5_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
        then
        jump to @SURV_CLIMB_SKIP
        end
    ///////////////////////////////////////////////////////////////////////////
    end
    
    if and
    06EE:   actor SURVIVER in_group PLAYER_GROUP
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 5.0 5.0 sphere 0
    then
    jump to @SURV_CLIMB_SKIP
    end
         
    if and
    0184:   actor SURVIVER health > 0
    874F: not  actor SURVIVER ped_event == 33  
    8818: not  actor SURVIVER in_air
    89DE: not  actor SURVIVER entering_car
    not actor.Driving(SURVIVER)
    847A: not  actor SURVIVER driving_bike 
    SURVIVOR_CLIMB_TIMER > 200
    $ACTIVE_INTERIOR == 0
        then    
        if and
        not actor.Animation(SURVIVER) == "CLIMB_idle"
        not actor.Animation(SURVIVER) == "CLIMB_jump"
        not actor.Animation(SURVIVER) == "CLIMB_jump2fall"
        not actor.Animation(SURVIVER) == "CLIMB_jump_B"
        not actor.Animation(SURVIVER) == "CLIMB_Pull" 
        not actor.Animation(SURVIVER) == "CLIMB_Stand"
        not actor.Animation(SURVIVER) == "CLIMB_Stand_finish"             
            then
            if and
            not actor.Animation(SURVIVER) == "BIKEd_jumponL"
            not actor.Animation(SURVIVER) == "BIKEd_jumponR"
            not actor.Animation(SURVIVER) == "BIKEh_jumponL"
            not actor.Animation(SURVIVER) == "BIKEh_jumponR"
            not actor.Animation(SURVIVER) == "BIKEv_jumponL"
            not actor.Animation(SURVIVER) == "BIKEv_jumponR"             
                then
                if and
                not actor.Animation(SURVIVER) == "BIKEd_passenger"
                not actor.Animation(SURVIVER) == "BIKEh_passenger"
                not actor.Animation(SURVIVER) == "BIKEv_passenger"             
                    then
                    if or
                    actor.Animation(SURVIVER) == "run_civi"  
                    actor.Animation(SURVIVER) == "sprint_civi"   
                    actor.Animation(SURVIVER) == "swat_run"
                    actor.Animation(SURVIVER) == "Swim_Breast"
                    actor.Animation(SURVIVER) == "Swim_Tread"
                    actor.Animation(SURVIVER) == "Swim_Under"     
                        then    
                        actor.StorePos(SURVIVER, 0@, 1@, 2@) 
                        04C4: store_coords_to 26@ 27@ 28@ from_actor SURVIVER with_offset 0.0 3.0 0.3                                 
                        if                         
                        86BD: not no_obstacles_between 0@ 1@ 2@ and 26@ 27@ 28@ solid 1 car 0 actor 0 object 1 particle 0   
                            then  
                            SURVIVOR_CLIMB_TIMER = 0  
                            
                            if
                            86EE: not  actor SURVIVER in_group PLAYER_GROUP
                            then 
                            0687: clear_actor SURVIVER task
                            wait 10                                                                                                                                                                    
                            end 
                            
                            078F: AS_actor SURVIVER climb 0
                            
                            wait 50                             
                            actor.StorePos(SURVIVER, 0@, 1@, 2@) 
                            04C4: store_coords_to 26@ 27@ 28@ from_actor SURVIVER with_offset 0.0 2.0 5.0
                            0063: 26@ -= 0@  // (float) 
                            0063: 27@ -= 1@  // (float) 
                            0063: 28@ -= 2@  // (float) 
                            083C: set_actor SURVIVER velocity_in_direction_XYZ 26@ 27@ 28@
                            wait 50                             
                            actor.StorePos(SURVIVER, 0@, 1@, 2@) 
                            04C4: store_coords_to 26@ 27@ 28@ from_actor SURVIVER with_offset 0.0 2.0 5.0
                            0063: 26@ -= 0@  // (float) 
                            0063: 27@ -= 1@  // (float) 
                            0063: 28@ -= 2@  // (float) 
                            083C: set_actor SURVIVER velocity_in_direction_XYZ 26@ 27@ 28@
                            
                            if  
                            SURVIVOR_IN_PLAYER_TEAM == 0
                            then                                                
                            end
                                                                                                     
                            end
                        end
                    end
                end                                            
            end 
        end
    end
    
:SURV_CLIMB_SKIP    
    
////////////////////////////////////////////////Союзник просит жрать игрока////////////////////////////////////////////////

if and
SURVIVOR_SATIETY > 0
SURVIVOR_HUNGER_COUNTER > 0
    then
    SURVIVOR_HUNGER_COUNTER = 0
    end
    
if and
COOP_ACTIVE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
$GAMEMODE_WAR == 0
$GAMEMODE_HOLD == 0
not $GAMEMODE_EDITOR == 1
not $PANEL_OPEN2P == 1
not PLAYER_NO_ITEMS_FLAG == 1
    then
    if or
    0E3E: is_button_just_pressed 1 button 8
    COOP_2P_USE_FOOD == 1
        then
        COOP_2P_USE_FOOD = 0
        if
        SURVIVOR_SATIETY < 600
            then
            if and
            SURVIVOR_BANKA_COUNT > 0
            8E46: not is_char_using_gun SURVIVER
                then
                
                if or
                0A2A:   text_box 'INV10B' displayed
                0A2A:   text_box 'INV11B' displayed
                then
                text.RemoveTextBox()
                end
                
                gosub @SURVIVER_FOOD_USE
                else
                text.ShowTextBox('INV33')
                end
            else
            text.ShowTextBox('INV13')
            end
        end
    end               

if
056D:   actor SURVIVER defined
    then    
    04DD: 0@ = actor SURVIVER armour        
    if and
    SURVIVOR_SATIETY == 0 
    $END_SAVING == 0 
    not Actor.Animation(SURVIVER) == "getup"
    not Actor.Animation(SURVIVER) == "FLOOR_hit"
    not Actor.Animation(SURVIVER) == "KO_skid_front"
    not actor.Animation(SURVIVER) == "EAT_BURGER"
    0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0    
    0@ == 0    
        then
        if and
        33@ > 30000
        8E49: not is_char_entering_any_car SURVIVER
        8E4A: not is_char_exiting_any_car SURVIVER        
            then                        
            33@ = 0                                                                                                
            if
            SURVIVOR_BANKA_COUNT == 0                        
                then
                
                if and
                SURVIVOR_SATIETY == 0
                not $EATING_STATUS_2P == 1
                then
                
                audiostream.LinkToActor($HUNGER_SND_PED,SURVIVER)
                audiostream.Loop($HUNGER_SND_PED,0)
                audiostream.Volume($HUNGER_SND_PED) = $SOUNDS_VOLUME
                audiostream.PerformAction($HUNGER_SND_PED,PLAY)                
                
                SURVIVOR_HUNGER_COUNTER += 1            
                008B: 0@ = SURVIVOR_HUNGER_COUNTER // (int)
                if
                07D6:  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                then
                0@ *= 3
                else
                0@ *= 8
                end             
                1@ = Actor.Health(SURVIVER)
                0062: 1@ -= 0@  // (int) 
                Actor.Health(SURVIVER) = 1@
                
                if and
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                0800:   in_two_players_mode
                then 
                03E5: show_text_box 'INV154B'
                0@ *= 5
                015B: shake_player_controller 1 time 1000 intensity 0@                
                if
                CUSTOM_MODE_ONE_HIT_KO == 1
                    then
                    05BE: AS_actor SURVIVER die
                    094E: set_actor SURVIVER mute_pain_audio 1
                    09F1: play_audio_at_actor SURVIVER event 1189
                    end                
                end
                
                ////////////////////////////////////////////////
                
                if and
                SURVIVOR_IN_PLAYER_TEAM == 1
                8184:   actor SURVIVER health < 1
                    then                                    
                    if
                    KARMA_SYS_ON_FLAG == 1
                        then                      
                        if
                        CARMA_VERY_BAD_FLAG == 0
                            then
                            CARMA_BAD_POINTS += 10
                            Audiostream.Loop($KARMA_BAD,0)
                            Audiostream.PerformAction($KARMA_BAD, PLAY)
                            Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
                            CARMA_GOOD_POINTS -= 3                                
                            else
                            CARMA_BAD_POINTS -= 10
                            CARMA_GOOD_POINTS += 3
                            Audiostream.Loop($KARMA_LOX,0)
                            Audiostream.PerformAction($KARMA_LOX, PLAY)
                            Audiostream.Volume($KARMA_LOX) = $SOUNDS_VOLUME
                            end
                        end                    
                    end
                    
                end    
                    
                ////////////////////////////////////////////////    
                
                if and
                SURVIVOR_IN_PLAYER_TEAM == 1
                $STORY_FLAG == 0
                $PHRASES_OFF_FLAG == 0
                0364:   actor SURVIVER spotted_actor PLAYER_ACTOR
                87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                    then                
                    
                    11@ = marker.CreateAboveActor(SURVIVER)
                    marker.SetIconSize(11@,2)
                    marker.SetColor(11@,1)
                    05C1: AS_actor SURVIVER speak_from_audio_table 179
                    gosub @RANDOM_DIALOG_PEOPLE_EAT
                    text.ShowTextBox('INV159')
                    TEAMMATE_ASKING_FOOD = 1
                    
                    gosub @SURV_NAME_CHECK
                    
                    09FD: get_gxt_string v$PHRASE3 width_to 3@
                    0093: 3@ = integer 3@ to_float
                    3@ *= 14.0
                    0092: 3@ = float 3@ to_integer  
                    
                    0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1 
                    
                    //gosub @SHOW_FUCKING_VOICE
                    wait 0
                    33@ = 0            
                
                    :RANDOM_PEOPLE1_HUNGRY_SAVE_FIX
                    wait 0
                    
                    if
                    $SAVESTATUS_TRUE == 1
                        then
                        
                        if
                        075C:   marker 11@ enabled
                        then
                        marker.Disable(11@)
                        end
                        
                        TEAMMATE_ASKING_FOOD = 0
                        text.RemoveTextBox()
                        jump to @RANDOM_PEOPLE1_CHECK_IDLE
                        end
                        
                    if and
                    00DF:   actor SURVIVER driving
                    00DF:   actor PLAYER_ACTOR driving
                    89DE: not  actor SURVIVER entering_car
                    89DE: not  actor PLAYER_ACTOR entering_car
                    8E4A: not is_char_exiting_any_car SURVIVER
                    8E4A: not is_char_exiting_any_car PLAYER_ACTOR
                    then                                        
                    
                    0@ = actor.CurrentCar(SURVIVER)
                    1@ = actor.CurrentCar(PLAYER_ACTOR)                    
                                                
                    if and
                    0E3E: is_button_just_pressed 0 button 11
                    003B:   0@ == 1@  // (int)
                    not $EATING_STATUS == 1                                        
                    then
                    
                    if
                    $BANKA > 0
                    then
                    text.ShowTextBox('INV315')
                    $BANKA -= 1
                    SURVIVOR_BANKA_COUNT += 1
                    gosub @PLAY_DROP_SOUND2
                    text.ClearAll()
                    TEAMMATE_ASKING_FOOD = 0
                    018B: set_marker 11@ radar_mode 0
                    018B: set_marker 11@ radar_mode 2
                    gosub @SURVIVER_FOOD_USE
                    jump to @SURV_BANKA_GIVE_INCAR
                    else
                    text.ShowTextBox('INV317')
                    end
                    
                    end
                    
                    end
                    
                    if and
                    0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 3.0 3.0 3.0 sphere 0
                    not actor.Driving(PLAYER_ACTOR)
                    then
                    marker.Disable(11@)
                    jump to @SURV_BANKA_GIVE_INCAR
                    end    
                    
                    if or
                    001D:   33@ > 3@  // (int)
                    actor.Dead(SURVIVER)                    
                    jf @RANDOM_PEOPLE1_HUNGRY_SAVE_FIX
                    
                    :SURV_BANKA_GIVE_INCAR
                    
                    if
                    075C:   marker 11@ enabled
                    then
                    marker.Disable(11@)
                    end
                    
                    TEAMMATE_ASKING_FOOD = 0
                    text.RemoveTextBox()
                    end
                else
                :SURVIVOR_COOP_EAT_JUMP
                if and
                87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                8E46: not is_char_using_gun SURVIVER
                    then
                    gosub @SURVIVER_FOOD_USE
                    end                   
                end
            end
        end
    end
    
if and
COOP_ACTIVE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
$GAMEMODE_WAR == 0
not $PANEL_OPEN2P == 1
not PLAYER_NO_ITEMS_FLAG == 1
    then
    if or
    0E3E: is_button_just_pressed 1 button 9
    COOP_2P_USE_HEAL == 1
    COOP_2P_USE_BINT == 1
        then
        0@ = Actor.Health(COOP_ACTOR)
        0D39: 1@ = actor COOP_ACTOR max_health
        0092: 1@ = float 1@ to_integer
        if
        802D: not  0@ >= 1@  // (int)
            then
            if or
            SURVIVOR_HEAL_COUNT > 0
            SURVIVOR_BINT_COUNT > 0
                then
                gosub @SURVIVER_HEAL
                else
                COOP_2P_USE_HEAL = 0
                COOP_2P_USE_BINT = 0
                text.ShowTextBox('INV34')
                end
            else
            COOP_2P_USE_HEAL = 0
            COOP_2P_USE_BINT = 0
            text.ShowTextBox('INV23')
            end
        end
    end    
    
////////////////////////////////////////////////Союзник просит bondage у игрока////////////////////////////////////////////////    
    
if and
056D:   actor SURVIVER defined
$GAMEMODE_EDITOR == 0
$GAMEMODE_CRAZY == 0
    then          
    04DD: 0@ = actor SURVIVER armour    
    if and
    $GAMEMODE_HOLD == 0
    $DEFENSE_CHALLENGE_FLAG == 0
    $GAMEMODE_WAR == 0        
    not Actor.Animation(SURVIVER) == "getup"
    not Actor.Animation(SURVIVER) == "FLOOR_hit"
    not Actor.Animation(SURVIVER) == "KO_skid_front"    
    0@ == 0 
        then        
        0@ = actor.Health(SURVIVER)
        
        if and
        COOP_ACTIVE_FLAG == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        
        if
        SURVIVOR_BINT_COUNT > 0
        then                
        
        if
        PERK_HEALTH == 0
        then
        1@ = 88
        end
        
        if
        PERK_HEALTH == 1
        then
        1@ = 105
        end
        
        if
        PERK_HEALTH == 2
        then
        1@ = 114
        end
        
        if
        PERK_HEALTH == 3
        then
        1@ = 127
        end
        
        else
        
        if
        PERK_HEALTH == 0
        then
        1@ = 44
        end
        
        if
        PERK_HEALTH == 1
        then
        1@ = 52
        end
        
        if
        PERK_HEALTH == 2
        then
        1@ = 57
        end
        
        if
        PERK_HEALTH == 3
        then
        1@ = 63
        end
        
        end
        
        else        
        
        if
        SURVIVOR_BINT_COUNT > 0
        then
        1@ = 500
        else
        1@ = 250
        end
        
        end
        
        if
        18@ == 0
        then
        008B: 2@ = $SURV1_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER1 // (int)
        end
        
        if
        18@ == 1
        then
        008B: 2@ = $SURV2_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER2 // (int)
        end
        
        if
        18@ == 2
        then
        008B: 2@ = $SURV3_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER3 // (int)
        end
        
        if
        18@ == 3
        then
        008B: 2@ = $SURV4_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER4 // (int)
        end
        
        if
        18@ == 4
        then
        008B: 2@ = $SURV5_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER5 // (int)
        end        
        
        if
        001D:   3@ > 2@  // (int)
        then
        
        if and
        COOP_ACTIVE_FLAG == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        1@ = 114
        else
        1@ = 650
        end
        
        if
        18@ == 0
        then
        random_int $SURV1_ASS_HEAL2 100 5000
        $ASS_HEAL_TIMER1 += 5100
        end
        
        if
        18@ == 1
        then
        random_int $SURV2_ASS_HEAL2 100 5000
        $ASS_HEAL_TIMER2 += 5100
        end
        
        if
        18@ == 2
        then
        random_int $SURV3_ASS_HEAL2 100 5000
        $ASS_HEAL_TIMER3 += 5100
        end
        
        if
        18@ == 3
        then
        random_int $SURV4_ASS_HEAL2 100 5000
        $ASS_HEAL_TIMER4 += 5100
        end
        
        if
        18@ == 4
        then
        random_int $SURV5_ASS_HEAL2 100 5000
        $ASS_HEAL_TIMER5 += 5100 
        end
        
        end
        
        if and
        801D: not  0@ > 1@  // (int)
        not actor.Dead(SURVIVER)        
        not 0@ == 0
        $END_SAVING == 0
        803A: not  SURVIVER == COOP_ACTOR // (int)
            then
            if or
            SURVIVOR_HEAL_COUNT > 0
            SURVIVOR_BINT_COUNT > 0
                then
                gosub @SURVIVER_HEAL
                else
                if
                056D:   actor SURVIVER defined
                    then
                    
                    if
                    803A: not  SURVIVER == COOP_ACTOR // (int)
                    then
                    0@ = 150
                    else
                    0@ = 26
                    end
                    
                    if and
                    SURVIVOR_BLEEDING_FLAG == 0
                    8184:   actor SURVIVER health < 0@                    
                        then
                        SURVIVOR_BLEEDING_FLAG = 1
                        05C1: AS_actor SURVIVER speak_from_audio_table 179
                        0332: set_actor SURVIVER bleeding 1                                                
                        0@ = Actor.Health(SURVIVER)
                        
                        if
                        803A: not  SURVIVER == COOP_ACTOR // (int)
                        then
                        0@ -= 50
                        else
                        0@ -= 8
                        end
                         
                        Actor.Health(SURVIVER) = 0@   
                        33@ = 0
                        if and
                        SURVIVOR_IN_PLAYER_TEAM == 1
                        0104:   actor SURVIVER near_actor PLAYER_ACTOR radius DEAD_TALK_RADIUS DEAD_TALK_RADIUS DEAD_TALK_RADIUS_Z 0
                        $STORY_FLAG == 0
                        $PHRASES_OFF_FLAG == 0
                            then
                            gosub @RANDOM_DIALOG_PEOPLE_HEAL
                            text.ShowTextBox('INV160')
                            11@ = marker.CreateAboveActor(SURVIVER)
                            marker.SetIconSize(11@,2)
                            marker.SetColor(11@,1)
                            
                            0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                        
                            if
                            not 0@ == 1
                            then
                            audiostream.Loop($PUDDLEOFYOUHIT_SOUND,1)
                            audiostream.Volume($PUDDLEOFYOUHIT_SOUND) = $SOUNDS_VOLUME
                            audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,PLAY)
                            end  
                             
                            gosub @SURV_NAME_CHECK
                            
                            09FD: get_gxt_string v$PHRASE3 width_to 3@
                            0093: 3@ = integer 3@ to_float
                            3@ *= 12.0
                            0092: 3@ = float 3@ to_integer  
                            
                            0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 3@ 1    
                            //gosub @SHOW_FUCKING_VOICE
                            wait 0
                            33@ = 0            
                    
                            :RANDOM_PEOPLE1_HEAL_SAVE_FIX
                            wait 0
                            
                            if
                            $SAVESTATUS_TRUE == 1
                                then
                                text.ClearAll()
                                
                                if
                                075C:   marker 11@ enabled
                                then
                                marker.Disable(11@)
                                end
                                
                                text.RemoveTextBox()
                                jump to @RANDOM_PEOPLE1_CHECK_IDLE
                                end
                                
                            if and
                            00DF:   actor SURVIVER driving
                            00DF:   actor PLAYER_ACTOR driving
                            89DE: not  actor SURVIVER entering_car
                            89DE: not  actor PLAYER_ACTOR entering_car
                            8E4A: not is_char_exiting_any_car SURVIVER
                            8E4A: not is_char_exiting_any_car PLAYER_ACTOR
                            then    
                            
                            0@ = actor.CurrentCar(SURVIVER)
                            1@ = actor.CurrentCar(PLAYER_ACTOR)    
                            if and
                            0E3E: is_button_just_pressed 0 button 11
                            003B:   0@ == 1@  // (int)                    
                            then
                            if or
                            $BINT > 0
                            $HEAL > 0
                                then
                                
                                if
                                $BINT > 0
                                then
                                text.ShowTextBox('INV316')
                                $BINT -= 1
                                SURVIVOR_BINT_COUNT += 1
                                gosub @PLAY_DROP_SOUND2
                                text.ClearAll()
                                018B: set_marker 11@ radar_mode 0
                                018B: set_marker 11@ radar_mode 2
                                gosub @SURVIVER_HEAL
                                else
                                text.ShowTextBox('INV316')                        
                                $HEAL -= 1
                                SURVIVOR_HEAL_COUNT += 1
                                gosub @PLAY_DROP_SOUND2
                                text.ClearAll()
                                018B: set_marker 11@ radar_mode 0
                                018B: set_marker 11@ radar_mode 2
                                gosub @SURVIVER_HEAL
                                end                        
                                
                                jump to @SURV_HEAL_GIVE_INCAR
                                else
                                text.ShowTextBox('INV318')
                                end
                            end
                            
                            end
                            
                            if and
                            0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 3.0 3.0 3.0 sphere 0
                            not actor.Driving(PLAYER_ACTOR)
                            then
                            marker.Disable(11@)
                            jump to @SURV_HEAL_GIVE_INCAR
                            end    
                            
                            if or
                            001D:   33@ > 3@  // (int)
                            actor.Dead(SURVIVER) 
                            jf @RANDOM_PEOPLE1_HEAL_SAVE_FIX
                            
                            :SURV_HEAL_GIVE_INCAR
                            text.ClearAll()
                            
                            if
                            075C:   marker 11@ enabled
                            then
                            marker.Disable(11@)
                            end
                            
                            text.RemoveTextBox()
                            end
                        end            
                    end
                end
            end
        end        
    end
    
////////////////////////////////////////////////Автолечение выжившего////////////////////////////////////////////////                

if or
$GAMEMODE_HOLD == 1
$DEFENSE_CHALLENGE_FLAG == 1
then
if and
056D:   actor SURVIVER defined
803A: not  SURVIVER == COOP_ACTOR // (int)
    then
    04DD: 0@ = actor SURVIVER armour
    if and
    056D:   actor SURVIVER defined
    not Actor.Animation(SURVIVER) == "getup"
    not Actor.Animation(SURVIVER) == "FLOOR_hit"
    not Actor.Animation(SURVIVER) == "KO_skid_front"
    not actor.Animation(SURVIVER) == "CAR_sitpLO"
    0@ == 0 
        then
        0@ = actor.Health(SURVIVER)
        
        if
        SURVIVOR_BINT_COUNT > 0
        then
        0D39: 1@ = actor SURVIVER max_health
        0092: 1@ = float 1@ to_integer
        1@ /= 2
        else
        0D39: 1@ = actor SURVIVER max_health
        0092: 1@ = float 1@ to_integer
        1@ /= 4
        end
        
        if
        18@ == 0
        then
        008B: 2@ = $SURV1_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER1 // (int)
        end
        
        if
        18@ == 1
        then
        008B: 2@ = $SURV2_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER2 // (int)
        end
        
        if
        18@ == 2
        then
        008B: 2@ = $SURV3_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER3 // (int)
        end
        
        if
        18@ == 3
        then
        008B: 2@ = $SURV4_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER4 // (int)
        end
        
        if
        18@ == 4
        then
        008B: 2@ = $SURV5_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER5 // (int)
        end        
        
        if
        001D:   3@ > 2@  // (int)
        then
        
        0D39: 1@ = actor SURVIVER max_health
        1@ *= 0.65
        0092: 1@ = float 1@ to_integer        
        
        if
        18@ == 0
        then
        random_int $SURV1_ASS_HEAL2 100 2000
        $ASS_HEAL_TIMER1 += 2100
        end
        
        if
        18@ == 1
        then
        random_int $SURV2_ASS_HEAL2 100 2000
        $ASS_HEAL_TIMER2 += 2100
        end
        
        if
        18@ == 2
        then
        random_int $SURV3_ASS_HEAL2 100 2000
        $ASS_HEAL_TIMER3 += 2100
        end
        
        if
        18@ == 3
        then
        random_int $SURV4_ASS_HEAL2 100 2000
        $ASS_HEAL_TIMER4 += 2100
        end
        
        if
        18@ == 4
        then
        random_int $SURV5_ASS_HEAL2 100 2000
        $ASS_HEAL_TIMER5 += 2100 
        end
        
        end
        
        if and
        801D: not  0@ > 1@  // (int)
        not actor.Dead(SURVIVER)
        not 0@ == 0
        $END_SAVING == 0
            then
            if or
            SURVIVOR_HEAL_COUNT > 0
            SURVIVOR_BINT_COUNT > 0
                then
                gosub @SURVIVER_HEAL
                else                         
                end
            end
        end
    end
end
    
////////////////////////////////////////////////Автолечение выжившего (2)////////////////////////////////////////////////    

if or
$GAMEMODE_EDITOR == 1
$GAMEMODE_WAR == 1
then    
if and
056D:   actor SURVIVER defined
803A: not  SURVIVER == COOP_ACTOR // (int)
    then
    04DD: 0@ = actor SURVIVER armour
    if and
    056D:   actor SURVIVER defined
    not Actor.Animation(SURVIVER) == "getup"
    not Actor.Animation(SURVIVER) == "FLOOR_hit"
    not Actor.Animation(SURVIVER) == "KO_skid_front"
    0@ == 0 
        then
        0@ = actor.Health(SURVIVER)
        
        if and
        COOP_ACTIVE_FLAG == 1
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        then
        
        if
        SURVIVOR_BINT_COUNT > 0
        then
        1@ = 88
        else
        1@ = 44
        end
        
        else
        
        if
        SURVIVOR_BINT_COUNT > 0
        then
        1@ = 500
        else
        1@ = 250
        end                
        
        end
        
        if
        18@ == 0
        then
        008B: 2@ = $SURV1_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER1 // (int)
        end
        
        if
        18@ == 1
        then
        008B: 2@ = $SURV2_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER2 // (int)
        end
        
        if
        18@ == 2
        then
        008B: 2@ = $SURV3_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER3 // (int)
        end
        
        if
        18@ == 3
        then
        008B: 2@ = $SURV4_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER4 // (int)
        end
        
        if
        18@ == 4
        then
        008B: 2@ = $SURV5_ASS_HEAL2 // (int)
        008B: 3@ = $ASS_HEAL_TIMER5 // (int)
        end        
        
        if
        001D:   3@ > 2@  // (int)
        then
        1@ = 650                
        
        if
        18@ == 0
        then
        random_int $SURV1_ASS_HEAL2 100 300
        $ASS_HEAL_TIMER1 += 310
        end
        
        if
        18@ == 1
        then
        random_int $SURV2_ASS_HEAL2 100 300
        $ASS_HEAL_TIMER2 += 310
        end
        
        if
        18@ == 2
        then
        random_int $SURV3_ASS_HEAL2 100 300
        $ASS_HEAL_TIMER3 += 310
        end
        
        if
        18@ == 3
        then
        random_int $SURV4_ASS_HEAL2 100 300
        $ASS_HEAL_TIMER4 += 310
        end
        
        if
        18@ == 4
        then
        random_int $SURV5_ASS_HEAL2 100 300
        $ASS_HEAL_TIMER5 += 310 
        end
        
        end
        
        if and
        801D: not  0@ > 1@  // (int)
        not actor.Dead(SURVIVER)
        not 0@ == 0
        $END_SAVING == 0
            then
            if or
            SURVIVOR_HEAL_COUNT > 0
            SURVIVOR_BINT_COUNT > 0
                then
                gosub @SURVIVER_HEAL
                else                         
                end
            end
        end
    end
end
    
////////////////////////////////////////////////Восстановление союзника после лечения////////////////////////////////////////////////                
    
if and
SURVIVOR_BLEEDING_FLAG == 1
056D:   actor SURVIVER defined
    then
    0@ = actor.Health(SURVIVER)
    if
    0@ >= 150
        then
        SURVIVOR_BLEEDING_FLAG = 0        
        0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                
        if
        0@ == 1
        then
        audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
        end
         
        0332: set_actor SURVIVER bleeding 0
        actor.WeaponAccuracy(SURVIVER) = 100
        07DD: set_actor SURVIVER attack_rate 100 // previously known as temper_to
        end
    end
    
////////////////////////////////////////////////Выдача роли////////////////////////////////////////////////    

if and
$PANEL_OPEN == 0
$PHRASES_OFF_FLAG == 0
$SAVESTATUS_TRUE == 0
$HUD_REMOVE == 0
not $GAMEMODE_EDITOR == 1
not $GAMEMODE_WAR == 1
not $GAMEMODE_HOLD == 1
then  

if and
18@ == 1
8E45: frame_mod 2
then
jump to @SURV_SKIP_ROLE_GET_FOR_THIS_FRAME 
end

if and
18@ == 2
8E45: frame_mod 3
then
jump to @SURV_SKIP_ROLE_GET_FOR_THIS_FRAME
end

if and
18@ == 3
8E45: frame_mod 4
then
jump to @SURV_SKIP_ROLE_GET_FOR_THIS_FRAME
end

if and
18@ == 4
8E45: frame_mod 5
then
jump to @SURV_SKIP_ROLE_GET_FOR_THIS_FRAME
end

{$INCLUDE Random Survivors Random Role.txt}

:SURV_SKIP_ROLE_GET_FOR_THIS_FRAME

end

{$INCLUDE Random Survivors Teammate Role.txt}             

jump to @RANDOM_PEOPLE1_CHECK_IDLE

:CHECK_FOR_ANY_DISPLAYED_ROLE_GAIN
0@ = 0

if or
0A2A:   text_box 'GME1458' displayed
0A2A:   text_box 'GME1459' displayed
0A2A:   text_box 'GME1460' displayed
0A2A:   text_box 'GME1461' displayed
0A2A:   text_box 'GME1462' displayed
0A2A:   text_box 'GME1463' displayed
0A2A:   text_box 'GME1464' displayed
0A2A:   text_box 'GME1465' displayed
then
0@ = 1
end

if
0A2A:   text_box 'GME1466' displayed
then
0@ = 1
end

return

:TEAMMATE_BUFF_CHECK   

if
18@ == 0
then
008B: 3@ = $SURV1_TEAM_TIME // (int)
end
        
if
18@ == 1
then
008B: 3@ = $SURV2_TEAM_TIME // (int)
end
        
if
18@ == 2
then
008B: 3@ = $SURV3_TEAM_TIME // (int)
end
        
if
18@ == 3
then
008B: 3@ = $SURV4_TEAM_TIME // (int)
end
        
if
18@ == 4
then
008B: 3@ = $SURV5_TEAM_TIME // (int)
end   

if or
SURVIVOR_IN_PLAYER_TEAM == 0
3@ < 44000
$FREEMODE == 0
$GAMEMODE_STORYLINE == 1
then
return
end      

if
18@ == 0
then
008B: 3@ = TEAMMATE1_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[0]
end
    
if
18@ == 1
then
008B: 3@ = TEAMMATE2_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[1]
end
    
if
18@ == 2
then
008B: 3@ = TEAMMATE3_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[2]
end
    
if
18@ == 3
then
008B: 3@ = TEAMMATE4_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[3]
end
    
if
18@ == 4
then
008B: 3@ = TEAMMATE5_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[4]
end       

//if and
//0457:   player PLAYER_CHAR aiming_at_actor SURVIVER
//$CHEATS_ON == 1 
//then
//0AD1: show_formatted_text_highpriority "NEAR FOR BUFF FLAG %d, CURRENT ROLE %s" time 500 3@ 1@s
//wait 500
//end

9@ = 80.0
if or
0D49:  0@ = compare_strings 1@s "SN1_3" // IF and SET
0D49:  0@ = compare_strings 1@s "SN1_7" // IF and SET
then
9@ = 10.0  
//0AD1: show_formatted_text_highpriority "10 RADIUS 2" time 500
//wait 500
end

if
0D49:  0@ = compare_strings 1@s "SN1_5" // IF and SET
then
9@ = 40.0 
end

if
0D49:  0@ = compare_strings 1@s "SN1_4" // IF and SET
then
9@ = 999.0
end

//0AD1: show_formatted_text_highpriority "PLAYER IS NEAR CHECK %f, %d" time 500 9@ 3@
//wait 500
if and
0EE4: locate_char_distance_to_char SURVIVER char PLAYER_ACTOR radius 9@
06EE:   actor SURVIVER in_group PLAYER_GROUP
3@ == 0
then

if and
8D49: not 0@ = compare_strings 1@s "SN1_0" // IF and SET
8D49: not 0@ = compare_strings 1@s "SN1_0B" // IF and SET
    then
    
    if
    $CHEATS_ON == 1
    then
    0AD1: show_formatted_text_highpriority "DO SPECIFIC BUFF" time 500
    wait 500
    end
    
    if
    18@ == 0
    then
    gosub @TEAMMATE_DO_SPECIFIC_BUFF
    3@ = 1
    end
        
    if
    18@ == 1
    then
    gosub @TEAMMATE_DO_SPECIFIC_BUFF
    3@ = 1
    end
        
    if
    18@ == 2
    then
    gosub @TEAMMATE_DO_SPECIFIC_BUFF
    3@ = 1
    end
        
    if
    18@ == 3
    then
    gosub @TEAMMATE_DO_SPECIFIC_BUFF
    3@ = 1
    end
        
    if
    18@ == 4
    then
    gosub @TEAMMATE_DO_SPECIFIC_BUFF
    3@ = 1
    end
    
    return
    
    end

else

9@ = 80.0
if or
0D49:  0@ = compare_strings 1@s "SN1_3" // IF and SET
0D49:  0@ = compare_strings 1@s "SN1_7" // IF and SET
then
9@ = 10.0
//0AD1: show_formatted_text_highpriority "10 RADIUS 2" time 500
//wait 500
end

if
0D49:  0@ = compare_strings 1@s "SN1_5" // IF and SET
then
9@ = 40.0 
end

if
0D49:  0@ = compare_strings 1@s "SN1_4" // IF and SET
then
9@ = 999.0  
end

//0AD1: show_formatted_text_highpriority "PLAYER IS NEAR CHECK 2 %f, %d" time 500 9@ 3@
//wait 500

if and
86EE: not  actor SURVIVER in_group PLAYER_GROUP
not 3@ == 0
    then
    jump to @TEAMMATE_UNDO_BUFF_CUZ_NOT_IN_GROUP
    end

if and
8EE4: not locate_char_distance_to_char SURVIVER char PLAYER_ACTOR radius 9@
not 3@ == 0
    then
    
    :TEAMMATE_UNDO_BUFF_CUZ_NOT_IN_GROUP
    
//    if
//    $CHEATS_ON == 1    
//    then
//    0AD1: show_formatted_text_highpriority "UNDO SPECIFIC BUFF" time 500
//    wait 500
//    end
    
    if
    18@ == 0
    then
    gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
    TEAMMATE1_CURRENT_BUFF = 0    
    end
        
    if
    18@ == 1
    then
    gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
    TEAMMATE2_CURRENT_BUFF = 0    
    end
        
    if
    18@ == 2
    then
    gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
    TEAMMATE3_CURRENT_BUFF = 0    
    end
        
    if
    18@ == 3
    then
    gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
    TEAMMATE4_CURRENT_BUFF = 0    
    end
        
    if
    18@ == 4
    then
    gosub @TEAMMATE_UNDO_SPECIFIC_BUFF
    TEAMMATE5_CURRENT_BUFF = 0    
    end
    
    end
end

return

:TEAMMATE_DO_SPECIFIC_BUFF

if
0D49: 0@ = compare_strings 1@s "SN1_1" // Лучший друг
then

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = -1
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = -1
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = -1
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = -1
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = -1
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_2" // Выживaльщиk
then
$XP_COEFF += 0.1

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 1
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 1
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 1
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 1
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 1
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_3" // Пepeгoвopщиk
then
QUESTS_MONEY_COEFF += 0.20

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 2
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 2
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 2
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 2
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 2
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_4" // Тopгoвeц
then
$ADDITIONAL_PRICE_COEFF -= 0.10

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 3
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 3
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 3
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 3
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 3
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_5" // Спортивный трейнер
then
EXTRA_FATIGUE_RESIST += 1

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 4
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 4
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 4
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 4
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 4
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_6" // Диетолог
then
EXTRA_HUNGER_RESIST += 1
$SATIETY_MINUS_EXTRA -= 0.10

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 5
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 5
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 5
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 5
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 5
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_7" // Медик
then
EXTRA_MEDS_HEAL += 1

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 6
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 6
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 6
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 6
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 6
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_8" // Инcтpykтop по стрельбе
then
EXTRA_CRIT_CHANCE += 5

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 7
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 7
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 7
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 7
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 7
end

////////////////////////////////////////////////////

end

if
0D49: 0@ = compare_strings 1@s "SN1_9" // Бepcepkep
then
EXTRA_MELEE_CRIT += 15

////////////////////////////////////////////////////

if
18@ == 0
then
TEAMMATE1_CURRENT_BUFF = 8
end
        
if
18@ == 1
then
TEAMMATE2_CURRENT_BUFF = 8
end
        
if
18@ == 2
then
TEAMMATE3_CURRENT_BUFF = 8
end
        
if
18@ == 3
then
TEAMMATE4_CURRENT_BUFF = 8
end
        
if
18@ == 4
then
TEAMMATE5_CURRENT_BUFF = 8
end

////////////////////////////////////////////////////

end

return

:TEAMMATE_UNDO_SPECIFIC_BUFF

if or
SURVIVOR_IN_PLAYER_TEAM == 0
$FREEMODE == 0
$GAMEMODE_STORYLINE == 1
then
return
end

if
18@ == 0
then
008B: 3@ = TEAMMATE1_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[0]  
end
    
if
18@ == 1
then
008B: 3@ = TEAMMATE2_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[1]
end
    
if
18@ == 2
then
008B: 3@ = TEAMMATE3_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[2]
end
    
if
18@ == 3
then
008B: 3@ = TEAMMATE4_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[3]
end
    
if
18@ == 4
then
008B: 3@ = TEAMMATE5_CURRENT_BUFF // (int)
0AD3: 1@s = format "%s" v$SURVIVOR_PROLOUGE[4]
end

if
3@ > 0
then 

if
0D49: 0@ = compare_strings 1@s "SN1_2" // Выживaльщиk
then
$XP_COEFF -= 0.1
end

if
0D49: 0@ = compare_strings 1@s "SN1_3" // Пepeгoвopщиk
then
QUESTS_MONEY_COEFF -= 0.20
end

if
0D49: 0@ = compare_strings 1@s "SN1_4" // Тopгoвeц
then
$ADDITIONAL_PRICE_COEFF += 0.10
end

if
0D49: 0@ = compare_strings 1@s "SN1_5" // Спортивный трейнер
then
EXTRA_FATIGUE_RESIST -= 1
end

if
0D49: 0@ = compare_strings 1@s "SN1_6" // Диетолог
then
EXTRA_HUNGER_RESIST -= 1
$SATIETY_MINUS_EXTRA += 0.10
end

if
0D49: 0@ = compare_strings 1@s "SN1_7" // Медик
then
EXTRA_MEDS_HEAL -= 1
end

if
0D49: 0@ = compare_strings 1@s "SN1_8" // Инcтpykтop по стрельбе
then
EXTRA_CRIT_CHANCE -= 5
end

if
0D49: 0@ = compare_strings 1@s "SN1_9" // Бepcepkep
then
EXTRA_MELEE_CRIT -= 15
end

end

return 

:RANDOM_SURV_WEAPON_GIVE_CHECK

if and
not 0@ == 46
not 0@ == 92
not 0@ == 151
//0@ > 18
    then    
    if or      
    0@ < 39
    0@ >= 70
        then
        3@ = 1
        end
    end
    
if or
PLAYER_USING_MELEE_FLAG == 1
0@ == 115
0@ == 118
0@ == 132
0@ == 133
0@ == 134
    then
    3@ = 0
    end
    
if or
0@ == 177
0@ == 178
0@ == 179
0@ == 207
0@ == 208
0@ == 209
    then
    3@ = 0
    end        

return

:PLAY_DROP_SOUND2
Audiostream.Volume($DROP_ITEM_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($DROP_ITEM_SOUND, 0)
Audiostream.PerformAction($DROP_ITEM_SOUND, PLAY) 
return

:PLAY_PICKUP_SOUND2
Audiostream.Volume($PICKUP_ITEM_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($PICKUP_ITEM_SOUND, 0)
Audiostream.PerformAction($PICKUP_ITEM_SOUND, PLAY) 
return

:RANDOM_SURV_RUN_IN_CAR_CHECK

0@ = 0

if or
$ZOMBIES_HORDE == 1
$PEOPLE_DONT_ATTACK == 1
$SOUND_EFFECT1_FLAG == 1
CAMP_RAID_FLAG == 1
    then
    0@ = 1
    end

if
056D:   actor $HUNTER[0] defined
    then
    if
    0104:   actor $HUNTER[0] near_actor SURVIVER radius 30.0 30.0 30.0 0
        then
        0@ = 1
        end
    end
    
if
056D:   actor $TANK[0] defined
    then
    if
    0104:   actor $TANK[0] near_actor SURVIVER radius 30.0 30.0 30.0 0
        then
        0@ = 1
        end
    end
    
if
056D:   actor $CHARGER[0] defined
    then
    if
    0104:   actor $CHARGER[0] near_actor SURVIVER radius 30.0 30.0 30.0 0
        then
        0@ = 1
        end
    end
    
if
056D:   actor $WITCH[0] defined
    then
    if 
    0104:   actor $WITCH[0] near_actor SURVIVER radius 30.0 30.0 30.0 0
        then
        0@ = 1
        end
    end            

return

:RANDOM_PEOPLE1_GROUP_CREATE    
return

:SURVIVER_HEAL

if or
0818:  actor SURVIVER in_air
04AD:   actor SURVIVER in_water
then
return
end

0@ = Actor.Health(SURVIVER)
0D39: 1@ = actor SURVIVER max_health
1@ *= 0.25
0092: 1@ = float 1@ to_integer

if and
COOP_ACTIVE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then

if or 
COOP_2P_USE_BINT == 1
COOP_2P_USE_HEAL == 1
    then
    
    if and
    SURVIVOR_HEAL_COUNT > 0
    COOP_2P_USE_HEAL == 1
    802D: not  0@ >= 1@  // (int)
    then
    jump to @SURVIVER_HEAL_USE
    end
    
    if
    COOP_2P_USE_BINT > 0
    then
    jump to @SURVIVER_BINT_USE
    end
    
    else
    
    if and
    SURVIVOR_HEAL_COUNT > 0
    802D: not  0@ >= 1@  // (int)
    then
    jump to @SURVIVER_HEAL_USE
    end
    
    if
    SURVIVOR_BINT_COUNT > 0
    then
    jump to @SURVIVER_BINT_USE
    end
    
    end

else

if and
SURVIVOR_HEAL_COUNT > 0
802D: not  0@ >= 1@  // (int)
then
jump to @SURVIVER_HEAL_USE
end

if
SURVIVOR_BINT_COUNT > 0
then
jump to @SURVIVER_BINT_USE
end

end

return

:SURVIVER_FOOD_USE

if
003A:  SURVIVER == COOP_ACTOR // (int)
    then
    jump to @SURVIVER_FOOD_USE_COOP
    end

SURVIVOR_BANKA_COUNT -= 1
SURVIVOR_MEL_TRG = -69 

0470: 0@ = actor SURVIVER current_weapon
01B9: set_actor SURVIVER armed_weapon_to 0

2@ = Audiostream.Load3d("AUDIO\SOUNDS\food_eat_sound.wav")
Audiostream.LinkToActor(2@, SURVIVER)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

SURVIVOR_SATIETY += 200

model.Load(2880)
mload  

1@ = Object.Create(2880, 0.0, 0.0, 0.0) 
0750: set_object 1@ visibility 0 

if or
actor.Driving(SURVIVER)
0449:  actor SURVIVER in_a_car
then      
Animation.PerfromA(SURVIVER, "EAT_BURGER", "CAMERA", 4.0, 0, 0, 0, 0, -1) 
else
09A0: actor SURVIVER attach_object 1@ with_offset 0.0 0.0 0.0 on_bone 6 16 perform_animation "EAT_BURGER" IFP_file "CAMERA" time -1
end

33@ = 0

repeat
wait 0

if or
actor.Driving(SURVIVER)
0449:  actor SURVIVER in_a_car
then 
0967: actor SURVIVER move_mouth 5 ms
end

Audiostream.Volume(2@) = $SOUNDS_VOLUME

if
803A: not  SURVIVER == COOP_ACTOR // (int)
then
if or
33@ >= 5000
$SAVESTATUS_TRUE == 1
8184:   actor SURVIVER health < 250
0E49: is_char_entering_any_car SURVIVER
0E4A: is_char_exiting_any_car SURVIVER
$HUNTER_ON_PLAYER == 1
    then
    break
    end
else
if or
33@ >= 5000
$SAVESTATUS_TRUE == 1
8184:   actor SURVIVER health < 44
0E49: is_char_entering_any_car SURVIVER
0E4A: is_char_exiting_any_car SURVIVER
$HUNTER_ON_PLAYER == 1
    then
    break
    end
end

until false

Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)
0968: actor SURVIVER stop_mouth  

if and
not actor.Driving(SURVIVER)
8449: not  actor SURVIVER in_a_car
then
0792: disembark_instantly_actor SURVIVER
end

Object.Destroy(1@)
Object.RemoveReferences(1@)  

//model.Destroy(2880)

01B9: set_actor SURVIVER armed_weapon_to 0@
SURVIVOR_MEL_TRG = 0     

return

:SURVIVER_FOOD_USE_COOP

0470: 9@ = actor COOP_ACTOR current_weapon
        
06AB: set_actor COOP_ACTOR all_weapons_hidden 1
0992: set_player 1 weapons_scrollable 0    
0901: enable_player 1 jump_key 0   
082A: set_player 1 able_to_use_crouch_button 0
07CC: set_player 1 can_enter_exit_vehicles 0

3@ = Audiostream.Load3d("AUDIO\SOUNDS\food_eat_sound.wav")
Audiostream.LinkToActor(3@, COOP_ACTOR)
Audiostream.Loop(3@, 0)
Audiostream.PerformAction(3@, PLAY)
Audiostream.Volume(3@) = $SOUNDS_VOLUME

$EATING_STATUS_2P = 1
0629: change_integer_stat 280 to 1

082A: set_player 1 able_to_use_crouch_button 0

random_int 0@ 0 to 3

///////////////////////////////////////  

if
0@ == 0
then

if
actor.Driving(COOP_ACTOR)
then      
Animation.PerfromA(COOP_ACTOR, "EAT_BURGER", "CAMERA", 4.0, 0, 0, 0, 0, -1) 
else
0A1A: actor COOP_ACTOR perform_walk_animation "EAT_BURGER" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 -1 ms // versionC
end

end 

////////////////////////////////////////  

if
0@ == 1
then

if
actor.Driving(COOP_ACTOR)
then  
Animation.PerfromA(COOP_ACTOR, "EAT_CHICKEN", "CAMERA", 4.0, 0, 0, 0, 0, -1)   
else
0A1A: actor COOP_ACTOR perform_walk_animation "EAT_CHICKEN" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 -1 ms // versionC
end

end      

////////////////////////////////////////  

if
0@ == 2
then

if
actor.Driving(COOP_ACTOR)
then  
Animation.PerfromA(COOP_ACTOR, "EAT_PIZZA", "CAMERA", 4.0, 0, 0, 0, 0, -1) 
else
0A1A: actor COOP_ACTOR perform_walk_animation "EAT_PIZZA" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 -1 ms // versionC   
end

end   

32@ = 0

while 32@ < 5000
wait 0
0967: actor COOP_ACTOR move_mouth 5 ms

if and
0@ == 0
not actor.Animation(COOP_ACTOR) == "EAT_BURGER"
    then
    jump to @FOOD_EAT_CANCEL_COOP
    end
    
if and
0@ == 1
not actor.Animation(COOP_ACTOR) == "EAT_CHICKEN"
    then
    jump to @FOOD_EAT_CANCEL_COOP
    end
    
if and
0@ == 2
not actor.Animation(COOP_ACTOR) == "EAT_PIZZA"
    then
    jump to @FOOD_EAT_CANCEL_COOP
    end        

Audiostream.Volume(3@) = $SOUNDS_VOLUME

06AB: set_actor COOP_ACTOR all_weapons_hidden 1
0992: set_player 1 weapons_scrollable 0

if 
$SAVESTATUS_TRUE == 1
    then
    break
    end

end

03E6: remove_text_box 
03E5: show_text_box 'INV4'

SURVIVOR_BANKA_COUNT -= 1
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
0800:   in_two_players_mode
not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
then
06AF: set_player 1 sprint_mode 0
end

SURVIVOR_SATIETY += 200
AFTEREAT_TIMER_2P += 1680
random_int 0@ 5 10
2@ = actor.Health(COOP_ACTOR)
005A: 2@ += 0@  // (int)
actor.Health(COOP_ACTOR) = 2@ 

$EATING_STATUS_2P = 0
0629: change_integer_stat 280 to 0
0992: set_player 1 weapons_scrollable 1
06AB: set_actor COOP_ACTOR all_weapons_hidden 0
0901: enable_player 1 jump_key 1
082A: set_player 1 able_to_use_crouch_button 1
07CC: set_player 1 can_enter_exit_vehicles 1

01B9: set_actor COOP_ACTOR armed_weapon_to 9@

if and
not actor.Driving(COOP_ACTOR)
8818: not actor COOP_ACTOR in_air
84AD: not  actor COOP_ACTOR in_water
then
0A1A: actor COOP_ACTOR perform_walk_animation "fucku" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 1 ms // versionC
end

Audiostream.PerformAction(3@, STOP)
Audiostream.Release(3@)

07CC: set_player 1 can_enter_exit_vehicles 0

32@ = 0

while 32@ < 100
wait 0
0968: actor COOP_ACTOR stop_mouth
end

07CC: set_player 1 can_enter_exit_vehicles 1

if and
$CANALS_CHALLENGE_FLAG == 1
0E4D: random_percent 60
then
PUKE_PROCESS_FLAG_2P = 1
text.ShowTextBox('GAME836')
end

if
not $CANALS_CHALLENGE_FLAG == 1
then

008B: 0@ = $MONTHS_PASSED // (int)

if
not SURVIVAL_CUSTOM_WEAPON_NABOR == 9
then
if
PERK_STEELSTOMACH == 0
    then
    0@ *= 15
    else
    0@ *= 8
    end
else
if
PERK_STEELSTOMACH == 0
    then
    0@ *= 7
    else
    0@ *= 4
    end
end
    
if
$MONTHS_PASSED < 1
    then    
    if
    not SURVIVAL_CUSTOM_WEAPON_NABOR == 9
        then        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 5
            else
            0@ = 3
            end        
        else        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 2
            else
            0@ = 1
            end        
        end    
    end

if
$MONTHS_PASSED == 1
    then    
    if
    not SURVIVAL_CUSTOM_WEAPON_NABOR == 9
        then        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 10
            else
            0@ = 5
            end        
        else        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 5
            else
            0@ = 2
            end        
        end    
    end
   
if
0E4D: random_percent 0@
    then
    PUKE_PROCESS_FLAG_2P = 1
    text.ShowTextBox('GAME836')
    if and
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    0800:   in_two_players_mode
    not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
        then
        06AF: set_player 1 sprint_mode 1
        end
    end

end

return

:FOOD_EAT_CANCEL_COOP

$EATING_STATUS_2P = 0
0629: change_integer_stat 280 to 0
0992: set_player 1 weapons_scrollable 1
06AB: set_actor COOP_ACTOR all_weapons_hidden 0
0901: enable_player 1 jump_key 1
082A: set_player 1 able_to_use_crouch_button 1
07CC: set_player 1 can_enter_exit_vehicles 1

01B9: set_actor COOP_ACTOR armed_weapon_to 9@

if and
not actor.Driving(COOP_ACTOR)
8818: not actor COOP_ACTOR in_air
84AD: not  actor COOP_ACTOR in_water
then
0A1A: actor COOP_ACTOR perform_walk_animation "fucku" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 1 ms // versionC
end

Audiostream.PerformAction(3@, STOP)
Audiostream.Release(3@)

$INV_CLOSED = 1 
07CC: set_player 1 can_enter_exit_vehicles 0

//wait 100

32@ = 0

while 32@ < 100
wait 0
0968: actor COOP_ACTOR stop_mouth
end

07CC: set_player 1 can_enter_exit_vehicles 1
$INV_CLOSED = 0

return

:SURVIVER_HEAL_USE
SURVIVOR_HEAL_COUNT -= 1 

0D39: 0@ = actor SURVIVER max_health
if and
$GAMEMODE_EDITOR == 1
0@ > 1000.0
then
0@ *= 0.35
end
0092: 0@ = float 0@ to_integer
Actor.Health(SURVIVER) = 0@

32@ = 0

2@ = Audiostream.Load3d("AUDIO\SOUNDS\meds_use.wav")
Audiostream.LinkToActor(2@, SURVIVER)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

0ED9: set_char_ignore_damage_anims SURVIVER 1
0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1

if
06EE:   actor SURVIVER in_group PLAYER_GROUP
then
02A9: set_actor SURVIVER immune_to_nonplayer 1
end

if and
80DF: not  actor SURVIVER in_a_car
89DE: not  actor SURVIVER entering_car
8E4A: not is_char_exiting_any_car SURVIVER
then
0792: disembark_instantly_actor SURVIVER
0812: AS_actor SURVIVER perform_animation "BOM_PLANT" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
end 

32@ = 0

repeat
wait 0

Audiostream.Volume(2@) = $SOUNDS_VOLUME
0AB9: get_mp3 2@ state_to 0@

if and
8184:   actor SURVIVER health < 1
80DF: not  actor SURVIVER in_a_car
    then
    0ED9: set_char_ignore_damage_anims SURVIVER 0
    0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 0
    0687: clear_actor SURVIVER task
    wait 1
    0792: disembark_instantly_actor SURVIVER
    05BE: AS_actor SURVIVER die
    break
    end

if or
0@ == -1
not $SAVESTATUS_TRUE == 0  
    then
    break
    end

until false
 
Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)
0ED9: set_char_ignore_damage_anims SURVIVER 0
0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 0

if
06EE:   actor SURVIVER in_group PLAYER_GROUP
then
02A9: set_actor SURVIVER immune_to_nonplayer 0
end

if and
COOP_ACTIVE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
COOP_2P_USE_BINT = 0
COOP_2P_USE_HEAL = 0
end

return

:SURVIVER_BINT_USE
SURVIVOR_BINT_COUNT -= 1  
 
0D39: 2@ = actor SURVIVER max_health
if and
$GAMEMODE_EDITOR == 1
2@ > 1000.0
then
2@ *= 0.50
end
0092: 2@ = float 2@ to_integer
0085: 0@ = 2@ // (int)
0@ /= 2
1@ = Actor.Health(SURVIVER)
005A: 1@ += 0@  // (int)
Actor.Health(SURVIVER) = 1@

if
001D:   1@ > 2@  // (int)
then
Actor.Health(SURVIVER) = 2@ 
end

32@ = 0

2@ = Audiostream.Load3d("AUDIO\SOUNDS\meds_use.wav")
Audiostream.LinkToActor(2@, SURVIVER)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

0ED9: set_char_ignore_damage_anims SURVIVER 1
0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1

if
06EE:   actor SURVIVER in_group PLAYER_GROUP
then
02A9: set_actor SURVIVER immune_to_nonplayer 1
end

if and
80DF: not  actor SURVIVER in_a_car
89DE: not  actor SURVIVER entering_car
8E4A: not is_char_exiting_any_car SURVIVER
then
0792: disembark_instantly_actor SURVIVER
0812: AS_actor SURVIVER perform_animation "BOM_PLANT" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1  // versionB
end 

32@ = 0

repeat
wait 0

Audiostream.Volume(2@) = $SOUNDS_VOLUME
0AB9: get_mp3 2@ state_to 0@

if and
8184:   actor SURVIVER health < 1
80DF: not  actor SURVIVER in_a_car
    then
    0ED9: set_char_ignore_damage_anims SURVIVER 0
    0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 0
    0687: clear_actor SURVIVER task
    wait 1
    0792: disembark_instantly_actor SURVIVER
    05BE: AS_actor SURVIVER die
    break
    end

if or
0@ == -1
not $SAVESTATUS_TRUE == 0  
    then
    break
    end

until false
 
Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)
0ED9: set_char_ignore_damage_anims SURVIVER 0
0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 0

if
06EE:   actor SURVIVER in_group PLAYER_GROUP
then
02A9: set_actor SURVIVER immune_to_nonplayer 0
end

if and
COOP_ACTIVE_FLAG == 1
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
COOP_2P_USE_BINT = 0
COOP_2P_USE_HEAL = 0
end

return

:RANDOM_PEOPLE1_INV_SHOW_START

if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
0E68: set_player_control_pad 1 0 
0E69: set_player_control_pad_movement 1 0
end
  
gosub @2WEIGHT_SET  
$PANEL_OPEN = 1
$PANEL_OPEN2 = 1

if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
gosub @DISEMB_JETP_CHECK
0792: disembark_instantly_actor PLAYER_ACTOR
05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
end

015D: set_gamespeed 0.1  
$PLAYER_MONEY = player.Money(PLAYER_CHAR)
008C: $ITEMS_WEIGHT3 = float $ITEMS_WEIGHT to_integer
0581: enable_radar 0 
$MAX_WEIGHT2 = 80

v$2NAME1 = "N_ME"
0665: get_actor SURVIVER model_to 0@
if
0@ > 10000
then
v$2NAME1 = "N_"
end
0AD3: v$2NAME2 = format "%d" 0@
098B: v$2NAME3 = v$2NAME1 + v$2NAME2

v$NAME1 = "N_ME"
0665: get_actor PLAYER_ACTOR model_to 1@ 
if
1@ > 10000
then
v$NAME1 = "N_"
end
0AD3: v$NAME2 = format "%d" 1@
098B: v$NAME3 = v$NAME1 + v$NAME2

if
FREEMODE_CUSTOM_NAME == 1 
then
06D1: v$NAME3 = "F_NAME" // v$ = string
end

008B: 27@ = $MINUTES_PLAYED // (int)
008B: 28@ = $HOURS_PLAYED // (int)
28@ *= 60
005A: 27@ += 28@  // (int)

if
18@ == 0
then
098B: v$PORN = v$SURVIVOR_PROLOUGE[0] + v$GAY // all string variables
end
    
if
18@ == 1
then
098B: v$PORN = v$SURVIVOR_PROLOUGE[1] + v$GAY // all string variables
end
    
if
18@ == 2
then
098B: v$PORN = v$SURVIVOR_PROLOUGE[2] + v$GAY // all string variables
end

if
18@ == 3
then
098B: v$PORN = v$SURVIVOR_PROLOUGE[3] + v$GAY // all string variables
end
    
if
18@ == 4
then
098B: v$PORN = v$SURVIVOR_PROLOUGE[4] + v$GAY // all string variables
end

0092: 15@ = float 15@ to_integer

if and
18@ == 0
TEAM1_SKIN > 0
not $GAMEMODE_EDITOR == 1
then
06D1: v$2NAME3 = "F_NAME1" // v$ = string
end

if and
18@ == 1
TEAM2_SKIN > 0
not $GAMEMODE_EDITOR == 1
then
06D1: v$2NAME3 = "F_NAME2" // v$ = string
end

if and
18@ == 2
TEAM3_SKIN > 0
not $GAMEMODE_EDITOR == 1
then
06D1: v$2NAME3 = "F_NAME3" // v$ = string
end

0@ = 0
08D4: 0@ = create_panel_with_title 'INV375' position 71.0 130.0 width 300.0 columns 2 interactive 1 background 1 alignment 1
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then 
08DB: set_panel SURV_IN_PANEL_VAR column 0 header v$2NAME3 data 'INV1' 'INV5' 'INV9' 'INV18' 'INV35' 'INV90' 'INV196' 'INV15' 'INV68' 'INV88' 'INV153' 'DUMMY'
else
08DB: set_panel SURV_IN_PANEL_VAR column 0 header v$2NAME3 data 'INV1' 'INV5' 'INV9' 'INV18B' 'INV35' 'INV90' 'INV196' 'INV15' 'INV68' 'INV88' 'INV374' v$PORN
end

if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
0512: show_permanent_text_box 'INV8D'

if
$SURVIVOR_KANISTRA_COUNT[COOP_ACTOR_SURV_NUM] > 0
then
008C: $KANISTRA_FUEL2 = float $KANISTRA_FUEL_2P to_integer
else
$KANISTRA_FUEL2 = 0
end

else

if
8A4B: not  controls_set_to_joystick
then
0512: show_permanent_text_box 'INV70B'  
else
0512: show_permanent_text_box 'INV70'
end

end
 
08D6: set_panel SURV_IN_PANEL_VAR column 1 alignment 1 
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 0 text_1number GXT 'INV3' number SURVIVOR_BANKA_COUNT 
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 1 text_1number GXT 'INV3' number SURVIVOR_HEAL_COUNT 
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 2 text_1number GXT 'INV3' number SURVIVOR_BINT_COUNT
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then

if
$SURVIVOR_KANISTRA_COUNT[COOP_ACTOR_SURV_NUM] > 0
then
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 3 text_1number GXT 'INV3B' number $KANISTRA_FUEL2
else
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 3 text_1number GXT 'INV3C' number $KANISTRA_FUEL2
end
 
else
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 3 text_1number GXT 'INV3' number SURVIVOR_KANISTRA_COUNT
end 
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 4 text_1number GXT 'INV3' number SURVIVOR_RADIO_COUNT
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 5 text_1number GXT 'INV3' number SURVIVOR_JIMMY_COUNT
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 6 text_1number GXT 'INV3' number SURVIVOR_REPAIR_COUNT
008B: 28@ = SURVIVOR_SATIETY // (int)
28@ /= 4
if
28@ > 100
then
28@ = 100
end
if
28@ < 0
then
28@ = 0
end
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 8 text_1number GXT 'INV288' number 28@
if
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 9 text_1number GXT 'INV189' number 15@
else
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 9 text_1number GXT s$WEIGHT_STRING number 15@
end

if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 10 text_1number GXT 'INV3' number $PLAYER_MONEY
end

if
18@ == 0
then
008B: 2@ = $SURV1_TEAM_TIME // (int)
end
    
if
18@ == 1
then
008B: 2@ = $SURV2_TEAM_TIME // (int)
end
    
if
18@ == 2
then
008B: 2@ = $SURV3_TEAM_TIME // (int)
end
    
if
18@ == 3
then
008B: 2@ = $SURV4_TEAM_TIME // (int)
end
    
if
18@ == 4
then
008B: 2@ = $SURV5_TEAM_TIME // (int)
end

2@ /= 440
if
2@ > 100
then
2@ = 100
end 

if
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
08EE: set_panel SURV_IN_PANEL_VAR column 1 row 10 text_1number GXT 'INV376' number 2@
end

09DB: set_panel SURV_IN_PANEL_VAR column 0 width 142 //230
09DB: set_panel SURV_IN_PANEL_VAR column 1 width 25
08D9: set_panel SURV_IN_PANEL_VAR row 7 enable 0
08D9: set_panel SURV_IN_PANEL_VAR row 8 enable 0
08D9: set_panel SURV_IN_PANEL_VAR row 9 enable 0
08D9: set_panel SURV_IN_PANEL_VAR row 10 enable 0
08D9: set_panel SURV_IN_PANEL_VAR row 11 enable 0

090E: set_panel SURV_IN_PANEL_VAR active_row $ROW_INV

if
$KANISTRA > 0
then
008C: $KANISTRA_FUEL2 = float $KANISTRA_FUEL to_integer
if
$KANISTRA_FUEL2 < 1
then
$KANISTRA_FUEL2 = 1
end

else
$KANISTRA_FUEL2 = 0
end

if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
$INVENTORY_PANEL = 0
08D4: $INVENTORY_PANEL = create_panel_with_title 'INV2' position 352.0 130.0 width 100.0 columns 2 interactive 0 background 1 alignment 1 
08DB: set_panel $INVENTORY_PANEL column 0 header 'DUMMY' data 'INV1' 'INV5' 'INV9' 'INV18' 'INV35' 'INV90' 'INV196' 'INV15' 'INV88' s$TIME2_STRING 'INV153' 'DUMMY' 
08D6: set_panel $INVENTORY_PANEL column 1 alignment 1 
08EE: set_panel $INVENTORY_PANEL column 1 row 0 text_1number GXT 'INV3' number $BANKA 
08EE: set_panel $INVENTORY_PANEL column 1 row 1 text_1number GXT 'INV3' number $HEAL 
08EE: set_panel $INVENTORY_PANEL column 1 row 2 text_1number GXT 'INV3' number $BINT
if
$KANISTRA > 0
then 
08EE: set_panel $INVENTORY_PANEL column 1 row 3 text_1number GXT 'INV3B' number $KANISTRA_FUEL2
else
08EE: set_panel $INVENTORY_PANEL column 1 row 3 text_1number GXT 'INV3C' number $KANISTRA_FUEL2
end 
08EE: set_panel $INVENTORY_PANEL column 1 row 4 text_1number GXT 'INV3' number $RADIO
08EE: set_panel $INVENTORY_PANEL column 1 row 5 text_1number GXT 'INV3' number $JIMMY
08EE: set_panel $INVENTORY_PANEL column 1 row 6 text_1number GXT 'INV3' number $REPAIR_KIT
08EE: set_panel $INVENTORY_PANEL column 1 row 8 text_1number GXT v$WEIGHT_STRING number $ITEMS_WEIGHT3  
08EE: set_panel $INVENTORY_PANEL column 1 row 9 text_1number GXT v$TIME_STRING number 27@
08EE: set_panel $INVENTORY_PANEL column 1 row 10 text_1number GXT 'INV3' number $PLAYER_MONEY
09DB: set_panel $INVENTORY_PANEL column 0 width 142 //230
09DB: set_panel $INVENTORY_PANEL column 1 width 25
090E: set_panel $INVENTORY_PANEL active_row $ROW_INV
end
wait 10
//cinema.Widescreen(1)
jump @RANDOM_PEOPLE1_INV_CHECK1

//Проверка инвертаря//

:GIVE_MENU

if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
if
0E3E: is_button_just_pressed 1 button 4
    then
    08D7: $ROW_INV = panel SURV_IN_PANEL_VAR active_row 
    08DA: remove_panel SURV_IN_PANEL_VAR
    if and
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    COOP_2P_OPEN_INV == 1
    then
    //ass
    else
    08DA: remove_panel $INVENTORY_PANEL
    end 
    03E6: remove_text_box
    0871: init_jump_table $ROW_INV total_jumps 7 default_jump 0 @RANDOM_PEOPLE1_INV_CHECK1 jumps 0 @DROP_EAT 1 @DROP_HEAL 2 @DROP_BINT 3 @DROP_KANISTRA 4 @DROP_RADIO 5 @DROP_JIMMY 6 @DROP_REPAIR_KIT
    0872: jump_table_jumps 7 @DROP_RADIO 8 @DROP_RADIO 9 @DROP_RADIO 10 @DROP_RADIO 11 @DROP_RADIO 12 @DROP_RADIO 13 @DROP_RADIO 14 @DROP_RADIO 15 @DROP_RADIO
    end
if
0E3E: is_button_just_pressed 1 button 16
    then
    08D7: $ROW_INV = panel SURV_IN_PANEL_VAR active_row 
    08DA: remove_panel SURV_IN_PANEL_VAR
    if and
    07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
    COOP_2P_OPEN_INV == 1
    then
    //ass
    else
    08DA: remove_panel $INVENTORY_PANEL
    end 
    03E6: remove_text_box
    0871: init_jump_table $ROW_INV total_jumps 7 default_jump 0 @RANDOM_PEOPLE1_INV_CHECK1 jumps 0 @COOP_USE_EAT 1 @COOP_USE_HEAL 2 @COOP_USE_BINT 3 @COOP_USE_KANISTRA 4 @COOP_USE_RADIO 5 @COOP_USE_JIMMY 6 @COOP_USE_REPAIR_KIT
    0872: jump_table_jumps 7 @COOP_USE_RADIO 8 @COOP_USE_RADIO 9 @COOP_USE_RADIO 10 @COOP_USE_RADIO 11 @COOP_USE_RADIO 12 @COOP_USE_RADIO 13 @COOP_USE_RADIO 14 @COOP_USE_RADIO 15 @COOP_USE_RADIO
    end
jump to @RANDOM_PEOPLE1_INV_CHECK1                 
end    

if
0A4B:   controls_set_to_joystick
then
1@ = 10
else
1@ = 11
end
 
if or
00E1:   player 0 pressed_key 1@
00E1:   player 1 pressed_key 1@ 
jf @TAKE_MENU

08D7: $ROW_INV = panel SURV_IN_PANEL_VAR active_row 
08DA: remove_panel SURV_IN_PANEL_VAR
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
08DA: remove_panel $INVENTORY_PANEL
end 
03E6: remove_text_box
0871: init_jump_table $ROW_INV total_jumps 7 default_jump 0 @RANDOM_PEOPLE1_INV_CHECK1 jumps 0 @GIVE_EAT 1 @GIVE_HEAL 2 @GIVE_BINT 3 @GIVE_KANISTRA 4 @GIVE_RADIO 5 @GIVE_JIMMY 6 @GIVE_REPAIR_KIT
0872: jump_table_jumps 7 @GIVE_RADIO 8 @GIVE_RADIO 9 @GIVE_RADIO 10 @GIVE_RADIO 11 @GIVE_RADIO 12 @GIVE_RADIO 13 @GIVE_RADIO 14 @GIVE_RADIO 15 @GIVE_RADIO

:TAKE_MENU

if
0A4B:   controls_set_to_joystick
then
1@ = 11
else
1@ = 10
end
 
if or
00E1:   player 0 pressed_key 1@
00E1:   player 1 pressed_key 1@ 
jf @RANDOM_PEOPLE1_INV_CHECK1

if
18@ == 0
then
008B: 1@ = $SURV1_TEAM_TIME // (int)
end
    
if
18@ == 1
then
008B: 1@ = $SURV2_TEAM_TIME // (int)
end
    
if
18@ == 2
then
008B: 1@ = $SURV3_TEAM_TIME // (int)
end
    
if
18@ == 3
then
008B: 1@ = $SURV4_TEAM_TIME // (int)
end
    
if
18@ == 4
then
008B: 1@ = $SURV5_TEAM_TIME // (int)
end

1@ /= 440
if
1@ > 100
then
1@ = 100
end 

if and
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
1@ < 30
then
jump to @RANDOM_PEOPLE1_INV_CLOSE2
end

08D7: $ROW_INV = panel SURV_IN_PANEL_VAR active_row 
08DA: remove_panel SURV_IN_PANEL_VAR
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
08DA: remove_panel $INVENTORY_PANEL
end 
03E6: remove_text_box
0871: init_jump_table $ROW_INV total_jumps 7 default_jump 0 @RANDOM_PEOPLE1_INV_CHECK1 jumps 0 @TAKE_EAT 1 @TAKE_HEAL 2 @TAKE_BINT 3 @TAKE_KANISTRA 4 @TAKE_RADIO 5 @TAKE_JIMMY 6 @TAKE_REPAIR_KIT
0872: jump_table_jumps 7 @TAKE_RADIO 8 @TAKE_RADIO 9 @TAKE_RADIO 10 @TAKE_RADIO 11 @TAKE_RADIO 12 @TAKE_RADIO 13 @TAKE_RADIO 14 @TAKE_RADIO 15 @TAKE_RADIO

:RANDOM_PEOPLE1_INV_CHECK1
wait 0
$PANEL_OPEN = 1
08D7: $ROW_INV = panel SURV_IN_PANEL_VAR active_row
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
090E: set_panel $INVENTORY_PANEL active_row $ROW_INV
end

if
0E3E: is_button_just_pressed 1 button 9
    then
    $ROW_INV += 1
    if
    $ROW_INV > 6
        then
        $ROW_INV = 0
        
        if and
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        COOP_2P_OPEN_INV == 1
        then
        //ass
        else
        090E: set_panel $INVENTORY_PANEL active_row $ROW_INV
        end
        
        090E: set_panel SURV_IN_PANEL_VAR active_row $ROW_INV
        Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
        Audiostream.Loop($MENU_FOCUS_SOUND, 0)
        Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
        else
        
        if and
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        COOP_2P_OPEN_INV == 1
        then
        //ass
        else
        090E: set_panel $INVENTORY_PANEL active_row $ROW_INV
        end
        
        090E: set_panel SURV_IN_PANEL_VAR active_row $ROW_INV
        Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
        Audiostream.Loop($MENU_FOCUS_SOUND, 0)
        Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
        end
    end
    
if
0E3E: is_button_just_pressed 1 button 8
    then
    $ROW_INV -= 1
    if
    $ROW_INV < 0
        then
        $ROW_INV = 6
        
        if and
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        COOP_2P_OPEN_INV == 1
        then
        //ass
        else
        090E: set_panel $INVENTORY_PANEL active_row $ROW_INV
        end
        
        090E: set_panel SURV_IN_PANEL_VAR active_row $ROW_INV
        Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
        Audiostream.Loop($MENU_FOCUS_SOUND, 0)
        Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
        else
        
        if and
        07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
        COOP_2P_OPEN_INV == 1
        then
        //ass
        else
        090E: set_panel $INVENTORY_PANEL active_row $ROW_INV
        end
        
        090E: set_panel SURV_IN_PANEL_VAR active_row $ROW_INV
        Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
        Audiostream.Loop($MENU_FOCUS_SOUND, 0)
        Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
        end
    end
    
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else        

////////////////////////////////////////////////Предание союзника игроком////////////////////////////////////////////////                
    
if and
SURVIVOR_IN_PLAYER_TEAM == 1
056D:   actor SURVIVER defined
0A4B:   controls_set_to_joystick
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int) 
    then
    if and
    00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 60.0 60.0 sphere 0
    not CUSTOM_MODE_NO_TEAMMATES_DEATHS == 1
        then 
        if and 
        0E3E: is_button_just_pressed 0 button 16 
        not $MUTATION_ACTIVE == 0
        not $GAMEMODE_STORYLINE == 1
        $GAMEMODE_WAR == 0
        $GAMEMODE_EDITOR == 0
        $GAMEMODE_HOLD == 0
        $DEFENSE_CHALLENGE_FLAG == 0
            then
            gosub @COOP_INV_CLOSE_JUMP
            
            if
            075C:   marker SURVIVOR_STAY_MARK enabled
            then
            marker.Disable(SURVIVOR_STAY_MARK)
            end
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
                    
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
                    
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
                    
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
                    
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
            
            if
            2@ == 1
            then
            
            if
            18@ == 0
            then
            $SURV1_STAY_FLAG = 0
            end
                        
            if
            18@ == 1
            then
            $SURV2_STAY_FLAG = 0
            end
                        
            if
            18@ == 2
            then
            $SURV3_STAY_FLAG = 0
            end
                        
            if
            18@ == 3
            then
            $SURV4_STAY_FLAG = 0
            end
                        
            if
            18@ == 4
            then
            $SURV5_STAY_FLAG = 0
            end
            
            if
            SURVIVOR_ATTACK_TIMER == -1
            then
            SURVIVOR_ATTACK_TIMER = 0
            actor.LockInCurrentPosition(SURVIVER,false)
            end
            
            end
            
            if and
            KARMA_SYS_ON_FLAG == 1
            CARMA_VERY_BAD_FLAG == 0
            then
            CARMA_BAD_POINTS += 10
            Audiostream.Loop($KARMA_BAD,0)
            Audiostream.PerformAction($KARMA_BAD, PLAY)
            Audiostream.Volume($KARMA_BAD) = $SOUNDS_VOLUME
            end
                          
            gosub @RANDOM_DIALOG_LET_GO_PEOPLE           
            text.ClearAll()         
            
            /////////////////////////////// 
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"            
            
            $STATS_TEAMMATE_BETRAYS_TO += 1        
                    
            if
            $CHEATED_FLAG == 0 
            then   
            0@ += 1
            end                
                 
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TEAMMATE_BETRAYS_TO"                
                
            if and
            0@ == 0
            1@ >= 5
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH69"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT69_GOT"                    
                end
                
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT75_GOT"                
                
            if and
            0@ == 0
            $MINUTES_PLAYED >= 50
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH75"
                $ACHIEVEMENT_GOT_FLAG = 1                    
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT75_GOT"                    
                end             
                
            ///////////////////////////////   
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0  
            
            v$NAME1 = "N_ME"
            0665: get_actor PLAYER_ACTOR model_to 1@ 
            if
            1@ > 10000
            then
            v$NAME1 = "N_"
            end
            0AD3: v$NAME2 = format "%d" 1@
            098B: v$NAME3 = v$NAME1 + v$NAME2
            
            if
            FREEMODE_CUSTOM_NAME == 1 
            then
            06D1: v$NAME3 = "F_NAME" // v$ = string
            end 
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0                                       
            
            SURVIVOR_IN_PLAYER_TEAM = 0
            
            if and
            0800:   in_two_players_mode
            07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
            003A:   SURVIVER == COOP_ACTOR // (int)
            then            
            0EA1: disable_second_player_restore_camera 1
            end
            
            06C9: remove_actor SURVIVER from_group
            
            0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
            
            if
            0@ == 1
            then
            audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
            end
            
            if
            UNITED_MAP == 0
            then
            04D8: set_actor SURVIVER drowns_in_water 0
            end
            
            Actor.SetWalkStyle(SURVIVER, "surv5")
            
            gosub @RANDOM_PEOPLE1_GROUP_CREATE
            
            random_int 0@ 0 to 2
            
            if
            PERK_CHARISMA > 1
            then
            0@ = 1
            end
            
            if
            0@ == 0
            then
            
            SURVIVOR_ATTACKED_BY_PLAYER_FLAG = 1
            gosub @RANDOM_DIALOG_LET_GO_ANGER_PEOPLE
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0              
            
            0467: clear_actor SURVIVER last_weapon_damage                                 
            077A: set_actor SURVIVER acquaintance 4 to_actors_pedtype 0 // see ped.dat
            
            ///////////////////////////////
            
            for 0@ = 0 to 5
            092B: 1@ = group PLAYER_GROUP member 0@
            
            if
            056D:   actor 1@ defined
            then
            
            if and
            not actor.Driving(1@)
            not actor.Animation(1@) == "CAR_sitpLO"
            044B:   actor 1@ on_foot
            then    
            05E2: AS_actor 1@ kill_actor SURVIVER
            else
            0713: actor 1@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
            end
                       
            end
            
            ///////////////////////////////
                
            end                                    
            
            0687: clear_actor SURVIVER task
            wait 10
            05E2: AS_actor SURVIVER kill_actor PLAYER_ACTOR
            0568: set_actor SURVIVER untargetable 0
            008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)                
            $VAGINA6_FLAG[18@] = 1
            $VAGINA6_TIME[18@] = 0
            
            05C1: AS_actor SURVIVER speak_from_audio_table 89
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0
            
            else  
                                                
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161
            wait 5
            05C1: AS_actor SURVIVER speak_from_audio_table 161                            
            
            0687: clear_actor SURVIVER task
            wait 10    
            05B9: AS_actor SURVIVER stay_idle 100 ms
            wait 100
            
            gosub @RANDOM_DIALOG_BETRAY_FROM_OTVET
            text.ClearAll()
            
            gosub @SURV_NAME_CHECK
            
            09FD: get_gxt_string v$BPHRASE3 width_to 9@
            0093: 9@ = integer 9@ to_float
            9@ *= 8.0
            0092: 9@ = float 9@ to_integer
            
            32@ = 0
            
            $PHRASES_OFF_FLAG = 1                
                
            repeat
            wait 0 
                
            if
            86EE: not  actor SURVIVER in_group PLAYER_GROUP
            then
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
            end
                
            gosub @SURV_NAME_CHECK 
                
            0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                
            if or
            actor.Dead(SURVIVER)
            $SAVESTATUS_TRUE == 1
            $SAVESTATUS == 1
            $PANEL_OPEN == 1
                then
                $PHRASES_OFF_FLAG = 0
                break
                end
                
            until 002D:   32@ >= 9@  // (int)
                
            $PHRASES_OFF_FLAG = 0            
               
            end
            
            return                                                                                                                                                    
              
            end
        end
    end

////////////////////////////////////////////////Выдача оружия выжившему от игрока////////////////////////////////////////////////      

if and
056D:   actor SURVIVER defined
0A4B:   controls_set_to_joystick
    then    
    04DD: 0@ = actor SURVIVER armour           
    if and                      
    SURVIVOR_IN_PLAYER_TEAM == 1  
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0
    0E3E: is_button_just_pressed 0 button 14    
    0@ == 0
        then
        if
        803A: not  SURVIVER == COOP_ACTOR // (int)
            then
            0470: 0@ = actor PLAYER_ACTOR current_weapon
            0470: 1@ = actor SURVIVER current_weapon            
            3@ = 0            
            gosub @RANDOM_SURV_WEAPON_GIVE_CHECK
            if and            
            3@ == 1
            803B: not  0@ == 1@  // (int)
                then                     
                        
//                017B: set_actor SURVIVER weapon 1@ ammo_to 10                   
                0470: SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID = actor SURVIVER current_weapon
                0555: remove_weapon 1@ from_actor SURVIVER
                
                if  
                CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1            
                then
                041A: SURVIVOR_WEP_AMMO = actor SURVIVER weapon SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID ammo
                end
                
                0470: 0@ = actor PLAYER_ACTOR current_weapon
                041A: 1@ = actor PLAYER_ACTOR weapon 0@ ammo
                        
                if and
                $GAMEMODE_HOLD == 0
                $DEFENSE_CHALLENGE_FLAG == 0
                not CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
                then                
                1@ *= 20
                else
                1@ *= 10
                end
                        
                0781: get_weapon_with_ID 0@ model_to 3@                   
        
                while not model.Available(3@)
                wait 0
                model.Load(3@)
                mload
                end
                 
                actor.GiveWeaponAndAmmo(SURVIVER,0@,1@)                
                0555: remove_weapon 0@ from_actor PLAYER_ACTOR                
                SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 1                
                gosub @SURV_WRITE_SET_INFO_ABOUT_GIVEN_WEP
                
                text.ShowTextBox('INV156')
                gosub @PLAY_DROP_SOUND2
                wait 0
                end
            else
            0470: 0@ = actor PLAYER_ACTOR current_weapon
                               
            0470: SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID = actor SURVIVER current_weapon
            0470: 0@ = actor PLAYER_ACTOR current_weapon
            041A: 1@ = actor PLAYER_ACTOR weapon 0@ ammo                        
                        
            0781: get_weapon_with_ID 0@ model_to 3@                   
        
            while not model.Available(3@)
            wait 0
            model.Load(3@)
            mload
            end
                 
            actor.GiveWeaponAndAmmo(SURVIVER,0@,1@)                
            0555: remove_weapon 0@ from_actor PLAYER_ACTOR                
            SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 1            
            gosub @SURV_WRITE_SET_INFO_ABOUT_GIVEN_WEP
            
            text.ShowTextBox('INV156')
            gosub @PLAY_DROP_SOUND2
            wait 0
            end
        end    
    end
    
////////////////////////////////////////////////Забирание выданного оружия игроком////////////////////////////////////////////////    

if and
056D:   actor SURVIVER defined
0A4B:   controls_set_to_joystick
    then    
    04DD: 0@ = actor SURVIVER armour        
    if and
    SURVIVOR_WEAPON_HAS_GIVEN_FLAG == 1  
    SURVIVOR_THROW_MOLOTOV_FLAG == 0
    SURVIVOR_MELEE_ID >= 0  
    0E3E: is_button_just_pressed 0 button 14  
    0@ == 0
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 0
    803A: not  SURVIVER == COOP_ACTOR // (int)
        then 
//        gosub @RAND_SURV_CHECK_WEAPONSLOT_SHIT
        if or
        2@ == 0
        not 2@ == 0
            then
            0470: 0@ = actor SURVIVER current_weapon
            041A: 1@ = actor SURVIVER weapon 0@ ammo
                    
            if and
            $GAMEMODE_HOLD == 0
            $DEFENSE_CHALLENGE_FLAG == 0
            then
            1@ /= 20
            else
            1@ /= 10
            end
                       
            0781: get_weapon_with_ID 0@ model_to 3@         
            
            while not model.Available(3@)
            wait 0
            model.Load(3@)
            mload
            end
            
            actor.GiveWeaponAndAmmo(PLAYER_ACTOR,0@,1@)            
            0555: remove_weapon 0@ from_actor SURVIVER        
            0781: get_weapon_with_ID SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID model_to 3@          
            
            while not model.Available(3@)
            wait 0
            model.Load(3@)
            mload
            end
            
            if
            not CUSTOM_MODE_TEAMMATES_NO_INF_AMMOS == 1
            then
            actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,99999)
            else
            actor.GiveWeaponAndAmmo(SURVIVER,SURVIVOR_PREV_BEFORE_PLAYER_GIVE_WEAPON_ID,SURVIVOR_WEP_AMMO)
            end
                      
            SURVIVOR_WEAPON_HAS_GIVEN_FLAG = 0            
            gosub @SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP
            
            text.ShowTextBox('INV157')
            gosub @PLAY_PICKUP_SOUND2
            wait 0      
            end
        end
    end    

////////////////////////////////////////////////Выдача выжившему армора от игрока////////////////////////////////////////////////             

if and
056D:   actor SURVIVER defined
0A4B:   controls_set_to_joystick
    then    
    04DD: 0@ = actor SURVIVER armour        
    if and
    06EE:   actor SURVIVER in_group PLAYER_GROUP
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0  
    0E3E: is_button_just_pressed 0 button 17     
    0@ == 0 
        then
        04DD: 0@ = actor PLAYER_ACTOR armour     
        2@ = actor.Health(SURVIVER)             
        if and    
        0@ > 5
        2@ <= 1000
        0104:   actor PLAYER_ACTOR near_actor SURVIVER radius 1.0 1.0 1.0 sphere 0
            then
            
            if
            803A: not  SURVIVER == COOP_ACTOR // (int)
            then    
            04DD: 0@ = actor PLAYER_ACTOR armour
            0@ *= 5            
            04DD: 1@ = actor PLAYER_ACTOR armour
            1@ -= 1000
            actor.AddArmour(PLAYER_ACTOR,1@)             
            2@ = actor.Health(SURVIVER)            
            005A: 2@ += 0@  // (int)              
            actor.Health(SURVIVER) = 2@
            else
            04DD: 1@ = actor PLAYER_ACTOR armour
            035F: actor SURVIVER armour += 1@
            1@ -= 1000
            actor.AddArmour(PLAYER_ACTOR,1@)
            end
            
            text.ShowTextBox('INV158')
            gosub @PLAY_DROP_SOUND2                             
            end         
        end
    end
    
if and
056D:   actor SURVIVER defined
0A4B:   controls_set_to_joystick
SURVIVOR_IN_PLAYER_TEAM == 1
not MAIN_QUEST_TEAMMATES_REMOVE_FLAG == 1
not $ENEMY_ZONE_IN == 1
    then    
    if and
    $SALVATION_FLAG == 0
    $RADIO_HELP_FLAG == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    not actor.Driving(PLAYER_ACTOR)
    not actor.Driving(SURVIVER)
    84AD: not  actor PLAYER_ACTOR in_water
        then
        if and        
        0E3E: is_button_just_pressed 0 button 4
        SURVIVOR_BLEEDING_FLAG == 0
        89DE: not  actor SURVIVER entering_car
        8449: not  actor SURVIVER in_a_car
            then                                                            
            
            if
            18@ == 0
            then
            008B: 2@ = $SURV1_STAY_FLAG // (int)
            end
            
            if
            18@ == 1
            then
            008B: 2@ = $SURV2_STAY_FLAG // (int)
            end
            
            if
            18@ == 2
            then
            008B: 2@ = $SURV3_STAY_FLAG // (int)
            end
            
            if
            18@ == 3
            then
            008B: 2@ = $SURV4_STAY_FLAG // (int)
            end
            
            if
            18@ == 4
            then
            008B: 2@ = $SURV5_STAY_FLAG // (int)
            end
            
            if and
            not $SAVEPLACE_ON == 1
            2@ == 0
            then
            jump to @SKIP_EOPRWEOPR
            end
            
            gosub @COOP_INV_CLOSE_JUMP
             
            if        
            2@ == 0
                then
                
                /////////////////////////////////////////////////////////////////////////////////                                                                              
                
                0687: clear_actor SURVIVER task
                wait 10
                05B9: AS_actor SURVIVER stay_idle 100 ms
                wait 100
                
                if and
                0800:   in_two_players_mode
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                003A:   SURVIVER == COOP_ACTOR // (int)
                then            
                0EA1: disable_second_player_restore_camera 1
                end
                
                06C9: remove_actor SURVIVER from_group
                
                if
                18@ == 0
                then
                $SURV1_STAY_FLAG = 1
                end
                    
                if
                18@ == 1
                then
                $SURV2_STAY_FLAG = 1
                end
                    
                if
                18@ == 2
                then
                $SURV3_STAY_FLAG = 1
                end
                    
                if
                18@ == 3
                then
                $SURV4_STAY_FLAG = 1
                end
                    
                if
                18@ == 4
                then
                $SURV5_STAY_FLAG = 1
                end
                
                if
                not $ENTERED_CAMP_NUMBER == -1
                then
                008B: 8@ = $ENTERED_CAMP_NUMBER // (int)
                else
                8@ = 69
                end
                
                SURVIVOR_STAY_MARK = marker.CreateAboveActor(SURVIVER)
                07E0: set_marker SURVIVOR_STAY_MARK type_to 1
                0165: set_marker SURVIVOR_STAY_MARK color_to 1
                marker.SetIconSize(SURVIVOR_STAY_MARK,2)
                018B: set_marker SURVIVOR_STAY_MARK radar_mode 2
                
                if
                $ACTIVE_INTERIOR > 0
                then
                0792: disembark_instantly_actor SURVIVER
                actor.LockInCurrentPosition(SURVIVER,true)
                SURVIVOR_ATTACK_TIMER = -1
                end
                
                /////////////////////////////////////////////////////////////////////////////////
                
                gosub @RANDOM_DIALOG_STAY_HERE_MISSION
                text.ClearAll()
                    
                gosub @SURV_NAME_CHECK
                    
                09FD: get_gxt_string v$BPHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer
                    
                32@ = 0                                  
                    
                $PHRASES_OFF_FLAG = 1                
                    
                repeat
                wait 0 
                                    
                gosub @SURV_NAME_CHECK 
                
                if
                00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 175.0 175.0 0
                then    
                0384: show_text_1string GXT v$BPHRASE3 string v$NAME3 time 9@ 1
                else
                break
                end
                    
                if or
                actor.Dead(SURVIVER)
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                $PANEL_OPEN == 1
                    then
                    $PHRASES_OFF_FLAG = 0
                    break
                    end
                    
                until 002D:   32@ >= 9@  // (int)
                    
                $PHRASES_OFF_FLAG = 0
                
                /////////////////////////////////////////////////////////////////////////////////
                
                return
                
                else
                
                /////////////////////////////////////////////////////////////////////////////////                               
                
                0631: put_actor SURVIVER in_group PLAYER_GROUP
                
                if and
                COOP_ACTIVE_FLAG == 1
                07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
                then
                0687: clear_actor SURVIVER task
                0EA0: set_actor_second_player SURVIVER enable_camera 1 separate_cars 0
                0084: COOP_ACTOR = SURVIVER // (int)
                
                if
                not SURVIVOR_2P_FLAG_WEP == 1
                then
                SURVIVOR_2P_FLAG_WEP = 1
                048F: actor SURVIVER remove_weapons
                09F8: give_player2_weapons_of_player1
                end                                
                
                end
                
                081A: set_actor SURVIVER weapon_skill_to 2
                0946: set_actor SURVIVER actions_uninterupted_by_weapon_fire 1
                Actor.WeaponAccuracy(SURVIVER) = 100
                
                if
                075C:   marker SURVIVOR_STAY_MARK enabled
                then
                marker.Disable(SURVIVOR_STAY_MARK)
                end
                
                if
                18@ == 0
                then
                $SURV1_STAY_FLAG = 0
                end
                    
                if
                18@ == 1
                then
                $SURV2_STAY_FLAG = 0
                end
                    
                if
                18@ == 2
                then
                $SURV3_STAY_FLAG = 0
                end
                    
                if
                18@ == 3
                then
                $SURV4_STAY_FLAG = 0
                end
                    
                if
                18@ == 4
                then
                $SURV5_STAY_FLAG = 0
                end
                
                if
                SURVIVOR_ATTACK_TIMER == -1
                then
                SURVIVOR_ATTACK_TIMER = 0
                actor.LockInCurrentPosition(SURVIVER,false)
                end
                
                /////////////////////////////////////////////////////////////////////////////////
                
                gosub @RANDOM_DIALOG_UNSTAY_HERE_MISSION
                text.ClearAll()
                    
                gosub @SURV_NAME_CHECK
                    
                09FD: get_gxt_string v$BPHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer
                    
                32@ = 0                                              
                    
                $PHRASES_OFF_FLAG = 1                
                    
                repeat
                wait 0 
                                    
                gosub @SURV_NAME_CHECK 
                    
                0384: show_text_1string GXT v$BPHRASE3 string v$NAME3 time 9@ 1
                    
                if or
                actor.Dead(SURVIVER)
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                $PANEL_OPEN == 1
                    then
                    $PHRASES_OFF_FLAG = 0
                    break
                    end
                    
                until 002D:   32@ >= 9@  // (int)
                    
                $PHRASES_OFF_FLAG = 0
                
                return
                
                /////////////////////////////////////////////////////////////////////////////////
                                                                                                                                                                                                                                        
                end
            end
        end
    end
    
end

:SKIP_EOPRWEOPR        

if or
00E1:   player 0 pressed_key 15
00E1:   player 1 pressed_key 15
actor.Dead(PLAYER_ACTOR)
actor.Dead(SURVIVER) 
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
jf @GIVE_MENU
:COOP_INV_CLOSE_JUMP
0581: enable_radar 1 
03E6: remove_text_box
text.ClearAll() 
08DA: remove_panel SURV_IN_PANEL_VAR
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
08DA: remove_panel $INVENTORY_PANEL
end
015D: set_gamespeed 1.0
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
$PANEL_OPEN = 0
$PANEL_OPEN2 = 0
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
0792: PLAYER_ACTOR
0792: PLAYER_ACTOR
end
$INV_CLOSED = 1
//cinema.Widescreen(0)
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0   
SURVIVOR_CLIMB_TIMER = 0
return

:RANDOM_PEOPLE1_INV_CLOSE
0581: enable_radar 1 
03E6: remove_text_box
text.ClearAll() 
08DA: remove_panel SURV_IN_PANEL_VAR
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
08DA: remove_panel $INVENTORY_PANEL
end
015D: set_gamespeed 1.0
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
$NOT_ALLOW_COMMANDS = 1
$PANEL_OPEN = 0
$PANEL_OPEN2 = 0
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
0792: PLAYER_ACTOR
0792: PLAYER_ACTOR
end
$INV_CLOSED = 1
//cinema.Widescreen(0)
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0   
SURVIVOR_CLIMB_TIMER = 0
gosub @RANDOM_DIALOG_NO_MORE_GIVE_ITMES

09FD: get_gxt_string v$BPHRASE3 width_to 9@
0093: 9@ = integer 9@ to_float
9@ *= 8.0
0092: 9@ = float 9@ to_integer

32@ = 0                                  
                    
$PHRASES_OFF_FLAG = 1                
                    
repeat
wait 0 
                                    
gosub @SURV_NAME_CHECK 
                
if
00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 5.0 5.0 0
then    
0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
else
break
end
                    
if or
actor.Dead(SURVIVER)
$SAVESTATUS_TRUE == 1
$SAVESTATUS == 1
$PANEL_OPEN == 1
    then
    $PHRASES_OFF_FLAG = 0
    break
    end
                    
until 002D:   32@ >= 9@  // (int)
                    
$PHRASES_OFF_FLAG = 0
$NOT_ALLOW_COMMANDS = 0

return

:RANDOM_PEOPLE1_INV_CLOSE2
0581: enable_radar 1 
03E6: remove_text_box
text.ClearAll() 
08DA: remove_panel SURV_IN_PANEL_VAR
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
08DA: remove_panel $INVENTORY_PANEL
end
015D: set_gamespeed 1.0
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
$NOT_ALLOW_COMMANDS = 1
$PANEL_OPEN = 0
$PANEL_OPEN2 = 0
if and
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
COOP_2P_OPEN_INV == 1
then
//ass
else
0792: PLAYER_ACTOR
0792: PLAYER_ACTOR
end
$INV_CLOSED = 1
//cinema.Widescreen(0)
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0   
SURVIVOR_CLIMB_TIMER = 0
gosub @RANDOM_DIALOG_NO_RESPECT_FOR_TAKE_ITEMS

09FD: get_gxt_string v$BPHRASE3 width_to 9@
0093: 9@ = integer 9@ to_float
9@ *= 8.0
0092: 9@ = float 9@ to_integer

32@ = 0                                  
                    
$PHRASES_OFF_FLAG = 1
text.ShowTextBox('GME1457')                
                    
repeat
wait 0 
                                    
gosub @SURV_NAME_CHECK 
                
if
00F2:   actor SURVIVER near_actor PLAYER_ACTOR radius 5.0 5.0 0
then    
0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
else
break
end
                    
if or
actor.Dead(SURVIVER)
$SAVESTATUS_TRUE == 1
$SAVESTATUS == 1
$PANEL_OPEN == 1
    then
    $PHRASES_OFF_FLAG = 0
    break
    end
                    
until 002D:   32@ >= 9@  // (int)
                    
$PHRASES_OFF_FLAG = 0
$NOT_ALLOW_COMMANDS = 0

return

//Давание вещей//

:GIVE_EAT
if
$BANKA > 0
jf @GIVE_DONT_HAVE

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$BANKA -= 1
SURVIVOR_BANKA_COUNT += 1
00BC: show_text_highpriority GXT 'INV72' time 200 flag 1

if
CURRENT_USHER_TUTORIAL_NUM == 13
then
CURRENT_USHER_TUTORIAL_NUM = 0
jump to @COOP_INV_CLOSE_JUMP
end

gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_HEAL
if
$HEAL > 0
jf @GIVE_DONT_HAVE

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$HEAL -= 1
SURVIVOR_HEAL_COUNT += 1
00BC: show_text_highpriority GXT 'INV73' time 200 flag 1  
gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_BINT
if
$BINT > 0
jf @GIVE_DONT_HAVE

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$BINT -= 1
SURVIVOR_BINT_COUNT += 1
00BC: show_text_highpriority GXT 'INV74' time 200 flag 1
gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_KANISTRA
if
$KANISTRA > 0
jf @GIVE_DONT_HAVE
if
SURVIVOR_KANISTRA_COUNT == 0
jf @GIVE_KANISTRA_HAVE

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$KANISTRA -= 1

if
18@ == 0
then
0086: $TEAM1_GAS_COUNT = $KANISTRA_FUEL // (float)
end

if
18@ == 1
then
0086: $TEAM2_GAS_COUNT = $KANISTRA_FUEL // (float)
end

if
18@ == 2
then
0086: $TEAM3_GAS_COUNT = $KANISTRA_FUEL // (float)
end

if
18@ == 3
then
0086: $TEAM4_GAS_COUNT = $KANISTRA_FUEL // (float)
end

if
18@ == 4
then
0086: $TEAM5_GAS_COUNT = $KANISTRA_FUEL // (float)
end

$KANISTRA_FUEL = 0.0
SURVIVOR_KANISTRA_COUNT += 1

00BC: show_text_highpriority GXT 'INV219' time 200 flag 1  
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_RADIO
if
$RADIO > 0
jf @GIVE_DONT_HAVE
if
$RADIO > 1
jf @GIVE_DONT_HAVE2

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$RADIO -= 1
SURVIVOR_RADIO_COUNT += 1
00BC: show_text_highpriority GXT 'INV76' time 200 flag 1
gosub @PLAY_DROP_SOUND2 
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_JIMMY
if
$JIMMY > 0
jf @GIVE_DONT_HAVE

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$JIMMY -= 1
SURVIVOR_JIMMY_COUNT += 1
00BC: show_text_highpriority GXT 'INV120' time 200 flag 1
gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_REPAIR_KIT
if
$REPAIR_KIT > 0
jf @GIVE_DONT_HAVE

if and
SURVIVOR_BACKPACK_WEIGHT >= 45.0
87D6: not  18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
jump to @RANDOM_PEOPLE1_INV_CLOSE
end

$REPAIR_KIT -= 1
SURVIVOR_REPAIR_COUNT += 1
00BC: show_text_highpriority GXT 'INV201' time 200 flag 1
gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

//Взятие вещей//

:TAKE_EAT
if
SURVIVOR_BANKA_COUNT > 0
jf @TAKE_DONT_HAVE
$BANKA += 1
SURVIVOR_BANKA_COUNT -= 1
00BC: show_text_highpriority GXT 'INV79' time 200 flag 1
gosub @PLAY_PICKUP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_HEAL
if
SURVIVOR_HEAL_COUNT > 0
jf @TAKE_DONT_HAVE
$HEAL += 1
SURVIVOR_HEAL_COUNT -= 1
00BC: show_text_highpriority GXT 'INV80' time 200 flag 1
gosub @PLAY_PICKUP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_BINT
if
SURVIVOR_BINT_COUNT > 0
jf @TAKE_DONT_HAVE
$BINT += 1
SURVIVOR_BINT_COUNT -= 1
00BC: show_text_highpriority GXT 'INV81' time 200 flag 1
gosub @PLAY_PICKUP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_KANISTRA
if
SURVIVOR_KANISTRA_COUNT > 0
jf @TAKE_DONT_HAVE
if
$KANISTRA == 0
jf @TAKE_KANISTRA_HAVE2
$KANISTRA += 1 
SURVIVOR_KANISTRA_COUNT -= 1

12@ = 0.0

if
18@ == 0
then
0089: 12@ = $TEAM1_GAS_COUNT // (float)
end

if
18@ == 1
then
0089: 12@ = $TEAM2_GAS_COUNT // (float)
end

if
18@ == 2
then
0089: 12@ = $TEAM3_GAS_COUNT // (float)
end

if
18@ == 3
then
0089: 12@ = $TEAM4_GAS_COUNT // (float)
end

if
18@ == 4
then
0089: 12@ = $TEAM5_GAS_COUNT // (float)
end

if
12@ > 0.0
then
0088: $KANISTRA_FUEL2 = 12@ // (float)
else
random_float $KANISTRA_FUEL2 $KANISTRA_FUEL_MIN $KANISTRA_FUEL_MAX
$KANISTRA_FUEL2 *= 3.5
end
    
0059: $KANISTRA_FUEL += $KANISTRA_FUEL2 // (float)
if
$KANISTRA_FUEL >= 25.0
then
$KANISTRA_FUEL = 25.0
end

00BC: show_text_highpriority GXT 'INV82' time 200 flag 1
Audiostream.Volume($GASCAN_PICKUP_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_PICKUP_SOUND, 0)
Audiostream.PerformAction($GASCAN_PICKUP_SOUND, PLAY)
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_RADIO
if
SURVIVOR_RADIO_COUNT > 0
jf @TAKE_DONT_HAVE
$RADIO += 1
SURVIVOR_RADIO_COUNT -= 1
00BC: show_text_highpriority GXT 'INV83' time 200 flag 1
gosub @PLAY_PICKUP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_JIMMY
if
SURVIVOR_JIMMY_COUNT > 0
jf @TAKE_DONT_HAVE
$JIMMY += 1
SURVIVOR_JIMMY_COUNT -= 1
00BC: show_text_highpriority GXT 'INV121' time 200 flag 1
gosub @PLAY_PICKUP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_REPAIR_KIT
if
SURVIVOR_REPAIR_COUNT > 0
jf @TAKE_DONT_HAVE
$REPAIR_KIT += 1
SURVIVOR_REPAIR_COUNT -= 1
00BC: show_text_highpriority GXT 'INV202' time 200 flag 1
gosub @PLAY_PICKUP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

//Выкидывание вещей//

:DROP_EAT
if
SURVIVOR_BANKA_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_BANKA_COUNT -= 1

//////////////////////////////Создание пикапа пакета с едой//////////////////////////////            

random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0 

02CE: 3@ = ground_z_at 1@ 2@ 3@

3@ += 1.0

$FOOD_PICKUP_NUM += 1

if
$FOOD_PICKUP_NUM > 28
then 
$FOOD_PICKUP_NUM = 0              
end

if
09D1:   pickup $FOOD_PICKUP[$FOOD_PICKUP_NUM] created
    then   
    pickup.Destroy($FOOD_PICKUP[$FOOD_PICKUP_NUM])
    end 

$FOOD_PICKUP[$FOOD_PICKUP_NUM] = pickup.Create(2663,3,1@,2@,3@)

gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_HEAL
if
SURVIVOR_HEAL_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_HEAL_COUNT -= 1

//////////////////////////////Создание пикапа аптечки//////////////////////////////
                
random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0

02CE: 3@ = ground_z_at 1@ 2@ 3@

3@ += 1.0

$HEAL_PICKUP_NUM += 1

if
$HEAL_PICKUP_NUM > 28
then 
$HEAL_PICKUP_NUM = 0             
end

if
09D1:   pickup $HEAL_PICKUP[$HEAL_PICKUP_NUM] created
    then   
    pickup.Destroy($HEAL_PICKUP[$HEAL_PICKUP_NUM])
    end 

$HEAL_PICKUP[$HEAL_PICKUP_NUM] = pickup.Create(#clothesp,3,1@,2@,3@)   

gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_BINT
if
SURVIVOR_BINT_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_BINT_COUNT -= 1

//////////////////////////////Создание пикапа бинта//////////////////////////////

random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0 

02CE: 3@ = ground_z_at 1@ 2@ 3@   

3@ += 1.0
    
$BINT_PICKUP_NUM += 1
    
if
$BINT_PICKUP_NUM > 28
then 
$BINT_PICKUP_NUM = 0             
end

if
09D1:   pickup $BINT_PICKUP[$BINT_PICKUP_NUM] created
    then   
    pickup.Destroy($BINT_PICKUP[$BINT_PICKUP_NUM])
    end 
    
$BINT_PICKUP[$BINT_PICKUP_NUM] = pickup.Create(#pain_killer,3,1@,2@,3@)

gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_KANISTRA
if
SURVIVOR_KANISTRA_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_KANISTRA_COUNT -= 1

//////////////////////////////Создание пикапа канистры//////////////////////////////

random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0

02CE: 3@ = ground_z_at 1@ 2@ 3@

3@ += 1.0
    
$KANISTRA_PICKUP_NUM += 1
    
if
$KANISTRA_PICKUP_NUM > 28
then 
$KANISTRA_PICKUP_NUM = 0        
end

if
09D1:   pickup $PIZDA_PICKUP[$KANISTRA_PICKUP_NUM] created
    then   
    pickup.Destroy($PIZDA_PICKUP[$KANISTRA_PICKUP_NUM])
    end  
    
$PIZDA_PICKUP[$KANISTRA_PICKUP_NUM] = pickup.Create(#PETROLCANM,3,1@,2@,3@)

0086: $PIZDA_PICKUP_FUEL[$KANISTRA_PICKUP_NUM] = $KANISTRA_FUEL_2P // (float)
$KANISTRA_FUEL_2P = 0.0
  
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_RADIO
if
SURVIVOR_RADIO_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_RADIO_COUNT -= 1

//////////////////////////////Создание пикапа рации//////////////////////////////

random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0

02CE: 3@ = ground_z_at 1@ 2@ 3@

3@ += 1.0
    
$RADIO_PICKUP_NUM += 1
    
if
$RADIO_PICKUP_NUM > 18
then 
$RADIO_PICKUP_NUM = 0
end

if
09D1:   pickup $RADIO_PICKUP[$RADIO_PICKUP_NUM] created
    then   
    pickup.Destroy($RADIO_PICKUP[$RADIO_PICKUP_NUM])
    end 
    
$RADIO_PICKUP[$RADIO_PICKUP_NUM] = pickup.Create(#CELLPHONE,3,1@,2@,3@)

gosub @PLAY_DROP_SOUND2 
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_JIMMY
if
SURVIVOR_JIMMY_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_JIMMY_COUNT -= 1

//////////////////////////////Создание пикапа отмычки//////////////////////////////

random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0

02CE: 3@ = ground_z_at 1@ 2@ 3@

3@ += 1.0
    
$JIMMY_PICKUP_NUM += 1
    
if
$JIMMY_PICKUP_NUM > 28
then 
$JIMMY_PICKUP_NUM = 0          
end

if
09D1:   pickup $JIMMY_PICKUP[$JIMMY_PICKUP_NUM] created
    then   
    pickup.Destroy($JIMMY_PICKUP[$JIMMY_PICKUP_NUM])
    end 
    
$JIMMY_PICKUP[$JIMMY_PICKUP_NUM] = pickup.Create(#drug_red,3,1@,2@,3@)

gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_REPAIR_KIT
if
SURVIVOR_REPAIR_COUNT > 0
jf @DROP_DONT_HAVE
SURVIVOR_REPAIR_COUNT -= 1

//////////////////////////////Создание пикапа инструмента//////////////////////////////

random_float 12@ -1.0 1.0
random_float 13@ 2.0 3.0
        
04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 12@ 13@ 0.0

02CE: 3@ = ground_z_at 1@ 2@ 3@

3@ += 1.0
    
$REPAIR_PICKUP_NUM += 1
    
if
$REPAIR_PICKUP_NUM > 28
then 
$REPAIR_PICKUP_NUM = 0          
end

if
09D1:   pickup $REPAIR_PICKUP[$REPAIR_PICKUP_NUM] created
    then   
    pickup.Destroy($REPAIR_PICKUP[$REPAIR_PICKUP_NUM])
    end 
    
$REPAIR_PICKUP[$REPAIR_PICKUP_NUM] = pickup.Create(1273,3,1@,2@,3@)

gosub @PLAY_DROP_SOUND2
jump @RANDOM_PEOPLE1_INV_SHOW_START

//Использование вещей//

:COOP_USE_EAT
if
SURVIVOR_BANKA_COUNT > 0
jf @COOP_USE_DONT_HAVE
COOP_2P_USE_FOOD = 1
jump @COOP_INV_CLOSE_JUMP

:COOP_USE_HEAL
if
SURVIVOR_HEAL_COUNT > 0
jf @COOP_USE_DONT_HAVE
COOP_2P_USE_HEAL = 1
jump @COOP_INV_CLOSE_JUMP

:COOP_USE_BINT
if
SURVIVOR_BINT_COUNT > 0
jf @COOP_USE_DONT_HAVE
COOP_2P_USE_BINT = 1
jump @COOP_INV_CLOSE_JUMP

:COOP_USE_KANISTRA
if
SURVIVOR_KANISTRA_COUNT > 0
jf @COOP_USE_DONT_HAVE
gosub @KANISTRA_USE_COOP  
jump @RANDOM_PEOPLE1_INV_SHOW_START

:COOP_USE_RADIO
if
SURVIVOR_RADIO_COUNT > 0
jf @COOP_USE_DONT_HAVE
gosub @RADIO_MENU_START_COOP
jump @RANDOM_PEOPLE1_INV_SHOW_START

:COOP_USE_JIMMY
if
SURVIVOR_JIMMY_COUNT > 0
jf @COOP_USE_DONT_HAVE
015D: set_gamespeed 1.0
gosub @INV_PLAYER_PAD_ON_BACK_COOP
0581: enable_radar 1 
07CC: set_player 1 can_enter_exit_vehicles 0
$PANEL_OPEN = 0
gosub @JIMMY_START3_COOP
$JIMMY_USING = 0
jump @RANDOM_PEOPLE1_INV_SHOW_START

:COOP_USE_REPAIR_KIT
if
SURVIVOR_REPAIR_COUNT > 0
jf @COOP_USE_DONT_HAVE
gosub @TOOLS_MENU_START_COOP
jump @RANDOM_PEOPLE1_INV_SHOW_START

//Текстовые сообщения//

:GIVE_DONT_HAVE
00BC: show_text_highpriority GXT 'INV7' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_DONT_HAVE2
00BC: show_text_highpriority GXT 'INV291' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_KANISTRA_HAVE
00BC: show_text_highpriority GXT 'INV77' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:GIVE_RADIO_HAVE
00BC: show_text_highpriority GXT 'INV78' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_DONT_HAVE
00BC: show_text_highpriority GXT 'INV84' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:DROP_DONT_HAVE
00BC: show_text_highpriority GXT 'INV7' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:COOP_USE_DONT_HAVE
00BC: show_text_highpriority GXT 'INV7' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_KANISTRA_HAVE2
00BC: show_text_highpriority GXT 'INV218' time 200 flag 1
SURVIVOR_KANISTRA_COUNT = 0

12@ = 0.0

if
18@ == 0
then
0089: 12@ = $TEAM1_GAS_COUNT // (float)
end

if
18@ == 1
then
0089: 12@ = $TEAM2_GAS_COUNT // (float)
end

if
18@ == 2
then
0089: 12@ = $TEAM3_GAS_COUNT // (float)
end

if
18@ == 3
then
0089: 12@ = $TEAM4_GAS_COUNT // (float)
end

if
18@ == 4
then
0089: 12@ = $TEAM5_GAS_COUNT // (float)
end

if
12@ > 0.0
then
0088: $KANISTRA_FUEL2 = 12@ // (float)
else
random_float $KANISTRA_FUEL2 $KANISTRA_FUEL_MIN $KANISTRA_FUEL_MAX
$KANISTRA_FUEL2 *= 3.5
end

0059: $KANISTRA_FUEL += $KANISTRA_FUEL2 // (float)
if
$KANISTRA_FUEL >= 25.0
then
$KANISTRA_FUEL = 25.0
end

Audiostream.Volume($GASCAN_PICKUP_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_PICKUP_SOUND, 0)
Audiostream.PerformAction($GASCAN_PICKUP_SOUND, PLAY)
jump @RANDOM_PEOPLE1_INV_SHOW_START

:TAKE_RADIO_HAVE2
00BC: show_text_highpriority GXT 'INV86' time 200 flag 1
jump @RANDOM_PEOPLE1_INV_SHOW_START

:RANDOM_PEOPLE1_WEIGHT_CHECK_START
if
SURVIVOR_IN_PLAYER_TEAM == 1
jf @RANDOM_PEOPLE1_WEIGHT_CHECK_START_RETURN
if and 
not actor.Driving(PLAYER_ACTOR)
$SIMULATING_FLAG == 0
jf @RANDOM_PEOPLE1_WEIGHT_CHECK_START_RETURN
gosub @2WEIGHT_SET
if
056D:   actor SURVIVER defined
jf @RANDOM_PEOPLE1_WEIGHT_CHECK_START_RETURN
if
044B:   actor SURVIVER on_foot
jf @RANDOM_PEOPLE1_WEIGHT_CHECK_START_RETURN 
Actor.SetWalkStyle(SURVIVER, "surv1")
jump @RANDOM_PEOPLE1_WEIGHT_CHECK_START_RETURN

:RANDOM_PEOPLE1_WEIGHT_CHECK_START_RETURN
return

:2WEIGHT_SET

if
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
0089: 15@ = SURVIVOR_BACKPACK_WEIGHT // (float)
return
end

15@ = 0.0

0089: 12@ = $BANKA_WEIGHT // (float)
008B: 13@ = SURVIVOR_BANKA_COUNT // (int)
0093: 13@ = integer 13@ to_float
006B: 13@ *= 12@  // (float)
005B: 15@ += 13@  // (float)

0089: 12@ = $HEAL_WEIGHT // (float)
008B: 13@ = SURVIVOR_HEAL_COUNT // (int)
0093: 13@ = integer 13@ to_float
006B: 13@ *= 12@  // (float)
005B: 15@ += 13@  // (float)

0089: 12@ = $BINT_WEIGHT // (float)
008B: 13@ = SURVIVOR_BINT_COUNT // (int)
0093: 13@ = integer 13@ to_float
006B: 13@ *= 12@  // (float)
005B: 15@ += 13@  // (float)

0089: 12@ = $RADIO_WEIGHT // (float)
008B: 13@ = SURVIVOR_RADIO_COUNT // (int)
0093: 13@ = integer 13@ to_float
006B: 13@ *= 12@  // (float)
005B: 15@ += 13@  // (float)

0089: 12@ = $JIMMY_WEIGHT // (float)
008B: 13@ = SURVIVOR_JIMMY_COUNT // (int)
0093: 13@ = integer 13@ to_float
006B: 13@ *= 12@  // (float)
005B: 15@ += 13@  // (float)

0089: 12@ = $REPAIR_KIT_WEIGHT // (float)
008B: 13@ = SURVIVOR_REPAIR_COUNT // (int)
0093: 13@ = integer 13@ to_float
006B: 13@ *= 12@  // (float)
005B: 15@ += 13@  // (float)        

gosub @2WEAPON_WEIGHT_SET

if
$FEATHERBPCK_FLAG == 1
then
15@ = 0
end

0088: SURVIVOR_BACKPACK_WEIGHT = 15@ // (float)

return

:2WEAPON_WEIGHT_SET

if or
0491:   actor SURVIVER has_weapon 22
0491:   actor SURVIVER has_weapon 111
0491:   actor SURVIVER has_weapon 136
0491:   actor SURVIVER has_weapon 165
0491:   actor SURVIVER has_weapon 195
    then   
    041A: 0@ = actor SURVIVER weapon 22 ammo
    041A: 1@ = actor SURVIVER weapon 111 ammo
    041A: 2@ = actor SURVIVER weapon 136 ammo
    041A: 3@ = actor SURVIVER weapon 111 ammo
    041A: 26@ = actor SURVIVER weapon 136 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then  
    005D: 15@ += $COLT_WEIGHT // (int)
    end
    
    end   

//////////////////

if
0491:   actor SURVIVER has_weapon 23
    then
    041A: 0@ = actor SURVIVER weapon 23 ammo
    if
    not 0@ == 0
    then
    005D: 15@ += $COLT_SILENCED_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 24
    then
    041A: 0@ = actor SURVIVER weapon 24 ammo
    if
    not 0@ == 0
    then
    005D: 15@ += $DESERT_EAGLE_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 25
0491:   actor SURVIVER has_weapon 138
0491:   actor SURVIVER has_weapon 113
0491:   actor SURVIVER has_weapon 172
0491:   actor SURVIVER has_weapon 202
    then
    041A: 0@ = actor SURVIVER weapon 25 ammo
    041A: 1@ = actor SURVIVER weapon 138 ammo
    041A: 2@ = actor SURVIVER weapon 113 ammo
    041A: 3@ = actor SURVIVER weapon 172 ammo
    041A: 26@ = actor SURVIVER weapon 202 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $SHOTGUN_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 26
0491:   actor SURVIVER has_weapon 140
0491:   actor SURVIVER has_weapon 174
0491:   actor SURVIVER has_weapon 204
    then
    041A: 0@ = actor SURVIVER weapon 26 ammo
    041A: 1@ = actor SURVIVER weapon 140 ammo
    041A: 2@ = actor SURVIVER weapon 174 ammo
    041A: 3@ = actor SURVIVER weapon 204 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    then
    005D: 15@ += $SAWNOFF_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 27
0491:   actor SURVIVER has_weapon 139
0491:   actor SURVIVER has_weapon 173
0491:   actor SURVIVER has_weapon 203
    then
    041A: 0@ = actor SURVIVER weapon 27 ammo
    041A: 1@ = actor SURVIVER weapon 139 ammo
    041A: 2@ = actor SURVIVER weapon 173 ammo
    041A: 3@ = actor SURVIVER weapon 203 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    then
    005D: 15@ += $SHOTGSPA_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 28
0491:   actor SURVIVER has_weapon 117
0491:   actor SURVIVER has_weapon 168
0491:   actor SURVIVER has_weapon 198
    then
    041A: 0@ = actor SURVIVER weapon 28 ammo
    041A: 1@ = actor SURVIVER weapon 117 ammo
    041A: 2@ = actor SURVIVER weapon 142 ammo
    041A: 3@ = actor SURVIVER weapon 168 ammo
    041A: 26@ = actor SURVIVER weapon 198 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $MICRO_UZI_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 29
0491:   actor SURVIVER has_weapon 143
0491:   actor SURVIVER has_weapon 169
0491:   actor SURVIVER has_weapon 199
    then
    041A: 0@ = actor SURVIVER weapon 29 ammo
    041A: 1@ = actor SURVIVER weapon 143 ammo
    041A: 2@ = actor SURVIVER weapon 169 ammo
    041A: 3@ = actor SURVIVER weapon 199 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    then
    005D: 15@ += $MP5_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 32
0491:   actor SURVIVER has_weapon 141
0491:   actor SURVIVER has_weapon 167
0491:   actor SURVIVER has_weapon 197 
    then
    041A: 0@ = actor SURVIVER weapon 32 ammo
    041A: 1@ = actor SURVIVER weapon 143 ammo
    041A: 2@ = actor SURVIVER weapon 167 ammo
    041A: 3@ = actor SURVIVER weapon 197 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    then
    005D: 15@ += $TEC9_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 30
0491:   actor SURVIVER has_weapon 112
0491:   actor SURVIVER has_weapon 145
0491:   actor SURVIVER has_weapon 171
0491:   actor SURVIVER has_weapon 201
    then
    041A: 0@ = actor SURVIVER weapon 30 ammo
    041A: 1@ = actor SURVIVER weapon 112 ammo
    041A: 2@ = actor SURVIVER weapon 145 ammo
    041A: 3@ = actor SURVIVER weapon 171 ammo
    041A: 26@ = actor SURVIVER weapon 201 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $AK47_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 31
0491:   actor SURVIVER has_weapon 116
0491:   actor SURVIVER has_weapon 144
0491:   actor SURVIVER has_weapon 170
0491:   actor SURVIVER has_weapon 200
    then
    041A: 0@ = actor SURVIVER weapon 31 ammo
    041A: 1@ = actor SURVIVER weapon 116 ammo
    041A: 2@ = actor SURVIVER weapon 144 ammo
    041A: 3@ = actor SURVIVER weapon 170 ammo
    041A: 26@ = actor SURVIVER weapon 200 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $M4_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 33
0491:   actor SURVIVER has_weapon 120
0491:   actor SURVIVER has_weapon 146
0491:   actor SURVIVER has_weapon 175
0491:   actor SURVIVER has_weapon 205
    then
    041A: 0@ = actor SURVIVER weapon 33 ammo
    041A: 1@ = actor SURVIVER weapon 120 ammo
    041A: 2@ = actor SURVIVER weapon 146 ammo
    041A: 3@ = actor SURVIVER weapon 175 ammo
    041A: 26@ = actor SURVIVER weapon 205 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $COUNTRY_RIFLE_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 34
0491:   actor SURVIVER has_weapon 147
0491:   actor SURVIVER has_weapon 176
0491:   actor SURVIVER has_weapon 206
    then
    041A: 0@ = actor SURVIVER weapon 34 ammo
    041A: 1@ = actor SURVIVER weapon 147 ammo
    041A: 2@ = actor SURVIVER weapon 176 ammo
    041A: 3@ = actor SURVIVER weapon 206 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    then
    005D: 15@ += $SNIPER_RIFLE_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 35
0491:   actor SURVIVER has_weapon 119
0491:   actor SURVIVER has_weapon 135
0491:   actor SURVIVER has_weapon 183
0491:   actor SURVIVER has_weapon 213
    then
    041A: 0@ = actor SURVIVER weapon 35 ammo
    041A: 1@ = actor SURVIVER weapon 119 ammo
    041A: 2@ = actor SURVIVER weapon 135 ammo
    041A: 3@ = actor SURVIVER weapon 183 ammo
    041A: 26@ = actor SURVIVER weapon 213 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $ROCKET_LAUNCHER_RIFLE_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 36
    then
    041A: 0@ = actor SURVIVER weapon 36 ammo
    if
    not 0@ == 0
    then
    005D: 15@ += $ROCKET_LAUNCHER2_RIFLE_WEIGHT // (int)
    end
    
    end

//////////////////

if or
0491:   actor SURVIVER has_weapon 37
0491:   actor SURVIVER has_weapon 114
0491:   actor SURVIVER has_weapon 148
0491:   actor SURVIVER has_weapon 180
0491:   actor SURVIVER has_weapon 210
    then   
    041A: 0@ = actor SURVIVER weapon 37 ammo
    041A: 1@ = actor SURVIVER weapon 114 ammo
    041A: 2@ = actor SURVIVER weapon 148 ammo
    041A: 3@ = actor SURVIVER weapon 180 ammo
    041A: 26@ = actor SURVIVER weapon 210 ammo
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    not 26@ == 0
    then
    005D: 15@ += $FLAME_THROWER_RIFLE_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 70
    then
    041A: 0@ = actor SURVIVER weapon 70 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $M60_WEIGHT // (int)
    end
    
    end

//////////////////   

if or
0491:   actor SURVIVER has_weapon 71
0491:   actor SURVIVER has_weapon 173
0491:   actor SURVIVER has_weapon 166
0491:   actor SURVIVER has_weapon 196
    then
    041A: 0@ = actor SURVIVER weapon 71 ammo
    041A: 1@ = actor SURVIVER weapon 173 ammo
    041A: 2@ = actor SURVIVER weapon 166 ammo
    041A: 3@ = actor SURVIVER weapon 196 ammo
    
    if or
    not 0@ == 0
    not 1@ == 0
    not 2@ == 0
    not 3@ == 0
    then
    005D: 15@ += $REVOLVER_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 72
    then
    041A: 0@ = actor SURVIVER weapon 72 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $FAMAS_WEIGHT // (int)
    end
    
    end

////////////////// 

if
0491:   actor SURVIVER has_weapon 73
    then
    041A: 0@ = actor SURVIVER weapon 73 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $SSG_WEIGHT // (int)
    end
    
    end

////////////////// 

if
0491:   actor SURVIVER has_weapon 74
    then
    041A: 0@ = actor SURVIVER weapon 74 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $THOMPSON_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 75
    then
    041A: 0@ = actor SURVIVER weapon 75 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $IA2_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 76
    then
    041A: 0@ = actor SURVIVER weapon 76 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $FIVESEVEN_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 77
    then
    041A: 0@ = actor SURVIVER weapon 77 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $BIZON_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 78
    then
    041A: 0@ = actor SURVIVER weapon 78 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $AA12_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 79
    then
    041A: 0@ = actor SURVIVER weapon 79 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $UMP45_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 80
    then
    041A: 0@ = actor SURVIVER weapon 80 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $HSNIPER_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 81
    then
    041A: 0@ = actor SURVIVER weapon 81 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $GROZA_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 82
    then
    041A: 0@ = actor SURVIVER weapon 82 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $SCAR_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 83
    then
    041A: 0@ = actor SURVIVER weapon 83 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $AUG_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 84
    then
    041A: 0@ = actor SURVIVER weapon 84 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $MP9_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 85
    then
    041A: 0@ = actor SURVIVER weapon 85 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $HKMP5_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 86
    then
    041A: 0@ = actor SURVIVER weapon 86 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $P90_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 87
    then
    041A: 0@ = actor SURVIVER weapon 87 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $SCORPION_WEIGHT // (int)
    end
    
    end

//////////////////   

if
0491:   actor SURVIVER has_weapon 88
    then
    041A: 0@ = actor SURVIVER weapon 88 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $CAR15_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 89
    then
    041A: 0@ = actor SURVIVER weapon 89 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $BERETTA_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 90
    then
    041A: 0@ = actor SURVIVER weapon 90 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $WIDMAG_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 91
    then
    041A: 0@ = actor SURVIVER weapon 91 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $STUBBY_WEIGHT // (int)
    end
    
    end

//////////////////    

if
0491:   actor SURVIVER has_weapon 93
    then
    041A: 0@ = actor SURVIVER weapon 93 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $QUADROCK_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 94
    then
    041A: 0@ = actor SURVIVER weapon 94 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $M249_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 95
    then
    041A: 0@ = actor SURVIVER weapon 95 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $AR15_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 96
    then
    041A: 0@ = actor SURVIVER weapon 96 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $SVD_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 97
    then
    041A: 0@ = actor SURVIVER weapon 97 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $BOLT308_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 98
    then
    041A: 0@ = actor SURVIVER weapon 98 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $CZ75_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 99
    then
    041A: 0@ = actor SURVIVER weapon 99 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $G36C_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 100
    then
    041A: 0@ = actor SURVIVER weapon 100 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $SAIGA12_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 101
    then
    041A: 0@ = actor SURVIVER weapon 101 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $SIG550_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 102
    then
    041A: 0@ = actor SURVIVER weapon 102 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $STRIKER_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 103
    then
    041A: 0@ = actor SURVIVER weapon 103 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $XM1014_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 104
    then
    041A: 0@ = actor SURVIVER weapon 104 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $GALIL_WEIGHT // (int)
    end
    
    end

//////////////////

if
0491:   actor SURVIVER has_weapon 105
    then
    041A: 0@ = actor SURVIVER weapon 105 ammo
    
    if
    not 0@ == 0
    then
    005D: 15@ += $HK416_WEIGHT // (int)
    end
    
    end

//////////////////

:2WEAPON_WEIGHT_SET_RETURN 
return

:LOOT_DROP 

actor.StorePos(SURVIVER,1@,2@,3@)
06C3: get_number_of_fires_within_sphere_at 1@ 2@ 3@ radius 3.0 store_to 0@
if or
$GAMEMODE_HOLD == 1
$DEFENSE_CHALLENGE_FLAG == 1
$GAMEMODE_WAR == 1
$GAMEMODE_CRAZY == 1
$GAMEMODE_EDITOR == 1
0@ > 0
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
0EA4: is_char_on_fire SURVIVER
then
return
end

actor.StorePos(SURVIVER,1@,2@,3@) 
000F: 1@ -= 5.0
000F: 2@ -= 5.0
000F: 3@ -= 5.0
actor.StorePos(SURVIVER,4@,5@,6@) 
000F: 4@ -= -5.0
000F: 5@ -= -5.0
000F: 6@ -= -5.0

if
0356:   explosion_type -1 in_cube_cornerA 1@ 2@ 3@ cornerB 4@ 5@ 6@
then
return
end

if
SURVIVOR_BANKA_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat           

        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа пакета с едой//////////////////////////////
        
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                        
        $FOOD_PICKUP_NUM += 1
                        
        if
        $FOOD_PICKUP_NUM > 28
        then 
        $FOOD_PICKUP_NUM = 0                      
        end            
        
        if
        09D1:   pickup $FOOD_PICKUP[$FOOD_PICKUP_NUM] created
        then   
            pickup.Destroy($FOOD_PICKUP[$FOOD_PICKUP_NUM]) 
            end 
                        
        $FOOD_PICKUP[$FOOD_PICKUP_NUM] = pickup.Create(2663,3,1@,2@,3@) 
        
        if or                                                  
        002F:   0@ >= SURVIVOR_BANKA_COUNT // @ == $ (int)  
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end
        
        until 002F:   0@ >= SURVIVOR_BANKA_COUNT // @ == $ (int)                  
                    
    end

if
SURVIVOR_HEAL_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat 
        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа аптечки//////////////////////////////
                
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                    
        $HEAL_PICKUP_NUM += 1
                    
        if
        $HEAL_PICKUP_NUM > 28
        then 
        $HEAL_PICKUP_NUM = 0                         
        end         
        
        if
        09D1:   pickup $HEAL_PICKUP[$HEAL_PICKUP_NUM] created
            then  
            pickup.Destroy($HEAL_PICKUP[$HEAL_PICKUP_NUM])
            end  
                    
        $HEAL_PICKUP[$HEAL_PICKUP_NUM] = pickup.Create(#clothesp,3,1@,2@,3@)
        
        if or
        002F:   0@ >= SURVIVOR_HEAL_COUNT // @ == $ (int)
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end
        
        until 002F:   0@ >= SURVIVOR_HEAL_COUNT // @ == $ (int)                   
                    
    end

if
SURVIVOR_BINT_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat 
        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа бинта//////////////////////////////
                
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                    
        $BINT_PICKUP_NUM += 1
                    
        if
        $BINT_PICKUP_NUM > 28
        then 
        $BINT_PICKUP_NUM = 0                     
        end         
        
        if
        09D1:   pickup $BINT_PICKUP[$BINT_PICKUP_NUM] created
            then    
            pickup.Destroy($BINT_PICKUP[$BINT_PICKUP_NUM])
            end   
                    
        $BINT_PICKUP[$BINT_PICKUP_NUM] = pickup.Create(#pain_killer,3,1@,2@,3@)  
        
        if or
        002F:   0@ >= SURVIVOR_BINT_COUNT // @ == $ (int)
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end
        
        until 002F:   0@ >= SURVIVOR_BINT_COUNT // @ == $ (int)           
                    
    end

if
SURVIVOR_KANISTRA_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat 
        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа канистры//////////////////////////////
                
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                    
        $KANISTRA_PICKUP_NUM += 1
                    
        if
        $KANISTRA_PICKUP_NUM > 28
        then 
        $KANISTRA_PICKUP_NUM = 0                      
        end         
        
        if
        09D1:   pickup $PIZDA_PICKUP[$KANISTRA_PICKUP_NUM] created
            then   
            pickup.Destroy($PIZDA_PICKUP[$KANISTRA_PICKUP_NUM])
            end  
                    
        $PIZDA_PICKUP[$KANISTRA_PICKUP_NUM] = pickup.Create(#PETROLCANM,3,1@,2@,3@)
        
        if
        $FREEMODE == 0
        then
        random_float $KANISTRA_RANDOM_COUNT 1.0 4.0
        else
        random_float $KANISTRA_RANDOM_COUNT 1.0 2.0
        end
                
        0086: $PIZDA_PICKUP_FUEL[$KANISTRA_PICKUP_NUM] = $KANISTRA_RANDOM_COUNT // (float) 
        
        if or
        002F:   0@ >= SURVIVOR_KANISTRA_COUNT // @ == $ (int)
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end
        
        until 002F:   0@ >= SURVIVOR_KANISTRA_COUNT // @ == $ (int)        
                    
    end

if
SURVIVOR_RADIO_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat 
        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа рации//////////////////////////////
                
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                    
        $RADIO_PICKUP_NUM += 1
                    
        if
        $RADIO_PICKUP_NUM > 18
        then 
        $RADIO_PICKUP_NUM = 0                       
        end         
        
        if
        09D1:   pickup $RADIO_PICKUP[$RADIO_PICKUP_NUM] created
            then    
            pickup.Destroy($RADIO_PICKUP[$RADIO_PICKUP_NUM])
            end   
                    
        $RADIO_PICKUP[$RADIO_PICKUP_NUM] = pickup.Create(#CELLPHONE,3,1@,2@,3@)  
        
        if or
        002F:   0@ >= SURVIVOR_RADIO_COUNT // @ == $ (int)
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end
        
        until 002F:   0@ >= SURVIVOR_RADIO_COUNT // @ == $ (int)           
                    
    end

if
SURVIVOR_JIMMY_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat 
        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа отмычки//////////////////////////////
                
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                    
        $JIMMY_PICKUP_NUM += 1
                    
        if
        $JIMMY_PICKUP_NUM > 28
        then 
        $JIMMY_PICKUP_NUM = 0                                 
        end             
        
        if
        09D1:   pickup $JIMMY_PICKUP[$RADIO_PICKUP_NUM] created
            then    
            pickup.Destroy($JIMMY_PICKUP[$RADIO_PICKUP_NUM])
            end 
                    
        $JIMMY_PICKUP[$JIMMY_PICKUP_NUM] = pickup.Create(#drug_red,3,1@,2@,3@) 
        
        if or
        002F:   0@ >= SURVIVOR_JIMMY_COUNT // @ == $ (int)
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end        
        
        until 002F:   0@ >= SURVIVOR_JIMMY_COUNT // @ == $ (int)           
                    
    end
    
if
SURVIVOR_REPAIR_COUNT > 0
    then
    
    0@ = 0    
    32@ = 0 
    
        repeat 
        wait 0
        0@ += 1
        
        //////////////////////////////Создание пикапа инструментов//////////////////////////////
                
        random_float 4@ -1.0 1.0
        random_float 5@ 1.0 -1.0
                        
        04C4: store_coords_to 1@ 2@ 3@ from_actor SURVIVER with_offset 4@ 5@ 0.0
        
        02CE: 3@ = ground_z_at 1@ 2@ 3@
        
        3@ += 1.0
                    
        $REPAIR_PICKUP_NUM += 1
                    
        if
        $REPAIR_PICKUP_NUM > 28
        then 
        $REPAIR_PICKUP_NUM = 0                                 
        end             
        
        if
        09D1:   pickup $REPAIR_PICKUP[$REPAIR_PICKUP_NUM] created
            then    
            pickup.Destroy($REPAIR_PICKUP[$REPAIR_PICKUP_NUM])
            end 
                    
        $REPAIR_PICKUP[$REPAIR_PICKUP_NUM] = pickup.Create(1273,3,1@,2@,3@) 
        
        if or
        002F:   0@ >= SURVIVOR_REPAIR_COUNT // @ == $ (int)
        32@ > 1000
        $SAVESTATUS_TRUE == 1
        then
        break
        end        
        
        until 002F:   0@ >= SURVIVOR_REPAIR_COUNT // @ == $ (int)           
                    
    end    

return

////////////////////////Вычисление оружия////////////////////////

:RANDOM_PEOPLE1_WEAPON_CREATE
wait 0     

if
UNITED_MAP == 0
then
random_int 11@ MIN_WEAP_GEN to MAX_WEAP_GEN
end

if
not 11@ == WEAP_GEN_SET
then
0209: 16@ = random_int_in_ranges 22 35 
else
0209: 16@ = random_int_in_ranges MIN_WEAPON_NUM MAX_WEAPON_NUM
end

if
MIKE_SPAWN_FLAG == 2
then
16@ = 88
end

if
UNITED_MAP == 1
then

if 
$UNITED_VC_FLAG == 1
then

if
STORIES_MAP == 0
then
0209: 16@ = random_int_in_ranges MINID_VC_WEAP MAXID_VC_WEAP

if
16@ == 142
    then
    if
    0E4D: random_percent 50
        then
        16@ = 28
        end
    end

else
0209: 16@ = random_int_in_ranges MINID_VCS_WEAP MAXID_VCS_WEAP

if
16@ == 198
    then    
    if
    0E4D: random_percent 50
        then
        16@ = 28
        end    
    end

end

else

if
STORIES_MAP == 0
then
0209: 16@ = random_int_in_ranges MINID_III_WEAP MAXID_III_WEAP
else
0209: 16@ = random_int_in_ranges MINID_LCS_WEAP MAXID_LCS_WEAP

if
16@ == 168
    then    
    if
    0E4D: random_percent 50
        then
        16@ = 28
        end    
    end

end

end

end

////////////////////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 1
then

if
UNITED_MAP == 0
then

if
$PLAYER_ARMY_SIDE == 1
then
random_int 0@ 0 to 2
    
if
0@ == 0
then
16@ = 77
else
16@ = 75
end
    
end

if
$PLAYER_BANDIT_SIDE == 1
then
    
random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 22
end
    
if 
0@ == 1
then
16@ = 25
end
    
if 
0@ == 2
then
16@ = 28
end
    
if 
0@ == 3
then
16@ = 30
end
    
end

if
$PLAYER_FERMERS_SIDE == 1
then

random_int 0@ 0 to 4

if
0@ == 0
then
16@ = 22
end

if
0@ == 1
then
16@ = 73
end

if
0@ == 2
then
16@ = 87
end

if
0@ == 3
then
16@ = 30
end
    
end

if
$PLAYER_SWAT_SIDE == 1
then

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 76
end

if 
0@ == 1
then
16@ = 27
end

if 
0@ == 2
then
16@ = 79
end

if 
0@ == 3
then
16@ = 72
end
    
end

else

if
$UNITED_III_SPAWN == 0
then

if
$PLAYER_ARMY_SIDE == 1
then

////////////////////////////////////////////////////////

if
STORIES_MAP == 0
then

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 144
end

if 
0@ == 1
then
16@ = 140
end

if 
0@ == 2
then
16@ = 144
end

if 
0@ == 3
then
16@ = 140
end

else

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 200
end

if 
0@ == 1
then
16@ = 204
end

if 
0@ == 2
then
16@ = 200
end

if 
0@ == 3
then
16@ = 204
end

end

////////////////////////////////////////////////////////

end

if
$PLAYER_BANDIT_SIDE == 1
then

////////////////////////////////////////////////////////

if
STORIES_MAP == 0
then

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 136
end

if 
0@ == 1
then
16@ = 138
end

if 
0@ == 2
then
16@ = 142
end

if 
0@ == 3
then
16@ = 145
end

else

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 195
end

if 
0@ == 1
then
16@ = 202
end

if 
0@ == 2
then
16@ = 198
end

if 
0@ == 3
then
16@ = 201
end

end

////////////////////////////////////////////////////////

end

if
$PLAYER_SWAT_SIDE == 1
then

////////////////////////////////////////////////////////

if
STORIES_MAP == 0
then

random_int 0@ 0 to 3

if 
0@ == 0
then
16@ = 143
end

if 
0@ == 1
then
16@ = 144
end

if 
0@ == 2
then
16@ = 139
end

else

random_int 0@ 0 to 3

if 
0@ == 0
then
16@ = 199
end

if 
0@ == 1
then
16@ = 200
end

if 
0@ == 2
then
16@ = 203
end

end

////////////////////////////////////////////////////////

end

else

if
$PLAYER_ARMY_SIDE == 1
then

////////////////////////////////////////////////////////

if
STORIES_MAP == 0
then

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 116
end

if 
0@ == 1
then
16@ = 113
end

if 
0@ == 2
then
16@ = 116
end

if 
0@ == 3
then
16@ = 113
end

else

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 170
end

if 
0@ == 1
then
16@ = 174
end

if 
0@ == 2
then
16@ = 170
end

if 
0@ == 3
then
16@ = 174
end

end

////////////////////////////////////////////////////////

end

if
$PLAYER_BANDIT_SIDE == 1
then

////////////////////////////////////////////////////////

if
STORIES_MAP == 0
then

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 111
end

if 
0@ == 1
then
16@ = 112
end

if 
0@ == 2
then
16@ = 113
end

if 
0@ == 3
then
16@ = 117
end

else

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 165
end

if 
0@ == 1
then
16@ = 171
end

if 
0@ == 2
then
16@ = 172
end

if 
0@ == 3
then
16@ = 168
end

end

////////////////////////////////////////////////////////     

end

if
$PLAYER_SWAT_SIDE == 1
then

////////////////////////////////////////////////////////

if
STORIES_MAP == 0
then

random_int 0@ 0 to 4

if 
0@ == 0
then
16@ = 116
end

if 
0@ == 1
then
16@ = 113
end

if 
0@ == 2
then
16@ = 116
end

if 
0@ == 3
then
16@ = 113
end

else

random_int 0@ 0 to 3

if 
0@ == 0
then
16@ = 170
end

if 
0@ == 1
then
16@ = 173
end

if 
0@ == 2
then
16@ = 169
end

end

////////////////////////////////////////////////////////

end

end

end

end

////////////////////////////////////////////////////

if or
16@ == 22
16@ == 24
16@ == 25
16@ == 26
16@ == 27
16@ == 28
16@ == 29
16@ == 30 
    then
    else
    if or
    16@ == 31
    16@ == 33
    16@ == 34
    16@ == 71
    16@ == 72
    16@ == 73
    16@ == 74
    16@ == 75 
        then
        else
        if or
        16@ == 76
        16@ == 77
        16@ == 78
        16@ == 136
        16@ == 137
        16@ == 138
        16@ == 139
        16@ == 140
            then     
            else
            if or
            16@ == 141
            16@ == 142
            16@ == 143
            16@ == 144
            16@ == 145
            16@ == 146
            16@ == 147
                then
                else
                if or
                16@ == 111
                16@ == 112
                16@ == 113
                16@ == 116
                16@ == 117
                16@ == 120  
                16@ == 79
                16@ == 80
                    then
                    else
                    if or
                    16@ == 81
                    16@ == 82
                    16@ == 83
                    16@ == 84
                    16@ == 85
                    16@ == 86  
                    16@ == 87
                    16@ == 88
                        then
                        else
                        if or
                        16@ == 89
                        16@ == 90
                        16@ == 91
                        16@ == 23
                        16@ == 32
                            then
                            else
                            if or
                            16@ == 165
                            16@ == 166
                            16@ == 167
                            16@ == 168
                            16@ == 169
                            16@ == 170
                            16@ == 171
                            16@ == 172
                                then
                                else
                                if or
                                16@ == 173
                                16@ == 174
                                16@ == 175
                                16@ == 176
                                16@ == 195
                                16@ == 196
                                16@ == 197
                                16@ == 198
                                    then
                                    else
                                    if or
                                    16@ == 199
                                    16@ == 200
                                    16@ == 201
                                    16@ == 202
                                    16@ == 203
                                    16@ == 204
                                    16@ == 205
                                    16@ == 206
                                        then       
                                        else
                                        if or
                                        16@ == 95
                                        16@ == 96
                                        16@ == 97
                                        16@ == 98
                                        16@ == 99
                                        16@ == 100
                                        16@ == 101
                                        16@ == 102
                                            then
                                            else       
                                            if or
                                            16@ == 103
                                            16@ == 104
                                            16@ == 105
                                                then       
                                                else
                                                jump to @RANDOM_PEOPLE1_WEAPON_CREATE
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
////////////////////////////////////////////////////    

if
18@ == 0
then
if
$TEAM1_WEP > 0
    then
    008B: 16@ = $TEAM1_WEP // (int)
    end
end

if
18@ == 1
then
if
$TEAM1_WEP > 0
    then
    008B: 16@ = $TEAM2_WEP // (int)
    end
end

if
18@ == 2
then
if
$TEAM1_WEP > 0
    then
    008B: 16@ = $TEAM3_WEP // (int)
    end
end

0781: get_weapon_with_ID 16@ model_to 0@ 
if 
07DE:   model 0@ exists // versionB 
jf @RANDOM_PEOPLE1_WEAPON_CREATE 
if
056D:   actor SURVIVER defined
jf @RANDOM_PEOPLE1_WEAPON_CREATE 

if
18@ == 0
then
0AF1: write_int 16@ to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR1_WEAPON_ID"
end

if
18@ == 1
then
0AF1: write_int 16@ to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR2_WEAPON_ID"
end

if
18@ == 2
then
0AF1: write_int 16@ to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR3_WEAPON_ID"
end

if
18@ == 3
then
0AF1: write_int 16@ to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR4_WEAPON_ID"
end

if
18@ == 4
then
0AF1: write_int 16@ to_ini_file "saves/ZACM.set" section "SCR" key "SURVIVOR5_WEAPON_ID"
end

gosub @SURV_GIVE_RANDOM_MELEE_WEP

if or
CUSTOM_MODE_ONLY_MELEE == 1
$MUTATION_ACTIVE == 2
then
008B: 22@ = SURVIVOR_MELEE_ID // (int)
return
end

while not model.Available(0@)
wait 0
model.Load(0@)
mload
end

if
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
Actor.GiveWeaponAndAmmo(SURVIVER, 16@, 1)
else
Actor.GiveWeaponAndAmmo(SURVIVER, 16@, 99999)
008A: SURVIVOR_WEP_ID = 16@ // (int)
end

0085: 22@ = 16@ // (int)

if and
$PLAYER_ARMY_SIDE == 1
$GAMEMODE_WAR == 1
then

random_int 0@ 0 8
if
0@ == 4
    then
    if or
    not $UNITED_III_SPAWN == 1
    STORIES_MAP == 1
        then
        random_int 0@ 1 5            
        
        if
        UNITED_MAP == 0
        then
        
        random_int 0@ 0 2
        
        if
        0@ == 0
        then
        
        0781: get_weapon_with_ID 70 model_to 16@

        while not model.Available(16@)
        wait 0
        model.Load(16@)
        mload
        end
            
        actor.GiveWeaponAndAmmo(SURVIVER,70,99999)
        SURVIVOR_WEP_ID = 70
        else
        
        0781: get_weapon_with_ID 94 model_to 16@

        while not model.Available(16@)
        wait 0
        model.Load(16@)
        mload
        end
        
        actor.GiveWeaponAndAmmo(SURVIVER,94,99999)
        SURVIVOR_WEP_ID = 94
        end
        
        else
        
        if
        STORIES_MAP == 0
        then
        
        0781: get_weapon_with_ID 149 model_to 16@

        while not model.Available(16@)
        wait 0
        model.Load(16@)
        mload
        end
        
        actor.GiveWeaponAndAmmo(SURVIVER,149,99999)
        SURVIVOR_WEP_ID = 149
        else
        
        if
        $UNITED_VC_FLAG == 1
        then
        
        0781: get_weapon_with_ID 211 model_to 16@

        while not model.Available(16@)
        wait 0
        model.Load(16@)
        mload
        end
        
        actor.GiveWeaponAndAmmo(SURVIVER,211,99999)
        SURVIVOR_WEP_ID = 211
        else
        
        0781: get_weapon_with_ID 181 model_to 16@

        while not model.Available(16@)
        wait 0
        model.Load(16@)
        mload
        end
        
        actor.GiveWeaponAndAmmo(SURVIVER,181,99999)
        SURVIVOR_WEP_ID = 181
        end
        
        end
        
        end
            
        end
    end
    
end

//if
//$GAMEMODE_WAR == 1
//    then
//    random_int 0@ 0 3
//    if
//    0@ == 1
//        then
//        random_int 0@ 1 5
//        
//        while not model.Available(#ROCKETLA)
//        wait 0
//        model.Load(#ROCKETLA)
//        mload
//        end
//        
//        if
//        UNITED_MAP == 0
//        then
//        
//        0781: get_weapon_with_ID 35 model_to 16@
//
//        while not model.Available(16@)
//        wait 0
//        model.Load(16@)
//        mload
//        end
//        
//        actor.GiveWeaponAndAmmo(SURVIVER,35,3)
//        else
//        
//        if
//        $UNITED_VC_FLAG == 0
//        then
//        
//        if
//        STORIES_MAP == 0
//        then
//        
//        0781: get_weapon_with_ID 119 model_to 16@
//
//        while not model.Available(16@)
//        wait 0
//        model.Load(16@)
//        mload
//        end
//        
//        actor.GiveWeaponAndAmmo(SURVIVER,119,3)
//        else
//        
//        0781: get_weapon_with_ID 183 model_to 16@
//
//        while not model.Available(16@)
//        wait 0
//        model.Load(16@)
//        mload
//        end
//        
//        actor.GiveWeaponAndAmmo(SURVIVER,183,3)
//        end
//        
//        else
//        
//        if
//        STORIES_MAP == 0
//        then
//        
//        0781: get_weapon_with_ID 135 model_to 16@
//
//        while not model.Available(16@)
//        wait 0
//        model.Load(16@)
//        mload
//        end
//        
//        actor.GiveWeaponAndAmmo(SURVIVER,135,3)
//        else
//        
//        0781: get_weapon_with_ID 213 model_to 16@
//
//        while not model.Available(16@)
//        wait 0
//        model.Load(16@)
//        mload
//        end
//        
//        actor.GiveWeaponAndAmmo(SURVIVER,213,3)
//        end
//        
//        end
//        
//        end 
//        
//        end  
//    end    

return

////////////////////////Вычисление модели////////////////////////

:RANDOM_PEOPLE1_CHECKING_MODEL
wait 0

if and
18@ == 0
TEAM1_SKIN > 0
then
008B: 0@ = TEAM1_SKIN // (int)
return
end

if and
18@ == 1
TEAM2_SKIN > 0
then
008B: 0@ = TEAM2_SKIN // (int)
return
end

if and
18@ == 2
TEAM3_SKIN > 0
then
008B: 0@ = TEAM3_SKIN // (int)
return
end

if
SWEET_SPAWN_FLAG == 1
then
0@ = #SPECIAL03

repeat
wait 0
023C: load_special_actor 'SWEET' as 3 // models 290-299
until 023D:   special_actor 3 loaded

return

end

if
CARL_SPAWN_FLAG == 1
then
0@ = 0
return
end

if
MIKE_SPAWN_FLAG == 2
then
0@ = 9199
return
end

if
MIKE_SPAWN_FLAG == 1
then

if
$MIKE_STORY == 1
then

if
not USHER_STORY_FLAG == 1
then
0@ = 170
else  
0@ = 15067
end

else
0@ = 60
end

return
end  

if
$SAME_PLAYER_CHEAT_SPAWN == 1
then
0665: get_actor PLAYER_ACTOR model_to 1@
$SAME_PLAYER_CHEAT_SPAWN = 0
0085: 0@ = 1@ // (int)
return
end   

//////////////////////////////////////////////////
    
random_int 0@ = MIN_SKIN_GEN MAX_SKIN_GEN
if and
0@ == SKIN_GEN_SET
UNITED_MAP == 0
$GAMEMODE_WAR == 0
$GAMEMODE_CRAZY == 0
$SAME_PLAYER_CHEAT_SPAWN == 0
    then
    
    while true
    wait 0
    
    if
    0E4D: random_percent NEWSKINS2_GEN_PERCENT
    then
    random_int 0@ $MIN_SKIN2 $MAX_SKIN2
    else
    random_int 0@ $MIN_SKIN $MAX_SKIN
    end
    
    if
    not model.Available(0@)
    then
    model.Load(0@)
    end
    
    if or
    003C:   $RANDOM_MODE_MODEL == 0@  // (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[0] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[1] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[2] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[3] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[4] // @ == $ (int)
    07D6:   0@ == $RANDOM_PEOPLE_SKIN[5] // @ == $ (int)
        then
        else   
        break
        end
    
    end
    
    return
    end
    
//////////////////////////////////////////////////    

if
UNITED_MAP == 0
then

if
$GAMEMODE_WAR == 0
then
0209: 0@ = random_int_in_ranges 7 285
else

if
$PLAYER_ARMY_SIDE == 1
then

//////////////////////////////////////////////

if and
8583: not  player PLAYER_CHAR in_zone 'VE'
8583: not  player PLAYER_CHAR in_zone 'BONE'
8583: not  player PLAYER_CHAR in_zone 'ROBAD'
8583: not  player PLAYER_CHAR in_zone 'ROBAD1'
then
1@ = 0
else
1@ = 1
end

if
1@ == 0
then

0842: 2@ = player PLAYER_CHAR town_number

if
not 2@ == 0
then
0209: 0@ = random_int_in_ranges 14976 14980
else
0209: 0@ = random_int_in_ranges 14980 14984
end

else
0209: 0@ = random_int_in_ranges 15000 15004
end

/////////////////////////////////////////////

end

if
$PLAYER_BANDIT_SIDE == 1
then
0209: 0@ = random_int_in_ranges 14990 14998
end

if
$PLAYER_FERMERS_SIDE == 1
then
0209: 0@ = random_int_in_ranges 14985 14989
end

if
$PLAYER_SWAT_SIDE == 1
then
0209: 0@ = random_int_in_ranges PUNISHER_SKIN_ID_SA PUNISHER_SKIN_ID_SA
end

end

else

if
$UNITED_VC_FLAG == 1
then

if
$GAMEMODE_WAR == 0
then

if
STORIES_MAP == 0
then
0209: 0@ = random_int_in_ranges MINID_VC_SKIN MAXID_VC_SKIN
else
0209: 0@ = random_int_in_ranges MINID_VCS_SKIN MAXID_VCS_SKIN
end

else

if
$PLAYER_ARMY_SIDE == 1
then
0084: $VC_ARMY_SKIN22 = $VC_ARMY_SKIN2 // (int)
$VC_ARMY_SKIN22 += 1
0209: 0@ = random_int_in_ranges $VC_ARMY_SKIN $VC_ARMY_SKIN22
end

if
$PLAYER_BANDIT_SIDE == 1
then
0084: $VC_BANDITS_SKIN22 = $VC_BANDITS_SKIN2 // (int)
$VC_BANDITS_SKIN22 += 1
0209: 0@ = random_int_in_ranges $VC_BANDITS_SKIN1 $VC_BANDITS_SKIN22
end

if
$PLAYER_SWAT_SIDE == 1
then
0209: 0@ = random_int_in_ranges $VC_SWAT_SKIN $VC_SWAT_SKIN
end

end

else

if
$GAMEMODE_WAR == 0
then

if
STORIES_MAP == 0
then
0209: 0@ = random_int_in_ranges MINID_III_SKIN MAXID_III_SKIN
else
0209: 0@ = random_int_in_ranges MINID_LCS_SKIN MAXID_LCS_SKIN
end

else

if
$PLAYER_ARMY_SIDE == 1
then
0209: 0@ = random_int_in_ranges $III_ARMY_SKIN $III_ARMY_SKIN
end

if
$PLAYER_BANDIT_SIDE == 1
then
0084: $III_BANDITS_SKIN22 = $III_BANDITS_SKIN2 // (int)
$III_BANDITS_SKIN22 += 1
0209: 0@ = random_int_in_ranges $III_BANDITS_SKIN1 $III_BANDITS_SKIN22
end

if
$PLAYER_SWAT_SIDE == 1
then
0209: 0@ = random_int_in_ranges $III_SWAT_SKIN $III_SWAT_SKIN
end

end

end

end

if
$GAMEMODE_WAR == 1
then
jump to @RANDOM_PEOPLE1_CHECKING_MODEL2 
end

////////////////////////////////////////////////////////

if
UNITED_MAP == 0
then

2@ = 0

for 1@ = 0 to $CAMPS_COUNT2
        
if or
07D6:   0@ == $CAMP_MODEL1[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL2[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL3[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL4[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL5[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL6[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL7[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL8[1@] // @ == $ (int)
then
2@ = 1
end

if or
07D6:   0@ == $TRADER_MODEL[0] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[1] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[2] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[3] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[4] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[5] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[6] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[7] // @ == $ (int)
then
2@ = 1
end

if or
07D6:   0@ == $TRADER_MODEL[8] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[9] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[10] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[11] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[12] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[13] // @ == $ (int)
07D6:   0@ == $TRADER_MODEL[14] // @ == $ (int)
then
2@ = 1
end
            
if or
07D6:   0@ == $CAMP_MODEL9[1@] // @ == $ (int)
07D6:   0@ == $CAMP_MODEL10[1@] // @ == $ (int)
003C:   $RANDOM_MODE_MODEL == 0@  // (int)
then
2@ = 1
end   

end

end

////////////////////////////////////////////////////////

if or
07D6:   0@ == $RANDOM_PEOPLE_SKIN[0] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[1] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[2] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[3] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[4] // @ == $ (int)
07D6:   0@ == $RANDOM_PEOPLE_SKIN[5] // @ == $ (int)
003C:   $RANDOM_MODE_MODEL == 0@  // (int)
2@ == 1
jf @RANDOM_PEOPLE1_CHECKING_MODEL2
jump @RANDOM_PEOPLE1_CHECKING_MODEL

:RANDOM_PEOPLE1_CHECKING_MODEL2
 
if
07DE:   model 0@ exists  // versionB
jf @RANDOM_PEOPLE1_CHECKING_MODEL

if
$GAMEMODE_WAR == 0
then
0AD3: 2@v = format "%d" 0@
0AF0: 1@ = get_int_from_ini_file "data/skins.ini" section "LOCKED" key 2@v
if
not 1@ == 1
jf @RANDOM_PEOPLE1_CHECKING_MODEL
end  

while not model.Available(0@)
wait 0
model.Load(0@)
mload
end
  
return

:RANDOM_COORD
wait 0
if
$PEOPLE_SPAWN_ON_COORD == 0
jf @RANDOM_COORD_2     
31@ = 0
0208: 15@ = random_float_in_ranges 130.0 -130.0 
0208: 16@ = random_float_in_ranges -130.0 130.0
04C4: store_coords_to 15@ 16@ 17@ from_actor PLAYER_ACTOR with_offset 15@ 16@ 0.0
02C1: store_to 15@ 16@ 17@ car_path_coords_closest_to 15@ 16@ 17@
Actor.StorePos(PLAYER_ACTOR, 19@, 20@, 21@)
050A: 30@ = distance_between_XYZ 15@ 16@ 17@ and_XYZ 19@ 20@ 21@ 
0092: 30@ = float 30@ to_integer
if and
30@ >= 90 
not 30@ > 190
jf @RANDOM_COORD
050A: 30@ = distance_between_XYZ 15@ 16@ 17@ and_XYZ 19@ 20@ 21@
0092: 30@ = float 30@ to_integer
if
not 30@ > 100
jf @RANDOM_COORD
if
not 30@ < 0.0
jf @RANDOM_COORD
if and
8AE2: not 30@ = random_vehicle_near_point 15@ 16@ 17@ in_radius 10.0 find_next 0 pass_wrecked 1 //IF and SET
8AE1: not 31@ = random_actor_near_point 15@ 16@ 17@ in_radius 5.0 find_next 0 pass_deads 0 //IF and SET
jf @RANDOM_COORD
0208: 0@ = random_float_in_ranges -2.0 2.0 
005B: 15@ += 0@ // (float) 
0208: 0@ = random_float_in_ranges -2.0 2.0 
005B: 16@ += 0@ // (float)
21@ = 0                            
return

:RANDOM_COORD_2
0089: 15@ = $PEOPLE_X // (float)
0089: 16@ = $PEOPLE_Y // (float)
0089: 17@ = $PEOPLE_Z // (float)
0208: 0@ = random_float_in_ranges -2.0 2.0 
005B: 15@ += 0@ // (float) 
0208: 0@ = random_float_in_ranges -2.0 2.0 
005B: 16@ += 0@ // (float)
if and
8AE2: not 30@ = random_vehicle_near_point 15@ 16@ 17@ in_radius 5.0 find_next 0 pass_wrecked 1 //IF and SET
8AE1: not 31@ = random_actor_near_point 15@ 16@ 17@ in_radius 2.0 find_next 0 pass_deads 0 //IF and SET
jf @RANDOM_COORD
return

:RANDOM_DIALOG_DEAD_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then
v$PHRASE1 = "PH1_"
else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH14_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH39_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH26_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH53_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end

/////////////////////////////////////////////////////////////////  

if
$GAMEMODE_WAR == 0
then
v$PHRASE1 = "PH1_"
else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH14_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH39_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH26_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH53_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_DAMAGED_BY_WEAPON_SURV

if
SURVIVOR_IN_PLAYER_TEAM == 1
then
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH2_"
else
v$PHRASE1 = "TH2_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH15_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH40_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH27_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH54_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH2_"
else
v$PHRASE1 = "TH2_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH15_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH40_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH27_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH54_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

else

for 1@ = 0 to 200

v$PHRASE1 = "PH3_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH3_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

end

return

:RANDOM_DIALOG_DAMAGED_BY_WEAPON_SURV_FRIENDLY
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH4_"
else
v$PHRASE1 = "TH4_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH91_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH95_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH93_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH97_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH4_"
else
v$PHRASE1 = "TH4_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH91_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH95_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH93_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH97_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_DAMAGED_BY_ZOMBIES_SURV_FRIENDLY
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH5_"
else
v$PHRASE1 = "TH5_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH92_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH96_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH94_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH98_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH5_"
else
v$PHRASE1 = "TH5_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH92_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH96_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH94_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH98_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_DAMAGED_BY_CAR_SURV_FRIENDLY
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then            

if
not MIKE_SPAWN_FLAG == 2
then   
v$PHRASE1 = "PH103_"
else
v$PHRASE1 = "TH103_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH104_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH106_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH105_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH107_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH103_"  
else
v$PHRASE1 = "TH103_" 
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH104_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH106_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH105_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH107_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_DAMAGED_BY_ZOMBIES_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH6_"
else
v$PHRASE1 = "TH6_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH16_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH41_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH28_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH55_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH6_"
else
v$PHRASE1 = "TH6_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH16_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH41_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH28_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH55_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_GRENADE_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then
v$PHRASE1 = "PH7_"
else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH17_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH42_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH29_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH56_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then
v$PHRASE1 = "PH7_"
else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH17_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH42_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH29_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH56_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_HUNTER_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH8_"
else
v$PHRASE1 = "TH8_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH24_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH49_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH36_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH63_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH8_"
else
v$PHRASE1 = "TH8_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH24_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH49_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH36_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH63_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_TANK_NEAR_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then               
v$PHRASE1 = "PH9_"
else
v$PHRASE1 = "TH9_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH20_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH45_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH32_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH59_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH9_"
else
v$PHRASE1 = "TH9_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH20_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH45_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH32_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH59_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_HUNTER_NEAR_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH10_"
else
v$PHRASE1 = "TH10_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH21_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH46_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH33_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH60_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH10_"
else
v$PHRASE1 = "TH10_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH21_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH46_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH33_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH60_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_WITCH_NEAR_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then              

if
not MIKE_SPAWN_FLAG == 2
then 
v$PHRASE1 = "PH11_" 
else     
v$PHRASE1 = "TH11_" 
end

if
PLAYER_IN_NEST_FLAG == 1
then                

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "WH179_" 
else
v$PHRASE1 = "TH179_"
end
 
end

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "WH180_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH22_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH22B_"
end

end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH47_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH47B_"
end

end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH34_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH34B_"
end

end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH61_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH61B_"
end

end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH11_"
else
v$PHRASE1 = "TH11_"
end

if
PLAYER_IN_NEST_FLAG == 1
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "WH179_"
else
v$PHRASE1 = "TH179_"
end

end                  

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "WH180_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH22_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH22B_"
end

end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH47_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH47B_"
end

end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH34_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH34B_"
end

end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH61_"

if
$WTH_AGRED_FLAG[$SPECLS_NUM] == 1
then
v$PHRASE1 = "PH61B_"
end

end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_CHARGER_NEAR_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH12_"
else
v$PHRASE1 = "TH12_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH23_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH48_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH35_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH62_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH12_"
else
v$PHRASE1 = "TH12_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH23_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH48_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH35_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH62_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_ATTACK_SURV
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH13_"
else
v$PHRASE1 = "TH13_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH18_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH43_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH30_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH57_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

if
$GAMEMODE_WAR == 0
then

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH13_"
else
v$PHRASE1 = "TH13_"
end

else

if
$PLAYER_ARMY_SIDE == 1
then
v$PHRASE1 = "PH18_"
end

if
$PLAYER_FERMERS_SIDE == 1
then
v$PHRASE1 = "PH43_"
end

if
$PLAYER_BANDIT_SIDE == 1
then
v$PHRASE1 = "PH30_"
end

if
$PLAYER_SWAT_SIDE == 1
then
v$PHRASE1 = "PH57_"
end

end

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return  

:RANDOM_DIALOG_LET_GO_PEOPLE

for 1@ = 0 to 200

v$PHRASE1 = "PH77_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0 
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH77_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_LET_GO_ANGER_PEOPLE

for 1@ = 0 to 200

v$PHRASE1 = "PH78_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH78_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_PLAYER_BECOME_BANDIT_PEOPLE

for 1@ = 0 to 200

v$PHRASE1 = "PH165_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH165_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_PLAYER_BECOME_BANDIT_ANGER_PEOPLE

for 1@ = 0 to 200

v$PHRASE1 = "PH164_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH164_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_HELP_HIMSELF_PEOPLE

for 1@ = 0 to 200

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH76_"
else
v$PHRASE1 = "PH176_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH76_"
else
v$PHRASE1 = "PH176_"
end

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_KILL1_PEOPLE

for 1@ = 0 to 200

v$PHRASE1 = "PH74_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0  
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH74_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_KILL2_PEOPLE

for 1@ = 0 to 200

v$PHRASE1 = "PH75_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH75_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_SAW_SHIT

for 1@ = 0 to 200

v$PHRASE1 = "PH166_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0  
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH166_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_SAW_SHIT_FRIENDLY

for 1@ = 0 to 200

v$PHRASE1 = "PH167_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0  
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH167_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_INVITE_YES_PEOPLE

for 1@ = 0 to 200

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH72_"
else
v$PHRASE1 = "PH177_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH72_"
else
v$PHRASE1 = "PH177_"
end

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_INVITE_NO_PEOPLE

for 1@ = 0 to 200

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH73_"
else
v$PHRASE1 = "P178_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH73_"
else
v$PHRASE1 = "P178_"
end

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_INVITE_PEOPLE

for 1@ = 0 to 200

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH71_"
else
v$PHRASE1 = "PH176_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

if
SURVIVOR_MARODER_FLAG == 0
then
v$PHRASE1 = "PH71_"
else
v$PHRASE1 = "PH176_"
end

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_PEOPLE_EAT

for 1@ = 0 to 200

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH69_"
else
v$PHRASE1 = "TH69_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH69_"
else
v$PHRASE1 = "TH69_"
end

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_PEOPLE_HEAL

for 1@ = 0 to 200

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH70_"
else
v$PHRASE1 = "TH70_"
end

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

if
not MIKE_SPAWN_FLAG == 2
then
v$PHRASE1 = "PH70_"
else
v$PHRASE1 = "TH70_"
end

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_BETRAY_FROM_PLAYER

for 1@ = 0 to 200

v$PHRASE1 = "PH99_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH99_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_BETRAY_FROM_OTVET

for 1@ = 0 to 200

v$PHRASE1 = "PH174_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH174_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_BETRAY_TO_PLAYER

for 1@ = 0 to 200

v$PHRASE1 = "PH100_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH100_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_BETRAY_TO_PLAYER2

for 1@ = 0 to 200

v$PHRASE1 = "PH101_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH101_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_STAY_HERE_MISSION

for 1@ = 0 to 200

v$PHRASE1 = "PH116_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH116_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_UNSTAY_HERE_MISSION

for 1@ = 0 to 200

v$PHRASE1 = "PH117_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH117_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_SURV_SUSP
    
for 1@ = 0 to 200

/////////////////////////////////////////////////////////////////

v$PHRASE1 = "PH171_"

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

/////////////////////////////////////////////////////////////////

v$PHRASE1 = "PH171_"

/////////////////////////////////////////////////////////////////

0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_SURV_HAZMAT  

for 1@ = 0 to 200

v$PHRASE1 = "PH184_" // v$ // Sunday
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2 // all string variables

09FD: get_gxt_string v$PHRASE3 width_to 31@  // ~k~~PED_SPRINT~ Select

if
not 31@ == 0
    then    
    1@ += 1
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH184_" // v$ // Sunday
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2 // all string variables

return

:RANDOM_DIALOG_NO_MORE_GIVE_ITMES

for 1@ = 0 to 200

v$PHRASE1 = "PH194_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH194_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_NO_RESPECT_FOR_TAKE_ITEMS

for 1@ = 0 to 200

v$PHRASE1 = "PH195_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH195_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return 

:RANDOM_DIALOG_MAIN_WEP_AMMO_ENDED

for 1@ = 0 to 200

v$PHRASE1 = "PH200_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH200_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_GIVED_WEP_AMMO_ENDED

for 1@ = 0 to 200

v$PHRASE1 = "PH201_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH201_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_GIVED_WEP_AMMO_ENDED2

for 1@ = 0 to 200

v$PHRASE1 = "PH202_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$BPHRASE3 width_to 31@

if
not 31@ == 0
    then   
    1@ += 1 
    random_int 0@ 0 1@
    end

end  

v$PHRASE1 = "PH202_"
0AD3: v$PHRASE2 = format "%d" 0@
098B: v$BPHRASE3 = v$PHRASE1 + v$PHRASE2

return                             
      
/////////////////////Союзники атакуют марадеров которых увидили///////////////

:RANDOM_PEOPLE1_ATTACK_PEOPLE1

if
SURVIVOR_IN_PLAYER_TEAM == 1
then
return
end

if
SURVIVOR_MARODER_FLAG == 1
then
else
return
end

092B: 3@ = group PLAYER_GROUP member 0@

if
07D6:   3@ == COOP_ACTOR // @ == $ (int)
then
return
end

if
056D:  actor 3@ defined
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if
SURVIVOR_MARODER_FLAG == 1
    then
    089F: get_actor 3@ pedtype_to 2@
    if
    2@ == 29
        then
        return
        end    
    end

if
056D:   actor SURVIVER defined
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN    

if
056D:   actor 3@ defined
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN

if
$MISSION14_ACTIVE == 1
    then
    if
    not 0@ == 1
    jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
    end
    
if
$QUEST_TYPE == 9
    then
    if
    87D6: not  3@ == $VERSUS_PEOPLE[1] // @ == $ (int)
    jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
    end

if or
00DF:   actor 3@ driving
0449:   actor 3@ in_a_car
    then
    if
    $HUNTER_ON_PLAYER == 0
    //$PEOPLE_DONT_ATTACK == 0
    //$COMMAND_STAY_IN_CAR == 0
        then                     
        gosub @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR
        end
    end 

if and 
not actor.Driving(PLAYER_ACTOR)
$RANDOM_CAR_FLAG == 0  
89DE:   actor 3@ entering_car  
80DF:   actor 3@ in_a_car
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if
00F2:   actor 3@ near_actor SURVIVER radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if and
$HUNTER_ON_PLAYER == 0
$PEOPLE_DONT_ATTACK == 0
$COMMAND_STAY_IN_CAR == 0
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if
not actor.Animation(3@) == "FLOOR_hit"
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if
$HUNTER_ON_GROUP == 0
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN  
if
044B:   actor 3@ on_foot
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN  
if
82E0: not actor 3@ firing_weapon
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
062E: get_actor 3@ task 1506 status_store_to 1@ // ret 7 if not found
if 
1@ == 7
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "colt45_fire_2hands"
not actor.Animation(3@) == "python_fire" 
not actor.Animation(3@) == "shotgun_fire" 
not actor.Animation(3@) == "buddy_fire" 
not actor.Animation(3@) == "UZI_fire"
not actor.Animation(3@) == "RIFLE_fire" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "FLAME_fire" 
not actor.Animation(3@) == "RocketFire" 
not actor.Animation(3@) == "WEAPON_sniper" 
not actor.Animation(3@) == "WEAPON_throw"
not actor.Animation(3@) == "BOM_PLANT"   
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN       
if and
not actor.Animation(3@) == "colt45_crouchfire"
not actor.Animation(3@) == "python_crouchfire" 
not actor.Animation(3@) == "shotgun_crouchfire" 
not actor.Animation(3@) == "buddy_crouchfire" 
not actor.Animation(3@) == "UZI_crouchfire"
not actor.Animation(3@) == "RIFLE_crouchfire" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_reload"
not actor.Animation(3@) == "python_reload" 
not actor.Animation(3@) == "shotgun_reload" 
not actor.Animation(3@) == "buddy_reload" 
not actor.Animation(3@) == "UZI_reload"
not actor.Animation(3@) == "RIFLE_load" 
not actor.Animation(3@) == "gas_cwr"
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_crouchreload"
not actor.Animation(3@) == "python_crouchreload" 
not actor.Animation(3@) == "shotgun_crouchreload" 
not actor.Animation(3@) == "buddy_crouchreload" 
not actor.Animation(3@) == "UZI_crouchreload"
not actor.Animation(3@) == "RIFLE_crouchload" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN 
if and
not actor.Animation(3@) == "GunMove_BWD"
not actor.Animation(3@) == "GunMove_FWD"
not actor.Animation(3@) == "GunMove_L"
not actor.Animation(3@) == "GunMove_R"
not actor.Animation(3@) == "Gun_2_IDLE"
not actor.Animation(3@) == "GUN_BUTT"
not actor.Animation(3@) == "GUN_BUTT_crouch"
not actor.Animation(3@) == "Gun_stand" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "CLIMB_idle"
not actor.Animation(3@) == "CLIMB_jump"
not actor.Animation(3@) == "CLIMB_jump2fall"
not actor.Animation(3@) == "CLIMB_jump_B"
not actor.Animation(3@) == "CLIMB_Pull"
not actor.Animation(3@) == "CLIMB_Stand"
not actor.Animation(3@) == "CLIMB_Stand_finish" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "Crouch_Roll_L"
not actor.Animation(3@) == "Crouch_Roll_R"
not actor.Animation(3@) == "gas_cwr"
not actor.Animation(3@) == "getup"
not actor.Animation(3@) == "getup_front"
not actor.Animation(3@) == "GunCrouchBwd"
not actor.Animation(3@) == "GunCrouchFwd"
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN  
if or
0364:   actor 3@ spotted_actor SURVIVER
0364:   actor SURVIVER spotted_actor 3@
0364:   actor PLAYER_ACTOR spotted_actor SURVIVER
0364:   actor SURVIVER spotted_actor PLAYER_ACTOR
GROUP_COMMAND_GO_ATTACK == 2
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
05C1: AS_actor 3@ speak_from_audio_table $PEOPLE_ZOMBIE_ATTACK_AUDIO_TABLE
if
056D:   actor 3@ defined
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN 
if and
not actor.Driving(PLAYER_ACTOR)
89DE:   actor PLAYER_ACTOR entering_car
80DF:   actor PLAYER_ACTOR in_a_car
80DF:   actor 3@ in_a_car
not actor.Dead(3@)
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
//0647: AS_actor 3@ clear_look_task
//05B9: AS_actor 3@ stay_idle 50 ms 
wait 50
if
056D:   actor 3@ defined  
then
05E2: AS_actor 3@ kill_actor SURVIVER
end

jump @RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN   
                                
:RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR   
if and
not actor.Animation(3@) == "Gang_DrivebyLHS"
not actor.Animation(3@) == "Gang_DrivebyLHS_Bwd"
not actor.Animation(3@) == "Gang_DrivebyLHS_Fwd"
not actor.Animation(3@) == "Gang_DrivebyRHS"
not actor.Animation(3@) == "Gang_DrivebyRHS_Bwd"
not actor.Animation(3@) == "Gang_DrivebyRHS_Fwd" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN 
if and
not actor.Animation(3@) == "Gang_DrivebyTop_LHS"
not actor.Animation(3@) == "Gang_DrivebyTop_RHS" 
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN 
if 
00F2:   actor 3@ near_actor SURVIVER radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
if or
0364:   actor 3@ spotted_actor SURVIVER
0364:   actor SURVIVER spotted_actor 3@
0364:   actor PLAYER_ACTOR spotted_actor SURVIVER
0364:   actor SURVIVER spotted_actor PLAYER_ACTOR
jf @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN

///////////////////////////////////////////////////////////////////////////
if and
0@ == 0
TEAMMATE1_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 1
TEAMMATE2_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 2
TEAMMATE3_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 3
TEAMMATE4_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 4
TEAMMATE5_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
///////////////////////////////////////////////////////////////////////////

if and
8E42: not is_char_doing_task_id 3@ 243
not $COMMAND_STAY_IN_CAR == 1
then
06C9: remove_actor 3@ from_group
0631: put_actor 3@ in_group PLAYER_GROUP
end          
0713: actor 3@ driveby_actor SURVIVER car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360

///////////////////////////////////////////////////////////////////////////
if
0@ == 0
    then
    TEAMMATE1_ATTACK_TIMER = 0
    end
if
0@ == 1
    then
    TEAMMATE2_ATTACK_TIMER = 0
    end
if
0@ == 2
    then
    TEAMMATE3_ATTACK_TIMER = 0
    end
if
0@ == 3
    then
    TEAMMATE4_ATTACK_TIMER = 0
    end
if
0@ == 4
    then
    TEAMMATE5_ATTACK_TIMER = 0
    end
///////////////////////////////////////////////////////////////////////////
 
return       

:RANDOM_PEOPLE1_ATTACK_PEOPLE_IN_CAR_RETURN
return

:RANDOM_PEOPLE1_ATTACK_PEOPLE_BEGIN
return

:SURV_NAME_CHECK

v$2NAME3 = "GAME500"

if or
06EE:   actor SURVIVER in_group PLAYER_GROUP
SURVIVOR_IN_PLAYER_TEAM == 1
SURVIVOR_NAME_KNEW == 1
then

if and
18@ == 0
TEAM1_SKIN > 0
not $GAMEMODE_EDITOR == 1
then
06D1: v$2NAME3 = "F_NAME1" // v$ = string
return
end

if and
18@ == 1
TEAM2_SKIN > 0
not $GAMEMODE_EDITOR == 1
then
06D1: v$2NAME3 = "F_NAME2" // v$ = string
return
end

if and
18@ == 2
TEAM3_SKIN > 0
not $GAMEMODE_EDITOR == 1
then
06D1: v$2NAME3 = "F_NAME3" // v$ = string
return
end

v$2NAME1 = "N_ME"
0665: get_actor SURVIVER model_to 0@
if
0@ > 10000
then
v$2NAME1 = "N_"
end
0AD3: v$2NAME2 = format "%d" 0@
098B: v$2NAME3 = v$2NAME1 + v$2NAME2
return

end

return     

//////////////////////////////////////////////////////////////////////////

:SURVIVER_ONFOOT_ATTACK_SYSTEM

if
056D:   actor SURVIVER defined
    then
    if and
    not actor.Dead(SURVIVER)
    $ACTIVE_INTERIOR == 0
    $INT_ENTERING_FLAG == 0
    SURVIVOR_IN_PLAYER_TEAM == 0
        then
        actor.StorePos(SURVIVER,26@,27@,28@)
        if
        28@ < Z_COORD_DELETE_PED      
            then                        
            05BE: AS_actor SURVIVER die
            end
        end
    end
    
//////////////////////////////////////////////////////////////////////////    

if
$VAGINA6_FLAG[18@] == 1
    then
    $VAGINA6_TIME[18@] += 1
    end               

/////////////////Поиск цели бойцом///////////////////// 

if and
056D:   actor SURVIVER defined
$VAGINA6_FLAG[18@] == 0  
    then
    gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_PLAYER_CHECK
    random_int 2@ 0 3
    if and
    2@ == 1
    1@ == 1
        then
        if or
        0364:  actor SURVIVER spotted_actor PLAYER_ACTOR  
        0364:  actor PLAYER_ACTOR spotted_actor SURVIVER     
        00F2:  actor SURVIVER near_actor PLAYER_ACTOR radius 55.0 55.0 sphere 0
            then
            if and
            $ACTOR_DEAD == 0
            $SPECTATING_FLAG == 0
            00F2:  actor SURVIVER near_actor PLAYER_ACTOR radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
                then       
                008B: $VAGINA6[18@] = PLAYER_ACTOR // (int)
                
                $VAGINA6_FLAG[18@] = 1
                $VAGINA6_TIME[18@] = 0
                
                if
                $VAGINA6_ACCQ_FLAG[18@] == 1
                then
                0A96: 1@ = actor SURVIVER struct
                0A8E: 1@ = 1@ + 0x71A                    
                0A8D: 2@ = read_memory 1@ size 1 virtual_protect 1 
                    
                2@ -= AI_ACQ_ADD_OTHER_TARGET                                         
                                                                            
                0A8C: write_memory 1@ size 4 value 2@ virtual_protect 1    
                
                actor.WeaponAccuracy(SURVIVER) = 2@                
                
                $VAGINA6_ACCQ_FLAG[18@] = 0
                end    
                    
                gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST                                                       
      
                end
            end   
        else    
        gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_TARGET_FIND
        if and
        26@ == 1
        056D:   actor $VAGINA6[18@] defined
            then    
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_TARGET_CHECK
            if
            056D:   actor $VAGINA6[18@] defined
                then
                
                if
                DEBUG_OPPCODE_FLAG == 1
                then
                
                DEBUG_STRING_NUMBER += 1
                0AD3: v$DEBUG_FILE3 = format "SURVIVER%d" DEBUG_STRING_NUMBER
                if
                DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
                then
                0B00: delete_file "debug\debug.ini"  // IF and SET
                DEBUG_STRING_NUMBER = 0
                end
                0AF1: write_int $VAGINA6[18@] to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE3
                
                end
                        
                if and
                not actor.Dead($VAGINA6[18@])  
                0184:   actor $VAGINA6[18@] health > 0          
                803A: not  $VAGINA6[18@] == SURVIVER // (int) 
                1@ == 1                 
                    then
                    if or
                    0364:  actor SURVIVER spotted_actor $VAGINA6[18@]
                    0364:  actor $VAGINA6[18@] spotted_actor SURVIVER
                        then 
                            
                        $VAGINA6_FLAG[18@] = 1
                        $VAGINA6_TIME[18@] = 0
                        
                        if
                        $VAGINA6_ACCQ_FLAG[18@] == 0
                        then
                        0A96: 1@ = actor SURVIVER struct
                        0A8E: 1@ = 1@ + 0x71A                    
                        0A8D: 2@ = read_memory 1@ size 1 virtual_protect 1 
                            
                        2@ += AI_ACQ_ADD_OTHER_TARGET                   
                             
                        if
                        2@ > 95
                        then
                        2@ = 95
                        end                                            
                              
                        0A8C: write_memory 1@ size 4 value 2@ virtual_protect 1
                        
                        actor.WeaponAccuracy(SURVIVER) = 2@                    
                        
                        $VAGINA6_ACCQ_FLAG[18@] = 1
                        end    
                            
                        gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST                        
                        end                                                                                  
                    end 
                end
            end
        end               
    end

/////////////////Проверка на бездействие бойца если цель НЕ найдена/////////////////////     

if and
$VAGINA6_FLAG[18@] == 0
0E45: frame_mod 30
    then
    if
    056D:   actor SURVIVER defined
        then
        
        if
        DEBUG_OPPCODE_FLAG == 1
        then
        
        DEBUG_STRING_NUMBER += 1
        0AD3: v$DEBUG_FILE3 = format "SURVIVER%d" DEBUG_STRING_NUMBER
        if
        DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
        then
        0B00: delete_file "debug\debug.ini"  // IF and SET
        DEBUG_STRING_NUMBER = 0
        end
        0AF1: write_int SURVIVER to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE3
        
        end
                  
        if
        0184:   actor SURVIVER health > 0 
            then
            06AC: 2@ = actor SURVIVER movement_speed
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK
            if and
            1@ == 0
            $ACTIVE_INTERIOR == 0        
            2@ < 0.001
            82E0: not  actor SURVIVER firing_weapon 
                then
                if or
                actor.Animation(SURVIVER) == "idle_stance"
                actor.Animation(SURVIVER) == "idle_armed"
                actor.Animation(SURVIVER) == "woman_idlestance"
                actor.Animation(SURVIVER) == "Swim_Tread"
                    then
                    gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST  
                    end
                end
            end
        end
    end
    
/////////////////Проверка на бездействие бойца если цель найдена/////////////////////     

if and
$VAGINA6_FLAG[18@] == 1
0E45: frame_mod 30
    then
    if
    056D:   actor SURVIVER defined
        then
        
        if
        DEBUG_OPPCODE_FLAG == 1
        then
        
        DEBUG_STRING_NUMBER += 1
        0AD3: v$DEBUG_FILE3 = format "SURVIVER%d" DEBUG_STRING_NUMBER
        if
        DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
        then
        0B00: delete_file "debug\debug.ini"  // IF and SET
        DEBUG_STRING_NUMBER = 0
        end
        0AF1: write_int SURVIVER to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE3
        
        end
                  
        if
        0184:   actor SURVIVER health > 0 
            then
            062E: get_actor SURVIVER task 1506 status_store_to 2@ // ret 7 if not found
            gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK 
            if and
            2@ == 7
            1@ == 0
                then
                gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST  
                end
            end
        end
    end    
     
/////////////////Проверка на наличие цели атаки///////////////////// 

if and
056D:   actor SURVIVER defined
$VAGINA6_FLAG[18@] == 1 
    then
    if
    056D:   actor $VAGINA6[18@] defined
        then
        
        if
        DEBUG_OPPCODE_FLAG == 1
        then
        
        DEBUG_STRING_NUMBER += 1
        0AD3: v$DEBUG_FILE3 = format "SURVIVER%d" DEBUG_STRING_NUMBER
        if
        DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
        then
        0B00: delete_file "debug\debug.ini"  // IF and SET
        DEBUG_STRING_NUMBER = 0
        end
        0AF1: write_int $VAGINA6[18@] to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE3
        
        end
         
        if or
        8184:   actor $VAGINA6[18@] health < 1  
        80F2: not  actor SURVIVER near_actor $VAGINA6[18@] radius $AI_FIND_RADIUS2 $AI_FIND_RADIUS2 sphere 0
        $VAGINA6_TIME[18@] > 600        
            then 
            $VAGINA6_FLAG[18@] = 0
            $VAGINA6_TIME[18@] = 0  
            end
        else
        $VAGINA6_FLAG[18@] = 0
        $VAGINA6_TIME[18@] = 0
        end
    end             

return

:SURVIVER_ONFOOT_ATTACK_SYSTEM_TARGET_FIND

26@ = 0

008B: 1@ = $CREATURE_RANDOM // (int)
0084: $VAGINA6[18@] = $CREATURE[1@] // (int)

if and
056D:   actor $VAGINA6[18@] defined
not 1@ == PLAYER_CREATURE_NUMBER
    then      
    if
    00F2:   actor SURVIVER near_actor $VAGINA6[18@] radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
        then 
        26@ = 1
        end
    end

return

:SURVIVER_ONFOOT_ATTACK_SYSTEM_PLAYER_CHECK

1@ = 0

089F: get_actor SURVIVER pedtype_to 11@  

if
11@ == 26
    then
    1@ = 0
    
    if
    SURVIVOR_NAME_KNEW == 1    
    then
    if
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
        then
        else
        jump to @SURVIVER_ONFOOT_ATTACK_SYSTEM_PLAYER_CHECK_SKIP
        end
    end
    
    if or
    SURVIVOR_ATTACKED_BY_PLAYER_FLAG == 1
    $PEOPLE_ATTACK_PLAYER_FLAG == 1
    then
    1@ = 1
    else
    :SURVIVER_ONFOOT_ATTACK_SYSTEM_PLAYER_CHECK_SKIP
    1@ = 0
    end
    
    return
    end
    
if
11@ == 29
    then    
    1@ = 0
    
    if
    CARMA_VERY_BAD_FLAG == 1    
    then
    if
    051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
        then
        else
        jump to @SURVIVER_ONFOOT_ATTACK_SYSTEM_PLAYER_CHECK_SKIP2
        end
    end
    
    if
    SURVIVOR_MARODER_FLAG == 1
    then
    1@ = 1
    else
    :SURVIVER_ONFOOT_ATTACK_SYSTEM_PLAYER_CHECK_SKIP2
    1@ = 0
    end
        
    return
    end        

return   

:SURVIVER_ONFOOT_ATTACK_SYSTEM_TARGET_CHECK

089F: get_actor SURVIVER pedtype_to 11@ 

if
11@ == 26
    then
    1@ = 0
    089F: get_actor $VAGINA6[18@] pedtype_to 12@ 
    
    if or
    12@ == 23
    12@ == 25
    12@ == 27
    12@ == 29  
    then
    1@ = 1
    else
    1@ = 0
    end
    
    return
    end
    
if
11@ == 27
    then
    1@ = 0
    089F: get_actor $VAGINA6[18@] pedtype_to 12@ 
    
    if or
    12@ == 23
    12@ == 25
    12@ == 26
    12@ == 28
    12@ == 29  
    then
    1@ = 1
    else
    1@ = 0
    end
    
    return
    end
    
if
11@ == 25
    then
    1@ = 0
    089F: get_actor $VAGINA6[18@] pedtype_to 12@ 
    
    if or
    12@ == 23
    12@ == 27
    12@ == 26
    12@ == 28
    12@ == 29  
    then
    1@ = 1
    else
    1@ = 0
    end
    
    return
    end        
    
if
11@ == 29
    then
    1@ = 0
    089F: get_actor $VAGINA6[18@] pedtype_to 12@ 
    
    if or
    12@ == 23
    12@ == 26
    12@ == 27
    12@ == 28
    then
    1@ = 1
    else
    1@ = 0
    end
    
    return
    end                

return 

:SURVIVER_ONFOOT_ATTACK_SYSTEM_CHECK_ATTACK_TARGET_EXSIST 

if 
02E0:   actor SURVIVER firing_weapon 
    then
    return
    end

if 
$VAGINA6_FLAG[18@] == 1
    then 
    if and
    056D:   actor $VAGINA6[18@] defined
    056D:   actor SURVIVER defined
        then            
        0687: clear_actor SURVIVER task
        wait 100
        if and
        056D:   actor $VAGINA6[18@] defined 
        056D:   actor SURVIVER defined
            then              
                
            if
            not actor.Driving(SURVIVER)   
            then                  
            05E2: AS_actor SURVIVER kill_actor $VAGINA6[18@]     
            else   
            0713: actor SURVIVER driveby_actor $VAGINA6[18@] car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360
            end
            
            Actor.SetWalkStyle(SURVIVER, "surv5")
                                
            return           
            end
        end
    else       
    if
    056D:   actor SURVIVER defined
        then 
        0687: clear_actor SURVIVER task
        wait 100         
        if
        056D:   actor SURVIVER defined
            then      
            actor.StorePos(SURVIVER,0@,1@,2@)
            02C0: store_to 26@ 27@ 28@ ped_path_coords_closest_to 0@ 1@ 2@
            0509: 3@ = distance_between_XY 0@ 1@ and_XY 26@ 27@
            
            if and
            3@ < AI_CAR_PATH_WALK_RADIUS
            not ZAME_HUENEMY_FLAG == 1
            then                                        
            05DE: AS_actor SURVIVER walk_around_ped_path
            else
            
            if
            ZAME_HUENEMY_FLAG == 1
            then
            05D3: AS_actor SURVIVER goto_point ZAME_HUENEMY_TARGET_X ZAME_HUENEMY_TARGET_Y ZAME_HUENEMY_TARGET_Z mode 7 time ROAD_WALK_TIME ms // versionA
            return
            end
            
            random_float 30@ 30.0 100.0                                                                       
            04C4: store_coords_to 0@ 1@ 2@ from_actor SURVIVER with_offset 0.0 30@ 0.0
            02C1: store_to 26@ 27@ 28@ car_path_coords_closest_to 0@ 1@ 2@
            
            0509: 3@ = distance_between_XY 0@ 1@ and_XY 26@ 27@
            if
            3@ < 5.0
            then
            random_float 3@ 0.0 360.0
            05D4: AS_actor SURVIVER rotate_angle 3@
            end
            
            if
            84AD: not  actor SURVIVER in_water
            then
            05D3: AS_actor SURVIVER goto_point 26@ 27@ 28@ mode 7 time ROAD_WALK_TIME ms // versionA
            else
            07E1: AS_actor SURVIVER swim_to 26@ 27@ 28@
            end
            
            end                        
                                 
            return           
            end 
        end
    end  
    
return              

:SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK
1@ = 0

if and
not actor.Animation(SURVIVER) == "colt45_fire_2hands"
not actor.Animation(SURVIVER) == "python_fire" 
not actor.Animation(SURVIVER) == "shotgun_fire" 
not actor.Animation(SURVIVER) == "buddy_fire" 
not actor.Animation(SURVIVER) == "UZI_fire"
not actor.Animation(SURVIVER) == "RIFLE_fire" 
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2  

if and
not actor.Animation(SURVIVER) == "FLAME_fire" 
not actor.Animation(SURVIVER) == "RocketFire" 
not actor.Animation(SURVIVER) == "WEAPON_sniper" 
not actor.Animation(SURVIVER) == "WEAPON_throw"
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2  
     
if and
not actor.Animation(SURVIVER) == "colt45_crouchfire"
not actor.Animation(SURVIVER) == "python_crouchfire" 
not actor.Animation(SURVIVER) == "shotgun_crouchfire" 
not actor.Animation(SURVIVER) == "buddy_crouchfire" 
not actor.Animation(SURVIVER) == "UZI_crouchfire"
not actor.Animation(SURVIVER) == "RIFLE_crouchfire" 
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2

if and
not actor.Animation(SURVIVER) == "colt45_reload"
not actor.Animation(SURVIVER) == "python_reload" 
not actor.Animation(SURVIVER) == "shotgun_reload" 
not actor.Animation(SURVIVER) == "buddy_reload" 
not actor.Animation(SURVIVER) == "UZI_reload"
not actor.Animation(SURVIVER) == "RIFLE_load" 
not actor.Animation(SURVIVER) == "gas_cwr"
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2

if and
not actor.Animation(SURVIVER) == "colt45_crouchreload"
not actor.Animation(SURVIVER) == "python_crouchreload" 
not actor.Animation(SURVIVER) == "shotgun_crouchreload" 
not actor.Animation(SURVIVER) == "buddy_crouchreload" 
not actor.Animation(SURVIVER) == "UZI_crouchreload"
not actor.Animation(SURVIVER) == "RIFLE_crouchload" 
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2
 
if and
not actor.Animation(SURVIVER) == "GunMove_BWD"
not actor.Animation(SURVIVER) == "GunMove_FWD"
not actor.Animation(SURVIVER) == "GunMove_L"
not actor.Animation(SURVIVER) == "GunMove_R"
not actor.Animation(SURVIVER) == "Gun_2_IDLE"
not actor.Animation(SURVIVER) == "GUN_BUTT"
not actor.Animation(SURVIVER) == "GUN_BUTT_crouch"
not actor.Animation(SURVIVER) == "Gun_stand" 
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2   

if and
not actor.Animation(SURVIVER) == "WEAPON_throw"
not actor.Animation(SURVIVER) == "WEAPON_throwu"
not actor.Animation(SURVIVER) == "WEAPON_start_throw"
jf @SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2
  
return

:SURVIVER_ONFOOT_ATTACK_SYSTEM_FIRING_CHECK2
1@ = 1
return

:SURVIVER_PHRASE_LOCK_UNLOCK_WITH_HUNTER_AND_DAMAGE

$PHRASES_OFF_FLAG = 1
32@ = 0                               
                
repeat
wait 0  
                
if
86EE: not  actor SURVIVER in_group PLAYER_GROUP
then
gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
end            

gosub @SURV_NAME_CHECK
                
0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 9@ 1
//gosub @SHOW_FUCKING_VOICE
                
if or
actor.Dead(SURVIVER)
8184:   actor SURVIVER health < 150
051A:   actor SURVIVER damaged_by_actor PLAYER_ACTOR
$HUNTER_ON_PLAYER == 1
$SAVESTATUS_TRUE == 1
$SAVESTATUS == 1
DELETE_RAN_RUVS == 1
$PANEL_OPEN == 1
    then
    $PHRASES_OFF_FLAG = 0
    break
    end
                
until 002D:   32@ >= 9@  // (int)
                
$PHRASES_OFF_FLAG = 0

return

:SURVIVER_PHRASE_LOCK_UNLOCK_USUAL

$PHRASES_OFF_FLAG = 1
32@ = 0                               
                
repeat
wait 0  
                
if
86EE: not  actor SURVIVER in_group PLAYER_GROUP
then
gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
end
                
gosub @SURV_NAME_CHECK
                
0384: show_text_1string GXT v$PHRASE3 string v$2NAME3 time 9@ 1
//gosub @SHOW_FUCKING_VOICE
                
if or
actor.Dead(SURVIVER)
8184:   actor SURVIVER health < 150
$SAVESTATUS_TRUE == 1
$SAVESTATUS == 1
DELETE_RAN_RUVS == 1
$PANEL_OPEN == 1
    then
    $PHRASES_OFF_FLAG = 0
    break
    end
                
until 002D:   32@ >= 9@  // (int)
                
$PHRASES_OFF_FLAG = 0

return

:SURVIVER_PHRASE_LOCK_WITH_PLAYER_NAME_UNLOCK_USUAL

$PHRASES_OFF_FLAG = 1
32@ = 0                               
                
repeat
wait 0  
                
if
86EE: not  actor SURVIVER in_group PLAYER_GROUP
then
gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
end

v$NAME1 = "N_ME"
0665: get_actor PLAYER_ACTOR model_to 1@ 
if
1@ > 10000
then
v$NAME1 = "N_"
end
0AD3: v$NAME2 = format "%d" 1@
098B: v$NAME3 = v$NAME1 + v$NAME2

if
FREEMODE_CUSTOM_NAME == 1 
then
06D1: v$NAME3 = "F_NAME" // v$ = string
end
                
0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 9@ 1
//gosub @SHOW_FUCKING_VOICE
                
if or
actor.Dead(SURVIVER)
8184:   actor SURVIVER health < 150
$SAVESTATUS_TRUE == 1
$SAVESTATUS == 1
DELETE_RAN_RUVS == 1
$PANEL_OPEN == 1
    then
    $PHRASES_OFF_FLAG = 0
    break
    end
                
until 002D:   32@ >= 9@  // (int)
                
$PHRASES_OFF_FLAG = 0

return

:RAND_SURV_PHRASES_TIMERS_MINUS_SET
SURVIVOR_PAIN_TIMER = -80
SURVIVOR_ATTACK_TIMER = -100
SURVIVOR_HUNTER_TIMER = -400
SURVIVOR_TANK_TIMER = -1000
SURVIVOR_HUNTER2_TIMER = -1000
SURVIVOR_WITCH_TIMER = -1000
SURVIVOR_CHARGER_TIMER = -1000
return

:ANY_SURV_SAW_THAT_SHIT

for 0@ = 0 to 4

if and
803B: not  0@ == 18@  // (int)
056D:   actor $SURVIVER[0@] defined
    then
    if or
    0364:   actor $SURVIVER[0@] spotted_actor PLAYER_ACTOR
    0364:   actor PLAYER_ACTOR spotted_actor $SURVIVER[0@]
        then
        if
        not actor.Dead($SURVIVER[0@])
            then
    //        0AD1: show_formatted_text_highpriority "SURV: %d is spotted dead SURV: %d" time 2000 0@ 18@
            $SURVIVOR_SAW_SHIT[0@] = 1
            
            if
            CAMP_RAID_FLAG == 1
            then
            CAMP_SAW_SHIT = 1
            end
            
            end
        end
    
    end
    
end

//"там вообще все забагалось, блять, я убил нахуй выжившего звук плохой кармы на меня ПАЧЕМУ-ТО ФЕРМЕРЫ САГРИЛИСЬ, ВЕРТОЛЁТ ПОД ЗЕМЛЕЙ, ПИЗДЕЦ ВСЕ ЗАБАГАЛОСЬ, СКРИПТ ЧЕРЕЗ ЖОПУ ПОШЕЛ!!!!!!
//if
//CAMP_RAID_FLAG == 1
//then
//return
//end

for 0@ = 0 to 9

if
056D:   actor $CAMP_ACTOR[0@] defined
then
if or
0364:   actor $CAMP_ACTOR[0@] spotted_actor PLAYER_ACTOR
0364:   actor PLAYER_ACTOR spotted_actor $CAMP_ACTOR[0@]
    then
    if
    not actor.Dead($CAMP_ACTOR[0@])
        then
    //    0AD1: show_formatted_text_highpriority "CAMP_ACTOR: %d is spotted dead SURV: %d" time 2000 0@ 18@
        CAMP_SAW_SHIT = 1
        end
    end
    
end

end

return

:RAND_SURV_CHECK_WEAPONSLOT_SHIT

2@ = 0

for 0@ = 2 to 9

04B8: get_weapon_data_from_actor PLAYER_ACTOR slot 0@ weapon 26@ ammo 27@ model 1@
04B8: get_weapon_data_from_actor SURVIVER slot 0@ weapon 28@ ammo 3@ model 1@

0782: get_weapon_with_ID 26@ weapon_group_to 11@
0782: get_weapon_with_ID 28@ weapon_group_to 12@

if and
27@ > 0
3@ > 0
003B:   11@ == 12@  // (int)
    then
    2@ = 1
    text.ShowTextBox('INV309')
    end

end

return

:SURVIVOR_CAMP_CHECK_ZONE

0@ = 0

if
UNITED_MAP == 0
then

if
$ZONE69_CAPTURED == 1
then
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 85.9563 1789.6394 0.0 cornerB 395.747 1947.0049 200.0 //Army Zone 1
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 395.747 1947.0049 0.0 cornerB 157.8393 2109.071 200.0 //Army Zone 1-2
    then
    0@ = 1
    end
end

if
$ZONE3_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2864.26 -2296.88 0.0 cornerB 2664.06 -2564.66 200.0 //Army Zone 2
    then
    0@ = 1
    end
end

if
$ZONE2_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -453.13 -460.94 0.0 cornerB -632.81 -570.31 200.0 //Army Zone 3
    then
    0@ = 1
    end
end

if
$ZONE4_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1236.22 532.73 0.0 cornerB -1479.03 480.11 200.0 //Army Zone 4
    then
    0@ = 1
    end
end

if or
CARMA_VERY_BAD_FLAG == 1
$BANDITS_ZONE1_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 788.54 -1327.47 0.0 cornerB 645.23 -1387.39 200.0 //Bandit Zone 1
    then
    0@ = 1
    end
end

if or
CARMA_VERY_BAD_FLAG == 1
$BANDITS_ZONE2_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1359.38 226.56 0.0 cornerB 1250.0 132.81 200.0 //Bandit Zone 2
    then
    0@ = 1
    end
end

if or
CARMA_VERY_BAD_FLAG == 1
$BANDITS_ZONE3_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1098.14 1365.52 0.0 cornerB 1015.68 1220.94 200.0 //Bandit Zone 3
    then
    0@ = 1
    end
end

if or
CARMA_VERY_BAD_FLAG == 1
$BANDITS_ZONE4_CAPTURED == 1
then
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2159.8706 -77.9699 0.0 cornerB -2008.064 -194.9493 200.0 //Bandit Zone 4
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2008.064 -194.9493 0.0 cornerB -2206.4624 -284.2897 200.0 //Bandit Zone 5 
    then
    0@ = 1
    end
end                     

if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1858.78 -1297.43 0.0 cornerB 1903.21 -1333.35 200.0 //Trader Zone 0
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -404.3865 -1476.689 0.0 cornerB -345.3865 -1394.689 200.0 //Trader Zone 1
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 427.52 2548.39 0.0 cornerB 407.61 2526.03 200.0 //Trader Zone 2
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2619.17 -1511.30 0.0 cornerB 2786.00 -1415.17 200.0 //Trader Zone 3
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1886.3972 -1690.2018 0.0 cornerB -1929.0323 -1650.1958 200.0 //Trader Zone 4
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2301.83 -20.72 0.0 cornerB 2335.90 23.12 200.0 //Trader Zone 5
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1755.02 926.82 0.0 cornerB 1718.80 891.51 200.0 //Trader Zone 6
    then
    0@ = 1
    end

if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 704.1189 -1656.6995 0.0 cornerB 676.8928 -1613.5448 200.0 //Trader Zone 7
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1651.67 2606.63 0.0 cornerB -1682.51 2578.91 200.0 //Trader Zone 8
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2323.0 1710.1875 0.0 cornerB 2398.0 1612.1875 200.0 //Trader Zone 9
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2126.95 173.65 0.0 cornerB -2136.94 153.88 200.0 //Trader Zone 10
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1909.89 787.54 0.0 cornerB -1909.89 787.54 200.0 //Trader Zone 11
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -666.168 919.6441 0.0 cornerB -713.3187 950.6985 200.0 //Trader Zone 12
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2210.40 642.64 0.0 cornerB -2201.72 724.11 200.0 //Trader Zone 13  
    then
    0@ = 1
    end
    
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1140.63 -265.63 0.0 cornerB 953.13 -421.88 200.0 //Survivors Zone 1
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2697.67 225.09 0.0 cornerB -2653.78 246.99 200.0 //Survivors Zone 2
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -750.8 1498.59 0.0 cornerB -711.96 1572.89 200.0 //Survivors Zone 3
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2053.71 -1759.78 0.0 cornerB 2019.05 -1805.22 200.0 //Survivors Zone 4
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2519.62 1080.73 0.0 cornerB 2472.25 1188.69 200.0 //Survivors Zone 5
    then
    0@ = 1
    end
    
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2786.9807 -1483.0641 0.0 cornerB 2822.3315 -1424.2843 200.0 //Survivors Zone 4B
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 359.38 -1453.13 0.0 cornerB 265.63 -1585.94 30.0 //Survivors Zone 4C
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2482.6663 -592.8055 0.0 cornerB -2543.678 -721.6879 200.0 //Survivors Zone 2B
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2237.1636 935.8976 0.0 cornerB -2162.6333 1076.9303 200.0 //Survivors Zone 2C
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -264.1352 2641.4204 0.0 cornerB -377.2627 2694.4468 200.0 //Survivors Zone 3B
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 143.3994 -201.4584 0.0 cornerB 173.7076 -151.1922 200.0 //Survivors Zone 1B
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1392.6833 -1604.0728 0.0 cornerB -1471.0334 -1436.6903 200.0 //Survivors Zone 1C
    then
    0@ = 1
    end
    
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2236.3337 2722.114 0.0 cornerB 2460.2527 2824.3809 200.0 //Survivors Zone 5B
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1016.7408 2205.6025 0.0 cornerB 1111.224 2062.55 200.0 //Survivors Zone 5C
00FE:   actor SURVIVER sphere 0 in_sphere -2163.0894 2701.1699 161.9317 radius 320.0 320.0 140.0 // Savepoint 0
00FE:   actor SURVIVER sphere 0 in_sphere -479.3986 -2620.8674 147.2738 radius 320.0 320.0 140.0 // Savepoint 3
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1770.6871 1320.1288 0.0 cornerB -1877.6249 1262.844 200.0 //Savepoint 5
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2736.4915 -1368.2509 0.0 cornerB -2848.7883 -1606.1464 200.0 //Savepoint 6
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1920.1442 2038.9099 0.0 cornerB 1847.5192 1922.1267 200.0 //Savepoint 7
    then
    0@ = 1
    end
    
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 979.0537 -945.1533 0.0 cornerB 886.2838 -886.1838 200.0 //Savepoint 8
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -728.4503 2210.7266 0.0 cornerB -894.4523 2295.7244 200.0 //Savepoint 9
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2039.06 -2390.63 0.0 cornerB -2148.44 -2507.81 200.0 //Survivors Zone 6
    then
    0@ = 1
    end
    
if and
00FE:   actor SURVIVER sphere 0 in_sphere 2357.4922 -653.9675 128.0547 radius 280.0 280.0 80.0
$CARL_STORY == 1
    then
    0@ = 1
    end
    
if and
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1817.3953 -2080.0503 0.0 cornerB 1655.7476 -2158.7622 200.0 //Savepoint 8
$CARL_STORY == 1
    then
    0@ = 1
    end    
    
if
00FE:   actor SURVIVER sphere 0 in_sphere -1401.0402 1493.571 7.1016 radius 280.0 280.0 80.0
    then
    0@ = 1
    end                             
    
else

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -506.2433 1519.1594 0.0 cornerB -448.0033 1464.8523 2000.0 //Survivors Zone 1 LC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1256.9427 1505.7239 0.0 cornerB -1339.8552 1401.7533 2000.0 //Survivors Zone 2 LC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2421.9885 1909.3091 0.0 cornerB -2505.8318 1962.9353 2000.0 //Survivors Zone 3 LC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1356.8033 245.7149 0.0 cornerB 1230.6315 357.2882 2000.0 //Survivors Zone 4 VC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1010.0256 -1435.0776 0.0 cornerB 1159.0013 -1590.2578 2000.0 //Survivors Zone 5 VC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2406.4055 -99.8233 0.0 cornerB 2329.9165 -8.8584 2000.0 //Survivors Zone 6 VC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2176.4023 -2087.9294 0.0 cornerB 2079.8772 -2214.2107 2000.0 //Survivors Zone 7 VC
    then
    0@ = 1
    end
    
if
$ZONE_ARMY_VC_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 513.5914 -1301.1497 0.3276 cornerB 150.817 -922.5633 2000.0 //Army Zone 1 VC
    then
    0@ = 1
    end
end    

if
$ZONE_ARMY_LC_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -957.892090 1897.000977 0.1797 cornerB -1457.954590 2167.000977 2000.0 //Army Zone 1 LC
    then
    0@ = 1
    end
end

if or
$BANDITS_ZONE1_CAPTURED == 1
CARMA_VERY_BAD_FLAG == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1221.532715 183.938416 0.0 cornerB -1633.954590 585.000916 2000.0 //Bandits Zone 1 LC
    then
    0@ = 1
    end
end

if or
$BANDITS_ZONE2_CAPTURED == 1
CARMA_VERY_BAD_FLAG == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1794.9851 -1440.713 0.0 cornerB 1475.4178 -1613.1973 2000.0 //Bandits Zone 1 VC
    then
    0@ = 1
    end
end

if or
$BANDITS_ZONE5_CAPTURED == 1
CARMA_VERY_BAD_FLAG == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1054.4663 -520.0034 0.0 cornerB 833.1603 -791.732 2000.0 //Bandits Zone 2 VC
    then
    0@ = 1
    end
end

if or
$BANDITS_ZONE6_CAPTURED == 1
CARMA_VERY_BAD_FLAG == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2087.6982 -1806.3351 0.0 cornerB 1923.681 -1972.7538 2000.0 //Bandits Zone 3 VC
    then
    0@ = 1
    end
end

if
$ZONE_ARMY2_VC_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 3087.7549 -1470.9808 0.3276 cornerB 2806.7129 -920.1826 2000.0 //Army Zone 2 VC
    then
    0@ = 1
    end
end

if
$ZONE_ARMY3_VC_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 1457.0087 446.2289 0.3276 cornerB 1278.4125 614.613 2000.0 //Army Zone 3 VC
    then
    0@ = 1
    end
end

if or
$BANDITS_ZONE3_CAPTURED == 1
CARMA_VERY_BAD_FLAG == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2499.8142 1133.901 0.0 cornerB -2725.6411 1347.6891 2000.0 //Bandits Zone 2 LC
    then
    0@ = 1
    end
end

if
$ZONE_ARMY2_LC_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2216.000000 2008.016602 0.0 cornerB -2661.173340 2371.000977 2000.0 //Army Zone 2 LC
    then
    0@ = 1
    end
end

if
$ZONE_ARMY3_LC_CAPTURED == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -21.9676 831.9294 0.0 cornerB 274.8031 1198.0509 2000.0 //Army Zone 3 LC
    then
    0@ = 1
    end
end

if or
$BANDITS_ZONE4_CAPTURED == 1
CARMA_VERY_BAD_FLAG == 1
then
if
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -19.5689 1469.4327 0.0 cornerB 277.7072 1843.8197 2000.0 //Bandits Zone 3 LC
    then
    0@ = 1
    end
end    
    
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -142.3726 1688.5039 0.0 cornerB -96.8698 1654.7195 200.0 //Trader Zone 0
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1118.3499 540.5752 0.0 cornerB -1151.8689 583.0291 200.0 //Trader Zone 1
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2000.6525 988.0292 -30.0 cornerB -2124.3333 1072.1268 2.0 //Trader Zone 2
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 679.9727 -801.7593 0.0 cornerB 706.9125 -772.7033 200.0 //Trader Zone 3
00A4:   actor SURVIVER sphere 0 in_cube_cornerA 2359.3618 -1247.1493 15.0 cornerB 2299.1536 -1157.212 200.0 //Trader Zone 4
    then
    0@ = 1
    end               
    
if or
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -2263.0713 2368.6123 0.0 cornerB -1685.692 2463.6145 2000.0 //Survivors Zone 8 LC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1743.1509 2339.5959 0.0 cornerB -1603.3851 2217.8518 2000.0 //Survivors Zone 8 LC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -1080.4521 555.1386 0.0 cornerB -1153.1989 636.4949 2000.0 //Survivors Zone 9 LC
00A4:   actor SURVIVER sphere 0 in_cube_cornerA -466.2975 639.7095 0.0 cornerB -274.9772 728.6678 2000.0 //Survivors Zone 10 LC
    then
    0@ = 1
    end        

end

return 

:SURVIVOR_ACCURACY_SNIPER_CHECK

0@ = 0

if or
0491:   actor SURVIVER has_weapon 34
0491:   actor SURVIVER has_weapon 80
0491:   actor SURVIVER has_weapon 96
0491:   actor SURVIVER has_weapon 97
0491:   actor SURVIVER has_weapon 120
0491:   actor SURVIVER has_weapon 146
0491:   actor SURVIVER has_weapon 147
0491:   actor SURVIVER has_weapon 175
then
0@ = 1
end

if or
0491:   actor SURVIVER has_weapon 176
0491:   actor SURVIVER has_weapon 205
0491:   actor SURVIVER has_weapon 206
then
0@ = 1
end

return

:HATIKO_BETRAY_MOMENT

////////////////////////////////////////////////Предание союзником игрока (хатико moment)////////////////////////////////////////////////                 

if and
056D:   actor SURVIVER defined
not actor.Dead(PLAYER_ACTOR)
not CAMP_RAID_FLAG == 1
not $SOUND_EFFECT1_FLAG == 1
not $NEAR_SALV_POINT == 1
not SURV_SECOND_WAVE_EVACUATION_STARTED == 1
    then       
    if and
    SURVIVOR_IN_PLAYER_TEAM == 1
    $SALVATION_FLAG == 0
    $RADIO_HELP_FLAG == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    not actor.Driving(PLAYER_ACTOR)
    84AD: not  actor PLAYER_ACTOR in_water
        then                   
        if and
        not $SAVESTATUS == 1
        not $SAVESTATUS_TRUE == 1
        not $SAVING_DELAY == 1
        not $INT_ENTERING_FLAG == 1        
            then
                         
            if and
            $PLAYER_OUT_CAR_TIMER > 140
            SURVIVOR_BLEEDING_FLAG == 0
                then
                
                if
                18@ == 0
                then
                $SURV1_STAY_FLAG = 0
                end
                    
                if
                18@ == 1
                then
                $SURV2_STAY_FLAG = 0
                end
                    
                if
                18@ == 2
                then
                $SURV3_STAY_FLAG = 0
                end
                    
                if
                18@ == 3
                then
                $SURV4_STAY_FLAG = 0
                end
                    
                if
                18@ == 4
                then
                $SURV5_STAY_FLAG = 0
                end
                
                if
                SURVIVOR_ATTACK_TIMER == -1
                then
                SURVIVOR_ATTACK_TIMER = 0
                actor.LockInCurrentPosition(SURVIVER,false)
                end
                
                SURVIVOR_IN_PLAYER_TEAM = 0
                
                0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                
                if
                0@ == 1
                then
                audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
                end
                
                if
                UNITED_MAP == 0
                then
                04D8: set_actor SURVIVER drowns_in_water 0
                end
                
                Actor.SetWalkStyle(SURVIVER, "surv5")
                                                    
                gosub @RANDOM_DIALOG_BETRAY_TO_PLAYER2
                text.ClearAll()
                    
                gosub @SURV_NAME_CHECK
                    
                09FD: get_gxt_string v$BPHRASE3 width_to 9@
                0093: 9@ = integer 9@ to_float
                9@ *= 8.0
                0092: 9@ = float 9@ to_integer
                    
                32@ = 0                  
                    
                0687: clear_actor SURVIVER task
                wait 10
                05B9: AS_actor SURVIVER stay_idle 100 ms
                wait 100
                    
                if or
                0449:   actor SURVIVER in_a_car
                actor.Driving(SURVIVER)
                actor.Animation(SURVIVER) == "CAR_sitpLO"
                then
                05DE: AS_actor SURVIVER walk_around_ped_path                                                      
//                    0633: AS_actor SURVIVER exit_car
                end
                    
                0AB9: get_mp3 $PUDDLEOFYOUHIT_SOUND state_to 0@
                    
                if
                0@ == 1
                then
                audiostream.PerformAction($PUDDLEOFYOUHIT_SOUND,STOP)
                end
                    
                $PHRASES_OFF_FLAG = 1                
                    
                repeat
                wait 0 
                    
                if
                86EE: not  actor SURVIVER in_group PLAYER_GROUP
                then
                gosub @SURVIVER_ONFOOT_ATTACK_SYSTEM  
                end
                    
                gosub @SURV_NAME_CHECK 
                    
                0384: show_text_1string GXT v$BPHRASE3 string v$2NAME3 time 9@ 1
                    
                if or
                actor.Dead(SURVIVER)
                $SAVESTATUS_TRUE == 1
                $SAVESTATUS == 1
                $PANEL_OPEN == 1
                    then
                    $PHRASES_OFF_FLAG = 0
                    break
                    end
                    
                until 002D:   32@ >= 9@  // (int)
                    
                $PHRASES_OFF_FLAG = 0                                            
                                                                                                                                                                                 
                end
            end
        end
    end
    
return

{$INCLUDE Coop Other Inv Menus.txt}

:TEAMMATE_DO_NOT_INFINITE_AMMO

0470: 0@ = actor SURVIVER current_weapon
041A: 1@ = actor SURVIVER weapon 0@ ammo
if
$CHEATS_ON == 1
then
1@ = 50
else
1@ /= 99
end

0E83: get_current_char_weaponinfo SURVIVER store_to 2@
0E8A: get_weaponinfo_slot 2@ store_to 3@

if or
3@ == 2
3@ == 3
3@ == 6
then 
1@ /= 4
end

017B: set_actor SURVIVER weapon 0@ ammo_to 1@

return

:SURV_GIVE_RANDOM_MELEE_WEP
wait 0

if
UNITED_MAP == 0
then
random_int SURVIVOR_MELEE_ID 2 to 16
end

if
MIKE_SPAWN_FLAG == 2
then
SURVIVOR_MELEE_ID = 7
end

if
UNITED_MAP == 1
then

if 
$UNITED_VC_FLAG == 1
then

if
STORIES_MAP == 0
then
0209: SURVIVOR_MELEE_ID = random_int_in_ranges 122 132
else
0209: SURVIVOR_MELEE_ID = random_int_in_ranges 185 195
end

else

if
STORIES_MAP == 0
then
SURVIVOR_MELEE_ID = 110
else
0209: SURVIVOR_MELEE_ID = random_int_in_ranges 155 165
end

end

end    

////////////////////////////////////////////////////

if
0491:   actor PLAYER_ACTOR has_weapon 108
then
if or
$MUTATION_ACTIVE == 2
CUSTOM_MODE_ONLY_MELEE == 1
    then
    SURVIVOR_MELEE_ID = 108
    end
end    
  
0781: get_weapon_with_ID SURVIVOR_MELEE_ID model_to 1@ 
if and
07DE:   model 1@ exists // versionB
not SURVIVOR_MELEE_ID == 14
not SURVIVOR_MELEE_ID == 9 
jf @SURV_GIVE_RANDOM_MELEE_WEP

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

if
07D6:   18@ == COOP_ACTOR_SURV_NUM // @ == $ (int)
then
Actor.GiveWeaponAndAmmo(SURVIVER, SURVIVOR_MELEE_ID, 1)
else
Actor.GiveWeaponAndAmmo(SURVIVER, SURVIVOR_MELEE_ID, 99999)
end

07FE: set_actor SURVIVER fighting_style_to 15 moves 6

return

:SURV_WRITE_SET_INFO_ABOUT_GIVEN_WEP

if
$GAMEMODE_EDITOR == 0
then
return
end

if
18@ == 0
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR1_WEP_GIVEN"
0AF1: write_int 0@ to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR1_WEP_GIVEN_ID"
end

if
18@ == 1
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR2_WEP_GIVEN"
0AF1: write_int 0@ to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR2_WEP_GIVEN_ID"
end

if
18@ == 2
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR3_WEP_GIVEN"
0AF1: write_int 0@ to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR3_WEP_GIVEN_ID"
end

if
18@ == 3
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR4_WEP_GIVEN"
0AF1: write_int 0@ to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR4_WEP_GIVEN_ID"
end

if
18@ == 4
then
0AF1: write_int 1 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR5_WEP_GIVEN"
0AF1: write_int 0@ to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR5_WEP_GIVEN_ID"
end

return

:SURV_ERAZE_SET_INFO_ABOUT_GIVEN_WEP

if
$GAMEMODE_EDITOR == 0
then
return
end

if
18@ == 0
then
0AF1: write_int 0 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR1_WEP_GIVEN"
end
    
if
18@ == 1
then
0AF1: write_int 0 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR2_WEP_GIVEN"
end
    
if
18@ == 2
then
0AF1: write_int 0 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR3_WEP_GIVEN"
end
    
if
18@ == 3
then
0AF1: write_int 0 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR4_WEP_GIVEN"
end
    
if
18@ == 4
then
0AF1: write_int 0 to_ini_file "data\survival.set" section "TEAMMATES" key "SURVIVOR5_WEP_GIVEN"
end 

return         

:SURVV_NUM_GET

if
$FREND_NUMBER == 1
then
thread 'SURVVE1'
end

if
$FREND_NUMBER == 2
then
thread 'SURVVE2'
end

if
$FREND_NUMBER == 3
then
thread 'SURVVE3'
end

if
$FREND_NUMBER == 4
then
thread 'SURVVE4'
end

return      