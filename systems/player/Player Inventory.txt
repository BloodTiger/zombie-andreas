:INV_SYS
thread 'INV_SYS'

create_thread @PUKE_SY
create_thread @PUKECSY
create_thread @OTKAZNG

if
not $GAMEMODE_STORYLINE == 1
then 
create_thread @SHT_TLK
end

create_thread @INT_TMS

:INVENTORY_SYSTEM_CHECK
wait 0

if
$CHEATS_ON == 1
then    
if and
0E3D:   key_pressed $KEY_INVENTORY
0AB0:   key_pressed 81
0AB0:   key_pressed 32
    then
        
    if
    player.Controllable(PLAYER_CHAR)
    then
    0@ = 1
    else
    0@ = 0
    end
        
    0AD1: show_formatted_text_highpriority "HUD_REMOVE is %d, PANEL_OPEN is %d, PANEL_OPEN2 is %d~n~pl controllable is %d" time 5000 $HUD_REMOVE $PANEL_OPEN $PANEL_OPEN2 0@
    end
end

if and
$ONMISSION == 1
not OTKAZ_FROM_NAGRADA_FLAG == 1
not CARMA_VERY_BAD_FLAG == 1
not $GAMEMODE_STORYLINE == 1
    then
    
    if
    0A4B:   controls_set_to_joystick
    then
    if and
    0E3E: is_button_just_pressed 0 button 4
    0E3E: is_button_just_pressed 0 button 6
        then
        jump to @OTKAZ_FROM_NAGRADA_JOY_JUMP
        end
    end        
    
    if
    0E3D: is_key_just_pressed 46
        then
        :OTKAZ_FROM_NAGRADA_JOY_JUMP
        
        if and
        $QUEST_TYPE == 6
        $QUEST_READY_FLAG == 1
        then
        jump to @CANCEL_RANDOM_QUEST_DISTANT
        end
        
        if or
        $QUEST_TYPE == 0
        $QUEST_TYPE == 1
        $QUEST_TYPE == 2
        $QUEST_TYPE == 3
        $QUEST_TYPE == 4
        $QUEST_TYPE == 5
        $QUEST_TYPE == 7
        $QUEST_TYPE == 8        
            then
            :CANCEL_RANDOM_QUEST_DISTANT
            
            Audiostream.Volume($MENU_ACCEPT_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($MENU_ACCEPT_SOUND, 0)
            Audiostream.PerformAction($MENU_ACCEPT_SOUND, PLAY)
            
            ////////////////////////////////////////////////
            
            if and
            $QUEST_READY_FLAG == 0
            STALKER_CAN_OKTAZ_FROM_NAGRADA_FLAG == 0
            then
            
            while true
            wait 0
            $PHRASES_OFF_FLAG = 1
            $NOT_ALLOW_COMMANDS = 1
            text.ShowH('GME1111',100,1)
            
            if
            0E3E: is_button_just_pressed 0 button 11 //YES
                then
                RANDOM_QUEST_CANCEL_FLAG = 1
                Audiostream.PerformAction($MENU_ENTER05_SOUND, PLAY)
                Audiostream.Loop($MENU_ENTER05_SOUND, 0)
                Audiostream.Volume($MENU_ENTER05_SOUND) = $SOUNDS_VOLUME
                break
                end
            
            if
            0E3E: is_button_just_pressed 0 button 10 //NO
                then
                Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
                Audiostream.Loop($MENU_BACK_SOUND, 0)
                Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)                                                
                break
                end
            
            end
            
            text.ClearAll()
            
            if
            0A4B:   controls_set_to_joystick
            then
            wait 1000
            else
            wait 0
            end
            
            $PHRASES_OFF_FLAG = 0
            $NOT_ALLOW_COMMANDS = 0
            
            ////////////////////////////////////////////////
            
            else
            
            while true
            wait 0
            text.ShowH('GME1115',100,1)
            $PHRASES_OFF_FLAG = 1
            
            if
            0E3E: is_button_just_pressed 0 button 11 //YES
                then
                Audiostream.PerformAction($MENU_GUITARRIFF_SOUND, PLAY)
                Audiostream.Loop($MENU_GUITARRIFF_SOUND, 0)
                Audiostream.Volume($MENU_GUITARRIFF_SOUND) = $SOUNDS_VOLUME
                OTKAZ_FROM_NAGRADA_FLAG = 1
                break
                end
            
            if
            0E3E: is_button_just_pressed 0 button 10 //NO
                then
                Audiostream.Volume($MENU_BACK_SOUND) = $SOUNDS_VOLUME 
                Audiostream.Loop($MENU_BACK_SOUND, 0)
                Audiostream.PerformAction($MENU_BACK_SOUND, PLAY)                                                
                break
                end
            
            end            
            
            text.ClearAll()
            
            if
            0A4B:   controls_set_to_joystick
            then
            wait 1000
            else
            wait 0
            end
            
            $PHRASES_OFF_FLAG = 0
            $NOT_ALLOW_COMMANDS = 0
            
            end
            
            ////////////////////////////////////////////////
            
            else
            
            if            
            $QUEST_TYPE == 100
                then
                jump to @CANCEL_RANDOM_QUEST_DISTANT
                end
                
            if and
            $QUEST_TYPE == 9
            STALKER_CAN_OKTAZ_FROM_NAGRADA_FLAG == 1
                then
                jump to @CANCEL_RANDOM_QUEST_DISTANT
                end    
                
            end
        end
    end

if and
02D8:   actor PLAYER_ACTOR current_weapon == 73
not $FIST_HUD_ALWAYS == 1
    then
    
    2@ = 73
    
    0085: 0@ = 2@ // (int) 
    0012: 0@ *= 0x70 
    000A: 0@ += 0xC8AAB8 
    000A: 0@ += 0x20 
    0A8D: 3@ = read_memory 0@ size 1 virtual_protect 0  
        
    0A96: 0@ = actor PLAYER_ACTOR struct 
    000A: 0@ += 0x718 
    0A8D: 4@ = read_memory 0@ size 1 virtual_protect 0
        
    0A96: 0@ = actor PLAYER_ACTOR struct 
    000A: 0@ += 0x5A0 
    4@ *= 0x1C 
    005A: 0@ += 4@ // (int) 
    000A: 0@ += 0x8 
    0A8D: 5@ = read_memory 0@ size 4 virtual_protect 0 // GetAmmoClip
                 
    if and
    5@ == 0
    not $FIST_HUD_ALWAYS == 1
        then                            
        3@ = -1
        
        041A: 0@ = actor PLAYER_ACTOR weapon 73 ammo
        if
        0@ < 2
        then
        3@ = 0
        end
                    
        0114: set_actor PLAYER_ACTOR weapon 73 add_ammo 3@
        
        repeat
        wait 0
        
        2@ = 73
    
        0085: 0@ = 2@ // (int) 
        0012: 0@ *= 0x70 
        000A: 0@ += 0xC8AAB8 
        000A: 0@ += 0x20 
        0A8D: 3@ = read_memory 0@ size 1 virtual_protect 0  
            
        0A96: 0@ = actor PLAYER_ACTOR struct 
        000A: 0@ += 0x718 
        0A8D: 4@ = read_memory 0@ size 1 virtual_protect 0
            
        0A96: 0@ = actor PLAYER_ACTOR struct 
        000A: 0@ += 0x5A0 
        4@ *= 0x1C 
        005A: 0@ += 4@ // (int) 
        000A: 0@ += 0x8 
        0A8D: 5@ = read_memory 0@ size 4 virtual_protect 0 // GetAmmoClip
        
        041A: 0@ = actor PLAYER_ACTOR weapon 73 ammo
        if or
        8491: not  actor PLAYER_ACTOR has_weapon 73
        0@ == 0
            then
            break
            end
        
        until 5@ == 1
        
        end
    end 

0945: get_player PLAYER_CHAR max_armour_to 0@
if
not 0@ == 200
then
055F: set_player PLAYER_CHAR max_armour += 100
035F: actor PLAYER_ACTOR armour += -200
end

if
0A4B:   controls_set_to_joystick
    then
    if and
    0E3E: is_button_just_pressed 0 button 10 
    $HUD_REMOVE == 0
    $PANEL_OPEN == 0
    $GAMEMODE_HOLD == 0
    $DEFENSE_CHALLENGE_FLAG == 0
    $GAMEMODE_WAR == 1
    $CHEAT_TYPE_FLAG == 0
        then
        jump to @INV_OPEN_FRACTION_WAR_JUMP
        end
    end

if and
0E3D:   key_pressed $KEY_INVENTORY 
$HUD_REMOVE == 0
$GAMEMODE_HOLD == 0
$DEFENSE_CHALLENGE_FLAG == 0
$GAMEMODE_WAR == 1
$CHEAT_TYPE_FLAG == 0
    then    
    
    :INV_OPEN_FRACTION_WAR_JUMP
    if
    player.Controllable(PLAYER_CHAR)
        then    
        if and
        not Actor.Dead(PLAYER_ACTOR)
        not Actor.Driving(PLAYER_ACTOR)     
        044B:   actor PLAYER_ACTOR on_foot 
        09E7:   player PLAYER_CHAR not_frozen
        02A0:   actor PLAYER_ACTOR stopped
        8597:   actor PLAYER_ACTOR crouching
        not $PANEL_OPEN2 == 1
            then
            if
            not PLAYER_DONT_HAVE_BACKPACK == 1
                then
                if
                $ACTOR_DEAD == 0
                    then                
                    Audiostream.Loop($RADIO_ON_SOUND,0)
                    Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
                    Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME
                    gosub @INV_PLAYER_PAD_OFF                 
                    jump to @RADIO_FM_MENU_START
                    end
                else
                text.RemoveTextBox()
                text.ShowTextBox('INV87')
                
                if
                056D:   actor $VOICE_ACTOR defined
                then
                
                if
                not $RANDOM_MODE_MODEL == 0
                then
                05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 181
                else
                05C1: AS_actor PLAYER_ACTOR speak_from_audio_table 181
                end
                
                end   
                
                wait 1000
                end
            end
        end
    end
    
if
$GAMEMODE_WAR == 1
then
jump to @INVENTORY_SYSTEM_CHECK
end

if
0A4B:   controls_set_to_joystick
    then
    if and
    0E3E: is_button_just_pressed 0 button 10 
    $HUD_REMOVE == 0
    $GAMEMODE_HOLD == 0
    $DEFENSE_CHALLENGE_FLAG == 0
    $GAMEMODE_WAR == 0
    $CHEAT_TYPE_FLAG == 0
    not PLAYER_NO_ITEMS_FLAG == 1
    not MIKE_SHIZA_FLAG == 1
        then
        if
        $PANEL_OPEN == 0
            then
            jump to @INV_OPEN_JUMP
            end
        end
    end       

if and
0E3D:   key_pressed $KEY_INVENTORY 
$HUD_REMOVE == 0
$GAMEMODE_HOLD == 0
$DEFENSE_CHALLENGE_FLAG == 0
$GAMEMODE_WAR == 0
$CHEAT_TYPE_FLAG == 0
not PLAYER_NO_ITEMS_FLAG == 1
not MIKE_SHIZA_FLAG == 1
    then    
    
    :INV_OPEN_JUMP
    if
    player.Controllable(PLAYER_CHAR)
        then
        if and
        not Actor.Dead(PLAYER_ACTOR)
        not Actor.Driving(PLAYER_ACTOR)
        044B:   actor PLAYER_ACTOR on_foot 
        09E7:   player PLAYER_CHAR not_frozen
        02A0:   actor PLAYER_ACTOR stopped
        8597:   actor PLAYER_ACTOR crouching
        not $PANEL_OPEN2 == 1
        not $PANEL_OPEN == 1
            then
            if
            $CANALS_CHALLENGE_FLAG == 0
                then
                if
                not PLAYER_DONT_HAVE_BACKPACK == 1
                    then
                    if
                    $ACTOR_DEAD == 0
                        then                
                        Audiostream.Volume($PICKUP_ITEM_SOUND) = $SOUNDS_VOLUME 
                        Audiostream.Loop($PICKUP_ITEM_SOUND, 0)
                        Audiostream.PerformAction($PICKUP_ITEM_SOUND, PLAY)                 
                        jump to @INVENTORY_SHOW
                        end
                    else
                    text.RemoveTextBox()
                    text.ShowTextBox('INV87')
                    
                    if
                    056D:   actor $VOICE_ACTOR defined
                    then
                    
                    if
                    not $RANDOM_MODE_MODEL == 0
                    then
                    05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 181
                    else
                    05C1: AS_actor PLAYER_ACTOR speak_from_audio_table 181
                    end
                    
                    end   
                    
                    wait 1000
                    end
                end
            end
        end
    end

if
0800:   in_two_players_mode 
then
if and
056D:   actor COOP_ACTOR defined
not COOP_ACTOR == -69
not PLAYER_NO_ITEMS_FLAG == 1
    then    
    if and
    $GAMEMODE_HOLD == 0
    $GAMEMODE_WAR == 0
    $GAMEMODE_EDITOR == 0
    $CANALS_CHALLENGE_FLAG == 0
    $CAR_CHECKING_FLAG == 0 
    $PANEL_OPEN == 0
    8E3E: not is_button_just_pressed 0 button 10    
    0E3E: is_button_just_pressed 1 button 10        
        then
        if and
        not $PANEL_OPEN2P == 1
        not actor.Animation(COOP_ACTOR) == "BOM_PLANT"
        044B:   actor COOP_ACTOR on_foot
            then
            COOP_2P_OPEN_INV = 1
            end
        end
    end
end            
    
:STORY_INV_SKIP    

if and
$BINOCULARS_USING_FLAG == 0
$DEFENSE_CHALLENGE_FLAG == 0
not PLAYER_NO_ITEMS_FLAG == 1
not MIKE_SHIZA_FLAG == 1
    then
    if and    
    0E3D:   key_pressed $KEY_FAST_USE_FOOD 
    $HUD_REMOVE == 0  
    $GAMEMODE_HOLD == 0     
    $CHEAT_TYPE_FLAG == 0
    not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"
    not actor.Animation(PLAYER_ACTOR) == "EAT_Vomit_P" 
    80E1: not key_pressed 0 5 
    80E1: not key_pressed 0 7   
        then
        if
        player.Controllable(PLAYER_CHAR)
            then
            if and
            not Actor.Dead(PLAYER_ACTOR)
            not Actor.Driving(PLAYER_ACTOR) 
            044B:   actor PLAYER_ACTOR on_foot 
            09E7:   player PLAYER_CHAR not_frozen
            8597:   actor PLAYER_ACTOR crouching
            $GAMEMODE_WAR == 0    
                then
                if
                not PLAYER_DONT_HAVE_BACKPACK == 1
                    then
                    if
                    not $BANKA == 0
                        then
                        if
                        not $SATIETY_LEVEL > 599.0
                            then
                            gosub @FOOD_USE
                            else
                            text.ShowTextBox('INV13')
                            wait 1000
                            end
                        else
                        text.ShowTextBox('INV33')
                        wait 1000 
                        end
                    else
                    text.RemoveTextBox()
                    text.ShowTextBox('INV87')
                    
                    if
                    056D:   actor $VOICE_ACTOR defined
                    then
                    
                    if
                    not $RANDOM_MODE_MODEL == 0
                    then
                    05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 181
                    else
                    05C1: AS_actor PLAYER_ACTOR speak_from_audio_table 181
                    end
                    
                    end   
                    
                    wait 1000
                     
                    end
                end
            end
        end
    end

if and
$BINOCULARS_USING_FLAG == 0
$DEFENSE_CHALLENGE_FLAG == 0
not PLAYER_NO_ITEMS_FLAG == 1
not MIKE_SHIZA_FLAG == 1
    then    
    if and 
    0E3D:   key_pressed $KEY_FAST_USE_FOOD_CAR  
    $HUD_REMOVE == 0
    $GAMEMODE_HOLD == 0
    $GAMEMODE_WAR == 0
    $CHEAT_TYPE_FLAG == 0
    80E1: not key_pressed 0 5 
    80E1: not key_pressed 0 7   
        then
        if and
        player.Controllable(PLAYER_CHAR)
        not actor.Animation(PLAYER_ACTOR) == "EAT_Vomit_P_Car"
            then                         
            if and
            not Actor.Dead(PLAYER_ACTOR)
            actor.Driving(PLAYER_ACTOR)
            847A: not  actor PLAYER_ACTOR driving_bike
            not actor.DrivingVehicleType(PLAYER_ACTOR,#QUAD)
            not actor.DrivingVehicleType(PLAYER_ACTOR,15426)
            not actor.DrivingVehicleType(PLAYER_ACTOR,15558) 
            09E7:   player PLAYER_CHAR not_frozen
            not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"          
                then
                if
                not $BANKA == 0
                    then
                    if
                    not $SATIETY_LEVEL > 599.0
                        then
                        gosub @FOOD_USE
                        else
                        text.ShowTextBox('INV13')
                        wait 1000
                        end
                    else
                    text.ShowTextBox('INV33')
                    wait 1000 
                    end 
                end
            end
        end
    end
    
if and    
0E3D:   key_pressed $KEY_FAST_USE_HEAL 
$HUD_REMOVE == 0
$GAMEMODE_WAR == 0
not Actor.Driving(PLAYER_ACTOR)
not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"   
$BINOCULARS_USING_FLAG == 0
8AD2: $HEAL_TARGET = player PLAYER_CHAR targeted_actor //IF and SET  
$CHEAT_TYPE_FLAG == 0       
    then              
    if and
    80E1: not  player 0 pressed_key 5
    80E1: not  player 0 pressed_key 7
    80E1: not  player 0 pressed_key 6
    8E46: not is_char_using_gun PLAYER_ACTOR
    not PLAYER_NO_ITEMS_FLAG == 1
    not actor.Animation(PLAYER_ACTOR) == "EAT_Vomit_P"  
        then
        5@ = Actor.Health(PLAYER_ACTOR)
        0D39: 6@ = actor PLAYER_ACTOR max_health
        0092: 6@ = float 6@ to_integer
        if
        802D: not  5@ >= 6@  // (int)
            then
            if and
            not Actor.Dead(PLAYER_ACTOR)         
            044B:   actor PLAYER_ACTOR on_foot 
            09E7:   player PLAYER_CHAR not_frozen
            02A0:   actor PLAYER_ACTOR stopped
            8597:   actor PLAYER_ACTOR crouching
                then
                if
                player.Controllable(PLAYER_CHAR)
                    then
                
                    5@ = Actor.Health(PLAYER_ACTOR)
                    0D39: 6@ = actor PLAYER_ACTOR max_health
                    6@ *= 0.7
                    0092: 6@ = float 6@ to_integer
                    
                    if and
                    not $HEAL == 0
                    802D: not  5@ >= 6@  // (int)
                        then            
                        gosub @HEAL_USE                   
                        else
                        if
                        not $BINT == 0
                            then                                       
                            gosub @BINT_USE                               
                            else
                            
                            if
                            not $HEAL == 0
                            then
                            gosub @HEAL_USE
                            else
                            text.ShowTextBox('INV34')
                            wait 1000
                            end
                            
                            end                 
                        end 
                    end
                end
            else
            if and
            80E1: not key_pressed 0 5 
            80E1: not key_pressed 0 7  
                then
                text.ShowTextBox('INV23')
                wait 1000   
                end
            end
        end
    end
    
if and    
0E3D:   key_pressed $KEY_FAST_USE_HEAL 
$HUD_REMOVE == 0
not Actor.Driving(PLAYER_ACTOR)
not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"
0AD2: $HEAL_TARGET = player PLAYER_CHAR targeted_actor //IF and SET
80E1: not key_pressed 0 5 
80E1: not key_pressed 0 7  
$CHEAT_TYPE_FLAG == 0       
    then                 
    5@ = Actor.Health($HEAL_TARGET) 
    0D39: 6@ = actor $HEAL_TARGET max_health
    0092: 6@ = float 6@ to_integer
    089F: get_actor $HEAL_TARGET pedtype_to 0@
    if and        
    $BINOCULARS_USING_FLAG == 0
    803B: not  5@ == 6@  // (int)
    801D: not  5@ > 6@  // (int)
    not 0@ == 23          
    $GAMEMODE_WAR == 0
    00F2:   actor $HEAL_TARGET near_actor PLAYER_ACTOR radius 5.0 5.0 sphere 0
        then
        if and
        not Actor.Dead(PLAYER_ACTOR)         
        044B:   actor PLAYER_ACTOR on_foot 
        09E7:   player PLAYER_CHAR not_frozen
        02A0:   actor PLAYER_ACTOR stopped
        8597:   actor PLAYER_ACTOR crouching
        not PLAYER_NO_ITEMS_FLAG == 1
            then
            if
            player.Controllable(PLAYER_CHAR)
                then
                if
                not $BINT == 0
                    then            
                    gosub @BINT_USE                   
                    else
                    if
                    not $HEAL == 0
                        then                                       
                        gosub @HEAL_USE                               
                        else                                        
                        text.ShowTextBox('INV34')
                        wait 1000                    
                        end                 
                    end 
                end
            end
        else
        
        if
        0@ == 26
        then
        text.ShowTextBox('INV155')
        wait 1000   
        end
        
        end
    end
    
if
0A4B:   controls_set_to_joystick
then
if and    
00E1: key_pressed 0 19 
$HUD_REMOVE == 0
not Actor.Driving(PLAYER_ACTOR)
not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"
0AD2: $HEAL_TARGET = player PLAYER_CHAR targeted_actor //IF and SET
80E1: not key_pressed 0 5 
80E1: not key_pressed 0 7  
$CHEAT_TYPE_FLAG == 0       
    then                 
    5@ = Actor.Health($HEAL_TARGET) 
    0D39: 6@ = actor $HEAL_TARGET max_health
    0092: 6@ = float 6@ to_integer
    089F: get_actor $HEAL_TARGET pedtype_to 0@
    if and        
    $BINOCULARS_USING_FLAG == 0
    803B: not  5@ == 6@  // (int)
    801D: not  5@ > 6@  // (int)
    not 0@ == 23          
    $GAMEMODE_WAR == 0
    00F2:   actor $HEAL_TARGET near_actor PLAYER_ACTOR radius 5.0 5.0 sphere 0
        then
        if and
        not Actor.Dead(PLAYER_ACTOR)         
        044B:   actor PLAYER_ACTOR on_foot 
        09E7:   player PLAYER_CHAR not_frozen
        02A0:   actor PLAYER_ACTOR stopped
        8597:   actor PLAYER_ACTOR crouching
        not PLAYER_NO_ITEMS_FLAG == 1
            then
            if
            player.Controllable(PLAYER_CHAR)
                then
                if
                not $BINT == 0
                    then            
                    gosub @BINT_USE                   
                    else
                    if
                    not $HEAL == 0
                        then                                       
                        gosub @HEAL_USE                               
                        else                                        
                        text.ShowTextBox('INV34')
                        wait 1000                    
                        end                 
                    end 
                end
            end
        else
        
        if
        0@ == 26
        then
        text.ShowTextBox('INV155')
        wait 1000   
        end
        
        end
    end
end          
          
if and    
0E3D:   key_pressed $KEY_FAST_USE_MEDS_CAR 
$HUD_REMOVE == 0
$GAMEMODE_WAR == 0
Actor.Driving(PLAYER_ACTOR)
not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"
$BINOCULARS_USING_FLAG == 0
$CHEAT_TYPE_FLAG == 0   
    then
    if and
    80E1: not  player 0 pressed_key 5
    80E1: not  player 0 pressed_key 7
    80E1: not  player 0 pressed_key 6
    not PLAYER_NO_ITEMS_FLAG == 1     
        then
        5@ = Actor.Health(PLAYER_ACTOR)
        0D39: 6@ = actor PLAYER_ACTOR max_health
        0092: 6@ = float 6@ to_integer
        if
        802D: not  5@ >= 6@  // (int)
            then
            0@ = actor.CurrentCar(PLAYER_ACTOR)
            if and
            not Actor.Dead(PLAYER_ACTOR)         
            09E7:   player PLAYER_CHAR not_frozen
            01C1:   car 0@ stopped
            09D0:   car 0@ on_wheels
                then
                if
                player.Controllable(PLAYER_CHAR)
                    then
                
                    5@ = Actor.Health(PLAYER_ACTOR)
                    0D39: 6@ = actor PLAYER_ACTOR max_health
                    6@ *= 0.8
                    0092: 6@ = float 6@ to_integer
                    
                    if and
                    not $HEAL == 0
                    802D: not  5@ >= 6@  // (int)
                        then
                        0@ = actor.CurrentCar(PLAYER_ACTOR)
                        car.LockInCurrentPosition(0@) = true            
                        gosub @HEAL_USE
                        
                        if
                        Actor.Driving(PLAYER_ACTOR)
                        then
                        0@ = actor.CurrentCar(PLAYER_ACTOR)
                        car.LockInCurrentPosition(0@) = false
                        end
                                           
                        else
                        if
                        not $BINT == 0
                            then
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = true                                       
                            gosub @BINT_USE
                            
                            if
                            Actor.Driving(PLAYER_ACTOR)
                            then
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = false
                            end
                                                           
                            else
                            
                            if
                            not $HEAL == 0
                            then
                            
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = true            
                            gosub @HEAL_USE
                            
                            if
                            Actor.Driving(PLAYER_ACTOR)
                            then
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = false
                            end
                            
                            else
                            text.ShowTextBox('INV34')
                            wait 1000
                            end
                            
                            end                 
                        end 
                    end
                end
            else
            if and
            80E1: not key_pressed 0 5 
            80E1: not key_pressed 0 7  
                then
                text.ShowTextBox('INV23')
                wait 1000   
                end
            end
        end
    end
    
if
0A4B:   controls_set_to_joystick
then
if and    
00E1:  player 0 pressed_key 6 
$HUD_REMOVE == 0
$GAMEMODE_WAR == 0
Actor.Driving(PLAYER_ACTOR)
not actor.Animation(PLAYER_ACTOR) == "WEAPON_sniper"
$BINOCULARS_USING_FLAG == 0
$CHEAT_TYPE_FLAG == 0   
    then
    if and
    80E1: not  player 0 pressed_key 5
    80E1: not  player 0 pressed_key 7
    not PLAYER_NO_ITEMS_FLAG == 1
    02A0:  actor PLAYER_ACTOR stopped     
        then
        5@ = Actor.Health(PLAYER_ACTOR)
        0D39: 6@ = actor PLAYER_ACTOR max_health
        0092: 6@ = float 6@ to_integer
        if
        802D: not  5@ >= 6@  // (int)
            then
            0@ = actor.CurrentCar(PLAYER_ACTOR)
            if and
            not Actor.Dead(PLAYER_ACTOR)         
            09E7:   player PLAYER_CHAR not_frozen
            01C1:   car 0@ stopped
            09D0:   car 0@ on_wheels
                then
                if
                player.Controllable(PLAYER_CHAR)
                    then
                
                    5@ = Actor.Health(PLAYER_ACTOR)
                    0D39: 6@ = actor PLAYER_ACTOR max_health
                    6@ *= 0.8
                    0092: 6@ = float 6@ to_integer
                    
                    if and
                    not $HEAL == 0
                    802D: not  5@ >= 6@  // (int)
                        then
                        0@ = actor.CurrentCar(PLAYER_ACTOR)
                        car.LockInCurrentPosition(0@) = true            
                        gosub @HEAL_USE
                        
                        if
                        Actor.Driving(PLAYER_ACTOR)
                        then
                        0@ = actor.CurrentCar(PLAYER_ACTOR)
                        car.LockInCurrentPosition(0@) = false
                        end
                                           
                        else
                        if
                        not $BINT == 0
                            then
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = true                                       
                            gosub @BINT_USE
                            
                            if
                            Actor.Driving(PLAYER_ACTOR)
                            then
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = false
                            end
                                                           
                            else
                            
                            if
                            not $HEAL == 0
                            then
                            
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = true            
                            gosub @HEAL_USE
                            
                            if
                            Actor.Driving(PLAYER_ACTOR)
                            then
                            0@ = actor.CurrentCar(PLAYER_ACTOR)
                            car.LockInCurrentPosition(0@) = false
                            end
                            
                            else
                            text.ShowTextBox('INV34')
                            wait 1000
                            end
                            
                            end                 
                        end 
                    end
                end
            else
            if and
            80E1: not key_pressed 0 5 
            80E1: not key_pressed 0 7  
                then
                text.ShowTextBox('INV23')
                wait 1000   
                end
            end
        end
    end
end           
    
jump to @INVENTORY_SYSTEM_CHECK

:INVENTORY_SHOW
text.ClearAll()
008B: 27@ = $MINUTES_PLAYED // (int)
008B: 28@ = $HOURS_PLAYED // (int)
28@ *= 60
005A: 27@ += 28@  // (int)
$PANEL_OPEN = 1
//0792: disembark_instantly_actor PLAYER_ACTOR
//0792: disembark_instantly_actor PLAYER_ACTOR
//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
gosub @INV_PLAYER_PAD_OFF 
0581: enable_radar 0
015D: set_gamespeed 0.1 
$PLAYER_MONEY = player.Money(PLAYER_CHAR)
008C: $ITEMS_WEIGHT3 = float $ITEMS_WEIGHT to_integer
if
FREEMODE_CUSTOM_NAME == 1 
then
06D1: v$NAME3 = "F_NAME" // v$ = string
end

$INVENTORY_PANEL = 0
08D4: $INVENTORY_PANEL = create_panel_with_title PLAYER_ORIGIN_NAME position 71.0 150.0 width 100.0 columns 2 interactive 1 background 1 alignment 1 
08DB: set_panel $INVENTORY_PANEL column 0 header v$NAME3 data 'INV1' 'INV5' 'INV9' 'INV18' 'INV35' 'INV90' 'INV196' 'INV15' 'INV88' s$TIME2_STRING 'INV153' 'DUMMY' 

if
8A4B: not  controls_set_to_joystick
then
0512: show_permanent_text_box 'INV8B'  
else

if
STATE_MAP_BOUGHT_FLAG == 1
then
0512: show_permanent_text_box 'INV8A'
else
0512: show_permanent_text_box 'INV8'
end

end 

if
$KANISTRA > 0
then
008C: $KANISTRA_FUEL2 = float $KANISTRA_FUEL to_integer
else
$KANISTRA_FUEL2 = 0
end
 
08D6: set_panel $INVENTORY_PANEL column 1 alignment 1 
08EE: set_panel $INVENTORY_PANEL column 1 row 0 text_1number GXT 'INV3' number $BANKA 
08EE: set_panel $INVENTORY_PANEL column 1 row 1 text_1number GXT 'INV3' number $HEAL 
08EE: set_panel $INVENTORY_PANEL column 1 row 2 text_1number GXT 'INV3' number $BINT
if
$KANISTRA > 0
then 
08EE: set_panel $INVENTORY_PANEL column 1 row 3 text_1number GXT 'INV3B' number $KANISTRA_FUEL2
else
08EE: set_panel $INVENTORY_PANEL column 1 row 3 text_1number GXT 'INV3C' number $KANISTRA_FUEL2
end
 
08EE: set_panel $INVENTORY_PANEL column 1 row 4 text_1number GXT 'INV3' number $RADIO
08EE: set_panel $INVENTORY_PANEL column 1 row 5 text_1number GXT 'INV3' number $JIMMY
08EE: set_panel $INVENTORY_PANEL column 1 row 6 text_1number GXT 'INV3' number $REPAIR_KIT 
08EE: set_panel $INVENTORY_PANEL column 1 row 8 text_1number GXT s$WEIGHT_STRING number $ITEMS_WEIGHT3
08EE: set_panel $INVENTORY_PANEL column 1 row 9 text_1number GXT s$TIME_STRING number 27@
08EE: set_panel $INVENTORY_PANEL column 1 row 10 text_1number GXT 'INV3' number $PLAYER_MONEY
09DB: set_panel $INVENTORY_PANEL column 0 width 145 //200
09DB: set_panel $INVENTORY_PANEL column 1 width 25 
090E: set_panel $INVENTORY_PANEL active_row 21@

08D9: set_panel $INVENTORY_PANEL row 7 enable 0
08D9: set_panel $INVENTORY_PANEL row 8 enable 0
08D9: set_panel $INVENTORY_PANEL row 9 enable 0
08D9: set_panel $INVENTORY_PANEL row 10 enable 0
08D9: set_panel $INVENTORY_PANEL row 11 enable 0

if or
$SLAVING_STARTED == 1
$AIRDROP_FLAG == 2
then
08D9: set_panel $INVENTORY_PANEL row 4 enable 0

if
$PANEL7_ACTIVE_ROW == 4
then
$PANEL7_ACTIVE_ROW = 3
end

end

090E: set_panel $INVENTORY_PANEL active_row $PANEL7_ACTIVE_ROW  
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1 

:INVENTORY_SHOW_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if and
0E3E: player 0 pressed_key 14
0A4B:   controls_set_to_joystick
    then
    015D: set_gamespeed 1.0
    wait 0
    OPEN_PERKS_MENU_FLAG = 1
    jump to @INV_CLOSE_JUMP
    end
    
if and
0E3E: player 0 pressed_key 17
0A4B:   controls_set_to_joystick
    then
    015D: set_gamespeed 1.0
    wait 0
    OPEN_NOTES_MENU_FLAG = 1
    jump to @INV_CLOSE_JUMP
    end
    
if and
0E3E: player 0 pressed_key 6
0A4B:   controls_set_to_joystick
    then
    015D: set_gamespeed 1.0
    wait 0
    OPEN_NOTES_MENU_FLAG = 2
    jump to @INV_CLOSE_JUMP
    end
    
if and
0E3E: player 0 pressed_key 5
0A4B:   controls_set_to_joystick
    then
    015D: set_gamespeed 1.0
    wait 0
    OPEN_NOTES_MENU_FLAG = 3
    jump to @INV_CLOSE_JUMP
    end
    
if and
0E3E: player 0 pressed_key 7
0A4B:   controls_set_to_joystick
    then
    015D: set_gamespeed 1.0
    wait 0
    OPEN_NOTES_MENU_FLAG = 4
    jump to @INV_CLOSE_JUMP
    end                

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV8B' displayed
then
0512: show_permanent_text_box 'INV8B' 
end

else

if
STATE_MAP_BOUGHT_FLAG == 1
then

if
8A2A: not  text_box 'INV8A' displayed
then
0512: show_permanent_text_box 'INV8A' 
end

else

if
8A2A: not  text_box 'INV8' displayed
then
0512: show_permanent_text_box 'INV8' 
end

end

end

08D7: $PANEL7_ACTIVE_ROW = panel $INVENTORY_PANEL active_row

015D: set_gamespeed 0.1 

if
$PANEL7_ACTIVE_ROW == 0 
    then     
    if
    0E3E: player 0 pressed_key 16
        then
        if
        not $BANKA == 0
            then
            if
            not $SATIETY_LEVEL > 599.0 
                then    
                03E6: remove_text_box 
                08DA: remove_panel $PANEL  
                00BE: text_clear_all  
                015D: set_gamespeed 1.0 
                cinema.Radar(1)
                gosub @INV_PLAYER_PAD_ON_BACK
                $PANEL_OPEN = 0                  
                gosub @FOOD_USE
                jump to @INVENTORY_SYSTEM_CHECK
                else
                text.ShowH('INV13',100,1)
                wait 50
                jump to @INVENTORY_SHOW_IDLE 
                end
            else
            text.ShowH('INV7',100,1)
            wait 50 
            jump to @INVENTORY_SHOW_IDLE
            end         
        else
        if or
        0E3E: is_button_just_pressed 0 button 4
        0E3D: is_key_just_pressed $KEY_DROP
            then
            if
            $BANKA > 0
                then
                08D7: 21@ = panel $INVENTORY_PANEL active_row
                $BANKA -= 1
                text.ShowH('INV101',100,1)  
                0581: enable_radar 1 
                03E6: remove_text_box 
                08DA: remove_panel $INVENTORY_PANEL
                gosub @PLAY_DROP_SOUND  
                                              
                //////////////////////////////Создание пикапа пакета с едой//////////////////////////////            
                
                random_float 19@ -1.0 1.0
                random_float 20@ 2.0 3.0
                        
                04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0 
                
                02CE: 3@ = ground_z_at 1@ 2@ 3@
                
                3@ += 1.0
                
                $FOOD_PICKUP_NUM += 1
                
                if
                $FOOD_PICKUP_NUM > 28
                then 
                $FOOD_PICKUP_NUM = 0                              
                end
                
                if
                09D1:   pickup $FOOD_PICKUP[$FOOD_PICKUP_NUM] created
                    then   
                    pickup.Destroy($FOOD_PICKUP[$FOOD_PICKUP_NUM])
                    end 
                
                $FOOD_PICKUP[$FOOD_PICKUP_NUM] = pickup.Create(2663,3,1@,2@,3@)                
                jump @INVENTORY_SHOW 
                end
            end
         end
      end            

    if
    $PANEL7_ACTIVE_ROW == 1 
        then     
        if
        0E3E: player 0 pressed_key 16
            then
            if
            not $HEAL == 0
                then
                5@ = Actor.Health(PLAYER_ACTOR)
                0D39: 6@ = actor PLAYER_ACTOR max_health
                0092: 6@ = float 6@ to_integer
                if
                802D: not  5@ >= 6@  // (int)
                    then    
                    03E6: remove_text_box 
                    08DA: remove_panel $PANEL  
                    00BE: text_clear_all  
                    015D: set_gamespeed 1.0 
                    cinema.Radar(1)
                    gosub @INV_PLAYER_PAD_ON_BACK
                    $PANEL_OPEN = 0                  
                    gosub @HEAL_USE
                    jump to @INVENTORY_SYSTEM_CHECK
                    else
                    text.ShowH('INV23',100,1)
                    wait 50
                    jump to @INVENTORY_SHOW_IDLE 
                    end
                else
                text.ShowH('INV7',100,1)
                wait 50 
                jump to @INVENTORY_SHOW_IDLE
                end 
            else
            if or
            0E3E: is_button_just_pressed 0 button 4
            0E3D: is_key_just_pressed $KEY_DROP
                then
                if
                $HEAL > 0
                    then
                    08D7: 21@ = panel $INVENTORY_PANEL active_row
                    $HEAL -= 1
                    text.ShowH('INV102',100,1)  
                    0581: enable_radar 1 
                    03E6: remove_text_box 
                    08DA: remove_panel $INVENTORY_PANEL 
                    gosub @PLAY_DROP_SOUND
                    
                    //////////////////////////////Создание пикапа аптечки//////////////////////////////
                
                    random_float 19@ -1.0 1.0
                    random_float 20@ 2.0 3.0
                            
                    04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0
                    
                    02CE: 3@ = ground_z_at 1@ 2@ 3@
                    
                    3@ += 1.0
                    
                    $HEAL_PICKUP_NUM += 1
                    
                    if
                    $HEAL_PICKUP_NUM > 28
                    then 
                    $HEAL_PICKUP_NUM = 0             
                    end
                    
                    if
                    09D1:   pickup $HEAL_PICKUP[$HEAL_PICKUP_NUM] created
                        then   
                        pickup.Destroy($HEAL_PICKUP[$HEAL_PICKUP_NUM])
                        end 
                    
                    $HEAL_PICKUP[$HEAL_PICKUP_NUM] = pickup.Create(#clothesp,3,1@,2@,3@)                        
                    jump @INVENTORY_SHOW 
                    end
                end
            end  
        end           
    
if
$PANEL7_ACTIVE_ROW == 2 
    then     
    if
    0E3E: player 0 pressed_key 16
        then
        if
        not $BINT == 0
            then
            5@ = Actor.Health(PLAYER_ACTOR)
            0D39: 6@ = actor PLAYER_ACTOR max_health
            0092: 6@ = float 6@ to_integer
            if
            802D: not  5@ >= 6@  // (int)
                then    
                03E6: remove_text_box 
                08DA: remove_panel $PANEL  
                00BE: text_clear_all  
                015D: set_gamespeed 1.0 
                cinema.Radar(1)
                gosub @INV_PLAYER_PAD_ON_BACK
                $PANEL_OPEN = 0                  
                gosub @BINT_USE
                jump to @INVENTORY_SYSTEM_CHECK
                else
                text.ShowH('INV23',100,1)
                wait 50
                jump to @INVENTORY_SHOW_IDLE 
                end
            else
            text.ShowH('INV7',100,1)
            wait 50 
            jump to @INVENTORY_SHOW_IDLE
            end 
        else
        if or
        0E3E: is_button_just_pressed 0 button 4
        0E3D: is_key_just_pressed $KEY_DROP
            then
            if
            $BINT > 0
                then
                08D7: 21@ = panel $INVENTORY_PANEL active_row
                $BINT -= 1
                text.ShowH('INV103',100,1)  
                0581: enable_radar 1 
                03E6: remove_text_box 
                08DA: remove_panel $INVENTORY_PANEL
                gosub @PLAY_DROP_SOUND
                
                //////////////////////////////Создание пикапа бинта//////////////////////////////
                
                random_float 19@ -1.0 1.0
                random_float 20@ 2.0 3.0
                        
                04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0 
                
                02CE: 3@ = ground_z_at 1@ 2@ 3@   
                
                3@ += 1.0
                    
                $BINT_PICKUP_NUM += 1
                    
                if
                $BINT_PICKUP_NUM > 28
                then 
                $BINT_PICKUP_NUM = 0             
                end
                
                if
                09D1:   pickup $BINT_PICKUP[$BINT_PICKUP_NUM] created
                    then   
                    pickup.Destroy($BINT_PICKUP[$BINT_PICKUP_NUM])
                    end 
                    
                $BINT_PICKUP[$BINT_PICKUP_NUM] = pickup.Create(#pain_killer,3,1@,2@,3@)                
                jump @INVENTORY_SHOW 
                end
             end
          end
    end             
    
if
$PANEL7_ACTIVE_ROW == 3 
    then     
    if
    0E3E: player 0 pressed_key 16
        then        
        if
        not $KANISTRA == 0
            then
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all                             
            gosub @KANISTRA_USE
            jump to @INVENTORY_SHOW          
            else
            text.ShowH('INV7B',100,1)
            wait 50 
            jump to @INVENTORY_SHOW_IDLE
            end 
        else    
        if or
        0E3E: is_button_just_pressed 0 button 4
        0E3D: is_key_just_pressed $KEY_DROP
            then
            if
            $KANISTRA > 0
                then
                08D7: 21@ = panel $INVENTORY_PANEL active_row
                $KANISTRA = 0
                text.ShowH('INV161',100,1)  
                0581: enable_radar 1 
                03E6: remove_text_box 
                08DA: remove_panel $INVENTORY_PANEL
                gosub @PLAY_DROP_SOUND
                
                //////////////////////////////Создание пикапа канистры//////////////////////////////
                
                random_float 19@ -1.0 1.0
                random_float 20@ 2.0 3.0
                        
                04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0
                
                02CE: 3@ = ground_z_at 1@ 2@ 3@
                
                3@ += 1.0
                    
                $KANISTRA_PICKUP_NUM += 1
                    
                if
                $KANISTRA_PICKUP_NUM > 28
                then 
                $KANISTRA_PICKUP_NUM = 0                                        
                end
                
                if
                09D1:   pickup $PIZDA_PICKUP[$KANISTRA_PICKUP_NUM] created
                    then   
                    pickup.Destroy($PIZDA_PICKUP[$KANISTRA_PICKUP_NUM])
                    end  
                    
                $PIZDA_PICKUP[$KANISTRA_PICKUP_NUM] = pickup.Create(#PETROLCANM,3,1@,2@,3@)
                
                0086: $PIZDA_PICKUP_FUEL[$KANISTRA_PICKUP_NUM] = $KANISTRA_FUEL // (float)
                
                $KANISTRA_FUEL = 0.0                
                jump @INVENTORY_SHOW 
                end
            end
        end
    end  
    
if
$PANEL7_ACTIVE_ROW == 4 
    then     
    if
    0E3E: player 0 pressed_key 16
        then
        if
        $RADIO > 0
            then
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            Audiostream.Loop($RADIO_ON_SOUND,0)
            Audiostream.PerformAction($RADIO_ON_SOUND, PLAY)
            Audiostream.Volume($RADIO_ON_SOUND) = $SOUNDS_VOLUME                       
            jump to @RADIO_MENU_START          
            else            
            text.ShowH('INV7',100,1)
            wait 50             
            jump to @INVENTORY_SHOW_IDLE
            end 
        else
        if or
        0E3E: is_button_just_pressed 0 button 4
        0E3D: is_key_just_pressed $KEY_DROP
            then
            if
            $RADIO > 1
                then
                08D7: 21@ = panel $INVENTORY_PANEL active_row
                $RADIO -= 1
                text.ShowH('INV184',100,1)  
                0581: enable_radar 1 
                03E6: remove_text_box 
                08DA: remove_panel $INVENTORY_PANEL
                gosub @PLAY_DROP_SOUND
                
                //////////////////////////////Создание пикапа рации//////////////////////////////
                
                random_float 19@ -1.0 1.0
                random_float 20@ 2.0 3.0
                        
                04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0
                
                02CE: 3@ = ground_z_at 1@ 2@ 3@
                
                3@ += 1.0
                    
                $RADIO_PICKUP_NUM += 1
                    
                if
                $RADIO_PICKUP_NUM > 18
                then 
                $RADIO_PICKUP_NUM = 0                
                end
                
                if
                09D1:   pickup $RADIO_PICKUP[$RADIO_PICKUP_NUM] created
                    then   
                    pickup.Destroy($RADIO_PICKUP[$RADIO_PICKUP_NUM])
                    end 
                    
                $RADIO_PICKUP[$RADIO_PICKUP_NUM] = pickup.Create(#CELLPHONE,3,1@,2@,3@)                                
                jump @INVENTORY_SHOW
                else
                
                if
                $RADIO == 0
                then
                else
                text.ShowH('INV247',100,1)
                wait 50
                end
                 
                end
            end
        end
    end      
    
if
$PANEL7_ACTIVE_ROW == 5 
    then     
    if 
    0E3E: player 0 pressed_key 16    
        then
        if
        not $JIMMY == 0
            then
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            015D: set_gamespeed 1.0
            gosub @INV_PLAYER_PAD_ON_BACK
            0581: enable_radar 1 
            07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
            $PANEL_OPEN = 0                            
            gosub @JIMMY_START3 
            $JIMMY_USING = 0
            jump to @INVENTORY_SHOW          
            else
            text.ShowH('INV7',100,1)
            wait 50 
            jump to @INVENTORY_SHOW_IDLE
            end 
        else
        if or
        0E3E: is_button_just_pressed 0 button 4
        0E3D: is_key_just_pressed $KEY_DROP
            then
            if
            $JIMMY > 0
                then
                08D7: 21@ = panel $INVENTORY_PANEL active_row
                $JIMMY -= 1
                text.ShowH('INV185',100,1)  
                0581: enable_radar 1 
                03E6: remove_text_box 
                08DA: remove_panel $INVENTORY_PANEL
                gosub @PLAY_DROP_SOUND
                
                //////////////////////////////Создание пикапа отмычки//////////////////////////////
                
                random_float 19@ -1.0 1.0
                random_float 20@ 2.0 3.0
                        
                04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0
                
                02CE: 3@ = ground_z_at 1@ 2@ 3@
                
                3@ += 1.0
                    
                $JIMMY_PICKUP_NUM += 1
                    
                if
                $JIMMY_PICKUP_NUM > 28
                then 
                $JIMMY_PICKUP_NUM = 0          
                end
                
                if
                09D1:   pickup $JIMMY_PICKUP[$JIMMY_PICKUP_NUM] created
                    then   
                    pickup.Destroy($JIMMY_PICKUP[$JIMMY_PICKUP_NUM])
                    end 
                    
                $JIMMY_PICKUP[$JIMMY_PICKUP_NUM] = pickup.Create(#drug_red,3,1@,2@,3@)                                
                jump @INVENTORY_SHOW 
                end
            end
        end
    end         
    
if
$PANEL7_ACTIVE_ROW == 6 
    then     
    if 
    0E3E: player 0 pressed_key 16    
        then
        if
        not $REPAIR_KIT == 0
            then
            03E6: remove_text_box 
            08DA: remove_panel $PANEL  
            00BE: text_clear_all
            jump to @TOOLS_MENU_START          
            else
            text.ShowH('INV7',100,1)
            wait 50 
            jump to @INVENTORY_SHOW_IDLE
            end 
        else
        if or
        0E3E: is_button_just_pressed 0 button 4
        0E3D: is_key_just_pressed $KEY_DROP
            then
            if
            $REPAIR_KIT > 0
                then
                08D7: 21@ = panel $INVENTORY_PANEL active_row
                $REPAIR_KIT -= 1
                text.ShowH('INV223',100,1)  
                0581: enable_radar 1 
                03E6: remove_text_box 
                08DA: remove_panel $INVENTORY_PANEL
                gosub @PLAY_DROP_SOUND
                
                //////////////////////////////Создание пикапа инструмента//////////////////////////////
                
                random_float 19@ -1.0 1.0
                random_float 20@ 2.0 3.0
                        
                04C4: store_coords_to 1@ 2@ 3@ from_actor PLAYER_ACTOR with_offset 19@ 20@ 0.0
                
                02CE: 3@ = ground_z_at 1@ 2@ 3@
                
                3@ += 1.0
                    
                $REPAIR_PICKUP_NUM += 1
                    
                if
                $REPAIR_PICKUP_NUM > 28
                then 
                $REPAIR_PICKUP_NUM = 0          
                end
                
                if
                09D1:   pickup $REPAIR_PICKUP[$REPAIR_PICKUP_NUM] created
                    then   
                    pickup.Destroy($REPAIR_PICKUP[$REPAIR_PICKUP_NUM])
                    end 
                    
                $REPAIR_PICKUP[$REPAIR_PICKUP_NUM] = pickup.Create(1273,3,1@,2@,3@)                                
                jump @INVENTORY_SHOW 
                end
            end
        end
    end               

if or
0E3E: is_button_just_pressed 0 15 
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
then
:INV_CLOSE_JUMP
03E6: remove_text_box 
08DA: remove_panel $INVENTORY_PANEL  
00BE: text_clear_all     
015D: set_gamespeed 1.0 
cinema.Radar(1)
gosub @INV_PLAYER_PAD_ON_BACK
$PANEL_OPEN = 0
//$INV_CLOSED = 1  
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
if and
not OPEN_PERKS_MENU_FLAG == 1
not OPEN_NOTES_MENU_FLAG == 1
then
wait 100
end

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
//$INV_CLOSED = 0
jump to @INVENTORY_SYSTEM_CHECK
else
jump @INVENTORY_SHOW_IDLE
end

jump to @INVENTORY_SHOW_IDLE 

:PLAY_DROP_SOUND
Audiostream.Volume($DROP_ITEM_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($DROP_ITEM_SOUND, 0)
Audiostream.PerformAction($DROP_ITEM_SOUND, PLAY) 
return

:HEAL_USE

if
REALISM_MODE == 1
then
jump to @HEAL_USE_REALISM
end

$HEAL_USE += 1

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_USE"

if
$CHEATED_FLAG == 0 
then         
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_USE"

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT90_GOT"
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_USE"    
    
if and
0@ == 0
1@ >= 300
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH90"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT90_GOT"        
    end

0470: 9@ = actor PLAYER_ACTOR current_weapon

$HEAL -= 1
0629: change_integer_stat 280 to 1 
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
$PANEL_OPEN = 0

if 
0AD2: 0@ = player PLAYER_CHAR targeted_actor //IF and SET
then

0D39: 6@ = actor 0@ max_health
0092: 6@ = float 6@ to_integer
Actor.Health(0@) = 6@   
05C1: AS_actor 0@ speak_from_audio_table 161  

else
5@ = Actor.Health(PLAYER_ACTOR)

if
$FREEMODE == 1
then

if
REALISM_MODE == 0
then
MEDS_EFFECTIVETY -= 0.025
else
MEDS_EFFECTIVETY -= 0.035
end

if
PERK_HEALTH == 3
then
MEDS_EFFECTIVETY += 0.01
end

end

2@ = 150.0
if
EXTRA_MEDS_HEAL == 1
then
2@ += 30.0
end

if
EXTRA_MEDS_HEAL == 2
then
2@ += 45.0
end

if
EXTRA_MEDS_HEAL == 3
then
2@ += 65.0
end

006F: 2@ *= MEDS_EFFECTIVETY // (float)
0092: 2@ = float 2@ to_integer
005A: 5@ += 2@  // (int)  
   
//5@ += 150 
Actor.Health(PLAYER_ACTOR) = 5@
end    

32@ = 0

2@ = Audiostream.Load3d("AUDIO\SOUNDS\meds_use.wav")
Audiostream.LinkToActor(2@, PLAYER_ACTOR)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

if
not actor.Driving(PLAYER_ACTOR)
then
0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1 
end

03E6: remove_text_box 
03E5: show_text_box 'INV6'

while true 
wait 0

Audiostream.Volume(2@) = $SOUNDS_VOLUME
0AB9: get_mp3 2@ state_to 0@

if or
$SAVESTATUS_TRUE == 1
0@ == -1
    then
    break
    end

end      

Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)

0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@

0629: change_integer_stat 280 to 0
$INV_CLOSED = 1  
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0
return

:HEAL_USE_REALISM

0470: 9@ = actor PLAYER_ACTOR current_weapon

0629: change_integer_stat 280 to 1 
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
$PANEL_OPEN = 0

32@ = 0

if 
0AD2: 3@ = player PLAYER_CHAR targeted_actor //IF and SET
then
1@ = 1
else
1@ = 0
end

2@ = Audiostream.Load3d("AUDIO\SOUNDS\meds_use.wav")
Audiostream.LinkToActor(2@, PLAYER_ACTOR)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

if
not actor.Driving(PLAYER_ACTOR)
then
0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1 
end

03E6: remove_text_box 
03E5: show_text_box 'INV6'

if
$FREEMODE == 1
then

if
REALISM_MODE == 0
then
MEDS_EFFECTIVETY -= 0.025
else
MEDS_EFFECTIVETY -= 0.035
end

if
PERK_HEALTH == 3
then
MEDS_EFFECTIVETY += 0.01
end

end

while true 
wait 0

5@ = 12.0
0077: 5@ /= MEDS_EFFECTIVETY // (float) 
0092: 5@ = float 5@ to_integer
if and
//32@ > 12
001D:   32@ > 5@  // (int)
1@ == 0
then
32@ = 0
5@ = Actor.Health(PLAYER_ACTOR)
5@ += 2 
Actor.Health(PLAYER_ACTOR) = 5@
end

Audiostream.Volume(2@) = $SOUNDS_VOLUME
0AB9: get_mp3 2@ state_to 0@

if
not actor.Driving(PLAYER_ACTOR)
then
if or
$SAVESTATUS_TRUE == 1
0@ == -1
not actor.Animation(PLAYER_ACTOR) == "BOM_PLANT"
    then
    break
    end
else
if or
$SAVESTATUS_TRUE == 1
0@ == -1
    then
    break
    end
end
    
end

if 
1@ == 1
then
0D39: 6@ = actor 3@ max_health
0092: 6@ = float 6@ to_integer
Actor.Health(3@) = 6@   
05C1: AS_actor 3@ speak_from_audio_table 161  
end

$HEAL -= 1
$HEAL_USE += 1

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_USE"

if
$CHEATED_FLAG == 0 
then         
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_USE"

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT90_GOT"
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_HEAL_USE"    
    
if and
0@ == 0
1@ >= 300
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH90"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT90_GOT"        
    end            

Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)

0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@

0629: change_integer_stat 280 to 0
$INV_CLOSED = 1  
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0
return

:BINT_USE

if
REALISM_MODE == 1
then
jump to @BINT_USE_REALISM
end

$BINT_USE += 1

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_USE"

if
$CHEATED_FLAG == 0 
then          
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_USE"

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT91_GOT"
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_USE"    
    
if and
0@ == 0
1@ >= 200
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH91"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT91_GOT"        
    end  

0470: 9@ = actor PLAYER_ACTOR current_weapon

$BINT -= 1 
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
$PANEL_OPEN = 0
0629: change_integer_stat 280 to 1

if
0AD2: 0@ = player PLAYER_CHAR targeted_actor //IF and SET
then

0D39: 6@ = actor 0@ max_health
0092: 6@ = float 6@ to_integer
6@ /= 2   

5@ = Actor.Health(0@)
005A: 5@ += 6@  // (int) 
Actor.Health(0@) = 5@

05C1: AS_actor 0@ speak_from_audio_table 161  
 
if    
001D:   5@ > 6@  // (int)
then
0D39: 6@ = actor 0@ max_health
0092: 6@ = float 6@ to_integer
Actor.Health(0@) = 6@    
end   

else
5@ = Actor.Health(PLAYER_ACTOR)

if
$MONTHS_PASSED == 0
then
2@ = 15
end

if
$MONTHS_PASSED == 1
then
2@ = 25
end

if
$MONTHS_PASSED == 2
then
2@ = 40
end

if
$MONTHS_PASSED >= 3
then
2@ = 60
end 

if
0E4D: random_percent 2@
then
5@ += 23   
03E6: remove_text_box 
03E5: show_text_box 'INV370'
else
5@ += 70 
03E6: remove_text_box 
03E5: show_text_box 'INV32'
end

if
EXTRA_MEDS_HEAL == 1
then
5@ += 20
end

if
EXTRA_MEDS_HEAL == 2
then
5@ += 30
end

if
EXTRA_MEDS_HEAL == 3
then
5@ += 40
end

Actor.Health(PLAYER_ACTOR) = 5@
end                    

32@ = 0

2@ = Audiostream.Load3d("AUDIO\SOUNDS\meds_use.wav")
Audiostream.LinkToActor(2@, PLAYER_ACTOR)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

if
not actor.Driving(PLAYER_ACTOR)
then
0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1 
end

while true 
wait 0

Audiostream.Volume(2@) = $SOUNDS_VOLUME
0AB9: get_mp3 2@ state_to 0@  
  
if or
$SAVESTATUS_TRUE == 1
0@ == -1
    then
    break
    end
    
end

Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)    
   
0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0 

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@

0629: change_integer_stat 280 to 0  
$INV_CLOSED = 1  
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0
return

:BINT_USE_REALISM

0470: 9@ = actor PLAYER_ACTOR current_weapon

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
$PANEL_OPEN = 0
0629: change_integer_stat 280 to 1

if
0AD2: 3@ = player PLAYER_CHAR targeted_actor //IF and SET
then
1@ = 1
else
1@ = 0
end

if
$MONTHS_PASSED == 0
then
2@ = 15
end

if
$MONTHS_PASSED == 1
then
2@ = 25
end

if
$MONTHS_PASSED == 2
then
2@ = 40
end

if
$MONTHS_PASSED >= 3
then
2@ = 60
end 

if
1@ == 1
then
2@ = 0
end

if
0E4D: random_percent 2@
then
03E6: remove_text_box 
03E5: show_text_box 'INV370'
6@ = 1
else
03E6: remove_text_box 
03E5: show_text_box 'INV32'
6@ = 0
end
            
32@ = 0

2@ = Audiostream.Load3d("AUDIO\SOUNDS\meds_use.wav")
Audiostream.LinkToActor(2@, PLAYER_ACTOR)
Audiostream.Loop(2@, 0)
Audiostream.PerformAction(2@, PLAY)
Audiostream.Volume(2@) = $SOUNDS_VOLUME

if
not actor.Driving(PLAYER_ACTOR)
then
0605: actor PLAYER_ACTOR perform_animation "BOM_PLANT" IFP "CAMERA" framedelta 4.0 loop 0 lockX 0 lockY 0 lockF 0 time -1 
end

while true 
wait 0

5@ = 26
if
6@ == 1
then
5@ *= 30
end

if and         
//32@ > 26
001D:   32@ > 5@  // (int)
1@ == 0
then
5@ = Actor.Health(PLAYER_ACTOR)
5@ += 1 
Actor.Health(PLAYER_ACTOR) = 5@
end

Audiostream.Volume(2@) = $SOUNDS_VOLUME
0AB9: get_mp3 2@ state_to 0@  

if
not actor.Driving(PLAYER_ACTOR)
then  
if or
$SAVESTATUS_TRUE == 1
0@ == -1
not actor.Animation(PLAYER_ACTOR) == "BOM_PLANT"
    then
    break
    end
else
if or
$SAVESTATUS_TRUE == 1
0@ == -1
    then
    break
    end
end    
    
end

if
1@ == 1
then

0D39: 6@ = actor 3@ max_health
0092: 6@ = float 6@ to_integer
6@ /= 2   

5@ = Actor.Health(3@)
005A: 5@ += 6@  // (int) 
Actor.Health(3@) = 5@

05C1: AS_actor 3@ speak_from_audio_table 161  
 
if    
001D:   5@ > 6@  // (int)
then
0D39: 6@ = actor 3@ max_health
0092: 6@ = float 6@ to_integer
Actor.Health(3@) = 6@    
end   

end    

$BINT -= 1 
$BINT_USE += 1

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_USE"

if
$CHEATED_FLAG == 0 
then          
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_USE"

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT91_GOT"
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BINT_USE"    
    
if and
0@ == 0
1@ >= 200
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH91"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT91_GOT"        
    end  

Audiostream.PerformAction(2@, STOP)
Audiostream.Release(2@)    
   
0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0 

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@

0629: change_integer_stat 280 to 0  
$INV_CLOSED = 1  
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0
return              

:FOOD_USE

if or
0A2A:   text_box 'INV10' displayed
0A2A:   text_box 'INV11' displayed
then
text.RemoveTextBox()
end

0470: 9@ = actor PLAYER_ACTOR current_weapon
        
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0    
0901: enable_player PLAYER_CHAR jump_key 0   
082A: set_player PLAYER_CHAR able_to_use_crouch_button 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
$PANEL_OPEN = 0

3@ = Audiostream.Load3d("AUDIO\SOUNDS\food_eat_sound.wav")
Audiostream.LinkToActor(3@, PLAYER_ACTOR)
Audiostream.Loop(3@, 0)
Audiostream.PerformAction(3@, PLAY)
Audiostream.Volume(3@) = $SOUNDS_VOLUME

$EATING_STATUS = 1
0629: change_integer_stat 280 to 1

082A: set_player PLAYER_CHAR able_to_use_crouch_button 0

random_int 0@ 0 to 3
008B: 1@ = $BANKA // (int)

///////////////////////////////////////  

if
0@ == 0
then

if
actor.Driving(PLAYER_ACTOR)
then      
Animation.PerfromA(PLAYER_ACTOR, "EAT_BURGER", "CAMERA", 4.0, 0, 0, 0, 0, -1) 
else
0A1A: actor PLAYER_ACTOR perform_walk_animation "EAT_BURGER" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 -1 ms // versionC
end

end 

////////////////////////////////////////  

if
0@ == 1
then

if
actor.Driving(PLAYER_ACTOR)
then  
Animation.PerfromA(PLAYER_ACTOR, "EAT_CHICKEN", "CAMERA", 4.0, 0, 0, 0, 0, -1)   
else
0A1A: actor PLAYER_ACTOR perform_walk_animation "EAT_CHICKEN" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 -1 ms // versionC
end

end      

////////////////////////////////////////  

if
0@ == 2
then

if
actor.Driving(PLAYER_ACTOR)
then  
Animation.PerfromA(PLAYER_ACTOR, "EAT_PIZZA", "CAMERA", 4.0, 0, 0, 0, 0, -1) 
else
0A1A: actor PLAYER_ACTOR perform_walk_animation "EAT_PIZZA" IFP "CAMERA" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 -1 ms // versionC   
end

end   

32@ = 0

while 32@ < 5000
wait 0
0967: actor PLAYER_ACTOR move_mouth 5 ms

if or
802E:   $BANKA <!= 1@  // (int) 
0E3E:  is_button_just_pressed 0 button 15
    then
    jump to @FOOD_EAT_CANCEL
    end

if and
0@ == 0
not actor.Animation(PLAYER_ACTOR) == "EAT_BURGER"
    then
    jump to @FOOD_EAT_CANCEL
    end
    
if and
0@ == 1
not actor.Animation(PLAYER_ACTOR) == "EAT_CHICKEN"
    then
    jump to @FOOD_EAT_CANCEL
    end
    
if and
0@ == 2
not actor.Animation(PLAYER_ACTOR) == "EAT_PIZZA"
    then
    jump to @FOOD_EAT_CANCEL
    end        

Audiostream.Volume(3@) = $SOUNDS_VOLUME

06AB: set_actor PLAYER_ACTOR all_weapons_hidden 1
0992: set_player PLAYER_CHAR weapons_scrollable 0

if or
$GRENADE_SELECTED_FLAG == 1
$MELEE_SELECTED_FLAG == 1          
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
end

if 
$SAVESTATUS_TRUE == 1
    then
    break
    end

end

03E6: remove_text_box 
03E5: show_text_box 'INV4'

$BANKA -= 1 
$BANKA_USE += 1  

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BANKA_USE"

if
$CHEATED_FLAG == 0 
then         
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_BANKA_USE"

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT89_GOT"
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_BANKA_USE"    
    
if and
0@ == 0
1@ >= 500
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH89"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT89_GOT"        
    end       

$SATIETY_LEVEL += 200.0
AFTEREAT_TIMER_1P += 1680
random_int 0@ 5 10
2@ = actor.Health(PLAYER_ACTOR)
005A: 2@ += 0@  // (int)
actor.Health(PLAYER_ACTOR) = 2@ 

wait 0
$EATING_STATUS = 0
0629: change_integer_stat 280 to 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
if
$EXTRA_BORING_PLUS == 1
then
//0901: enable_player PLAYER_CHAR jump_key 0
else   
0901: enable_player PLAYER_CHAR jump_key 1
end 
082A: set_player PLAYER_CHAR able_to_use_crouch_button 1
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@

if and
not actor.Driving(PLAYER_ACTOR)
8818: not actor PLAYER_ACTOR in_air
84AD: not  actor PLAYER_ACTOR in_water
then
0A1A: actor PLAYER_ACTOR perform_walk_animation "fucku" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 1 ms // versionC
end

Audiostream.PerformAction(3@, STOP)
Audiostream.Release(3@)

$INV_CLOSED = 1 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

32@ = 0

while 32@ < 100
wait 0
0968: actor PLAYER_ACTOR stop_mouth
end

//wait 100

07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0

if and
$CANALS_CHALLENGE_FLAG == 1
0E4D: random_percent 60
then
PUKE_PROCESS_FLAG = 1
text.ShowTextBox('GAME836')
end

if
not $CANALS_CHALLENGE_FLAG == 1
then

008B: 0@ = $MONTHS_PASSED // (int)

if
not SURVIVAL_CUSTOM_WEAPON_NABOR == 9
then
if
PERK_STEELSTOMACH == 0
    then
    0@ *= 15
    else
    0@ *= 8
    end
else
if
PERK_STEELSTOMACH == 0
    then
    0@ *= 7
    else
    0@ *= 4
    end
end
    
if
$MONTHS_PASSED < 1
    then    
    if
    not SURVIVAL_CUSTOM_WEAPON_NABOR == 9
        then        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 5
            else
            0@ = 3
            end        
        else        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 2
            else
            0@ = 1
            end        
        end    
    end

if
$MONTHS_PASSED == 1
    then    
    if
    not SURVIVAL_CUSTOM_WEAPON_NABOR == 9
        then        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 10
            else
            0@ = 5
            end        
        else        
        if
        PERK_STEELSTOMACH == 0
            then
            0@ = 5
            else
            0@ = 2
            end        
        end    
    end
   
if
0E4D: random_percent 0@
    then
    PUKE_PROCESS_FLAG = 1
    text.ShowTextBox('GAME836')
    PUKE_COUNTER += 1
    if
    PUKE_COUNTER >= 3
        then
        0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT122_GOT"
        if and
        0@ == 0
        $CHEATED_FLAG == 0
            then                            
            v$ACHIEVEMNT = "ACH122"
            $ACHIEVEMENT_GOT_FLAG = 1                                    
            0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT122_GOT"
            end
        end
    else
    PUKE_COUNTER = 0
    end

end

return

:FOOD_EAT_CANCEL

0968: actor PLAYER_ACTOR stop_mouth
$EATING_STATUS = 0
0629: change_integer_stat 280 to 0
0992: set_player PLAYER_CHAR weapons_scrollable 1
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
if
$EXTRA_BORING_PLUS == 1
then
//0901: enable_player PLAYER_CHAR jump_key 0
else   
0901: enable_player PLAYER_CHAR jump_key 1
end 
082A: set_player PLAYER_CHAR able_to_use_crouch_button 1
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@

if and
not actor.Driving(PLAYER_ACTOR)
8818: not actor PLAYER_ACTOR in_air
84AD: not  actor PLAYER_ACTOR in_water
then
0A1A: actor PLAYER_ACTOR perform_walk_animation "fucku" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 1 ms // versionC
end

Audiostream.PerformAction(3@, STOP)
Audiostream.Release(3@)

$INV_CLOSED = 1 
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
wait 100
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
$INV_CLOSED = 0

return

:JIMMY_START3
$JIMMY_USING = 1

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then 
0512: show_permanent_text_box 'INV92'
else

if
8A4B: not  controls_set_to_joystick
then
0512: show_permanent_text_box 'INV92_2'
else
0512: show_permanent_text_box 'INV92_3'
end

end

:JIMMY3_CHECK
wait 0

if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
jf @REPAIR_START_OUT

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then
if
8A2A: not  text_box 'INV92' displayed
    then
    0512: show_permanent_text_box 'INV92'
    end    
else

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV92_2' displayed
    then
    0512: show_permanent_text_box 'INV92_2'
    end
    
else

if
8A2A: not  text_box 'INV92_3' displayed
    then
    0512: show_permanent_text_box 'INV92_3'
    end

end    
    
end    

if
0AB0:   key_pressed $KEY_USE 
jf @JIMMY3_OUT_CHECK
0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@
if 
056E:   car 3@ defined 
jf @JIMMY3_CHECK
gosub @BIKE_CHECK2
if and
not 19@ == 1
not car.Wrecked(3@)
not car.Model(3@) == RHINO_MODEL_NUMBER
not Car.Model(3@) == ARMY_HUNTER_MODEL_NUMBER
not Car.Model(3@) == #HYDRA 
jf @JIMMY3_CHECK
jump @JIMMY3_IN_CHECK_NEAR

:JIMMY3_IN_CHECK_NEAR
wait 0

if
0D0C: get_car 3@ component "door_rf_dummy" matrix_pointer_to 0@ // IF and SET
then

///////////////////////////////////////////

if
0E4D: random_percent 50
    then
    
    if
    0D0C: get_car 3@ component "door_rf_dummy" matrix_pointer_to 0@ // IF and SET
        then
        0D0A: store_coords_to 4@ 5@ 6@ from_matrix 0@ with_offsets 0.0 0.0 0.0
        end
     
    else
    
    if
    0D0C: get_car 3@ component "door_lf_dummy" matrix_pointer_to 0@ // IF and SET
        then
        0D0A: store_coords_to 4@ 5@ 6@ from_matrix 0@ with_offsets 0.0 0.0 0.0
        end
    
    end

///////////////////////////////////////////

else
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0
end
 
if and
00EC:   actor PLAYER_ACTOR sphere 1 near_point 4@ 5@ radius 2.0 2.0
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching
not car.Wrecked(3@)
jf @JIMMY3_CHECK
09B3: get_car 3@ door_status 7@
if
not 7@ == 0
jf @JIMMY3_DOOR_ALREADY_OPENED
jump @JIMMY3_FIX_START

:JIMMY3_DOOR_ALREADY_OPENED
text.RemoveTextBox()
text.ShowTextBox('INV95')
wait 1000
jump @JIMMY_START3

:JIMMY3_FIX_START
03E6: remove_text_box

$JIMMY_USE += 1

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_JIMMY_USE"

if
$CHEATED_FLAG == 0 
then          
0@ += 1
end        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_JIMMY_USE"

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT93_GOT"
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_JIMMY_USE"            
            
if and
0@ == 0
1@ >= 250
$CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH93"
    $ACHIEVEMENT_GOT_FLAG = 1                
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT93_GOT"                
    end
    
if
PERK_HACKER == 0
then    

random_int 0@ 0 4
if or
0@ == 1
0@ == 2
jf @JIMMY3_FIX_FAILED

else

random_int 0@ 0 4
if or
0@ == 1
0@ == 2
0@ == 3
jf @JIMMY3_FIX_FAILED

end 

text.RemoveTextBox()
if
PERK_HACKER == 0
then
0@ = 20
else
0@ = 10
end

if
0E4D: random_percent 0@
then
text.ShowTextBox('INV94B')
Audiostream.Volume($JIMMY_BROKE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($JIMMY_BROKE_SOUND, 0)
Audiostream.PerformAction($JIMMY_BROKE_SOUND, PLAY)
Audiostream.Volume($JIMMY_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($JIMMY_USE_SOUND, 0)
Audiostream.PerformAction($JIMMY_USE_SOUND, PLAY)
$JIMMY -= 1
else
text.ShowTextBox('INV94')
Audiostream.Volume($JIMMY_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($JIMMY_USE_SOUND, 0)
Audiostream.PerformAction($JIMMY_USE_SOUND, PLAY)
end

0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_CARS_HACKED"
        
if
$CHEATED_FLAG == 0 
then                  
0@ += 1   
end                        
 
0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_CARS_HACKED"

$TEMP_XP = DOOR_HACKED_XP
008D: $TEMP_XP = integer $TEMP_XP to_float
0069: $TEMP_XP *= $XP_COEFF // (float)
008C: $TEMP_XP = float $TEMP_XP to_integer
0058: $PLAYER_XP += $TEMP_XP // (int)
  
0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT40_GOT"
    
if and
1@ == 0
0@ >= 50
    then
    v$ACHIEVEMNT = "ACH40"
    $ACHIEVEMENT_GOT_FLAG = 1    
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT40_GOT"    
    end
        
$CARS_HACKED += 1    

0A97: 11@ = car 3@ struct 
11@ += 18
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
08BD: set 12@ bit 2
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 2

car.DoorStatus(3@,0)
wait 1000
return

:JIMMY3_FIX_FAILED
$JIMMY -= 1
if
not $JIMMY == 0
jf @JIMMY3_OUT_CHECK2
Audiostream.Volume($JIMMY_BROKE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($JIMMY_BROKE_SOUND, 0)
Audiostream.PerformAction($JIMMY_BROKE_SOUND, PLAY) 
text.RemoveTextBox()
text.ShowTextBox('INV93')
wait 1000
jump @JIMMY_START3

:JIMMY3_OUT_CHECK
wait 0
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR)  
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1  
jf @JIMMY3_CHECK
03E6: remove_text_box
return 

:JIMMY3_OUT_CHECK2  
Audiostream.Volume($JIMMY_BROKE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($JIMMY_BROKE_SOUND, 0)
Audiostream.PerformAction($JIMMY_BROKE_SOUND, PLAY)  
text.RemoveTextBox()
text.ShowTextBox('INV104')
wait 1000
return

:KANISTRA_USE
text.ClearAll()
0581: enable_radar 0
$PANEL_OPEN = 1
//0792: disembark_instantly_actor PLAYER_ACTOR
//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
gosub @INV_PLAYER_PAD_OFF
015D: set_gamespeed 0.1
4@ = 0
08D4: 4@ = create_panel_with_title 'INV18' position 71.0 170.0 width 300.0 columns 2 interactive 1 background 1 alignment 1 
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV20' 'INV21' 'INV15' 'INV22' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
0512: show_permanent_text_box 'INV286' 
08D6: set_panel 4@ column 1 alignment 1
008C: $KANISTRA_FUEL2 = float $KANISTRA_FUEL to_integer 
08EE: set_panel 4@ column 1 row 3 text_1number GXT 'INV3' number $KANISTRA_FUEL2 
09DB: set_panel 4@ column 0 width 142 
09DB: set_panel 4@ column 1 width 25
08D9: set_panel 4@ row 2 enable 0
08D9: set_panel 4@ row 3 enable 0
090E: set_panel 4@ active_row $PANEL8_ACTIVE_ROW

Audiostream.Volume($GASCAN_PICKUP_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_PICKUP_SOUND, 0)
Audiostream.PerformAction($GASCAN_PICKUP_SOUND, PLAY) 

//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1

:KANISTRA_USE_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if
8A2A: not  text_box 'INV286' displayed
then
0512: show_permanent_text_box 'INV286' 
end

08D7: $PANEL8_ACTIVE_ROW = panel 4@ active_row
015D: set_gamespeed 0.1

if
0E3E: player 0 pressed_key 14
    then
    if or    
    02D8:   actor PLAYER_ACTOR current_weapon == 9
    02D8:   actor PLAYER_ACTOR current_weapon == 131
    02D8:   actor PLAYER_ACTOR current_weapon == 164
    02D8:   actor PLAYER_ACTOR current_weapon == 194
        then
        if
        $KANISTRA_FUEL > 0.1
            then    
            03E6: remove_text_box 
            08DA: remove_panel 4@  
            00BE: text_clear_all
            015D: set_gamespeed 1.0 
            cinema.Radar(1)
            gosub @INV_PLAYER_PAD_ON_BACK
            $PANEL_OPEN = 0
            
            while not animation.Available("CAR_CHECKS")
            wait 0
            animation.Load("CAR_CHECKS")
            end
            
            $KANISTRA_USING = 1               
                
            gosub @KANISTRA_IN_CHAINSAW
            015D: set_gamespeed 0.1                 
                
            Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($GASCAN_USE_SOUND, 0)
            Audiostream.PerformAction($GASCAN_USE_SOUND, STOP) 
                
            animation.Release("CAR_CHECKS") 
                
            $KANISTRA_USING = 0 
            07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0        
            jump to @KANISTRA_USE
            else
            text.ShowH('INV29',100,1)
            wait 50  
            end    
        end
    end
    
if
0E3E: player 0 pressed_key 14
    then
    if or
    02D8:   actor PLAYER_ACTOR current_weapon == 37
    02D8:   actor PLAYER_ACTOR current_weapon == 114
    02D8:   actor PLAYER_ACTOR current_weapon == 148
    02D8:   actor PLAYER_ACTOR current_weapon == 180
    02D8:   actor PLAYER_ACTOR current_weapon == 210
        then
        if
        $KANISTRA_FUEL > 0.1
            then    
            03E6: remove_text_box 
            08DA: remove_panel 4@  
            00BE: text_clear_all
            015D: set_gamespeed 1.0 
            cinema.Radar(1)
            gosub @INV_PLAYER_PAD_ON_BACK
            $PANEL_OPEN = 0
            
            while not animation.Available("CAR_CHECKS")
            wait 0
            animation.Load("CAR_CHECKS")
            end
            
            $KANISTRA_USING = 1               
                
            gosub @KANISTRA_IN_FLAMETHROWER
            015D: set_gamespeed 0.1                 
                
            Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($GASCAN_USE_SOUND, 0)
            Audiostream.PerformAction($GASCAN_USE_SOUND, STOP) 
                
            animation.Release("CAR_CHECKS") 
                
            $KANISTRA_USING = 0 
            07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0        
            jump to @KANISTRA_USE
            else
            text.ShowH('INV29',100,1)
            wait 50    
            end
        end
    end    
 
if
$PANEL8_ACTIVE_ROW == 0 
    then  
    if
    0E3E: player 0 pressed_key 16
        then
        if        
        $KANISTRA_FUEL <= 25.1
            then
            03E6: remove_text_box 
            08DA: remove_panel 4@  
            00BE: text_clear_all
            015D: set_gamespeed 1.0 
            cinema.Radar(1)
            gosub @INV_PLAYER_PAD_ON_BACK
            $PANEL_OPEN = 0
            
            while not animation.Available("CAR_CHECKS")
            wait 0
            animation.Load("CAR_CHECKS")
            end
            
            if and
            $KEY_USE == 69
            8A4B: not  controls_set_to_joystick
            then
            0512: show_permanent_text_box 'INV24'
            else
            
            if
            8A4B: not  controls_set_to_joystick
            then
            0512: show_permanent_text_box 'INV24_2'
            else
            0512: show_permanent_text_box 'INV24_3'
            end
            
            end
             
            $KANISTRA_USE += 1        
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_KANISTRA_USE"        
            
            if
            $CHEATED_FLAG == 0 
            then          
            0@ += 1
            end                
             
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_KANISTRA_USE"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT92_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_KANISTRA_USE"            
                
            if and
            0@ == 0
            1@ >= 1000
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH92"
                $ACHIEVEMENT_GOT_FLAG = 1                
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT92_GOT"                
                end        
            
            $KANISTRA_USING = 1               
            
            gosub @KANISTRA_IN
                        
            015D: set_gamespeed 0.1                 
            
            Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($GASCAN_USE_SOUND, 0)
            Audiostream.PerformAction($GASCAN_USE_SOUND, STOP) 
            
            animation.Release("CAR_CHECKS") 
            
            $KANISTRA_USING = 0 
            07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0        
            jump to @KANISTRA_USE
            else
            text.ShowH('INV26',100,1)
            wait 50 
            end
        end
    end
    
if
$PANEL8_ACTIVE_ROW == 1 
    then  
    if
    0E3E: player 0 pressed_key 16
        then
        if
        $KANISTRA_FUEL > 0.1
            then
            03E6: remove_text_box 
            08DA: remove_panel 4@  
            00BE: text_clear_all
            015D: set_gamespeed 1.0 
            cinema.Radar(1)
            gosub @INV_PLAYER_PAD_ON_BACK
            $PANEL_OPEN = 0
            
            while not animation.Available("CAR_CHECKS")
            wait 0
            animation.Load("CAR_CHECKS")
            end
            
            if and
            $KEY_USE == 69
            8A4B: not  controls_set_to_joystick
            then
            0512: show_permanent_text_box 'INV25'
            else
            
            if
            8A4B: not  controls_set_to_joystick
            then
            0512: show_permanent_text_box 'INV25_2'
            else
            0512: show_permanent_text_box 'INV25_3'
            end
            
            end
             
            $KANISTRA_USE += 1        
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_KANISTRA_USE"        
            
            if
            $CHEATED_FLAG == 0 
            then          
            0@ += 1
            end                
             
            0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_KANISTRA_USE"
            
            0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT92_GOT"
            0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_KANISTRA_USE"            
                
            if and
            0@ == 0
            1@ >= 1000
            $CHEATED_FLAG == 0
                then
                v$ACHIEVEMNT = "ACH92"
                $ACHIEVEMENT_GOT_FLAG = 1                
                0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT92_GOT"                
                end        
            
            $KANISTRA_USING = 1        
            
            gosub @KANISTRA_OUT            
            
            015D: set_gamespeed 0.1          
            
            Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
            Audiostream.Loop($GASCAN_USE_SOUND, 0)
            Audiostream.PerformAction($GASCAN_USE_SOUND, STOP) 
            
            animation.Release("CAR_CHECKS") 
            
            $KANISTRA_USING = 0 
            07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0        
            jump to @KANISTRA_USE
            else
            text.ShowH('INV29',100,1)
            wait 50  
            end
        end
    end
    
if or
0E3E: is_button_just_pressed 0 15 
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
then
03E6: remove_text_box 
08DA: remove_panel 4@  
00BE: text_clear_all
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
return
else
jump @KANISTRA_USE_IDLE
end

:RADIO_MENU_START

text.ClearAll()

if
$EXPE_FLAG == 0
then

if or
$FREEMODE == 0
$GAMEMODE_WAR == 1
SURV_SECOND_WAVE_EVACUATION_STARTED == 1
MCS_FLAG == 1
$CARL_STORY == 1
then
jump to @RADIO_FM_MENU_START
end

end

//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
4@ = 0 
08D4: 4@ = create_panel_with_title 'INV230' position 71.0 170.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
if and
UNITED_MAP == 0
not CUSTOM_MODE_TURN_OFF_STORY_THINGS == 1
then 
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV226' 'INV227' 'INV228' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV226' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end
0512: show_permanent_text_box 'INV229'
090E: set_panel 4@ active_row $PANEL71_ACTIVE_ROW
RADIO_TEXTURE_RENDER_NUMBER = 214

if or
$AIRDROP_FLAG == 1
USHER_STORY_FEATRUES_LOCKED == 1
then
08D9: set_panel 4@ row 0 enable 0
end

if and
$FREEMODE == 1
UNITED_MAP == 1
not CUSTOM_MODE_TURN_OFF_STORY_THINGS == 1
then
08D9: set_panel 4@ row 1 enable 0
08D9: set_panel 4@ row 2 enable 0
08D9: set_panel 4@ row 3 enable 0
end

//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1  

:RADIO_MENU_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if
8A2A: not  text_box 'INV229' displayed
then
0512: show_permanent_text_box 'INV229' 
end

08D7: $PANEL71_ACTIVE_ROW = panel 4@ active_row
015D: set_gamespeed 0.1
 
if
$PANEL71_ACTIVE_ROW == 0 
    then
    text.ShowH('GMD_120',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then   
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        Audiostream.Loop($RADIO_SWITCH_SOUND,0)
        Audiostream.PerformAction($RADIO_SWITCH_SOUND, PLAY)
        Audiostream.Volume($RADIO_SWITCH_SOUND) = $SOUNDS_VOLUME        
        jump @RADIO_FM_MENU_START
        end
    end
    
if
$PANEL71_ACTIVE_ROW == 1 
    then
    text.ShowH('GMD_121',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then   
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        Audiostream.Loop($RADIO_SWITCH_SOUND,0)
        Audiostream.PerformAction($RADIO_SWITCH_SOUND, PLAY)
        Audiostream.Volume($RADIO_SWITCH_SOUND) = $SOUNDS_VOLUME
        jump @RADIO_AM_MENU_START
        end
    end
    
if
$PANEL71_ACTIVE_ROW == 2 
    then
    text.ShowH('GMD_122',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then   
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        Audiostream.Loop($RADIO_SWITCH_SOUND,0)
        Audiostream.PerformAction($RADIO_SWITCH_SOUND, PLAY)
        Audiostream.Volume($RADIO_SWITCH_SOUND) = $SOUNDS_VOLUME
        jump @RADIO_SSB_MENU_START
        end
    end        
 
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
    then
    0581: enable_radar 1 
    03E6: remove_text_box 
    08DA: remove_panel 4@
    00BE: text_clear_all
    RADIO_TEXTURE_RENDER_NUMBER = 0
    Audiostream.Loop($RADIO_OFF_SOUND,0)
    Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
    Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME     
    jump to @INVENTORY_SHOW    
    end

jump @RADIO_MENU_IDLE

//////////////////////////////Режим FM//////////////////////////////////////

:RADIO_FM_MENU_START
text.ClearAll()
//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
4@ = 0 
08D4: 4@ = create_panel_with_title 'INV226' position 71.0 170.0 width 150.0 columns 1 interactive 1 background 1 alignment 1

if
SURV_SECOND_WAVE_EVACUATION_STARTED == 1
then
jump to @RADIO_FM_SALVATION
end

if and
$FREEMODE == 0
$GAMEMODE_WAR == 0
then
:RADIO_FM_SALVATION 
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV231' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else

if
$GAMEMODE_WAR == 0
then
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV232' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV232' 'INV332' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

end
0512: show_permanent_text_box 'INV234'
090E: set_panel 4@ active_row $PANEL72_ACTIVE_ROW
RADIO_TEXTURE_RENDER_NUMBER = 215

if
not $ACTIVE_INTERIOR == 0
then
08D9: set_panel 4@ row 0 enable 0
end

//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1  

:RADIO_FM_MENU_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if
8A2A: not  text_box 'INV234' displayed
then
0512: show_permanent_text_box 'INV234' 
end

08D7: $PANEL72_ACTIVE_ROW = panel 4@ active_row
015D: set_gamespeed 0.1

if and
$PANEL72_ACTIVE_ROW == 0
SURV_SECOND_WAVE_EVACUATION_STARTED == 1 
    then
    text.ShowH('GMD_123',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then  
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        RADIO_TEXTURE_RENDER_NUMBER = 0
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK 
        $PANEL_OPEN = 0
        $RADIO_HELP_FLAG = 1
//        $INV_CLOSED = 1   
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        wait 100
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
//        $INV_CLOSED = 0                
        jump @INVENTORY_SYSTEM_CHECK
        end
    end
 
if and
$PANEL72_ACTIVE_ROW == 0
$FREEMODE == 0
$GAMEMODE_WAR == 0 
    then
    text.ShowH('GMD_123',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then  
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        RADIO_TEXTURE_RENDER_NUMBER = 0
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK 
        $PANEL_OPEN = 0
        $RADIO_HELP_FLAG = 1
//        $INV_CLOSED = 1   
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        wait 100
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
//        $INV_CLOSED = 0                
        jump @INVENTORY_SYSTEM_CHECK
        end
    end
    
if and
$PANEL72_ACTIVE_ROW == 0
not SURV_SECOND_WAVE_EVACUATION_STARTED == 1 
    then
    if or
    $FREEMODE == 1
    $GAMEMODE_WAR == 1
        then
        text.ShowH('GMD_124',2,1)
        if
        0E3E:   player 0 pressed_key 16
            then
            gosub @INV_AIRDROP_NEAR_CAMP_CHECK
            if and
            6@ == 0
            PLAYER_IN_NEST_FLAG == 0
                then
                gosub @INV_RANDOM_AIRDROP_SPAWN_ZONE_CHECK
                if
                6@ == 1
                    then  
                    0581: enable_radar 1 
                    03E6: remove_text_box 
                    08DA: remove_panel 4@
                    00BE: text_clear_all
                    RADIO_TEXTURE_RENDER_NUMBER = 0
                    015D: set_gamespeed 1.0            
                    
        //            $INV_CLOSED = 1   
                    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
                    wait 100
                    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
        //            $INV_CLOSED = 0
        
                    gosub @INV_PLAYER_PAD_ON_BACK 
                    $PANEL_OPEN = 0
                    
                    //////////////////////////////////////////////////////
        
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_TRIED_TO_CREATE_FLAG"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_TRIED_TO_DUBLICATE"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_TRIED_TO_FIND_POINT"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_POINT_SAVESTATUS"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_TRIED_TO_FIND_POINT"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_PLAYER_MISSED_AIRDROP"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_PLAYER_NEAR_CAMP"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_FAILED_TO_LOAD_MODEL"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_TIMER_NOT_GOOD"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_PLANE_DESTROYED"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_PLAYER_LEAVED_DROP"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_PLAYER_PICKED_UP"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_NOTRANDOM_WAITING_TIMER"
                    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "AIRDROP_THREAD_CREATING_PLANE_FLAG"
                    
                    //////////////////////////////////////////////////////
                    
                    create_thread @HAB_DRP                                    
                    
                    jump @INVENTORY_SYSTEM_CHECK
                    else
                    text.ShowH('INV302',100,1)
                    wait 50
                    end
                else
                text.ShowH('INV302',100,1)
                wait 50
                end            
            end
        end
    end
    
if
$PANEL72_ACTIVE_ROW == 1 
    then
    if
    $GAMEMODE_WAR == 1
        then
        text.ShowH('GMD_158',2,1)
        if
        0E3E:   player 0 pressed_key 16
            then
            gosub @INV_AIRDROP_NEAR_CAMP_CHECK
            if
            0AB6: store_target_marker_coords_to 0@ 1@ 2@ // IF and SET
                then
                if
                00EC:   actor PLAYER_ACTOR sphere 0 near_point 0@ 1@ radius 280.0 280.0
                    then  
                    0581: enable_radar 1 
                    03E6: remove_text_box 
                    08DA: remove_panel 4@
                    00BE: text_clear_all
                    RADIO_TEXTURE_RENDER_NUMBER = 0
                    015D: set_gamespeed 1.0            
                        
//                    $INV_CLOSED = 1   
                    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
                    wait 100
                    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
//                    $INV_CLOSED = 0
            
                    gosub @INV_PLAYER_PAD_ON_BACK 
                    $PANEL_OPEN = 0
                    
                    //////////////////////////////////////////////////////
                    
                    create_thread @AIR_STR
                    
                    //////////////////////////////////////////////////////                                                                                    
                        
                    jump @INVENTORY_SYSTEM_CHECK
                    else
                    text.ShowH('INV338',100,1)
                    wait 50
                    end
                else
                text.ShowH('INV334',100,1)
                wait 50
                end            
            end
        end
    end                     
 
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
    then 
    03E6: remove_text_box 
    08DA: remove_panel 4@
    00BE: text_clear_all
    
    if
    $EXPE_FLAG == 0
    then
    
    if or
    $FREEMODE == 0
    $GAMEMODE_WAR == 1
    SURV_SECOND_WAVE_EVACUATION_STARTED == 1
    MCS_FLAG == 1
    $CARL_STORY == 1        
    then
    
    if
    $GAMEMODE_WAR == 0
    then
    Audiostream.Loop($RADIO_OFF_SOUND,0)
    Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
    Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME
    RADIO_TEXTURE_RENDER_NUMBER = 0
    jump to @INVENTORY_SHOW
    else
    0581: enable_radar 1 
    03E6: remove_text_box 
    08DA: remove_panel 4@
    00BE: text_clear_all
    015D: set_gamespeed 1.0
    gosub @INV_PLAYER_PAD_ON_BACK 
    $PANEL_OPEN = 0
//    $INV_CLOSED = 1   
    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
    wait 100
    07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
//    $INV_CLOSED = 0
    Audiostream.Loop($RADIO_OFF_SOUND,0)
    Audiostream.PerformAction($RADIO_OFF_SOUND, PLAY)
    Audiostream.Volume($RADIO_OFF_SOUND) = $SOUNDS_VOLUME
    RADIO_TEXTURE_RENDER_NUMBER = 0
    jump to @INVENTORY_SYSTEM_CHECK
    end
    
    end
    
    end
    
    Audiostream.Loop($RADIO_SWITCH_SOUND,0)
    Audiostream.PerformAction($RADIO_SWITCH_SOUND, PLAY)
    Audiostream.Volume($RADIO_SWITCH_SOUND) = $SOUNDS_VOLUME
     
    jump to @RADIO_MENU_START
    end

jump @RADIO_FM_MENU_IDLE

//////////////////////////////Режим AM//////////////////////////////////////

:RADIO_AM_MENU_START
text.ClearAll()
//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
4@ = 0 
08D4: 4@ = create_panel_with_title 'INV227' position 71.0 170.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
if
$FREEMODE == 0
then 
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV233' 'INV235' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV233' 'INV235' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end
0512: show_permanent_text_box 'INV234'
090E: set_panel 4@ active_row $PANEL73_ACTIVE_ROW
RADIO_TEXTURE_RENDER_NUMBER = 216

//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1  

:RADIO_AM_MENU_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if
8A2A: not  text_box 'INV234' displayed
then
0512: show_permanent_text_box 'INV234' 
end

08D7: $PANEL73_ACTIVE_ROW = panel 4@ active_row
015D: set_gamespeed 0.1
 
if
$PANEL73_ACTIVE_ROW == 0 
    then
    text.ShowH('GMD_125',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then  
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK 
        $PANEL_OPEN = 0
//        $INV_CLOSED = 1   
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        wait 100
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
//        $INV_CLOSED = 0
        2@ = 0
        $READING_NOTE_FLAG = 1
        $PHRASES_OFF_FLAG = 1        
        gosub @MODULATE_FIND_AM
        gosub @CANALS_CHECK_RADIO_UNMUTE_TRACK
        $READING_NOTE_FLAG = 0
        $PHRASES_OFF_FLAG = 0        
        jump @RADIO_AM_MENU_START
        end
    end
    
if
$PANEL73_ACTIVE_ROW == 1 
    then
    text.ShowH('GMD_126',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then  
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        $READING_NOTE_FLAG = 1
        gosub @CANALS_CHECK_RADIO_MUTE_TRACK
        gosub @RADIO_SHOW_HINT
        gosub @CANALS_CHECK_RADIO_UNMUTE_TRACK
        $READING_NOTE_FLAG = 0        
        jump @RADIO_AM_MENU_START
        end
    end                    
 
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
    then 
    03E6: remove_text_box 
    08DA: remove_panel 4@
    00BE: text_clear_all
    Audiostream.Loop($RADIO_SWITCH_SOUND,0)
    Audiostream.PerformAction($RADIO_SWITCH_SOUND, PLAY)
    Audiostream.Volume($RADIO_SWITCH_SOUND) = $SOUNDS_VOLUME 
    jump to @RADIO_MENU_START
    end

jump @RADIO_AM_MENU_IDLE

//////////////////////////////Режим SSB//////////////////////////////////////

:RADIO_SSB_MENU_START
text.ClearAll()
//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
4@ = 0 
08D4: 4@ = create_panel_with_title 'INV228' position 71.0 170.0 width 150.0 columns 1 interactive 1 background 1 alignment 1
if
$FREEMODE == 0
then 
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV233' 'INV235' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
else
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV233' 'INV235' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
end

0512: show_permanent_text_box 'INV234'
090E: set_panel 4@ active_row $PANEL74_ACTIVE_ROW
RADIO_TEXTURE_RENDER_NUMBER = 217

//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1  

:RADIO_SSB_MENU_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if
8A2A: not  text_box 'INV234' displayed
then
0512: show_permanent_text_box 'INV234' 
end

08D7: $PANEL74_ACTIVE_ROW = panel 4@ active_row
015D: set_gamespeed 0.1
 
if
$PANEL74_ACTIVE_ROW == 0 
    then
    text.ShowH('GMD_125',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then  
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK 
        $PANEL_OPEN = 0
//        $INV_CLOSED = 1   
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
        wait 100
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1
        $INV_CLOSED = 0
        2@ = 1
        $READING_NOTE_FLAG = 1
        $PHRASES_OFF_FLAG = 1
        gosub @MODULATE_FIND_SSB
        gosub @CANALS_CHECK_RADIO_UNMUTE_TRACK
        $READING_NOTE_FLAG = 0
        $PHRASES_OFF_FLAG = 0        
        jump @RADIO_SSB_MENU_START
        end
    end
    
if
$PANEL74_ACTIVE_ROW == 1 
    then
    text.ShowH('GMD_126',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then  
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all
        $READING_NOTE_FLAG = 1
        gosub @CANALS_CHECK_RADIO_MUTE_TRACK
        gosub @RADIO_SHOW_HINT
        gosub @CANALS_CHECK_RADIO_UNMUTE_TRACK
        $READING_NOTE_FLAG = 0        
        jump @RADIO_SSB_MENU_START
        end
    end                    
 
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
    then 
    03E6: remove_text_box 
    08DA: remove_panel 4@
    00BE: text_clear_all
    Audiostream.Loop($RADIO_SWITCH_SOUND,0)
    Audiostream.PerformAction($RADIO_SWITCH_SOUND, PLAY)
    Audiostream.Volume($RADIO_SWITCH_SOUND) = $SOUNDS_VOLUME 
    jump to @RADIO_MENU_START
    end

jump @RADIO_SSB_MENU_IDLE

:MODULATE_FIND_AM

0470: 9@ = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

while not model.Available(#CELLPHONE)
wait 0
model.Load(#CELLPHONE)
mload
end

0729: AS_actor PLAYER_ACTOR hold_cellphone 1

repeat
wait 0
until actor.Animation(PLAYER_ACTOR) == "phone_talk"

33@ = 0

random_int 1@ 10 1700
0093: 1@ = integer 1@ to_float
3@ = 0

$RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
Audiostream.Loop($RADIO_SOUND, 1)  
Audiostream.Volume($RADIO_SOUND) = 0.0
Audiostream.PerformAction($RADIO_SOUND, PLAY)

/////////////////////Плавное нарастание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1 

////////////////////////////////////////////////////////

while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0               
end

gosub @CANALS_CHECK_RADIO_MUTE_TRACK

////////////////////////////////////////////////////////

while true
wait 0

if
8A2A: not  text_box 'INV369' displayed
then
0512: show_permanent_text_box 'INV369' 
end

if
1@ > 1700.0
then
1@ = 1700.0
end

if
1@ < 25.0
then
1@ = 25.0
end

gosub @AMPLITUDE_SHOW
gosub @AMPLITUDE_CHECK

if
0A4B:   controls_set_to_joystick
then

if and
0E45: frame_mod 5
00E1:   player 0 pressed_key 5
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ -= 0.1
else
1@ -= 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ -= 10.0
else
1@ -= 100.0
end

end

Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
0E45: frame_mod 5
00E1:   player 0 pressed_key 7
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ += 0.1
else
1@ += 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ += 10.0
else
1@ += 100.0
end

end

$PANEL4_ACTIVE_ROW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

else

if
0E11: is_mouse_wheel_down
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ -= 0.1
else
1@ -= 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ -= 10.0
else
1@ -= 100.0
end

end

Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if
0E10: is_mouse_wheel_up
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ += 0.1
else
1@ += 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ += 10.0
else
1@ += 100.0
end

end

$PANEL4_ACTIVE_ROW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

end

if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
not actor.Animation(PLAYER_ACTOR) == "phone_talk"
    then
    text.ClearAll()
    break
    end

end

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1

//////////////////////////////////////////////////////////

0729: AS_actor PLAYER_ACTOR hold_cellphone 0
text.RemoveTextBox()

wait 50

while actor.Animation(PLAYER_ACTOR) == "phone_out"
wait 0
end

wait 150

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @INV_PLAYER_PAD_OFF

return

:MODULATE_FIND_SSB

0470: 9@ = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

while not model.Available(#CELLPHONE)
wait 0
model.Load(#CELLPHONE)
mload
end

0729: AS_actor PLAYER_ACTOR hold_cellphone 1

repeat
wait 0
until actor.Animation(PLAYER_ACTOR) == "phone_talk"

33@ = 0

random_int 1@ 1000 27000
0093: 1@ = integer 1@ to_float
3@ = 0

$RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
Audiostream.Loop($RADIO_SOUND, 1)  
Audiostream.Volume($RADIO_SOUND) = 0.0
Audiostream.PerformAction($RADIO_SOUND, PLAY)

/////////////////////Плавное нарастание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 500
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1 

////////////////////////////////////////////////////////

while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0               
end

gosub @CANALS_CHECK_RADIO_MUTE_TRACK

////////////////////////////////////////////////////////

while true
wait 0

if
8A2A: not  text_box 'INV369' displayed
then
0512: show_permanent_text_box 'INV369' 
end

if
1@ > 27000.0
then
1@ = 27000.0
end

if
1@ < 1000.0
then
1@ = 1000.0
end

gosub @AMPLITUDE_SHOW
gosub @AMPLITUDE_CHECK

if
0A4B:   controls_set_to_joystick
then

if and
0E45: frame_mod 5
00E1:   player 0 pressed_key 5
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then     
1@ -= 0.1
else
1@ -= 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ -= 100.0
else
1@ -= 1000.0
end

end

Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if and
0E45: frame_mod 5
00E1:   player 0 pressed_key 7
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ += 0.1
else
1@ += 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ += 100.0
else
1@ += 1000.0
end

end

$PANEL4_ACTIVE_ROW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

else

if
0E11: is_mouse_wheel_down
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ -= 0.1
else
1@ -= 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ -= 100.0
else
1@ -= 1000.0
end

end

Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

if
0E10: is_mouse_wheel_up
then

if
80E1: not  player 0 pressed_key 6
then

if
80E1: not  player 0 pressed_key 14
then
1@ += 0.1
else
1@ += 1.0
end

else

if
80E1: not  player 0 pressed_key 14
then
1@ += 100.0
else
1@ += 1000.0
end

end

$PANEL4_ACTIVE_ROW += 1
Audiostream.PerformAction($MENU_FOCUS_SOUND, PLAY)
Audiostream.Loop($MENU_FOCUS_SOUND, 0)
Audiostream.Volume($MENU_FOCUS_SOUND) = $SOUNDS_VOLUME
end

end

if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
not actor.Animation(PLAYER_ACTOR) == "phone_talk"
    then
    text.ClearAll()
    break
    end

end

/////////////////////Плавное затухание/////////////////////

$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    

0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0

$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 150
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD

wait 1

//////////////////////////////////////////////////////////

0729: AS_actor PLAYER_ACTOR hold_cellphone 0
text.RemoveTextBox()

wait 50

while actor.Animation(PLAYER_ACTOR) == "phone_out"
wait 0
end

wait 150

01B9: set_actor PLAYER_ACTOR armed_weapon_to 9@
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @INV_PLAYER_PAD_OFF

return

:RADIO_SHOW_HINT

$HUD_REMOVE = 1
$HUD_OFF_INST = 1
cinema.Radar(0)  

$SPEED_08_FLAG = 1

cinema.Widescreen(1)
0A48: enable_menu_access_in_widescreen_mode 0

wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 

wait 1

0A0E: disable_text_with_style 1

05A9: s$NOTE_NAME1 = 'radio' // s$ // Sunday  

0390: load_txd_dictionary 'radio'

wait 1
038F: load_texture 'hint' as 1 // Load dictionary with 0390 first 
wait 1  

15@ = 0    

random_int 16@ 0 to 5 

if
16@ == 0
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll1.mp3") 
end

if
16@ == 1
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll2.mp3") 
end

if
16@ == 2
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll3.mp3") 
end

if
16@ == 3
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll4.mp3") 
end

if
16@ == 4
then
14@ = Audiostream.Load("AUDIO\SOUNDS\PageScroll5.mp3") 
end
   
Audiostream.PerformAction(14@, PLAY)
Audiostream.Volume(14@) = $SOUNDS_VOLUME 

 repeat 
wait 0
03F0: enable_text_draw 1
03E3: set_texture_to_be_drawn_antialiased 0
038D: draw_texture 1 position 320.0 224.5 size 640.0 449.0 RGBA 255 255 255 255 
 until 0E3E: key_pressed 0 17    
 
wait 1
03F0: enable_text_draw 0
wait 1
0391: release_textures 

wait 1  

0A0E: disable_text_with_style 0   

Audiostream.PerformAction(14@, STOP)
audiostream.Release(14@)

$SPEED_08_FLAG = 0

cinema.Widescreen(0)
0A48: enable_menu_access_in_widescreen_mode 1   

$HUD_REMOVE = 0
$HUD_ON_INST = 1
cinema.Radar(1) 

return

:AMPLITUDE_CHECK

if and
3@ == 1
8045: not  1@ == 4@  // (float)
    then
    
    3@ = 0
    
    /////////////////////Плавное затухание/////////////////////
    
    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
    
    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
    $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
    
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 90
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
    create_thread @MUS_FAD
    
    wait 1
    
    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
    wait 0    
    gosub @AMPLITUDE_SHOW    
    end
    
    //////////////////////////////////////////////////////////
    
    $RADIO_SOUND = Audiostream.Load("AUDIO\SOUNDS\Radio.mp3") 
    Audiostream.Loop($RADIO_SOUND, 1)  
    Audiostream.Volume($RADIO_SOUND) = 0.0
    Audiostream.PerformAction($RADIO_SOUND, PLAY)
    
    /////////////////////Плавное нарастание/////////////////////
    
    $MUSIC_FADE_NUMBER += 1
    if
    $MUSIC_FADE_NUMBER > 4
        then
        $MUSIC_FADE_NUMBER = 0 
        end    
    
    0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
    0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
    
    $MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 90
    $MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
    $MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
    create_thread @MUS_FAD
    
    wait 1
    
    while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
    wait 0    
    gosub @AMPLITUDE_SHOW    
    end 
    
    ////////////////////////////////////////////////////////
    
    end
    
{$INCLUDE Radio Stalking Stations.txt}                                                       

return

:AMPLITUDE_FOUND_XP_GIVE
$TEMP_XP = AMPLITUDE_FOUND_XP_PLUS
008D: $TEMP_XP = integer $TEMP_XP to_float
0069: $TEMP_XP *= $XP_COEFF // (float)
008C: $TEMP_XP = float $TEMP_XP to_integer
0058: $PLAYER_XP += $TEMP_XP // (int)
return

:AMPLITUDE_SHOW

if
2@ == 0
then
0AED: 25@v = float 1@ to_string_format "%.5g"
0AD1: show_formatted_text_highpriority "AM - %s" time 1000 25@v
else
0AED: 25@v = float 1@ to_string_format "%.6g"
0AD1: show_formatted_text_highpriority "SSB - %s" time 1000 25@v
end

return

:AMPLITUDE1

3@ = 1
0087: 4@ = 1@ // (float)
        
/////////////////////Плавное затухание/////////////////////
        
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int)
$MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = 0.0
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 90
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 0  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
        
wait 1
        
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0        
gosub @AMPLITUDE_SHOW        
end

return

:AMPLITUDE2

/////////////////////Плавное нарастание/////////////////////
        
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $RADIO_SOUND // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 90
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
        
wait 1
        
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0        
gosub @AMPLITUDE_SHOW        
end 
        
////////////////////////////////////////////////////////

return

:TOOLS_MENU_START

text.ClearAll()

if
$REPAIR_KIT < 1
then
jump to @INVENTORY_SHOW
end

//05B9: AS_actor PLAYER_ACTOR stay_idle 999999 ms
4@ = 0 
08D4: 4@ = create_panel_with_title 'INV303' position 71.0 170.0 width 150.0 columns 1 interactive 1 background 1 alignment 1 
08DB: set_panel 4@ column 0 header 'DUMMY' data 'INV304' 'INV305' 'INV320' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY' 'DUMMY'
0512: show_permanent_text_box 'INV306'
090E: set_panel 4@ active_row $PANEL71T_ACTIVE_ROW

//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0
//wait 10
//07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 1  

:TOOLS_MENU_IDLE
wait 0
07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0

if
8A2A: not  text_box 'INV306' displayed
then
0512: show_permanent_text_box 'INV306' 
end

08D7: $PANEL71T_ACTIVE_ROW = panel 4@ active_row
015D: set_gamespeed 0.1
 
if
$PANEL71T_ACTIVE_ROW == 0 
    then
    text.ShowH('GMD_146',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then   
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all 
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0  
            
        while not animation.Available("CAR_CHECKS")
        wait 0
        animation.Load("CAR_CHECKS")
        end
        
        $PANEL_OPEN = 0
        $JIMMY_USING = 1                                      
        gosub @REPAIR_START
        $PANEL_OPEN = 1 
        $JIMMY_USING = 0
        0581: enable_radar 0        
        gosub @INV_PLAYER_PAD_OFF
        jump to @TOOLS_MENU_START
        end
    end
    
if
$PANEL71T_ACTIVE_ROW == 1 
    then
    text.ShowH('GMD_147',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then   
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all 
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0  
            
        while not animation.Available("CAR_CHECKS")
        wait 0
        animation.Load("CAR_CHECKS")
        end
            
        $PANEL_OPEN = 0
        $JIMMY_USING = 1                          
        gosub @DOMKRAT_START
        $PANEL_OPEN = 1 
        $JIMMY_USING = 0
        0581: enable_radar 0
        gosub @INV_PLAYER_PAD_OFF
        jump to @TOOLS_MENU_START
        end
    end
    
if
$PANEL71T_ACTIVE_ROW == 2 
    then
    text.ShowH('GMD_149',2,1)
    if
    0E3E:   player 0 pressed_key 16
        then   
        015D: set_gamespeed 1.0
        gosub @INV_PLAYER_PAD_ON_BACK
        0581: enable_radar 1 
        03E6: remove_text_box 
        08DA: remove_panel 4@
        00BE: text_clear_all 
        07CC: set_player PLAYER_CHAR can_enter_exit_vehicles 0  
            
        while not animation.Available("CAR_CHECKS")
        wait 0
        animation.Load("CAR_CHECKS")
        end
        
        $PANEL_OPEN = 0
        $JIMMY_USING = 1                                      
        gosub @DINAMO_START
        $PANEL_OPEN = 1 
        $JIMMY_USING = 0
        0581: enable_radar 0
        gosub @INV_PLAYER_PAD_OFF
        jump to @TOOLS_MENU_START
        end
    end                
 
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
0818:  actor PLAYER_ACTOR in_air
    then 
    03E6: remove_text_box 
    08DA: remove_panel 4@
    00BE: text_clear_all     
    jump to @INVENTORY_SHOW    
    end

jump @TOOLS_MENU_IDLE

//////////////////////////////Выливание бензина из транспорта в канистру//////////////////////////////////////

:KANISTRA_IN_OUT 
wait 0
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
jf @KANISTRA_IN
wait 5
03E6: remove_text_box 
return

:KANISTRA_IN_REM
jump @KANISTRA_IN

:KANITRSA_FULL 
00BC: show_text_highpriority GXT 'INV26' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
return

:KANISTRA_FULL2
00BC: show_text_highpriority GXT 'INV26' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value $BENZIN virtual_protect 0   
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
return

:BAK_PUST
00BC: show_text_highpriority GXT 'INV28' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value $BENZIN virtual_protect 0  
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @GASOLINE_NONE_AFTERKANISTRA 
return

:GASOLINE_NONE_AFTERKANISTRA

0D5E: get_vehicle 3@ class_to 22@ subclass_to 23@
//0AD1: show_formatted_text_highpriority "class %d subclass %d" time 2000 22@ 23@
//wait 2000
if and
not 23@ == 3
not 23@ == 4
not 23@ == 7
not 23@ == 8
then
02D4: car 3@ turn_off_engine
else

if or
23@ == 4
23@ == 8
then
0ABF: set_vehicle 3@ engine_state_to false
end

end

return

:KANISTRA_IN
wait 0
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
jf @KANISTRA_IN_OUT

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then
if
8A2A: not  text_box 'INV24' displayed
    then
    0512: show_permanent_text_box 'INV24'
    end    
else

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV24_2' displayed
    then
    0512: show_permanent_text_box 'INV24_2'
    end

else

if
8A2A: not  text_box 'INV24_3' displayed
    then
    0512: show_permanent_text_box 'INV24_3'
    end

end    
    
end    

if
0AB0:   key_pressed $KEY_USE 
jf @KANISTRA_IN_OUT
if
not $KANISTRA_FUEL >= 25.0
jf @KANITRSA_FULL
0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@
if 
056E:   car 3@ defined 
jf @KANISTRA_IN
if and
not car.Wrecked(3@)
not Car.Id(3@) == #BMX
not Car.Id(3@) == #BIKE
not Car.Id(3@) == #MTBIKE
jf @KANISTRA_IN
if
UNITED_MAP == 0
then
if and
not car.Id(3@) == #QUAD
not car.Id(3@) == 15426
jf @KANISTRA_IN_CHECK_NEAR_QUADBIKE
end 
gosub @BIKE_CHECK2
if
19@ == 0
jf @KANISTRA_IN_CHECK_NEAR_MOTO
jump @KANISTRA_IN_CHECK_NEAR

:KANISTRA_IN_CHECK_NEAR
wait 0
gosub @GASTANK_OFFSET
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 24@ 25@ 26@ 
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 0.75
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 0.65 0.65
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching 
not car.Wrecked(3@)
jf @KANISTRA_IN_REM2
03BD: destroy_sphere $CAR_SPHERE
0A97: 11@ = car 3@ struct 
11@ += 4   
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
if
88B7:   not test 12@ bit 1
jf @KANISTRA_BENZIN_OLD_CAR_SET
jump @KANISTRA_IN_START

:KANISTRA_IN_CHECK_NEAR_MOTO
wait 0
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 0.75 
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 0.85 0.85
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching
not car.Wrecked(3@)
jf @KANISTRA_IN_REM2
03BD: destroy_sphere $CAR_SPHERE
0A97: 11@ = car 3@ struct 
11@ += 4   
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
if
88B7:   not test 12@ bit 1
jf @KANISTRA_BENZIN_OLD_CAR_SET
jump @KANISTRA_IN_START

:KANISTRA_IN_CHECK_NEAR_QUADBIKE
wait 0
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 1.05 
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 1.05 1.05
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching
not car.Wrecked(3@)
jf @KANISTRA_IN_REM2
03BD: destroy_sphere $CAR_SPHERE
0A97: 11@ = car 3@ struct 
11@ += 4   
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
if
88B7:   not test 12@ bit 1
jf @KANISTRA_BENZIN_OLD_CAR_SET
jump @KANISTRA_IN_START

:KANISTRA_IN_REM2
wait 200
03BD: destroy_sphere $CAR_SPHERE
jump @KANISTRA_IN 

:KANISTRA_IN_START
text.RemoveTextBox()
0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon

01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

if or
$PLAYER_PREV_WEAP == 9
$PLAYER_PREV_WEAP == 131
$PLAYER_PREV_WEAP == 164
$PLAYER_PREV_WEAP == 194
then

repeat
wait 0
until 82D8: not  actor PLAYER_ACTOR current_weapon == $PLAYER_PREV_WEAP

end 

08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 1
random_float $BENZIN $GASOLINE_MIN $GASOLINE_MAX

if
PERK_GASOLINEFIND == 1
then
$BENZIN *= 3.5
end

if
Car.Id(3@) == #PETROTR
then
$BENZIN += 15.0
end

gosub @BENZIN_KANISTRA_SHOW_TEXT
    
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_USE_SOUND, 1)
Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY) 
jump @BENZIN_KANISTRA_MINUS

:KANISTRA_BENZIN_OLD_CAR_SET
text.RemoveTextBox()
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 9000
Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_USE_SOUND, 1)
Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY)

0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

if or
$PLAYER_PREV_WEAP == 9
$PLAYER_PREV_WEAP == 131
$PLAYER_PREV_WEAP == 164
$PLAYER_PREV_WEAP == 194
then

repeat
wait 0
until 82D8: not  actor PLAYER_ACTOR current_weapon == $PLAYER_PREV_WEAP

end
 
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8D: $BENZIN = read_memory 23@ size 4 virtual_protect 0

gosub @BENZIN_KANISTRA_SHOW_TEXT
   
if
not $BENZIN == 0
jf @BAK_PUST
jump @BENZIN_KANISTRA_MINUS

:BENZIN_KANISTRA_MINUS
wait 20
if 
$BENZIN >= 0.1
jf @BAK_PUST
if
not $KANISTRA_FUEL >= 25.0
jf @KANISTRA_FULL2

gosub @BENZIN_KANISTRA_SHOW_TEXT

if
$SLOWMODE_ACTIVE == 0
then
$BENZIN -= 0.1
$KANISTRA_FUEL += 0.1
$KANISTRA_FUEL_IN_TOTAL += 0.1
else
$BENZIN -= 0.1
$KANISTRA_FUEL += 0.1
$KANISTRA_FUEL_IN_TOTAL += 0.1

$BENZIN -= 0.1
$KANISTRA_FUEL += 0.1
$KANISTRA_FUEL_IN_TOTAL += 0.1

$BENZIN -= 0.1
$KANISTRA_FUEL += 0.1
$KANISTRA_FUEL_IN_TOTAL += 0.1
end

CAR_2P_UPDATE_GAS_INCAR = 1

02E3: 0@ = car 3@ speed
if and
0@ < 1.0
0185:  car 3@ health > 249
//8495: not  car 3@ burning
jf @BENZIN_KANISTRA_OUT
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
not car.Wrecked(3@)
jf @BENZIN_KANISTRA_OUT
if
actor.Animation(PLAYER_ACTOR) == "car_check"
jf @BENZIN_KANISTRA_OUT
jump @BENZIN_KANISTRA_MINUS

:BENZIN_KANISTRA_OUT
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value $BENZIN virtual_protect 0 
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @SHOW_FAILED_CARCHECK_MESSAGE      
return

:GASTANK_OFFSET
0441: 15@ = car 3@ model

0AD3: v$GAS_TANK_X = format "X%d" 15@
0AD3: v$GAS_TANK_Y = format "Y%d" 15@
0AD3: v$GAS_TANK_Z = format "Z%d" 15@

0AF2: 24@ = get_float_from_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_X
0AF2: 25@ = get_float_from_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_Y
0AF2: 26@ = get_float_from_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_Z

if and
24@ <= -100.0
25@ <= -100.0
26@ <= -100.0
    then
    0AF3: write_float -1.0 to_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_X
    0AF3: write_float -2.7 to_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_Y
    0AF3: write_float 0.0 to_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_Z        
    24@ = -1.0
    25@ = -2.7
    26@ = 0.0
    end
    
if and
0AB0:   key_pressed 187
$CHEATS_ON == 1
    then
    car.StorePos(3@,24@,25@,26@)
    actor.StorePos(PLAYER_ACTOR,18@,19@,20@)
    0063: 24@ -= 18@  // (float)
    0063: 25@ -= 19@  // (float)
    0063: 26@ -= 20@  // (float)    
    0AF3: write_float 24@ to_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_X
    0AF3: write_float 25@ to_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_Y
    0AF3: write_float 26@ to_ini_file "data/skins.ini" section "GASTANK" key v$GAS_TANK_Z        
    end    

return

//////////////////////////////Выливание бензина из канистры в машину//////////////////////////////////////

:KANISTRA_OUT_OUT 
wait 0
if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
jf @KANISTRA_OUT
wait 5
03E6: remove_text_box 
return

:KANISTRA_OUT_REM
wait 200
03BD: destroy_sphere $CAR_SPHERE
jump @KANISTRA_OUT

:KANITRSA_PUSTA 
00BC: show_text_highpriority GXT 'INV29' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
return

:KANISTRA_PUSTA2
00BC: show_text_highpriority GXT 'INV29' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1  
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value $BENZIN virtual_protect 0   
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1                                                             
return

:BAK_FULL
00BC: show_text_highpriority GXT 'INV27' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value $BENZIN virtual_protect 0 
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1 
return

:KANISTRA_OUT
wait 0
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
jf @KANISTRA_OUT_OUT

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then
if
8A2A: not  text_box 'INV25' displayed
    then
    0512: show_permanent_text_box 'INV25'
    end    
else

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV25_2' displayed
    then
    0512: show_permanent_text_box 'INV25_2'
    end
    
else

if
8A2A: not  text_box 'INV25_3' displayed
    then
    0512: show_permanent_text_box 'INV25_3'
    end

end    
    
end    

if 
0AB0:   key_pressed $KEY_USE 
jf @KANISTRA_OUT_OUT
if
not $KANISTRA_FUEL <= 0.1
jf @KANITRSA_PUSTA
0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@
if 
056E:   car 3@ defined 
jf @KANISTRA_OUT
if and
not car.Wrecked(3@)
not Car.Id(3@) == #BMX
not Car.Id(3@) == #BIKE
not Car.Id(3@) == #MTBIKE
jf @KANISTRA_OUT
if and
not car.Id(3@) == #QUAD
not car.Id(3@) == 15426
jf @KANISTRA_OUT_CHECK_NEAR_QUADBIKE 
gosub @BIKE_CHECK2
if
19@ == 0
jf @KANISTRA_OUT_CHECK_NEAR_MOTO
jump @KANISTRA_OUT_CHECK_NEAR

:KANISTRA_OUT_CHECK_NEAR
wait 0
gosub @GASTANK_OFFSET
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 24@ 25@ 26@
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 0.75 
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 0.65 0.65
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching
not car.Wrecked(3@)
jf @KANISTRA_OUT_REM
03BD: destroy_sphere $CAR_SPHERE
0A97: 11@ = car 3@ struct 
11@ += 4   
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
if
88B7:   not test 12@ bit 1
jf @KANISTRA_BENZIN_OLD_CAR_SET2
jump @KANISTRA_OUT_START

:KANISTRA_OUT_CHECK_NEAR_MOTO
wait 0
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 0.75 
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 0.85 0.85
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching
not car.Wrecked(3@)
jf @KANISTRA_OUT_REM
03BD: destroy_sphere $CAR_SPHERE
0A97: 11@ = car 3@ struct 
11@ += 4   
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
if
88B7:   not test 12@ bit 1
jf @KANISTRA_BENZIN_OLD_CAR_SET2
jump @KANISTRA_OUT_START

:KANISTRA_OUT_CHECK_NEAR_QUADBIKE
wait 0
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 1.05 
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 1.05 1.05
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching
not car.Wrecked(3@)
jf @KANISTRA_OUT_REM
03BD: destroy_sphere $CAR_SPHERE
0A97: 11@ = car 3@ struct 
11@ += 4   
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
if
88B7:   not test 12@ bit 1
jf @KANISTRA_BENZIN_OLD_CAR_SET2
jump @KANISTRA_OUT_START

:KANISTRA_OUT_START
text.RemoveTextBox()
08BD: set 12@ bit 1 
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0 
08C3: clear 12@ bit 1
if
not car.Id(3@) == #PETROTR
jf @CHECK_ANIM44
random_float $BENZIN $GASOLINE_MIN $GASOLINE_MAX

if
PERK_GASOLINEFIND == 1
then
$BENZIN *= 3.5
end

jump @CHECK_ANIM444

:CHECK_ANIM444
text.RemoveTextBox()
0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

if or
$PLAYER_PREV_WEAP == 9
$PLAYER_PREV_WEAP == 131
$PLAYER_PREV_WEAP == 164
$PLAYER_PREV_WEAP == 194
then

repeat
wait 0
until 82D8: not  actor PLAYER_ACTOR current_weapon == $PLAYER_PREV_WEAP

end

gosub @BENZIN_KANISTRA_SHOW_TEXT

0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_USE_SOUND, 1)
Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY) 
jump @BENZIN_KANISTRA_MINUS2

:CHECK_ANIM44
text.RemoveTextBox()
random_float $KANISTRA_FUEL $KANISTRA_FUEL_MIN $KANISTRA_FUEL_MAX
0059: $KANISTRA_FUEL += $KANISTRA_FUEL // (float)
random_float $KANISTRA_FUEL2 10.0 20.0
0059: $KANISTRA_FUEL2 += $KANISTRA_FUEL // (float)

0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

if or
$PLAYER_PREV_WEAP == 9
$PLAYER_PREV_WEAP == 131
$PLAYER_PREV_WEAP == 164
$PLAYER_PREV_WEAP == 194
then

repeat
wait 0
until 82D8: not  actor PLAYER_ACTOR current_weapon == $PLAYER_PREV_WEAP

end

jump @BENZIN_KANISTRA_MINUS2

:KANISTRA_BENZIN_OLD_CAR_SET2
text.RemoveTextBox()
0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

if or
$PLAYER_PREV_WEAP == 9
$PLAYER_PREV_WEAP == 131
$PLAYER_PREV_WEAP == 164
$PLAYER_PREV_WEAP == 194
then

repeat
wait 0
until 82D8: not  actor PLAYER_ACTOR current_weapon == $PLAYER_PREV_WEAP

end

0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_USE_SOUND, 1)
Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY)
 
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8D: $BENZIN = read_memory 23@ size 4 virtual_protect 0
 
gosub @BENZIN_KANISTRA_SHOW_TEXT

{$INCLUDE Gasoline Max.txt}

jump @BENZIN_KANISTRA_MINUS2

:BENZIN_KANISTRA_SHOW_TEXT

008C: $BENZIN2 = float $BENZIN to_integer
if and
not CAR_SEARCH_DO_NOT_GIVE == 1
not SUPPLY_TEXT_FLAG == 1
not CAMP_RAID_FLAG == 1
then 
04F7: vagina_text $BENZIN2 type 0 line 1 GXT 'INV113'
else

if and
CAR_SEARCH_DO_NOT_GIVE == 1
not RQUEST_TIMER_STOPPED_FLAG == 1
then
04F7: vagina_text $BENZIN2 type 0 line 2 GXT 'INV113'
else

if and
SUPPLY_TEXT_FLAG == 0
CAMP_RAID_FLAG == 0
then
04F7: vagina_text $BENZIN2 type 0 line 1 GXT 'INV113'
else
04F7: vagina_text $BENZIN2 type 0 line 2 GXT 'INV113'
end

end

end

return

:BENZIN_KANISTRA_MINUS2
wait 20

gosub @BENZIN_KANISTRA_SHOW_TEXT

if
$SLOWMODE_ACTIVE == 0
then
$KANISTRA_FUEL -= 0.1
$BENZIN += 0.1
$BENZIN_IN_CAR_TOTAL += 0.1
else
$KANISTRA_FUEL -= 0.1
$BENZIN += 0.1
$BENZIN_IN_CAR_TOTAL += 0.1

$KANISTRA_FUEL -= 0.1
$BENZIN += 0.1
$BENZIN_IN_CAR_TOTAL += 0.1

$KANISTRA_FUEL -= 0.1
$BENZIN += 0.1
$BENZIN_IN_CAR_TOTAL += 0.1
end

CAR_2P_UPDATE_GAS_INCAR = 1

02E3: 0@ = car 3@ speed
if and
0@ < 1.0
0185:  car 3@ health > 249
//8495: not  car 3@ burning
jf @BENZIN_KANISTRA_IN
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
not car.Wrecked(3@)
jf @BENZIN_KANISTRA_IN
if
actor.Animation(PLAYER_ACTOR) == "car_check"
jf @BENZIN_KANISTRA_IN

{$INCLUDE Gasoline Max.txt}

if
not $KANISTRA_FUEL < 0.1
jf @KANISTRA_PUSTA2
jump @BENZIN_KANISTRA_MINUS2

:BENZIN_KANISTRA_IN
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1  
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
0A97: 22@ = car 3@ struct 
0A8E: 23@ = 22@ + 5 // int 
0A8C: write_memory 23@ size 4 value $BENZIN virtual_protect 0 
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP 
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @SHOW_FAILED_CARCHECK_MESSAGE                                                               
return

//////////////////////////////Вливание бензина из канистры в бензопилу//////////////////////////////////////

:KANISTRA_IN_CHAINSAW
0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

if
0491:   actor PLAYER_ACTOR has_weapon 9
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 9
end

if
0491:   actor PLAYER_ACTOR has_weapon 131
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 131 
end

if
0491:   actor PLAYER_ACTOR has_weapon 164
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 164
end

if
0491:   actor PLAYER_ACTOR has_weapon 194
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 194
end
    
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_USE_SOUND, 1)
Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY) 

while true
wait 0

for 0@ = 0 to 1

if
$SLOWMODE_ACTIVE == 0
then
$KANISTRA_FUEL -= 0.01
$CHAINSAW_GASOLINE += 1
0084: $CHAINSAW_GASOLINE2 = $CHAINSAW_GASOLINE
$CHAINSAW_GASOLINE2 /= 10
0084: $CHAINSAW_GASOLINE3 = $CHAINSAW_GASOLINE2
else
$KANISTRA_FUEL -= 0.01
$CHAINSAW_GASOLINE += 1
0084: $CHAINSAW_GASOLINE2 = $CHAINSAW_GASOLINE
$CHAINSAW_GASOLINE2 /= 10
0084: $CHAINSAW_GASOLINE3 = $CHAINSAW_GASOLINE2
$KANISTRA_FUEL -= 0.01
$CHAINSAW_GASOLINE += 1
0084: $CHAINSAW_GASOLINE2 = $CHAINSAW_GASOLINE
$CHAINSAW_GASOLINE2 /= 10
0084: $CHAINSAW_GASOLINE3 = $CHAINSAW_GASOLINE2
$KANISTRA_FUEL -= 0.01
$CHAINSAW_GASOLINE += 1
0084: $CHAINSAW_GASOLINE2 = $CHAINSAW_GASOLINE
$CHAINSAW_GASOLINE2 /= 10
0084: $CHAINSAW_GASOLINE3 = $CHAINSAW_GASOLINE2
end

end

if
$CHAINSAW_GASOLINE >= 1000
    then
    wait 5
    03E6: remove_text_box 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    00BC: show_text_highpriority GXT 'INV287' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//    0792: disembark_instantly_actor PLAYER_ACTOR
    break
    end

if
not $KANISTRA_FUEL > 0.0
    then
    wait 5
    03E6: remove_text_box 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    00BC: show_text_highpriority GXT 'INV29' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//    0792: disembark_instantly_actor PLAYER_ACTOR
    break
    end

if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
not actor.Animation(PLAYER_ACTOR) == "car_check"
    then
    wait 5
    03E6: remove_text_box 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//    0792: disembark_instantly_actor PLAYER_ACTOR
    break
    end        

end

return

//////////////////////////////Вливание бензина из канистры в бензопилу//////////////////////////////////////

:KANISTRA_IN_FLAMETHROWER
0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0

FLAMETHROWER_MAX_AMMO_FLAG = 0

if
0491:   actor PLAYER_ACTOR has_weapon 37
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 37
5@ = 37
end

if
0491:   actor PLAYER_ACTOR has_weapon 114
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 114
5@ = 114 
end

if
0491:   actor PLAYER_ACTOR has_weapon 148
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 148
5@ = 148
end

if
0491:   actor PLAYER_ACTOR has_weapon 180
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 180
5@ = 180
end

if
0491:   actor PLAYER_ACTOR has_weapon 210
then
01B9: set_actor PLAYER_ACTOR armed_weapon_to 210
5@ = 210
end
    
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($GASCAN_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($GASCAN_USE_SOUND, 1)
Audiostream.PerformAction($GASCAN_USE_SOUND, PLAY) 

while true
wait 0

for 0@ = 0 to 1

if
$SLOWMODE_ACTIVE == 0
then
$KANISTRA_FUEL -= 0.05
0114: set_actor PLAYER_ACTOR weapon 5@ add_ammo 2
else
$KANISTRA_FUEL -= 0.05
0114: set_actor PLAYER_ACTOR weapon 5@ add_ammo 2
$KANISTRA_FUEL -= 0.05
0114: set_actor PLAYER_ACTOR weapon 5@ add_ammo 2
$KANISTRA_FUEL -= 0.05
0114: set_actor PLAYER_ACTOR weapon 5@ add_ammo 2
end

end

if
FLAMETHROWER_MAX_AMMO_FLAG == 1
    then
    FLAMETHROWER_MAX_AMMO_FLAG = 0
    wait 5
    03E6: remove_text_box 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    00BC: show_text_highpriority GXT 'INV287' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//    0792: disembark_instantly_actor PLAYER_ACTOR
    break
    end

if
not $KANISTRA_FUEL > 0.0
    then
    wait 5
    03E6: remove_text_box 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    00BC: show_text_highpriority GXT 'INV29' time 2000 flag 1  // ~s~Come back between 9:00 and 17:00.
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//    0792: disembark_instantly_actor PLAYER_ACTOR
    break
    end

if or
0E3E: is_button_just_pressed 0 15
actor.Dead(PLAYER_ACTOR) 
8184:   actor PLAYER_ACTOR health < 1
$HUNTER_ON_PLAYER == 1
not actor.Animation(PLAYER_ACTOR) == "car_check"
    then
    wait 5
    03E6: remove_text_box 
    06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
    01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
    0992: set_player PLAYER_CHAR weapons_scrollable 1
    0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//    0792: disembark_instantly_actor PLAYER_ACTOR
    break
    end        

end

return

:REPAIR_START

$JIMMY_USING = 1

wait 0

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then
if
8A2A: not  text_box 'INV197' displayed
    then
    0512: show_permanent_text_box 'INV197'
    end    
else

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV197B' displayed
    then
    0512: show_permanent_text_box 'INV197B'
    end
    
else

if
8A2A: not  text_box 'INV197C' displayed
    then
    0512: show_permanent_text_box 'INV197C'
    end

end    
    
end    
    
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
jf @REPAIR_START_OUT    
0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@
if 
056E:   car 3@ defined 
jf @REPAIR_START 
if and
not car.Wrecked(3@)
not Car.Id(3@) == RHINO_MODEL_NUMBER
not Car.Id(3@) == ARMY_HUNTER_MODEL_NUMBER
not Car.Id(3@) == #HYDRA
not Car.Id(3@) == #BMX
not Car.Id(3@) == #BIKE
not Car.Id(3@) == #MTBIKE
jf @REPAIR_START
if
0AB0:   key_pressed $KEY_USE 
jf @REPAIR_START
gosub @BIKE_CHECK2
if
19@ == 0
jf @REPAIR_START_CHECK_NEAR_MOTO
jump @REPAIR_START_CHECK_NEAR

:REPAIR_START_CHECK_NEAR
wait 0

gosub @GET_POS_FOR_REPAIR_SHIT
 
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 1.0
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching    
not car.Wrecked(3@)
jf @REPAIR_START_REM2
03BD: destroy_sphere $CAR_SPHERE
0@ = car.Health(3@)
if
not 0@ >= CAR_HEALTH_MAX
jf @REPAIR_CAR_NOT_DAMAGED
29@ = car.Health(3@)
jump @REPAIR_START2

:REPAIR_START_CHECK_NEAR_MOTO
wait 0
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0 
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 1.0
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching    
not car.Wrecked(3@)
jf @REPAIR_START_REM2
03BD: destroy_sphere $CAR_SPHERE
0@ = car.Health(3@)
if
not 0@ >= CAR_HEALTH_MAX
jf @REPAIR_CAR_NOT_DAMAGED
29@ = car.Health(3@)
jump @REPAIR_START2

:REPAIR_START_REM2
wait 200
03BD: destroy_sphere $CAR_SPHERE
jump @REPAIR_START 

:REPAIR_START_OUT
text.ClearAll()
text.RemoveTextBox()
return

:REPAIR_CAR_NOT_DAMAGED
text.ClearAll()
text.RemoveTextBox()
text.ShowH('INV203',1000,1)
wait 1000
return

:REPAIR_START2   
text.RemoveTextBox()
 
gosub @BIKE_CHECK2
if
19@ == 0
then
if and
not car.Id(3@) == #CHEETAH
not car.Id(3@) == #TURISMO
not car.Id(3@) == #BULLET
not car.Id(3@) == #CAMPER
not car.Id(3@) == #HOTDOG
not car.Id(3@) == 15468
not car.Id(3@) == 15502
    then
    08A6: set_car 3@ door 0 rotation_to 1.0
    else
    08A6: set_car 3@ door 1 rotation_to 1.0
    end
end

0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0
$BENZIN = 10
0084: $BENZIN2 = $BENZIN // (int)
$BENZIN2 /= 10

if and
not CAR_SEARCH_DO_NOT_GIVE == 1
not SUPPLY_TEXT_FLAG == 1
then        
04F7: vagina_text $BENZIN2 type 1 line 1 GXT 'INV200'
else

if and
CAR_SEARCH_DO_NOT_GIVE == 1
not RQUEST_TIMER_STOPPED_FLAG == 1
then
04F7: vagina_text $BENZIN2 type 1 line 2 GXT 'INV200'
else

if
SUPPLY_TEXT_FLAG == 0
then
04F7: vagina_text $BENZIN2 type 1 line 1 GXT 'INV200'
else
04F7: vagina_text $BENZIN2 type 1 line 2 GXT 'INV200'
end

end

end
    
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($CAR_SEARCH_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($CAR_SEARCH_SOUND, 1)
Audiostream.PerformAction($CAR_SEARCH_SOUND, PLAY) 
jump @REPAIR_IDLE_CHECK

:REPAIR_IDLE_CHECK
wait 20
30@ = car.Health(3@)

if
$SLOWMODE_ACTIVE == 0
then
$BENZIN += 1
else
$BENZIN += 1
$BENZIN += 1
$BENZIN += 1
$BENZIN += 1
end

if
$CHEATS_ON == 1
then
$BENZIN += 100
end

if
CURRENT_USHER_TUTORIAL_NUM == -999
then
$BENZIN += 3
end
  
0084: $BENZIN2 = $BENZIN // (int)
$BENZIN2 /= 10
if
not $BENZIN >= 1000
jf @REPAIR_FINISHED 
02E3: 0@ = car 3@ speed
if and
0@ < 1.0
0185:  car 3@ health > 249
//8495: not  car 3@ burning
jf @REPAIR_IDLE_OUT
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
003B:   29@ == 30@  // (int)
jf @REPAIR_IDLE_OUT
if
actor.Animation(PLAYER_ACTOR) == "car_check"
jf @REPAIR_IDLE_OUT
jump @REPAIR_IDLE_CHECK

:REPAIR_FINISHED
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2   

gosub @BIKE_CHECK2
if
19@ == 0
then
if and
not car.Id(3@) == #CHEETAH
not car.Id(3@) == #TURISMO
not car.Id(3@) == #BULLET
not car.Id(3@) == #CAMPER
not car.Id(3@) == #HOTDOG
not car.Id(3@) == 15468
not car.Id(3@) == 15502
    then
    08A6: set_car 3@ door 0 rotation_to 0.0
    else
    08A6: set_car 3@ door 1 rotation_to 0.0
    end
end

Audiostream.PerformAction($CAR_SEARCH_SOUND, STOP)
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
$REPAIR_KIT -= 1
0A30: repair_car 3@

////////////////////////////////////////////////////////////////
//0A97: 19@ = car 3@ struct 
//19@ += 17 
//0A8D: 24@ = read_memory 19@ size 1 virtual_protect 0
//0A97: 11@ = car 3@ struct 
//11@ += 9
//0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
//08BD: set 12@ bit 2
//0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0
//08C3: clear 12@ bit 2
//0A97: 19@ = car 3@ struct 
//19@ += 17 
//0A8D: 24@ = read_memory 19@ size 1 virtual_protect 0
//0A97: 19@ = car 3@ struct 
//19@ += 17
//08C3: clear 24@ bit 4 
//0A8C: write_memory 19@ size 1 value 24@ virtual_protect 0
////////////////////////////////////////////////////////////////

car.Health(3@) = CAR_HEALTH_MAX

$TEMP_XP = REPAIR_CAR_XP
008D: $TEMP_XP = integer $TEMP_XP to_float
0069: $TEMP_XP *= $XP_COEFF // (float)
008C: $TEMP_XP = float $TEMP_XP to_integer
0058: $PLAYER_XP += $TEMP_XP // (int)

return

:REPAIR_IDLE_OUT
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2

gosub @BIKE_CHECK2
if
19@ == 0
then
if and
not car.Id(3@) == #CHEETAH
not car.Id(3@) == #TURISMO
not car.Id(3@) == #BULLET
not car.Id(3@) == #CAMPER
not car.Id(3@) == #HOTDOG
not car.Id(3@) == 15468
not car.Id(3@) == 15502
    then
    08A6: set_car 3@ door 0 rotation_to 0.0
    else
    08A6: set_car 3@ door 1 rotation_to 0.0
    end
end

Audiostream.PerformAction($CAR_SEARCH_SOUND, STOP)
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @SHOW_FAILED_CARCHECK_MESSAGE           
return

:DINAMO_START

$JIMMY_USING = 1

wait 0

if
0E45: frame_mod 10
then
$PANEL_OPEN = 0
end

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then
if
8A2A: not  text_box 'INV322' displayed
    then
    0512: show_permanent_text_box 'INV322'
    end    
else

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV322B' displayed
    then
    0512: show_permanent_text_box 'INV322B'
    end
    
else

if
8A2A: not  text_box 'INV322C' displayed
    then
    0512: show_permanent_text_box 'INV322C'
    end

end    
    
end    
    
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
jf @DINAMO_START_OUT    
0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@
if 
056E:   car 3@ defined 
jf @DINAMO_START 
if and
not car.Wrecked(3@)
not Car.Id(3@) == RHINO_MODEL_NUMBER
not Car.Id(3@) == ARMY_HUNTER_MODEL_NUMBER
not Car.Id(3@) == #HYDRA
not Car.Id(3@) == #BMX
not Car.Id(3@) == #BIKE
not Car.Id(3@) == #MTBIKE
jf @DINAMO_START
if
0AB0:   key_pressed $KEY_USE 
jf @DINAMO_START
gosub @BIKE_CHECK2
if
19@ == 0
jf @DINAMO_START_CHECK_NEAR_MOTO
jump @DINAMO_START_CHECK_NEAR

:DINAMO_START_CHECK_NEAR
wait 0

gosub @GET_POS_FOR_REPAIR_SHIT
 
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 1.0
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching    
not car.Wrecked(3@)
jf @DINAMO_START_REM2
03BD: destroy_sphere $CAR_SPHERE
0A97: 19@ = car 3@ struct 
19@ += 17 
0A8D: 24@ = read_memory 19@ size 1 virtual_protect 0
if
08B4:   test 24@ bit 4
jf @DINAMO_CAR_NOT_DAMAGED
29@ = car.Health(3@)
jump @DINAMO_START2

:DINAMO_START_CHECK_NEAR_MOTO
wait 0
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 0.0 0.0 
03BC: $CAR_SPHERE = create_sphere_at 4@ 5@ 6@ radius 1.0
if and
00EC:   actor PLAYER_ACTOR sphere 0 near_point 4@ 5@ radius 1.0 1.0
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching    
not car.Wrecked(3@)
jf @DINAMO_START_REM2
03BD: destroy_sphere $CAR_SPHERE
0A97: 19@ = car 3@ struct 
19@ += 17 
0A8D: 24@ = read_memory 19@ size 1 virtual_protect 0
if
08B4:   test 24@ bit 4
jf @DINAMO_CAR_NOT_DAMAGED
29@ = car.Health(3@)
jump @DINAMO_START2

:DINAMO_START_REM2
wait 200
03BD: destroy_sphere $CAR_SPHERE
jump @DINAMO_START 

:DINAMO_START_OUT
text.ClearAll()
text.RemoveTextBox()
return

:DINAMO_CAR_NOT_DAMAGED
text.ClearAll()
text.RemoveTextBox()
text.ShowH('INV323',1000,1)
wait 1000
return

:DINAMO_START2   
text.RemoveTextBox() 
gosub @BIKE_CHECK2
if
19@ == 0
then
if and
not car.Id(3@) == #CHEETAH
not car.Id(3@) == #TURISMO
not car.Id(3@) == #BULLET
not car.Id(3@) == #CAMPER
not car.Id(3@) == #HOTDOG
not car.Id(3@) == 15468
not car.Id(3@) == 15502
    then
    08A6: set_car 3@ door 0 rotation_to 1.0
    else
    08A6: set_car 3@ door 1 rotation_to 1.0
    end
end

0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0
$BENZIN = 10
0084: $BENZIN2 = $BENZIN // (int)
$BENZIN2 /= 10

if and
not CAR_SEARCH_DO_NOT_GIVE == 1
not SUPPLY_TEXT_FLAG == 1
then        
04F7: vagina_text $BENZIN2 type 1 line 1 GXT 'INV324'
else

if and
CAR_SEARCH_DO_NOT_GIVE == 1
not RQUEST_TIMER_STOPPED_FLAG == 1
then
04F7: vagina_text $BENZIN2 type 1 line 2 GXT 'INV324'
else

if
SUPPLY_TEXT_FLAG == 0
then
04F7: vagina_text $BENZIN2 type 1 line 1 GXT 'INV324'
else
04F7: vagina_text $BENZIN2 type 1 line 2 GXT 'INV324'
end

end

end
    
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000 
Audiostream.Volume($DINAMO_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($DINAMO_SOUND, 1)
Audiostream.PerformAction($DINAMO_SOUND, PLAY) 
jump @DINAMO_IDLE_CHECK

:DINAMO_IDLE_CHECK
wait 20
30@ = car.Health(3@)

if
$SLOWMODE_ACTIVE == 0
then
$BENZIN += 1
else
$BENZIN += 1
$BENZIN += 1
$BENZIN += 1
$BENZIN += 1
end

if
$CHEATS_ON == 1
then
$BENZIN += 100
end

if
CURRENT_USHER_TUTORIAL_NUM == -999
then
$BENZIN += 2
end 
  
0084: $BENZIN2 = $BENZIN // (int)
$BENZIN2 /= 10
if
not $BENZIN >= 1000
jf @DINAMO_FINISHED 
02E3: 0@ = car 3@ speed
if and
0@ < 1.0
0185:  car 3@ health > 249
//8495: not  car 3@ burning
jf @DINAMO_IDLE_OUT
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
003B:   29@ == 30@  // (int)
jf @DINAMO_IDLE_OUT
if
actor.Animation(PLAYER_ACTOR) == "car_check"
jf @DINAMO_IDLE_OUT
jump @DINAMO_IDLE_CHECK

:DINAMO_FINISHED
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2   

gosub @BIKE_CHECK2
if
19@ == 0
then
if and
not car.Id(3@) == #CHEETAH
not car.Id(3@) == #TURISMO
not car.Id(3@) == #BULLET
not car.Id(3@) == #CAMPER
not car.Id(3@) == #HOTDOG
not car.Id(3@) == 15468
not car.Id(3@) == 15502
    then
    08A6: set_car 3@ door 0 rotation_to 0.0
    else
    08A6: set_car 3@ door 1 rotation_to 0.0
    end
end

Audiostream.PerformAction($DINAMO_SOUND, STOP)
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1

////////////////////////////////////////////////////////////////
0A97: 19@ = car 3@ struct 
19@ += 17 
0A8D: 24@ = read_memory 19@ size 1 virtual_protect 0
0A97: 11@ = car 3@ struct 
11@ += 9
0A8D: 12@ = read_memory 11@ size 1 virtual_protect 0
08BD: set 12@ bit 2
0A8C: write_memory 11@ size 1 value 12@ virtual_protect 0
08C3: clear 12@ bit 2
0A97: 19@ = car 3@ struct 
19@ += 17 
0A8D: 24@ = read_memory 19@ size 1 virtual_protect 0
0A97: 19@ = car 3@ struct 
19@ += 17
08C3: clear 24@ bit 4 
0A8C: write_memory 19@ size 1 value 24@ virtual_protect 0
////////////////////////////////////////////////////////////////

$TEMP_XP = REPAIR_CAR_XP
008D: $TEMP_XP = integer $TEMP_XP to_float
0069: $TEMP_XP *= $XP_COEFF // (float)
008C: $TEMP_XP = float $TEMP_XP to_integer
0058: $PLAYER_XP += $TEMP_XP // (int)

text.ShowH('INV198',100,1)
return

:DINAMO_IDLE_OUT
0605: actor PLAYER_ACTOR perform_animation "car_check" IFP "CAR_CHECKS" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2

gosub @BIKE_CHECK2
if
19@ == 0
then
if and
not car.Id(3@) == #CHEETAH
not car.Id(3@) == #TURISMO
not car.Id(3@) == #BULLET
not car.Id(3@) == #CAMPER
not car.Id(3@) == #HOTDOG
not car.Id(3@) == 15468
not car.Id(3@) == 15502
    then
    08A6: set_car 3@ door 0 rotation_to 0.0
    else
    08A6: set_car 3@ door 1 rotation_to 0.0
    end
end

Audiostream.PerformAction($DINAMO_SOUND, STOP)
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @SHOW_FAILED_CARCHECK_MESSAGE           
return

:DOMKRAT_START

$JIMMY_USING = 1

wait 0

if and
$KEY_USE == 69
8A4B: not  controls_set_to_joystick
then
if
8A2A: not  text_box 'INV307' displayed
    then
    0512: show_permanent_text_box 'INV307'
    end    
else

if
8A4B: not  controls_set_to_joystick
then

if
8A2A: not  text_box 'INV307B' displayed
    then
    0512: show_permanent_text_box 'INV307B'
    end
    
else

if
8A2A: not  text_box 'INV307C' displayed
    then
    0512: show_permanent_text_box 'INV307C'
    end

end   
    
end    
    
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
jf @REPAIR_START_OUT    
0AB5: store_actor PLAYER_ACTOR closest_vehicle_to 3@ closest_ped_to 1@

if
$QUEST_TYPE == 100
then
if
0E4D: random_percent 50
    then
    008B: 3@ = SUPPLY_QUEST_TRUCK // (int)
    end
end

if 
056E:   car 3@ defined 
jf @DOMKRAT_START 
if and
not car.Wrecked(3@)
not Car.Id(3@) == RHINO_MODEL_NUMBER
not Car.Id(3@) == ARMY_HUNTER_MODEL_NUMBER
not Car.Id(3@) == #HYDRA
not Car.Id(3@) == #BMX
not Car.Id(3@) == #BIKE
not Car.Id(3@) == #MTBIKE
jf @DOMKRAT_START
if
0AB0:   key_pressed $KEY_USE 
jf @DOMKRAT_START
gosub @BIKE_CHECK2
if
19@ == 0
jf @DOMKRAT_START
if and
0202:   actor PLAYER_ACTOR near_car 3@ radius 8.0 8.0 sphere 0
01C1:   car 3@ stopped
02A0:   actor PLAYER_ACTOR stopped
PLAYER_STANDING_ON_CAR_FLAG == 0
8597: not  actor PLAYER_ACTOR crouching    
not car.Wrecked(3@)
01F4:   car 3@ flipped
jf @DOMKRAT_START

text.RemoveTextBox()
29@ = car.Health(3@) 

0470: $PLAYER_PREV_WEAP = actor PLAYER_ACTOR current_weapon
01B9: set_actor PLAYER_ACTOR armed_weapon_to 0
0992: set_player PLAYER_CHAR weapons_scrollable 0
$BENZIN = 10
0084: $BENZIN2 = $BENZIN // (int)
$BENZIN2 /= 10

if and
not CAR_SEARCH_DO_NOT_GIVE == 1
not SUPPLY_TEXT_FLAG == 1
then        
04F7: vagina_text $BENZIN2 type 1 line 1 GXT 'INV367'
else

if and
CAR_SEARCH_DO_NOT_GIVE == 1
not RQUEST_TIMER_STOPPED_FLAG == 1
then
04F7: vagina_text $BENZIN2 type 1 line 2 GXT 'INV367'
else

if
SUPPLY_TEXT_FLAG == 0
then
04F7: vagina_text $BENZIN2 type 1 line 1 GXT 'INV367'
else
04F7: vagina_text $BENZIN2 type 1 line 2 GXT 'INV367'
end

end

end
    
0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "CAMERA" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 90000
Audiostream.LinkToCar($JACK_USE_SOUND,3@)
Audiostream.Volume($JACK_USE_SOUND) = $SOUNDS_VOLUME 
Audiostream.Loop($JACK_USE_SOUND, 1)
Audiostream.PerformAction($JACK_USE_SOUND, PLAY) 

:JACK_IDLE_CHECK
wait 20
30@ = car.Health(3@)

if
$SLOWMODE_ACTIVE == 0
then
$BENZIN += 5
else
$BENZIN += 5
$BENZIN += 5
$BENZIN += 5
$BENZIN += 5
end

if
$CHEATS_ON == 1
then
$BENZIN += 100
end
  
0084: $BENZIN2 = $BENZIN // (int)
$BENZIN2 /= 10
if
not $BENZIN >= 1000
jf @JACK_FINISHED
02E3: 0@ = car 3@ speed
if and
0@ < 1.0
0185:  car 3@ health > 249
//8495: not  car 3@ burning
jf @JACK_IDLE_OUT 
if and
80E1: not player 0 pressed_key 15
0184:   actor PLAYER_ACTOR health > 0
$HUNTER_ON_PLAYER == 0
not actor.Dead(PLAYER_ACTOR)
003B:   29@ == 30@  // (int)
jf @JACK_IDLE_OUT
if
actor.Animation(PLAYER_ACTOR) == "BOM_Plant_Loop"
jf @JACK_IDLE_OUT
jump @JACK_IDLE_CHECK

:JACK_FINISHED
0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "CAMERA" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
Audiostream.PerformAction($JACK_USE_SOUND, STOP)
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1      
text.RemoveTextBox()
0407: store_coords_to 0@ 1@ 2@ from_car 3@ with_offset 0.0 0.0 3.0
car.PutAt(3@,0@,1@,2@)
0840: link_car 3@ to_interior 0
return

:JACK_IDLE_OUT
0605: actor PLAYER_ACTOR perform_animation "BOM_Plant_Loop" IFP "CAMERA" framedelta 4.0 loop 1 lockX 0 lockY 0 lockF 0 time 1 
//0792: disembark_instantly_actor PLAYER_ACTOR
0151: remove_status_text $BENZIN2
Audiostream.PerformAction($JACK_USE_SOUND, STOP)
06AB: set_actor PLAYER_ACTOR all_weapons_hidden 0
01B9: set_actor PLAYER_ACTOR armed_weapon_to $PLAYER_PREV_WEAP  
0992: set_player PLAYER_CHAR weapons_scrollable 1
gosub @SHOW_FAILED_CARCHECK_MESSAGE           
return

:INV_PLAYER_PAD_OFF
0E68: set_player_control_pad 0 1 
0E69: set_player_control_pad_movement 0 0
return

:INV_PLAYER_PAD_ON_BACK
0E68: set_player_control_pad 1 1 
0E69: set_player_control_pad_movement 0 1
return

:INV_PLAYER_PAD_ON_BACK2
0E68: set_player_control_pad 1 1 
0E69: set_player_control_pad_movement 1 1
return

:BIKE_CHECK2
19@ = 0

18@ = car.Model(3@)

if or
18@ == #BF400
18@ == #FAGGIO
18@ == #FREEWAY
18@ == #FCR900
18@ == #PIZZABOY
18@ == #PCJ600
18@ == #SANCHEZ
18@ == #WAYFARER
    then
    19@ = 1
    end
    
if or
18@ == #FCR900
18@ == #QUAD
18@ == #COPBIKE
18@ == #NRG500 
    then
    19@ = 1
    end

if
UNITED_MAP == 0
then

if or
18@ == #RCCAM
18@ == 15403
18@ == 15404
18@ == 15420
18@ == 15491
18@ == 15492
18@ == 15493
18@ == 15494
    then
    19@ = 1
    end
    
if
18@ == 15426
    then
    19@ = 1
    end    

else

if or
18@ == 15293
18@ == 15296
18@ == 15319
18@ == 15322
18@ == 15332
    then
    19@ = 1
    end
    
if or
18@ == 15418
18@ == 15421
18@ == 15428
18@ == 15430
18@ == 15435
18@ == 15507
18@ == 15510
    then
    19@ = 1
    end
    
if or
18@ == 15523
18@ == 15526
18@ == 15532
18@ == 15299 
    then
    19@ = 1
    end
    
if or
18@ == 15454
18@ == 15455
18@ == 15456
18@ == 15457 
    then
    19@ = 1
    end
    
if or
18@ == 15550
18@ == 15552
18@ == 15565
18@ == 15556
18@ == 15558
18@ == 15566 
    then
    19@ = 1
    end    
    
end                    
    
return

:INV_AIRDROP_NEAR_CAMP_CHECK

6@ = 0

if
$GAMEMODE_WAR == 1
then
return
end

///////////////////////////////////////////////////////////////////////////

if
UNITED_MAP == 0
then
1@ = 14
else
1@ = 9
end

for 0@ = 0 to 1@

if
00EC:   actor PLAYER_ACTOR sphere 0 near_point $CAMP_X[0@] $CAMP_Y[0@] radius 250.0 250.0
then
6@ = 1
end

end

///////////////////////////////////////////////////////////////////////////

actor.StorePos(PLAYER_ACTOR,25@,26@,27@)

if
27@ > 250.0
then
6@ = 1
end

return

:INV_RANDOM_AIRDROP_SPAWN_ZONE_CHECK
6@ = 1

if
$GAMEMODE_WAR == 1
then
return
end

if or
0154:   actor PLAYER_ACTOR in_zone 'ARMYZN'
0154:   actor PLAYER_ACTOR in_zone 'DLRZONE'
0154:   actor PLAYER_ACTOR in_zone 'SRVZN'
0154:   actor PLAYER_ACTOR in_zone 'BNTDZN'
then
6@ = 0
end

if
UNITED_MAP == 0
then

if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 85.9563 1789.6394 0.0 cornerB 395.747 1947.0049 200.0 //Army Zone 1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 395.747 1947.0049 0.0 cornerB 157.8393 2109.071 200.0 //Army Zone 1-2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2864.26 -2296.88 0.0 cornerB 2664.06 -2564.66 200.0 //Army Zone 2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -453.13 -460.94 0.0 cornerB -632.81 -570.31 200.0 //Army Zone 3
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1236.22 532.73 0.0 cornerB -1479.03 480.11 200.0 //Army Zone 4
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 788.54 -1327.47 0.0 cornerB 645.23 -1387.39 200.0 //Bandit Zone 1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1359.38 226.56 0.0 cornerB 1250.0 132.81 200.0 //Bandit Zone 2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1098.14 1365.52 0.0 cornerB 1015.68 1220.94 200.0 //Bandit Zone 3
    then
    6@ = 0
    end    

if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1858.78 -1297.43 0.0 cornerB 1903.21 -1333.35 200.0 //Trader Zone 0
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -404.3865 -1476.689 0.0 cornerB -345.3865 -1394.689 200.0 //Trader Zone 1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 427.52 2548.39 0.0 cornerB 407.61 2526.03 200.0 //Trader Zone 2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2619.17 -1511.30 0.0 cornerB 2786.00 -1415.17 200.0 //Trader Zone 3
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1886.3972 -1690.2018 0.0 cornerB -1929.0323 -1650.1958 200.0 //Trader Zone 4
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2301.83 -20.72 0.0 cornerB 2335.90 23.12 200.0 //Trader Zone 5
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1755.02 926.82 0.0 cornerB 1718.80 891.51 200.0 //Trader Zone 6
    then
    6@ = 0
    end

if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 751.20 -1432.56 0.0 cornerB 691.96 -1516.19 200.0 //Trader Zone 7
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1651.67 2606.63 0.0 cornerB -1682.51 2578.91 200.0 //Trader Zone 8
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2323.0 1710.1875 0.0 cornerB 2398.0 1612.1875 200.0 //Trader Zone 9
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2126.95 173.65 0.0 cornerB -2136.94 153.88 200.0 //Trader Zone 10
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1909.89 787.54 0.0 cornerB -1909.89 787.54 200.0 //Trader Zone 11
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -666.168 919.6441 0.0 cornerB -713.3187 950.6985 200.0 //Trader Zone 12
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2210.40 642.64 0.0 cornerB -2201.72 724.11 200.0 //Trader Zone 13  
    then
    6@ = 0
    end
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2159.8706 -77.9699 0.0 cornerB -2008.064 -194.9493 200.0 //Bandit Zone 4
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2008.064 -194.9493 0.0 cornerB -2206.4624 -284.2897 200.0 //Bandit Zone 5
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1357.4393 -850.5232 0.0 cornerB 1201.0028 -682.215 200.0 //OOS Zone
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1140.63 -265.63 0.0 cornerB 953.13 -421.88 200.0 //Survivors Zone 1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2697.67 225.09 0.0 cornerB -2653.78 246.99 200.0 //Survivors Zone 2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -750.8 1498.59 0.0 cornerB -711.96 1572.89 200.0 //Survivors Zone 3
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2053.71 -1759.78 0.0 cornerB 2019.05 -1805.22 200.0 //Survivors Zone 4
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2519.62 1080.73 0.0 cornerB 2472.25 1188.69 200.0 //Survivors Zone 5
    then
    6@ = 0
    end
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2786.9807 -1483.0641 0.0 cornerB 2822.3315 -1424.2843 200.0 //Survivors Zone 4B
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 359.38 -1453.13 0.0 cornerB 265.63 -1585.94 30.0 //Survivors Zone 4C
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2482.6663 -592.8055 0.0 cornerB -2543.678 -721.6879 200.0 //Survivors Zone 2B
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2237.1636 935.8976 0.0 cornerB -2162.6333 1076.9303 200.0 //Survivors Zone 2C
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -264.1352 2641.4204 0.0 cornerB -377.2627 2694.4468 200.0 //Survivors Zone 3B
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 143.3994 -201.4584 0.0 cornerB 173.7076 -151.1922 200.0 //Survivors Zone 1B
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1392.6833 -1604.0728 0.0 cornerB -1471.0334 -1436.6903 200.0 //Survivors Zone 1C
    then
    6@ = 0
    end
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2236.3337 2722.114 0.0 cornerB 2460.2527 2824.3809 200.0 //Survivors Zone 5B
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1016.7408 2205.6025 0.0 cornerB 1111.224 2062.55 30.0 //Survivors Zone 5C
    then
    6@ = 0
    end            
    
//////////////////////////////////////////////////////////////////////////////////////////////////                    
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1226.78 -1771.66 -90.0 -1820.64 -2643.68 200.0 //CREEK
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1820.64 -1771.66 -90.0 -2030.12 -2174.89 200.0 //CREEK1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2178.69 -1115.58 -90.0 -2994.49 -2189.91 560.0 //MTCHI1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1936.12 -1250.97 -90.0 -2178.69 -1771.66 560.0 //MTCHI2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2178.69 -971.91 -90.0 -2997.47 -1115.58 560.0 //MTCHI3
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2030.12 -1771.66 -90.0 -2178.69 -2189.91 560.0 //MTCHI4
    then
    6@ = 0
    end

if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 435.99 2677.90 0.0 37.03 2337.18 200.0 //MEAD
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 421.23 2123.01 -50.0 -91.59 1655.05 250.0 //REST
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -908.16 -787.39 114.98 -1209.67 -1317.10 251.98 //FARM
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -592.09 2571.97 0.0 -901.13 2221.86 200.0 //ARCO
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1457.46 2863.23 -89.08 1117.40 2723.23 110.92 //YBELL1
    then
    6@ = 0
    end
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1457.37 1883.11 -89.08 1236.63 1203.28 110.92 //VAIR1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1777.39 1883.11 -89.08 1457.37 1203.28 110.92 //VAIR2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1213.91 -50.10 0.0 -1794.92 -730.12 200.0 //SFAIR1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1213.91 578.40 0.0 -1242.98 -50.10 200.0 //SFAIR2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1242.98 249.90 0.0 -1499.89 -50.10 200.0 //SFAIR3
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1132.82 -50.10 0.0 -1213.91 -730.12 200.0 //SFAIR4
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -947.98 578.40 0.0 -1213.91 -50.10 200.0 //SFAIR5
    then
    6@ = 0
    end

if or    
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1852 -2179.25 -89.08 1249.62 -2394.33 110.92 //LAIR1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2201.82 -2394.33 -89.08 1382.73 -2730.88 110.92 //LAIR2b
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2089 -2179.25 -89.08 1852 -2394.33 110.92 //LAIR2a
    then
    6@ = 0
    end
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2616.40 2175.15 0.0 -2741.45 1659.68 200.0 //GANTB
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2616.40 1659.68 0.0 -2741.07 1490.47 200.0 //GANTB1
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 603.03 555.68 0.0 434.34 366.57 200.0 //FALLO
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -122.13 476.47 0.0 -222.18 293.32 200.0 //MART
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1785.14 567.20 0.0 1664.62 401.75 200.0 //MAKO
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -592.09 2571.97 0.0 -901.13 2221.86 200.0 //ARCO
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 860.55 1031.71 -115.24 337.24 710.84 203.76 //QUARY
    then
    6@ = 0
    end

if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1213.91 1057.04 -89.08 -1339.89 828.13 110.92 //GARV
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1087.93 1178.93 -89.08 -1213.91 9502 110.92 //GARV2
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1339.89 925.35 -179.62 -1499.89 696.44 20.38 //GARV3
    then
    6@ = 0
    end
    
//////////////////////////////////////////////////////////////////////////////////////////////////                  
    
else

if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2635.8787 -354.2914 0.0 cornerB 2916.0 -32.2914 200.0 //BIG BILLS BOWLS TRACK VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1786.27 -1191.43 0.0 cornerB 2163.66 -152.395 200.0 //GOLF CLUB VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2635.8787 -354.2914 0.0 cornerB 2916.0 -32.2914 200.0 //BEACH TRACK VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 92.1001 -1895.2 0.0 cornerB 792.1 -1265.2 200.0 //AIRPORT VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 77.7263 -2752.63 0.0 cornerB 792.246 -1895.2 200.0 //AIRPORT VC  
    then
    6@ = 0
    end
    
if or
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -277.7767 1109.5814 0.0 cornerB -232.4244 1162.0369 200.0 //Survivors Zone 1 LC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -1256.9427 1505.7239 0.0 cornerB -1339.8552 1401.7533 200.0 //Survivors Zone 2 LC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA -2421.9885 1909.3091 0.0 cornerB -2505.8318 1962.9353 200.0 //Survivors Zone 3 LC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1356.8033 245.7149 0.0 cornerB 1230.6315 357.2882 200.0 //Survivors Zone 4 VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 1010.0256 -1435.0776 0.0 cornerB 1159.0013 -1590.2578 200.0 //Survivors Zone 5 VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2406.4055 -99.8233 0.0 cornerB 2329.9165 -8.8584 200.0 //Survivors Zone 6 VC
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 2176.4023 -2087.9294 0.0 cornerB 2079.8772 -2214.2107 200.0 //Survivors Zone 7 VC
    then
    6@ = 0
    end       

end          
    
if 
04AD:   actor PLAYER_ACTOR in_water
    then
    6@ = 0
    end

return

:CANALS_CHECK_RADIO_MUTE_TRACK

if
PLAYER_IN_CANALS_FLAG == 1
then
Audiostream.Volume($MUSIC_ASSHOLE) = 0.0
CANALS_MUSIC_PLAY_FLAG = 0
end

return

:CANALS_CHECK_RADIO_UNMUTE_TRACK

if
PLAYER_IN_CANALS_FLAG == 1
then

/////////////////////Плавное нарастание/////////////////////
        
$MUSIC_FADE_NUMBER += 1
if
$MUSIC_FADE_NUMBER > 4
    then
    $MUSIC_FADE_NUMBER = 0 
    end    
        
0084: $MUSIC_FADE1[$MUSIC_FADE_NUMBER] = $MUSIC_ASSHOLE // (int) 
0086: $MUSIC_FADE_END_VOLUME[$MUSIC_FADE_NUMBER] = $SOUNDS_VOLUME // (float) 
        
$MUSIC_FADE_TIME[$MUSIC_FADE_NUMBER] = 100
$MUSIC_FADE_FLAG[$MUSIC_FADE_NUMBER] = 1  
$MUSIC_FADE_COUNT[$MUSIC_FADE_NUMBER] = 1 
create_thread @MUS_FAD
        
wait 1
        
while $MUSIC_FADE_ENDED[$MUSIC_FADE_NUMBER] == 0
wait 0              
end 

end

CANALS_MUSIC_PLAY_FLAG = 1

return

:GET_POS_FOR_REPAIR_SHIT

if or
car.Id(3@) == #STRETCH
car.Id(3@) == 15391
car.Id(3@) == 15263
car.Id(3@) == 15290
car.Id(3@) == 15440
car.Id(3@) == 15537
car.Id(3@) == 15435
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 4.0 0.0
else

if or
car.Id(3@) == #SECURICA
car.Id(3@) == 15386
car.Id(3@) == 15331
car.Id(3@) == 15436
car.Id(3@) == 15534
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 3.5 0.0
else
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 3.0 0.0
end

if or
car.Id(3@) == #CHEETAH
car.Id(3@) == #TURISMO
car.Id(3@) == #BULLET
car.Id(3@) == 15468
car.Id(3@) == 15502
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -3.0 0.0
end

if or
car.Id(3@) == #LINERUN
car.Id(3@) == #RDTRAIN
car.Id(3@) == #PACKER
car.Id(3@) == #DUMPER
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 5.0 0.0
end

if
car.Id(3@) == #FLATBED
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 4.5 0.0
end

if
car.Id(3@) == #COMBINE
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -2.7 0.0
end

if
car.Id(3@) == #DOZER
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -3.25 0.0
end

if or
car.Id(3@) == #BUS
car.Id(3@) == #COACH
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -6.5 0.0
end

if
car.Id(3@) == #CAMPER
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -3.0 0.0
end

if
car.Id(3@) == #HOTDOG
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -4.5 0.0
end

if or
car.Id(3@) == #HOTKNIFE
car.Id(3@) == #HUSTLER
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 2.5 0.0
end

if or
car.Id(3@) == #CADDY 
car.Id(3@) == #MOWER
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 1.5 0.0
end

if or
car.Id(3@) == #BAGGAGE
car.Id(3@) == #TUG
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 2.25 0.0
end

if
car.Id(3@) == #FORKLIFT
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -1.0 0.0
end

if or
car.Id(3@) == #SWEEPER
car.Id(3@) == #BANDITO
car.Id(3@) == #BFINJECT
car.Id(3@) == #VORTEX
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -1.5 0.0
end

if
car.Id(3@) == #KART
then
0407: store_coords_to 4@ 5@ 6@ from_car 3@ with_offset 0.0 -0.7 0.0
end

end

return        

:SHOW_FAILED_CARCHECK_MESSAGE
if
0@ < 1.0
then
//ass
else
text.ShowTextBox('INV378')
wait 1000
return
end

if
0185:  car 3@ health > 249
then 
//ass
else
text.ShowTextBox('INV380')
wait 1000
return
end

//if
//8495: not  car 3@ burning
//then 
//ass
//else
//text.ShowTextBox('INV379')
//wait 1000
//return
//end

return