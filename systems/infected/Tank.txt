const       
TNK_WALK_SOUND = 10@
TNK_YELL_SOUND = 11@
TNK_PAIN_SOUND = 11@
TNK_ATTACK_SOUND = 11@
TNK_CLIMB_SOUND = 11@
TNK_THROW_SOUND = 11@
TNK_FIRE_SOUND = 11@
TNK_DIE_SOUND = 11@
TNK_DIE_SOUND_SLOW = 25@
TNK_YELL_SOUND_FLAG = 12@
TNK_PAIN_SOUND_FLAG = 13@
TNK_ATTACK_SOUND_FLAG = 14@
TNK_THROW_SOUND_FLAG = 15@
TNK_CLIMB_SOUND_FLAG = 16@
TNK_SPAWN_SOUND_FLAG = 17@
TNK_FIRE_SOUND_FLAG = 18@
end

const  
TANK_CAR_GO_TIMER = $TANK_CAR_GO_TIMER[24@]
TANK_OBJECT_GO_TIMER = $TANK_OBJECT_GO_TIMER[24@]
TANK_CAR_GO_FLAG = $TANK_CAR_GO_FLAG[24@]
TANK_OBJECT_GO_FLAG = $TANK_OBJECT_GO_FLAG[24@]
TANK_JUMP_TIMER = $TANK_JUMP_TIMER[24@] 
TANK_JUMP_TIME2 = $TANK_JUMP_TIME2[24@] 
TANK_IDLE_TIMER = $TANK_IDLE_TIMER[24@]
TNK_BURNING_FLAG = $TNK_BURNING_FLAG[24@]
TANK_LOC_MARKER_POINTER = 23@
TANK_IDLING_TIMER = 8@
TANK_CLOSEST_PED_VAR = 27@
TANK_CLOSEST_OBJ_VAR = 27@
end

const
TANK_TASK_WAIT_TIME_MIN = 95
TANK_TASK_WAIT_TIME_MAX = 100
TANK_TASK_CRAZY_MULT = 5
TANK_TASK_CRAZY_MULT2 = 5
TANK_PROCENT_MINUS = 0.065
end

:TANK
if
0@ == 0
then
thread 'TANK'
else
gosub @TANK_NUM_GET
end

0085: 24@ = 0@ // (int)           

:TANK_SPAWN_TIMER_START 
0209: 0@ = random_int_in_ranges $TANK_WAIT_SPAWN_MIN $TANK_WAIT_SPAWN_MAX   
32@ = 0 

0209: 1@ = random_int_in_ranges 50 100
wait 1@   

:ZOMBIE_TANK_WAIT_CHECK
wait 0

while $ALLOW_TANK == 0
wait 0
end

while 001F:  24@ > TANKS_TO_SPAWN_COUNT // (int)
wait 0
end

//////////////////////////////////////////////////////////////////////////////

if
GLOBAL_SPAWN_TIMER_RANDOM_RESET_TANK == 1
then

repeat
wait 0
0209: 0@ = random_int_in_ranges $TANK_WAIT_SPAWN_MIN $TANK_WAIT_SPAWN_MAX
0209: 30@ = random_int_in_ranges $TANK_WAIT_SPAWN_MIN $TANK_WAIT_SPAWN_MAX

if
$FREEMODE == 0
then
0209: 1@ = random_int_in_ranges TIMER_RESET_LONG_ADD_MIN TIMER_RESET_LONG_ADD_MAX
else
0209: 1@ = random_int_in_ranges TIMER_RESET_LONG_ADD2_MIN TIMER_RESET_LONG_ADD2_MAX
end

0062: 30@ -= 1@  // (int)
until 801D: not  30@ > 0@  // (int)

0085: 32@ = 30@ // (int)
0AF1: write_int 30@ to_ini_file "saves\ZACM.set" section "SCR" key "TANK_NEW_TIMER_AFTER_SAVE"
0AF1: write_int 0@ to_ini_file "saves\ZACM.set" section "SCR" key "TANK_SPAWN_TIMER"
 
GLOBAL_SPAWN_TIMER_RANDOM_RESET_TANK = 0
end

//////////////////////////////////////////////////////////////////////////////

077E: get_active_interior_to 1@

if and
$GAMEMODE_EDITOR == 1
not ZAME_DO_SPAWN_SPECINF_AS_RANDOM == 1
then
32@ = 0
end

if or
$GAMEMODE_HOLD == 1
$TANK_INTERIOR_SPAWN == 1
    then
    1@ = 0
    end

if and
$SAVESTATUS == 0
$SPECIAL_INFECTED_NOT_SPAWN_FLAG == 0
$ACTOR_DEAD == 0
$INFECTED_TANK == 0
$TANK_NOTSPAWN_FLAG == 0 
$SOUND_EFFECT1_FLAG == 0
$SAVEPLACE_ON == 0
1@ == 0
    then
    if
    $ZOMBIE_TANK_SPAWN_TIMER_RESTART == 0
    jf @TANK_SPAWN_TIMER_START
    
    if or
    SURVIVAL_CUSTOM_WEAPON_NABOR == 1
    SURVIVAL_CUSTOM_WEAPON_NABOR == 8
    then
    0085: 31@ = 0@ // (int)
    31@ -= 20000
    0085: 30@ = 0@ // (int)
    30@ -= 19000
    if and
    001D:   32@ > 31@  // (int)
    801D:   32@ < 30@  // (int)
    PLAYER_IN_NEST_FLAG == 0
    PLAYER_IN_CANALS_FLAG == 0
        then        
        gosub @TANK_ORIGIN_SPOTTED_PHRASE   
        32@ += 1100     
        end
    end
    
    if or 
    001D:   32@ > 0@  // (int)
    $SPAWN_TANK_FLAG == 1
    jf @ZOMBIE_TANK_WAIT_CHECK
    32@ = 0
    
    if and
    $SPAWN_TANK_FLAG == 0
    $CUSTOM_MODE == 1
    $GAMEMODE_EDITOR == 1
    then
    jump to @TANK_SPAWN_EDITOR_OWNGAME
    end
    
    if
    $CUSTOM_MODE == 1
    then
    if or
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 1
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 2
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 3
        then
        jump to @TANK_OWNGAME_INI_IGNORE_FOR_SCRIPTED_SHIT
        end
    end
    
    if and
    not $GAMEMODE_CRAZY == 1
    not $MUTATION_ACTIVE == 12
    not $GAMEMODE_EDITOR == 1
    not $CUSTOM_MODE == 1
    not SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == -1
    not $QUEST_TYPE == 3
    then
    
    random_int 0@ 0 to 25
    if
    0@ == 12
    then
    TANKS_TO_SPAWN_COUNT = 1
    else
    TANKS_TO_SPAWN_COUNT = 0
    end        
    
    if and
    $MONTHS_PASSED >= 1
    0E4D: random_percent 10
    then
    TANKS_TO_SPAWN_COUNT += 1
    end
    
    if and
    $MONTHS_PASSED >= 2
    0E4D: random_percent 20
    then
    TANKS_TO_SPAWN_COUNT += 1
    end    
    
    if and
    $MONTHS_PASSED >= 3
    0E4D: random_percent 30
    then
    TANKS_TO_SPAWN_COUNT += 1
    end         
    
    end
    
    if and
    $CUSTOM_MODE == 1
    not SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == -1
    not $QUEST_TYPE == 3
    then
    
    if
    not $GAMEMODE_EDITOR == 1
    then   
    0AF0: 0@ = get_int_from_ini_file "saves/owngame/owngame.ini" section "DIFF" key "MINIMUM_TANKS_TO_SPAWN"
    0AF0: 1@ = get_int_from_ini_file "saves/owngame/owngame.ini" section "DIFF" key "MAXIMUM_TANKS_TO_SPAWN"
    else
    :TANK_SPAWN_EDITOR_OWNGAME
    0AD3: 2@v = format "me\ms%d.ini" $RNDM_HOUSE_BANKA[122]
    0AF0: 0@ = get_int_from_ini_file 2@v section "DIFF" key "MINIMUM_TANKS_TO_SPAWN"
    0AF0: 1@ = get_int_from_ini_file 2@v section "DIFF" key "MAXIMUM_TANKS_TO_SPAWN"
    end
    
    0@ -= 1
    if
    24@ == 0
    then
    random_int TANKS_TO_SPAWN_COUNT 0@ 1@
    
    //Автоподстройка хуйни
    0085: 2@ = 0@ // (int) //1
    0085: 3@ = 1@ // (int) //4
    0062: 3@ -= 2@  // (int) //3
    008B: 4@ = TANKS_TO_SPAWN_COUNT // (int)
    4@ += 1
    
//    0ACE: show_formatted_text_box "DRPPDCNT %d > %d (MIN) ~n~MIN %d, MAX %d, DIFF %d" 4@ 2@ 0@ 1@ 3@    
    if
    001D:   4@ > 2@  // (int) //если больше чем минимальное (например 1)
    then
    3@ *= 10 //берем разницу между максимальным и минимальным (получится 30%)
    
    if
    3@ > 90 //если больше 90 то фиксируем процент деления на два под 90
    then
    3@ = 90
    end
    
    if
    0E4D: random_percent 3@ //если выпало 30%, то сокращаем выданное число на 2 (если 3 то получим 1 если 4 то получим 2 в две трети случаев)
        then
        if
        3@ < 90 //если процент меньше 90, делим на два, если больше - на три
            then
            TANKS_TO_SPAWN_COUNT /= 2
//            0ACE: show_formatted_text_box "SPAWN_COUNT /= 2"
            else
            TANKS_TO_SPAWN_COUNT /= 3
//            0ACE: show_formatted_text_box "SPAWN_COUNT /= 3"
            end
        end
    end
    
    end
     
    jump to @ZOMBIE_TANK_SPAWN_START
    end
    
    //owngame.ini moment 
    
    :TANK_OWNGAME_INI_IGNORE_FOR_SCRIPTED_SHIT
    if
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 1
    then
    TANKS_TO_SPAWN_COUNT = 0
    end
    
    if
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 2
    then
    TANKS_TO_SPAWN_COUNT = 9
    end
    
    if
    SPEC_INF_ONLY_ONE_INSTANSE_SPAWN_FLAG == 3
    then
    TANKS_TO_SPAWN_COUNT = 1
    end
    
    if
    $QUEST_TYPE == 3
    then
    TANKS_TO_SPAWN_COUNT = 0
    end
    
    jump to @ZOMBIE_TANK_SPAWN_START
    
    else
    
    0085: 30@ = 32@ // (int)

    :ZOMBIE_TANK_TIMER_PAUSE
    wait 0    
    if
    $ZOMBIE_TANK_SPAWN_TIMER_RESTART == 0
    jf @TANK_SPAWN_TIMER_START
    
    077E: get_active_interior_to 1@
    
    if or
    $GAMEMODE_HOLD == 1
    $TANK_INTERIOR_SPAWN == 1
        then
        1@ = 0
        end
        
    if and
    $SAVESTATUS == 0
    $SPECIAL_INFECTED_NOT_SPAWN_FLAG == 0
    $ACTOR_DEAD == 0
    $INFECTED_TANK == 0
    $TANK_NOTSPAWN_FLAG == 0 
    $SOUND_EFFECT1_FLAG == 0
    $SAVEPLACE_ON == 0
    1@ == 0
        then
        0085: 32@ = 30@ // (int)
        jump to @ZOMBIE_TANK_WAIT_CHECK
        else
        jump @ZOMBIE_TANK_TIMER_PAUSE 
        end   
    end        

:ZOMBIE_TANK_SPAWN_START
wait 0
if and
$SAVESTATUS == 0
$SPECIAL_INFECTED_NOT_SPAWN_FLAG == 0
$ACTOR_DEAD == 0
$INFECTED_TANK == 0 
$ZOMBIES_PROCENT > 0.0
jf @ZOMBIE_TANK_SPAWN_START
if or
$STARTING_THEME_FLAG == 0
$GAMEMODE_EDITOR == 1
jf @ZOMBIE_TANK_SPAWN_START
if and
$TANK_INTERIOR_SPAWN == 1
$SPAWN_TANK_FLAG == 0
then
jump to @TANK_SPAWN_TIMER_START
end

//Вычисление координат для спавна
31@ = 0
gosub @TANK_COORD_SET
if
31@ == 999888666
then
jump to @TANK_SPAWN_TIMER_START
end

if and
$TANK_INTERIOR_SPAWN == 1
$SPAWN_TANK_FLAG == 0
then
jump to @TANK_SPAWN_TIMER_START
end

$TANK_SPAWNED = 1

1@ = #ZTANK

if
$TANKID_FLAG == 14733
    then    
//    0AF0: 1@ = get_int_from_ini_file "modloader\MODLOADER GLOBAL FILES\ExtraContent\New Selectable Skins\CONFIG\EXTRASKINS.ini" section "EXTRASKINS" key "TANK_ID"
    1@ = 14733          
    end

while not model.Available(1@)
wait 0
model.Load(1@)
mload
end

//0085: 0@ = 24@ // (int)
//0@ *= 200
//wait 0@

//Спавн на координатах      
                                                   
$TANK[24@] = actor.Create($ZOMBIE_SET_PEDTYPE,1@,2@,3@,4@)

if
model.Available(1@)
then
//model.Destroy(1@)
end

0860: link_actor $TANK[24@] to_interior $ACTIVE_INTERIOR

if
$GAMEMODE_VERSUS == 1
then
0D10: set_actor $TANK[24@] alpha 255 // IF and SET
end

if
$ACTIVE_INTERIOR == 0
then                                                                              
0E24: fix_char $TANK[24@] ground 1 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
else
0E24: fix_char $TANK[24@] ground 0 brightness DO_ACTORS_BRIGHT_CORR and_fade_in 1
end

//Случайный угол поворота

if
$GAMEMODE_HOLD == 1
then
actor.StorePos(PLAYER_ACTOR,4@,5@,0@)
0E27: get_angle_from_two_coords 2@ 3@ and 4@ 5@ to 0@
actor.Angle($TANK[24@]) = 0@
else
random_int 0@ 0.0 360.0
actor.Angle($TANK[24@]) = 0@
end

//Даем танку член если активирован чит-код на это
if
DICKMODE == 1
then

while not model.Available(6532)
wait 0
model.Load(6532)
mload
end

0E2E: create_render_object_to_char_bone $TANK[24@] model 6532 bone 0 offset 0.15 -0.1 0.1 rotation 0.0 60.0 0.0 store_to 0@
0E37: set_render_object_scale 0@ 3.0 3.0 3.0

end

//Стиль походки, молчание, двигание рта, неуязвимость к урону от падения

Actor.SetWalkStyle($TANK[24@],"tank") 
actor.SetImmunities($TANK[24@],0,0,0,1,0)
0A09: set_actor $TANK[24@] muted 1 // versionB
0967: actor $TANK[24@] move_mouth 99999999 ms

//Установление ХП

008B: 0@ = $TANK_HEALTH // (int)
if
$GAMEMODE_VERSUS == 0
then
0093: 0@ = integer 0@ to_float
random_float 1@ 0.85 1.25 
006B: 0@ *= 1@  // (float)  
0092: 0@ = float 0@ to_integer
end

actor.Health($TANK[24@]) = 0@
08AF: set_actor $TANK[24@] max_health_to 0@

//Установление остальных параметров
    
0446: set_actor $TANK[24@] dismemberment_possible 0
060F: set_actor $TANK[24@] melee_accuracy_to 150.0
060B: set_actor $TANK[24@] decision_maker_to $DEC_ZOMBIE  
0946: set_actor $TANK[24@] actions_uninterupted_by_weapon_fire 1
07FE: set_actor $TANK[24@] fighting_style_to 5 moves 6
07DD: set_actor $TANK[24@] attack_rate $ZOMBIE_ATTACK_RATE // previously known as temper_to
03FE: set_actor $TANK[24@] money 0
09F4: set_actor $TANK[24@] ignore_height_difference_following_nodes $Z_IGNORE_HEIGHT
0770: set_actor $TANK[24@] target_priority 1
0ED9: set_char_ignore_damage_anims $TANK[24@] 1

if and
$GAMEMODE_HOLD == 0
$ZOMBIE_DERBY_FLAG == 0
$SALVATION_FLAG == 0
then
0648: unknown_actor $TANK[24@] task_set 100.0 // float
else

if
$HOLD_Z_TASK_SET > 0.0
then
0648: unknown_actor $TANK[24@] task_set $HOLD_Z_TASK_SET // float
else
0648: unknown_actor $TANK[24@] task_set 100.0 // float
end

end    

if
$QUEST_TYPE == 3
then
04D8: set_actor $TANK[24@] drowns_in_water 0
end

//Установление скорости поворота

0A96: 0@ = actor $TANK[24@] struct
0A8E: 0@ = 0@ + 1376
0A8C: write_memory 0@ size 4 value $ZOMBIE_ROTATE_SPEED virtual_protect 1

//Загрузка звука бега танка

audiostream.Release(TNK_WALK_SOUND)
TNK_WALK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\tank_sounds\tank_walk.mp3")
Audiostream.LinkToActor(TNK_WALK_SOUND, $TANK[24@])
Audiostream.Loop(TNK_WALK_SOUND,1)
audiostream.Volume(TNK_WALK_SOUND) = 0.0
Audiostream.PerformAction(TNK_WALK_SOUND, PLAY)

$TNK_TARGET[24@] = -69
$TNK_TARGET_FINDED[24@] = 0 
$TNK_TARGET_PLAYER[24@] = 0

//Проигрывания звука бактерии танка

if and
$GAMEMODE_INF == 0
$GAMEMODE_CRAZY == 0
$READING_NOTE_FLAG == 0
then                     

random_int 0@ 0 to 2
if
0@ == 0
then
19@ = Audiostream.Load("AUDIO\SOUNDS\infected_sounds\tank_sounds\tankbacteria.mp3")
else
19@ = Audiostream.Load("AUDIO\SOUNDS\infected_sounds\tank_sounds\tankbacteria2.mp3")
end

Audiostream.PerformAction(19@, PLAY)
Audiostream.Volume(19@) = $SOUNDS_VOLUME

TNK_SPAWN_SOUND_FLAG = 1

end 

//Установление флагов для звука

TNK_YELL_SOUND_FLAG = 0
TNK_PAIN_SOUND_FLAG = 0
TNK_ATTACK_SOUND_FLAG = 0
TNK_THROW_SOUND_FLAG = 0
TNK_CLIMB_SOUND_FLAG = 0
TNK_FIRE_SOUND_FLAG = 0

if
$GAMEMODE_HOLD == 1
then
TANK_LOC_MARKER_POINTER = marker.CreateAboveActor($TANK[24@])
marker.SetIconSize(TANK_LOC_MARKER_POINTER,2)
end

//Таймеры и флаги

32@ = 0
33@ = 0

TANK_CAR_GO_TIMER = 0
TANK_OBJECT_GO_TIMER = 0
TANK_CAR_GO_FLAG = 0
TANK_OBJECT_GO_FLAG = 0
TANK_JUMP_TIMER = 0
TANK_IDLING_TIMER = 0

$PLAY_TANK_MUSIC_FLAG = 1

if and
not $INFECTED_TANK == 1
$GAMEMODE_VERSUS == 1
then
create_thread @NKT_VRS
end

TNK_BURNING_FLAG = 0 

0084: TANK_JUMP_TIME2 = $TANK_JUMP_TIME // (int) 
008D: TANK_JUMP_TIME2 = integer TANK_JUMP_TIME2 to_float
random_int 0@ $TANK_JUMP1_MIN $TANK_JUMP1_MAX
006D: TANK_JUMP_TIME2 *= 0@ // (float)     
008C: TANK_JUMP_TIME2 = float TANK_JUMP_TIME2 to_integer

//Создание маркера при необходимости

if
$GAMEMODE_EDITOR == 0
then
0@ = 1
else
0@ = 10
end

if or
$GAMEMODE_VERSUS == 1
$GAMEMODE_CRAZY == 1
003C:   SPEC_INFECTED_MARKER_FLAG == 0@  // (int)
    then
    TANK_LOC_MARKER_POINTER = marker.CreateAboveActor($TANK[24@])    
    
    if
    $GAMEMODE_CRAZY == 1
    then
    marker.SetIconSize(TANK_LOC_MARKER_POINTER,2)
    else
    marker.SetIconSize(TANK_LOC_MARKER_POINTER,2)
    end
    
    if
    $INF_SIDE == 1
    then
    $SPECIAL_INF_MARKER_TYPE = 1
    end
    
    07E0: set_marker TANK_LOC_MARKER_POINTER type_to $SPECIAL_INF_MARKER_TYPE        
    end
    
//Запрещаем целится с автоаима если мы играем за зараженных в сражении    
    
if
$INF_SIDE == 1
    then
    0568: set_actor $TANK[24@] untargetable 1
    end
    
//Вырубаем скриптовый призыв спеца (если он был так вызван) с задержкой в 1 кадр чтобы правильно отработать спавн нескольких    

if
$SPAWN_TANK_FLAG == 1
then    
wait 0
$SPAWN_TANK_FLAG = 0
end        
    
//Рандомизация множителя скорости    
    
random_float 9@ 0.9 1.2

0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "TANK_SPAWNED"

if
$ZOMBIES_HORDE == 1
then
gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
end

//TEST GOVNA S PUSHKOI
//actor.Health($TANK[24@]) = 9999999
//0687: clear_actor $TANK[24@] task
//
//while true
//wait 0
//1@ = actor.Health($TANK[24@])
//0AD1: show_formatted_text_highpriority "TANKS HEALTH IS %d" time 100 1@
//end

//////////////////////////////////////////ОСНОВНОЙ ЛУП AI ТАНКА//////////////////////////////////////////  

WHILE TRUE

/////////////////////Функция атаки танка союзниками/////////////////////
random_int 0@ 0 5            
gosub @TANK1_ATTACK_PEOPLE1    

if and
not $GAME_SPEED == 0.0
not $GAME_SPEED == 0.2
then
TANK_CAR_GO_TIMER += 1
TANK_OBJECT_GO_TIMER += 1
TANK_JUMP_TIMER += 1
TANK_IDLING_TIMER += 1
end

/////////////////////Ускорение некоторых анимаций/////////////////////

0089: 0@ = $TANK_RUN_SPEED // (float)
006B: 0@ *= 9@  // (float)         

if
0611: actor $TANK[24@] performing_animation "tank_run"
    then
    0393: actor $TANK[24@] perform_animation "tank_run" at 0@ times_normal_rate  
end     

/////////////////////Анти-приседание танка/////////////////////  

if
056D:   actor $TANK[24@] defined
    then    
    if and
    0184:   actor $TANK[24@] health > 0
    0597:   actor $TANK[24@] crouching
        then
        0687: clear_actor $TANK[24@] task    
        random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
        if
        $GAMEMODE_CRAZY == 1
        then
        0@ *= TANK_TASK_CRAZY_MULT
        0085: 1@ = 24@ // (int)
        1@ *= TANK_TASK_CRAZY_MULT2
        wait 1@
        end
        wait 0@
        wait 24@    
        04EB: AS_actor $TANK[24@] crouch 0
        end
    end  
    
/////////////////////Анти-EV_step зомби/////////////////////  

if
056D:   actor $TANK[24@] defined
    then
    if and
    0184:   actor $TANK[24@] health > 0
    actor.Animation($TANK[24@]) == "EV_step"
        then
        0687: clear_actor $TANK[24@] task
        random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
        if
        $GAMEMODE_CRAZY == 1
        then
        0@ *= TANK_TASK_CRAZY_MULT
        0085: 1@ = 24@ // (int)
        1@ *= TANK_TASK_CRAZY_MULT2
        wait 1@
        end
        wait 0@
        wait 24@  
        05B9: AS_actor $TANK[24@] stay_idle 1 ms
        end
    end        

/////////////////////Удаление танка из-за отдаленности от игрока/////////////////////  

if and 
$SALVATION_FLAG == 1
not $GAMEMODE_HOLD == 1
    then
    if or
    00A4:   actor $TANK[24@] sphere 0 in_cube_cornerA 2073.3845 2380.2268 0.0182 cornerB 2128.3105 2453.5974 71.0182
    00A4:   actor $TANK[24@] sphere 0 in_cube_cornerA -677.2523 2188.7173 0.6579 cornerB -1122.2512 2575.1035 140.6579
    00A4:   actor $TANK[24@] sphere 0 in_cube_cornerA -224.533 1412.8806 0.9365 cornerB -403.4329 1613.0549 73.9365
    00A4:   actor $TANK[24@] sphere 0 in_cube_cornerA 1844.0953 -2359.5444 0.9365 cornerB 1657.6227 -2198.2236 22.5234
        then        
        jump to @TNK_REM
        end
    end
    
if
$TANK_REMOVE_FLAG == 1
    then
    jump to @TNK_REM
    end    

if and
$ACTIVE_INTERIOR == 0
not $INT_ENTERING_FLAG == 1
not $TANK_INTERIOR_SPAWN == 1
    then
    
    if and
    TANK_DELETE_FLAG == 0
    $TANK_REMOVE_FLAG == 0
    $SAVESTATUS == 0
    $SAVESTATUS_TRUE == 0 
    0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 180.0 180.0 180.0 sphere 0
        then 
        else
    
        :TNK_REM
        
        0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "TANK_SPAWNED"
        
        gosub @TANK_SHUT_UP
        
        audiostream.PerformAction(TNK_WALK_SOUND, STOP)
        audiostream.Release(TNK_WALK_SOUND)
        
        if
        075C:   marker TANK_LOC_MARKER_POINTER enabled
        then
        marker.Disable(TANK_LOC_MARKER_POINTER)
        end
         
        actor.DestroyWithFade($TANK[24@])
        $TANK[24@] = -69
        
        ////////////////////////
        
        1@ = 0
        
        for 0@ = 0 to 19
        
        if
        056D:   actor $TANK[0@] defined
        then
        1@ = 1
        end
        
        end
        
        ////////////////////////
        
        if
        1@ == 0
        then
        $PLAY_TANK_MUSIC_FLAG = 0
        $TANK_SPAWNED = 0    
        end
        
        ////////////////////////                                    
        
        if and
        not $GAMEMODE_CRAZY == 1
        not $MUTATION_ACTIVE == 12
        TANKS_TO_SPAWN_COUNT > 0
        then
        TANKS_TO_SPAWN_COUNT = 0
        end
        
        $HORDE_TIMER_COUNTER += 9999999
        jump to @TANK_SPAWN_TIMER_START
        
        end    
    end

if or
$SAVESTATUS == 1
$SAVESTATUS_TRUE == 1
then
jump to @TNK_REM
end   

/////////////////////Удаление танка при его смерти/////////////////////  

if or
actor.Dead($TANK[24@])
8184:   actor $TANK[24@] health < 1
    then
    
    create_thread @ANTKUKL $TANK[24@]
    
    ///////////////////////////////////////////////////       

    if or
    0818:  actor $TANK[24@] in_air
    TNK_BURNING_FLAG == 1
    then
    0687: clear_actor $TANK[24@] task
    05BE: AS_actor $TANK[24@] die 
    end    
    
    0AF1: write_int 0 to_ini_file "saves/ZACM.set" section "SCR" key "TANK_SPAWNED"        
    
    0A96: 0@ = actor $TANK[24@] struct
    0A8E: 0@ = 0@ + 0x764
    0A8D: 1@ = read_memory 0@ size 2 virtual_protect 1
    0A8D: 2@ = read_memory 0xB6F5F0 size 2 virtual_protect 1
    
    audiostream.Release(TNK_WALK_SOUND)    
    
    if
    075C:   marker TANK_LOC_MARKER_POINTER enabled
    then
    marker.Disable(TANK_LOC_MARKER_POINTER)
    end        
    
    if and
    not $GAMEMODE_CRAZY == 1
    not $MUTATION_ACTIVE == 12
    TANKS_TO_SPAWN_COUNT > 0
    then
    TANKS_TO_SPAWN_COUNT = 0
    end
    
    $HORDE_TIMER_COUNTER += 9999999      
    
    if
    $FREEMODE == 1
    then
    $ZOMBIES_PROCENT -= TANK_PROCENT_MINUS    
    end    
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    if
    not $GAMEMODE_CRAZY == 1
    then
    0085: 1@ = 2@ // (int)
    end
    
    if
    0800:   in_two_players_mode
    then
    0A8D: 0@ = read_memory 0xB7CF28 size 2 virtual_protect 1
    else
    0@ = -69
    end
    
    if or
    003B:   1@ == 2@  // (int)
    003B:   1@ == 0@  // (int)    
    then
    
    $TANK_KILLED += 1
    $TEMP_XP = TANK_XP_PLUS
    $SLOW_BAR += TANK_SLOWMODE_PLUS
//    0068: $TEMP_XP *= $PLAYER_LEVEL // (int)
    008D: $TEMP_XP = integer $TEMP_XP to_float
    0069: $TEMP_XP *= $XP_COEFF // (float)
    008C: $TEMP_XP = float $TEMP_XP to_integer
    0058: $PLAYER_XP += $TEMP_XP // (int)
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TANK_KILLED"    
    
    if and
    $CHEATED_FLAG == 0 
    $GAMEMODE_CRAZY == 0
    not $MUTATION_ACTIVE == 12
    then              
    0@ += 1
    end                
     
    0AF1: write_int 0@ to_ini_file "saves/ZACM.set" section "SCR" key "STATS_TANK_KILLED"
    
    end
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////
                
    0AF0: 1@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT35_GOT"
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "STATS_TANK_KILLED"    
    
    if and
    1@ == 0
    0@ >= 200
    then
    v$ACHIEVEMNT = "ACH35"
    $ACHIEVEMENT_GOT_FLAG = 1        
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT35_GOT"        
    end    
    
    0AF0: 0@ = get_int_from_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT11_GOT"    
    
    if or
    02D8:   actor PLAYER_ACTOR current_weapon == 9
    02D8:   actor PLAYER_ACTOR current_weapon == 131
    02D8:   actor PLAYER_ACTOR current_weapon == 164
    02D8:   actor PLAYER_ACTOR current_weapon == 194
    then
    
    if and
    0@ == 0    
    051A:   actor $TANK[24@] damaged_by_actor PLAYER_ACTOR
    $CHEATED_FLAG == 0
    then
    v$ACHIEVEMNT = "ACH11"
    $ACHIEVEMENT_GOT_FLAG = 1            
    0AF1: write_int 1 to_ini_file "saves/ZACM.set" section "SCR" key "ACHIEVEMENT11_GOT"            
    end
       
    end
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////
    
    if
    89A8: not  actor $TANK[24@] headshoted
    then    
    gosub @TANK_DIE_SOUND
    else
    gosub @TANK_SHUT_UP
    end
    
    actor.RemoveReferences($TANK[24@])
    $TANK[24@] = -69
    
    ////////////////////////
    
    1@ = 0
    
    for 0@ = 0 to 19
    
    if
    056D:   actor $TANK[0@] defined
    then
    1@ = 1
    end
    
    end
    
    ////////////////////////
    
    if
    1@ == 0
    then
    $PLAY_TANK_MUSIC_FLAG = 0
    $TANK_SPAWNED = 0    
    end                   
    
    /////////////////////////////////////////////////////////////////////////////////////////////////////////    
      
    if
    $GAMEMODE_INF == 1
    then        
    $SURVIVERS_SCORE += 15    
    00BA: show_text_styled GXT 'G_INF12' time 2500 style 5    
    end        
    
    jump to @TANK_SPAWN_TIMER_START
         
    end       

///////////////////Выгрузка звуков YELL///////////////////    
    
if
TNK_YELL_SOUND_FLAG == 1
    then
    0AB9: get_mp3 TNK_YELL_SOUND state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(TNK_YELL_SOUND)
        TNK_YELL_SOUND_FLAG = 0
        end
    end

///////////////////Выгрузка звуков PAIN///////////////////  
    
if
TNK_PAIN_SOUND_FLAG == 1
    then
    0AB9: get_mp3 TNK_PAIN_SOUND state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(TNK_PAIN_SOUND)
        TNK_PAIN_SOUND_FLAG = 0
        end
    end
    
///////////////////Выгрузка звуков ATTACK///////////////////  

if
TNK_ATTACK_SOUND_FLAG == 1
    then
    0AB9: get_mp3 TNK_ATTACK_SOUND state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(TNK_ATTACK_SOUND)
        TNK_ATTACK_SOUND_FLAG = 0
        end
    end
    
///////////////////Выгрузка звуков THROW///////////////////  

if
TNK_THROW_SOUND_FLAG == 1
    then
    0AB9: get_mp3 TNK_THROW_SOUND state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(TNK_THROW_SOUND)
        TNK_THROW_SOUND_FLAG = 0
        end
    end
    
///////////////////Выгрузка звуков CLIMB///////////////////  

if
TNK_CLIMB_SOUND_FLAG == 1
    then
    0AB9: get_mp3 TNK_CLIMB_SOUND state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(TNK_CLIMB_SOUND)
        TNK_CLIMB_SOUND_FLAG = 0
        end
    end
    
///////////////////Выгрузка звуков FIRE///////////////////  

if
TNK_FIRE_SOUND_FLAG == 1
    then
    0AB9: get_mp3 TNK_FIRE_SOUND state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(TNK_FIRE_SOUND)
        TNK_FIRE_SOUND_FLAG = 0
        end
    end
    
///////////////////Выгрузка звуков SPAWN///////////////////  
    
if
TNK_SPAWN_SOUND_FLAG == 1
    then
    0AB9: get_mp3 19@ state_to 0@
    if or
    0@ == -1
    not $GAME_SPEED == 1.0
        then
        audiostream.Release(19@)
        TNK_SPAWN_SOUND_FLAG = 0
        end        
    end        
    
///////////////////Воспроизведение звука FIRE///////////////////    
    
if and
TNK_FIRE_SOUND_FLAG == 0
TNK_CLIMB_SOUND_FLAG == 0
TNK_BURNING_FLAG == 1
$GAME_SPEED == 1.0   
    then
    gosub @TANK_SHUT_UP    
    gosub @TANK_RANDOM_FIRE_SOUND
    Audiostream.LinkToActor(TNK_FIRE_SOUND, $TANK[24@])
    Audiostream.PerformAction(TNK_FIRE_SOUND, PLAY)
    Audiostream.Volume(TNK_FIRE_SOUND) = $SOUNDS_VOLUME     
    TNK_FIRE_SOUND_FLAG = 1                  
    end
    
///////////////////Поджигаем танка если он потушился///////////////////    

if and
TNK_BURNING_FLAG == 0  
074F:  actor $TANK[24@] ped_event == 58  
84AD: not  actor $TANK[24@] in_water
    then
    random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
    if
    $GAMEMODE_CRAZY == 1
    then
    0@ *= TANK_TASK_CRAZY_MULT
    0085: 1@ = 24@ // (int)
    1@ *= TANK_TASK_CRAZY_MULT2
    wait 1@
    end
    wait 0@
    wait 24@   
    TNK_BURNING_FLAG = 1 
    0792: disembark_instantly_actor $TANK[24@]
    actor.SetImmunities($TANK[24@],0,1,0,1,0)
    0326: 21@ = create_actor $TANK[24@] fire    
    end

    
if and
TNK_BURNING_FLAG == 1
8973: not  fire 21@ exists
84AD: not  actor $TANK[24@] in_water
    then
    random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
    if
    $GAMEMODE_CRAZY == 1
    then
    0@ *= TANK_TASK_CRAZY_MULT
    0085: 1@ = 24@ // (int)
    1@ *= TANK_TASK_CRAZY_MULT2
    wait 1@
    end
    wait 0@
    wait 24@   
    TNK_BURNING_FLAG = 1 
    actor.SetImmunities($TANK[24@],0,1,0,1,0)
    0326: 21@ = create_actor $TANK[24@] fire
    end   
    
if and
TNK_BURNING_FLAG == 1
not BLACK_MENU_OPENED_FLAG == 1
    then    
    if or
    $GAME_SPEED == 1.0
    $GAME_SPEED == 0.2
    $GAME_SPEED == 0.99
        then        
        0@ = actor.Health($TANK[24@])
        
        if
        0@ < 1
        then
        05BE: AS_actor $TANK[24@] die
        end
        
        0D39: 1@ = actor $TANK[24@] max_health
        1@ /= 1000.0
        0092: 1@ = float 1@ to_integer                     
                                              
        0062: 0@ -= 1@  // (int)
        actor.Health($TANK[24@]) = 0@        
        end        
    end     
    
///////////////////Воспроизведение звука PAIN///////////////////    
    
if and
TNK_PAIN_SOUND_FLAG == 0
TNK_CLIMB_SOUND_FLAG == 0
TNK_BURNING_FLAG == 0
$GAME_SPEED == 1.0    
    then
    28@ = Actor.Health($TANK[24@])
    wait 10
    29@ = Actor.Health($TANK[24@]) 
    if
    803B: not  28@ == 29@ // (int)  
        then
        
        /////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        0A96: 0@ = actor $TANK[24@] struct
        0A8E: 0@ = 0@ + 0x764
        0A8D: 1@ = read_memory 0@ size 2 virtual_protect 1
        0A8D: 2@ = read_memory 0xB6F5F0 size 2 virtual_protect 1
        
        /////////////////////////////////////////////////////////////////////////////////////////////////////////
    
        if
        not $GAMEMODE_CRAZY == 1
        then
        0085: 1@ = 2@ // (int)
        end
        
        if
        0800:   in_two_players_mode
        then
        0A8D: 0@ = read_memory 0xB7CF28 size 2 virtual_protect 1
        else
        0@ = -69
        end
        
        if or
        003B:   1@ == 2@  // (int)
        003B:   1@ == 0@  // (int)    
        then
        $SLOW_BAR += TANK_DMG_SLOWMODE_PLUS
        end
        
        /////////////////////////////////////////////////////////////////////////////////////////////////////////
        
        gosub @TANK_SHUT_UP        
        gosub @TANK_RANDOM_PAIN_SOUND
        Audiostream.LinkToActor(TNK_PAIN_SOUND, $TANK[24@])
        Audiostream.PerformAction(TNK_PAIN_SOUND, PLAY)
        Audiostream.Volume(TNK_PAIN_SOUND) = $SOUNDS_VOLUME
        TNK_PAIN_SOUND_FLAG = 1
        
        if
        031D:   actor $TANK[24@] hit_by_weapon 109
        then
        create_thread @TSPC_IN $TANK[24@] 140
        end
        
        end
    else
    wait 10
    
    if
    031D:   actor $TANK[24@] hit_by_weapon 109
    then
    create_thread @TSPC_IN $TANK[24@] 140
    end
    
    end
    
///////////////////Воспроизведение звука YELL///////////////////    
    
if and
TNK_PAIN_SOUND_FLAG == 0
TNK_CLIMB_SOUND_FLAG == 0
TNK_YELL_SOUND_FLAG == 0
TNK_BURNING_FLAG == 0
$GAME_SPEED == 1.0
874F:  actor $TANK[24@] ped_event == 58
    then
    0209: 31@ = random_int_in_ranges 0 10
    if and
    00F2:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 100.0 100.0 0
    31@ == 5
    82A0:   actor $TANK[24@] stopped   
    not actor.Animation($TANK[24@]) == "FIGHT22"
        then
        gosub @TANK_SHUT_UP        
        gosub @TANK_RANDOM_YELL_SOUND
        Audiostream.LinkToActor(TNK_YELL_SOUND, $TANK[24@])
        Audiostream.PerformAction(TNK_YELL_SOUND, PLAY)
        Audiostream.Volume(TNK_YELL_SOUND) = $SOUNDS_VOLUME
        TNK_YELL_SOUND_FLAG = 1
        end
    end
    
/////////////////////Проверка на то, видит ли танк свою цель/////////////////////

if and
TANK_IDLING_TIMER > 52
$TNK_TARGET_FINDED[24@] == 1
    then                
    TANK_IDLING_TIMER = 0
    if
    056D:   actor $TNK_TARGET[24@] defined
        then                
        if
        0364:   actor $TANK[24@] spotted_actor $TNK_TARGET[24@]
            then
            0648: unknown_actor $TANK[24@] task_set 100.0 // float
            else
            0648: unknown_actor $TANK[24@] task_set 50.0 // float
            end
        end                
    end    
    
/////////////////////Проверка на бездействие танка/////////////////////     

if or
$ACTIVE_INTERIOR == 0
$TANK_INTERIOR_SPAWN == 1
then
if and   
not actor.Animation($TANK[24@]) == "tank_run"
0E45: frame_mod 30   
    then
    06AC: 0@ = actor $TANK[24@] movement_speed       
    if or
    0@ < 0.001   
    actor.Animation($TANK[24@]) == "tank_idle"
    actor.Animation($TANK[24@]) == "flee_lkaround_01"
        then      
        gosub @TANK_CHECK_ATTACK_TARGET_EXSIST  
        end
    end
end        
    
/////////////////////Проверка на наличие цели атаки///////////////////// 

if and
056D:   actor $TANK[24@] defined
$TNK_TARGET_FINDED[24@] == 1
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
    then    
    if
    056D:   actor $TNK_TARGET[24@] defined
        then        
        
        if
        DEBUG_OPPCODE_FLAG == 1
        then
        
        DEBUG_STRING_NUMBER += 1
        0AD3: v$DEBUG_FILE10 = format "TK%d" DEBUG_STRING_NUMBER
        if
        DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
        then
        0B00: delete_file "debug\debug.ini"  // IF and SET
        DEBUG_STRING_NUMBER = 0
        end
        0AF1: write_int $TNK_TARGET[24@] to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE10
        
        end
        
        if or
        8184:   actor $TNK_TARGET[24@] health < 1
        80F2: not  actor $TANK[24@] near_actor $TNK_TARGET[24@] radius 110.0 110.0 sphere 0
        actor.Dead($TNK_TARGET[24@]) 
        04AD:  actor $TNK_TARGET[24@] in_water       
        33@ > 60000           
            then
            $TNK_TARGET[24@] = -69 
            $TNK_TARGET_FINDED[24@] = 0
            $TNK_TARGET_PLAYER[24@] = 0
            33@ = 0  
            end
        else
        $TNK_TARGET[24@] = -69
        $TNK_TARGET_FINDED[24@] = 0
        $TNK_TARGET_PLAYER[24@] = 0
        33@ = 0  
        end
    end          
    
/////////////////////Проверка на близость цели не игрока/////////////////////
 
if and
$TNK_TARGET_FINDED[24@] == 1
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
    then
    if
    $TNK_TARGET_PLAYER[24@] == 0
        then
        if and
        056D:   actor $TNK_TARGET[24@] defined
        056D:   actor $TANK[24@] defined  
            then   
            if
            0104: actor $TNK_TARGET[24@] near_actor $TANK[24@] radius 2.0 2.0 2.0 sphere 0
                then
                gosub @TANK_CLIMB_CHECK
                if and
                0364:   actor $TANK[24@] spotted_actor $TNK_TARGET[24@]
                8E48: not is_char_fallen_on_ground $TANK[24@]
                not 0@ == 1
                    then
                    
                    if and
                    UNITED_MAP == 0
                    actor.DrivingVehicleType($TNK_TARGET[24@],15426)
                    then
                    jump to @TANK_QUAD3_SA_JUMP1
                    end
                    
                    if or
                    not actor.Driving($TNK_TARGET[24@])
                    047A:   actor $TNK_TARGET[24@] driving_bike
                    actor.DrivingVehicleType($TNK_TARGET[24@],#QUAD)
                    actor.DrivingVehicleType($TNK_TARGET[24@],15558)
                        then
                        :TANK_QUAD3_SA_JUMP1
                        if and 
                        89DE: not  actor $TNK_TARGET[24@] entering_car
                        0184:   actor $TANK[24@] health > 0
                        32@ > 1000
                            then
                            32@ = 0
                            
                            if
                            003A:   $TNK_TARGET[24@] == COOP_ACTOR // (int)
                            then
                            gosub @DISEMB_JETP_CHECK_2P
                            end
                            
                            0792: disembark_instantly_actor $TNK_TARGET[24@]                                           
                            0687: clear_actor $TANK[24@] task    
                            random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
                            wait 0@
                            wait 24@
                            if
                            056D:   actor $TNK_TARGET[24@] defined 
                                then
                                audiostream.Volume(TNK_WALK_SOUND) = 0.0   
                                0A1A: actor $TANK[24@] perform_walk_animation "FIGHT22" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 670 ms // versionC
                                
                                if
                                003A:   $TNK_TARGET[24@] == COOP_ACTOR // (int)
                                then
                                008B: 0@ = $TANK_DAMAGE // (int)
                                else
                                008B: 0@ = $TANK_PEOPLE_DAMAGE // (int)
                                end
                                
                                0093: 0@ = integer 0@ to_float
                                random_float 1@ 0.85 1.15 
                                006B: 0@ *= 1@  // (float)  
                                0092: 0@ = float 0@ to_integer                             
                                
                                if or
                                003A:   $TNK_TARGET[24@] == $SURVIVER[0] // (int)
                                003A:   $TNK_TARGET[24@] == $SURVIVER[1] // (int)
                                003A:   $TNK_TARGET[24@] == $SURVIVER[2] // (int)
                                003A:   $TNK_TARGET[24@] == $SURVIVER[3] // (int)
                                003A:   $TNK_TARGET[24@] == $SURVIVER[4] // (int)
                                then
                                
                                for 2@ = 0 to 4
                                if
                                003A:   $TNK_TARGET[24@] == $SURVIVER[2@] // (int)
                                    then
                                    1@ = actor.Health($SURVIVER[2@])
                                    0062: 1@ -= 0@  // (int)
                                    
                                    if and
                                    $SURVIVOR_HEAL_COUNT[2@] < 1
                                    $SURVIVOR_BINT_COUNT[2@] < 1
                                    then
                                    1@ = 1000
                                    end
                                    
                                    if
                                    1@ < 1
                                        then
                                        actor.Health($SURVIVER[2@]) = 100
//                                        0AD1: show_formatted_text_highpriority "penis heal" time 2000
                                        else
                                        0851: set_actor $TNK_TARGET[24@] decrease_health_by 0@ affect_armour 1
                                        end
                                    end
                                end
                                
                                else
                                0851: set_actor $TNK_TARGET[24@] decrease_health_by 0@ affect_armour 1 
                                end
                                
                                05C1: AS_actor $TNK_TARGET[24@] speak_from_audio_table 346
                                05BB: AS_actor $TNK_TARGET[24@] fall_down 0 time_on_ground 100
                                09F1: play_audio_at_actor $TNK_TARGET[24@] event 1130                                
                                
                                if
                                $GAME_SPEED == 1.0
                                then
                                gosub @TANK_SHUT_UP        
                                gosub @TANK_RANDOM_ATTACK_SOUND
                                Audiostream.LinkToActor(TNK_ATTACK_SOUND, $TANK[24@])
                                Audiostream.PerformAction(TNK_ATTACK_SOUND, PLAY)
                                Audiostream.Volume(TNK_ATTACK_SOUND) = $SOUNDS_VOLUME
                                TNK_ATTACK_SOUND_FLAG = 1
                                end
                                
                                actor.StorePos($TNK_TARGET[24@], 1@, 2@, 3@) 
                                04C4: store_coords_to 4@ 5@ 6@ from_actor $TNK_TARGET[24@] with_offset 0.0 -20.0 30.0 
                                0063: 4@ -= 1@  // (float) 
                                0063: 5@ -= 2@  // (float) 
                                0063: 6@ -= 3@  // (float) 
                                083C: set_actor $TNK_TARGET[24@] velocity_in_direction_XYZ 4@ 5@ 6@
                                
                                $TNK_TARGET[24@] = -69
                                $TNK_TARGET_FINDED[24@] = 0
                                $TNK_TARGET_PLAYER[24@] = 0
                                
                                33@ = 0
                            
                                repeat
                                wait 0
                                        
                                if or
                                actor.Dead($TANK[24@])
                                $SAVESTATUS == 1
                                then
                                break
                                end
                                        
                                until 33@ > 670
                                
                                33@ = 0
                                
                                gosub @TANK_RADIKULIT_PROTECTION
                                
                                gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
                                
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
/////////////////////Проверка на близость любой сущности/////////////////////
 
if and
0E45: frame_mod 5
056D:   $TANK[24@] defined
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
    then
    actor.StorePos($TANK[24@],0@,1@,2@)
    0AE1: TANK_CLOSEST_PED_VAR = random_actor_near_point 0@ 1@ 2@ in_radius 5.0 find_next 1 pass_deads 0
    if
    056D:   actor TANK_CLOSEST_PED_VAR defined
        then
        089F: get_actor TANK_CLOSEST_PED_VAR pedtype_to 0@
        
        if
        $ZOMBIEORGY_MODE_FLAG == 1
        then
        0@ = 0
        end
        
        if and        
        056D:   actor $TANK[24@] defined
        not 0@ == 23
        87D6: not  TANK_CLOSEST_PED_VAR == PLAYER_ACTOR // @ == $ (int)
        87D6: not  TANK_CLOSEST_PED_VAR == $VOICE_ACTOR // @ == $ (int)
        87D6: not  TANK_CLOSEST_PED_VAR == $TANK[24@] // @ == $ (int)
        not actor.Dead(TANK_CLOSEST_PED_VAR)  
            then   
            if
            0104: actor TANK_CLOSEST_PED_VAR near_actor $TANK[24@] radius 2.0 2.0 2.0 sphere 0
                then
                gosub @TANK_CLIMB_CHECK
                if and
                0364:   actor $TANK[24@] spotted_actor TANK_CLOSEST_PED_VAR
                not actor.Animation(TANK_CLOSEST_PED_VAR) == "FLOOR_hit"
                not actor.Animation(TANK_CLOSEST_PED_VAR) == "FLOOR_hit_f"
                not actor.Animation($TANK[24@]) == "FLOOR_hit"
                not actor.Animation($TANK[24@]) == "FLOOR_hit_f"
                8E48: not is_char_fallen_on_ground $TANK[24@]
                not 0@ == 1
                    then
                    
                    if and
                    UNITED_MAP == 0
                    actor.DrivingVehicleType(TANK_CLOSEST_PED_VAR,15426)
                    then
                    jump to @TANK_QUAD3_SA_JUMP2
                    end
                    
                    if or
                    not actor.Driving(TANK_CLOSEST_PED_VAR)
                    047A:   actor TANK_CLOSEST_PED_VAR driving_bike
                    actor.DrivingVehicleType(TANK_CLOSEST_PED_VAR,#QUAD)
                    actor.DrivingVehicleType(TANK_CLOSEST_PED_VAR,15558)
                        then
                        :TANK_QUAD3_SA_JUMP2
                        if and
                        89DE: not  actor TANK_CLOSEST_PED_VAR entering_car
                        0184:   actor $TANK[24@] health > 0
                            then      
                            
                            if
                            07D6:   TANK_CLOSEST_PED_VAR == COOP_ACTOR // @ == $ (int)
                            then
                            gosub @DISEMB_JETP_CHECK_2P
                            end
                                              
                            0792: disembark_instantly_actor TANK_CLOSEST_PED_VAR                          
                            0687: clear_actor $TANK[24@] task
                            random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
                            wait 0@
                            wait 24@
                            if
                            056D:   actor TANK_CLOSEST_PED_VAR defined 
                                then
                                audiostream.Volume(TNK_WALK_SOUND) = 0.0     
                                0A1A: actor $TANK[24@] perform_walk_animation "FIGHT22" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 670 ms // versionC
                                
                                if
                                07D6:   TANK_CLOSEST_PED_VAR == COOP_ACTOR // @ == $ (int)
                                then
                                008B: 0@ = $TANK_DAMAGE // (int)
                                else
                                008B: 0@ = $TANK_PEOPLE_DAMAGE // (int)
                                end
                                
                                0093: 0@ = integer 0@ to_float
                                random_float 1@ 0.85 1.15 
                                006B: 0@ *= 1@  // (float)  
                                0092: 0@ = float 0@ to_integer                             
                                
                                if or
                                07D6:   TANK_CLOSEST_PED_VAR == $SURVIVER[0] // (int)
                                07D6:   TANK_CLOSEST_PED_VAR == $SURVIVER[1] // (int)
                                07D6:   TANK_CLOSEST_PED_VAR == $SURVIVER[2] // (int)
                                07D6:   TANK_CLOSEST_PED_VAR == $SURVIVER[3] // (int)
                                07D6:   TANK_CLOSEST_PED_VAR == $SURVIVER[4] // (int)
                                then
                                
                                for 2@ = 0 to 4
                                if
                                07D6:   TANK_CLOSEST_PED_VAR == $SURVIVER[2@] // (int)
                                    then
                                    1@ = actor.Health($SURVIVER[2@])
                                    0062: 1@ -= 0@  // (int)
                                    
                                    if and
                                    $SURVIVOR_HEAL_COUNT[2@] < 1
                                    $SURVIVOR_BINT_COUNT[2@] < 1
                                    then
                                    1@ = 1000
                                    end
                                    
                                    if
                                    1@ < 1
                                        then
                                        actor.Health($SURVIVER[2@]) = 100
//                                        0AD1: show_formatted_text_highpriority "penis heal" time 2000
                                        else
                                        0851: set_actor TANK_CLOSEST_PED_VAR decrease_health_by 0@ affect_armour 1
                                        end
                                    end
                                end
                                
                                else
                                0851: set_actor TANK_CLOSEST_PED_VAR decrease_health_by 0@ affect_armour 1 
                                end
                                
                                05C1: AS_actor TANK_CLOSEST_PED_VAR speak_from_audio_table 346
                                05BB: AS_actor TANK_CLOSEST_PED_VAR fall_down 0 time_on_ground 100
                                09F1: play_audio_at_actor TANK_CLOSEST_PED_VAR event 1130                                
                                
                                if
                                $GAME_SPEED == 1.0
                                then
                                gosub @TANK_SHUT_UP        
                                gosub @TANK_RANDOM_ATTACK_SOUND
                                Audiostream.LinkToActor(TNK_ATTACK_SOUND, $TANK[24@])
                                Audiostream.PerformAction(TNK_ATTACK_SOUND, PLAY)
                                Audiostream.Volume(TNK_ATTACK_SOUND) = $SOUNDS_VOLUME
                                TNK_ATTACK_SOUND_FLAG = 1
                                end
                                
                                actor.StorePos(TANK_CLOSEST_PED_VAR, 1@, 2@, 3@) 
                                04C4: store_coords_to 4@ 5@ 6@ from_actor TANK_CLOSEST_PED_VAR with_offset 0.0 -20.0 30.0 
                                0063: 4@ -= 1@  // (float) 
                                0063: 5@ -= 2@  // (float) 
                                0063: 6@ -= 3@  // (float) 
                                083C: set_actor TANK_CLOSEST_PED_VAR velocity_in_direction_XYZ 4@ 5@ 6@                                
                                
                                33@ = 0
                            
                                repeat
                                wait 0
                                        
                                if or
                                actor.Dead($TANK[24@])
                                $SAVESTATUS == 1
                                then
                                break
                                end
                                        
                                until 33@ > 670
                                
                                33@ = 0
                                
                                gosub @TANK_RADIKULIT_PROTECTION
                                
                                gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
                                  
                                end                    
                            end
                        end
                    end
                end
            end
        end
    end
    
/////////////////////Пиздинг объекта во время триггера "НУЖНО ДЛЯ OOS"/////////////////////    

if
ZAME_PROTECT_THE_OBJECT_FLAG == 2
then
if and
056D:   actor $TANK[24@] defined
056D:   actor $TNK_TARGET[24@] defined
03CA:   object ZAME_PROTECT_THE_OBJECT_OBJ exists
    then
    if and
    0184:   actor $TANK[24@] health > 0
    874F: not  actor $TANK[24@] ped_event == 33  
    8818: not  actor $TANK[24@] in_air  
    0179:   actor $TANK[24@] colliding_with_object ZAME_PROTECT_THE_OBJECT_OBJ
        then
        if
        not actor.Animation($TANK[24@]) == "FIGHT22"
            then
            
            if
            $GAME_SPEED == 1.0
            then
            gosub @TANK_SHUT_UP        
            gosub @TANK_RANDOM_ATTACK_SOUND
            Audiostream.LinkToActor(TNK_ATTACK_SOUND, $TANK[24@])
            Audiostream.PerformAction(TNK_ATTACK_SOUND, PLAY)
            Audiostream.Volume(TNK_ATTACK_SOUND) = $SOUNDS_VOLUME
            TNK_ATTACK_SOUND_FLAG = 1
            end
            
            0792: disembark_instantly_actor $TANK[24@]
            audiostream.Volume(TNK_WALK_SOUND) = 0.0
            0A1A: actor $TANK[24@] perform_walk_animation "FIGHT22" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 670 ms // versionC
            1@ = 670                                                
            0E95: simulate_object_damage ZAME_PROTECT_THE_OBJECT_OBJ damage 250.0 type 56 
            
            32@ = 0
            
            if
            0E4D: random_percent 50
            then
            Audiostream.LinkToActor(ZAME_PROTECT_THE_OBJECT_SND, $TANK[24@])
            Audiostream.PerformAction(ZAME_PROTECT_THE_OBJECT_SND, PLAY)
            Audiostream.Volume(ZAME_PROTECT_THE_OBJECT_SND) = $SOUNDS_VOLUME
            end
            
            repeat
            wait 0
            
            if
            8184:   actor $TANK[24@] health < 1
            then
            break
            end
            
            until 32@ >= 670
                        
            gosub @TANK_RADIKULIT_PROTECTION
                                
            gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
            
            end
        end
    end
end

/////////////////////Танк кидает ЕБУЧИЙ КАМЕНЬ/////////////////////
if and
056D:   $TANK[24@] defined
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
$TNK_TARGET_FINDED[24@] == 1
001C:   TANK_JUMP_TIMER > TANK_JUMP_TIME2 // (int)
    then        
    04DD: 1@ = actor $TANK[24@] armour
    if and
    056D:   actor $TNK_TARGET[24@] defined
    0184:   actor $TANK[24@] health > 0
    044B:   actor $TANK[24@] on_foot
    8818:  actor $TANK[24@] in_air
    not 1@ == 1
        then
        
        if or
        0A32:  actor $TNK_TARGET[24@] on_turret_of_car
        actor.Driving($TNK_TARGET[24@])
        then
        1@ = 120.0
        else
        1@ = 70.0
        end
        
        if and
        8EE4: not locate_char_distance_to_char $TANK[24@] char $TNK_TARGET[24@] radius 12.5
        0EE4: locate_char_distance_to_char $TANK[24@] char $TNK_TARGET[24@] radius 1@
        0364:   actor $TANK[24@] spotted_actor $TNK_TARGET[24@]
        8E48: not is_char_fallen_on_ground $TNK_TARGET[24@]
            then
            
            TANK_JUMP_TIMER = 0  
                
            0084: TANK_JUMP_TIME2 = $TANK_JUMP_TIME // (int) 
            008D: TANK_JUMP_TIME2 = integer TANK_JUMP_TIME2 to_float
            random_int 0@ $TANK_JUMP1_MIN $TANK_JUMP1_MAX
            
            //////////////////////
                            
            for 1@ = 1 to 19
                    
            if
            056D:   actor $TANK[1@] defined
            then
            1@ += 0.5
            end
                    
            end
                    
            //////////////////////
            
            006D: TANK_JUMP_TIME2 *= 0@ // (float)            
            008C: TANK_JUMP_TIME2 = float TANK_JUMP_TIME2 to_integer
            
            audiostream.Volume(TNK_WALK_SOUND) = 0.0
            0812: AS_actor $TANK[24@] perform_animation "tank_throw" IFP "PED" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 time -1 // versionB
            
            ///////////////////////////////////////////////////////////////////////////////

            if
            not $PEOPLE_DONT_ATTACK == 1
            then

            092B: 4@ = group PLAYER_GROUP member 0
            092B: 5@ = group PLAYER_GROUP member 1
            092B: 6@ = group PLAYER_GROUP member 2
            092B: 26@ = group PLAYER_GROUP member 3
            092B: 27@ = group PLAYER_GROUP member 4
            
            ///////////////////////////////////////////////////////////////////////////////
            
            if and
            $MISSION14_ACTIVE == 1
            07D6:   4@ == $SURVIVER[0] // @ == $ (int)
            then
            4@ = -69
            end
                            
            if and
            $MISSION14_ACTIVE == 2
            07D6:   4@ == $SURVIVER[0] // @ == $ (int)
            then
            4@ = -69
            end
            
            if and
            $MISSION14_ACTIVE == 1
            07D6:   5@ == $SURVIVER[0] // @ == $ (int)
            then
            5@ = -69
            end
                            
            if and
            $MISSION14_ACTIVE == 2
            07D6:   5@ == $SURVIVER[0] // @ == $ (int)
            then
            5@ = -69
            end
            
            if and
            $MISSION14_ACTIVE == 1
            07D6:   6@ == $SURVIVER[0] // @ == $ (int)
            then
            6@ = -69
            end
                            
            if and
            $MISSION14_ACTIVE == 2
            07D6:   6@ == $SURVIVER[0] // @ == $ (int)
            then
            6@ = -69
            end
            
            if and
            $MISSION14_ACTIVE == 1
            07D6:   26@ == $SURVIVER[0] // @ == $ (int)
            then
            26@ = -69
            end
                            
            if and
            $MISSION14_ACTIVE == 2
            07D6:   26@ == $SURVIVER[0] // @ == $ (int)
            then
            26@ = -69
            end
            
            if and
            $MISSION14_ACTIVE == 1
            07D6:   27@ == $SURVIVER[0] // @ == $ (int)
            then
            27@ = -69
            end
                            
            if and
            $MISSION14_ACTIVE == 2
            07D6:   27@ == $SURVIVER[0] // @ == $ (int)
            then
            27@ = -69
            end
            
            if and
            ZAME_PROTECT_TEAMMATE_NUM > -1
            $GAMEMODE_EDITOR == 1
            then
            if
            07D6:   4@ == $SURVIVER[ZAME_PROTECT_TEAMMATE_NUM] // @ == $ (int)
                then
                4@ = -69
                end
            end
                    
            if and
            ZAME_PROTECT_TEAMMATE_NUM > -1
            $GAMEMODE_EDITOR == 1
            then
            if
            07D6:   5@ == $SURVIVER[ZAME_PROTECT_TEAMMATE_NUM] // @ == $ (int)
                then
                5@ = -69
                end
            end
                    
            if and
            ZAME_PROTECT_TEAMMATE_NUM > -1
            $GAMEMODE_EDITOR == 1
            then
            if
            07D6:   6@ == $SURVIVER[ZAME_PROTECT_TEAMMATE_NUM] // @ == $ (int)
                then
                6@ = -69
                end
            end
                    
            if and
            ZAME_PROTECT_TEAMMATE_NUM > -1
            $GAMEMODE_EDITOR == 1
            then
            if
            07D6:   26@ == $SURVIVER[ZAME_PROTECT_TEAMMATE_NUM] // @ == $ (int)
                then
                26@ = -69
                end
            end
                    
            if and
            ZAME_PROTECT_TEAMMATE_NUM > -1
            $GAMEMODE_EDITOR == 1
            then
            if
            07D6:   27@ == $SURVIVER[ZAME_PROTECT_TEAMMATE_NUM] // @ == $ (int)
                then
                27@ = -69
                end
            end
            
            ///////////////////////////////////////////////////////////////////////////////
            
            if and
            056D:   actor 4@ defined
            87D6: not  4@ == COOP_ACTOR // @ == $ (int)
            then
            
            if
            not actor.Driving(4@)
            then    
            05E2: AS_actor 4@ kill_actor $TANK[24@]
            else
            0713: actor 4@ driveby_actor $TANK[24@] car -1 point 0.0 0.0 0.0 radius 5000.0 8 1 firing_rate 360
            end
            
            end
            
            if and
            056D:   actor 5@ defined
            87D6: not  5@ == COOP_ACTOR // @ == $ (int)
            then
            
            if
            not actor.Driving(5@)
            then    
            05E2: AS_actor 5@ kill_actor $TANK[24@]
            else
            0713: actor 5@ driveby_actor $TANK[24@] car -1 point 0.0 0.0 0.0 radius 5000.0 8 1 firing_rate 360
            end
            
            end
            
            if and
            056D:   actor 6@ defined
            87D6: not  6@ == COOP_ACTOR // @ == $ (int)
            then
            
            if
            not actor.Driving(6@)
            then    
            05E2: AS_actor 6@ kill_actor $TANK[24@]
            else
            0713: actor 6@ driveby_actor $TANK[24@] car -1 point 0.0 0.0 0.0 radius 5000.0 8 1 firing_rate 360
            end
            
            end
            
            if and
            056D:   actor 26@ defined
            87D6: not  26@ == COOP_ACTOR // @ == $ (int)
            then
            
            if
            not actor.Driving(26@)
            then    
            05E2: AS_actor 26@ kill_actor $TANK[24@]
            else
            0713: actor 26@ driveby_actor $TANK[24@] car -1 point 0.0 0.0 0.0 radius 5000.0 8 1 firing_rate 360
            end
            
            end
            
            if and
            056D:   actor 27@ defined
            87D6: not  27@ == COOP_ACTOR // @ == $ (int)
            then
            
            if
            not actor.Driving(27@)
            then    
            05E2: AS_actor 27@ kill_actor $TANK[24@]
            else
            0713: actor 27@ driveby_actor $TANK[24@] car -1 point 0.0 0.0 0.0 radius 5000.0 8 1 firing_rate 360
            end
            
            end
            
            ///////////////////////////////////////////////////////////////////////////////
            
            end
            
            33@ = 0            
                                
            repeat
            wait 0
            
            if and
            33@ > 500
            TNK_THROW_SOUND_FLAG == 0
            then
            if
            $GAME_SPEED == 1.0
                then    
                gosub @TANK_SHUT_UP        
                gosub @TANK_RANDOM_THROW_SOUND
                Audiostream.LinkToActor(TNK_THROW_SOUND, $TANK[24@])
                Audiostream.PerformAction(TNK_THROW_SOUND, PLAY)
                Audiostream.Volume(TNK_THROW_SOUND) = $SOUNDS_VOLUME
                TNK_THROW_SOUND_FLAG = 1
                end
            end
                                            
            if or
            actor.Dead($TANK[24@])
            856D: not  actor $TNK_TARGET[24@] defined
            $SAVESTATUS == 1
            not actor.Animation($TANK[24@]) == "tank_throw"
            then
            jump to @TANK_SKIP_THROW_ROCK
            end
            
            if or
            TANK_DELETE_FLAG == 1
            $TANK_REMOVE_FLAG == 1
            then
            jump to @TANK_SKIP_THROW_ROCK
            end
            
            if
            056D:  actor $TNK_TARGET[24@] defined
                then
                if
                0364:   actor $TANK[24@] spotted_actor $TNK_TARGET[24@]
                jf @TANK_SKIP_THROW_ROCK
                actor.StorePos($TANK[24@],1@,2@,3@)
                actor.StorePos($TNK_TARGET[24@],3@,4@,5@)
                0E27: get_angle_from_two_coords 1@ 2@ and 3@ 4@ to 0@
                actor.Angle($TANK[24@]) = 0@
                end
                                            
            until 33@ > 800
                                                            
            33@ = 0
            
            if
            UNITED_MAP == 0
            then
            TANK_CLOSEST_OBJ_VAR = object.Init(905,0.0,0.0,0.0)
            else
            TANK_CLOSEST_OBJ_VAR = object.Init(1803,0.0,0.0,0.0)
            end
            
            035D: set_object TANK_CLOSEST_OBJ_VAR targetable 1
            08D2: object TANK_CLOSEST_OBJ_VAR scale_model 1.5
            070A: AS_actor $TANK[24@] attach_to_object TANK_CLOSEST_OBJ_VAR offset 0.0 0.0 0.0 on_bone 6 16 perform_animation "NULL" IFP_file "NULL" time 600
            
            33@ = 0
                                
            repeat
            wait 0
                                            
            if or
            actor.Dead($TANK[24@])
            856D: not  actor $TNK_TARGET[24@] defined
            $SAVESTATUS == 1
            not actor.Animation($TANK[24@]) == "tank_throw"
            then
            object.Destroy(TANK_CLOSEST_OBJ_VAR)
            jump to @TANK_SKIP_THROW_ROCK 
            end
            
            if or
            TANK_DELETE_FLAG == 1
            $TANK_REMOVE_FLAG == 1
            then
            jump to @TANK_SKIP_THROW_ROCK
            end
            
            if
            056D:  actor $TNK_TARGET[24@] defined
                then
                actor.StorePos($TANK[24@],1@,2@,3@)
                actor.StorePos($TNK_TARGET[24@],3@,4@,5@)
                0E27: get_angle_from_two_coords 1@ 2@ and 3@ 4@ to 0@
                actor.Angle($TANK[24@]) = 0@
                0509: 6@ = distance_between_XY 1@ 2@ and_XY 3@ 4@
                actor.StorePos($TANK[24@],1@,2@,3@)
                0063: 5@ -= 3@  // (float)
                0087: 7@ = 5@ // (float)                
                6@ *= 2.0
                7@ *= 2.0
                0087: 8@ = 6@ // (float)
                8@ /= 35.0
                005B: 7@ += 8@  // (float)
                end
                                            
            until 33@ > 500
            
            070B: set_actor $TANK[24@] onbone_attached_object_operation 0
            wait 0
            if
            03CA:   object TANK_CLOSEST_OBJ_VAR exists
                then 
                Object.ToggleInMovingList(TANK_CLOSEST_OBJ_VAR) = True            
                Object.SetImmunities(TANK_CLOSEST_OBJ_VAR, 0, 1, 1, 1, 1)
                0906: set_object TANK_CLOSEST_OBJ_VAR mass_to 1000.0 // float
                Actor.StorePos($TANK[24@], 1@, 2@, 3@)
                if
                056D:  actor $TNK_TARGET[24@] defined
                then
                if
                actor.Driving($TNK_TARGET[24@])
                    then
                    6@ *= 1.25
                    7@ *= 0.75
                    end
                end
//                0AD1: show_formatted_text_highpriority "Y: %f, Z: %f" time 2000 6@ 7@
                04C4: store_coords_to 4@ 5@ 6@ from_actor $TANK[24@] with_offset 0.0 6@ 7@ 
                0063: 4@ -= 1@ // (float) 
                0063: 5@ -= 2@ // (float) 
                0063: 6@ -= 3@ // (float) 
                038C: object TANK_CLOSEST_OBJ_VAR scatter 4@ 5@ 6@            
                04D9: object TANK_CLOSEST_OBJ_VAR set_scripted_collision_check 1
                071F: set_object TANK_CLOSEST_OBJ_VAR health_to 500
                07F7: set_object TANK_CLOSEST_OBJ_VAR destructible 0            
                create_thread @ROCK TANK_CLOSEST_OBJ_VAR
                end
            end
        end
    end
    
:TANK_SKIP_THROW_ROCK                
    
/////////////////////Проверка на близость динамического объекта/////////////////////
 
if and
0E45: frame_mod 5
056D:   $TANK[24@] defined
$ALLOW_TANK_THROW_OBJ == 1
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
    then
    actor.StorePos($TANK[24@],0@,1@,2@)
    0AE3: TANK_CLOSEST_OBJ_VAR = random_object_near_point 0@ 1@ 2@ in_radius 3.0 find_next 1 //IF and SET
    if
    03CA:   object TANK_CLOSEST_OBJ_VAR exists
        then
        gosub @TANK_OBJECT_CHECK
        071E: get_object TANK_CLOSEST_OBJ_VAR health_to 1@
        if and
        0@ == 0
        not 1@ == 69        
            then                          
            0687: clear_actor $TANK[24@] task
            random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
            wait 0@
            wait 24@
            if
            03CA:   object TANK_CLOSEST_OBJ_VAR exists 
                then
                audiostream.Volume(TNK_WALK_SOUND) = 0.0
                0A1A: actor $TANK[24@] perform_walk_animation "FIGHT22" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 670 ms // versionC
                                
//                0AD1: show_formatted_text_highpriority "OBJECT GAY" time 2000
                071F: set_object TANK_CLOSEST_OBJ_VAR health_to 69
                0723: break_object TANK_CLOSEST_OBJ_VAR intensity 1
                
                if
                $GAME_SPEED == 1.0
                then
                gosub @TANK_SHUT_UP        
                gosub @TANK_RANDOM_ATTACK_SOUND
                Audiostream.LinkToActor(TNK_ATTACK_SOUND, $TANK[24@])
                Audiostream.PerformAction(TNK_ATTACK_SOUND, PLAY)
                Audiostream.Volume(TNK_ATTACK_SOUND) = $SOUNDS_VOLUME
                TNK_ATTACK_SOUND_FLAG = 1
                end                                        
                
                33@ = 0
                            
                repeat
                wait 0
                                        
                if or
                actor.Dead($TANK[24@])
                $SAVESTATUS == 1
                then
                break
                end
                                        
                until 33@ > 670
                                
                33@ = 0                                
                
                gosub @TANK_RADIKULIT_PROTECTION
                                
                gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
                
                end
            end
        end
    end                    
    
/////////////////////Проверка на близость цели игрока//////////////////// 

if and
056D:   actor PLAYER_ACTOR defined
056D:   actor $TANK[24@] defined
$INF_SIDE == 0
$ZOMBIE_DONT_ATTACK_PLAYER == 0  
    then   
    if and
    0104: actor PLAYER_ACTOR near_actor $TANK[24@] radius 2.0 2.0 2.0 sphere 0
    not actor.Dead(PLAYER_ACTOR)
        then
        gosub @TANK_CLIMB_CHECK
        if and
        0364:   actor $TANK[24@] spotted_actor PLAYER_ACTOR
        8E48: not is_char_fallen_on_ground $TANK[24@]  
        not 0@ == 1      
            then
            
            if and
            UNITED_MAP == 0
            actor.DrivingVehicleType(PLAYER_ACTOR,15426)
            then
            jump to @TANK_QUAD3_SA_JUMP3
            end
            
            if or
            not actor.Driving(PLAYER_ACTOR)
            047A:   actor PLAYER_ACTOR driving_bike
            actor.DrivingVehicleType(PLAYER_ACTOR,#QUAD)
            actor.DrivingVehicleType(PLAYER_ACTOR,15558)
                then
                :TANK_QUAD3_SA_JUMP3
                if and                    
                89DE: not  actor PLAYER_ACTOR entering_car
//                8A32: not actor PLAYER_ACTOR on_turret_of_car
                0184:   actor $TANK[24@] health > 0
                32@ > 1000
                    then
                    32@ = 0      
                                                                    
                    0687: clear_actor $TANK[24@] task    
                    random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
                    wait 0@
                    wait 24@
                    audiostream.Volume(TNK_WALK_SOUND) = 0.0                        
                    0A1A: actor $TANK[24@] perform_walk_animation "FIGHT22" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 670 ms // versionC 
                    
                    if
                    $GAME_SPEED == 1.0
                    then        
                    gosub @TANK_SHUT_UP        
                    gosub @TANK_RANDOM_ATTACK_SOUND
                    Audiostream.LinkToActor(TNK_ATTACK_SOUND, $TANK[24@])
                    Audiostream.PerformAction(TNK_ATTACK_SOUND, PLAY)
                    Audiostream.Volume(TNK_ATTACK_SOUND) = $SOUNDS_VOLUME
                    TNK_ATTACK_SOUND_FLAG = 1
                    end                                                
                                                            
                    if
                    056D:   actor $VOICE_ACTOR defined
                    then
                    
                    if
                    not $RANDOM_MODE_MODEL == 0
                    then
                    05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 346
                    else
                    05C1: AS_actor PLAYER_ACTOR speak_from_audio_table 346
                    end
                    
                    end
                            
                    008B: 0@ = $TANK_DAMAGE // (int)
                    0093: 0@ = integer 0@ to_float
                    random_float 1@ 0.85 1.15 
                    006B: 0@ *= 1@  // (float)  
                    
                    008F: 1@ = integer $TANK_DAMAGE to_float
                    006F: 1@ *= PLAYER_RESIST_MULT // (float)
                    0063: 0@ -= 1@  // (float)
                    0092: 0@ = float 0@ to_integer
                    
                    if
                    $GODMODE_FLAG == 1
                    then
                    jump to @TANK_LAST_CHANCE_PLAYER_AFTERDAMAGE_JUMP
                    end                       
                    
                    1@ = actor.Health(PLAYER_ACTOR)
                    0062: 1@ -= 0@  // (int)
                    if and
                    PERK_LASTCHANCE == 1
                    LAST_CHANCE_FLAG == 0
                    LAST_CHANCE_TIMER == 0
                    1@ < 1
                    then
                    actor.Health(PLAYER_ACTOR) = 30
                    0003: shake_camera 200
                    09F1: play_audio_at_actor $TANK[24@] event 1130
                    create_thread @LST_CHN
                    jump to @TANK_LAST_CHANCE_PLAYER_AFTERDAMAGE_JUMP
                    end
                            
                    0851: set_actor PLAYER_ACTOR decrease_health_by 0@ affect_armour 1
                            
                    0332: set_actor PLAYER_ACTOR bleeding 1
                                                                    
                    if
                    056D:   actor $VOICE_ACTOR defined
                    then
                    
                    if
                    not $RANDOM_MODE_MODEL == 0
                    then
                    05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 346
                    else
                    05C1: AS_actor PLAYER_ACTOR speak_from_audio_table 346
                    end
                    
                    end                        
                            
                    0003: shake_camera 300
                    09F1: play_audio_at_actor $TANK[24@] event 1130
                    gosub @DISEMB_JETP_CHECK
                    0792: disembark_instantly_actor PLAYER_ACTOR
    //                player.CanMove(PLAYER_CHAR) = false
                    0E68: set_player_control_pad 0 1 
                    0E69: set_player_control_pad_movement 0 0
                    05BB: AS_actor PLAYER_ACTOR fall_down 0 time_on_ground 100
                    wait 1
                                                                   
                    if
                    056D:   actor $VOICE_ACTOR defined
                    then
                    
                    if
                    not $RANDOM_MODE_MODEL == 0
                    then
                    05C1: AS_actor $VOICE_ACTOR speak_from_audio_table 346
                    else
                    05C1: AS_actor PLAYER_ACTOR speak_from_audio_table 346
                    end
                    
                    end                        
                            
                    actor.StorePos(PLAYER_ACTOR, 1@, 2@, 3@) 
                    04C4: store_coords_to 4@ 5@ 6@ from_actor PLAYER_ACTOR with_offset 0.0 -30.0 150.0 
                    0063: 4@ -= 1@  // (float) 
                    0063: 5@ -= 2@  // (float) 
                    0063: 6@ -= 3@  // (float) 
                    083C: set_actor PLAYER_ACTOR velocity_in_direction_XYZ 4@ 5@ 6@
    //                player.CanMove(PLAYER_CHAR) = true
                    0E68: set_player_control_pad 1 1 
                    0E69: set_player_control_pad_movement 0 1
                    0332: set_actor PLAYER_ACTOR bleeding 0
                    wait 50    
                            
                    if
                    8184:   actor PLAYER_ACTOR health < 1
                    then
                    05BE: AS_actor PLAYER_ACTOR die
                    end                                
                            
                    actor.StorePos(PLAYER_ACTOR, 1@, 2@, 3@) 
                    04C4: store_coords_to 4@ 5@ 6@ from_actor PLAYER_ACTOR with_offset 0.0 -20.0 30.0 
                    0063: 4@ -= 1@  // (float) 
                    0063: 5@ -= 2@  // (float) 
                    0063: 6@ -= 3@  // (float) 
                    083C: set_actor PLAYER_ACTOR velocity_in_direction_XYZ 4@ 5@ 6@
                    
                    :TANK_LAST_CHANCE_PLAYER_AFTERDAMAGE_JUMP
                    
                    $TNK_TARGET[24@] = -69        
                    $TNK_TARGET_FINDED[24@] = 0
                    $TNK_TARGET_PLAYER[24@] = 0
                    
                    33@ = 0
                            
                    repeat
                    wait 0
                            
                    if or
                    actor.Dead($TANK[24@])
                    $SAVESTATUS == 1
                    then
                    break
                    end
                            
                    until 33@ > 670
                    
                    33@ = 0
                    
                    gosub @TANK_RADIKULIT_PROTECTION                        
                    
                    gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
                    
                    end
                end
            end
        end
    end                  
    
/////////////////////Поиск цели-игрока танком///////////////////// 

if and
056D:   actor $TANK[24@] defined
$TNK_TARGET_FINDED[24@] == 0
not ZAME_PROTECT_THE_OBJECT_FLAG == 2  
    then
    04DD: 0@ = actor $TANK[24@] armour
    random_int 2@ 0 $TANK_AGRO_MAX
    if and
    07D6:   2@ == $TANK_AGRO_SET // @ == $ (int)
    $TANK_DONT_ATTACK_PLAYER == 0 
    $ZOMBIEORGY_MODE_FLAG == 0   
    $HUNTER_ON_PLAYER == 0
    not 0@ == 1
        then        
        if and
        $INF_SIDE == 0
        $ACTOR_DEAD == 0
        $SPECTATING_FLAG == 0
        00F2:  actor $TANK[24@] near_actor PLAYER_ACTOR radius 100.0 100.0 sphere 0
        84AD: not actor PLAYER_ACTOR in_water  
//        84C8: not  actor PLAYER_ACTOR driving_flying_vehicle
        not actor.Dead(PLAYER_ACTOR) 
            then                               
            0084: $TNK_TARGET[24@] = PLAYER_ACTOR // (int)                
            $TNK_TARGET_FINDED[24@] = 1
            $TNK_TARGET_PLAYER[24@] = 1
                        
            33@ = 0            
            
            gosub @TANK_ATTACK_TARGET
            
            if
            $GAME_SPEED == 1.0
            then                                                    
            gosub @TANK_SHUT_UP                        
            gosub @TANK_RANDOM_CLIMB_SOUND
            Audiostream.LinkToActor(TNK_CLIMB_SOUND, $TANK[24@])
            Audiostream.PerformAction(TNK_CLIMB_SOUND, PLAY)
            Audiostream.Volume(TNK_CLIMB_SOUND) = $SOUNDS_VOLUME
            TNK_CLIMB_SOUND_FLAG = 1
            end
                                                  
            end  
        else
        gosub @TANK_ONFOOT_ATTACK_SYSTEM_TARGET_FIND
        if and
        25@ == 1
        056D:   actor $TNK_TARGET[24@] defined
            then                                  
            089F: get_actor $TNK_TARGET[24@] pedtype_to 0@            
            
            if
            DEBUG_OPPCODE_FLAG == 1
            then
            
            DEBUG_STRING_NUMBER += 1
            0AD3: v$DEBUG_FILE10 = format "TK%d" DEBUG_STRING_NUMBER
            if
            DEBUG_STRING_NUMBER > DEBUG_STRING_NUMBER_MAX
            then
            0B00: delete_file "debug\debug.ini"  // IF and SET
            DEBUG_STRING_NUMBER = 0
            end
            0AF1: write_int $TNK_TARGET[24@] to_ini_file "debug\debug.ini" section "OPPCODE" key v$DEBUG_FILE10
            
            end
            
//            if
//            not $GAMEMODE_CRAZY == 1
//            then
//            if
//            04C8:   actor $TNK_TARGET[24@] driving_flying_vehicle
//                then
//                jump to @TANK_SKIP_FLYING_CUCUMBER
//                end
//            end
            
            if and
            not actor.Dead($TNK_TARGET[24@])
            0184:   actor $TNK_TARGET[24@] health > 0            
            87D6: not  0@ == $VOICE_SET_PEDTYPE // @ == $ (int)
            803A: not  $TNK_TARGET[24@] == $TANK[24@] // (int)  
            84AD: not actor $TNK_TARGET[24@] in_water            
//            8A32: not  actor $TNK_TARGET[24@] on_turret_of_car
            803A: not  $TNK_TARGET[24@] == $TRADER_ACTOR // (int)
                then
                if or
                87D6: not  0@ == $ZOMBIE_SET_PEDTYPE // @ == $ (int)
                $ZOMBIEORGY_MODE_FLAG == 1
                    then                 
                    
                    $TNK_TARGET_FINDED[24@] = 1
                    $TNK_TARGET_PLAYER[24@] = 0
                    33@ = 0
                    
                    gosub @TANK_ATTACK_TARGET                               
                    
                    if
                    $GAME_SPEED == 1.0
                    then                                    
                    gosub @TANK_SHUT_UP                        
                    gosub @TANK_RANDOM_CLIMB_SOUND
                    Audiostream.LinkToActor(TNK_CLIMB_SOUND, $TANK[24@])
                    Audiostream.PerformAction(TNK_CLIMB_SOUND, PLAY)
                    Audiostream.Volume(TNK_CLIMB_SOUND) = $SOUNDS_VOLUME
                    TNK_CLIMB_SOUND_FLAG = 1
                    end
                       
                    end                                 
                end
            end
        end               
    end
    
:TANK_SKIP_FLYING_CUCUMBER    
    
////////////////////////Высокий прыжок танка////////////////////////

if and
056D:   actor $TANK[24@] defined
$ACTIVE_INTERIOR == 0
    then
    04DD: 0@ = actor $TANK[24@] armour
    if and
    0184:   actor $TANK[24@] health > 0
    0E45: frame_mod 15    
    $TNK_TARGET_FINDED[24@] == 1
    044B:   actor $TANK[24@] on_foot
    8818:  actor $TANK[24@] in_air  
    $GAMEMODE_CRAZY == 0
    not 0@ == 1
        then
        if or
        actor.Animation($TANK[24@]) == "tank_run"
        actor.Animation($TANK[24@]) == "Swim_Breast"
            then
            if
            056D:   actor $TNK_TARGET[24@] defined
                then
                if or
                0364:   actor $TANK[24@] spotted_actor $TNK_TARGET[24@] 
                00F2:   actor $TANK[24@] near_actor $TNK_TARGET[24@] radius 10.0 15.0 sphere 0  
                    then
                    04C4: store_coords_to 27@ 28@ 29@ from_actor $TANK[24@] with_offset 0.0 3.0 0.3 
                    Actor.StorePos($TANK[24@],2@,3@,4@)
                    if 
                    86BD:   not no_obstacles_between 27@ 28@ 29@ and 2@ 3@ 4@ solid 1 car 0 actor 0 object 0 particle 0             
                        then
                        
                        if
                        ZAME_PROTECT_THE_OBJECT_FLAG == 2                        
                        then
                        if
                        03CA:   object ZAME_PROTECT_THE_OBJECT_OBJ exists
                            then
                            if
                            0474:   actor $TANK[24@] near_object_in_cube ZAME_PROTECT_THE_OBJECT_OBJ radius 5.0 5.0 5.0 sphere 0
                                then
                                jump to @TNK_SKIP_CLIMB_ME
                                end
                            end
                        end
                                        
                        0687: clear_actor $TANK[24@] task    
                        random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
                        if
                        $GAMEMODE_CRAZY == 1
                        then
                        0@ *= TANK_TASK_CRAZY_MULT
                        0085: 1@ = 24@ // (int)
                        1@ *= TANK_TASK_CRAZY_MULT2
                        wait 1@
                        end
                        wait 0@
                        wait 24@
                        if
                        056D:   actor $TNK_TARGET[24@] defined 
                            then 
                            078F: AS_actor $TANK[24@] climb 1                  
                             
                            wait 5                              
                            actor.StorePos($TANK[24@], 27@, 28@, 29@) 
                            04C4: store_coords_to 2@ 3@ 4@ from_actor $TANK[24@] with_offset 0.0 8.0 20.0
                            0063: 2@ -= 27@  // (float) 
                            0063: 3@ -= 28@  // (float) 
                            0063: 4@ -= 29@  // (float) 
                            083C: set_actor $TANK[24@] velocity_in_direction_XYZ 2@ 3@ 4@  
                            
                            if
                            $GAME_SPEED == 1.0
                            then
                            gosub @TANK_SHUT_UP                    
                            gosub @TANK_RANDOM_CLIMB_SOUND
                            Audiostream.LinkToActor(TNK_CLIMB_SOUND, $TANK[24@])
                            Audiostream.PerformAction(TNK_CLIMB_SOUND, PLAY)
                            Audiostream.Volume(TNK_CLIMB_SOUND) = $SOUNDS_VOLUME
                            TNK_CLIMB_SOUND_FLAG = 1
                            end
                            
                            wait 5                              
                            actor.StorePos($TANK[24@], 27@, 28@, 29@) 
                            04C4: store_coords_to 2@ 3@ 4@ from_actor $TANK[24@] with_offset 0.0 15.0 10.0
                            0063: 2@ -= 27@  // (float) 
                            0063: 3@ -= 28@  // (float) 
                            0063: 4@ -= 29@  // (float) 
                            083C: set_actor $TANK[24@] velocity_in_direction_XYZ 2@ 3@ 4@
                            gosub @TANK_CHECK_ATTACK_TARGET_EXSIST  
                            end
                        end
                    end
                end
            end
        end
    end
    
:TNK_SKIP_CLIMB_ME    
    
////////////////////////Высокий прыжок танка в безумии////////////////////////    

if
056D:   actor $TANK[24@] defined
    then    
    if and
    0184:   actor $TANK[24@] health > 0    
    $TNK_TARGET_FINDED[24@] == 1
    $GAMEMODE_CRAZY == 1
    0E45: frame_mod 60
        then
        if or
        actor.Animation($TANK[24@]) == "tank_run"
        actor.Animation($TANK[24@]) == "Swim_Breast"
            then
            04C4: store_coords_to 27@ 28@ 29@ from_actor $TANK[24@] with_offset 0.0 3.0 0.0 
            Actor.StorePos($TANK[24@],2@,3@,4@)
            if 
            86BD:   not no_obstacles_between 27@ 28@ 29@ and 2@ 3@ 4@ solid 1 car 0 actor 0 object 0 particle 0 
                then
                
                0687: clear_actor $TANK[24@] task
                random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
                if
                $GAMEMODE_CRAZY == 1
                then
                0@ *= TANK_TASK_CRAZY_MULT
                0085: 1@ = 24@ // (int)
                1@ *= TANK_TASK_CRAZY_MULT2
                wait 1@
                end
                wait 0@
                wait 24@
                if
                8E92: not is_char_really_in_air $TANK[24@]
                then
                078F: AS_actor $TANK[24@] climb 1
                end
                 
                wait 100                              
                actor.StorePos($TANK[24@], 27@, 28@, 29@) 
                04C4: store_coords_to 2@ 3@ 4@ from_actor $TANK[24@] with_offset 0.0 8.0 20.0
                0063: 2@ -= 27@  // (float) 
                0063: 3@ -= 28@  // (float) 
                0063: 4@ -= 29@  // (float) 
                083C: set_actor $TANK[24@] velocity_in_direction_XYZ 2@ 3@ 4@  
                
                if
                $GAME_SPEED == 1.0
                then
                gosub @TANK_SHUT_UP        
                gosub @TANK_RANDOM_CLIMB_SOUND
                Audiostream.LinkToActor(TNK_CLIMB_SOUND, $TANK[24@])
                Audiostream.PerformAction(TNK_CLIMB_SOUND, PLAY)
                Audiostream.Volume(TNK_CLIMB_SOUND) = $SOUNDS_VOLUME
                TNK_CLIMB_SOUND_FLAG = 1
                end
                
                wait 150                              
                actor.StorePos($TANK[24@], 27@, 28@, 29@) 
                04C4: store_coords_to 2@ 3@ 4@ from_actor $TANK[24@] with_offset 0.0 15.0 40.0
                0063: 2@ -= 27@  // (float) 
                0063: 3@ -= 28@  // (float) 
                0063: 4@ -= 29@  // (float) 
                083C: set_actor $TANK[24@] velocity_in_direction_XYZ 2@ 3@ 4@  
                gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
                
                end
            end
        end
    end
    
if and
056D:   actor $TNK_TARGET[24@] defined
056D:   actor $TANK[24@] defined
    then
    if    
    00F2:   actor $TANK[24@] near_actor $TNK_TARGET[24@] radius 10.0 15.0 sphere 0
        then
        if
        0364:   actor $TANK[24@] spotted_actor $TNK_TARGET[24@]
            then
            jump to @TANK_JUMP_LONG_SKIP
            end
        end
    end            
    
////////////////////////Прыжок вперед танка////////////////////////

jump to @TANK_JUMP_LONG_SKIP
if
056D:   actor $TANK[24@] defined
    then
    04DD: 0@ = actor $TANK[24@] armour
    if and
    0184:   actor $TANK[24@] health > 0
    001C:   TANK_JUMP_TIMER > TANK_JUMP_TIME2 // (int)
    actor.Animation($TANK[24@]) == "tank_run"
    $TNK_TARGET_FINDED[24@] == 1
    $ALLOW_SPEC_INF_JUMPS == 1
    044B:   actor $TANK[24@] on_foot
    8818:  actor $TANK[24@] in_air
    not 0@ == 1
        then
        
        if
        ZAME_PROTECT_THE_OBJECT_FLAG == 2        
            then
            if
            03CA:   object ZAME_PROTECT_THE_OBJECT_OBJ exists
                then
                if
                0474:   actor $TANK[24@] near_object_in_cube ZAME_PROTECT_THE_OBJECT_OBJ radius 5.0 5.0 5.0 sphere 0
                    then
                    jump to @TANK_JUMP_LONG_SKIP
                    end
                end
            end
        
        if and
        056D:   actor $TNK_TARGET[24@] defined
        not actor.Animation($TANK[24@]) == "FLOOR_hit_f"
        not actor.Animation($TANK[24@]) == "FLOOR_hit"
        8E48: not is_char_fallen_on_ground $TANK[24@]
            then        
            32@ = 0
            04C4: store_coords_to 27@ 28@ 29@ from_actor $TANK[24@] with_offset 0.0 3.0 0.3 
            Actor.StorePos($TANK[24@],2@,3@,4@)       
                    
            0687: clear_actor $TANK[24@] task    
            random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
            if
            $GAMEMODE_CRAZY == 1
            then
            0085: 1@ = 24@ // (int)
            1@ *= TANK_TASK_CRAZY_MULT2
            wait 1@
            end
            wait 0@
            wait 24@
            if and
            056D:   actor $TNK_TARGET[24@] defined
            not actor.Animation($TANK[24@]) == "FLOOR_hit_f"
            not actor.Animation($TANK[24@]) == "FLOOR_hit"
            8E48: not is_char_fallen_on_ground $TANK[24@] 
                then 
                078F: AS_actor $TANK[24@] climb 1
                        
                TANK_JUMP_TIMER = 0  
                
                0084: TANK_JUMP_TIME2 = $TANK_JUMP_TIME // (int) 
                008D: TANK_JUMP_TIME2 = integer TANK_JUMP_TIME2 to_float
                random_int 0@ $TANK_JUMP1_MIN $TANK_JUMP1_MAX
                006D: TANK_JUMP_TIME2 *= 0@ // (float)            
                008C: TANK_JUMP_TIME2 = float TANK_JUMP_TIME2 to_integer
                         
                wait 5                              
                actor.StorePos($TANK[24@], 27@, 28@, 29@) 
                04C4: store_coords_to 2@ 3@ 4@ from_actor $TANK[24@] with_offset 0.0 8.0 10.0
                0063: 2@ -= 27@  // (float) 
                0063: 3@ -= 28@  // (float) 
                0063: 4@ -= 29@  // (float) 
                083C: set_actor $TANK[24@] velocity_in_direction_XYZ 2@ 3@ 4@  
                
                if
                $GAME_SPEED == 1.0
                then        
                gosub @TANK_SHUT_UP                    
                gosub @TANK_RANDOM_CLIMB_SOUND
                Audiostream.LinkToActor(TNK_CLIMB_SOUND, $TANK[24@])
                Audiostream.PerformAction(TNK_CLIMB_SOUND, PLAY)
                Audiostream.Volume(TNK_CLIMB_SOUND) = $SOUNDS_VOLUME
                TNK_CLIMB_SOUND_FLAG = 1
                end
                        
                wait 5                              
                actor.StorePos($TANK[24@], 27@, 28@, 29@) 
                04C4: store_coords_to 2@ 3@ 4@ from_actor $TANK[24@] with_offset 0.0 25.0 5.0
                0063: 2@ -= 27@  // (float) 
                0063: 3@ -= 28@  // (float) 
                0063: 4@ -= 29@  // (float) 
                083C: set_actor $TANK[24@] velocity_in_direction_XYZ 2@ 3@ 4@
                gosub @TANK_CHECK_ATTACK_TARGET_EXSIST  
                end
            end
        end
    end
    
:TANK_JUMP_LONG_SKIP        

if
056D:   actor $TANK[24@] defined
    then
    04DD: 0@ = actor $TANK[24@] armour    
    if and      
    actor.Animation($TANK[24@]) == "tank_run"
    not actor.Animation($TANK[24@]) == "FLOOR_hit_f"
    not actor.Animation($TANK[24@]) == "FLOOR_hit"
    044B:   actor $TANK[24@] on_foot
    82A0: not  actor $TANK[24@] stopped
    8818: not actor $TANK[24@] in_air
    $GAME_SPEED == 1.0
    not 0@ == 1
        then
        audiostream.Volume(TNK_WALK_SOUND) = $SOUNDS_VOLUME
        else
        audiostream.Volume(TNK_WALK_SOUND) = 0.0
        end
    end

if
056D:   actor $TANK[24@] defined
    then
    if or
    actor.Animation($TANK[24@]) == "FALL_collapse"
    actor.Animation($TANK[24@]) == "FALL_land"
    actor.Animation($TANK[24@]) == "getup"
    actor.Animation($TANK[24@]) == "FLOOR_hit"
    actor.Animation($TANK[24@]) == "KO_skid_front"
    actor.Animation($TANK[24@]) == "HitB_1"
    actor.Animation($TANK[24@]) == "HitB_2"
    actor.Animation($TANK[24@]) == "HitB_3"
        then
        if
        0184:   actor $TANK[24@] health > 0
            then
            0792: disembark_instantly_actor $TANK[24@]
            gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
            end
        end
    end

if
056D:   actor $TANK[24@] defined
    then
    if and
    $TNK_TARGET_FINDED[24@] == 1
    $ALLOW_TANK_THROW_VEH == 1
    0184:   actor $TANK[24@] health > 0
    not actor.Animation($TANK[24@]) == "FIGHT22"
        then
        actor.storepos($TANK[24@], 27@, 28@, 29@)
        if
        0AE2: 31@ = random_vehicle_near_point 27@ 28@ 29@ in_radius 5.0 find_next 0 pass_wrecked 1 //IF and SET    
            then                 
            0687: clear_actor $TANK[24@] task    
            random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
            if
            $GAMEMODE_CRAZY == 1
            then
            0@ *= TANK_TASK_CRAZY_MULT
            0085: 1@ = 24@ // (int)
            1@ *= TANK_TASK_CRAZY_MULT2
            wait 1@
            end
            wait 0@
            wait 24@
            if
            056E:   car 31@ defined  
                then
                gosub @BIKE_CHECK_TANK
                
                if
                25@ == 1
                then
                26@ = 1.0
                else
                26@ = 5.0
                end
                audiostream.Volume(TNK_WALK_SOUND) = 0.0                
                0A1A: actor $TANK[24@] perform_walk_animation "FIGHT22" IFP "ped" framedelta 4.0 loopA 0 lockX 0 lockY 0 lockF 0 670 ms // versionC             
                
                if
                $GAME_SPEED == 1.0
                then    
                gosub @TANK_SHUT_UP        
                gosub @TANK_RANDOM_THROW_SOUND
                Audiostream.LinkToActor(TNK_THROW_SOUND, $TANK[24@])
                Audiostream.PerformAction(TNK_THROW_SOUND, PLAY)
                Audiostream.Volume(TNK_THROW_SOUND) = $SOUNDS_VOLUME
                TNK_THROW_SOUND_FLAG = 1
                end                    
                    
                if and
                056D:   actor $TNK_TARGET[24@] defined
                056E:   car 31@ defined
                    then        
                    if 
                    00F2:   actor $TANK[24@] near_actor $TNK_TARGET[24@] radius 26@ 26@ sphere 0
                        then            
                        actor.storepos($TNK_TARGET[24@], 3@, 4@, 5@) 
                        car.storepos(31@, 27@, 28@, 29@) 
                        0063: 3@ -= 27@  // (float) 
                        0063: 4@ -= 28@  // (float) 
                        0063: 5@ -= 29@  // (float) 
                        0013: 3@ *= 0.05
                        0013: 4@ *= 0.05
                        0013: 5@ *= 0.05
                        3@ += 0.27
                        5@ += 0.07
                        if
                        056E:   car 31@ defined
                            then
                            07D5: set_car 31@ velocity_in_direction_XYZ 3@ 4@ 5@ rotation_velocitiesXY 0.0 0.0 unk 10.0                        
                            if
                            056E:   car 31@ defined
                                then                            
                                if
                                not car.Id(31@) == RHINO_MODEL_NUMBER
                                    then                                
                                    if
                                    056E:   car 31@ defined
                                        then 
                                        0@ = car.Health(31@)
                                        0@ -= 100
                                        car.Health(31@) = 0@
                                        end                                    
                                    end                            
                                end                        
                            end           
                        else
                        
                        actor.storepos($TNK_TARGET[24@], 3@, 4@, 5@) 
                        car.storepos(31@, 27@, 28@, 29@) 
                        0063: 3@ -= 27@  // (float) 
                        0063: 4@ -= 28@  // (float) 
                        0063: 5@ -= 29@  // (float) 
                        0013: 3@ *= 0.05
                        0013: 4@ *= 0.05
                        0013: 5@ *= 0.05
                        3@ += 0.09
                        4@ += 0.01
                        07D5: set_car 31@ velocity_in_direction_XYZ 3@ 4@ 5@ rotation_velocitiesXY 0.0 0.0 unk 0.0
                        wait 1                                
                        if
                        056E:   car 31@ defined
                        then
                        07D5: set_car 31@ velocity_in_direction_XYZ 3@ 4@ 5@ rotation_velocitiesXY 0.0 0.0 unk 20.0
                        end
                        
                        33@ = 0
                        
                        repeat
                        wait 0
                                
                        if or
                        actor.Dead($TANK[24@])
                        $SAVESTATUS == 1
                        then
                        break
                        end
                                
                        until 33@ > 670
                        
                        33@ = 0
                        
                        gosub @TANK_RADIKULIT_PROTECTION
                            
                        gosub @TANK_CHECK_ATTACK_TARGET_EXSIST
                                        
                        end
                    end
                end
            end
        end
    end

if
0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 35.0 35.0 25.0 sphere 0
then
0003: shake_camera 20
//015B: shake_player_controller 0 time 200 intensity 20
//015B: shake_player_controller 1 time 200 intensity 20
jump to @CAMERA_SHAKE_SKIP
end

if
0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 30.0 30.0 15.0 sphere 0
then
0003: shake_camera 40
//015B: shake_player_controller 0 time 200 intensity 40
//015B: shake_player_controller 1 time 200 intensity 40
jump to @CAMERA_SHAKE_SKIP
end

if
0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 25.0 25.0 15.0 sphere 0
then
0003: shake_camera 60
//015B: shake_player_controller 0 time 200 intensity 60
//015B: shake_player_controller 1 time 200 intensity 60
jump to @CAMERA_SHAKE_SKIP
end

if
0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 20.0 20.0 15.0 sphere 0
then
0003: shake_camera 80
//015B: shake_player_controller 0 time 200 intensity 80
//015B: shake_player_controller 1 time 200 intensity 80
jump to @CAMERA_SHAKE_SKIP
end

if
0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 15.0 15.0 10.0 sphere 0
then
0003: shake_camera 100
//015B: shake_player_controller 0 time 200 intensity 100
//015B: shake_player_controller 1 time 200 intensity 100
jump to @CAMERA_SHAKE_SKIP
end

if
0104:   actor $TANK[24@] near_actor PLAYER_ACTOR radius 10.0 10.0 5.0 sphere 0
then
0003: shake_camera 120
//015B: shake_player_controller 0 time 200 intensity 120
//015B: shake_player_controller 1 time 200 intensity 120
jump to @CAMERA_SHAKE_SKIP
end

:CAMERA_SHAKE_SKIP  

if
056D:   actor $TANK[24@] defined
    then
    if and
    $TNK_TARGET_FINDED[24@] == 1
    TANK_CAR_GO_FLAG == 0
    $ALLOW_TANK_THROW_VEH == 1
    0184:   actor $TANK[24@] health > 0
    056D:   actor $TNK_TARGET[24@] defined  
        then
        if and
        TANK_CAR_GO_TIMER > 1200
        80F2: not actor $TANK[24@] near_actor $TNK_TARGET[24@] radius 30.0 30.0 sphere 0
            then
            actor.storepos($TANK[24@], 27@, 28@, 29@)
            if
            0AE2: 31@ = random_vehicle_near_point 27@ 28@ 29@ in_radius 30.0 find_next 1 pass_wrecked 0 //IF and SET    
                then                             
                0687: clear_actor $TANK[24@] task    
                random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
                if
                $GAMEMODE_CRAZY == 1
                then
                0@ *= TANK_TASK_CRAZY_MULT
                0085: 1@ = 24@ // (int)
                1@ *= TANK_TASK_CRAZY_MULT2
                wait 1@
                end
                wait 0@
                wait 24@
                if
                056E:   car 31@ defined
                    then
                    0772: AS_actor $TANK[24@] run_to_car 31@ 30000 ms stop_at_distance 2.5
                    TANK_CAR_GO_FLAG = 1
                    TANK_CAR_GO_TIMER = 0
                    end                                                                                                                   
                end
            end
        end
    end         
        
if and
$TNK_TARGET_FINDED[24@] == 1
TANK_CAR_GO_FLAG == 1
    then
    if
    TANK_CAR_GO_TIMER > 1200
        then
        TANK_CAR_GO_FLAG = 0
        TANK_CAR_GO_TIMER = 0
        end
    end          
        
if and
$TNK_TARGET_FINDED[24@] == 1
TANK_OBJECT_GO_FLAG == 1
    then
    if
    TANK_OBJECT_GO_TIMER > 1200
        then
        TANK_OBJECT_GO_FLAG = 0
        TANK_OBJECT_GO_TIMER = 0
        end
    end        

END

:BIKE_CHECK_TANK
25@ = 0

if
856E: not  car 31@ defined
then
return
end

26@ = car.Model(31@)

if or
26@ == 581
26@ == 462
26@ == 463
26@ == 521
26@ == 448
26@ == 461
26@ == 468
26@ == 586
    then
    25@ = 1
    end
    
if or
26@ == 521
26@ == 471
26@ == 523
26@ == 15293
26@ == 15296
26@ == 15319
26@ == 15322
26@ == 15332
    then
    25@ = 1
    end
    
if or
26@ == 522
26@ == 15418
26@ == 15421
26@ == 15428
26@ == 15430
26@ == 15435
26@ == 15507
26@ == 15510
    then
    25@ = 1
    end
    
if or
26@ == 15523
26@ == 15526
26@ == 15532 
    then
    25@ = 1
    end
    
if or
26@ == 15454
26@ == 15455
26@ == 15456
26@ == 15457 
    then
    25@ = 1
    end
    
if or
26@ == 15550
26@ == 15552
26@ == 15565
26@ == 15556
26@ == 15558
26@ == 15566 
    then
    25@ = 1
    end                
    
return 

:TANK_ONFOOT_ATTACK_SYSTEM_TARGET_FIND

25@ = 0

//////////////////////////////////////////////////

if or
$ZOMBIEORGY_MODE_FLAG == 1
ZAME_PROTECT_THE_OBJECT_FLAG == 2
then
random_int 1@ 1 25

if
ZAME_PROTECT_THE_OBJECT_FLAG == 2
    then
    0084: $TNK_TARGET[24@] = ZAME_PROTECT_THE_OBJECT_CHAR // (int)
    jump to @TANK_TARGET_CUCUMBER_SKIP
    else
    random_int 27@ 1 25
    end

else

if and
$ACTIVE_INTERIOR == 0
not $GAMEMODE_HOLD == 1
then
008B: 1@ = $CREATURE_RANDOM2 // (int)
else
random_int 1@ 41 46
end

end

if or
$GAMEMODE_VERSUS == 1
$GAMEMODE_CRAZY == 1
then

random_int 1@ 0 2
if or
1@ == 0
$GAMEMODE_VERSUS == 1
    then
    if and
    COOP_ACTIVE_FLAG == 1
    not $INF_SIDE == 1
        then
        if
        0E4D: random_percent 80
            then
            random_int 1@ 25 44
            else
            0084: $TNK_TARGET[24@] = COOP_ACTOR // (int)
            jump to @TANK_TARGET_CUCUMBER_SKIP
            end
        else
        random_int 1@ 25 44
        end
    else
    random_int 1@ 0 20
    0084: $TNK_TARGET[24@] = $ARMY[1@] // (int)
    jump to @TANK_TARGET_CUCUMBER_SKIP
    end

end

//////////////////////////////////////////////////

0084: $TNK_TARGET[24@] = $CREATURE[1@] // (int)

:TANK_TARGET_CUCUMBER_SKIP

if and
056D:   actor $TNK_TARGET[24@] defined
not 1@ == PLAYER_CREATURE_NUMBER
    then      
    if
    0104:   actor $TANK[24@] near_actor $TNK_TARGET[24@] radius 180.0 180.0 180.0 sphere 0
        then 
        25@ = 1
        else
        $TNK_TARGET[24@] = -69
        end
    else
    $TNK_TARGET[24@] = -69
    end

return

/////////////////////Союзники атакуют танка///////////////

:TANK1_ATTACK_PEOPLE1

if 
$SIMULATING_FLAG == 1
then
return
end

if
$GAMEMODE_VERSUS == 1
then
return
end

if
056D:   actor $TANK[24@] defined
jf @TANK1_ATTACK_PEOPLE_BEGIN
092B: 3@ = group PLAYER_GROUP member 0@

if
07D6:   3@ == COOP_ACTOR // @ == $ (int)
then
return
end

if
not 3@ == -1
jf @TANK1_ATTACK_PEOPLE_BEGIN   
if
056D:   actor 3@ defined
jf @TANK1_ATTACK_PEOPLE_BEGIN

if
$MISSION14_ACTIVE == 1
    then
    if
    not actor.Model(3@) == 250
    jf @TANK1_ATTACK_PEOPLE_BEGIN
    end
    
if and
ZAME_PROTECT_TEAMMATE_NUM > -1
$GAMEMODE_EDITOR == 1
then
if
07D6:   3@ == $SURVIVER[ZAME_PROTECT_TEAMMATE_NUM] // @ == $ (int)
    then
    jump to @TANK1_ATTACK_PEOPLE_BEGIN
    end
end    
    
if
$QUEST_TYPE == 9
    then
    if
    87D6: not  3@ == $VERSUS_PEOPLE[1] // @ == $ (int)
    jf @TANK1_ATTACK_PEOPLE_BEGIN
    end

if or
00DF:   actor 3@ driving
0449:   actor 3@ in_a_car
    then
    if
    $HUNTER_ON_PLAYER == 0
//    $PEOPLE_DONT_ATTACK == 0
//    $COMMAND_STAY_IN_CAR == 0  
        then                     
        gosub @TANK1_ATTACK_PEOPLE_IN_CAR
        end
    end      
 
if and 
not actor.Driving(PLAYER_ACTOR)
$RANDOM_CAR_FLAG == 0  
89DE:   actor 3@ entering_car  
jf @TANK1_ATTACK_PEOPLE_BEGIN
if or
0364:   actor 3@ spotted_actor $TANK[24@]
0364:   actor $TANK[24@] spotted_actor 3@
GROUP_COMMAND_GO_ATTACK == 2
jf @TANK1_ATTACK_PEOPLE_BEGIN
if
00F2:   actor 3@ near_actor $TANK[24@] radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
jf @TANK1_ATTACK_PEOPLE_BEGIN
if and
$HUNTER_ON_PLAYER == 0
$PEOPLE_DONT_ATTACK == 0
jf @TANK1_ATTACK_PEOPLE_BEGIN
if
not actor.Animation(3@) == "FLOOR_hit"
jf @TANK1_ATTACK_PEOPLE_BEGIN
if
$HUNTER_ON_GROUP == 0
jf @TANK1_ATTACK_PEOPLE_BEGIN  
if
044B:   actor 3@ on_foot
jf @TANK1_ATTACK_PEOPLE_BEGIN  
if
82E0: not actor 3@ firing_weapon
jf @TANK1_ATTACK_PEOPLE_BEGIN
062E: get_actor 3@ task 1506 status_store_to 1@ // ret 7 if not found
if 
1@ == 7
jf @TANK1_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "colt45_fire_2hands"
not actor.Animation(3@) == "python_fire" 
not actor.Animation(3@) == "shotgun_fire" 
not actor.Animation(3@) == "buddy_fire" 
not actor.Animation(3@) == "UZI_fire"
not actor.Animation(3@) == "RIFLE_fire" 
jf @TANK1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "FLAME_fire" 
not actor.Animation(3@) == "RocketFire" 
not actor.Animation(3@) == "WEAPON_sniper" 
not actor.Animation(3@) == "WEAPON_throw"
not actor.Animation(3@) == "BOM_PLANT"
jf @TANK1_ATTACK_PEOPLE_BEGIN 
if and
not actor.Animation(3@) == "colt45_crouchfire"
not actor.Animation(3@) == "python_crouchfire" 
not actor.Animation(3@) == "shotgun_crouchfire" 
not actor.Animation(3@) == "buddy_crouchfire" 
not actor.Animation(3@) == "UZI_crouchfire"
not actor.Animation(3@) == "RIFLE_crouchfire" 
jf @TANK1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_reload"
not actor.Animation(3@) == "python_reload" 
not actor.Animation(3@) == "shotgun_reload" 
not actor.Animation(3@) == "buddy_reload" 
not actor.Animation(3@) == "UZI_reload"
not actor.Animation(3@) == "RIFLE_load" 
jf @TANK1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "colt45_crouchreload"
not actor.Animation(3@) == "python_crouchreload" 
not actor.Animation(3@) == "shotgun_crouchreload" 
not actor.Animation(3@) == "buddy_crouchreload" 
not actor.Animation(3@) == "UZI_crouchreload"
not actor.Animation(3@) == "RIFLE_crouchload" 
jf @TANK1_ATTACK_PEOPLE_BEGIN  
if and
not actor.Animation(3@) == "GunMove_BWD"
not actor.Animation(3@) == "GunMove_FWD"
not actor.Animation(3@) == "GunMove_L"
not actor.Animation(3@) == "GunMove_R"
not actor.Animation(3@) == "Gun_2_IDLE"
not actor.Animation(3@) == "GUN_BUTT"
not actor.Animation(3@) == "GUN_BUTT_crouch"
not actor.Animation(3@) == "Gun_stand" 
jf @TANK1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "CLIMB_idle"
not actor.Animation(3@) == "CLIMB_jump"
not actor.Animation(3@) == "CLIMB_jump2fall"
not actor.Animation(3@) == "CLIMB_jump_B"
not actor.Animation(3@) == "CLIMB_Pull"
not actor.Animation(3@) == "CLIMB_Stand"
not actor.Animation(3@) == "CLIMB_Stand_finish" 
jf @TANK1_ATTACK_PEOPLE_BEGIN
if and
not actor.Animation(3@) == "Crouch_Roll_L"
not actor.Animation(3@) == "Crouch_Roll_R"
not actor.Animation(3@) == "gas_cwr"
not actor.Animation(3@) == "getup"
not actor.Animation(3@) == "getup_front"
not actor.Animation(3@) == "GunCrouchBwd"
not actor.Animation(3@) == "GunCrouchFwd"
8E47: not is_char_fighting 3@
jf @TANK1_ATTACK_PEOPLE_BEGIN
05C1: AS_actor 3@ speak_from_audio_table $PEOPLE_ZOMBIE_ATTACK_AUDIO_TABLE
if
056D:   actor 3@ defined
jf @TANK1_ATTACK_PEOPLE_BEGIN 
if and
not actor.Driving(PLAYER_ACTOR)
89DE:   actor PLAYER_ACTOR entering_car
80DF:   actor PLAYER_ACTOR in_a_car
80DF:   actor 3@ in_a_car
not actor.Dead(3@)
jf @TANK1_ATTACK_PEOPLE_BEGIN
//0647: AS_actor 3@ clear_look_task
//05B9: AS_actor 3@ stay_idle 50 ms 
wait 50
if
056D:   actor 3@ defined  
then
05E2: AS_actor 3@ kill_actor $TANK[24@]
end

jump @TANK1_ATTACK_PEOPLE_BEGIN   

:TANK1_ATTACK_PEOPLE_IN_CAR  
if and
not actor.Animation(3@) == "Gang_DrivebyLHS"
not actor.Animation(3@) == "Gang_DrivebyLHS_Bwd"
not actor.Animation(3@) == "Gang_DrivebyLHS_Fwd"
not actor.Animation(3@) == "Gang_DrivebyRHS"
not actor.Animation(3@) == "Gang_DrivebyRHS_Bwd"
not actor.Animation(3@) == "Gang_DrivebyRHS_Fwd" 
jf @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN 
if and
not actor.Animation(3@) == "Gang_DrivebyTop_LHS"
not actor.Animation(3@) == "Gang_DrivebyTop_RHS" 
jf @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN 
if 
00F2:   actor 3@ near_actor $TANK[24@] radius $AI_FIND_RADIUS1 $AI_FIND_RADIUS1 sphere 0
jf @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
if or
0364:   actor 3@ spotted_actor $TANK[24@]
0364:   actor $TANK[24@] spotted_actor 3@
jf @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN

///////////////////////////////////////////////////////////////////////////
if and
0@ == 0
TEAMMATE1_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 1
TEAMMATE2_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 2
TEAMMATE3_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 3
TEAMMATE4_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
if and
0@ == 4
TEAMMATE5_ATTACK_TIMER < TEAMMATE_ATTACK_TIMER_MAX
    then
    jump to @TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
    end
///////////////////////////////////////////////////////////////////////////

if and
8E42: not is_char_doing_task_id 3@ 243
not $COMMAND_STAY_IN_CAR == 1
then
06C9: remove_actor 3@ from_group
0631: put_actor 3@ in_group PLAYER_GROUP
end
0713: actor 3@ driveby_actor $TANK[24@] car -1 point 0.0 0.0 0.0 radius 180.0 8 1 firing_rate 360

///////////////////////////////////////////////////////////////////////////
if
0@ == 0
    then
    TEAMMATE1_ATTACK_TIMER = 0
    end
if
0@ == 1
    then
    TEAMMATE2_ATTACK_TIMER = 0
    end
if
0@ == 2
    then
    TEAMMATE3_ATTACK_TIMER = 0
    end
if
0@ == 3
    then
    TEAMMATE4_ATTACK_TIMER = 0
    end
if
0@ == 4
    then
    TEAMMATE5_ATTACK_TIMER = 0
    end
///////////////////////////////////////////////////////////////////////////
   
return

:TANK1_ATTACK_PEOPLE_IN_CAR_RETURN
return

:TANK1_ATTACK_PEOPLE_BEGIN
return

:TANK_OBJECT_CHECK
0@ = 0
0984: 29@ = object TANK_CLOSEST_OBJ_VAR model

if and
not 29@ == 2969
not 29@ == 1889
not 29@ == 2903
not 29@ == 2919
then
if
8E0C: not is_object_script_controlled TANK_CLOSEST_OBJ_VAR
jf @TANK_OBJECT_CHECK_FAIL
end

if and
not 29@ == 342
not 29@ == 344
not 29@ == 345
not 29@ == 1212
not 29@ == 1277
not 29@ == 1240
not 29@ == 1242
jf @TANK_OBJECT_CHECK_FAIL
if and
not 29@ == 1271
not 29@ == 2993
not 29@ == 3409
jf @TANK_OBJECT_CHECK_FAIL
if and
not 29@ == 969
not 29@ == 2990
jf @TANK_OBJECT_CHECK_FAIL
if and
not 29@ == 986
not 29@ == 985
not 29@ == 988
not 29@ == 976
not 29@ == #GUN_PARA
not 29@ == #GRENADE
not 29@ == #MOLOTOV
not 29@ == #TEARGAS
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 1495
not 29@ == 1497
not 29@ == 1498
not 29@ == 1500
not 29@ == 1501
not 29@ == 1504
not 29@ == 1505
not 29@ == 1506
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 1507
not 29@ == 1493
not 29@ == 1496
not 29@ == 1532
not 29@ == 1533
not 29@ == 1535
not 29@ == 1536
not 29@ == 1537
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 1566
not 29@ == 1560
not 29@ == 1561
not 29@ == 1569
not 29@ == 1538
not 29@ == 3093
not 29@ == 1523
not 29@ == 1491
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 1492
not 29@ == 1494
not 29@ == 1499
not 29@ == 1502
not 29@ == 1499
not 29@ == 2669
jf @TANK_OBJECT_CHECK_FAIL

if and
29@ >= 15134
29@ < 15145
then 
jump @TANK_OBJECT_CHECK_FAIL
end

if and
29@ >= 321
29@ < 374
then 
jump @TANK_OBJECT_CHECK_FAIL
end

if and
29@ >= 12400
29@ < 12544
then 
jump @TANK_OBJECT_CHECK_FAIL
end

if and
not 29@ == 2663
not 29@ == #clothesp
not 29@ == #pain_killer
not 29@ == #PETROLCANM
not 29@ == #CELLPHONE
not 29@ == #drug_red
not 29@ == 1273
not 29@ == 905
jf @TANK_OBJECT_CHECK_FAIL

if 
UNITED_MAP == 0
then

//Garages SA
if and
not 29@ == 2885
not 29@ == 5779
not 29@ == 3294
not 29@ == 5422
not 29@ == 5856
not 29@ == 5061
not 29@ == 5340
not 29@ == 5056
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 6400
not 29@ == 13028
not 29@ == 11102
not 29@ == 11416
not 29@ == 7709
not 29@ == 7707
not 29@ == 7891
not 29@ == 10149
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 8948
not 29@ == 2957
not 29@ == 3084
not 29@ == 1508
not 29@ == 17566
not 29@ == 5043
not 29@ == 10182
not 29@ == 9625
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 17951
not 29@ == 10575
not 29@ == 11313
not 29@ == 11319
not 29@ == 13187
not 29@ == 13188
not 29@ == 16500
not 29@ == 16501
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 10246
not 29@ == 9823
not 29@ == 11327
not 29@ == 10671
not 29@ == 18553
not 29@ == 16637
not 29@ == 7927
not 29@ == 7931
jf @TANK_OBJECT_CHECK_FAIL

if and
not 29@ == 7930
not 29@ == 9099
not 29@ == 9093
not 29@ == 8957
not 29@ == 8378
not 29@ == 16773
not 29@ == 16775
jf @TANK_OBJECT_CHECK_FAIL

end

if
$GAMEMODE_EDITOR == 1
    then
    0907: get_object TANK_CLOSEST_OBJ_VAR mass_to 29@ // float
    if
    29@ < 99999.0
    jf @TANK_OBJECT_CHECK_FAIL
    end
   
return

:TANK_OBJECT_CHECK_FAIL
0@ = 1
return 

:TANK_CHECK_ATTACK_TARGET_EXSIST   

if or
actor.Animation($TANK[24@]) == "tank_run"
8184:   actor $TANK[24@] health < 1
    then 
    return
    end    

if 
$TNK_TARGET_FINDED[24@] == 1
    then
    :TNK_TRGT
    if
    056D:   actor $TNK_TARGET[24@] defined
        then                 
        0687: clear_actor $TANK[24@] task    
        random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
        if
        $GAMEMODE_CRAZY == 1
        then
        0@ *= TANK_TASK_CRAZY_MULT
        0085: 1@ = 24@ // (int)
        1@ *= TANK_TASK_CRAZY_MULT2
        wait 1@
        end
        wait 0@
        wait 24@ 
        if and
        056D:   actor $TNK_TARGET[24@] defined 
        not $TNK_TARGET[24@] == -69   
            then     
            05D9: AS_actor $TANK[24@] run_to_actor $TNK_TARGET[24@] timelimit -1 stop_within_radius 0.001
            return
            else
            $TNK_TARGET_FINDED[24@] = 0
            $TNK_TARGET_PLAYER[24@] = 0
            $TNK_TARGET[24@] = -69
            jump to @TANK_VERSUS_WALK_JUMP
            end
        else
        $TNK_TARGET_FINDED[24@] = 0
        $TNK_TARGET_PLAYER[24@] = 0
        $TNK_TARGET[24@] = -69
        jump to @TANK_VERSUS_WALK_JUMP 
        end
     end     

/////////////////////////////////////////////////////////////////////////////////
        
28@ = 0
        
random_int 27@ 0 $TANK_AGRO_MAX
if and
07D6:   27@ == $TANK_AGRO_SET // @ == $ (int)
$INF_SIDE == 0
$ZOMBIEORGY_MODE_FLAG == 0
$ZOMBIE_DONT_ATTACK_PLAYER == 0
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
84AD: not  actor PLAYER_ACTOR in_water
//84C8: not  actor PLAYER_ACTOR driving_flying_vehicle
then
0084: $TNK_TARGET[24@] = PLAYER_ACTOR // (int)
$TNK_TARGET_FINDED[24@] = 1
$TNK_TARGET_PLAYER[24@] = 1
jump to @TNK_TRGT
end

if
not ZAME_PROTECT_THE_OBJECT_FLAG == 2
then
0084: $TNK_TARGET[24@] = ZAME_PROTECT_THE_OBJECT_CHAR // (int)
$TNK_TARGET_FINDED[24@] = 1
$TNK_TARGET_PLAYER[24@] = 1
jump to @TNK_TRGT
end

:TANK_VERSUS_TARGET_FIND_AGAIN
        
while 856D: not  actor $TNK_TARGET[24@] defined
28@ += 1
        
if or
$SAVESTATUS == 1
28@ > 128
    then
    
    if and
    $GAMEMODE_VERSUS == 0
    $ZOMBIEORGY_MODE_FLAG == 0
    $ZOMBIE_DONT_ATTACK_PLAYER == 0
    84AD: not  actor PLAYER_ACTOR in_water
//    84C8: not  actor PLAYER_ACTOR driving_flying_vehicle
    $ACTOR_DEAD == 0
    $INF_SIDE == 0
    then
    0084: $TNK_TARGET[24@] = PLAYER_ACTOR // (int)
    $TNK_TARGET_FINDED[24@] = 1
    $TNK_TARGET_PLAYER[24@] = 1
    jump to @TNK_TRGT
    else
    
    if or
    $SAVESTATUS == 1
    8104: not  actor $TANK[24@] near_actor PLAYER_ACTOR radius 180.0 180.0 180.0 sphere 0
    then
    0084: $TNK_TARGET[24@] = PLAYER_ACTOR // (int)
    $TNK_TARGET_FINDED[24@] = 1
    $TNK_TARGET_PLAYER[24@] = 1
    jump to @TNK_TRGT
    end            
    
    jump to @TANK_VERSUS_WALK_JUMP
    end
        
    end
        
gosub @TANK_ONFOOT_ATTACK_SYSTEM_TARGET_FIND
end

$TNK_TARGET_FINDED[24@] = 1        
jump to @TNK_TRGT

/////////////////////////////////////////////////////////////////////////////////          

:TANK_VERSUS_WALK_JUMP
0687: clear_actor $TANK[24@] task
random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
if
$GAMEMODE_CRAZY == 1
then
0@ *= TANK_TASK_CRAZY_MULT
0085: 1@ = 24@ // (int)
1@ *= TANK_TASK_CRAZY_MULT2
wait 1@
end
wait 0@
wait 24@          
 
if and
$SPECTATING_FLAG == 0
$INF_SIDE == 0
$ZOMBIE_DONT_ATTACK_PLAYER == 0
then
05D9: AS_actor $TANK[24@] run_to_actor PLAYER_ACTOR timelimit -1 stop_within_radius 1.0
else
05DE: AS_actor $TANK[24@] walk_around_ped_path
end 
    
return

:TANK_ATTACK_TARGET

0687: clear_actor $TANK[24@] task
random_int 0@ TANK_TASK_WAIT_TIME_MIN TANK_TASK_WAIT_TIME_MAX
if
$GAMEMODE_CRAZY == 1
then
0@ *= TANK_TASK_CRAZY_MULT
0085: 1@ = 24@ // (int)
1@ *= TANK_TASK_CRAZY_MULT2
wait 1@
end
wait 0@
wait 24@ 
if
056D:   actor $TNK_TARGET[24@] defined 
    then    
    05D9: AS_actor $TANK[24@] run_to_actor $TNK_TARGET[24@] timelimit -1 stop_within_radius 1.0
    end
    
return

:TANK_RADIKULIT_PROTECTION
if
8818: not  actor $TANK[24@] in_air
then
0792: disembark_instantly_actor $TANK[24@]
end
return

/////////////////////Вычисление координат танка/////////////////////

:TANK_COORD_SET
wait 0

if
$SPAWN_TANK_ON_COORD == 1   
then
0089: 2@ = $TANK_X // (float)
0089: 3@ = $TANK_Y // (float)
0089: 4@ = $TANK_Z // (float)

if
not TANKS_TO_SPAWN_COUNT == 0
then

if
$ACTIVE_INTERIOR == 0
then
0208: 30@ = random_float_in_ranges -2.0 2.0 
005B: 2@ += 30@ // (float)
0208: 30@ = random_float_in_ranges 2.0 -2.0 
005B: 3@ += 30@ // (float)
else
0208: 30@ = random_float_in_ranges -0.5 0.5 
005B: 2@ += 30@ // (float)
0208: 30@ = random_float_in_ranges 0.5 -0.5 
005B: 3@ += 30@ // (float)
end

end

return
end

if
$SPECIAL_INFECTED_SPAWN_OZC_FLAG == 1
then
random_int 0@ 0 $ZOMBIE_COORD_MAX
0089: 2@ = $ZOMBIE_X[0@] // (float)
0089: 3@ = $ZOMBIE_Y[0@] // (float)
0089: 4@ = $ZOMBIE_Z[0@] // (float)
0208: 30@ = random_float_in_ranges -2.0 2.0 
005B: 2@ += 30@ // (float)
0208: 30@ = random_float_in_ranges 2.0 -2.0 
005B: 3@ += 30@ // (float)
return
end

if
$ACTIVE_INTERIOR == 0
jf @TANK_COORD_SET_INTERIOR

0208: 27@ = random_float_in_ranges 100.0 -100.0 
0208: 28@ = random_float_in_ranges -100.0 100.0   
 
04C4: store_coords_to 2@ 3@ 4@ from_actor PLAYER_ACTOR with_offset 27@ 28@ 0.0 
02CE: 4@ = ground_z_at 2@ 3@ 4@

if and
$GAMEMODE_CRAZY == 1
SNOW_ADDON_INSTALLED_FLAG == 1
then
//ice ass skip
else

if
not QUEST_NEST_NUMBER == 15
then

if
UNITED_MAP == 0
then
if or
4@ > 0.25
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 860.55 1031.71 -100.0 cornerB 337.24 710.84 0.0
jf @TANK_COORD_SET
else
if
4@ > 0.25
jf @TANK_COORD_SET
end

end

end 
  
Actor.StorePos(PLAYER_ACTOR, 27@, 28@, 29@)
050A: 30@ = distance_between_XYZ 2@ 3@ 4@ and_XYZ 27@ 28@ 29@ 
0092: 30@ = float 30@ to_integer
if and
30@ > 90 
not 30@ > 120
jf @TANK_COORD_SET
050A: 30@ = distance_between_XYZ 27@ 28@ 4@ and_XYZ 27@ 28@ 29@
0092: 30@ = float 30@ to_integer

if and
$GAMEMODE_CRAZY == 1
SNOW_ADDON_INSTALLED_FLAG == 1
then
//ice ass skip
else

if
UNITED_MAP == 0
then
if or
not 4@ < 0.0
00A4:   actor PLAYER_ACTOR sphere 0 in_cube_cornerA 860.55 1031.71 -100.0 cornerB 337.24 710.84 0.0
jf @TANK_COORD_SET
else
if
not 4@ < 0.0
jf @TANK_COORD_SET
end

end

gosub @TANK_ZONE_CHECK       

if 
0@ == 1
jf @TANK_COORD_SET  

if and
8AE2: 30@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 10.0 find_next 0 pass_wrecked 1 //IF and SET
8AE1: 31@ = random_actor_near_point 2@ 3@ 4@ in_radius 2.0 find_next 0 pass_deads 0 //IF and SET 
jf @TANK_COORD_SET
4@ = -100.0

return 

:TANK_COORD_SET_INTERIOR
wait 0
0208: 27@ = random_float_in_ranges 50.0 -10.0 
0208: 28@ = random_float_in_ranges -10.0 50.0   
04C4: store_coords_to 2@ 3@ 4@ from_actor PLAYER_ACTOR with_offset 27@ 28@ 0.0 
02CE: 4@ = ground_z_at 2@ 3@ 4@
Actor.StorePos(PLAYER_ACTOR, 27@, 28@, 29@)

050A: 30@ = distance_between_XYZ 27@ 28@ 4@ and_XYZ 27@ 28@ 29@ 
0092: 30@ = float 30@ to_integer
if
not 30@ > 3
jf @TANK_COORD_SET_INTERIOR

Actor.StorePos(PLAYER_ACTOR, 27@, 28@, 29@)
050A: 30@ = distance_between_XYZ 2@ 3@ 4@ and_XYZ 27@ 28@ 29@ 
0092: 30@ = float 30@ to_integer
if and
30@ > 3 
not 30@ > 60
jf @TANK_COORD_SET_INTERIOR
if
not 4@ < 0.0
jf @TANK_COORD_SET_INTERIOR
if and
8AE2: 30@ = random_vehicle_near_point 2@ 3@ 4@ in_radius 10.0 find_next 0 pass_wrecked 1 //IF and SET
8AE1: 31@ = random_actor_near_point 2@ 3@ 4@ in_radius 5.0 find_next 0 pass_deads 0 //IF and SET 
jf @TANK_COORD_SET_INTERIOR
if
$GAMEMODE_EDITOR == 1
then
31@ = 999888666
end

return  

:TANK_ZONE_CHECK
0@ = 1  

{$INCLUDE zone_check/Infected Spawn Zone Check.txt}                    

return

:TANK_DIE_SOUND
gosub @TANK_SHUT_UP
gosub @TANK_RANDOM_DIE_SOUND

Audiostream.LinkToActor(TNK_DIE_SOUND, $TANK[24@])
Audiostream.Volume(TNK_DIE_SOUND) = 0.0
Audiostream.PerformAction(TNK_DIE_SOUND, PLAY)

Audiostream.LinkToActor(TNK_DIE_SOUND_SLOW, $TANK[24@])
Audiostream.Volume(TNK_DIE_SOUND_SLOW) = 0.0
Audiostream.PerformAction(TNK_DIE_SOUND_SLOW, PLAY)

0AB9: get_mp3 TNK_DIE_SOUND state_to 0@

while not 0@ == -1
0AB9: get_mp3 TNK_DIE_SOUND state_to 0@
wait 0

0A96: 2@ = actor $TANK[24@] struct
2@ += 0x754
0A8D: 1@ = read_memory 2@ size 4 virtual_protect 0
if
1@ == 0x02
    then
    break
    end

if
$GAME_SPEED == 1.0
then
Audiostream.Volume(TNK_DIE_SOUND) = $SOUNDS_VOLUME
Audiostream.Volume(TNK_DIE_SOUND_SLOW) = 0.0
else
Audiostream.Volume(TNK_DIE_SOUND) = 0.0
Audiostream.Volume(TNK_DIE_SOUND_SLOW) = $SOUNDS_VOLUME
end

end

audiostream.Release(TNK_DIE_SOUND)
audiostream.Release(TNK_DIE_SOUND_SLOW)

return

:TANK_SHUT_UP
gosub @TANK_YELL_SOUND_RELEASE
gosub @TANK_PAIN_SOUND_RELEASE
gosub @TANK_ATTACK_SOUND_RELEASE  
gosub @TANK_CLIMB_SOUND_RELEASE
gosub @TANK_THROW_SOUND_RELEASE 
gosub @TANK_FIRE_SOUND_RELEASE 
return

:TANK_YELL_SOUND_RELEASE

if
TNK_YELL_SOUND_FLAG == 1
then
audiostream.Release(TNK_YELL_SOUND)
TNK_YELL_SOUND_FLAG = 0
end

return

:TANK_PAIN_SOUND_RELEASE

if
TNK_PAIN_SOUND_FLAG == 1
then
audiostream.Release(TNK_PAIN_SOUND)
TNK_PAIN_SOUND_FLAG = 0
end

return

:TANK_ATTACK_SOUND_RELEASE

if
TNK_ATTACK_SOUND_FLAG == 1
then
audiostream.Release(TNK_ATTACK_SOUND)
TNK_ATTACK_SOUND_FLAG = 0
end

return

:TANK_CLIMB_SOUND_RELEASE

if
TNK_CLIMB_SOUND_FLAG == 1
then
audiostream.Release(TNK_CLIMB_SOUND)
TNK_CLIMB_SOUND_FLAG = 0
end

return

:TANK_THROW_SOUND_RELEASE

if
TNK_THROW_SOUND_FLAG == 1
then
audiostream.Release(TNK_THROW_SOUND)
TNK_THROW_SOUND_FLAG = 0
end

return

:TANK_FIRE_SOUND_RELEASE

if
TNK_FIRE_SOUND_FLAG == 1
then
audiostream.Release(TNK_FIRE_SOUND)
TNK_FIRE_SOUND_FLAG = 0
end

return    
             
:TANK_RANDOM_YELL_SOUND
random_int 0@ 0 12

if
0@ == 0
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL1.wav")
end 

if
0@ == 1
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL2.wav")
end 

if
0@ == 2
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL3.wav")
end 

if
0@ == 3
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL4.wav")
end 

if
0@ == 4
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL5.wav")
end 

if
0@ == 5
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL6.wav")
end 

if
0@ == 6
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL7.wav")
end 

if
0@ == 7
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL8.wav")
end 

if
0@ == 8
then                                      
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL9.wav")
end 

if
0@ == 9
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL10.wav")
end 

if
0@ == 10
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL11.wav")
end 

if
0@ == 11
then
TNK_YELL_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_YELL12.wav")
end      

return

:TANK_RANDOM_PAIN_SOUND
random_int 0@ 0 10

if
0@ == 0
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN1.wav")
end 

if
0@ == 1
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN2.wav")
end 

if
0@ == 2
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN3.wav")
end 

if
0@ == 3
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN4.wav")
end 

if
0@ == 4
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN5.wav")
end 

if
0@ == 5
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN6.wav")
end 

if
0@ == 6
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN7.wav")
end 

if
0@ == 7
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN8.wav")
end 

if
0@ == 8
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN9.wav")
end 

if
0@ == 9
then
TNK_PAIN_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_PAIN10.wav")
end 

return
            
:TANK_RANDOM_ATTACK_SOUND
random_int 0@ 0 10

if
0@ == 0
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK1.wav")
end 

if
0@ == 1
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK2.wav")
end 

if
0@ == 2
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK3.wav")
end 

if
0@ == 3
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK4.wav")
end 

if
0@ == 4
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK5.wav")
end 

if
0@ == 5
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK6.wav")
end 

if
0@ == 6
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK7.wav")
end 

if
0@ == 7
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK8.wav")
end 

if
0@ == 8
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK9.wav")
end 

if
0@ == 9
then
TNK_ATTACK_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_ATTACK10.wav")
end 

return

:TANK_RANDOM_CLIMB_SOUND
random_int 0@ 0 5

if
0@ == 0
then
TNK_CLIMB_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_CLIMB1.wav")
end 

if
0@ == 1
then
TNK_CLIMB_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_CLIMB2.wav")
end 

if
0@ == 2
then
TNK_CLIMB_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_CLIMB3.wav")
end 

if
0@ == 3
then
TNK_CLIMB_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_CLIMB4.wav")
end 

if
0@ == 4
then
TNK_CLIMB_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_CLIMB5.wav")
end 

return

:TANK_RANDOM_THROW_SOUND
random_int 0@ 0 9

if
0@ == 0
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW1.wav")
end 

if
0@ == 1
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW2.wav")
end 

if
0@ == 2
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW3.wav")
end 

if
0@ == 3
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW4.wav")
end 

if
0@ == 4
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW5.wav")
end 

if
0@ == 5
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW6.wav")
end 

if
0@ == 6
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW7.wav")
end 

if
0@ == 7
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW8.wav")
end 

if
0@ == 8
then
TNK_THROW_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_THROW9.wav")
end 

return

:TANK_RANDOM_FIRE_SOUND
random_int 0@ 0 8

if
0@ == 0
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE1.wav")
end 

if
0@ == 1
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE2.wav")
end 

if
0@ == 2
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE3.wav")
end 

if
0@ == 3
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE4.wav")
end 

if
0@ == 4
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE5.wav")
end 

if
0@ == 5
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE6.wav")
end 

if
0@ == 6
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE7.wav")
end 

if
0@ == 7
then
TNK_FIRE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_FIRE8.wav")
end 

return

:TANK_RANDOM_DIE_SOUND
random_int 0@ 0 7 

if
0@ == 0
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE1.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE1_SLOW.wav")
end 

if
0@ == 1
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE2.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE2_SLOW.wav")
end 

if
0@ == 2
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE3.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE3_SLOW.wav")
end 

if
0@ == 3
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE4.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE4_SLOW.wav")
end 

if
0@ == 4
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE5.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE5_SLOW.wav")
end 

if
0@ == 5
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE6.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE6_SLOW.wav")
end 

if
0@ == 6
then
TNK_DIE_SOUND = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE7.wav")
TNK_DIE_SOUND_SLOW = Audiostream.Load3D("AUDIO\SOUNDS\infected_sounds\TANK_sounds\TANK_DIE7_SLOW.wav")
end 

return

:TANK_CLIMB_CHECK
0@ = 0
if or
actor.Animation($TANK[24@]) == "CLIMB_idle"
actor.Animation($TANK[24@]) == "CLIMB_jump"
actor.Animation($TANK[24@]) == "CLIMB_jump2fall"
actor.Animation($TANK[24@]) == "CLIMB_jump_B"
actor.Animation($TANK[24@]) == "CLIMB_Pull" 
actor.Animation($TANK[24@]) == "CLIMB_Stand"     
then
0@ = 1
end

return

:TANK_ORIGIN_SPOTTED_PHRASE

repeat
wait 0
until ORIGIN_SPOTTED_SOME_SHIT == 0

ORIGIN_SPOTTED_SOME_SHIT = 1

if
SURVIVAL_CUSTOM_WEAPON_NABOR == 1
then
gosub @RANDOM_DIALOG_BTRAPPER_SPOTTED_TANK
else
gosub @RANDOM_DIALOG_DCD_SPOTTED_TANK
end

09FD: get_gxt_string v$PHRASE3 width_to 1@
0093: 1@ = integer 1@ to_float
1@ *= 8.0
0092: 1@ = float 1@ to_integer

33@ = 0
008B: 31@ = $PHRASES_OFF_FLAG // (int)                    
                    
repeat
wait 0
$PHRASES_OFF_FLAG = 1  
        
0384: show_text_1string GXT v$PHRASE3 string v$NAME3 time 99 1
            
if or
$SAVESTATUS_TRUE == 1
$SAVESTATUS == 1
GAME_OVER_FLAG == 1
    then 
    break
    end
            
until 002D:   33@ >= 1@  // (int)

008A: $PHRASES_OFF_FLAG = 31@ // (int)

ORIGIN_SPOTTED_SOME_SHIT = 0

return   

:RANDOM_DIALOG_DCD_SPOTTED_TANK
    
for 1@ = 0 to 200

v$PHRASE1 = "DC9_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 30@ 0 1@
    end

end  

v$PHRASE1 = "DC9_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:RANDOM_DIALOG_BTRAPPER_SPOTTED_TANK
    
for 1@ = 0 to 200

v$PHRASE1 = "HN9_"
0AD3: v$PHRASE2 = format "%d" 1@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

09FD: get_gxt_string v$PHRASE3 width_to 31@

if
not 31@ == 0
    then    
    1@ += 1
    random_int 30@ 0 1@
    end

end  

v$PHRASE1 = "HN9_"
0AD3: v$PHRASE2 = format "%d" 30@
098B: v$PHRASE3 = v$PHRASE1 + v$PHRASE2

return

:TANK_NUM_GET

if
0@ == 1
then
thread 'TANK1'
end

if
0@ == 2
then
thread 'TANK2'
end

if
0@ == 3
then
thread 'TANK3'
end

if
0@ == 4
then
thread 'TANK4'
end

if
0@ == 5
then
thread 'TANK5'
end

if
0@ == 6
then
thread 'TANK6'
end

if
0@ == 7
then
thread 'TANK7'
end

if
0@ == 8
then
thread 'TANK9'
end

if
0@ == 9
then
thread 'TANK10'
end

if
0@ == 10
then
thread 'TANK11'
end

if
0@ == 11
then
thread 'TANK12'
end

if
0@ == 12
then
thread 'TANK13'
end

if
0@ == 13
then
thread 'TANK14'
end

if
0@ == 14
then
thread 'TANK15'
end

if
0@ == 15
then
thread 'TANK16'
end

if
0@ == 16
then
thread 'TANK17'
end

if
0@ == 17
then
thread 'TANK18'
end

if
0@ == 18
then
thread 'TANK19'
end

if
0@ == 19
then
thread 'TANK20'
end

return